function Ute(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const w of p)if(w.type==="childList")for(const R of w.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&d(R)}).observe(document,{childList:!0,subtree:!0});function l(p){const w={};return p.integrity&&(w.integrity=p.integrity),p.referrerPolicy&&(w.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?w.credentials="include":p.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function d(p){if(p.ep)return;p.ep=!0;const w=l(p);fetch(p.href,w)}})();var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pb(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var K3={exports:{}},B0={},nT={exports:{}},Pr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RD;function e9(){if(RD)return Pr;RD=1;var o=Symbol.for("react.element"),i=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),R=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),U=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),y=Symbol.iterator;function v(Ie){return Ie===null||typeof Ie!="object"?null:(Ie=y&&Ie[y]||Ie["@@iterator"],typeof Ie=="function"?Ie:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,T={};function F(Ie,Ye,mt){this.props=Ie,this.context=Ye,this.refs=T,this.updater=mt||D}F.prototype.isReactComponent={},F.prototype.setState=function(Ie,Ye){if(typeof Ie!="object"&&typeof Ie!="function"&&Ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ie,Ye,"setState")},F.prototype.forceUpdate=function(Ie){this.updater.enqueueForceUpdate(this,Ie,"forceUpdate")};function N(){}N.prototype=F.prototype;function _(Ie,Ye,mt){this.props=Ie,this.context=Ye,this.refs=T,this.updater=mt||D}var I=_.prototype=new N;I.constructor=_,m(I,F.prototype),I.isPureReactComponent=!0;var b=Array.isArray,j=Object.prototype.hasOwnProperty,Y={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function W(Ie,Ye,mt){var Me,We={},rt=null,qt=null;if(Ye!=null)for(Me in Ye.ref!==void 0&&(qt=Ye.ref),Ye.key!==void 0&&(rt=""+Ye.key),Ye)j.call(Ye,Me)&&!$.hasOwnProperty(Me)&&(We[Me]=Ye[Me]);var kt=arguments.length-2;if(kt===1)We.children=mt;else if(1<kt){for(var ft=Array(kt),At=0;At<kt;At++)ft[At]=arguments[At+2];We.children=ft}if(Ie&&Ie.defaultProps)for(Me in kt=Ie.defaultProps,kt)We[Me]===void 0&&(We[Me]=kt[Me]);return{$$typeof:o,type:Ie,key:rt,ref:qt,props:We,_owner:Y.current}}function ue(Ie,Ye){return{$$typeof:o,type:Ie.type,key:Ye,ref:Ie.ref,props:Ie.props,_owner:Ie._owner}}function x(Ie){return typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===o}function X(Ie){var Ye={"=":"=0",":":"=2"};return"$"+Ie.replace(/[=:]/g,function(mt){return Ye[mt]})}var fe=/\/+/g;function oe(Ie,Ye){return typeof Ie=="object"&&Ie!==null&&Ie.key!=null?X(""+Ie.key):Ye.toString(36)}function ge(Ie,Ye,mt,Me,We){var rt=typeof Ie;(rt==="undefined"||rt==="boolean")&&(Ie=null);var qt=!1;if(Ie===null)qt=!0;else switch(rt){case"string":case"number":qt=!0;break;case"object":switch(Ie.$$typeof){case o:case i:qt=!0}}if(qt)return qt=Ie,We=We(qt),Ie=Me===""?"."+oe(qt,0):Me,b(We)?(mt="",Ie!=null&&(mt=Ie.replace(fe,"$&/")+"/"),ge(We,Ye,mt,"",function(At){return At})):We!=null&&(x(We)&&(We=ue(We,mt+(!We.key||qt&&qt.key===We.key?"":(""+We.key).replace(fe,"$&/")+"/")+Ie)),Ye.push(We)),1;if(qt=0,Me=Me===""?".":Me+":",b(Ie))for(var kt=0;kt<Ie.length;kt++){rt=Ie[kt];var ft=Me+oe(rt,kt);qt+=ge(rt,Ye,mt,ft,We)}else if(ft=v(Ie),typeof ft=="function")for(Ie=ft.call(Ie),kt=0;!(rt=Ie.next()).done;)rt=rt.value,ft=Me+oe(rt,kt++),qt+=ge(rt,Ye,mt,ft,We);else if(rt==="object")throw Ye=String(Ie),Error("Objects are not valid as a React child (found: "+(Ye==="[object Object]"?"object with keys {"+Object.keys(Ie).join(", ")+"}":Ye)+"). If you meant to render a collection of children, use an array instead.");return qt}function Re(Ie,Ye,mt){if(Ie==null)return Ie;var Me=[],We=0;return ge(Ie,Me,"","",function(rt){return Ye.call(mt,rt,We++)}),Me}function Je(Ie){if(Ie._status===-1){var Ye=Ie._result;Ye=Ye(),Ye.then(function(mt){(Ie._status===0||Ie._status===-1)&&(Ie._status=1,Ie._result=mt)},function(mt){(Ie._status===0||Ie._status===-1)&&(Ie._status=2,Ie._result=mt)}),Ie._status===-1&&(Ie._status=0,Ie._result=Ye)}if(Ie._status===1)return Ie._result.default;throw Ie._result}var Se={current:null},Be={transition:null},ot={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:Be,ReactCurrentOwner:Y};function st(){throw Error("act(...) is not supported in production builds of React.")}return Pr.Children={map:Re,forEach:function(Ie,Ye,mt){Re(Ie,function(){Ye.apply(this,arguments)},mt)},count:function(Ie){var Ye=0;return Re(Ie,function(){Ye++}),Ye},toArray:function(Ie){return Re(Ie,function(Ye){return Ye})||[]},only:function(Ie){if(!x(Ie))throw Error("React.Children.only expected to receive a single React element child.");return Ie}},Pr.Component=F,Pr.Fragment=l,Pr.Profiler=p,Pr.PureComponent=_,Pr.StrictMode=d,Pr.Suspense=A,Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ot,Pr.act=st,Pr.cloneElement=function(Ie,Ye,mt){if(Ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ie+".");var Me=m({},Ie.props),We=Ie.key,rt=Ie.ref,qt=Ie._owner;if(Ye!=null){if(Ye.ref!==void 0&&(rt=Ye.ref,qt=Y.current),Ye.key!==void 0&&(We=""+Ye.key),Ie.type&&Ie.type.defaultProps)var kt=Ie.type.defaultProps;for(ft in Ye)j.call(Ye,ft)&&!$.hasOwnProperty(ft)&&(Me[ft]=Ye[ft]===void 0&&kt!==void 0?kt[ft]:Ye[ft])}var ft=arguments.length-2;if(ft===1)Me.children=mt;else if(1<ft){kt=Array(ft);for(var At=0;At<ft;At++)kt[At]=arguments[At+2];Me.children=kt}return{$$typeof:o,type:Ie.type,key:We,ref:rt,props:Me,_owner:qt}},Pr.createContext=function(Ie){return Ie={$$typeof:R,_currentValue:Ie,_currentValue2:Ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ie.Provider={$$typeof:w,_context:Ie},Ie.Consumer=Ie},Pr.createElement=W,Pr.createFactory=function(Ie){var Ye=W.bind(null,Ie);return Ye.type=Ie,Ye},Pr.createRef=function(){return{current:null}},Pr.forwardRef=function(Ie){return{$$typeof:g,render:Ie}},Pr.isValidElement=x,Pr.lazy=function(Ie){return{$$typeof:C,_payload:{_status:-1,_result:Ie},_init:Je}},Pr.memo=function(Ie,Ye){return{$$typeof:U,type:Ie,compare:Ye===void 0?null:Ye}},Pr.startTransition=function(Ie){var Ye=Be.transition;Be.transition={};try{Ie()}finally{Be.transition=Ye}},Pr.unstable_act=st,Pr.useCallback=function(Ie,Ye){return Se.current.useCallback(Ie,Ye)},Pr.useContext=function(Ie){return Se.current.useContext(Ie)},Pr.useDebugValue=function(){},Pr.useDeferredValue=function(Ie){return Se.current.useDeferredValue(Ie)},Pr.useEffect=function(Ie,Ye){return Se.current.useEffect(Ie,Ye)},Pr.useId=function(){return Se.current.useId()},Pr.useImperativeHandle=function(Ie,Ye,mt){return Se.current.useImperativeHandle(Ie,Ye,mt)},Pr.useInsertionEffect=function(Ie,Ye){return Se.current.useInsertionEffect(Ie,Ye)},Pr.useLayoutEffect=function(Ie,Ye){return Se.current.useLayoutEffect(Ie,Ye)},Pr.useMemo=function(Ie,Ye){return Se.current.useMemo(Ie,Ye)},Pr.useReducer=function(Ie,Ye,mt){return Se.current.useReducer(Ie,Ye,mt)},Pr.useRef=function(Ie){return Se.current.useRef(Ie)},Pr.useState=function(Ie){return Se.current.useState(Ie)},Pr.useSyncExternalStore=function(Ie,Ye,mt){return Se.current.useSyncExternalStore(Ie,Ye,mt)},Pr.useTransition=function(){return Se.current.useTransition()},Pr.version="18.3.1",Pr}var xD;function j0(){return xD||(xD=1,nT.exports=e9()),nT.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t9=j0(),n9=Symbol.for("react.element"),r9=Symbol.for("react.fragment"),i9=Object.prototype.hasOwnProperty,o9=t9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a9={key:!0,ref:!0,__self:!0,__source:!0};function V3(o,i,l){var d,p={},w=null,R=null;l!==void 0&&(w=""+l),i.key!==void 0&&(w=""+i.key),i.ref!==void 0&&(R=i.ref);for(d in i)i9.call(i,d)&&!a9.hasOwnProperty(d)&&(p[d]=i[d]);if(o&&o.defaultProps)for(d in i=o.defaultProps,i)p[d]===void 0&&(p[d]=i[d]);return{$$typeof:n9,type:o,key:w,ref:R,props:p,_owner:o9.current}}B0.Fragment=r9;B0.jsx=V3;B0.jsxs=V3;K3.exports=B0;var It=K3.exports,iI={},z3={exports:{}},ds={},Y3={exports:{}},W3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function i(Be,ot){var st=Be.length;Be.push(ot);e:for(;0<st;){var Ie=st-1>>>1,Ye=Be[Ie];if(0<p(Ye,ot))Be[Ie]=ot,Be[st]=Ye,st=Ie;else break e}}function l(Be){return Be.length===0?null:Be[0]}function d(Be){if(Be.length===0)return null;var ot=Be[0],st=Be.pop();if(st!==ot){Be[0]=st;e:for(var Ie=0,Ye=Be.length,mt=Ye>>>1;Ie<mt;){var Me=2*(Ie+1)-1,We=Be[Me],rt=Me+1,qt=Be[rt];if(0>p(We,st))rt<Ye&&0>p(qt,We)?(Be[Ie]=qt,Be[rt]=st,Ie=rt):(Be[Ie]=We,Be[Me]=st,Ie=Me);else if(rt<Ye&&0>p(qt,st))Be[Ie]=qt,Be[rt]=st,Ie=rt;else break e}}return ot}function p(Be,ot){var st=Be.sortIndex-ot.sortIndex;return st!==0?st:Be.id-ot.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;o.unstable_now=function(){return w.now()}}else{var R=Date,g=R.now();o.unstable_now=function(){return R.now()-g}}var A=[],U=[],C=1,y=null,v=3,D=!1,m=!1,T=!1,F=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Be){for(var ot=l(U);ot!==null;){if(ot.callback===null)d(U);else if(ot.startTime<=Be)d(U),ot.sortIndex=ot.expirationTime,i(A,ot);else break;ot=l(U)}}function b(Be){if(T=!1,I(Be),!m)if(l(A)!==null)m=!0,Je(j);else{var ot=l(U);ot!==null&&Se(b,ot.startTime-Be)}}function j(Be,ot){m=!1,T&&(T=!1,N(W),W=-1),D=!0;var st=v;try{for(I(ot),y=l(A);y!==null&&(!(y.expirationTime>ot)||Be&&!X());){var Ie=y.callback;if(typeof Ie=="function"){y.callback=null,v=y.priorityLevel;var Ye=Ie(y.expirationTime<=ot);ot=o.unstable_now(),typeof Ye=="function"?y.callback=Ye:y===l(A)&&d(A),I(ot)}else d(A);y=l(A)}if(y!==null)var mt=!0;else{var Me=l(U);Me!==null&&Se(b,Me.startTime-ot),mt=!1}return mt}finally{y=null,v=st,D=!1}}var Y=!1,$=null,W=-1,ue=5,x=-1;function X(){return!(o.unstable_now()-x<ue)}function fe(){if($!==null){var Be=o.unstable_now();x=Be;var ot=!0;try{ot=$(!0,Be)}finally{ot?oe():(Y=!1,$=null)}}else Y=!1}var oe;if(typeof _=="function")oe=function(){_(fe)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Re=ge.port2;ge.port1.onmessage=fe,oe=function(){Re.postMessage(null)}}else oe=function(){F(fe,0)};function Je(Be){$=Be,Y||(Y=!0,oe())}function Se(Be,ot){W=F(function(){Be(o.unstable_now())},ot)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Be){Be.callback=null},o.unstable_continueExecution=function(){m||D||(m=!0,Je(j))},o.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<Be?Math.floor(1e3/Be):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_getFirstCallbackNode=function(){return l(A)},o.unstable_next=function(Be){switch(v){case 1:case 2:case 3:var ot=3;break;default:ot=v}var st=v;v=ot;try{return Be()}finally{v=st}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Be,ot){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var st=v;v=Be;try{return ot()}finally{v=st}},o.unstable_scheduleCallback=function(Be,ot,st){var Ie=o.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?Ie+st:Ie):st=Ie,Be){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=st+Ye,Be={id:C++,callback:ot,priorityLevel:Be,startTime:st,expirationTime:Ye,sortIndex:-1},st>Ie?(Be.sortIndex=st,i(U,Be),l(A)===null&&Be===l(U)&&(T?(N(W),W=-1):T=!0,Se(b,st-Ie))):(Be.sortIndex=Ye,i(A,Be),m||D||(m=!0,Je(j))),Be},o.unstable_shouldYield=X,o.unstable_wrapCallback=function(Be){var ot=v;return function(){var st=v;v=ot;try{return Be.apply(this,arguments)}finally{v=st}}}})(W3);Y3.exports=W3;var s9=Y3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u9=j0(),fs=s9;function jn(o){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+o,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+o+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $3=new Set,Ag={};function Ef(o,i){ch(o,i),ch(o+"Capture",i)}function ch(o,i){for(Ag[o]=i,o=0;o<i.length;o++)$3.add(i[o])}var vl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oI=Object.prototype.hasOwnProperty,l9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ND={},MD={};function c9(o){return oI.call(MD,o)?!0:oI.call(ND,o)?!1:l9.test(o)?MD[o]=!0:(ND[o]=!0,!1)}function f9(o,i,l,d){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function d9(o,i,l,d){if(i===null||typeof i>"u"||f9(o,i,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Sa(o,i,l,d,p,w,R){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=o,this.type=i,this.sanitizeURL=w,this.removeEmptyString=R}var Go={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){Go[o]=new Sa(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var i=o[0];Go[i]=new Sa(i,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){Go[o]=new Sa(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){Go[o]=new Sa(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){Go[o]=new Sa(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){Go[o]=new Sa(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){Go[o]=new Sa(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){Go[o]=new Sa(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){Go[o]=new Sa(o,5,!1,o.toLowerCase(),null,!1,!1)});var gb=/[\-:]([a-z])/g;function mb(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var i=o.replace(gb,mb);Go[i]=new Sa(i,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var i=o.replace(gb,mb);Go[i]=new Sa(i,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var i=o.replace(gb,mb);Go[i]=new Sa(i,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){Go[o]=new Sa(o,1,!1,o.toLowerCase(),null,!1,!1)});Go.xlinkHref=new Sa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){Go[o]=new Sa(o,1,!1,o.toLowerCase(),null,!0,!0)});function vb(o,i,l,d){var p=Go.hasOwnProperty(i)?Go[i]:null;(p!==null?p.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(d9(i,l,p,d)&&(l=null),d||p===null?c9(i)&&(l===null?o.removeAttribute(i):o.setAttribute(i,""+l)):p.mustUseProperty?o[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,d=p.attributeNamespace,l===null?o.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?o.setAttributeNS(d,i,l):o.setAttribute(i,l))))}var Tl=u9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Iy=Symbol.for("react.element"),qd=Symbol.for("react.portal"),Hd=Symbol.for("react.fragment"),yb=Symbol.for("react.strict_mode"),aI=Symbol.for("react.profiler"),X3=Symbol.for("react.provider"),Q3=Symbol.for("react.context"),Eb=Symbol.for("react.forward_ref"),sI=Symbol.for("react.suspense"),uI=Symbol.for("react.suspense_list"),_b=Symbol.for("react.memo"),Wl=Symbol.for("react.lazy"),J3=Symbol.for("react.offscreen"),DD=Symbol.iterator;function Yp(o){return o===null||typeof o!="object"?null:(o=DD&&o[DD]||o["@@iterator"],typeof o=="function"?o:null)}var Vi=Object.assign,rT;function sg(o){if(rT===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);rT=i&&i[1]||""}return"\n"+rT+o}var iT=!1;function oT(o,i){if(!o||iT)return"";iT=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(U){var d=U}Reflect.construct(o,[],i)}else{try{i.call()}catch(U){d=U}o.call(i.prototype)}else{try{throw Error()}catch(U){d=U}o()}}catch(U){if(U&&d&&typeof U.stack=="string"){for(var p=U.stack.split("\n"),w=d.stack.split("\n"),R=p.length-1,g=w.length-1;1<=R&&0<=g&&p[R]!==w[g];)g--;for(;1<=R&&0<=g;R--,g--)if(p[R]!==w[g]){if(R!==1||g!==1)do if(R--,g--,0>g||p[R]!==w[g]){var A="\n"+p[R].replace(" at new "," at ");return o.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",o.displayName)),A}while(1<=R&&0<=g);break}}}finally{iT=!1,Error.prepareStackTrace=l}return(o=o?o.displayName||o.name:"")?sg(o):""}function h9(o){switch(o.tag){case 5:return sg(o.type);case 16:return sg("Lazy");case 13:return sg("Suspense");case 19:return sg("SuspenseList");case 0:case 2:case 15:return o=oT(o.type,!1),o;case 11:return o=oT(o.type.render,!1),o;case 1:return o=oT(o.type,!0),o;default:return""}}function lI(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case Hd:return"Fragment";case qd:return"Portal";case aI:return"Profiler";case yb:return"StrictMode";case sI:return"Suspense";case uI:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Q3:return(o.displayName||"Context")+".Consumer";case X3:return(o._context.displayName||"Context")+".Provider";case Eb:var i=o.render;return o=o.displayName,o||(o=i.displayName||i.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case _b:return i=o.displayName||null,i!==null?i:lI(o.type)||"Memo";case Wl:i=o._payload,o=o._init;try{return lI(o(i))}catch(l){}}return null}function p9(o){var i=o.type;switch(o.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=i.render,o=o.displayName||o.name||"",i.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lI(i);case 8:return i===yb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function cc(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function eF(o){var i=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function g9(o){var i=eF(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,i),d=""+o[i];if(!o.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,w=l.set;return Object.defineProperty(o,i,{configurable:!0,get:function(){return p.call(this)},set:function(R){d=""+R,w.call(this,R)}}),Object.defineProperty(o,i,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(R){d=""+R},stopTracking:function(){o._valueTracker=null,delete o[i]}}}}function by(o){o._valueTracker||(o._valueTracker=g9(o))}function tF(o){if(!o)return!1;var i=o._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return o&&(d=eF(o)?o.checked?"true":"false":o.value),o=d,o!==l?(i.setValue(o),!0):!1}function u0(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch(i){return o.body}}function cI(o,i){var l=i.checked;return Vi({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l!=null?l:o._wrapperState.initialChecked})}function PD(o,i){var l=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;l=cc(i.value!=null?i.value:l),o._wrapperState={initialChecked:d,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function nF(o,i){i=i.checked,i!=null&&vb(o,"checked",i,!1)}function fI(o,i){nF(o,i);var l=cc(i.value),d=i.type;if(l!=null)d==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+l):o.value!==""+l&&(o.value=""+l);else if(d==="submit"||d==="reset"){o.removeAttribute("value");return}i.hasOwnProperty("value")?dI(o,i.type,l):i.hasOwnProperty("defaultValue")&&dI(o,i.type,cc(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(o.defaultChecked=!!i.defaultChecked)}function OD(o,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+o._wrapperState.initialValue,l||i===o.value||(o.value=i),o.defaultValue=i}l=o.name,l!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,l!==""&&(o.name=l)}function dI(o,i,l){(i!=="number"||u0(o.ownerDocument)!==o)&&(l==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+l&&(o.defaultValue=""+l))}var ug=Array.isArray;function ih(o,i,l,d){if(o=o.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<o.length;l++)p=i.hasOwnProperty("$"+o[l].value),o[l].selected!==p&&(o[l].selected=p),p&&d&&(o[l].defaultSelected=!0)}else{for(l=""+cc(l),i=null,p=0;p<o.length;p++){if(o[p].value===l){o[p].selected=!0,d&&(o[p].defaultSelected=!0);return}i!==null||o[p].disabled||(i=o[p])}i!==null&&(i.selected=!0)}}function hI(o,i){if(i.dangerouslySetInnerHTML!=null)throw Error(jn(91));return Vi({},i,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function LD(o,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(jn(92));if(ug(l)){if(1<l.length)throw Error(jn(93));l=l[0]}i=l}i==null&&(i=""),l=i}o._wrapperState={initialValue:cc(l)}}function rF(o,i){var l=cc(i.value),d=cc(i.defaultValue);l!=null&&(l=""+l,l!==o.value&&(o.value=l),i.defaultValue==null&&o.defaultValue!==l&&(o.defaultValue=l)),d!=null&&(o.defaultValue=""+d)}function kD(o){var i=o.textContent;i===o._wrapperState.initialValue&&i!==""&&i!==null&&(o.value=i)}function iF(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pI(o,i){return o==null||o==="http://www.w3.org/1999/xhtml"?iF(i):o==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Cy,oF=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,d,p){MSApp.execUnsafeLocalFunction(function(){return o(i,l,d,p)})}:o}(function(o,i){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=i;else{for(Cy=Cy||document.createElement("div"),Cy.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Cy.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;i.firstChild;)o.appendChild(i.firstChild)}});function Ig(o,i){if(i){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=i;return}}o.textContent=i}var pg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m9=["Webkit","ms","Moz","O"];Object.keys(pg).forEach(function(o){m9.forEach(function(i){i=i+o.charAt(0).toUpperCase()+o.substring(1),pg[i]=pg[o]})});function aF(o,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||pg.hasOwnProperty(o)&&pg[o]?(""+i).trim():i+"px"}function sF(o,i){o=o.style;for(var l in i)if(i.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=aF(l,i[l],d);l==="float"&&(l="cssFloat"),d?o.setProperty(l,p):o[l]=p}}var v9=Vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gI(o,i){if(i){if(v9[o]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(jn(137,o));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(jn(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(jn(61))}if(i.style!=null&&typeof i.style!="object")throw Error(jn(62))}}function mI(o,i){if(o.indexOf("-")===-1)return typeof i.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vI=null;function Tb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yI=null,oh=null,ah=null;function FD(o){if(o=Yg(o)){if(typeof yI!="function")throw Error(jn(280));var i=o.stateNode;i&&(i=K0(i),yI(o.stateNode,o.type,i))}}function uF(o){oh?ah?ah.push(o):ah=[o]:oh=o}function lF(){if(oh){var o=oh,i=ah;if(ah=oh=null,FD(o),i)for(o=0;o<i.length;o++)FD(i[o])}}function cF(o,i){return o(i)}function fF(){}var aT=!1;function dF(o,i,l){if(aT)return o(i,l);aT=!0;try{return cF(o,i,l)}finally{aT=!1,(oh!==null||ah!==null)&&(fF(),lF())}}function bg(o,i){var l=o.stateNode;if(l===null)return null;var d=K0(l);if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(jn(231,i,typeof l));return l}var EI=!1;if(vl)try{var Wp={};Object.defineProperty(Wp,"passive",{get:function(){EI=!0}}),window.addEventListener("test",Wp,Wp),window.removeEventListener("test",Wp,Wp)}catch(o){EI=!1}function y9(o,i,l,d,p,w,R,g,A){var U=Array.prototype.slice.call(arguments,3);try{i.apply(l,U)}catch(C){this.onError(C)}}var gg=!1,l0=null,c0=!1,_I=null,E9={onError:function(o){gg=!0,l0=o}};function _9(o,i,l,d,p,w,R,g,A){gg=!1,l0=null,y9.apply(E9,arguments)}function T9(o,i,l,d,p,w,R,g,A){if(_9.apply(this,arguments),gg){if(gg){var U=l0;gg=!1,l0=null}else throw Error(jn(198));c0||(c0=!0,_I=U)}}function _f(o){var i=o,l=o;if(o.alternate)for(;i.return;)i=i.return;else{o=i;do i=o,i.flags&4098&&(l=i.return),o=i.return;while(o)}return i.tag===3?l:null}function hF(o){if(o.tag===13){var i=o.memoizedState;if(i===null&&(o=o.alternate,o!==null&&(i=o.memoizedState)),i!==null)return i.dehydrated}return null}function UD(o){if(_f(o)!==o)throw Error(jn(188))}function S9(o){var i=o.alternate;if(!i){if(i=_f(o),i===null)throw Error(jn(188));return i!==o?null:o}for(var l=o,d=i;;){var p=l.return;if(p===null)break;var w=p.alternate;if(w===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===w.child){for(w=p.child;w;){if(w===l)return UD(p),o;if(w===d)return UD(p),i;w=w.sibling}throw Error(jn(188))}if(l.return!==d.return)l=p,d=w;else{for(var R=!1,g=p.child;g;){if(g===l){R=!0,l=p,d=w;break}if(g===d){R=!0,d=p,l=w;break}g=g.sibling}if(!R){for(g=w.child;g;){if(g===l){R=!0,l=w,d=p;break}if(g===d){R=!0,d=w,l=p;break}g=g.sibling}if(!R)throw Error(jn(189))}}if(l.alternate!==d)throw Error(jn(190))}if(l.tag!==3)throw Error(jn(188));return l.stateNode.current===l?o:i}function pF(o){return o=S9(o),o!==null?gF(o):null}function gF(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var i=gF(o);if(i!==null)return i;o=o.sibling}return null}var mF=fs.unstable_scheduleCallback,BD=fs.unstable_cancelCallback,w9=fs.unstable_shouldYield,A9=fs.unstable_requestPaint,lo=fs.unstable_now,I9=fs.unstable_getCurrentPriorityLevel,Sb=fs.unstable_ImmediatePriority,vF=fs.unstable_UserBlockingPriority,f0=fs.unstable_NormalPriority,b9=fs.unstable_LowPriority,yF=fs.unstable_IdlePriority,Z0=null,Nu=null;function C9(o){if(Nu&&typeof Nu.onCommitFiberRoot=="function")try{Nu.onCommitFiberRoot(Z0,o,void 0,(o.current.flags&128)===128)}catch(i){}}var iu=Math.clz32?Math.clz32:N9,R9=Math.log,x9=Math.LN2;function N9(o){return o>>>=0,o===0?32:31-(R9(o)/x9|0)|0}var Ry=64,xy=4194304;function lg(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function d0(o,i){var l=o.pendingLanes;if(l===0)return 0;var d=0,p=o.suspendedLanes,w=o.pingedLanes,R=l&268435455;if(R!==0){var g=R&~p;g!==0?d=lg(g):(w&=R,w!==0&&(d=lg(w)))}else R=l&~p,R!==0?d=lg(R):w!==0&&(d=lg(w));if(d===0)return 0;if(i!==0&&i!==d&&!(i&p)&&(p=d&-d,w=i&-i,p>=w||p===16&&(w&4194240)!==0))return i;if(d&4&&(d|=l&16),i=o.entangledLanes,i!==0)for(o=o.entanglements,i&=d;0<i;)l=31-iu(i),p=1<<l,d|=o[l],i&=~p;return d}function M9(o,i){switch(o){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D9(o,i){for(var l=o.suspendedLanes,d=o.pingedLanes,p=o.expirationTimes,w=o.pendingLanes;0<w;){var R=31-iu(w),g=1<<R,A=p[R];A===-1?(!(g&l)||g&d)&&(p[R]=M9(g,i)):A<=i&&(o.expiredLanes|=g),w&=~g}}function TI(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function EF(){var o=Ry;return Ry<<=1,!(Ry&4194240)&&(Ry=64),o}function sT(o){for(var i=[],l=0;31>l;l++)i.push(o);return i}function Vg(o,i,l){o.pendingLanes|=i,i!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,i=31-iu(i),o[i]=l}function P9(o,i){var l=o.pendingLanes&~i;o.pendingLanes=i,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=i,o.mutableReadLanes&=i,o.entangledLanes&=i,i=o.entanglements;var d=o.eventTimes;for(o=o.expirationTimes;0<l;){var p=31-iu(l),w=1<<p;i[p]=0,d[p]=-1,o[p]=-1,l&=~w}}function wb(o,i){var l=o.entangledLanes|=i;for(o=o.entanglements;l;){var d=31-iu(l),p=1<<d;p&i|o[d]&i&&(o[d]|=i),l&=~p}}var di=0;function _F(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var TF,Ab,SF,wF,AF,SI=!1,Ny=[],tc=null,nc=null,rc=null,Cg=new Map,Rg=new Map,Xl=[],O9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jD(o,i){switch(o){case"focusin":case"focusout":tc=null;break;case"dragenter":case"dragleave":nc=null;break;case"mouseover":case"mouseout":rc=null;break;case"pointerover":case"pointerout":Cg.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rg.delete(i.pointerId)}}function $p(o,i,l,d,p,w){return o===null||o.nativeEvent!==w?(o={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:w,targetContainers:[p]},i!==null&&(i=Yg(i),i!==null&&Ab(i)),o):(o.eventSystemFlags|=d,i=o.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),o)}function L9(o,i,l,d,p){switch(i){case"focusin":return tc=$p(tc,o,i,l,d,p),!0;case"dragenter":return nc=$p(nc,o,i,l,d,p),!0;case"mouseover":return rc=$p(rc,o,i,l,d,p),!0;case"pointerover":var w=p.pointerId;return Cg.set(w,$p(Cg.get(w)||null,o,i,l,d,p)),!0;case"gotpointercapture":return w=p.pointerId,Rg.set(w,$p(Rg.get(w)||null,o,i,l,d,p)),!0}return!1}function IF(o){var i=rf(o.target);if(i!==null){var l=_f(i);if(l!==null){if(i=l.tag,i===13){if(i=hF(l),i!==null){o.blockedOn=i,AF(o.priority,function(){SF(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Wy(o){if(o.blockedOn!==null)return!1;for(var i=o.targetContainers;0<i.length;){var l=wI(o.domEventName,o.eventSystemFlags,i[0],o.nativeEvent);if(l===null){l=o.nativeEvent;var d=new l.constructor(l.type,l);vI=d,l.target.dispatchEvent(d),vI=null}else return i=Yg(l),i!==null&&Ab(i),o.blockedOn=l,!1;i.shift()}return!0}function ZD(o,i,l){Wy(o)&&l.delete(i)}function k9(){SI=!1,tc!==null&&Wy(tc)&&(tc=null),nc!==null&&Wy(nc)&&(nc=null),rc!==null&&Wy(rc)&&(rc=null),Cg.forEach(ZD),Rg.forEach(ZD)}function Xp(o,i){o.blockedOn===i&&(o.blockedOn=null,SI||(SI=!0,fs.unstable_scheduleCallback(fs.unstable_NormalPriority,k9)))}function xg(o){function i(p){return Xp(p,o)}if(0<Ny.length){Xp(Ny[0],o);for(var l=1;l<Ny.length;l++){var d=Ny[l];d.blockedOn===o&&(d.blockedOn=null)}}for(tc!==null&&Xp(tc,o),nc!==null&&Xp(nc,o),rc!==null&&Xp(rc,o),Cg.forEach(i),Rg.forEach(i),l=0;l<Xl.length;l++)d=Xl[l],d.blockedOn===o&&(d.blockedOn=null);for(;0<Xl.length&&(l=Xl[0],l.blockedOn===null);)IF(l),l.blockedOn===null&&Xl.shift()}var sh=Tl.ReactCurrentBatchConfig,h0=!0;function F9(o,i,l,d){var p=di,w=sh.transition;sh.transition=null;try{di=1,Ib(o,i,l,d)}finally{di=p,sh.transition=w}}function U9(o,i,l,d){var p=di,w=sh.transition;sh.transition=null;try{di=4,Ib(o,i,l,d)}finally{di=p,sh.transition=w}}function Ib(o,i,l,d){if(h0){var p=wI(o,i,l,d);if(p===null)vT(o,i,d,p0,l),jD(o,d);else if(L9(p,o,i,l,d))d.stopPropagation();else if(jD(o,d),i&4&&-1<O9.indexOf(o)){for(;p!==null;){var w=Yg(p);if(w!==null&&TF(w),w=wI(o,i,l,d),w===null&&vT(o,i,d,p0,l),w===p)break;p=w}p!==null&&d.stopPropagation()}else vT(o,i,d,null,l)}}var p0=null;function wI(o,i,l,d){if(p0=null,o=Tb(d),o=rf(o),o!==null)if(i=_f(o),i===null)o=null;else if(l=i.tag,l===13){if(o=hF(i),o!==null)return o;o=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null);return p0=o,null}function bF(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I9()){case Sb:return 1;case vF:return 4;case f0:case b9:return 16;case yF:return 536870912;default:return 16}default:return 16}}var Jl=null,bb=null,$y=null;function CF(){if($y)return $y;var o,i=bb,l=i.length,d,p="value"in Jl?Jl.value:Jl.textContent,w=p.length;for(o=0;o<l&&i[o]===p[o];o++);var R=l-o;for(d=1;d<=R&&i[l-d]===p[w-d];d++);return $y=p.slice(o,1<d?1-d:void 0)}function Xy(o){var i=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&i===13&&(o=13)):o=i,o===10&&(o=13),32<=o||o===13?o:0}function My(){return!0}function GD(){return!1}function hs(o){function i(l,d,p,w,R){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=w,this.target=R,this.currentTarget=null;for(var g in o)o.hasOwnProperty(g)&&(l=o[g],this[g]=l?l(w):w[g]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?My:GD,this.isPropagationStopped=GD,this}return Vi(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=My)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=My)},persist:function(){},isPersistent:My}),i}var Eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cb=hs(Eh),zg=Vi({},Eh,{view:0,detail:0}),B9=hs(zg),uT,lT,Qp,G0=Vi({},zg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rb,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Qp&&(Qp&&o.type==="mousemove"?(uT=o.screenX-Qp.screenX,lT=o.screenY-Qp.screenY):lT=uT=0,Qp=o),uT)},movementY:function(o){return"movementY"in o?o.movementY:lT}}),qD=hs(G0),j9=Vi({},G0,{dataTransfer:0}),Z9=hs(j9),G9=Vi({},zg,{relatedTarget:0}),cT=hs(G9),q9=Vi({},Eh,{animationName:0,elapsedTime:0,pseudoElement:0}),H9=hs(q9),K9=Vi({},Eh,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),V9=hs(K9),z9=Vi({},Eh,{data:0}),HD=hs(z9),Y9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X9(o){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(o):(o=$9[o])?!!i[o]:!1}function Rb(){return X9}var Q9=Vi({},zg,{key:function(o){if(o.key){var i=Y9[o.key]||o.key;if(i!=="Unidentified")return i}return o.type==="keypress"?(o=Xy(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?W9[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rb,charCode:function(o){return o.type==="keypress"?Xy(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Xy(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),J9=hs(Q9),eq=Vi({},G0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KD=hs(eq),tq=Vi({},zg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rb}),nq=hs(tq),rq=Vi({},Eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),iq=hs(rq),oq=Vi({},G0,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),aq=hs(oq),sq=[9,13,27,32],xb=vl&&"CompositionEvent"in window,mg=null;vl&&"documentMode"in document&&(mg=document.documentMode);var uq=vl&&"TextEvent"in window&&!mg,RF=vl&&(!xb||mg&&8<mg&&11>=mg),VD=" ",zD=!1;function xF(o,i){switch(o){case"keyup":return sq.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NF(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Kd=!1;function lq(o,i){switch(o){case"compositionend":return NF(i);case"keypress":return i.which!==32?null:(zD=!0,VD);case"textInput":return o=i.data,o===VD&&zD?null:o;default:return null}}function cq(o,i){if(Kd)return o==="compositionend"||!xb&&xF(o,i)?(o=CF(),$y=bb=Jl=null,Kd=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return RF&&i.locale!=="ko"?null:i.data;default:return null}}var fq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YD(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i==="input"?!!fq[o.type]:i==="textarea"}function MF(o,i,l,d){uF(d),i=g0(i,"onChange"),0<i.length&&(l=new Cb("onChange","change",null,l,d),o.push({event:l,listeners:i}))}var vg=null,Ng=null;function dq(o){GF(o,0)}function q0(o){var i=Yd(o);if(tF(i))return o}function hq(o,i){if(o==="change")return i}var DF=!1;if(vl){var fT;if(vl){var dT="oninput"in document;if(!dT){var WD=document.createElement("div");WD.setAttribute("oninput","return;"),dT=typeof WD.oninput=="function"}fT=dT}else fT=!1;DF=fT&&(!document.documentMode||9<document.documentMode)}function $D(){vg&&(vg.detachEvent("onpropertychange",PF),Ng=vg=null)}function PF(o){if(o.propertyName==="value"&&q0(Ng)){var i=[];MF(i,Ng,o,Tb(o)),dF(dq,i)}}function pq(o,i,l){o==="focusin"?($D(),vg=i,Ng=l,vg.attachEvent("onpropertychange",PF)):o==="focusout"&&$D()}function gq(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return q0(Ng)}function mq(o,i){if(o==="click")return q0(i)}function vq(o,i){if(o==="input"||o==="change")return q0(i)}function yq(o,i){return o===i&&(o!==0||1/o===1/i)||o!==o&&i!==i}var au=typeof Object.is=="function"?Object.is:yq;function Mg(o,i){if(au(o,i))return!0;if(typeof o!="object"||o===null||typeof i!="object"||i===null)return!1;var l=Object.keys(o),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!oI.call(i,p)||!au(o[p],i[p]))return!1}return!0}function XD(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function QD(o,i){var l=XD(o);o=0;for(var d;l;){if(l.nodeType===3){if(d=o+l.textContent.length,o<=i&&d>=i)return{node:l,offset:i-o};o=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=XD(l)}}function OF(o,i){return o&&i?o===i?!0:o&&o.nodeType===3?!1:i&&i.nodeType===3?OF(o,i.parentNode):"contains"in o?o.contains(i):o.compareDocumentPosition?!!(o.compareDocumentPosition(i)&16):!1:!1}function LF(){for(var o=window,i=u0();i instanceof o.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch(d){l=!1}if(l)o=i.contentWindow;else break;i=u0(o.document)}return i}function Nb(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i&&(i==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||i==="textarea"||o.contentEditable==="true")}function Eq(o){var i=LF(),l=o.focusedElem,d=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&OF(l.ownerDocument.documentElement,l)){if(d!==null&&Nb(l)){if(i=d.start,o=d.end,o===void 0&&(o=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(o,l.value.length);else if(o=(i=l.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var p=l.textContent.length,w=Math.min(d.start,p);d=d.end===void 0?w:Math.min(d.end,p),!o.extend&&w>d&&(p=d,d=w,w=p),p=QD(l,w);var R=QD(l,d);p&&R&&(o.rangeCount!==1||o.anchorNode!==p.node||o.anchorOffset!==p.offset||o.focusNode!==R.node||o.focusOffset!==R.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),o.removeAllRanges(),w>d?(o.addRange(i),o.extend(R.node,R.offset)):(i.setEnd(R.node,R.offset),o.addRange(i)))}}for(i=[],o=l;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)o=i[l],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var _q=vl&&"documentMode"in document&&11>=document.documentMode,Vd=null,AI=null,yg=null,II=!1;function JD(o,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;II||Vd==null||Vd!==u0(d)||(d=Vd,"selectionStart"in d&&Nb(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),yg&&Mg(yg,d)||(yg=d,d=g0(AI,"onSelect"),0<d.length&&(i=new Cb("onSelect","select",null,i,l),o.push({event:i,listeners:d}),i.target=Vd)))}function Dy(o,i){var l={};return l[o.toLowerCase()]=i.toLowerCase(),l["Webkit"+o]="webkit"+i,l["Moz"+o]="moz"+i,l}var zd={animationend:Dy("Animation","AnimationEnd"),animationiteration:Dy("Animation","AnimationIteration"),animationstart:Dy("Animation","AnimationStart"),transitionend:Dy("Transition","TransitionEnd")},hT={},kF={};vl&&(kF=document.createElement("div").style,"AnimationEvent"in window||(delete zd.animationend.animation,delete zd.animationiteration.animation,delete zd.animationstart.animation),"TransitionEvent"in window||delete zd.transitionend.transition);function H0(o){if(hT[o])return hT[o];if(!zd[o])return o;var i=zd[o],l;for(l in i)if(i.hasOwnProperty(l)&&l in kF)return hT[o]=i[l];return o}var FF=H0("animationend"),UF=H0("animationiteration"),BF=H0("animationstart"),jF=H0("transitionend"),ZF=new Map,eP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dc(o,i){ZF.set(o,i),Ef(i,[o])}for(var pT=0;pT<eP.length;pT++){var gT=eP[pT],Tq=gT.toLowerCase(),Sq=gT[0].toUpperCase()+gT.slice(1);dc(Tq,"on"+Sq)}dc(FF,"onAnimationEnd");dc(UF,"onAnimationIteration");dc(BF,"onAnimationStart");dc("dblclick","onDoubleClick");dc("focusin","onFocus");dc("focusout","onBlur");dc(jF,"onTransitionEnd");ch("onMouseEnter",["mouseout","mouseover"]);ch("onMouseLeave",["mouseout","mouseover"]);ch("onPointerEnter",["pointerout","pointerover"]);ch("onPointerLeave",["pointerout","pointerover"]);Ef("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ef("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ef("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ef("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ef("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ef("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wq=new Set("cancel close invalid load scroll toggle".split(" ").concat(cg));function tP(o,i,l){var d=o.type||"unknown-event";o.currentTarget=l,T9(d,i,void 0,o),o.currentTarget=null}function GF(o,i){i=(i&4)!==0;for(var l=0;l<o.length;l++){var d=o[l],p=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var R=d.length-1;0<=R;R--){var g=d[R],A=g.instance,U=g.currentTarget;if(g=g.listener,A!==w&&p.isPropagationStopped())break e;tP(p,g,U),w=A}else for(R=0;R<d.length;R++){if(g=d[R],A=g.instance,U=g.currentTarget,g=g.listener,A!==w&&p.isPropagationStopped())break e;tP(p,g,U),w=A}}}if(c0)throw o=_I,c0=!1,_I=null,o}function xi(o,i){var l=i[NI];l===void 0&&(l=i[NI]=new Set);var d=o+"__bubble";l.has(d)||(qF(i,o,2,!1),l.add(d))}function mT(o,i,l){var d=0;i&&(d|=4),qF(l,o,d,i)}var Py="_reactListening"+Math.random().toString(36).slice(2);function Dg(o){if(!o[Py]){o[Py]=!0,$3.forEach(function(l){l!=="selectionchange"&&(wq.has(l)||mT(l,!1,o),mT(l,!0,o))});var i=o.nodeType===9?o:o.ownerDocument;i===null||i[Py]||(i[Py]=!0,mT("selectionchange",!1,i))}}function qF(o,i,l,d){switch(bF(i)){case 1:var p=F9;break;case 4:p=U9;break;default:p=Ib}l=p.bind(null,i,l,o),p=void 0,!EI||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),d?p!==void 0?o.addEventListener(i,l,{capture:!0,passive:p}):o.addEventListener(i,l,!0):p!==void 0?o.addEventListener(i,l,{passive:p}):o.addEventListener(i,l,!1)}function vT(o,i,l,d,p){var w=d;if(!(i&1)&&!(i&2)&&d!==null)e:for(;;){if(d===null)return;var R=d.tag;if(R===3||R===4){var g=d.stateNode.containerInfo;if(g===p||g.nodeType===8&&g.parentNode===p)break;if(R===4)for(R=d.return;R!==null;){var A=R.tag;if((A===3||A===4)&&(A=R.stateNode.containerInfo,A===p||A.nodeType===8&&A.parentNode===p))return;R=R.return}for(;g!==null;){if(R=rf(g),R===null)return;if(A=R.tag,A===5||A===6){d=w=R;continue e}g=g.parentNode}}d=d.return}dF(function(){var U=w,C=Tb(l),y=[];e:{var v=ZF.get(o);if(v!==void 0){var D=Cb,m=o;switch(o){case"keypress":if(Xy(l)===0)break e;case"keydown":case"keyup":D=J9;break;case"focusin":m="focus",D=cT;break;case"focusout":m="blur",D=cT;break;case"beforeblur":case"afterblur":D=cT;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=qD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=Z9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=nq;break;case FF:case UF:case BF:D=H9;break;case jF:D=iq;break;case"scroll":D=B9;break;case"wheel":D=aq;break;case"copy":case"cut":case"paste":D=V9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=KD}var T=(i&4)!==0,F=!T&&o==="scroll",N=T?v!==null?v+"Capture":null:v;T=[];for(var _=U,I;_!==null;){I=_;var b=I.stateNode;if(I.tag===5&&b!==null&&(I=b,N!==null&&(b=bg(_,N),b!=null&&T.push(Pg(_,b,I)))),F)break;_=_.return}0<T.length&&(v=new D(v,m,null,l,C),y.push({event:v,listeners:T}))}}if(!(i&7)){e:{if(v=o==="mouseover"||o==="pointerover",D=o==="mouseout"||o==="pointerout",v&&l!==vI&&(m=l.relatedTarget||l.fromElement)&&(rf(m)||m[yl]))break e;if((D||v)&&(v=C.window===C?C:(v=C.ownerDocument)?v.defaultView||v.parentWindow:window,D?(m=l.relatedTarget||l.toElement,D=U,m=m?rf(m):null,m!==null&&(F=_f(m),m!==F||m.tag!==5&&m.tag!==6)&&(m=null)):(D=null,m=U),D!==m)){if(T=qD,b="onMouseLeave",N="onMouseEnter",_="mouse",(o==="pointerout"||o==="pointerover")&&(T=KD,b="onPointerLeave",N="onPointerEnter",_="pointer"),F=D==null?v:Yd(D),I=m==null?v:Yd(m),v=new T(b,_+"leave",D,l,C),v.target=F,v.relatedTarget=I,b=null,rf(C)===U&&(T=new T(N,_+"enter",m,l,C),T.target=I,T.relatedTarget=F,b=T),F=b,D&&m)t:{for(T=D,N=m,_=0,I=T;I;I=Ud(I))_++;for(I=0,b=N;b;b=Ud(b))I++;for(;0<_-I;)T=Ud(T),_--;for(;0<I-_;)N=Ud(N),I--;for(;_--;){if(T===N||N!==null&&T===N.alternate)break t;T=Ud(T),N=Ud(N)}T=null}else T=null;D!==null&&nP(y,v,D,T,!1),m!==null&&F!==null&&nP(y,F,m,T,!0)}}e:{if(v=U?Yd(U):window,D=v.nodeName&&v.nodeName.toLowerCase(),D==="select"||D==="input"&&v.type==="file")var j=hq;else if(YD(v))if(DF)j=vq;else{j=gq;var Y=pq}else(D=v.nodeName)&&D.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(j=mq);if(j&&(j=j(o,U))){MF(y,j,l,C);break e}Y&&Y(o,v,U),o==="focusout"&&(Y=v._wrapperState)&&Y.controlled&&v.type==="number"&&dI(v,"number",v.value)}switch(Y=U?Yd(U):window,o){case"focusin":(YD(Y)||Y.contentEditable==="true")&&(Vd=Y,AI=U,yg=null);break;case"focusout":yg=AI=Vd=null;break;case"mousedown":II=!0;break;case"contextmenu":case"mouseup":case"dragend":II=!1,JD(y,l,C);break;case"selectionchange":if(_q)break;case"keydown":case"keyup":JD(y,l,C)}var $;if(xb)e:{switch(o){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else Kd?xF(o,l)&&(W="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(W="onCompositionStart");W&&(RF&&l.locale!=="ko"&&(Kd||W!=="onCompositionStart"?W==="onCompositionEnd"&&Kd&&($=CF()):(Jl=C,bb="value"in Jl?Jl.value:Jl.textContent,Kd=!0)),Y=g0(U,W),0<Y.length&&(W=new HD(W,o,null,l,C),y.push({event:W,listeners:Y}),$?W.data=$:($=NF(l),$!==null&&(W.data=$)))),($=uq?lq(o,l):cq(o,l))&&(U=g0(U,"onBeforeInput"),0<U.length&&(C=new HD("onBeforeInput","beforeinput",null,l,C),y.push({event:C,listeners:U}),C.data=$))}GF(y,i)})}function Pg(o,i,l){return{instance:o,listener:i,currentTarget:l}}function g0(o,i){for(var l=i+"Capture",d=[];o!==null;){var p=o,w=p.stateNode;p.tag===5&&w!==null&&(p=w,w=bg(o,l),w!=null&&d.unshift(Pg(o,w,p)),w=bg(o,i),w!=null&&d.push(Pg(o,w,p))),o=o.return}return d}function Ud(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function nP(o,i,l,d,p){for(var w=i._reactName,R=[];l!==null&&l!==d;){var g=l,A=g.alternate,U=g.stateNode;if(A!==null&&A===d)break;g.tag===5&&U!==null&&(g=U,p?(A=bg(l,w),A!=null&&R.unshift(Pg(l,A,g))):p||(A=bg(l,w),A!=null&&R.push(Pg(l,A,g)))),l=l.return}R.length!==0&&o.push({event:i,listeners:R})}var Aq=/\r\n?/g,Iq=/\u0000|\uFFFD/g;function rP(o){return(typeof o=="string"?o:""+o).replace(Aq,"\n").replace(Iq,"")}function Oy(o,i,l){if(i=rP(i),rP(o)!==i&&l)throw Error(jn(425))}function m0(){}var bI=null,CI=null;function RI(o,i){return o==="textarea"||o==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var xI=typeof setTimeout=="function"?setTimeout:void 0,bq=typeof clearTimeout=="function"?clearTimeout:void 0,iP=typeof Promise=="function"?Promise:void 0,Cq=typeof queueMicrotask=="function"?queueMicrotask:typeof iP<"u"?function(o){return iP.resolve(null).then(o).catch(Rq)}:xI;function Rq(o){setTimeout(function(){throw o})}function yT(o,i){var l=i,d=0;do{var p=l.nextSibling;if(o.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){o.removeChild(p),xg(i);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);xg(i)}function ic(o){for(;o!=null;o=o.nextSibling){var i=o.nodeType;if(i===1||i===3)break;if(i===8){if(i=o.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return o}function oP(o){o=o.previousSibling;for(var i=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return o;i--}else l==="/$"&&i++}o=o.previousSibling}return null}var _h=Math.random().toString(36).slice(2),xu="__reactFiber$"+_h,Og="__reactProps$"+_h,yl="__reactContainer$"+_h,NI="__reactEvents$"+_h,xq="__reactListeners$"+_h,Nq="__reactHandles$"+_h;function rf(o){var i=o[xu];if(i)return i;for(var l=o.parentNode;l;){if(i=l[yl]||l[xu]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(o=oP(o);o!==null;){if(l=o[xu])return l;o=oP(o)}return i}o=l,l=o.parentNode}return null}function Yg(o){return o=o[xu]||o[yl],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Yd(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(jn(33))}function K0(o){return o[Og]||null}var MI=[],Wd=-1;function hc(o){return{current:o}}function Ni(o){0>Wd||(o.current=MI[Wd],MI[Wd]=null,Wd--)}function Ii(o,i){Wd++,MI[Wd]=o.current,o.current=i}var fc={},Jo=hc(fc),Ua=hc(!1),df=fc;function fh(o,i){var l=o.type.contextTypes;if(!l)return fc;var d=o.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var p={},w;for(w in l)p[w]=i[w];return d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=i,o.__reactInternalMemoizedMaskedChildContext=p),p}function Ba(o){return o=o.childContextTypes,o!=null}function v0(){Ni(Ua),Ni(Jo)}function aP(o,i,l){if(Jo.current!==fc)throw Error(jn(168));Ii(Jo,i),Ii(Ua,l)}function HF(o,i,l){var d=o.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in i))throw Error(jn(108,p9(o)||"Unknown",p));return Vi({},l,d)}function y0(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||fc,df=Jo.current,Ii(Jo,o),Ii(Ua,Ua.current),!0}function sP(o,i,l){var d=o.stateNode;if(!d)throw Error(jn(169));l?(o=HF(o,i,df),d.__reactInternalMemoizedMergedChildContext=o,Ni(Ua),Ni(Jo),Ii(Jo,o)):Ni(Ua),Ii(Ua,l)}var hl=null,V0=!1,ET=!1;function KF(o){hl===null?hl=[o]:hl.push(o)}function Mq(o){V0=!0,KF(o)}function pc(){if(!ET&&hl!==null){ET=!0;var o=0,i=di;try{var l=hl;for(di=1;o<l.length;o++){var d=l[o];do d=d(!0);while(d!==null)}hl=null,V0=!1}catch(p){throw hl!==null&&(hl=hl.slice(o+1)),mF(Sb,pc),p}finally{di=i,ET=!1}}return null}var $d=[],Xd=0,E0=null,_0=0,ws=[],As=0,hf=null,pl=1,gl="";function Jc(o,i){$d[Xd++]=_0,$d[Xd++]=E0,E0=o,_0=i}function VF(o,i,l){ws[As++]=pl,ws[As++]=gl,ws[As++]=hf,hf=o;var d=pl;o=gl;var p=32-iu(d)-1;d&=~(1<<p),l+=1;var w=32-iu(i)+p;if(30<w){var R=p-p%5;w=(d&(1<<R)-1).toString(32),d>>=R,p-=R,pl=1<<32-iu(i)+p|l<<p|d,gl=w+o}else pl=1<<w|l<<p|d,gl=o}function Mb(o){o.return!==null&&(Jc(o,1),VF(o,1,0))}function Db(o){for(;o===E0;)E0=$d[--Xd],$d[Xd]=null,_0=$d[--Xd],$d[Xd]=null;for(;o===hf;)hf=ws[--As],ws[As]=null,gl=ws[--As],ws[As]=null,pl=ws[--As],ws[As]=null}var cs=null,us=null,Ui=!1,Js=null;function zF(o,i){var l=bs(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=o,i=o.deletions,i===null?(o.deletions=[l],o.flags|=16):i.push(l)}function uP(o,i){switch(o.tag){case 5:var l=o.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(o.stateNode=i,cs=o,us=ic(i.firstChild),!0):!1;case 6:return i=o.pendingProps===""||i.nodeType!==3?null:i,i!==null?(o.stateNode=i,cs=o,us=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=hf!==null?{id:pl,overflow:gl}:null,o.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=bs(18,null,null,0),l.stateNode=i,l.return=o,o.child=l,cs=o,us=null,!0):!1;default:return!1}}function DI(o){return(o.mode&1)!==0&&(o.flags&128)===0}function PI(o){if(Ui){var i=us;if(i){var l=i;if(!uP(o,i)){if(DI(o))throw Error(jn(418));i=ic(l.nextSibling);var d=cs;i&&uP(o,i)?zF(d,l):(o.flags=o.flags&-4097|2,Ui=!1,cs=o)}}else{if(DI(o))throw Error(jn(418));o.flags=o.flags&-4097|2,Ui=!1,cs=o}}}function lP(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;cs=o}function Ly(o){if(o!==cs)return!1;if(!Ui)return lP(o),Ui=!0,!1;var i;if((i=o.tag!==3)&&!(i=o.tag!==5)&&(i=o.type,i=i!=="head"&&i!=="body"&&!RI(o.type,o.memoizedProps)),i&&(i=us)){if(DI(o))throw YF(),Error(jn(418));for(;i;)zF(o,i),i=ic(i.nextSibling)}if(lP(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(jn(317));e:{for(o=o.nextSibling,i=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"){if(i===0){us=ic(o.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}o=o.nextSibling}us=null}}else us=cs?ic(o.stateNode.nextSibling):null;return!0}function YF(){for(var o=us;o;)o=ic(o.nextSibling)}function dh(){us=cs=null,Ui=!1}function Pb(o){Js===null?Js=[o]:Js.push(o)}var Dq=Tl.ReactCurrentBatchConfig;function Jp(o,i,l){if(o=l.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(jn(309));var d=l.stateNode}if(!d)throw Error(jn(147,o));var p=d,w=""+o;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===w?i.ref:(i=function(R){var g=p.refs;R===null?delete g[w]:g[w]=R},i._stringRef=w,i)}if(typeof o!="string")throw Error(jn(284));if(!l._owner)throw Error(jn(290,o))}return o}function ky(o,i){throw o=Object.prototype.toString.call(i),Error(jn(31,o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o))}function cP(o){var i=o._init;return i(o._payload)}function WF(o){function i(N,_){if(o){var I=N.deletions;I===null?(N.deletions=[_],N.flags|=16):I.push(_)}}function l(N,_){if(!o)return null;for(;_!==null;)i(N,_),_=_.sibling;return null}function d(N,_){for(N=new Map;_!==null;)_.key!==null?N.set(_.key,_):N.set(_.index,_),_=_.sibling;return N}function p(N,_){return N=uc(N,_),N.index=0,N.sibling=null,N}function w(N,_,I){return N.index=I,o?(I=N.alternate,I!==null?(I=I.index,I<_?(N.flags|=2,_):I):(N.flags|=2,_)):(N.flags|=1048576,_)}function R(N){return o&&N.alternate===null&&(N.flags|=2),N}function g(N,_,I,b){return _===null||_.tag!==6?(_=bT(I,N.mode,b),_.return=N,_):(_=p(_,I),_.return=N,_)}function A(N,_,I,b){var j=I.type;return j===Hd?C(N,_,I.props.children,b,I.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wl&&cP(j)===_.type)?(b=p(_,I.props),b.ref=Jp(N,_,I),b.return=N,b):(b=i0(I.type,I.key,I.props,null,N.mode,b),b.ref=Jp(N,_,I),b.return=N,b)}function U(N,_,I,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=CT(I,N.mode,b),_.return=N,_):(_=p(_,I.children||[]),_.return=N,_)}function C(N,_,I,b,j){return _===null||_.tag!==7?(_=lf(I,N.mode,b,j),_.return=N,_):(_=p(_,I),_.return=N,_)}function y(N,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=bT(""+_,N.mode,I),_.return=N,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Iy:return I=i0(_.type,_.key,_.props,null,N.mode,I),I.ref=Jp(N,null,_),I.return=N,I;case qd:return _=CT(_,N.mode,I),_.return=N,_;case Wl:var b=_._init;return y(N,b(_._payload),I)}if(ug(_)||Yp(_))return _=lf(_,N.mode,I,null),_.return=N,_;ky(N,_)}return null}function v(N,_,I,b){var j=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return j!==null?null:g(N,_,""+I,b);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Iy:return I.key===j?A(N,_,I,b):null;case qd:return I.key===j?U(N,_,I,b):null;case Wl:return j=I._init,v(N,_,j(I._payload),b)}if(ug(I)||Yp(I))return j!==null?null:C(N,_,I,b,null);ky(N,I)}return null}function D(N,_,I,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return N=N.get(I)||null,g(_,N,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Iy:return N=N.get(b.key===null?I:b.key)||null,A(_,N,b,j);case qd:return N=N.get(b.key===null?I:b.key)||null,U(_,N,b,j);case Wl:var Y=b._init;return D(N,_,I,Y(b._payload),j)}if(ug(b)||Yp(b))return N=N.get(I)||null,C(_,N,b,j,null);ky(_,b)}return null}function m(N,_,I,b){for(var j=null,Y=null,$=_,W=_=0,ue=null;$!==null&&W<I.length;W++){$.index>W?(ue=$,$=null):ue=$.sibling;var x=v(N,$,I[W],b);if(x===null){$===null&&($=ue);break}o&&$&&x.alternate===null&&i(N,$),_=w(x,_,W),Y===null?j=x:Y.sibling=x,Y=x,$=ue}if(W===I.length)return l(N,$),Ui&&Jc(N,W),j;if($===null){for(;W<I.length;W++)$=y(N,I[W],b),$!==null&&(_=w($,_,W),Y===null?j=$:Y.sibling=$,Y=$);return Ui&&Jc(N,W),j}for($=d(N,$);W<I.length;W++)ue=D($,N,W,I[W],b),ue!==null&&(o&&ue.alternate!==null&&$.delete(ue.key===null?W:ue.key),_=w(ue,_,W),Y===null?j=ue:Y.sibling=ue,Y=ue);return o&&$.forEach(function(X){return i(N,X)}),Ui&&Jc(N,W),j}function T(N,_,I,b){var j=Yp(I);if(typeof j!="function")throw Error(jn(150));if(I=j.call(I),I==null)throw Error(jn(151));for(var Y=j=null,$=_,W=_=0,ue=null,x=I.next();$!==null&&!x.done;W++,x=I.next()){$.index>W?(ue=$,$=null):ue=$.sibling;var X=v(N,$,x.value,b);if(X===null){$===null&&($=ue);break}o&&$&&X.alternate===null&&i(N,$),_=w(X,_,W),Y===null?j=X:Y.sibling=X,Y=X,$=ue}if(x.done)return l(N,$),Ui&&Jc(N,W),j;if($===null){for(;!x.done;W++,x=I.next())x=y(N,x.value,b),x!==null&&(_=w(x,_,W),Y===null?j=x:Y.sibling=x,Y=x);return Ui&&Jc(N,W),j}for($=d(N,$);!x.done;W++,x=I.next())x=D($,N,W,x.value,b),x!==null&&(o&&x.alternate!==null&&$.delete(x.key===null?W:x.key),_=w(x,_,W),Y===null?j=x:Y.sibling=x,Y=x);return o&&$.forEach(function(fe){return i(N,fe)}),Ui&&Jc(N,W),j}function F(N,_,I,b){if(typeof I=="object"&&I!==null&&I.type===Hd&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Iy:e:{for(var j=I.key,Y=_;Y!==null;){if(Y.key===j){if(j=I.type,j===Hd){if(Y.tag===7){l(N,Y.sibling),_=p(Y,I.props.children),_.return=N,N=_;break e}}else if(Y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Wl&&cP(j)===Y.type){l(N,Y.sibling),_=p(Y,I.props),_.ref=Jp(N,Y,I),_.return=N,N=_;break e}l(N,Y);break}else i(N,Y);Y=Y.sibling}I.type===Hd?(_=lf(I.props.children,N.mode,b,I.key),_.return=N,N=_):(b=i0(I.type,I.key,I.props,null,N.mode,b),b.ref=Jp(N,_,I),b.return=N,N=b)}return R(N);case qd:e:{for(Y=I.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){l(N,_.sibling),_=p(_,I.children||[]),_.return=N,N=_;break e}else{l(N,_);break}else i(N,_);_=_.sibling}_=CT(I,N.mode,b),_.return=N,N=_}return R(N);case Wl:return Y=I._init,F(N,_,Y(I._payload),b)}if(ug(I))return m(N,_,I,b);if(Yp(I))return T(N,_,I,b);ky(N,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(l(N,_.sibling),_=p(_,I),_.return=N,N=_):(l(N,_),_=bT(I,N.mode,b),_.return=N,N=_),R(N)):l(N,_)}return F}var hh=WF(!0),$F=WF(!1),T0=hc(null),S0=null,Qd=null,Ob=null;function Lb(){Ob=Qd=S0=null}function kb(o){var i=T0.current;Ni(T0),o._currentValue=i}function OI(o,i,l){for(;o!==null;){var d=o.alternate;if((o.childLanes&i)!==i?(o.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),o===l)break;o=o.return}}function uh(o,i){S0=o,Ob=Qd=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&i&&(Fa=!0),o.firstContext=null)}function Rs(o){var i=o._currentValue;if(Ob!==o)if(o={context:o,memoizedValue:i,next:null},Qd===null){if(S0===null)throw Error(jn(308));Qd=o,S0.dependencies={lanes:0,firstContext:o}}else Qd=Qd.next=o;return i}var of=null;function Fb(o){of===null?of=[o]:of.push(o)}function XF(o,i,l,d){var p=i.interleaved;return p===null?(l.next=l,Fb(i)):(l.next=p.next,p.next=l),i.interleaved=l,El(o,d)}function El(o,i){o.lanes|=i;var l=o.alternate;for(l!==null&&(l.lanes|=i),l=o,o=o.return;o!==null;)o.childLanes|=i,l=o.alternate,l!==null&&(l.childLanes|=i),l=o,o=o.return;return l.tag===3?l.stateNode:null}var $l=!1;function Ub(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QF(o,i){o=o.updateQueue,i.updateQueue===o&&(i.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ml(o,i){return{eventTime:o,lane:i,tag:0,payload:null,callback:null,next:null}}function oc(o,i,l){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,$r&2){var p=d.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),d.pending=i,El(o,l)}return p=d.interleaved,p===null?(i.next=i,Fb(d)):(i.next=p.next,p.next=i),d.interleaved=i,El(o,l)}function Qy(o,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var d=i.lanes;d&=o.pendingLanes,l|=d,i.lanes=l,wb(o,l)}}function fP(o,i){var l=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var R={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};w===null?p=w=R:w=w.next=R,l=l.next}while(l!==null);w===null?p=w=i:w=w.next=i}else p=w=i;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:w,shared:d.shared,effects:d.effects},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=i:o.next=i,l.lastBaseUpdate=i}function w0(o,i,l,d){var p=o.updateQueue;$l=!1;var w=p.firstBaseUpdate,R=p.lastBaseUpdate,g=p.shared.pending;if(g!==null){p.shared.pending=null;var A=g,U=A.next;A.next=null,R===null?w=U:R.next=U,R=A;var C=o.alternate;C!==null&&(C=C.updateQueue,g=C.lastBaseUpdate,g!==R&&(g===null?C.firstBaseUpdate=U:g.next=U,C.lastBaseUpdate=A))}if(w!==null){var y=p.baseState;R=0,C=U=A=null,g=w;do{var v=g.lane,D=g.eventTime;if((d&v)===v){C!==null&&(C=C.next={eventTime:D,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var m=o,T=g;switch(v=i,D=l,T.tag){case 1:if(m=T.payload,typeof m=="function"){y=m.call(D,y,v);break e}y=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=T.payload,v=typeof m=="function"?m.call(D,y,v):m,v==null)break e;y=Vi({},y,v);break e;case 2:$l=!0}}g.callback!==null&&g.lane!==0&&(o.flags|=64,v=p.effects,v===null?p.effects=[g]:v.push(g))}else D={eventTime:D,lane:v,tag:g.tag,payload:g.payload,callback:g.callback,next:null},C===null?(U=C=D,A=y):C=C.next=D,R|=v;if(g=g.next,g===null){if(g=p.shared.pending,g===null)break;v=g,g=v.next,v.next=null,p.lastBaseUpdate=v,p.shared.pending=null}}while(!0);if(C===null&&(A=y),p.baseState=A,p.firstBaseUpdate=U,p.lastBaseUpdate=C,i=p.shared.interleaved,i!==null){p=i;do R|=p.lane,p=p.next;while(p!==i)}else w===null&&(p.shared.lanes=0);gf|=R,o.lanes=R,o.memoizedState=y}}function dP(o,i,l){if(o=i.effects,i.effects=null,o!==null)for(i=0;i<o.length;i++){var d=o[i],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(jn(191,p));p.call(d)}}}var Wg={},Mu=hc(Wg),Lg=hc(Wg),kg=hc(Wg);function af(o){if(o===Wg)throw Error(jn(174));return o}function Bb(o,i){switch(Ii(kg,i),Ii(Lg,o),Ii(Mu,Wg),o=i.nodeType,o){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:pI(null,"");break;default:o=o===8?i.parentNode:i,i=o.namespaceURI||null,o=o.tagName,i=pI(i,o)}Ni(Mu),Ii(Mu,i)}function ph(){Ni(Mu),Ni(Lg),Ni(kg)}function JF(o){af(kg.current);var i=af(Mu.current),l=pI(i,o.type);i!==l&&(Ii(Lg,o),Ii(Mu,l))}function jb(o){Lg.current===o&&(Ni(Mu),Ni(Lg))}var qi=hc(0);function A0(o){for(var i=o;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var _T=[];function Zb(){for(var o=0;o<_T.length;o++)_T[o]._workInProgressVersionPrimary=null;_T.length=0}var Jy=Tl.ReactCurrentDispatcher,TT=Tl.ReactCurrentBatchConfig,pf=0,Ki=null,To=null,No=null,I0=!1,Eg=!1,Fg=0,Pq=0;function Wo(){throw Error(jn(321))}function Gb(o,i){if(i===null)return!1;for(var l=0;l<i.length&&l<o.length;l++)if(!au(o[l],i[l]))return!1;return!0}function qb(o,i,l,d,p,w){if(pf=w,Ki=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Jy.current=o===null||o.memoizedState===null?Fq:Uq,o=l(d,p),Eg){w=0;do{if(Eg=!1,Fg=0,25<=w)throw Error(jn(301));w+=1,No=To=null,i.updateQueue=null,Jy.current=Bq,o=l(d,p)}while(Eg)}if(Jy.current=b0,i=To!==null&&To.next!==null,pf=0,No=To=Ki=null,I0=!1,i)throw Error(jn(300));return o}function Hb(){var o=Fg!==0;return Fg=0,o}function Ru(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return No===null?Ki.memoizedState=No=o:No=No.next=o,No}function xs(){if(To===null){var o=Ki.alternate;o=o!==null?o.memoizedState:null}else o=To.next;var i=No===null?Ki.memoizedState:No.next;if(i!==null)No=i,To=o;else{if(o===null)throw Error(jn(310));To=o,o={memoizedState:To.memoizedState,baseState:To.baseState,baseQueue:To.baseQueue,queue:To.queue,next:null},No===null?Ki.memoizedState=No=o:No=No.next=o}return No}function Ug(o,i){return typeof i=="function"?i(o):i}function ST(o){var i=xs(),l=i.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=o;var d=To,p=d.baseQueue,w=l.pending;if(w!==null){if(p!==null){var R=p.next;p.next=w.next,w.next=R}d.baseQueue=p=w,l.pending=null}if(p!==null){w=p.next,d=d.baseState;var g=R=null,A=null,U=w;do{var C=U.lane;if((pf&C)===C)A!==null&&(A=A.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),d=U.hasEagerState?U.eagerState:o(d,U.action);else{var y={lane:C,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};A===null?(g=A=y,R=d):A=A.next=y,Ki.lanes|=C,gf|=C}U=U.next}while(U!==null&&U!==w);A===null?R=d:A.next=g,au(d,i.memoizedState)||(Fa=!0),i.memoizedState=d,i.baseState=R,i.baseQueue=A,l.lastRenderedState=d}if(o=l.interleaved,o!==null){p=o;do w=p.lane,Ki.lanes|=w,gf|=w,p=p.next;while(p!==o)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function wT(o){var i=xs(),l=i.queue;if(l===null)throw Error(jn(311));l.lastRenderedReducer=o;var d=l.dispatch,p=l.pending,w=i.memoizedState;if(p!==null){l.pending=null;var R=p=p.next;do w=o(w,R.action),R=R.next;while(R!==p);au(w,i.memoizedState)||(Fa=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),l.lastRenderedState=w}return[w,d]}function e4(){}function t4(o,i){var l=Ki,d=xs(),p=i(),w=!au(d.memoizedState,p);if(w&&(d.memoizedState=p,Fa=!0),d=d.queue,Kb(i4.bind(null,l,d,o),[o]),d.getSnapshot!==i||w||No!==null&&No.memoizedState.tag&1){if(l.flags|=2048,Bg(9,r4.bind(null,l,d,p,i),void 0,null),Mo===null)throw Error(jn(349));pf&30||n4(l,i,p)}return p}function n4(o,i,l){o.flags|=16384,o={getSnapshot:i,value:l},i=Ki.updateQueue,i===null?(i={lastEffect:null,stores:null},Ki.updateQueue=i,i.stores=[o]):(l=i.stores,l===null?i.stores=[o]:l.push(o))}function r4(o,i,l,d){i.value=l,i.getSnapshot=d,o4(i)&&a4(o)}function i4(o,i,l){return l(function(){o4(i)&&a4(o)})}function o4(o){var i=o.getSnapshot;o=o.value;try{var l=i();return!au(o,l)}catch(d){return!0}}function a4(o){var i=El(o,1);i!==null&&ou(i,o,1,-1)}function hP(o){var i=Ru();return typeof o=="function"&&(o=o()),i.memoizedState=i.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ug,lastRenderedState:o},i.queue=o,o=o.dispatch=kq.bind(null,Ki,o),[i.memoizedState,o]}function Bg(o,i,l,d){return o={tag:o,create:i,destroy:l,deps:d,next:null},i=Ki.updateQueue,i===null?(i={lastEffect:null,stores:null},Ki.updateQueue=i,i.lastEffect=o.next=o):(l=i.lastEffect,l===null?i.lastEffect=o.next=o:(d=l.next,l.next=o,o.next=d,i.lastEffect=o)),o}function s4(){return xs().memoizedState}function e0(o,i,l,d){var p=Ru();Ki.flags|=o,p.memoizedState=Bg(1|i,l,void 0,d===void 0?null:d)}function z0(o,i,l,d){var p=xs();d=d===void 0?null:d;var w=void 0;if(To!==null){var R=To.memoizedState;if(w=R.destroy,d!==null&&Gb(d,R.deps)){p.memoizedState=Bg(i,l,w,d);return}}Ki.flags|=o,p.memoizedState=Bg(1|i,l,w,d)}function pP(o,i){return e0(8390656,8,o,i)}function Kb(o,i){return z0(2048,8,o,i)}function u4(o,i){return z0(4,2,o,i)}function l4(o,i){return z0(4,4,o,i)}function c4(o,i){if(typeof i=="function")return o=o(),i(o),function(){i(null)};if(i!=null)return o=o(),i.current=o,function(){i.current=null}}function f4(o,i,l){return l=l!=null?l.concat([o]):null,z0(4,4,c4.bind(null,i,o),l)}function Vb(){}function d4(o,i){var l=xs();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&Gb(i,d[1])?d[0]:(l.memoizedState=[o,i],o)}function h4(o,i){var l=xs();i=i===void 0?null:i;var d=l.memoizedState;return d!==null&&i!==null&&Gb(i,d[1])?d[0]:(o=o(),l.memoizedState=[o,i],o)}function p4(o,i,l){return pf&21?(au(l,i)||(l=EF(),Ki.lanes|=l,gf|=l,o.baseState=!0),i):(o.baseState&&(o.baseState=!1,Fa=!0),o.memoizedState=l)}function Oq(o,i){var l=di;di=l!==0&&4>l?l:4,o(!0);var d=TT.transition;TT.transition={};try{o(!1),i()}finally{di=l,TT.transition=d}}function g4(){return xs().memoizedState}function Lq(o,i,l){var d=sc(o);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},m4(o))v4(i,l);else if(l=XF(o,i,l,d),l!==null){var p=Ta();ou(l,o,d,p),y4(l,i,d)}}function kq(o,i,l){var d=sc(o),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(m4(o))v4(i,p);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var R=i.lastRenderedState,g=w(R,l);if(p.hasEagerState=!0,p.eagerState=g,au(g,R)){var A=i.interleaved;A===null?(p.next=p,Fb(i)):(p.next=A.next,A.next=p),i.interleaved=p;return}}catch(U){}finally{}l=XF(o,i,p,d),l!==null&&(p=Ta(),ou(l,o,d,p),y4(l,i,d))}}function m4(o){var i=o.alternate;return o===Ki||i!==null&&i===Ki}function v4(o,i){Eg=I0=!0;var l=o.pending;l===null?i.next=i:(i.next=l.next,l.next=i),o.pending=i}function y4(o,i,l){if(l&4194240){var d=i.lanes;d&=o.pendingLanes,l|=d,i.lanes=l,wb(o,l)}}var b0={readContext:Rs,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useInsertionEffect:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useDeferredValue:Wo,useTransition:Wo,useMutableSource:Wo,useSyncExternalStore:Wo,useId:Wo,unstable_isNewReconciler:!1},Fq={readContext:Rs,useCallback:function(o,i){return Ru().memoizedState=[o,i===void 0?null:i],o},useContext:Rs,useEffect:pP,useImperativeHandle:function(o,i,l){return l=l!=null?l.concat([o]):null,e0(4194308,4,c4.bind(null,i,o),l)},useLayoutEffect:function(o,i){return e0(4194308,4,o,i)},useInsertionEffect:function(o,i){return e0(4,2,o,i)},useMemo:function(o,i){var l=Ru();return i=i===void 0?null:i,o=o(),l.memoizedState=[o,i],o},useReducer:function(o,i,l){var d=Ru();return i=l!==void 0?l(i):i,d.memoizedState=d.baseState=i,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:i},d.queue=o,o=o.dispatch=Lq.bind(null,Ki,o),[d.memoizedState,o]},useRef:function(o){var i=Ru();return o={current:o},i.memoizedState=o},useState:hP,useDebugValue:Vb,useDeferredValue:function(o){return Ru().memoizedState=o},useTransition:function(){var o=hP(!1),i=o[0];return o=Oq.bind(null,o[1]),Ru().memoizedState=o,[i,o]},useMutableSource:function(){},useSyncExternalStore:function(o,i,l){var d=Ki,p=Ru();if(Ui){if(l===void 0)throw Error(jn(407));l=l()}else{if(l=i(),Mo===null)throw Error(jn(349));pf&30||n4(d,i,l)}p.memoizedState=l;var w={value:l,getSnapshot:i};return p.queue=w,pP(i4.bind(null,d,w,o),[o]),d.flags|=2048,Bg(9,r4.bind(null,d,w,l,i),void 0,null),l},useId:function(){var o=Ru(),i=Mo.identifierPrefix;if(Ui){var l=gl,d=pl;l=(d&~(1<<32-iu(d)-1)).toString(32)+l,i=":"+i+"R"+l,l=Fg++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Pq++,i=":"+i+"r"+l.toString(32)+":";return o.memoizedState=i},unstable_isNewReconciler:!1},Uq={readContext:Rs,useCallback:d4,useContext:Rs,useEffect:Kb,useImperativeHandle:f4,useInsertionEffect:u4,useLayoutEffect:l4,useMemo:h4,useReducer:ST,useRef:s4,useState:function(){return ST(Ug)},useDebugValue:Vb,useDeferredValue:function(o){var i=xs();return p4(i,To.memoizedState,o)},useTransition:function(){var o=ST(Ug)[0],i=xs().memoizedState;return[o,i]},useMutableSource:e4,useSyncExternalStore:t4,useId:g4,unstable_isNewReconciler:!1},Bq={readContext:Rs,useCallback:d4,useContext:Rs,useEffect:Kb,useImperativeHandle:f4,useInsertionEffect:u4,useLayoutEffect:l4,useMemo:h4,useReducer:wT,useRef:s4,useState:function(){return wT(Ug)},useDebugValue:Vb,useDeferredValue:function(o){var i=xs();return To===null?i.memoizedState=o:p4(i,To.memoizedState,o)},useTransition:function(){var o=wT(Ug)[0],i=xs().memoizedState;return[o,i]},useMutableSource:e4,useSyncExternalStore:t4,useId:g4,unstable_isNewReconciler:!1};function Xs(o,i){if(o&&o.defaultProps){i=Vi({},i),o=o.defaultProps;for(var l in o)i[l]===void 0&&(i[l]=o[l]);return i}return i}function LI(o,i,l,d){i=o.memoizedState,l=l(d,i),l=l==null?i:Vi({},i,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var Y0={isMounted:function(o){return(o=o._reactInternals)?_f(o)===o:!1},enqueueSetState:function(o,i,l){o=o._reactInternals;var d=Ta(),p=sc(o),w=ml(d,p);w.payload=i,l!=null&&(w.callback=l),i=oc(o,w,p),i!==null&&(ou(i,o,p,d),Qy(i,o,p))},enqueueReplaceState:function(o,i,l){o=o._reactInternals;var d=Ta(),p=sc(o),w=ml(d,p);w.tag=1,w.payload=i,l!=null&&(w.callback=l),i=oc(o,w,p),i!==null&&(ou(i,o,p,d),Qy(i,o,p))},enqueueForceUpdate:function(o,i){o=o._reactInternals;var l=Ta(),d=sc(o),p=ml(l,d);p.tag=2,i!=null&&(p.callback=i),i=oc(o,p,d),i!==null&&(ou(i,o,d,l),Qy(i,o,d))}};function gP(o,i,l,d,p,w,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,w,R):i.prototype&&i.prototype.isPureReactComponent?!Mg(l,d)||!Mg(p,w):!0}function E4(o,i,l){var d=!1,p=fc,w=i.contextType;return typeof w=="object"&&w!==null?w=Rs(w):(p=Ba(i)?df:Jo.current,d=i.contextTypes,w=(d=d!=null)?fh(o,p):fc),i=new i(l,w),o.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Y0,o.stateNode=i,i._reactInternals=o,d&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=p,o.__reactInternalMemoizedMaskedChildContext=w),i}function mP(o,i,l,d){o=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==o&&Y0.enqueueReplaceState(i,i.state,null)}function kI(o,i,l,d){var p=o.stateNode;p.props=l,p.state=o.memoizedState,p.refs={},Ub(o);var w=i.contextType;typeof w=="object"&&w!==null?p.context=Rs(w):(w=Ba(i)?df:Jo.current,p.context=fh(o,w)),p.state=o.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(LI(o,i,w,l),p.state=o.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&Y0.enqueueReplaceState(p,p.state,null),w0(o,l,p,d),p.state=o.memoizedState),typeof p.componentDidMount=="function"&&(o.flags|=4194308)}function gh(o,i){try{var l="",d=i;do l+=h9(d),d=d.return;while(d);var p=l}catch(w){p="\nError generating stack: "+w.message+"\n"+w.stack}return{value:o,source:i,stack:p,digest:null}}function AT(o,i,l){return{value:o,source:null,stack:l!=null?l:null,digest:i!=null?i:null}}function FI(o,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var jq=typeof WeakMap=="function"?WeakMap:Map;function _4(o,i,l){l=ml(-1,l),l.tag=3,l.payload={element:null};var d=i.value;return l.callback=function(){R0||(R0=!0,zI=d),FI(o,i)},l}function T4(o,i,l){l=ml(-1,l),l.tag=3;var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=i.value;l.payload=function(){return d(p)},l.callback=function(){FI(o,i)}}var w=o.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(l.callback=function(){FI(o,i),typeof d!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var R=i.stack;this.componentDidCatch(i.value,{componentStack:R!==null?R:""})}),l}function vP(o,i,l){var d=o.pingCache;if(d===null){d=o.pingCache=new jq;var p=new Set;d.set(i,p)}else p=d.get(i),p===void 0&&(p=new Set,d.set(i,p));p.has(l)||(p.add(l),o=eH.bind(null,o,i,l),i.then(o,o))}function yP(o){do{var i;if((i=o.tag===13)&&(i=o.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return o;o=o.return}while(o!==null);return null}function EP(o,i,l,d,p){return o.mode&1?(o.flags|=65536,o.lanes=p,o):(o===i?o.flags|=65536:(o.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=ml(-1,1),i.tag=2,oc(l,i,1))),l.lanes|=1),o)}var Zq=Tl.ReactCurrentOwner,Fa=!1;function Ea(o,i,l,d){i.child=o===null?$F(i,null,l,d):hh(i,o.child,l,d)}function _P(o,i,l,d,p){l=l.render;var w=i.ref;return uh(i,p),d=qb(o,i,l,d,w,p),l=Hb(),o!==null&&!Fa?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~p,_l(o,i,p)):(Ui&&l&&Mb(i),i.flags|=1,Ea(o,i,d,p),i.child)}function TP(o,i,l,d,p){if(o===null){var w=l.type;return typeof w=="function"&&!eC(w)&&w.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=w,S4(o,i,w,d,p)):(o=i0(l.type,null,d,i,i.mode,p),o.ref=i.ref,o.return=i,i.child=o)}if(w=o.child,!(o.lanes&p)){var R=w.memoizedProps;if(l=l.compare,l=l!==null?l:Mg,l(R,d)&&o.ref===i.ref)return _l(o,i,p)}return i.flags|=1,o=uc(w,d),o.ref=i.ref,o.return=i,i.child=o}function S4(o,i,l,d,p){if(o!==null){var w=o.memoizedProps;if(Mg(w,d)&&o.ref===i.ref)if(Fa=!1,i.pendingProps=d=w,(o.lanes&p)!==0)o.flags&131072&&(Fa=!0);else return i.lanes=o.lanes,_l(o,i,p)}return UI(o,i,l,d,p)}function w4(o,i,l){var d=i.pendingProps,p=d.children,w=o!==null?o.memoizedState:null;if(d.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(eh,ss),ss|=l;else{if(!(l&1073741824))return o=w!==null?w.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:o,cachePool:null,transitions:null},i.updateQueue=null,Ii(eh,ss),ss|=o,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=w!==null?w.baseLanes:l,Ii(eh,ss),ss|=d}else w!==null?(d=w.baseLanes|l,i.memoizedState=null):d=l,Ii(eh,ss),ss|=d;return Ea(o,i,p,l),i.child}function A4(o,i){var l=i.ref;(o===null&&l!==null||o!==null&&o.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function UI(o,i,l,d,p){var w=Ba(l)?df:Jo.current;return w=fh(i,w),uh(i,p),l=qb(o,i,l,d,w,p),d=Hb(),o!==null&&!Fa?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~p,_l(o,i,p)):(Ui&&d&&Mb(i),i.flags|=1,Ea(o,i,l,p),i.child)}function SP(o,i,l,d,p){if(Ba(l)){var w=!0;y0(i)}else w=!1;if(uh(i,p),i.stateNode===null)t0(o,i),E4(i,l,d),kI(i,l,d,p),d=!0;else if(o===null){var R=i.stateNode,g=i.memoizedProps;R.props=g;var A=R.context,U=l.contextType;typeof U=="object"&&U!==null?U=Rs(U):(U=Ba(l)?df:Jo.current,U=fh(i,U));var C=l.getDerivedStateFromProps,y=typeof C=="function"||typeof R.getSnapshotBeforeUpdate=="function";y||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(g!==d||A!==U)&&mP(i,R,d,U),$l=!1;var v=i.memoizedState;R.state=v,w0(i,d,R,p),A=i.memoizedState,g!==d||v!==A||Ua.current||$l?(typeof C=="function"&&(LI(i,l,C,d),A=i.memoizedState),(g=$l||gP(i,l,g,d,v,A,U))?(y||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(i.flags|=4194308)):(typeof R.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=A),R.props=d,R.state=A,R.context=U,d=g):(typeof R.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{R=i.stateNode,QF(o,i),g=i.memoizedProps,U=i.type===i.elementType?g:Xs(i.type,g),R.props=U,y=i.pendingProps,v=R.context,A=l.contextType,typeof A=="object"&&A!==null?A=Rs(A):(A=Ba(l)?df:Jo.current,A=fh(i,A));var D=l.getDerivedStateFromProps;(C=typeof D=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(g!==y||v!==A)&&mP(i,R,d,A),$l=!1,v=i.memoizedState,R.state=v,w0(i,d,R,p);var m=i.memoizedState;g!==y||v!==m||Ua.current||$l?(typeof D=="function"&&(LI(i,l,D,d),m=i.memoizedState),(U=$l||gP(i,l,U,d,v,m,A)||!1)?(C||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(d,m,A),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(d,m,A)),typeof R.componentDidUpdate=="function"&&(i.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof R.componentDidUpdate!="function"||g===o.memoizedProps&&v===o.memoizedState||(i.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||g===o.memoizedProps&&v===o.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=m),R.props=d,R.state=m,R.context=A,d=U):(typeof R.componentDidUpdate!="function"||g===o.memoizedProps&&v===o.memoizedState||(i.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||g===o.memoizedProps&&v===o.memoizedState||(i.flags|=1024),d=!1)}return BI(o,i,l,d,w,p)}function BI(o,i,l,d,p,w){A4(o,i);var R=(i.flags&128)!==0;if(!d&&!R)return p&&sP(i,l,!1),_l(o,i,w);d=i.stateNode,Zq.current=i;var g=R&&typeof l.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,o!==null&&R?(i.child=hh(i,o.child,null,w),i.child=hh(i,null,g,w)):Ea(o,i,g,w),i.memoizedState=d.state,p&&sP(i,l,!0),i.child}function I4(o){var i=o.stateNode;i.pendingContext?aP(o,i.pendingContext,i.pendingContext!==i.context):i.context&&aP(o,i.context,!1),Bb(o,i.containerInfo)}function wP(o,i,l,d,p){return dh(),Pb(p),i.flags|=256,Ea(o,i,l,d),i.child}var jI={dehydrated:null,treeContext:null,retryLane:0};function ZI(o){return{baseLanes:o,cachePool:null,transitions:null}}function b4(o,i,l){var d=i.pendingProps,p=qi.current,w=!1,R=(i.flags&128)!==0,g;if((g=R)||(g=o!==null&&o.memoizedState===null?!1:(p&2)!==0),g?(w=!0,i.flags&=-129):(o===null||o.memoizedState!==null)&&(p|=1),Ii(qi,p&1),o===null)return PI(i),o=i.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(i.mode&1?o.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(R=d.children,o=d.fallback,w?(d=i.mode,w=i.child,R={mode:"hidden",children:R},!(d&1)&&w!==null?(w.childLanes=0,w.pendingProps=R):w=X0(R,d,0,null),o=lf(o,d,l,null),w.return=i,o.return=i,w.sibling=o,i.child=w,i.child.memoizedState=ZI(l),i.memoizedState=jI,o):zb(i,R));if(p=o.memoizedState,p!==null&&(g=p.dehydrated,g!==null))return Gq(o,i,R,d,g,p,l);if(w){w=d.fallback,R=i.mode,p=o.child,g=p.sibling;var A={mode:"hidden",children:d.children};return!(R&1)&&i.child!==p?(d=i.child,d.childLanes=0,d.pendingProps=A,i.deletions=null):(d=uc(p,A),d.subtreeFlags=p.subtreeFlags&14680064),g!==null?w=uc(g,w):(w=lf(w,R,l,null),w.flags|=2),w.return=i,d.return=i,d.sibling=w,i.child=d,d=w,w=i.child,R=o.child.memoizedState,R=R===null?ZI(l):{baseLanes:R.baseLanes|l,cachePool:null,transitions:R.transitions},w.memoizedState=R,w.childLanes=o.childLanes&~l,i.memoizedState=jI,d}return w=o.child,o=w.sibling,d=uc(w,{mode:"visible",children:d.children}),!(i.mode&1)&&(d.lanes=l),d.return=i,d.sibling=null,o!==null&&(l=i.deletions,l===null?(i.deletions=[o],i.flags|=16):l.push(o)),i.child=d,i.memoizedState=null,d}function zb(o,i){return i=X0({mode:"visible",children:i},o.mode,0,null),i.return=o,o.child=i}function Fy(o,i,l,d){return d!==null&&Pb(d),hh(i,o.child,null,l),o=zb(i,i.pendingProps.children),o.flags|=2,i.memoizedState=null,o}function Gq(o,i,l,d,p,w,R){if(l)return i.flags&256?(i.flags&=-257,d=AT(Error(jn(422))),Fy(o,i,R,d)):i.memoizedState!==null?(i.child=o.child,i.flags|=128,null):(w=d.fallback,p=i.mode,d=X0({mode:"visible",children:d.children},p,0,null),w=lf(w,p,R,null),w.flags|=2,d.return=i,w.return=i,d.sibling=w,i.child=d,i.mode&1&&hh(i,o.child,null,R),i.child.memoizedState=ZI(R),i.memoizedState=jI,w);if(!(i.mode&1))return Fy(o,i,R,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var g=d.dgst;return d=g,w=Error(jn(419)),d=AT(w,d,void 0),Fy(o,i,R,d)}if(g=(R&o.childLanes)!==0,Fa||g){if(d=Mo,d!==null){switch(R&-R){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(d.suspendedLanes|R)?0:p,p!==0&&p!==w.retryLane&&(w.retryLane=p,El(o,p),ou(d,o,p,-1))}return Jb(),d=AT(Error(jn(421))),Fy(o,i,R,d)}return p.data==="$?"?(i.flags|=128,i.child=o.child,i=tH.bind(null,o),p._reactRetry=i,null):(o=w.treeContext,us=ic(p.nextSibling),cs=i,Ui=!0,Js=null,o!==null&&(ws[As++]=pl,ws[As++]=gl,ws[As++]=hf,pl=o.id,gl=o.overflow,hf=i),i=zb(i,d.children),i.flags|=4096,i)}function AP(o,i,l){o.lanes|=i;var d=o.alternate;d!==null&&(d.lanes|=i),OI(o.return,i,l)}function IT(o,i,l,d,p){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=l,w.tailMode=p)}function C4(o,i,l){var d=i.pendingProps,p=d.revealOrder,w=d.tail;if(Ea(o,i,d.children,l),d=qi.current,d&2)d=d&1|2,i.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=i.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&AP(o,l,i);else if(o.tag===19)AP(o,l,i);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}d&=1}if(Ii(qi,d),!(i.mode&1))i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)o=l.alternate,o!==null&&A0(o)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),IT(i,!1,p,l,w);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(o=p.alternate,o!==null&&A0(o)===null){i.child=p;break}o=p.sibling,p.sibling=l,l=p,p=o}IT(i,!0,l,null,w);break;case"together":IT(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function t0(o,i){!(i.mode&1)&&o!==null&&(o.alternate=null,i.alternate=null,i.flags|=2)}function _l(o,i,l){if(o!==null&&(i.dependencies=o.dependencies),gf|=i.lanes,!(l&i.childLanes))return null;if(o!==null&&i.child!==o.child)throw Error(jn(153));if(i.child!==null){for(o=i.child,l=uc(o,o.pendingProps),i.child=l,l.return=i;o.sibling!==null;)o=o.sibling,l=l.sibling=uc(o,o.pendingProps),l.return=i;l.sibling=null}return i.child}function qq(o,i,l){switch(i.tag){case 3:I4(i),dh();break;case 5:JF(i);break;case 1:Ba(i.type)&&y0(i);break;case 4:Bb(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,p=i.memoizedProps.value;Ii(T0,d._currentValue),d._currentValue=p;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Ii(qi,qi.current&1),i.flags|=128,null):l&i.child.childLanes?b4(o,i,l):(Ii(qi,qi.current&1),o=_l(o,i,l),o!==null?o.sibling:null);Ii(qi,qi.current&1);break;case 19:if(d=(l&i.childLanes)!==0,o.flags&128){if(d)return C4(o,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ii(qi,qi.current),d)break;return null;case 22:case 23:return i.lanes=0,w4(o,i,l)}return _l(o,i,l)}var R4,GI,x4,N4;R4=function(o,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)o.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};GI=function(){};x4=function(o,i,l,d){var p=o.memoizedProps;if(p!==d){o=i.stateNode,af(Mu.current);var w=null;switch(l){case"input":p=cI(o,p),d=cI(o,d),w=[];break;case"select":p=Vi({},p,{value:void 0}),d=Vi({},d,{value:void 0}),w=[];break;case"textarea":p=hI(o,p),d=hI(o,d),w=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(o.onclick=m0)}gI(l,d);var R;l=null;for(U in p)if(!d.hasOwnProperty(U)&&p.hasOwnProperty(U)&&p[U]!=null)if(U==="style"){var g=p[U];for(R in g)g.hasOwnProperty(R)&&(l||(l={}),l[R]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(Ag.hasOwnProperty(U)?w||(w=[]):(w=w||[]).push(U,null));for(U in d){var A=d[U];if(g=p!=null?p[U]:void 0,d.hasOwnProperty(U)&&A!==g&&(A!=null||g!=null))if(U==="style")if(g){for(R in g)!g.hasOwnProperty(R)||A&&A.hasOwnProperty(R)||(l||(l={}),l[R]="");for(R in A)A.hasOwnProperty(R)&&g[R]!==A[R]&&(l||(l={}),l[R]=A[R])}else l||(w||(w=[]),w.push(U,l)),l=A;else U==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,g=g?g.__html:void 0,A!=null&&g!==A&&(w=w||[]).push(U,A)):U==="children"?typeof A!="string"&&typeof A!="number"||(w=w||[]).push(U,""+A):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(Ag.hasOwnProperty(U)?(A!=null&&U==="onScroll"&&xi("scroll",o),w||g===A||(w=[])):(w=w||[]).push(U,A))}l&&(w=w||[]).push("style",l);var U=w;(i.updateQueue=U)&&(i.flags|=4)}};N4=function(o,i,l,d){l!==d&&(i.flags|=4)};function eg(o,i){if(!Ui)switch(o.tailMode){case"hidden":i=o.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function $o(o){var i=o.alternate!==null&&o.alternate.child===o.child,l=0,d=0;if(i)for(var p=o.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=o,p=p.sibling;else for(p=o.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=o,p=p.sibling;return o.subtreeFlags|=d,o.childLanes=l,i}function Hq(o,i,l){var d=i.pendingProps;switch(Db(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(i),null;case 1:return Ba(i.type)&&v0(),$o(i),null;case 3:return d=i.stateNode,ph(),Ni(Ua),Ni(Jo),Zb(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Ly(i)?i.flags|=4:o===null||o.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Js!==null&&($I(Js),Js=null))),GI(o,i),$o(i),null;case 5:jb(i);var p=af(kg.current);if(l=i.type,o!==null&&i.stateNode!=null)x4(o,i,l,d,p),o.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(jn(166));return $o(i),null}if(o=af(Mu.current),Ly(i)){d=i.stateNode,l=i.type;var w=i.memoizedProps;switch(d[xu]=i,d[Og]=w,o=(i.mode&1)!==0,l){case"dialog":xi("cancel",d),xi("close",d);break;case"iframe":case"object":case"embed":xi("load",d);break;case"video":case"audio":for(p=0;p<cg.length;p++)xi(cg[p],d);break;case"source":xi("error",d);break;case"img":case"image":case"link":xi("error",d),xi("load",d);break;case"details":xi("toggle",d);break;case"input":PD(d,w),xi("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!w.multiple},xi("invalid",d);break;case"textarea":LD(d,w),xi("invalid",d)}gI(l,w),p=null;for(var R in w)if(w.hasOwnProperty(R)){var g=w[R];R==="children"?typeof g=="string"?d.textContent!==g&&(w.suppressHydrationWarning!==!0&&Oy(d.textContent,g,o),p=["children",g]):typeof g=="number"&&d.textContent!==""+g&&(w.suppressHydrationWarning!==!0&&Oy(d.textContent,g,o),p=["children",""+g]):Ag.hasOwnProperty(R)&&g!=null&&R==="onScroll"&&xi("scroll",d)}switch(l){case"input":by(d),OD(d,w,!0);break;case"textarea":by(d),kD(d);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(d.onclick=m0)}d=p,i.updateQueue=d,d!==null&&(i.flags|=4)}else{R=p.nodeType===9?p:p.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=iF(l)),o==="http://www.w3.org/1999/xhtml"?l==="script"?(o=R.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof d.is=="string"?o=R.createElement(l,{is:d.is}):(o=R.createElement(l),l==="select"&&(R=o,d.multiple?R.multiple=!0:d.size&&(R.size=d.size))):o=R.createElementNS(o,l),o[xu]=i,o[Og]=d,R4(o,i,!1,!1),i.stateNode=o;e:{switch(R=mI(l,d),l){case"dialog":xi("cancel",o),xi("close",o),p=d;break;case"iframe":case"object":case"embed":xi("load",o),p=d;break;case"video":case"audio":for(p=0;p<cg.length;p++)xi(cg[p],o);p=d;break;case"source":xi("error",o),p=d;break;case"img":case"image":case"link":xi("error",o),xi("load",o),p=d;break;case"details":xi("toggle",o),p=d;break;case"input":PD(o,d),p=cI(o,d),xi("invalid",o);break;case"option":p=d;break;case"select":o._wrapperState={wasMultiple:!!d.multiple},p=Vi({},d,{value:void 0}),xi("invalid",o);break;case"textarea":LD(o,d),p=hI(o,d),xi("invalid",o);break;default:p=d}gI(l,p),g=p;for(w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="style"?sF(o,A):w==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&oF(o,A)):w==="children"?typeof A=="string"?(l!=="textarea"||A!=="")&&Ig(o,A):typeof A=="number"&&Ig(o,""+A):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Ag.hasOwnProperty(w)?A!=null&&w==="onScroll"&&xi("scroll",o):A!=null&&vb(o,w,A,R))}switch(l){case"input":by(o),OD(o,d,!1);break;case"textarea":by(o),kD(o);break;case"option":d.value!=null&&o.setAttribute("value",""+cc(d.value));break;case"select":o.multiple=!!d.multiple,w=d.value,w!=null?ih(o,!!d.multiple,w,!1):d.defaultValue!=null&&ih(o,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(o.onclick=m0)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return $o(i),null;case 6:if(o&&i.stateNode!=null)N4(o,i,o.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(jn(166));if(l=af(kg.current),af(Mu.current),Ly(i)){if(d=i.stateNode,l=i.memoizedProps,d[xu]=i,(w=d.nodeValue!==l)&&(o=cs,o!==null))switch(o.tag){case 3:Oy(d.nodeValue,l,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Oy(d.nodeValue,l,(o.mode&1)!==0)}w&&(i.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[xu]=i,i.stateNode=d}return $o(i),null;case 13:if(Ni(qi),d=i.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ui&&us!==null&&i.mode&1&&!(i.flags&128))YF(),dh(),i.flags|=98560,w=!1;else if(w=Ly(i),d!==null&&d.dehydrated!==null){if(o===null){if(!w)throw Error(jn(318));if(w=i.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(jn(317));w[xu]=i}else dh(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;$o(i),w=!1}else Js!==null&&($I(Js),Js=null),w=!0;if(!w)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(d=d!==null,d!==(o!==null&&o.memoizedState!==null)&&d&&(i.child.flags|=8192,i.mode&1&&(o===null||qi.current&1?So===0&&(So=3):Jb())),i.updateQueue!==null&&(i.flags|=4),$o(i),null);case 4:return ph(),GI(o,i),o===null&&Dg(i.stateNode.containerInfo),$o(i),null;case 10:return kb(i.type._context),$o(i),null;case 17:return Ba(i.type)&&v0(),$o(i),null;case 19:if(Ni(qi),w=i.memoizedState,w===null)return $o(i),null;if(d=(i.flags&128)!==0,R=w.rendering,R===null)if(d)eg(w,!1);else{if(So!==0||o!==null&&o.flags&128)for(o=i.child;o!==null;){if(R=A0(o),R!==null){for(i.flags|=128,eg(w,!1),d=R.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=l,l=i.child;l!==null;)w=l,o=d,w.flags&=14680066,R=w.alternate,R===null?(w.childLanes=0,w.lanes=o,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=R.childLanes,w.lanes=R.lanes,w.child=R.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=R.memoizedProps,w.memoizedState=R.memoizedState,w.updateQueue=R.updateQueue,w.type=R.type,o=R.dependencies,w.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l=l.sibling;return Ii(qi,qi.current&1|2),i.child}o=o.sibling}w.tail!==null&&lo()>mh&&(i.flags|=128,d=!0,eg(w,!1),i.lanes=4194304)}else{if(!d)if(o=A0(R),o!==null){if(i.flags|=128,d=!0,l=o.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),eg(w,!0),w.tail===null&&w.tailMode==="hidden"&&!R.alternate&&!Ui)return $o(i),null}else 2*lo()-w.renderingStartTime>mh&&l!==1073741824&&(i.flags|=128,d=!0,eg(w,!1),i.lanes=4194304);w.isBackwards?(R.sibling=i.child,i.child=R):(l=w.last,l!==null?l.sibling=R:i.child=R,w.last=R)}return w.tail!==null?(i=w.tail,w.rendering=i,w.tail=i.sibling,w.renderingStartTime=lo(),i.sibling=null,l=qi.current,Ii(qi,d?l&1|2:l&1),i):($o(i),null);case 22:case 23:return Qb(),d=i.memoizedState!==null,o!==null&&o.memoizedState!==null!==d&&(i.flags|=8192),d&&i.mode&1?ss&1073741824&&($o(i),i.subtreeFlags&6&&(i.flags|=8192)):$o(i),null;case 24:return null;case 25:return null}throw Error(jn(156,i.tag))}function Kq(o,i){switch(Db(i),i.tag){case 1:return Ba(i.type)&&v0(),o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 3:return ph(),Ni(Ua),Ni(Jo),Zb(),o=i.flags,o&65536&&!(o&128)?(i.flags=o&-65537|128,i):null;case 5:return jb(i),null;case 13:if(Ni(qi),o=i.memoizedState,o!==null&&o.dehydrated!==null){if(i.alternate===null)throw Error(jn(340));dh()}return o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 19:return Ni(qi),null;case 4:return ph(),null;case 10:return kb(i.type._context),null;case 22:case 23:return Qb(),null;case 24:return null;default:return null}}var Uy=!1,Xo=!1,Vq=typeof WeakSet=="function"?WeakSet:Set,nr=null;function Jd(o,i){var l=o.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Qi(o,i,d)}else l.current=null}function qI(o,i,l){try{l()}catch(d){Qi(o,i,d)}}var IP=!1;function zq(o,i){if(bI=h0,o=LF(),Nb(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{l.nodeType,w.nodeType}catch(b){l=null;break e}var R=0,g=-1,A=-1,U=0,C=0,y=o,v=null;t:for(;;){for(var D;y!==l||p!==0&&y.nodeType!==3||(g=R+p),y!==w||d!==0&&y.nodeType!==3||(A=R+d),y.nodeType===3&&(R+=y.nodeValue.length),(D=y.firstChild)!==null;)v=y,y=D;for(;;){if(y===o)break t;if(v===l&&++U===p&&(g=R),v===w&&++C===d&&(A=R),(D=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=D}l=g===-1||A===-1?null:{start:g,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(CI={focusedElem:o,selectionRange:l},h0=!1,nr=i;nr!==null;)if(i=nr,o=i.child,(i.subtreeFlags&1028)!==0&&o!==null)o.return=i,nr=o;else for(;nr!==null;){i=nr;try{var m=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var T=m.memoizedProps,F=m.memoizedState,N=i.stateNode,_=N.getSnapshotBeforeUpdate(i.elementType===i.type?T:Xs(i.type,T),F);N.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=i.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(jn(163))}}catch(b){Qi(i,i.return,b)}if(o=i.sibling,o!==null){o.return=i.return,nr=o;break}nr=i.return}return m=IP,IP=!1,m}function _g(o,i,l){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&o)===o){var w=p.destroy;p.destroy=void 0,w!==void 0&&qI(i,l,w)}p=p.next}while(p!==d)}}function W0(o,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&o)===o){var d=l.create;l.destroy=d()}l=l.next}while(l!==i)}}function HI(o){var i=o.ref;if(i!==null){var l=o.stateNode;switch(o.tag){case 5:o=l;break;default:o=l}typeof i=="function"?i(o):i.current=o}}function M4(o){var i=o.alternate;i!==null&&(o.alternate=null,M4(i)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(i=o.stateNode,i!==null&&(delete i[xu],delete i[Og],delete i[NI],delete i[xq],delete i[Nq])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function D4(o){return o.tag===5||o.tag===3||o.tag===4}function bP(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||D4(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function KI(o,i,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(o,i):l.insertBefore(o,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(o,l)):(i=l,i.appendChild(o)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=m0));else if(d!==4&&(o=o.child,o!==null))for(KI(o,i,l),o=o.sibling;o!==null;)KI(o,i,l),o=o.sibling}function VI(o,i,l){var d=o.tag;if(d===5||d===6)o=o.stateNode,i?l.insertBefore(o,i):l.appendChild(o);else if(d!==4&&(o=o.child,o!==null))for(VI(o,i,l),o=o.sibling;o!==null;)VI(o,i,l),o=o.sibling}var Bo=null,Qs=!1;function Yl(o,i,l){for(l=l.child;l!==null;)P4(o,i,l),l=l.sibling}function P4(o,i,l){if(Nu&&typeof Nu.onCommitFiberUnmount=="function")try{Nu.onCommitFiberUnmount(Z0,l)}catch(g){}switch(l.tag){case 5:Xo||Jd(l,i);case 6:var d=Bo,p=Qs;Bo=null,Yl(o,i,l),Bo=d,Qs=p,Bo!==null&&(Qs?(o=Bo,l=l.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):Bo.removeChild(l.stateNode));break;case 18:Bo!==null&&(Qs?(o=Bo,l=l.stateNode,o.nodeType===8?yT(o.parentNode,l):o.nodeType===1&&yT(o,l),xg(o)):yT(Bo,l.stateNode));break;case 4:d=Bo,p=Qs,Bo=l.stateNode.containerInfo,Qs=!0,Yl(o,i,l),Bo=d,Qs=p;break;case 0:case 11:case 14:case 15:if(!Xo&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var w=p,R=w.destroy;w=w.tag,R!==void 0&&(w&2||w&4)&&qI(l,i,R),p=p.next}while(p!==d)}Yl(o,i,l);break;case 1:if(!Xo&&(Jd(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(g){Qi(l,i,g)}Yl(o,i,l);break;case 21:Yl(o,i,l);break;case 22:l.mode&1?(Xo=(d=Xo)||l.memoizedState!==null,Yl(o,i,l),Xo=d):Yl(o,i,l);break;default:Yl(o,i,l)}}function CP(o){var i=o.updateQueue;if(i!==null){o.updateQueue=null;var l=o.stateNode;l===null&&(l=o.stateNode=new Vq),i.forEach(function(d){var p=nH.bind(null,o,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Ws(o,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var w=o,R=i,g=R;e:for(;g!==null;){switch(g.tag){case 5:Bo=g.stateNode,Qs=!1;break e;case 3:Bo=g.stateNode.containerInfo,Qs=!0;break e;case 4:Bo=g.stateNode.containerInfo,Qs=!0;break e}g=g.return}if(Bo===null)throw Error(jn(160));P4(w,R,p),Bo=null,Qs=!1;var A=p.alternate;A!==null&&(A.return=null),p.return=null}catch(U){Qi(p,i,U)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)O4(i,o),i=i.sibling}function O4(o,i){var l=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ws(i,o),Au(o),d&4){try{_g(3,o,o.return),W0(3,o)}catch(T){Qi(o,o.return,T)}try{_g(5,o,o.return)}catch(T){Qi(o,o.return,T)}}break;case 1:Ws(i,o),Au(o),d&512&&l!==null&&Jd(l,l.return);break;case 5:if(Ws(i,o),Au(o),d&512&&l!==null&&Jd(l,l.return),o.flags&32){var p=o.stateNode;try{Ig(p,"")}catch(T){Qi(o,o.return,T)}}if(d&4&&(p=o.stateNode,p!=null)){var w=o.memoizedProps,R=l!==null?l.memoizedProps:w,g=o.type,A=o.updateQueue;if(o.updateQueue=null,A!==null)try{g==="input"&&w.type==="radio"&&w.name!=null&&nF(p,w),mI(g,R);var U=mI(g,w);for(R=0;R<A.length;R+=2){var C=A[R],y=A[R+1];C==="style"?sF(p,y):C==="dangerouslySetInnerHTML"?oF(p,y):C==="children"?Ig(p,y):vb(p,C,y,U)}switch(g){case"input":fI(p,w);break;case"textarea":rF(p,w);break;case"select":var v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!w.multiple;var D=w.value;D!=null?ih(p,!!w.multiple,D,!1):v!==!!w.multiple&&(w.defaultValue!=null?ih(p,!!w.multiple,w.defaultValue,!0):ih(p,!!w.multiple,w.multiple?[]:"",!1))}p[Og]=w}catch(T){Qi(o,o.return,T)}}break;case 6:if(Ws(i,o),Au(o),d&4){if(o.stateNode===null)throw Error(jn(162));p=o.stateNode,w=o.memoizedProps;try{p.nodeValue=w}catch(T){Qi(o,o.return,T)}}break;case 3:if(Ws(i,o),Au(o),d&4&&l!==null&&l.memoizedState.isDehydrated)try{xg(i.containerInfo)}catch(T){Qi(o,o.return,T)}break;case 4:Ws(i,o),Au(o);break;case 13:Ws(i,o),Au(o),p=o.child,p.flags&8192&&(w=p.memoizedState!==null,p.stateNode.isHidden=w,!w||p.alternate!==null&&p.alternate.memoizedState!==null||($b=lo())),d&4&&CP(o);break;case 22:if(C=l!==null&&l.memoizedState!==null,o.mode&1?(Xo=(U=Xo)||C,Ws(i,o),Xo=U):Ws(i,o),Au(o),d&8192){if(U=o.memoizedState!==null,(o.stateNode.isHidden=U)&&!C&&o.mode&1)for(nr=o,C=o.child;C!==null;){for(y=nr=C;nr!==null;){switch(v=nr,D=v.child,v.tag){case 0:case 11:case 14:case 15:_g(4,v,v.return);break;case 1:Jd(v,v.return);var m=v.stateNode;if(typeof m.componentWillUnmount=="function"){d=v,l=v.return;try{i=d,m.props=i.memoizedProps,m.state=i.memoizedState,m.componentWillUnmount()}catch(T){Qi(d,l,T)}}break;case 5:Jd(v,v.return);break;case 22:if(v.memoizedState!==null){xP(y);continue}}D!==null?(D.return=v,nr=D):xP(y)}C=C.sibling}e:for(C=null,y=o;;){if(y.tag===5){if(C===null){C=y;try{p=y.stateNode,U?(w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(g=y.stateNode,A=y.memoizedProps.style,R=A!=null&&A.hasOwnProperty("display")?A.display:null,g.style.display=aF("display",R))}catch(T){Qi(o,o.return,T)}}}else if(y.tag===6){if(C===null)try{y.stateNode.nodeValue=U?"":y.memoizedProps}catch(T){Qi(o,o.return,T)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===o)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;C===y&&(C=null),y=y.return}C===y&&(C=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ws(i,o),Au(o),d&4&&CP(o);break;case 21:break;default:Ws(i,o),Au(o)}}function Au(o){var i=o.flags;if(i&2){try{e:{for(var l=o.return;l!==null;){if(D4(l)){var d=l;break e}l=l.return}throw Error(jn(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Ig(p,""),d.flags&=-33);var w=bP(o);VI(o,w,p);break;case 3:case 4:var R=d.stateNode.containerInfo,g=bP(o);KI(o,g,R);break;default:throw Error(jn(161))}}catch(A){Qi(o,o.return,A)}o.flags&=-3}i&4096&&(o.flags&=-4097)}function Yq(o,i,l){nr=o,L4(o)}function L4(o,i,l){for(var d=(o.mode&1)!==0;nr!==null;){var p=nr,w=p.child;if(p.tag===22&&d){var R=p.memoizedState!==null||Uy;if(!R){var g=p.alternate,A=g!==null&&g.memoizedState!==null||Xo;g=Uy;var U=Xo;if(Uy=R,(Xo=A)&&!U)for(nr=p;nr!==null;)R=nr,A=R.child,R.tag===22&&R.memoizedState!==null?NP(p):A!==null?(A.return=R,nr=A):NP(p);for(;w!==null;)nr=w,L4(w),w=w.sibling;nr=p,Uy=g,Xo=U}RP(o)}else p.subtreeFlags&8772&&w!==null?(w.return=p,nr=w):RP(o)}}function RP(o){for(;nr!==null;){var i=nr;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Xo||W0(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Xo)if(l===null)d.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:Xs(i.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var w=i.updateQueue;w!==null&&dP(i,w,d);break;case 3:var R=i.updateQueue;if(R!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}dP(i,R,l)}break;case 5:var g=i.stateNode;if(l===null&&i.flags&4){l=g;var A=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&l.focus();break;case"img":A.src&&(l.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var U=i.alternate;if(U!==null){var C=U.memoizedState;if(C!==null){var y=C.dehydrated;y!==null&&xg(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(jn(163))}Xo||i.flags&512&&HI(i)}catch(v){Qi(i,i.return,v)}}if(i===o){nr=null;break}if(l=i.sibling,l!==null){l.return=i.return,nr=l;break}nr=i.return}}function xP(o){for(;nr!==null;){var i=nr;if(i===o){nr=null;break}var l=i.sibling;if(l!==null){l.return=i.return,nr=l;break}nr=i.return}}function NP(o){for(;nr!==null;){var i=nr;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{W0(4,i)}catch(A){Qi(i,l,A)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var p=i.return;try{d.componentDidMount()}catch(A){Qi(i,p,A)}}var w=i.return;try{HI(i)}catch(A){Qi(i,w,A)}break;case 5:var R=i.return;try{HI(i)}catch(A){Qi(i,R,A)}}}catch(A){Qi(i,i.return,A)}if(i===o){nr=null;break}var g=i.sibling;if(g!==null){g.return=i.return,nr=g;break}nr=i.return}}var Wq=Math.ceil,C0=Tl.ReactCurrentDispatcher,Yb=Tl.ReactCurrentOwner,Cs=Tl.ReactCurrentBatchConfig,$r=0,Mo=null,go=null,Zo=0,ss=0,eh=hc(0),So=0,jg=null,gf=0,$0=0,Wb=0,Tg=null,ka=null,$b=0,mh=1/0,dl=null,R0=!1,zI=null,ac=null,By=!1,ec=null,x0=0,Sg=0,YI=null,n0=-1,r0=0;function Ta(){return $r&6?lo():n0!==-1?n0:n0=lo()}function sc(o){return o.mode&1?$r&2&&Zo!==0?Zo&-Zo:Dq.transition!==null?(r0===0&&(r0=EF()),r0):(o=di,o!==0||(o=window.event,o=o===void 0?16:bF(o.type)),o):1}function ou(o,i,l,d){if(50<Sg)throw Sg=0,YI=null,Error(jn(185));Vg(o,l,d),(!($r&2)||o!==Mo)&&(o===Mo&&(!($r&2)&&($0|=l),So===4&&Ql(o,Zo)),ja(o,d),l===1&&$r===0&&!(i.mode&1)&&(mh=lo()+500,V0&&pc()))}function ja(o,i){var l=o.callbackNode;D9(o,i);var d=d0(o,o===Mo?Zo:0);if(d===0)l!==null&&BD(l),o.callbackNode=null,o.callbackPriority=0;else if(i=d&-d,o.callbackPriority!==i){if(l!=null&&BD(l),i===1)o.tag===0?Mq(MP.bind(null,o)):KF(MP.bind(null,o)),Cq(function(){!($r&6)&&pc()}),l=null;else{switch(_F(d)){case 1:l=Sb;break;case 4:l=vF;break;case 16:l=f0;break;case 536870912:l=yF;break;default:l=f0}l=q4(l,k4.bind(null,o))}o.callbackPriority=i,o.callbackNode=l}}function k4(o,i){if(n0=-1,r0=0,$r&6)throw Error(jn(327));var l=o.callbackNode;if(lh()&&o.callbackNode!==l)return null;var d=d0(o,o===Mo?Zo:0);if(d===0)return null;if(d&30||d&o.expiredLanes||i)i=N0(o,d);else{i=d;var p=$r;$r|=2;var w=U4();(Mo!==o||Zo!==i)&&(dl=null,mh=lo()+500,uf(o,i));do try{Qq();break}catch(g){F4(o,g)}while(!0);Lb(),C0.current=w,$r=p,go!==null?i=0:(Mo=null,Zo=0,i=So)}if(i!==0){if(i===2&&(p=TI(o),p!==0&&(d=p,i=WI(o,p))),i===1)throw l=jg,uf(o,0),Ql(o,d),ja(o,lo()),l;if(i===6)Ql(o,d);else{if(p=o.current.alternate,!(d&30)&&!$q(p)&&(i=N0(o,d),i===2&&(w=TI(o),w!==0&&(d=w,i=WI(o,w))),i===1))throw l=jg,uf(o,0),Ql(o,d),ja(o,lo()),l;switch(o.finishedWork=p,o.finishedLanes=d,i){case 0:case 1:throw Error(jn(345));case 2:ef(o,ka,dl);break;case 3:if(Ql(o,d),(d&130023424)===d&&(i=$b+500-lo(),10<i)){if(d0(o,0)!==0)break;if(p=o.suspendedLanes,(p&d)!==d){Ta(),o.pingedLanes|=o.suspendedLanes&p;break}o.timeoutHandle=xI(ef.bind(null,o,ka,dl),i);break}ef(o,ka,dl);break;case 4:if(Ql(o,d),(d&4194240)===d)break;for(i=o.eventTimes,p=-1;0<d;){var R=31-iu(d);w=1<<R,R=i[R],R>p&&(p=R),d&=~w}if(d=p,d=lo()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Wq(d/1960))-d,10<d){o.timeoutHandle=xI(ef.bind(null,o,ka,dl),d);break}ef(o,ka,dl);break;case 5:ef(o,ka,dl);break;default:throw Error(jn(329))}}}return ja(o,lo()),o.callbackNode===l?k4.bind(null,o):null}function WI(o,i){var l=Tg;return o.current.memoizedState.isDehydrated&&(uf(o,i).flags|=256),o=N0(o,i),o!==2&&(i=ka,ka=l,i!==null&&$I(i)),o}function $I(o){ka===null?ka=o:ka.push.apply(ka,o)}function $q(o){for(var i=o;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],w=p.getSnapshot;p=p.value;try{if(!au(w(),p))return!1}catch(R){return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ql(o,i){for(i&=~Wb,i&=~$0,o.suspendedLanes|=i,o.pingedLanes&=~i,o=o.expirationTimes;0<i;){var l=31-iu(i),d=1<<l;o[l]=-1,i&=~d}}function MP(o){if($r&6)throw Error(jn(327));lh();var i=d0(o,0);if(!(i&1))return ja(o,lo()),null;var l=N0(o,i);if(o.tag!==0&&l===2){var d=TI(o);d!==0&&(i=d,l=WI(o,d))}if(l===1)throw l=jg,uf(o,0),Ql(o,i),ja(o,lo()),l;if(l===6)throw Error(jn(345));return o.finishedWork=o.current.alternate,o.finishedLanes=i,ef(o,ka,dl),ja(o,lo()),null}function Xb(o,i){var l=$r;$r|=1;try{return o(i)}finally{$r=l,$r===0&&(mh=lo()+500,V0&&pc())}}function mf(o){ec!==null&&ec.tag===0&&!($r&6)&&lh();var i=$r;$r|=1;var l=Cs.transition,d=di;try{if(Cs.transition=null,di=1,o)return o()}finally{di=d,Cs.transition=l,$r=i,!($r&6)&&pc()}}function Qb(){ss=eh.current,Ni(eh)}function uf(o,i){o.finishedWork=null,o.finishedLanes=0;var l=o.timeoutHandle;if(l!==-1&&(o.timeoutHandle=-1,bq(l)),go!==null)for(l=go.return;l!==null;){var d=l;switch(Db(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&v0();break;case 3:ph(),Ni(Ua),Ni(Jo),Zb();break;case 5:jb(d);break;case 4:ph();break;case 13:Ni(qi);break;case 19:Ni(qi);break;case 10:kb(d.type._context);break;case 22:case 23:Qb()}l=l.return}if(Mo=o,go=o=uc(o.current,null),Zo=ss=i,So=0,jg=null,Wb=$0=gf=0,ka=Tg=null,of!==null){for(i=0;i<of.length;i++)if(l=of[i],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,w=l.pending;if(w!==null){var R=w.next;w.next=p,d.next=R}l.pending=d}of=null}return o}function F4(o,i){do{var l=go;try{if(Lb(),Jy.current=b0,I0){for(var d=Ki.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}I0=!1}if(pf=0,No=To=Ki=null,Eg=!1,Fg=0,Yb.current=null,l===null||l.return===null){So=1,jg=i,go=null;break}e:{var w=o,R=l.return,g=l,A=i;if(i=Zo,g.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var U=A,C=g,y=C.tag;if(!(C.mode&1)&&(y===0||y===11||y===15)){var v=C.alternate;v?(C.updateQueue=v.updateQueue,C.memoizedState=v.memoizedState,C.lanes=v.lanes):(C.updateQueue=null,C.memoizedState=null)}var D=yP(R);if(D!==null){D.flags&=-257,EP(D,R,g,w,i),D.mode&1&&vP(w,U,i),i=D,A=U;var m=i.updateQueue;if(m===null){var T=new Set;T.add(A),i.updateQueue=T}else m.add(A);break e}else{if(!(i&1)){vP(w,U,i),Jb();break e}A=Error(jn(426))}}else if(Ui&&g.mode&1){var F=yP(R);if(F!==null){!(F.flags&65536)&&(F.flags|=256),EP(F,R,g,w,i),Pb(gh(A,g));break e}}w=A=gh(A,g),So!==4&&(So=2),Tg===null?Tg=[w]:Tg.push(w),w=R;do{switch(w.tag){case 3:w.flags|=65536,i&=-i,w.lanes|=i;var N=_4(w,A,i);fP(w,N);break e;case 1:g=A;var _=w.type,I=w.stateNode;if(!(w.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ac===null||!ac.has(I)))){w.flags|=65536,i&=-i,w.lanes|=i;var b=T4(w,g,i);fP(w,b);break e}}w=w.return}while(w!==null)}j4(l)}catch(j){i=j,go===l&&l!==null&&(go=l=l.return);continue}break}while(!0)}function U4(){var o=C0.current;return C0.current=b0,o===null?b0:o}function Jb(){(So===0||So===3||So===2)&&(So=4),Mo===null||!(gf&268435455)&&!($0&268435455)||Ql(Mo,Zo)}function N0(o,i){var l=$r;$r|=2;var d=U4();(Mo!==o||Zo!==i)&&(dl=null,uf(o,i));do try{Xq();break}catch(p){F4(o,p)}while(!0);if(Lb(),$r=l,C0.current=d,go!==null)throw Error(jn(261));return Mo=null,Zo=0,So}function Xq(){for(;go!==null;)B4(go)}function Qq(){for(;go!==null&&!w9();)B4(go)}function B4(o){var i=G4(o.alternate,o,ss);o.memoizedProps=o.pendingProps,i===null?j4(o):go=i,Yb.current=null}function j4(o){var i=o;do{var l=i.alternate;if(o=i.return,i.flags&32768){if(l=Kq(l,i),l!==null){l.flags&=32767,go=l;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{So=6,go=null;return}}else if(l=Hq(l,i,ss),l!==null){go=l;return}if(i=i.sibling,i!==null){go=i;return}go=i=o}while(i!==null);So===0&&(So=5)}function ef(o,i,l){var d=di,p=Cs.transition;try{Cs.transition=null,di=1,Jq(o,i,l,d)}finally{Cs.transition=p,di=d}return null}function Jq(o,i,l,d){do lh();while(ec!==null);if($r&6)throw Error(jn(327));l=o.finishedWork;var p=o.finishedLanes;if(l===null)return null;if(o.finishedWork=null,o.finishedLanes=0,l===o.current)throw Error(jn(177));o.callbackNode=null,o.callbackPriority=0;var w=l.lanes|l.childLanes;if(P9(o,w),o===Mo&&(go=Mo=null,Zo=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||By||(By=!0,q4(f0,function(){return lh(),null})),w=(l.flags&15990)!==0,l.subtreeFlags&15990||w){w=Cs.transition,Cs.transition=null;var R=di;di=1;var g=$r;$r|=4,Yb.current=null,zq(o,l),O4(l,o),Eq(CI),h0=!!bI,CI=bI=null,o.current=l,Yq(l),A9(),$r=g,di=R,Cs.transition=w}else o.current=l;if(By&&(By=!1,ec=o,x0=p),w=o.pendingLanes,w===0&&(ac=null),C9(l.stateNode),ja(o,lo()),i!==null)for(d=o.onRecoverableError,l=0;l<i.length;l++)p=i[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(R0)throw R0=!1,o=zI,zI=null,o;return x0&1&&o.tag!==0&&lh(),w=o.pendingLanes,w&1?o===YI?Sg++:(Sg=0,YI=o):Sg=0,pc(),null}function lh(){if(ec!==null){var o=_F(x0),i=Cs.transition,l=di;try{if(Cs.transition=null,di=16>o?16:o,ec===null)var d=!1;else{if(o=ec,ec=null,x0=0,$r&6)throw Error(jn(331));var p=$r;for($r|=4,nr=o.current;nr!==null;){var w=nr,R=w.child;if(nr.flags&16){var g=w.deletions;if(g!==null){for(var A=0;A<g.length;A++){var U=g[A];for(nr=U;nr!==null;){var C=nr;switch(C.tag){case 0:case 11:case 15:_g(8,C,w)}var y=C.child;if(y!==null)y.return=C,nr=y;else for(;nr!==null;){C=nr;var v=C.sibling,D=C.return;if(M4(C),C===U){nr=null;break}if(v!==null){v.return=D,nr=v;break}nr=D}}}var m=w.alternate;if(m!==null){var T=m.child;if(T!==null){m.child=null;do{var F=T.sibling;T.sibling=null,T=F}while(T!==null)}}nr=w}}if(w.subtreeFlags&2064&&R!==null)R.return=w,nr=R;else e:for(;nr!==null;){if(w=nr,w.flags&2048)switch(w.tag){case 0:case 11:case 15:_g(9,w,w.return)}var N=w.sibling;if(N!==null){N.return=w.return,nr=N;break e}nr=w.return}}var _=o.current;for(nr=_;nr!==null;){R=nr;var I=R.child;if(R.subtreeFlags&2064&&I!==null)I.return=R,nr=I;else e:for(R=_;nr!==null;){if(g=nr,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:W0(9,g)}}catch(j){Qi(g,g.return,j)}if(g===R){nr=null;break e}var b=g.sibling;if(b!==null){b.return=g.return,nr=b;break e}nr=g.return}}if($r=p,pc(),Nu&&typeof Nu.onPostCommitFiberRoot=="function")try{Nu.onPostCommitFiberRoot(Z0,o)}catch(j){}d=!0}return d}finally{di=l,Cs.transition=i}}return!1}function DP(o,i,l){i=gh(l,i),i=_4(o,i,1),o=oc(o,i,1),i=Ta(),o!==null&&(Vg(o,1,i),ja(o,i))}function Qi(o,i,l){if(o.tag===3)DP(o,o,l);else for(;i!==null;){if(i.tag===3){DP(i,o,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ac===null||!ac.has(d))){o=gh(l,o),o=T4(i,o,1),i=oc(i,o,1),o=Ta(),i!==null&&(Vg(i,1,o),ja(i,o));break}}i=i.return}}function eH(o,i,l){var d=o.pingCache;d!==null&&d.delete(i),i=Ta(),o.pingedLanes|=o.suspendedLanes&l,Mo===o&&(Zo&l)===l&&(So===4||So===3&&(Zo&130023424)===Zo&&500>lo()-$b?uf(o,0):Wb|=l),ja(o,i)}function Z4(o,i){i===0&&(o.mode&1?(i=xy,xy<<=1,!(xy&130023424)&&(xy=4194304)):i=1);var l=Ta();o=El(o,i),o!==null&&(Vg(o,i,l),ja(o,l))}function tH(o){var i=o.memoizedState,l=0;i!==null&&(l=i.retryLane),Z4(o,l)}function nH(o,i){var l=0;switch(o.tag){case 13:var d=o.stateNode,p=o.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=o.stateNode;break;default:throw Error(jn(314))}d!==null&&d.delete(i),Z4(o,l)}var G4;G4=function(o,i,l){if(o!==null)if(o.memoizedProps!==i.pendingProps||Ua.current)Fa=!0;else{if(!(o.lanes&l)&&!(i.flags&128))return Fa=!1,qq(o,i,l);Fa=!!(o.flags&131072)}else Fa=!1,Ui&&i.flags&1048576&&VF(i,_0,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;t0(o,i),o=i.pendingProps;var p=fh(i,Jo.current);uh(i,l),p=qb(null,i,d,o,p,l);var w=Hb();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ba(d)?(w=!0,y0(i)):w=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Ub(i),p.updater=Y0,i.stateNode=p,p._reactInternals=i,kI(i,d,o,l),i=BI(null,i,d,!0,w,l)):(i.tag=0,Ui&&w&&Mb(i),Ea(null,i,p,l),i=i.child),i;case 16:d=i.elementType;e:{switch(t0(o,i),o=i.pendingProps,p=d._init,d=p(d._payload),i.type=d,p=i.tag=iH(d),o=Xs(d,o),p){case 0:i=UI(null,i,d,o,l);break e;case 1:i=SP(null,i,d,o,l);break e;case 11:i=_P(null,i,d,o,l);break e;case 14:i=TP(null,i,d,Xs(d.type,o),l);break e}throw Error(jn(306,d,""))}return i;case 0:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Xs(d,p),UI(o,i,d,p,l);case 1:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Xs(d,p),SP(o,i,d,p,l);case 3:e:{if(I4(i),o===null)throw Error(jn(387));d=i.pendingProps,w=i.memoizedState,p=w.element,QF(o,i),w0(i,d,null,l);var R=i.memoizedState;if(d=R.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){p=gh(Error(jn(423)),i),i=wP(o,i,d,l,p);break e}else if(d!==p){p=gh(Error(jn(424)),i),i=wP(o,i,d,l,p);break e}else for(us=ic(i.stateNode.containerInfo.firstChild),cs=i,Ui=!0,Js=null,l=$F(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(dh(),d===p){i=_l(o,i,l);break e}Ea(o,i,d,l)}i=i.child}return i;case 5:return JF(i),o===null&&PI(i),d=i.type,p=i.pendingProps,w=o!==null?o.memoizedProps:null,R=p.children,RI(d,p)?R=null:w!==null&&RI(d,w)&&(i.flags|=32),A4(o,i),Ea(o,i,R,l),i.child;case 6:return o===null&&PI(i),null;case 13:return b4(o,i,l);case 4:return Bb(i,i.stateNode.containerInfo),d=i.pendingProps,o===null?i.child=hh(i,null,d,l):Ea(o,i,d,l),i.child;case 11:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Xs(d,p),_P(o,i,d,p,l);case 7:return Ea(o,i,i.pendingProps,l),i.child;case 8:return Ea(o,i,i.pendingProps.children,l),i.child;case 12:return Ea(o,i,i.pendingProps.children,l),i.child;case 10:e:{if(d=i.type._context,p=i.pendingProps,w=i.memoizedProps,R=p.value,Ii(T0,d._currentValue),d._currentValue=R,w!==null)if(au(w.value,R)){if(w.children===p.children&&!Ua.current){i=_l(o,i,l);break e}}else for(w=i.child,w!==null&&(w.return=i);w!==null;){var g=w.dependencies;if(g!==null){R=w.child;for(var A=g.firstContext;A!==null;){if(A.context===d){if(w.tag===1){A=ml(-1,l&-l),A.tag=2;var U=w.updateQueue;if(U!==null){U=U.shared;var C=U.pending;C===null?A.next=A:(A.next=C.next,C.next=A),U.pending=A}}w.lanes|=l,A=w.alternate,A!==null&&(A.lanes|=l),OI(w.return,l,i),g.lanes|=l;break}A=A.next}}else if(w.tag===10)R=w.type===i.type?null:w.child;else if(w.tag===18){if(R=w.return,R===null)throw Error(jn(341));R.lanes|=l,g=R.alternate,g!==null&&(g.lanes|=l),OI(R,l,i),R=w.sibling}else R=w.child;if(R!==null)R.return=w;else for(R=w;R!==null;){if(R===i){R=null;break}if(w=R.sibling,w!==null){w.return=R.return,R=w;break}R=R.return}w=R}Ea(o,i,p.children,l),i=i.child}return i;case 9:return p=i.type,d=i.pendingProps.children,uh(i,l),p=Rs(p),d=d(p),i.flags|=1,Ea(o,i,d,l),i.child;case 14:return d=i.type,p=Xs(d,i.pendingProps),p=Xs(d.type,p),TP(o,i,d,p,l);case 15:return S4(o,i,i.type,i.pendingProps,l);case 17:return d=i.type,p=i.pendingProps,p=i.elementType===d?p:Xs(d,p),t0(o,i),i.tag=1,Ba(d)?(o=!0,y0(i)):o=!1,uh(i,l),E4(i,d,p),kI(i,d,p,l),BI(null,i,d,!0,o,l);case 19:return C4(o,i,l);case 22:return w4(o,i,l)}throw Error(jn(156,i.tag))};function q4(o,i){return mF(o,i)}function rH(o,i,l,d){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(o,i,l,d){return new rH(o,i,l,d)}function eC(o){return o=o.prototype,!(!o||!o.isReactComponent)}function iH(o){if(typeof o=="function")return eC(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Eb)return 11;if(o===_b)return 14}return 2}function uc(o,i){var l=o.alternate;return l===null?(l=bs(o.tag,i,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=i,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&14680064,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,i=o.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l}function i0(o,i,l,d,p,w){var R=2;if(d=o,typeof o=="function")eC(o)&&(R=1);else if(typeof o=="string")R=5;else e:switch(o){case Hd:return lf(l.children,p,w,i);case yb:R=8,p|=8;break;case aI:return o=bs(12,l,i,p|2),o.elementType=aI,o.lanes=w,o;case sI:return o=bs(13,l,i,p),o.elementType=sI,o.lanes=w,o;case uI:return o=bs(19,l,i,p),o.elementType=uI,o.lanes=w,o;case J3:return X0(l,p,w,i);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case X3:R=10;break e;case Q3:R=9;break e;case Eb:R=11;break e;case _b:R=14;break e;case Wl:R=16,d=null;break e}throw Error(jn(130,o==null?o:typeof o,""))}return i=bs(R,l,i,p),i.elementType=o,i.type=d,i.lanes=w,i}function lf(o,i,l,d){return o=bs(7,o,d,i),o.lanes=l,o}function X0(o,i,l,d){return o=bs(22,o,d,i),o.elementType=J3,o.lanes=l,o.stateNode={isHidden:!1},o}function bT(o,i,l){return o=bs(6,o,null,i),o.lanes=l,o}function CT(o,i,l){return i=bs(4,o.children!==null?o.children:[],o.key,i),i.lanes=l,i.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},i}function oH(o,i,l,d,p){this.tag=i,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sT(0),this.expirationTimes=sT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sT(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function tC(o,i,l,d,p,w,R,g,A){return o=new oH(o,i,l,g,A),i===1?(i=1,w===!0&&(i|=8)):i=0,w=bs(3,null,null,i),o.current=w,w.stateNode=o,w.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ub(w),o}function aH(o,i,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qd,key:d==null?null:""+d,children:o,containerInfo:i,implementation:l}}function H4(o){if(!o)return fc;o=o._reactInternals;e:{if(_f(o)!==o||o.tag!==1)throw Error(jn(170));var i=o;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ba(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(jn(171))}if(o.tag===1){var l=o.type;if(Ba(l))return HF(o,l,i)}return i}function K4(o,i,l,d,p,w,R,g,A){return o=tC(l,d,!0,o,p,w,R,g,A),o.context=H4(null),l=o.current,d=Ta(),p=sc(l),w=ml(d,p),w.callback=i!=null?i:null,oc(l,w,p),o.current.lanes=p,Vg(o,p,d),ja(o,d),o}function Q0(o,i,l,d){var p=i.current,w=Ta(),R=sc(p);return l=H4(l),i.context===null?i.context=l:i.pendingContext=l,i=ml(w,R),i.payload={element:o},d=d===void 0?null:d,d!==null&&(i.callback=d),o=oc(p,i,R),o!==null&&(ou(o,p,R,w),Qy(o,p,R)),R}function M0(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function PP(o,i){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<i?l:i}}function nC(o,i){PP(o,i),(o=o.alternate)&&PP(o,i)}function sH(){return null}var V4=typeof reportError=="function"?reportError:function(o){console.error(o)};function rC(o){this._internalRoot=o}J0.prototype.render=rC.prototype.render=function(o){var i=this._internalRoot;if(i===null)throw Error(jn(409));Q0(o,i,null,null)};J0.prototype.unmount=rC.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var i=o.containerInfo;mf(function(){Q0(null,o,null,null)}),i[yl]=null}};function J0(o){this._internalRoot=o}J0.prototype.unstable_scheduleHydration=function(o){if(o){var i=wF();o={blockedOn:null,target:o,priority:i};for(var l=0;l<Xl.length&&i!==0&&i<Xl[l].priority;l++);Xl.splice(l,0,o),l===0&&IF(o)}};function iC(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function eE(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function OP(){}function uH(o,i,l,d,p){if(p){if(typeof d=="function"){var w=d;d=function(){var U=M0(R);w.call(U)}}var R=K4(i,d,o,0,null,!1,!1,"",OP);return o._reactRootContainer=R,o[yl]=R.current,Dg(o.nodeType===8?o.parentNode:o),mf(),R}for(;p=o.lastChild;)o.removeChild(p);if(typeof d=="function"){var g=d;d=function(){var U=M0(A);g.call(U)}}var A=tC(o,0,!1,null,null,!1,!1,"",OP);return o._reactRootContainer=A,o[yl]=A.current,Dg(o.nodeType===8?o.parentNode:o),mf(function(){Q0(i,A,l,d)}),A}function tE(o,i,l,d,p){var w=l._reactRootContainer;if(w){var R=w;if(typeof p=="function"){var g=p;p=function(){var A=M0(R);g.call(A)}}Q0(i,R,o,p)}else R=uH(l,i,o,p,d);return M0(R)}TF=function(o){switch(o.tag){case 3:var i=o.stateNode;if(i.current.memoizedState.isDehydrated){var l=lg(i.pendingLanes);l!==0&&(wb(i,l|1),ja(i,lo()),!($r&6)&&(mh=lo()+500,pc()))}break;case 13:mf(function(){var d=El(o,1);if(d!==null){var p=Ta();ou(d,o,1,p)}}),nC(o,1)}};Ab=function(o){if(o.tag===13){var i=El(o,134217728);if(i!==null){var l=Ta();ou(i,o,134217728,l)}nC(o,134217728)}};SF=function(o){if(o.tag===13){var i=sc(o),l=El(o,i);if(l!==null){var d=Ta();ou(l,o,i,d)}nC(o,i)}};wF=function(){return di};AF=function(o,i){var l=di;try{return di=o,i()}finally{di=l}};yI=function(o,i,l){switch(i){case"input":if(fI(o,l),i=l.name,l.type==="radio"&&i!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==o&&d.form===o.form){var p=K0(d);if(!p)throw Error(jn(90));tF(d),fI(d,p)}}}break;case"textarea":rF(o,l);break;case"select":i=l.value,i!=null&&ih(o,!!l.multiple,i,!1)}};cF=Xb;fF=mf;var lH={usingClientEntryPoint:!1,Events:[Yg,Yd,K0,uF,lF,Xb]},tg={findFiberByHostInstance:rf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cH={bundleType:tg.bundleType,version:tg.version,rendererPackageName:tg.rendererPackageName,rendererConfig:tg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tl.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=pF(o),o===null?null:o.stateNode},findFiberByHostInstance:tg.findFiberByHostInstance||sH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jy.isDisabled&&jy.supportsFiber)try{Z0=jy.inject(cH),Nu=jy}catch(o){}}ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lH;ds.createPortal=function(o,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iC(i))throw Error(jn(200));return aH(o,i,null,l)};ds.createRoot=function(o,i){if(!iC(o))throw Error(jn(299));var l=!1,d="",p=V4;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=tC(o,1,!1,null,null,l,!1,d,p),o[yl]=i.current,Dg(o.nodeType===8?o.parentNode:o),new rC(i)};ds.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var i=o._reactInternals;if(i===void 0)throw typeof o.render=="function"?Error(jn(188)):(o=Object.keys(o).join(","),Error(jn(268,o)));return o=pF(i),o=o===null?null:o.stateNode,o};ds.flushSync=function(o){return mf(o)};ds.hydrate=function(o,i,l){if(!eE(i))throw Error(jn(200));return tE(null,o,i,!0,l)};ds.hydrateRoot=function(o,i,l){if(!iC(o))throw Error(jn(405));var d=l!=null&&l.hydratedSources||null,p=!1,w="",R=V4;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(R=l.onRecoverableError)),i=K4(i,null,o,1,l!=null?l:null,p,!1,w,R),o[yl]=i.current,Dg(o),d)for(o=0;o<d.length;o++)l=d[o],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new J0(i)};ds.render=function(o,i,l){if(!eE(i))throw Error(jn(200));return tE(null,o,i,!1,l)};ds.unmountComponentAtNode=function(o){if(!eE(o))throw Error(jn(40));return o._reactRootContainer?(mf(function(){tE(null,null,o,!1,function(){o._reactRootContainer=null,o[yl]=null})}),!0):!1};ds.unstable_batchedUpdates=Xb;ds.unstable_renderSubtreeIntoContainer=function(o,i,l,d){if(!eE(l))throw Error(jn(200));if(o==null||o._reactInternals===void 0)throw Error(jn(38));return tE(o,i,l,!1,d)};ds.version="18.3.1-next-f1338f8080-20240426";function z4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z4)}catch(o){console.error(o)}}z4(),z3.exports=ds;var fH=z3.exports,LP=fH;iI.createRoot=LP.createRoot,iI.hydrateRoot=LP.hydrateRoot;var Y4={exports:{}},RT,kP;function Tf(){if(kP)return RT;kP=1;function o(i){var l=typeof i;return i!=null&&(l=="object"||l=="function")}return RT=o,RT}var xT,FP;function W4(){if(FP)return xT;FP=1;var o=typeof tu=="object"&&tu&&tu.Object===Object&&tu;return xT=o,xT}var NT,UP;function Du(){if(UP)return NT;UP=1;var o=W4(),i=typeof self=="object"&&self&&self.Object===Object&&self,l=o||i||Function("return this")();return NT=l,NT}var MT,BP;function dH(){if(BP)return MT;BP=1;var o=Du(),i=function(){return o.Date.now()};return MT=i,MT}var DT,jP;function hH(){if(jP)return DT;jP=1;var o=/\s/;function i(l){for(var d=l.length;d--&&o.test(l.charAt(d)););return d}return DT=i,DT}var PT,ZP;function pH(){if(ZP)return PT;ZP=1;var o=hH(),i=/^\s+/;function l(d){return d&&d.slice(0,o(d)+1).replace(i,"")}return PT=l,PT}var OT,GP;function $g(){if(GP)return OT;GP=1;var o=Du(),i=o.Symbol;return OT=i,OT}var LT,qP;function gH(){if(qP)return LT;qP=1;var o=$g(),i=Object.prototype,l=i.hasOwnProperty,d=i.toString,p=o?o.toStringTag:void 0;function w(R){var g=l.call(R,p),A=R[p];try{R[p]=void 0;var U=!0}catch(y){}var C=d.call(R);return U&&(g?R[p]=A:delete R[p]),C}return LT=w,LT}var kT,HP;function mH(){if(HP)return kT;HP=1;var o=Object.prototype,i=o.toString;function l(d){return i.call(d)}return kT=l,kT}var FT,KP;function Xg(){if(KP)return FT;KP=1;var o=$g(),i=gH(),l=mH(),d="[object Null]",p="[object Undefined]",w=o?o.toStringTag:void 0;function R(g){return g==null?g===void 0?p:d:w&&w in Object(g)?i(g):l(g)}return FT=R,FT}var UT,VP;function Th(){if(VP)return UT;VP=1;function o(i){return i!=null&&typeof i=="object"}return UT=o,UT}var BT,zP;function Qg(){if(zP)return BT;zP=1;var o=Xg(),i=Th(),l="[object Symbol]";function d(p){return typeof p=="symbol"||i(p)&&o(p)==l}return BT=d,BT}var jT,YP;function vH(){if(YP)return jT;YP=1;var o=pH(),i=Tf(),l=Qg(),d=NaN,p=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,R=/^0o[0-7]+$/i,g=parseInt;function A(U){if(typeof U=="number")return U;if(l(U))return d;if(i(U)){var C=typeof U.valueOf=="function"?U.valueOf():U;U=i(C)?C+"":C}if(typeof U!="string")return U===0?U:+U;U=o(U);var y=w.test(U);return y||R.test(U)?g(U.slice(2),y?2:8):p.test(U)?d:+U}return jT=A,jT}var ZT,WP;function $4(){if(WP)return ZT;WP=1;var o=Tf(),i=dH(),l=vH(),d="Expected a function",p=Math.max,w=Math.min;function R(g,A,U){var C,y,v,D,m,T,F=0,N=!1,_=!1,I=!0;if(typeof g!="function")throw new TypeError(d);A=l(A)||0,o(U)&&(N=!!U.leading,_="maxWait"in U,v=_?p(l(U.maxWait)||0,A):v,I="trailing"in U?!!U.trailing:I);function b(oe){var ge=C,Re=y;return C=y=void 0,F=oe,D=g.apply(Re,ge),D}function j(oe){return F=oe,m=setTimeout(W,A),N?b(oe):D}function Y(oe){var ge=oe-T,Re=oe-F,Je=A-ge;return _?w(Je,v-Re):Je}function $(oe){var ge=oe-T,Re=oe-F;return T===void 0||ge>=A||ge<0||_&&Re>=v}function W(){var oe=i();if($(oe))return ue(oe);m=setTimeout(W,Y(oe))}function ue(oe){return m=void 0,I&&C?b(oe):(C=y=void 0,D)}function x(){m!==void 0&&clearTimeout(m),F=0,C=T=y=m=void 0}function X(){return m===void 0?D:ue(i())}function fe(){var oe=i(),ge=$(oe);if(C=arguments,y=this,T=oe,ge){if(m===void 0)return j(T);if(_)return clearTimeout(m),m=setTimeout(W,A),b(T)}return m===void 0&&(m=setTimeout(W,A)),D}return fe.cancel=x,fe.flush=X,fe}return ZT=R,ZT}var GT,$P;function X4(){if($P)return GT;$P=1;var o=Xg(),i=Tf(),l="[object AsyncFunction]",d="[object Function]",p="[object GeneratorFunction]",w="[object Proxy]";function R(g){if(!i(g))return!1;var A=o(g);return A==d||A==p||A==l||A==w}return GT=R,GT}var qT,XP;function yH(){if(XP)return qT;XP=1;var o=Du(),i=o["__core-js_shared__"];return qT=i,qT}var HT,QP;function EH(){if(QP)return HT;QP=1;var o=yH(),i=function(){var d=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function l(d){return!!i&&i in d}return HT=l,HT}var KT,JP;function Q4(){if(JP)return KT;JP=1;var o=Function.prototype,i=o.toString;function l(d){if(d!=null){try{return i.call(d)}catch(p){}try{return d+""}catch(p){}}return""}return KT=l,KT}var VT,eO;function _H(){if(eO)return VT;eO=1;var o=X4(),i=EH(),l=Tf(),d=Q4(),p=/[\\^$.*+?()[\]{}|]/g,w=/^\[object .+?Constructor\]$/,R=Function.prototype,g=Object.prototype,A=R.toString,U=g.hasOwnProperty,C=RegExp("^"+A.call(U).replace(p,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y(v){if(!l(v)||i(v))return!1;var D=o(v)?C:w;return D.test(d(v))}return VT=y,VT}var zT,tO;function TH(){if(tO)return zT;tO=1;function o(i,l){return i==null?void 0:i[l]}return zT=o,zT}var YT,nO;function Sf(){if(nO)return YT;nO=1;var o=_H(),i=TH();function l(d,p){var w=i(d,p);return o(w)?w:void 0}return YT=l,YT}var WT,rO;function nE(){if(rO)return WT;rO=1;var o=Sf(),i=o(Object,"create");return WT=i,WT}var $T,iO;function SH(){if(iO)return $T;iO=1;var o=nE();function i(){this.__data__=o?o(null):{},this.size=0}return $T=i,$T}var XT,oO;function wH(){if(oO)return XT;oO=1;function o(i){var l=this.has(i)&&delete this.__data__[i];return this.size-=l?1:0,l}return XT=o,XT}var QT,aO;function AH(){if(aO)return QT;aO=1;var o=nE(),i="__lodash_hash_undefined__",l=Object.prototype,d=l.hasOwnProperty;function p(w){var R=this.__data__;if(o){var g=R[w];return g===i?void 0:g}return d.call(R,w)?R[w]:void 0}return QT=p,QT}var JT,sO;function IH(){if(sO)return JT;sO=1;var o=nE(),i=Object.prototype,l=i.hasOwnProperty;function d(p){var w=this.__data__;return o?w[p]!==void 0:l.call(w,p)}return JT=d,JT}var eS,uO;function bH(){if(uO)return eS;uO=1;var o=nE(),i="__lodash_hash_undefined__";function l(d,p){var w=this.__data__;return this.size+=this.has(d)?0:1,w[d]=o&&p===void 0?i:p,this}return eS=l,eS}var tS,lO;function CH(){if(lO)return tS;lO=1;var o=SH(),i=wH(),l=AH(),d=IH(),p=bH();function w(R){var g=-1,A=R==null?0:R.length;for(this.clear();++g<A;){var U=R[g];this.set(U[0],U[1])}}return w.prototype.clear=o,w.prototype.delete=i,w.prototype.get=l,w.prototype.has=d,w.prototype.set=p,tS=w,tS}var nS,cO;function RH(){if(cO)return nS;cO=1;function o(){this.__data__=[],this.size=0}return nS=o,nS}var rS,fO;function oC(){if(fO)return rS;fO=1;function o(i,l){return i===l||i!==i&&l!==l}return rS=o,rS}var iS,dO;function rE(){if(dO)return iS;dO=1;var o=oC();function i(l,d){for(var p=l.length;p--;)if(o(l[p][0],d))return p;return-1}return iS=i,iS}var oS,hO;function xH(){if(hO)return oS;hO=1;var o=rE(),i=Array.prototype,l=i.splice;function d(p){var w=this.__data__,R=o(w,p);if(R<0)return!1;var g=w.length-1;return R==g?w.pop():l.call(w,R,1),--this.size,!0}return oS=d,oS}var aS,pO;function NH(){if(pO)return aS;pO=1;var o=rE();function i(l){var d=this.__data__,p=o(d,l);return p<0?void 0:d[p][1]}return aS=i,aS}var sS,gO;function MH(){if(gO)return sS;gO=1;var o=rE();function i(l){return o(this.__data__,l)>-1}return sS=i,sS}var uS,mO;function DH(){if(mO)return uS;mO=1;var o=rE();function i(l,d){var p=this.__data__,w=o(p,l);return w<0?(++this.size,p.push([l,d])):p[w][1]=d,this}return uS=i,uS}var lS,vO;function iE(){if(vO)return lS;vO=1;var o=RH(),i=xH(),l=NH(),d=MH(),p=DH();function w(R){var g=-1,A=R==null?0:R.length;for(this.clear();++g<A;){var U=R[g];this.set(U[0],U[1])}}return w.prototype.clear=o,w.prototype.delete=i,w.prototype.get=l,w.prototype.has=d,w.prototype.set=p,lS=w,lS}var cS,yO;function aC(){if(yO)return cS;yO=1;var o=Sf(),i=Du(),l=o(i,"Map");return cS=l,cS}var fS,EO;function PH(){if(EO)return fS;EO=1;var o=CH(),i=iE(),l=aC();function d(){this.size=0,this.__data__={hash:new o,map:new(l||i),string:new o}}return fS=d,fS}var dS,_O;function OH(){if(_O)return dS;_O=1;function o(i){var l=typeof i;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?i!=="__proto__":i===null}return dS=o,dS}var hS,TO;function oE(){if(TO)return hS;TO=1;var o=OH();function i(l,d){var p=l.__data__;return o(d)?p[typeof d=="string"?"string":"hash"]:p.map}return hS=i,hS}var pS,SO;function LH(){if(SO)return pS;SO=1;var o=oE();function i(l){var d=o(this,l).delete(l);return this.size-=d?1:0,d}return pS=i,pS}var gS,wO;function kH(){if(wO)return gS;wO=1;var o=oE();function i(l){return o(this,l).get(l)}return gS=i,gS}var mS,AO;function FH(){if(AO)return mS;AO=1;var o=oE();function i(l){return o(this,l).has(l)}return mS=i,mS}var vS,IO;function UH(){if(IO)return vS;IO=1;var o=oE();function i(l,d){var p=o(this,l),w=p.size;return p.set(l,d),this.size+=p.size==w?0:1,this}return vS=i,vS}var yS,bO;function sC(){if(bO)return yS;bO=1;var o=PH(),i=LH(),l=kH(),d=FH(),p=UH();function w(R){var g=-1,A=R==null?0:R.length;for(this.clear();++g<A;){var U=R[g];this.set(U[0],U[1])}}return w.prototype.clear=o,w.prototype.delete=i,w.prototype.get=l,w.prototype.has=d,w.prototype.set=p,yS=w,yS}var ES,CO;function BH(){if(CO)return ES;CO=1;var o="__lodash_hash_undefined__";function i(l){return this.__data__.set(l,o),this}return ES=i,ES}var _S,RO;function jH(){if(RO)return _S;RO=1;function o(i){return this.__data__.has(i)}return _S=o,_S}var TS,xO;function J4(){if(xO)return TS;xO=1;var o=sC(),i=BH(),l=jH();function d(p){var w=-1,R=p==null?0:p.length;for(this.__data__=new o;++w<R;)this.add(p[w])}return d.prototype.add=d.prototype.push=i,d.prototype.has=l,TS=d,TS}var SS,NO;function ZH(){if(NO)return SS;NO=1;function o(i,l,d,p){for(var w=i.length,R=d+(p?1:-1);p?R--:++R<w;)if(l(i[R],R,i))return R;return-1}return SS=o,SS}var wS,MO;function GH(){if(MO)return wS;MO=1;function o(i){return i!==i}return wS=o,wS}var AS,DO;function qH(){if(DO)return AS;DO=1;function o(i,l,d){for(var p=d-1,w=i.length;++p<w;)if(i[p]===l)return p;return-1}return AS=o,AS}var IS,PO;function HH(){if(PO)return IS;PO=1;var o=ZH(),i=GH(),l=qH();function d(p,w,R){return w===w?l(p,w,R):o(p,i,R)}return IS=d,IS}var bS,OO;function KH(){if(OO)return bS;OO=1;var o=HH();function i(l,d){var p=l==null?0:l.length;return!!p&&o(l,d,0)>-1}return bS=i,bS}var CS,LO;function VH(){if(LO)return CS;LO=1;function o(i,l,d){for(var p=-1,w=i==null?0:i.length;++p<w;)if(d(l,i[p]))return!0;return!1}return CS=o,CS}var RS,kO;function uC(){if(kO)return RS;kO=1;function o(i,l){for(var d=-1,p=i==null?0:i.length,w=Array(p);++d<p;)w[d]=l(i[d],d,i);return w}return RS=o,RS}var xS,FO;function lC(){if(FO)return xS;FO=1;function o(i){return function(l){return i(l)}}return xS=o,xS}var NS,UO;function eU(){if(UO)return NS;UO=1;function o(i,l){return i.has(l)}return NS=o,NS}var MS,BO;function zH(){if(BO)return MS;BO=1;var o=J4(),i=KH(),l=VH(),d=uC(),p=lC(),w=eU(),R=200;function g(A,U,C,y){var v=-1,D=i,m=!0,T=A.length,F=[],N=U.length;if(!T)return F;C&&(U=d(U,p(C))),y?(D=l,m=!1):U.length>=R&&(D=w,m=!1,U=new o(U));e:for(;++v<T;){var _=A[v],I=C==null?_:C(_);if(_=y||_!==0?_:0,m&&I===I){for(var b=N;b--;)if(U[b]===I)continue e;F.push(_)}else D(U,I,y)||F.push(_)}return F}return MS=g,MS}var DS,jO;function tU(){if(jO)return DS;jO=1;function o(i,l){for(var d=-1,p=l.length,w=i.length;++d<p;)i[w+d]=l[d];return i}return DS=o,DS}var PS,ZO;function YH(){if(ZO)return PS;ZO=1;var o=Xg(),i=Th(),l="[object Arguments]";function d(p){return i(p)&&o(p)==l}return PS=d,PS}var OS,GO;function cC(){if(GO)return OS;GO=1;var o=YH(),i=Th(),l=Object.prototype,d=l.hasOwnProperty,p=l.propertyIsEnumerable,w=o(function(){return arguments}())?o:function(R){return i(R)&&d.call(R,"callee")&&!p.call(R,"callee")};return OS=w,OS}var LS,qO;function Ns(){if(qO)return LS;qO=1;var o=Array.isArray;return LS=o,LS}var kS,HO;function WH(){if(HO)return kS;HO=1;var o=$g(),i=cC(),l=Ns(),d=o?o.isConcatSpreadable:void 0;function p(w){return l(w)||i(w)||!!(d&&w&&w[d])}return kS=p,kS}var FS,KO;function nU(){if(KO)return FS;KO=1;var o=tU(),i=WH();function l(d,p,w,R,g){var A=-1,U=d.length;for(w||(w=i),g||(g=[]);++A<U;){var C=d[A];p>0&&w(C)?p>1?l(C,p-1,w,R,g):o(g,C):R||(g[g.length]=C)}return g}return FS=l,FS}var US,VO;function Jg(){if(VO)return US;VO=1;function o(i){return i}return US=o,US}var BS,zO;function $H(){if(zO)return BS;zO=1;function o(i,l,d){switch(d.length){case 0:return i.call(l);case 1:return i.call(l,d[0]);case 2:return i.call(l,d[0],d[1]);case 3:return i.call(l,d[0],d[1],d[2])}return i.apply(l,d)}return BS=o,BS}var jS,YO;function XH(){if(YO)return jS;YO=1;var o=$H(),i=Math.max;function l(d,p,w){return p=i(p===void 0?d.length-1:p,0),function(){for(var R=arguments,g=-1,A=i(R.length-p,0),U=Array(A);++g<A;)U[g]=R[p+g];g=-1;for(var C=Array(p+1);++g<p;)C[g]=R[g];return C[p]=w(U),o(d,this,C)}}return jS=l,jS}var ZS,WO;function QH(){if(WO)return ZS;WO=1;function o(i){return function(){return i}}return ZS=o,ZS}var GS,$O;function JH(){if($O)return GS;$O=1;var o=Sf(),i=function(){try{var l=o(Object,"defineProperty");return l({},"",{}),l}catch(d){}}();return GS=i,GS}var qS,XO;function e7(){if(XO)return qS;XO=1;var o=QH(),i=JH(),l=Jg(),d=i?function(p,w){return i(p,"toString",{configurable:!0,enumerable:!1,value:o(w),writable:!0})}:l;return qS=d,qS}var HS,QO;function t7(){if(QO)return HS;QO=1;var o=800,i=16,l=Date.now;function d(p){var w=0,R=0;return function(){var g=l(),A=i-(g-R);if(R=g,A>0){if(++w>=o)return arguments[0]}else w=0;return p.apply(void 0,arguments)}}return HS=d,HS}var KS,JO;function n7(){if(JO)return KS;JO=1;var o=e7(),i=t7(),l=i(o);return KS=l,KS}var VS,eL;function rU(){if(eL)return VS;eL=1;var o=Jg(),i=XH(),l=n7();function d(p,w){return l(i(p,w,o),p+"")}return VS=d,VS}var zS,tL;function fC(){if(tL)return zS;tL=1;var o=9007199254740991;function i(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=o}return zS=i,zS}var YS,nL;function em(){if(nL)return YS;nL=1;var o=X4(),i=fC();function l(d){return d!=null&&i(d.length)&&!o(d)}return YS=l,YS}var WS,rL;function r7(){if(rL)return WS;rL=1;var o=em(),i=Th();function l(d){return i(d)&&o(d)}return WS=l,WS}var $S,iL;function i7(){if(iL)return $S;iL=1;var o=zH(),i=nU(),l=rU(),d=r7(),p=l(function(w,R){return d(w)?o(w,i(R,1,d,!0)):[]});return $S=p,$S}var XS,oL;function iU(){if(oL)return XS;oL=1;function o(i,l){for(var d=-1,p=i==null?0:i.length,w=0,R=[];++d<p;){var g=i[d];l(g,d,i)&&(R[w++]=g)}return R}return XS=o,XS}var QS,aL;function o7(){if(aL)return QS;aL=1;function o(i){return function(l,d,p){for(var w=-1,R=Object(l),g=p(l),A=g.length;A--;){var U=g[i?A:++w];if(d(R[U],U,R)===!1)break}return l}}return QS=o,QS}var JS,sL;function a7(){if(sL)return JS;sL=1;var o=o7(),i=o();return JS=i,JS}var ew,uL;function s7(){if(uL)return ew;uL=1;function o(i,l){for(var d=-1,p=Array(i);++d<i;)p[d]=l(d);return p}return ew=o,ew}var fg={exports:{}},tw,lL;function u7(){if(lL)return tw;lL=1;function o(){return!1}return tw=o,tw}fg.exports;var cL;function oU(){return cL||(cL=1,function(o,i){var l=Du(),d=u7(),p=i&&!i.nodeType&&i,w=p&&!0&&o&&!o.nodeType&&o,R=w&&w.exports===p,g=R?l.Buffer:void 0,A=g?g.isBuffer:void 0,U=A||d;o.exports=U}(fg,fg.exports)),fg.exports}var nw,fL;function dC(){if(fL)return nw;fL=1;var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;function l(d,p){var w=typeof d;return p=p==null?o:p,!!p&&(w=="number"||w!="symbol"&&i.test(d))&&d>-1&&d%1==0&&d<p}return nw=l,nw}var rw,dL;function l7(){if(dL)return rw;dL=1;var o=Xg(),i=fC(),l=Th(),d="[object Arguments]",p="[object Array]",w="[object Boolean]",R="[object Date]",g="[object Error]",A="[object Function]",U="[object Map]",C="[object Number]",y="[object Object]",v="[object RegExp]",D="[object Set]",m="[object String]",T="[object WeakMap]",F="[object ArrayBuffer]",N="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",b="[object Int8Array]",j="[object Int16Array]",Y="[object Int32Array]",$="[object Uint8Array]",W="[object Uint8ClampedArray]",ue="[object Uint16Array]",x="[object Uint32Array]",X={};X[_]=X[I]=X[b]=X[j]=X[Y]=X[$]=X[W]=X[ue]=X[x]=!0,X[d]=X[p]=X[F]=X[w]=X[N]=X[R]=X[g]=X[A]=X[U]=X[C]=X[y]=X[v]=X[D]=X[m]=X[T]=!1;function fe(oe){return l(oe)&&i(oe.length)&&!!X[o(oe)]}return rw=fe,rw}var dg={exports:{}};dg.exports;var hL;function c7(){return hL||(hL=1,function(o,i){var l=W4(),d=i&&!i.nodeType&&i,p=d&&!0&&o&&!o.nodeType&&o,w=p&&p.exports===d,R=w&&l.process,g=function(){try{var A=p&&p.require&&p.require("util").types;return A||R&&R.binding&&R.binding("util")}catch(U){}}();o.exports=g}(dg,dg.exports)),dg.exports}var iw,pL;function aU(){if(pL)return iw;pL=1;var o=l7(),i=lC(),l=c7(),d=l&&l.isTypedArray,p=d?i(d):o;return iw=p,iw}var ow,gL;function f7(){if(gL)return ow;gL=1;var o=s7(),i=cC(),l=Ns(),d=oU(),p=dC(),w=aU(),R=Object.prototype,g=R.hasOwnProperty;function A(U,C){var y=l(U),v=!y&&i(U),D=!y&&!v&&d(U),m=!y&&!v&&!D&&w(U),T=y||v||D||m,F=T?o(U.length,String):[],N=F.length;for(var _ in U)(C||g.call(U,_))&&!(T&&(_=="length"||D&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||p(_,N)))&&F.push(_);return F}return ow=A,ow}var aw,mL;function d7(){if(mL)return aw;mL=1;var o=Object.prototype;function i(l){var d=l&&l.constructor,p=typeof d=="function"&&d.prototype||o;return l===p}return aw=i,aw}var sw,vL;function h7(){if(vL)return sw;vL=1;function o(i,l){return function(d){return i(l(d))}}return sw=o,sw}var uw,yL;function p7(){if(yL)return uw;yL=1;var o=h7(),i=o(Object.keys,Object);return uw=i,uw}var lw,EL;function g7(){if(EL)return lw;EL=1;var o=d7(),i=p7(),l=Object.prototype,d=l.hasOwnProperty;function p(w){if(!o(w))return i(w);var R=[];for(var g in Object(w))d.call(w,g)&&g!="constructor"&&R.push(g);return R}return lw=p,lw}var cw,_L;function hC(){if(_L)return cw;_L=1;var o=f7(),i=g7(),l=em();function d(p){return l(p)?o(p):i(p)}return cw=d,cw}var fw,TL;function pC(){if(TL)return fw;TL=1;var o=a7(),i=hC();function l(d,p){return d&&o(d,p,i)}return fw=l,fw}var dw,SL;function m7(){if(SL)return dw;SL=1;var o=em();function i(l,d){return function(p,w){if(p==null)return p;if(!o(p))return l(p,w);for(var R=p.length,g=d?R:-1,A=Object(p);(d?g--:++g<R)&&w(A[g],g,A)!==!1;);return p}}return dw=i,dw}var hw,wL;function gC(){if(wL)return hw;wL=1;var o=pC(),i=m7(),l=i(o);return hw=l,hw}var pw,AL;function v7(){if(AL)return pw;AL=1;var o=gC();function i(l,d){var p=[];return o(l,function(w,R,g){d(w,R,g)&&p.push(w)}),p}return pw=i,pw}var gw,IL;function y7(){if(IL)return gw;IL=1;var o=iE();function i(){this.__data__=new o,this.size=0}return gw=i,gw}var mw,bL;function E7(){if(bL)return mw;bL=1;function o(i){var l=this.__data__,d=l.delete(i);return this.size=l.size,d}return mw=o,mw}var vw,CL;function _7(){if(CL)return vw;CL=1;function o(i){return this.__data__.get(i)}return vw=o,vw}var yw,RL;function T7(){if(RL)return yw;RL=1;function o(i){return this.__data__.has(i)}return yw=o,yw}var Ew,xL;function S7(){if(xL)return Ew;xL=1;var o=iE(),i=aC(),l=sC(),d=200;function p(w,R){var g=this.__data__;if(g instanceof o){var A=g.__data__;if(!i||A.length<d-1)return A.push([w,R]),this.size=++g.size,this;g=this.__data__=new l(A)}return g.set(w,R),this.size=g.size,this}return Ew=p,Ew}var _w,NL;function sU(){if(NL)return _w;NL=1;var o=iE(),i=y7(),l=E7(),d=_7(),p=T7(),w=S7();function R(g){var A=this.__data__=new o(g);this.size=A.size}return R.prototype.clear=i,R.prototype.delete=l,R.prototype.get=d,R.prototype.has=p,R.prototype.set=w,_w=R,_w}var Tw,ML;function w7(){if(ML)return Tw;ML=1;function o(i,l){for(var d=-1,p=i==null?0:i.length;++d<p;)if(l(i[d],d,i))return!0;return!1}return Tw=o,Tw}var Sw,DL;function uU(){if(DL)return Sw;DL=1;var o=J4(),i=w7(),l=eU(),d=1,p=2;function w(R,g,A,U,C,y){var v=A&d,D=R.length,m=g.length;if(D!=m&&!(v&&m>D))return!1;var T=y.get(R),F=y.get(g);if(T&&F)return T==g&&F==R;var N=-1,_=!0,I=A&p?new o:void 0;for(y.set(R,g),y.set(g,R);++N<D;){var b=R[N],j=g[N];if(U)var Y=v?U(j,b,N,g,R,y):U(b,j,N,R,g,y);if(Y!==void 0){if(Y)continue;_=!1;break}if(I){if(!i(g,function($,W){if(!l(I,W)&&(b===$||C(b,$,A,U,y)))return I.push(W)})){_=!1;break}}else if(!(b===j||C(b,j,A,U,y))){_=!1;break}}return y.delete(R),y.delete(g),_}return Sw=w,Sw}var ww,PL;function A7(){if(PL)return ww;PL=1;var o=Du(),i=o.Uint8Array;return ww=i,ww}var Aw,OL;function I7(){if(OL)return Aw;OL=1;function o(i){var l=-1,d=Array(i.size);return i.forEach(function(p,w){d[++l]=[w,p]}),d}return Aw=o,Aw}var Iw,LL;function b7(){if(LL)return Iw;LL=1;function o(i){var l=-1,d=Array(i.size);return i.forEach(function(p){d[++l]=p}),d}return Iw=o,Iw}var bw,kL;function C7(){if(kL)return bw;kL=1;var o=$g(),i=A7(),l=oC(),d=uU(),p=I7(),w=b7(),R=1,g=2,A="[object Boolean]",U="[object Date]",C="[object Error]",y="[object Map]",v="[object Number]",D="[object RegExp]",m="[object Set]",T="[object String]",F="[object Symbol]",N="[object ArrayBuffer]",_="[object DataView]",I=o?o.prototype:void 0,b=I?I.valueOf:void 0;function j(Y,$,W,ue,x,X,fe){switch(W){case _:if(Y.byteLength!=$.byteLength||Y.byteOffset!=$.byteOffset)return!1;Y=Y.buffer,$=$.buffer;case N:return!(Y.byteLength!=$.byteLength||!X(new i(Y),new i($)));case A:case U:case v:return l(+Y,+$);case C:return Y.name==$.name&&Y.message==$.message;case D:case T:return Y==$+"";case y:var oe=p;case m:var ge=ue&R;if(oe||(oe=w),Y.size!=$.size&&!ge)return!1;var Re=fe.get(Y);if(Re)return Re==$;ue|=g,fe.set(Y,$);var Je=d(oe(Y),oe($),ue,x,X,fe);return fe.delete(Y),Je;case F:if(b)return b.call(Y)==b.call($)}return!1}return bw=j,bw}var Cw,FL;function R7(){if(FL)return Cw;FL=1;var o=tU(),i=Ns();function l(d,p,w){var R=p(d);return i(d)?R:o(R,w(d))}return Cw=l,Cw}var Rw,UL;function x7(){if(UL)return Rw;UL=1;function o(){return[]}return Rw=o,Rw}var xw,BL;function N7(){if(BL)return xw;BL=1;var o=iU(),i=x7(),l=Object.prototype,d=l.propertyIsEnumerable,p=Object.getOwnPropertySymbols,w=p?function(R){return R==null?[]:(R=Object(R),o(p(R),function(g){return d.call(R,g)}))}:i;return xw=w,xw}var Nw,jL;function M7(){if(jL)return Nw;jL=1;var o=R7(),i=N7(),l=hC();function d(p){return o(p,l,i)}return Nw=d,Nw}var Mw,ZL;function D7(){if(ZL)return Mw;ZL=1;var o=M7(),i=1,l=Object.prototype,d=l.hasOwnProperty;function p(w,R,g,A,U,C){var y=g&i,v=o(w),D=v.length,m=o(R),T=m.length;if(D!=T&&!y)return!1;for(var F=D;F--;){var N=v[F];if(!(y?N in R:d.call(R,N)))return!1}var _=C.get(w),I=C.get(R);if(_&&I)return _==R&&I==w;var b=!0;C.set(w,R),C.set(R,w);for(var j=y;++F<D;){N=v[F];var Y=w[N],$=R[N];if(A)var W=y?A($,Y,N,R,w,C):A(Y,$,N,w,R,C);if(!(W===void 0?Y===$||U(Y,$,g,A,C):W)){b=!1;break}j||(j=N=="constructor")}if(b&&!j){var ue=w.constructor,x=R.constructor;ue!=x&&"constructor"in w&&"constructor"in R&&!(typeof ue=="function"&&ue instanceof ue&&typeof x=="function"&&x instanceof x)&&(b=!1)}return C.delete(w),C.delete(R),b}return Mw=p,Mw}var Dw,GL;function P7(){if(GL)return Dw;GL=1;var o=Sf(),i=Du(),l=o(i,"DataView");return Dw=l,Dw}var Pw,qL;function O7(){if(qL)return Pw;qL=1;var o=Sf(),i=Du(),l=o(i,"Promise");return Pw=l,Pw}var Ow,HL;function L7(){if(HL)return Ow;HL=1;var o=Sf(),i=Du(),l=o(i,"Set");return Ow=l,Ow}var Lw,KL;function k7(){if(KL)return Lw;KL=1;var o=Sf(),i=Du(),l=o(i,"WeakMap");return Lw=l,Lw}var kw,VL;function F7(){if(VL)return kw;VL=1;var o=P7(),i=aC(),l=O7(),d=L7(),p=k7(),w=Xg(),R=Q4(),g="[object Map]",A="[object Object]",U="[object Promise]",C="[object Set]",y="[object WeakMap]",v="[object DataView]",D=R(o),m=R(i),T=R(l),F=R(d),N=R(p),_=w;return(o&&_(new o(new ArrayBuffer(1)))!=v||i&&_(new i)!=g||l&&_(l.resolve())!=U||d&&_(new d)!=C||p&&_(new p)!=y)&&(_=function(I){var b=w(I),j=b==A?I.constructor:void 0,Y=j?R(j):"";if(Y)switch(Y){case D:return v;case m:return g;case T:return U;case F:return C;case N:return y}return b}),kw=_,kw}var Fw,zL;function U7(){if(zL)return Fw;zL=1;var o=sU(),i=uU(),l=C7(),d=D7(),p=F7(),w=Ns(),R=oU(),g=aU(),A=1,U="[object Arguments]",C="[object Array]",y="[object Object]",v=Object.prototype,D=v.hasOwnProperty;function m(T,F,N,_,I,b){var j=w(T),Y=w(F),$=j?C:p(T),W=Y?C:p(F);$=$==U?y:$,W=W==U?y:W;var ue=$==y,x=W==y,X=$==W;if(X&&R(T)){if(!R(F))return!1;j=!0,ue=!1}if(X&&!ue)return b||(b=new o),j||g(T)?i(T,F,N,_,I,b):l(T,F,$,N,_,I,b);if(!(N&A)){var fe=ue&&D.call(T,"__wrapped__"),oe=x&&D.call(F,"__wrapped__");if(fe||oe){var ge=fe?T.value():T,Re=oe?F.value():F;return b||(b=new o),I(ge,Re,N,_,b)}}return X?(b||(b=new o),d(T,F,N,_,I,b)):!1}return Fw=m,Fw}var Uw,YL;function lU(){if(YL)return Uw;YL=1;var o=U7(),i=Th();function l(d,p,w,R,g){return d===p?!0:d==null||p==null||!i(d)&&!i(p)?d!==d&&p!==p:o(d,p,w,R,l,g)}return Uw=l,Uw}var Bw,WL;function B7(){if(WL)return Bw;WL=1;var o=sU(),i=lU(),l=1,d=2;function p(w,R,g,A){var U=g.length,C=U,y=!A;if(w==null)return!C;for(w=Object(w);U--;){var v=g[U];if(y&&v[2]?v[1]!==w[v[0]]:!(v[0]in w))return!1}for(;++U<C;){v=g[U];var D=v[0],m=w[D],T=v[1];if(y&&v[2]){if(m===void 0&&!(D in w))return!1}else{var F=new o;if(A)var N=A(m,T,D,w,R,F);if(!(N===void 0?i(T,m,l|d,A,F):N))return!1}}return!0}return Bw=p,Bw}var jw,$L;function cU(){if($L)return jw;$L=1;var o=Tf();function i(l){return l===l&&!o(l)}return jw=i,jw}var Zw,XL;function j7(){if(XL)return Zw;XL=1;var o=cU(),i=hC();function l(d){for(var p=i(d),w=p.length;w--;){var R=p[w],g=d[R];p[w]=[R,g,o(g)]}return p}return Zw=l,Zw}var Gw,QL;function fU(){if(QL)return Gw;QL=1;function o(i,l){return function(d){return d==null?!1:d[i]===l&&(l!==void 0||i in Object(d))}}return Gw=o,Gw}var qw,JL;function Z7(){if(JL)return qw;JL=1;var o=B7(),i=j7(),l=fU();function d(p){var w=i(p);return w.length==1&&w[0][2]?l(w[0][0],w[0][1]):function(R){return R===p||o(R,p,w)}}return qw=d,qw}var Hw,ek;function mC(){if(ek)return Hw;ek=1;var o=Ns(),i=Qg(),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function p(w,R){if(o(w))return!1;var g=typeof w;return g=="number"||g=="symbol"||g=="boolean"||w==null||i(w)?!0:d.test(w)||!l.test(w)||R!=null&&w in Object(R)}return Hw=p,Hw}var Kw,tk;function G7(){if(tk)return Kw;tk=1;var o=sC(),i="Expected a function";function l(d,p){if(typeof d!="function"||p!=null&&typeof p!="function")throw new TypeError(i);var w=function(){var R=arguments,g=p?p.apply(this,R):R[0],A=w.cache;if(A.has(g))return A.get(g);var U=d.apply(this,R);return w.cache=A.set(g,U)||A,U};return w.cache=new(l.Cache||o),w}return l.Cache=o,Kw=l,Kw}var Vw,nk;function q7(){if(nk)return Vw;nk=1;var o=G7(),i=500;function l(d){var p=o(d,function(R){return w.size===i&&w.clear(),R}),w=p.cache;return p}return Vw=l,Vw}var zw,rk;function H7(){if(rk)return zw;rk=1;var o=q7(),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,d=o(function(p){var w=[];return p.charCodeAt(0)===46&&w.push(""),p.replace(i,function(R,g,A,U){w.push(A?U.replace(l,"$1"):g||R)}),w});return zw=d,zw}var Yw,ik;function K7(){if(ik)return Yw;ik=1;var o=$g(),i=uC(),l=Ns(),d=Qg(),p=1/0,w=o?o.prototype:void 0,R=w?w.toString:void 0;function g(A){if(typeof A=="string")return A;if(l(A))return i(A,g)+"";if(d(A))return R?R.call(A):"";var U=A+"";return U=="0"&&1/A==-p?"-0":U}return Yw=g,Yw}var Ww,ok;function dU(){if(ok)return Ww;ok=1;var o=K7();function i(l){return l==null?"":o(l)}return Ww=i,Ww}var $w,ak;function hU(){if(ak)return $w;ak=1;var o=Ns(),i=mC(),l=H7(),d=dU();function p(w,R){return o(w)?w:i(w,R)?[w]:l(d(w))}return $w=p,$w}var Xw,sk;function aE(){if(sk)return Xw;sk=1;var o=Qg(),i=1/0;function l(d){if(typeof d=="string"||o(d))return d;var p=d+"";return p=="0"&&1/d==-i?"-0":p}return Xw=l,Xw}var Qw,uk;function vC(){if(uk)return Qw;uk=1;var o=hU(),i=aE();function l(d,p){p=o(p,d);for(var w=0,R=p.length;d!=null&&w<R;)d=d[i(p[w++])];return w&&w==R?d:void 0}return Qw=l,Qw}var Jw,lk;function V7(){if(lk)return Jw;lk=1;var o=vC();function i(l,d,p){var w=l==null?void 0:o(l,d);return w===void 0?p:w}return Jw=i,Jw}var eA,ck;function z7(){if(ck)return eA;ck=1;function o(i,l){return i!=null&&l in Object(i)}return eA=o,eA}var tA,fk;function Y7(){if(fk)return tA;fk=1;var o=hU(),i=cC(),l=Ns(),d=dC(),p=fC(),w=aE();function R(g,A,U){A=o(A,g);for(var C=-1,y=A.length,v=!1;++C<y;){var D=w(A[C]);if(!(v=g!=null&&U(g,D)))break;g=g[D]}return v||++C!=y?v:(y=g==null?0:g.length,!!y&&p(y)&&d(D,y)&&(l(g)||i(g)))}return tA=R,tA}var nA,dk;function W7(){if(dk)return nA;dk=1;var o=z7(),i=Y7();function l(d,p){return d!=null&&i(d,p,o)}return nA=l,nA}var rA,hk;function $7(){if(hk)return rA;hk=1;var o=lU(),i=V7(),l=W7(),d=mC(),p=cU(),w=fU(),R=aE(),g=1,A=2;function U(C,y){return d(C)&&p(y)?w(R(C),y):function(v){var D=i(v,C);return D===void 0&&D===y?l(v,C):o(y,D,g|A)}}return rA=U,rA}var iA,pk;function X7(){if(pk)return iA;pk=1;function o(i){return function(l){return l==null?void 0:l[i]}}return iA=o,iA}var oA,gk;function Q7(){if(gk)return oA;gk=1;var o=vC();function i(l){return function(d){return o(d,l)}}return oA=i,oA}var aA,mk;function J7(){if(mk)return aA;mk=1;var o=X7(),i=Q7(),l=mC(),d=aE();function p(w){return l(w)?o(d(w)):i(w)}return aA=p,aA}var sA,vk;function yC(){if(vk)return sA;vk=1;var o=Z7(),i=$7(),l=Jg(),d=Ns(),p=J7();function w(R){return typeof R=="function"?R:R==null?l:typeof R=="object"?d(R)?i(R[0],R[1]):o(R):p(R)}return sA=w,sA}var uA,yk;function eK(){if(yk)return uA;yk=1;var o=iU(),i=v7(),l=yC(),d=Ns();function p(w,R){var g=d(w)?o:i;return g(w,l(R,3))}return uA=p,uA}var lA,Ek;function tK(){if(Ek)return lA;Ek=1;function o(i,l,d){var p;return d(i,function(w,R,g){if(l(w,R,g))return p=R,!1}),p}return lA=o,lA}var cA,_k;function nK(){if(_k)return cA;_k=1;var o=tK(),i=pC(),l=yC();function d(p,w){return o(p,l(w,3),i)}return cA=d,cA}var fA,Tk;function rK(){if(Tk)return fA;Tk=1;function o(i){return i&&i.length?i[0]:void 0}return fA=o,fA}var dA,Sk;function iK(){return Sk||(Sk=1,dA=rK()),dA}var hA,wk;function oK(){if(wk)return hA;wk=1;function o(i,l){for(var d=-1,p=i==null?0:i.length;++d<p&&l(i[d],d,i)!==!1;);return i}return hA=o,hA}var pA,Ak;function pU(){if(Ak)return pA;Ak=1;var o=Jg();function i(l){return typeof l=="function"?l:o}return pA=i,pA}var gA,Ik;function aK(){if(Ik)return gA;Ik=1;var o=oK(),i=gC(),l=pU(),d=Ns();function p(w,R){var g=d(w)?o:i;return g(w,l(R))}return gA=p,gA}var mA,bk;function sK(){if(bk)return mA;bk=1;var o=pC(),i=pU();function l(d,p){return d&&o(d,i(p))}return mA=l,mA}var vA,Ck;function uK(){if(Ck)return vA;Ck=1;function o(){}return vA=o,vA}var yA,Rk;function lK(){if(Rk)return yA;Rk=1;var o=gC(),i=em();function l(d,p){var w=-1,R=i(d)?Array(d.length):[];return o(d,function(g,A,U){R[++w]=p(g,A,U)}),R}return yA=l,yA}var EA,xk;function cK(){if(xk)return EA;xk=1;function o(i,l){var d=i.length;for(i.sort(l);d--;)i[d]=i[d].value;return i}return EA=o,EA}var _A,Nk;function fK(){if(Nk)return _A;Nk=1;var o=Qg();function i(l,d){if(l!==d){var p=l!==void 0,w=l===null,R=l===l,g=o(l),A=d!==void 0,U=d===null,C=d===d,y=o(d);if(!U&&!y&&!g&&l>d||g&&A&&C&&!U&&!y||w&&A&&C||!p&&C||!R)return 1;if(!w&&!g&&!y&&l<d||y&&p&&R&&!w&&!g||U&&p&&R||!A&&R||!C)return-1}return 0}return _A=i,_A}var TA,Mk;function dK(){if(Mk)return TA;Mk=1;var o=fK();function i(l,d,p){for(var w=-1,R=l.criteria,g=d.criteria,A=R.length,U=p.length;++w<A;){var C=o(R[w],g[w]);if(C){if(w>=U)return C;var y=p[w];return C*(y=="desc"?-1:1)}}return l.index-d.index}return TA=i,TA}var SA,Dk;function hK(){if(Dk)return SA;Dk=1;var o=uC(),i=vC(),l=yC(),d=lK(),p=cK(),w=lC(),R=dK(),g=Jg(),A=Ns();function U(C,y,v){y.length?y=o(y,function(T){return A(T)?function(F){return i(F,T.length===1?T[0]:T)}:T}):y=[g];var D=-1;y=o(y,w(l));var m=d(C,function(T,F,N){var _=o(y,function(I){return I(T)});return{criteria:_,index:++D,value:T}});return p(m,function(T,F){return R(T,F,v)})}return SA=U,SA}var wA,Pk;function pK(){if(Pk)return wA;Pk=1;var o=oC(),i=em(),l=dC(),d=Tf();function p(w,R,g){if(!d(g))return!1;var A=typeof R;return(A=="number"?i(g)&&l(R,g.length):A=="string"&&R in g)?o(g[R],w):!1}return wA=p,wA}var AA,Ok;function gK(){if(Ok)return AA;Ok=1;var o=nU(),i=hK(),l=rU(),d=pK(),p=l(function(w,R){if(w==null)return[];var g=R.length;return g>1&&d(w,R[0],R[1])?R=[]:g>2&&d(R[0],R[1],R[2])&&(R=[R[0]]),i(w,o(R,1),[])});return AA=p,AA}var IA,Lk;function mK(){if(Lk)return IA;Lk=1;var o=$4(),i=Tf(),l="Expected a function";function d(p,w,R){var g=!0,A=!0;if(typeof p!="function")throw new TypeError(l);return i(R)&&(g="leading"in R?!!R.leading:g,A="trailing"in R?!!R.trailing:A),o(p,w,{leading:g,maxWait:w,trailing:A})}return IA=d,IA}var bA,kk;function vK(){if(kk)return bA;kk=1;var o=dU(),i=0;function l(d){var p=++i;return o(d)+p}return bA=l,bA}(function(o,i){(function(l,d){o.exports=d($4(),i7(),eK(),nK(),iK(),aK(),sK(),uK(),gK(),mK(),vK(),j0())})(tu,function(l,d,p,w,R,g,A,U,C,y,v,D){return function(){var m={654:function(F,N,_){var I,b=this&&this.__assign||function(){return b=Object.assign||function(Ce){for(var re,je=1,O=arguments.length;je<O;je++)for(var M in re=arguments[je])Object.prototype.hasOwnProperty.call(re,M)&&(Ce[M]=re[M]);return Ce},b.apply(this,arguments)},j=this&&this.__createBinding||(Object.create?function(Ce,re,je,O){O===void 0&&(O=je);var M=Object.getOwnPropertyDescriptor(re,je);M&&!("get"in M?!re.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return re[je]}}),Object.defineProperty(Ce,O,M)}:function(Ce,re,je,O){O===void 0&&(O=je),Ce[O]=re[je]}),Y=this&&this.__setModuleDefault||(Object.create?function(Ce,re){Object.defineProperty(Ce,"default",{enumerable:!0,value:re})}:function(Ce,re){Ce.default=re}),$=this&&this.__importStar||function(Ce){if(Ce&&Ce.__esModule)return Ce;var re={};if(Ce!=null)for(var je in Ce)je!=="default"&&Object.prototype.hasOwnProperty.call(Ce,je)&&j(re,Ce,je);return Y(re,Ce),re},W=this&&this.__spreadArray||function(Ce,re,je){if(je||arguments.length===2)for(var O,M=0,q=re.length;M<q;M++)!O&&M in re||(O||(O=Array.prototype.slice.call(re,0,M)),O[M]=re[M]);return Ce.concat(O||Array.prototype.slice.call(re))},ue=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(N,"__esModule",{value:!0}),N.doesFocusableExist=N.getCurrentFocusKey=N.updateAllLayouts=N.resume=N.pause=N.navigateByDirection=N.setFocus=N.setKeyMap=N.destroy=N.setThrottle=N.init=N.SpatialNavigation=N.ROOT_FOCUS_KEY=void 0;var x=ue(_(150)),X=ue(_(117)),fe=ue(_(747)),oe=ue(_(23)),ge=ue(_(842)),Re=ue(_(682)),Je=ue(_(784)),Se=ue(_(432)),Be=ue(_(67)),ot=ue(_(35)),st=ue(_(119)),Ie=$(_(964)),Ye="left",mt="right",Me="up",We="down",rt="enter",qt=((I={}).left=[37,"ArrowLeft"],I.up=[38,"ArrowUp"],I.right=[39,"ArrowRight"],I.down=[40,"ArrowDown"],I.enter=[13,"Enter"],I);N.ROOT_FOCUS_KEY="SN:ROOT";var kt=["#0FF","#FF0","#F0F"],ft={leading:!0,trailing:!1},At=function(){function Ce(){this.focusableComponents={},this.focusKey=null,this.parentsHavingFocusedChild=[],this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.useGetBoundingClientRect=!1,this.shouldFocusDOMNode=!1,this.shouldUseNativeEvents=!1,this.writingDirection=st.default.LTR,this.pressedKeys={},this.paused=!1,this.keyDownEventListener=null,this.keyUpEventListener=null,this.keyMap=qt,this.onKeyEvent=this.onKeyEvent.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.setFocus=this.setFocus.bind(this),this.updateAllLayouts=this.updateAllLayouts.bind(this),this.navigateByDirection=this.navigateByDirection.bind(this),this.init=this.init.bind(this),this.setThrottle=this.setThrottle.bind(this),this.destroy=this.destroy.bind(this),this.setKeyMap=this.setKeyMap.bind(this),this.getCurrentFocusKey=this.getCurrentFocusKey.bind(this),this.doesFocusableExist=this.doesFocusableExist.bind(this),this.setFocusDebounced=(0,x.default)(this.setFocus,300,{leading:!1,trailing:!0}),this.debug=!1,this.visualDebugger=null,this.logIndex=0}return Ce.getCutoffCoordinate=function(re,je,O,M,q){var K=re?M.top:q===st.default.LTR?M.left:M.right,_e=re?M.bottom:q===st.default.LTR?M.right:M.left;return je?O?K:_e:O?_e:K},Ce.getRefCorners=function(re,je,O){var M={a:{x:0,y:0},b:{x:0,y:0}};switch(re){case Me:var q=je?O.bottom:O.top;M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case We:q=je?O.top:O.bottom,M.a={x:O.left,y:q},M.b={x:O.right,y:q};break;case Ye:var K=je?O.right:O.left;M.a={x:K,y:O.top},M.b={x:K,y:O.bottom};break;case mt:K=je?O.left:O.right,M.a={x:K,y:O.top},M.b={x:K,y:O.bottom}}return M},Ce.isAdjacentSlice=function(re,je,O){var M=re.a,q=re.b,K=je.a,_e=je.b,de=O?"x":"y",Ke=M[de],St=q[de],ut=K[de],at=_e[de],tt=.2*(St-Ke);return Math.max(0,Math.min(St,at)-Math.max(Ke,ut))>=tt},Ce.getPrimaryAxisDistance=function(re,je,O){var M=re.a,q=je.a,K=O?"y":"x";return Math.abs(q[K]-M[K])},Ce.getSecondaryAxisDistance=function(re,je,O){var M=re.a,q=re.b,K=je.a,_e=je.b,de=O?"x":"y",Ke=M[de],St=q[de],ut=K[de],at=_e[de],tt=[];return tt.push(Math.abs(ut-Ke)),tt.push(Math.abs(ut-St)),tt.push(Math.abs(at-Ke)),tt.push(Math.abs(at-St)),Math.min.apply(Math,tt)},Ce.prototype.sortSiblingsByPriority=function(re,je,O,M){var q=this,K=O===We||O===Me,_e=Ce.getRefCorners(O,!1,je);return(0,Se.default)(re,function(de){var Ke=Ce.getRefCorners(O,!0,de.layout),St=Ce.isAdjacentSlice(_e,Ke,K),ut=St?Ce.getPrimaryAxisDistance:Ce.getSecondaryAxisDistance,at=St?Ce.getSecondaryAxisDistance:Ce.getPrimaryAxisDistance,tt=ut(_e,Ke,K),dt=at(_e,Ke,K),Et=5*tt+dt,Tt=(Et+1)/(St?5:1);return q.log("smartNavigate","distance (primary, secondary, total weighted) for ".concat(de.focusKey," relative to ").concat(M," is"),tt,dt,Et),q.log("smartNavigate","priority for ".concat(de.focusKey," relative to ").concat(M," is"),Tt),q.visualDebugger&&(q.visualDebugger.drawPoint(Ke.a.x,Ke.a.y,"yellow",6),q.visualDebugger.drawPoint(Ke.b.x,Ke.b.y,"yellow",6)),Tt})},Ce.prototype.init=function(re){var je=re===void 0?{}:re,O=je.debug,M=O!==void 0&&O,q=je.visualDebug,K=q!==void 0&&q,_e=je.nativeMode,de=_e!==void 0&&_e,Ke=je.throttle,St=Ke===void 0?0:Ke,ut=je.throttleKeypresses,at=ut!==void 0&&ut,tt=je.useGetBoundingClientRect,dt=tt!==void 0&&tt,Et=je.shouldFocusDOMNode,Tt=Et!==void 0&&Et,Rt=je.shouldUseNativeEvents,hn=Rt!==void 0&&Rt,Qt=je.rtl,nn=Qt!==void 0&&Qt;this.enabled||(this.enabled=!0,this.nativeMode=de,this.throttleKeypresses=at,this.useGetBoundingClientRect=dt,this.shouldFocusDOMNode=Tt&&!de,this.shouldUseNativeEvents=hn,this.writingDirection=nn?st.default.RTL:st.default.LTR,this.debug=M,this.nativeMode||(Number.isInteger(St)&&St>0&&(this.throttle=St),this.bindEventHandlers(),K&&(this.visualDebugger=new ot.default(this.writingDirection),this.startDrawLayouts())))},Ce.prototype.setThrottle=function(re){var je=re===void 0?{}:re,O=je.throttle,M=O===void 0?0:O,q=je.throttleKeypresses,K=q!==void 0&&q;this.throttleKeypresses=K,this.nativeMode||(this.unbindEventHandlers(),Number.isInteger(M)&&(this.throttle=M),this.bindEventHandlers())},Ce.prototype.startDrawLayouts=function(){var re=this,je=function(){requestAnimationFrame(function(){re.visualDebugger.clearLayouts(),(0,Je.default)(re.focusableComponents,function(O,M){re.visualDebugger.drawLayout(O.layout,M,O.parentFocusKey)}),je()})};je()},Ce.prototype.destroy=function(){this.enabled&&(this.enabled=!1,this.nativeMode=!1,this.throttle=0,this.throttleKeypresses=!1,this.focusKey=null,this.parentsHavingFocusedChild=[],this.focusableComponents={},this.paused=!1,this.keyMap=qt,this.unbindEventHandlers())},Ce.prototype.getEventType=function(re){return(0,oe.default)(this.getKeyMap(),function(je){return je.includes(re)})},Ce.getKeyCode=function(re){return re.keyCode||re.code},Ce.prototype.bindEventHandlers=function(){var re=this;typeof window<"u"&&window.addEventListener&&(this.keyDownEventListener=function(je){if(re.paused!==!0){re.debug&&(re.logIndex+=1);var O=Ce.getKeyCode(je),M=re.getEventType(O);if(M){re.pressedKeys[M]=re.pressedKeys[M]?re.pressedKeys[M]+1:1,re.shouldUseNativeEvents||(je.preventDefault(),je.stopPropagation());var q={pressedKeys:re.pressedKeys};M===rt&&re.focusKey?re.onEnterPress(q):re.onArrowPress(M,q)===!1?(re.log("keyDownEventListener","default navigation prevented"),re.visualDebugger&&re.visualDebugger.clear()):re.onKeyEvent(je)}}},this.throttle&&(this.keyDownEventListenerThrottled=(0,Be.default)(this.keyDownEventListener.bind(this),this.throttle,ft)),this.keyUpEventListener=function(je){var O=Ce.getKeyCode(je),M=re.getEventType(O);delete re.pressedKeys[M],re.throttle&&!re.throttleKeypresses&&re.keyDownEventListenerThrottled.cancel(),M===rt&&re.focusKey&&re.onEnterRelease()},window.addEventListener("keyup",this.keyUpEventListener),window.addEventListener("keydown",this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener))},Ce.prototype.unbindEventHandlers=function(){if(typeof window<"u"&&window.removeEventListener){window.removeEventListener("keyup",this.keyUpEventListener),this.keyUpEventListener=null;var re=this.throttle?this.keyDownEventListenerThrottled:this.keyDownEventListener;window.removeEventListener("keydown",re),this.keyDownEventListener=null}},Ce.prototype.onEnterPress=function(re){var je=this.focusableComponents[this.focusKey];je?je.focusable?je.onEnterPress&&je.onEnterPress(re):this.log("onEnterPress","componentNotFocusable"):this.log("onEnterPress","noComponent")},Ce.prototype.onEnterRelease=function(){var re=this.focusableComponents[this.focusKey];re?re.focusable?re.onEnterRelease&&re.onEnterRelease():this.log("onEnterRelease","componentNotFocusable"):this.log("onEnterRelease","noComponent")},Ce.prototype.onArrowPress=function(re,je){var O=this.focusableComponents[this.focusKey];if(O)return O&&O.onArrowPress&&O.onArrowPress(re,je);this.log("onArrowPress","noComponent")},Ce.prototype.navigateByDirection=function(re,je){if(this.paused!==!0&&this.enabled&&!this.nativeMode){var O=[We,Me,Ye,mt];O.includes(re)?(this.log("navigateByDirection","direction",re),this.smartNavigate(re,null,je)):this.log("navigateByDirection","Invalid direction. You passed: `".concat(re,"`, but you can use only these: "),O)}},Ce.prototype.onKeyEvent=function(re){this.visualDebugger&&this.visualDebugger.clear();var je=Ce.getKeyCode(re),O=(0,oe.default)(this.getKeyMap(),function(M){return M.includes(je)});this.smartNavigate(O,null,{event:re})},Ce.prototype.smartNavigate=function(re,je,O){var M=this;if(!this.nativeMode){var q=re===We||re===Me,K=re===We||(this.writingDirection===st.default.LTR?re===mt:re===Ye);this.log("smartNavigate","direction",re),this.log("smartNavigate","fromParentFocusKey",je),this.log("smartNavigate","this.focusKey",this.focusKey),je||(0,Je.default)(this.focusableComponents,function(hn){hn.layoutUpdated=!1});var _e=this.focusableComponents[je||this.focusKey];if(je||_e){if(this.log("smartNavigate","currentComponent",_e?_e.focusKey:void 0,_e?_e.node:void 0,_e),_e){this.updateLayout(_e.focusKey);var de=_e.parentFocusKey,Ke=_e.focusKey,St=_e.layout,ut=Ce.getCutoffCoordinate(q,K,!1,St,this.writingDirection),at=(0,fe.default)(this.focusableComponents,function(hn){if(hn.parentFocusKey===de&&hn.focusable){M.updateLayout(hn.focusKey);var Qt=Ce.getCutoffCoordinate(q,K,!0,hn.layout,M.writingDirection);return q||M.writingDirection===st.default.LTR?K?Qt>=ut:Qt<=ut:K?Qt<=ut:Qt>=ut}return!1});if(this.debug&&(this.log("smartNavigate","currentCutoffCoordinate",ut),this.log("smartNavigate","siblings","".concat(at.length," elements:"),at.map(function(hn){return hn.focusKey}).join(", "),at.map(function(hn){return hn.node}),at.map(function(hn){return hn}))),this.visualDebugger){var tt=Ce.getRefCorners(re,!1,St);this.visualDebugger.drawPoint(tt.a.x,tt.a.y),this.visualDebugger.drawPoint(tt.b.x,tt.b.y)}var dt=this.sortSiblingsByPriority(at,St,re,Ke),Et=(0,ge.default)(dt);if(this.log("smartNavigate","nextComponent",Et?Et.focusKey:void 0,Et?Et.node:void 0,Et),Et)this.setFocus(Et.focusKey,O);else{var Tt=this.focusableComponents[de],Rt=Tt!=null&&Tt.isFocusBoundary?Tt.focusBoundaryDirections||[re]:[];Tt&&Rt.includes(re)||this.smartNavigate(re,de,O)}}}else this.setFocus(this.getForcedFocusKey())}},Ce.prototype.saveLastFocusedChildKey=function(re,je){re&&(this.log("saveLastFocusedChildKey","".concat(re.focusKey," lastFocusedChildKey set"),je),re.lastFocusedChildKey=je)},Ce.prototype.log=function(re,je){for(var O=[],M=2;M<arguments.length;M++)O[M-2]=arguments[M];this.debug&&console.log.apply(console,W(["%c".concat(re,"%c").concat(je),"background: ".concat(kt[this.logIndex%kt.length],"; color: black; padding: 1px 5px;"),"background: #333; color: #BADA55; padding: 1px 5px;"],O,!1))},Ce.prototype.getCurrentFocusKey=function(){return this.focusKey},Ce.prototype.getForcedFocusKey=function(){var re,je=(0,fe.default)(this.focusableComponents,function(M){return M.focusable&&M.forceFocus}),O=this.sortSiblingsByPriority(je,{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:null},"down",N.ROOT_FOCUS_KEY);return(re=(0,ge.default)(O))===null||re===void 0?void 0:re.focusKey},Ce.prototype.getNextFocusKey=function(re){var je=this,O=this.focusableComponents[re];if(!O||this.nativeMode)return re;var M=(0,fe.default)(this.focusableComponents,function(de){return de.parentFocusKey===re&&de.focusable});if(M.length>0){var q=O.lastFocusedChildKey,K=O.preferredChildFocusKey;if(this.log("getNextFocusKey","lastFocusedChildKey is",q),this.log("getNextFocusKey","preferredChildFocusKey is",K),q&&O.saveLastFocusedChild&&this.isParticipatingFocusableComponent(q))return this.log("getNextFocusKey","lastFocusedChildKey will be focused",q),this.getNextFocusKey(q);if(K&&this.isParticipatingFocusableComponent(K))return this.log("getNextFocusKey","preferredChildFocusKey will be focused",K),this.getNextFocusKey(K);M.forEach(function(de){return je.updateLayout(de.focusKey)});var _e=function(de,Ke){var St=Ke===st.default.LTR?function(at){var tt=at.layout;return Math.abs(tt.left)+Math.abs(tt.top)}:function(at){var tt=at.layout;return Math.abs(window.innerWidth-tt.right)+Math.abs(tt.top)},ut=(0,Se.default)(de,St);return(0,ge.default)(ut)}(M,this.writingDirection).focusKey;return this.log("getNextFocusKey","childKey will be focused",_e),this.getNextFocusKey(_e)}return this.log("getNextFocusKey","targetFocusKey",re),re},Ce.prototype.addFocusable=function(re){var je=re.focusKey,O=re.node,M=re.parentFocusKey,q=re.onEnterPress,K=re.onEnterRelease,_e=re.onArrowPress,de=re.onFocus,Ke=re.onBlur,St=re.saveLastFocusedChild,ut=re.trackChildren,at=re.onUpdateFocus,tt=re.onUpdateHasFocusedChild,dt=re.preferredChildFocusKey,Et=re.autoRestoreFocus,Tt=re.forceFocus,Rt=re.focusable,hn=re.isFocusBoundary,Qt=re.focusBoundaryDirections;if(this.focusableComponents[je]={focusKey:je,node:O,parentFocusKey:M,onEnterPress:q,onEnterRelease:K,onArrowPress:_e,onFocus:de,onBlur:Ke,onUpdateFocus:at,onUpdateHasFocusedChild:tt,saveLastFocusedChild:St,trackChildren:ut,preferredChildFocusKey:dt,focusable:Rt,isFocusBoundary:hn,focusBoundaryDirections:Qt,autoRestoreFocus:Et,forceFocus:Tt,lastFocusedChildKey:null,layout:{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,node:O},layoutUpdated:!1},O||console.warn('Component added without a node reference. This will result in its coordinates being empty and may cause lost focus. Check the "ref" passed to "useFocusable": ',this.focusableComponents[je]),!this.nativeMode){this.updateLayout(je),this.log("addFocusable","Component added: ",this.focusableComponents[je]),je===this.focusKey&&this.setFocus(dt||je);for(var nn=this.focusableComponents[this.focusKey];nn;){if(nn.parentFocusKey===je){this.updateParentsHasFocusedChild(this.focusKey,{}),this.updateParentsLastFocusedChild(this.focusKey);break}nn=this.focusableComponents[nn.parentFocusKey]}}},Ce.prototype.removeFocusable=function(re){var je=re.focusKey,O=this.focusableComponents[je];if(O){var M=O.parentFocusKey;(0,O.onUpdateFocus)(!1),this.log("removeFocusable","Component removed: ",O),delete this.focusableComponents[je];var q=this.parentsHavingFocusedChild.includes(je);this.parentsHavingFocusedChild=this.parentsHavingFocusedChild.filter(function(de){return de!==je});var K=this.focusableComponents[M],_e=je===this.focusKey;if(K&&K.lastFocusedChildKey===je&&(K.lastFocusedChildKey=null),this.nativeMode)return;(_e||q)&&K&&K.autoRestoreFocus&&(this.log("removeFocusable","Component removed: ",_e?"Leaf component":"Container component","Auto restoring focus to: ",M),this.setFocusDebounced(M))}},Ce.prototype.getNodeLayoutByFocusKey=function(re){var je=this.focusableComponents[re];return je?(this.updateLayout(je.focusKey),je.layout):null},Ce.prototype.setCurrentFocusedKey=function(re,je){if(this.isFocusableComponent(this.focusKey)&&re!==this.focusKey){var O=this.focusableComponents[this.focusKey];O.onUpdateFocus(!1),O.onBlur(this.getNodeLayoutByFocusKey(this.focusKey),je),this.log("setCurrentFocusedKey","onBlur",O)}if(this.focusKey=re,this.isFocusableComponent(this.focusKey)){var M=this.focusableComponents[this.focusKey];this.shouldFocusDOMNode&&M.node&&M.node.focus(),M.onUpdateFocus(!0),M.onFocus(this.getNodeLayoutByFocusKey(this.focusKey),je),this.log("setCurrentFocusedKey","onFocus",M)}},Ce.prototype.updateParentsHasFocusedChild=function(re,je){for(var O=this,M=[],q=this.focusableComponents[re];q;){var K=q.parentFocusKey,_e=this.focusableComponents[K];if(_e){var de=_e.focusKey;M.push(de)}q=_e}var Ke=(0,X.default)(this.parentsHavingFocusedChild,M),St=(0,X.default)(M,this.parentsHavingFocusedChild);(0,Re.default)(Ke,function(ut){var at=O.focusableComponents[ut];at&&at.trackChildren&&at.onUpdateHasFocusedChild(!1),O.onIntermediateNodeBecameBlurred(ut,je)}),(0,Re.default)(St,function(ut){var at=O.focusableComponents[ut];at&&at.trackChildren&&at.onUpdateHasFocusedChild(!0),O.onIntermediateNodeBecameFocused(ut,je)}),this.parentsHavingFocusedChild=M},Ce.prototype.updateParentsLastFocusedChild=function(re){for(var je=this.focusableComponents[re];je;){var O=je.parentFocusKey,M=this.focusableComponents[O];M&&this.saveLastFocusedChildKey(M,je.focusKey),je=M}},Ce.prototype.getKeyMap=function(){return this.keyMap},Ce.prototype.setKeyMap=function(re){this.keyMap=b(b({},this.getKeyMap()),function(je){var O={};return Object.entries(je).forEach(function(M){var q=M[0],K=M[1];O[q]=Array.isArray(K)?K:[K]}),O}(re))},Ce.prototype.isFocusableComponent=function(re){return!!this.focusableComponents[re]},Ce.prototype.isParticipatingFocusableComponent=function(re){return this.isFocusableComponent(re)&&this.focusableComponents[re].focusable},Ce.prototype.onIntermediateNodeBecameFocused=function(re,je){this.isParticipatingFocusableComponent(re)&&this.focusableComponents[re].onFocus(this.getNodeLayoutByFocusKey(re),je)},Ce.prototype.onIntermediateNodeBecameBlurred=function(re,je){this.isParticipatingFocusableComponent(re)&&this.focusableComponents[re].onBlur(this.getNodeLayoutByFocusKey(re),je)},Ce.prototype.pause=function(){this.paused=!0},Ce.prototype.resume=function(){this.paused=!1},Ce.prototype.setFocus=function(re,je){if(je===void 0&&(je={}),this.setFocusDebounced.cancel(),this.enabled&&!this.nativeMode){this.log("setFocus","focusKey",re),re&&re!==N.ROOT_FOCUS_KEY||(re=this.getForcedFocusKey());var O=this.getNextFocusKey(re);this.log("setFocus","newFocusKey",O),this.setCurrentFocusedKey(O,je),this.updateParentsHasFocusedChild(O,je),this.updateParentsLastFocusedChild(O)}},Ce.prototype.updateAllLayouts=function(){var re=this;this.enabled&&!this.nativeMode&&(0,Je.default)(this.focusableComponents,function(je,O){re.updateLayout(O)})},Ce.prototype.updateLayout=function(re){var je=this.focusableComponents[re];if(je&&!this.nativeMode&&!je.layoutUpdated){var O=je.node,M=this.useGetBoundingClientRect?(0,Ie.getBoundingClientRect)(O):(0,Ie.default)(O);je.layout=b(b({},M),{node:O})}},Ce.prototype.updateFocusable=function(re,je){var O=je.node,M=je.preferredChildFocusKey,q=je.focusable,K=je.isFocusBoundary,_e=je.focusBoundaryDirections,de=je.onEnterPress,Ke=je.onEnterRelease,St=je.onArrowPress,ut=je.onFocus,at=je.onBlur;if(!this.nativeMode){var tt=this.focusableComponents[re];tt&&(tt.preferredChildFocusKey=M,tt.focusable=q,tt.isFocusBoundary=K,tt.focusBoundaryDirections=_e,tt.onEnterPress=de,tt.onEnterRelease=Ke,tt.onArrowPress=St,tt.onFocus=ut,tt.onBlur=at,O&&(tt.node=O))}},Ce.prototype.isNativeMode=function(){return this.nativeMode},Ce.prototype.doesFocusableExist=function(re){return!!this.focusableComponents[re]},Ce}();N.SpatialNavigation=new At,N.init=N.SpatialNavigation.init,N.setThrottle=N.SpatialNavigation.setThrottle,N.destroy=N.SpatialNavigation.destroy,N.setKeyMap=N.SpatialNavigation.setKeyMap,N.setFocus=N.SpatialNavigation.setFocus,N.navigateByDirection=N.SpatialNavigation.navigateByDirection,N.pause=N.SpatialNavigation.pause,N.resume=N.SpatialNavigation.resume,N.updateAllLayouts=N.SpatialNavigation.updateAllLayouts,N.getCurrentFocusKey=N.SpatialNavigation.getCurrentFocusKey,N.doesFocusableExist=N.SpatialNavigation.doesFocusableExist},35:function(F,N,_){var I=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(N,"__esModule",{value:!0});var b=I(_(119)),j=typeof window<"u"&&window.document,Y=j?window.innerWidth:0,$=j?window.innerHeight:0,W=function(){function ue(x){j&&(this.debugCtx=ue.createCanvas("sn-debug","1010",x),this.layoutsCtx=ue.createCanvas("sn-layouts","1000",x),this.writingDirection=x)}return ue.createCanvas=function(x,X,fe){var oe=document.querySelector("#".concat(x))||document.createElement("canvas");oe.setAttribute("id",x),oe.setAttribute("dir",fe===b.default.LTR?"ltr":"rtl");var ge=oe.getContext("2d");return oe.style.zIndex=X,oe.style.position="fixed",oe.style.top="0",oe.style.left="0",document.body.appendChild(oe),oe.width=Y,oe.height=$,ge},ue.prototype.clear=function(){j&&this.debugCtx.clearRect(0,0,Y,$)},ue.prototype.clearLayouts=function(){j&&this.layoutsCtx.clearRect(0,0,Y,$)},ue.prototype.drawLayout=function(x,X,fe){if(j){this.layoutsCtx.strokeStyle="green",this.layoutsCtx.strokeRect(x.left,x.top,x.width,x.height),this.layoutsCtx.font="8px monospace",this.layoutsCtx.fillStyle="red";var oe=this.writingDirection===b.default.LTR?"left":"right",ge=x[oe];this.layoutsCtx.fillText(X,ge,x.top+10),this.layoutsCtx.fillText(fe,ge,x.top+25),this.layoutsCtx.fillText("".concat(oe,": ").concat(ge),ge,x.top+40),this.layoutsCtx.fillText("top: ".concat(x.top),ge,x.top+55)}},ue.prototype.drawPoint=function(x,X,fe,oe){fe===void 0&&(fe="blue"),oe===void 0&&(oe=10),j&&(this.debugCtx.strokeStyle=fe,this.debugCtx.lineWidth=3,this.debugCtx.strokeRect(x-oe/2,X-oe/2,oe,oe))},ue}();N.default=W},119:function(F,N){var _;Object.defineProperty(N,"__esModule",{value:!0}),function(I){I[I.LTR=0]="LTR",I[I.RTL=1]="RTL"}(_||(_={})),N.default=_},607:function(F,N,_){var I=this&&this.__createBinding||(Object.create?function(j,Y,$,W){W===void 0&&(W=$);var ue=Object.getOwnPropertyDescriptor(Y,$);ue&&!("get"in ue?!Y.__esModule:ue.writable||ue.configurable)||(ue={enumerable:!0,get:function(){return Y[$]}}),Object.defineProperty(j,W,ue)}:function(j,Y,$,W){W===void 0&&(W=$),j[W]=Y[$]}),b=this&&this.__exportStar||function(j,Y){for(var $ in j)$==="default"||Object.prototype.hasOwnProperty.call(Y,$)||I(Y,j,$)};Object.defineProperty(N,"__esModule",{value:!0}),b(_(79),N),b(_(445),N),b(_(654),N)},964:function(F,N){Object.defineProperty(N,"__esModule",{value:!0}),N.getBoundingClientRect=void 0;var _=function(I){for(var b=I.offsetParent,j=I.offsetHeight,Y=I.offsetWidth,$=I.offsetLeft,W=I.offsetTop;b&&b.nodeType===1;)$+=b.offsetLeft-b.scrollLeft,W+=b.offsetTop-b.scrollTop,b=b.offsetParent;return{height:j,left:$,top:W,width:Y}};N.default=function(I){var b=I&&I.parentElement;if(I&&b){var j=_(b),Y=_(I),$=Y.height,W=Y.left,ue=Y.top,x=Y.width;return{x:W-j.left,y:ue-j.top,width:x,height:$,left:W,top:ue,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}},N.getBoundingClientRect=function(I){if(I&&I.getBoundingClientRect){var b=I.getBoundingClientRect();return{x:b.x,y:b.y,width:b.width,height:b.height,left:b.left,top:b.top,get right(){return this.left+this.width},get bottom(){return this.top+this.height}}}return{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0}}},445:function(F,N,_){Object.defineProperty(N,"__esModule",{value:!0}),N.useFocusContext=N.FocusContext=void 0;var I=_(156),b=_(654);N.FocusContext=(0,I.createContext)(b.ROOT_FOCUS_KEY),N.FocusContext.displayName="FocusContext",N.useFocusContext=function(){return(0,I.useContext)(N.FocusContext)}},79:function(F,N,_){var I=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(N,"__esModule",{value:!0}),N.useFocusable=void 0;var b=_(156),j=I(_(604)),Y=I(_(461)),$=_(654),W=_(445);N.useFocusable=function(ue){var x=ue===void 0?{}:ue,X=x.focusable,fe=X===void 0||X,oe=x.saveLastFocusedChild,ge=oe===void 0||oe,Re=x.trackChildren,Je=Re!==void 0&&Re,Se=x.autoRestoreFocus,Be=Se===void 0||Se,ot=x.forceFocus,st=ot!==void 0&&ot,Ie=x.isFocusBoundary,Ye=Ie!==void 0&&Ie,mt=x.focusBoundaryDirections,Me=x.focusKey,We=x.preferredChildFocusKey,rt=x.onEnterPress,qt=rt===void 0?j.default:rt,kt=x.onEnterRelease,ft=kt===void 0?j.default:kt,At=x.onArrowPress,Ce=At===void 0?function(){return!0}:At,re=x.onFocus,je=re===void 0?j.default:re,O=x.onBlur,M=O===void 0?j.default:O,q=x.extraProps,K=(0,b.useCallback)(function(Ot){qt(q,Ot)},[qt,q]),_e=(0,b.useCallback)(function(){ft(q)},[ft,q]),de=(0,b.useCallback)(function(Ot,Un){return Ce(Ot,q,Un)},[q,Ce]),Ke=(0,b.useCallback)(function(Ot,Un){je(Ot,q,Un)},[q,je]),St=(0,b.useCallback)(function(Ot,Un){M(Ot,q,Un)},[q,M]),ut=(0,b.useRef)(null),at=(0,b.useState)(!1),tt=at[0],dt=at[1],Et=(0,b.useState)(!1),Tt=Et[0],Rt=Et[1],hn=(0,W.useFocusContext)(),Qt=(0,b.useMemo)(function(){return Me||(0,Y.default)("sn:focusable-item-")},[Me]),nn=(0,b.useCallback)(function(Ot){Ot===void 0&&(Ot={}),$.SpatialNavigation.setFocus(Qt,Ot)},[Qt]);return(0,b.useEffect)(function(){var Ot=ut.current;return $.SpatialNavigation.addFocusable({focusKey:Qt,node:Ot,parentFocusKey:hn,preferredChildFocusKey:We,onEnterPress:K,onEnterRelease:_e,onArrowPress:de,onFocus:Ke,onBlur:St,onUpdateFocus:function(Un){return Un===void 0&&(Un=!1),dt(Un)},onUpdateHasFocusedChild:function(Un){return Un===void 0&&(Un=!1),Rt(Un)},saveLastFocusedChild:ge,trackChildren:Je,isFocusBoundary:Ye,focusBoundaryDirections:mt,autoRestoreFocus:Be,forceFocus:st,focusable:fe}),function(){$.SpatialNavigation.removeFocusable({focusKey:Qt})}},[]),(0,b.useEffect)(function(){var Ot=ut.current;$.SpatialNavigation.updateFocusable(Qt,{node:Ot,preferredChildFocusKey:We,focusable:fe,isFocusBoundary:Ye,focusBoundaryDirections:mt,onEnterPress:K,onEnterRelease:_e,onArrowPress:de,onFocus:Ke,onBlur:St})},[Qt,We,fe,Ye,mt,K,_e,de,Ke,St]),{ref:ut,focusSelf:nn,focused:tt,hasFocusedChild:Tt,focusKey:Qt}}},150:function(F){F.exports=l},117:function(F){F.exports=d},747:function(F){F.exports=p},23:function(F){F.exports=w},842:function(F){F.exports=R},682:function(F){F.exports=g},784:function(F){F.exports=A},604:function(F){F.exports=U},432:function(F){F.exports=C},67:function(F){F.exports=y},461:function(F){F.exports=v},156:function(F){F.exports=D}},T={};return function F(N){var _=T[N];if(_!==void 0)return _.exports;var I=T[N]={exports:{}};return m[N].call(I.exports,I,I.exports,F),I.exports}(607)}()})})(Y4);var gU=Y4.exports;function yK(o){return{all:o=o||new Map,on:function(i,l){var d=o.get(i);d?d.push(l):o.set(i,[l])},off:function(i,l){var d=o.get(i);d&&(l?d.splice(d.indexOf(l)>>>0,1):o.set(i,[]))},emit:function(i,l){var d=o.get(i);d&&d.slice().map(function(p){p(l)}),(d=o.get("*"))&&d.slice().map(function(p){p(i,l)})}}}class wf{constructor(){this.emitter=yK()}emit(i,l){this.emitter.emit(i,l)}on(i,l){var d;(d=this.emitter)==null||d.on(i,l)}once(i,l){var p;const d=w=>{var R;(R=this.emitter)==null||R.off(i,d),l(w)};(p=this.emitter)==null||p.on(i,d)}off(i,l){var d;(d=this.emitter)==null||d.off(i,l)}onAny(i){this.emitter.on("*",i)}offAny(i){this.emitter.off("*",i)}clearAllListeners(){this.emitter.all.clear()}destroy(){this.clearAllListeners()}}var sf=256,mU=[],Fk=256,Zy;for(;sf--;)mU[sf]=(sf+256).toString(16).substring(1);function EK(o){var i=0,l=11;if(!Zy||sf+l>Fk*2)for(Zy="",sf=0;i<Fk;i++)Zy+=mU[Math.random()*256|0];return Zy.substring(sf,sf+++l)}const Uk={DEVICE_ID:"deviceId"};function wg(){const o=localStorage.getItem(Uk.DEVICE_ID);if(o)return o;const i=EK();return localStorage.setItem(Uk.DEVICE_ID,i),i}function _K(o){o=[...o].sort((l,d)=>l-d);const i=Math.floor(o.length/2);return o.length%2?o[i]:(o[i-1]+o[i])/2}var _a=(o=>(o.NEGOTIATE="negotiate",o.NEGOTIATE_TV="negotiate-tv",o.EVENT_STATUS="eventStatus",o.EVENT_META="eventMeta",o.GENERATE="generate",o.CONTENTFUL="contentful",o))(_a||{});class ng extends Error{constructor(i,l,d,p){super(),this._name=i,this._title=l,this._code=p,this._message=d}get toString(){var i,l;return"".concat(this._name.toUpperCase()," ERROR - ").concat((i=this._title.toUpperCase())!=null?i:""," ").concat((l=this._code)!=null?l:"",": ").concat(this.message)}get name(){return this._name}set name(i){this._name=i}get message(){return this._message}set message(i){this._message=i}get title(){return this._title}set title(i){this._title=i}get code(){return this._code}set code(i){this._code=i}}var lc=(o=>(o.TIZEN="tizen",o.WEBOS="webos",o.WEBZEROS="web0s",o.WEB="web",o))(lc||{});function EC(){const o=navigator.userAgent.toLowerCase();return o.includes("tizen")?"tizen":o.includes("webos")||o.includes("web0s")?"webos":"web"}const vh=wg(),TK="https://staging-api.gigset.io",D0="new",SK="68HZuoF2PhOm4zHAJzDcwGnqUeph2JA_G9M7vW8-mbw",wK="v203lmr0b15v",_C="setup-device-id",AK="_appContainer_1isul_1",IK="_pageContainer_1isul_53",bK="_input_1isul_67",CK="_ellipsis_1isul_1",RK={appContainer:AK,pageContainer:IK,input:bK,ellipsis:CK};class cf extends Error{constructor(i,l){const d=new.target.prototype;super("".concat(i,": Status code '").concat(l,"'")),this.statusCode=l,this.__proto__=d}}class TC extends Error{constructor(i="A timeout occurred."){const l=new.target.prototype;super(i),this.__proto__=l}}class nu extends Error{constructor(i="An abort occurred."){const l=new.target.prototype;super(i),this.__proto__=l}}class xK extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="UnsupportedTransportError",this.__proto__=d}}class NK extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="DisabledTransportError",this.__proto__=d}}class MK extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.transport=l,this.errorType="FailedToStartTransportError",this.__proto__=d}}class Bk extends Error{constructor(i){const l=new.target.prototype;super(i),this.errorType="FailedToNegotiateWithServerError",this.__proto__=l}}class DK extends Error{constructor(i,l){const d=new.target.prototype;super(i),this.innerErrors=l,this.__proto__=d}}class vU{constructor(i,l,d){this.statusCode=i,this.statusText=l,this.content=d}}class sE{get(i,l){return this.send({...l,method:"GET",url:i})}post(i,l){return this.send({...l,method:"POST",url:i})}delete(i,l){return this.send({...l,method:"DELETE",url:i})}getCookieString(i){return""}}var wn;(function(o){o[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None"})(wn||(wn={}));class Zg{constructor(){}log(i,l){}}Zg.instance=new Zg;const PK="8.0.0";class po{static isRequired(i,l){if(i==null)throw new Error("The '".concat(l,"' argument is required."))}static isNotEmpty(i,l){if(!i||i.match(/^\s*$/))throw new Error("The '".concat(l,"' argument should not be empty."))}static isIn(i,l,d){if(!(i in l))throw new Error("Unknown ".concat(d," value: ").concat(i,"."))}}class Hi{static get isBrowser(){return!Hi.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Hi.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Hi.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Gg(o,i){let l="";return vf(o)?(l="Binary data of length ".concat(o.byteLength),i&&(l+=". Content: '".concat(OK(o),"'"))):typeof o=="string"&&(l="String data of length ".concat(o.length),i&&(l+=". Content: '".concat(o,"'"))),l}function OK(o){const i=new Uint8Array(o);let l="";return i.forEach(d=>{const p=d<16?"0":"";l+="0x".concat(p).concat(d.toString(16)," ")}),l.substr(0,l.length-1)}function vf(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}async function yU(o,i,l,d,p,w){const R={},[g,A]=yh();R[g]=A,o.log(wn.Trace,"(".concat(i," transport) sending data. ").concat(Gg(p,w.logMessageContent),"."));const U=vf(p)?"arraybuffer":"text",C=await l.post(d,{content:p,headers:{...R,...w.headers},responseType:U,timeout:w.timeout,withCredentials:w.withCredentials});o.log(wn.Trace,"(".concat(i," transport) request complete. Response status: ").concat(C.statusCode,"."))}function LK(o){return o===void 0?new P0(wn.Information):o===null?Zg.instance:o.log!==void 0?o:new P0(o)}class kK{constructor(i,l){this._subject=i,this._observer=l}dispose(){const i=this._subject.observers.indexOf(this._observer);i>-1&&this._subject.observers.splice(i,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(l=>{})}}class P0{constructor(i){this._minLevel=i,this.out=console}log(i,l){if(i>=this._minLevel){const d="[".concat(new Date().toISOString(),"] ").concat(wn[i],": ").concat(l);switch(i){case wn.Critical:case wn.Error:this.out.error(d);break;case wn.Warning:this.out.warn(d);break;case wn.Information:this.out.info(d);break;default:this.out.log(d);break}}}}function yh(){let o="X-SignalR-User-Agent";return Hi.isNode&&(o="User-Agent"),[o,FK(PK,UK(),jK(),BK())]}function FK(o,i,l,d){let p="Microsoft SignalR/";const w=o.split(".");return p+="".concat(w[0],".").concat(w[1]),p+=" (".concat(o,"; "),i&&i!==""?p+="".concat(i,"; "):p+="Unknown OS; ",p+="".concat(l),d?p+="; ".concat(d):p+="; Unknown Runtime Version",p+=")",p}function UK(){if(Hi.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function BK(){if(Hi.isNode)return process.versions.node}function jK(){return Hi.isNode?"NodeJS":"Browser"}function jk(o){return o.stack?o.stack:o.message?o.message:"".concat(o)}function ZK(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}function GK(o){return typeof fetch>"u"||Hi.isNode?(o._jar=new(require("tough-cookie")).CookieJar,typeof fetch>"u"?o._fetchType=require("node-fetch"):o._fetchType=fetch,o._fetchType=require("fetch-cookie")(o._fetchType,o._jar),!0):!1}function qK(o){return typeof AbortController>"u"?(o._abortControllerType=require("abort-controller"),!0):!1}function HK(){return require("ws")}function KK(){return require("eventsource")}class VK extends sE{constructor(i){super(),this._logger=i;const l={_fetchType:void 0,_jar:void 0};GK(l)?(this._fetchType=l._fetchType,this._jar=l._jar):this._fetchType=fetch.bind(ZK()),this._abortControllerType=AbortController;const d={_abortControllerType:this._abortControllerType};qK(d)&&(this._abortControllerType=d._abortControllerType)}async send(i){if(i.abortSignal&&i.abortSignal.aborted)throw new nu;if(!i.method)throw new Error("No method defined.");if(!i.url)throw new Error("No url defined.");const l=new this._abortControllerType;let d;i.abortSignal&&(i.abortSignal.onabort=()=>{l.abort(),d=new nu});let p=null;if(i.timeout){const A=i.timeout;p=setTimeout(()=>{l.abort(),this._logger.log(wn.Warning,"Timeout from HTTP request."),d=new TC},A)}i.content===""&&(i.content=void 0),i.content&&(i.headers=i.headers||{},vf(i.content)?i.headers["Content-Type"]="application/octet-stream":i.headers["Content-Type"]="text/plain;charset=UTF-8");let w;try{w=await this._fetchType(i.url,{body:i.content,cache:"no-cache",credentials:i.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...i.headers},method:i.method,mode:"cors",redirect:"follow",signal:l.signal})}catch(A){throw d||(this._logger.log(wn.Warning,"Error from HTTP request. ".concat(A,".")),A)}finally{p&&clearTimeout(p),i.abortSignal&&(i.abortSignal.onabort=null)}if(!w.ok){const A=await Zk(w,"text");throw new cf(A||w.statusText,w.status)}const g=await Zk(w,i.responseType);return new vU(w.status,w.statusText,g)}getCookieString(i){let l="";return Hi.isNode&&this._jar&&this._jar.getCookies(i,(d,p)=>l=p.join("; ")),l}}function Zk(o,i){let l;switch(i){case"arraybuffer":l=o.arrayBuffer();break;case"text":l=o.text();break;case"blob":case"document":case"json":throw new Error("".concat(i," is not supported."));default:l=o.text();break}return l}class zK extends sE{constructor(i){super(),this._logger=i}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new nu):i.method?i.url?new Promise((l,d)=>{const p=new XMLHttpRequest;p.open(i.method,i.url,!0),p.withCredentials=i.withCredentials===void 0?!0:i.withCredentials,p.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.content===""&&(i.content=void 0),i.content&&(vf(i.content)?p.setRequestHeader("Content-Type","application/octet-stream"):p.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const w=i.headers;w&&Object.keys(w).forEach(R=>{p.setRequestHeader(R,w[R])}),i.responseType&&(p.responseType=i.responseType),i.abortSignal&&(i.abortSignal.onabort=()=>{p.abort(),d(new nu)}),i.timeout&&(p.timeout=i.timeout),p.onload=()=>{i.abortSignal&&(i.abortSignal.onabort=null),p.status>=200&&p.status<300?l(new vU(p.status,p.statusText,p.response||p.responseText)):d(new cf(p.response||p.responseText||p.statusText,p.status))},p.onerror=()=>{this._logger.log(wn.Warning,"Error from HTTP request. ".concat(p.status,": ").concat(p.statusText,".")),d(new cf(p.statusText,p.status))},p.ontimeout=()=>{this._logger.log(wn.Warning,"Timeout from HTTP request."),d(new TC)},p.send(i.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class YK extends sE{constructor(i){if(super(),typeof fetch<"u"||Hi.isNode)this._httpClient=new VK(i);else if(typeof XMLHttpRequest<"u")this._httpClient=new zK(i);else throw new Error("No usable HttpClient found.")}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new nu):i.method?i.url?this._httpClient.send(i):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(i){return this._httpClient.getCookieString(i)}}class ls{static write(i){return"".concat(i).concat(ls.RecordSeparator)}static parse(i){if(i[i.length-1]!==ls.RecordSeparator)throw new Error("Message is incomplete.");const l=i.split(ls.RecordSeparator);return l.pop(),l}}ls.RecordSeparatorCode=30;ls.RecordSeparator=String.fromCharCode(ls.RecordSeparatorCode);class WK{writeHandshakeRequest(i){return ls.write(JSON.stringify(i))}parseHandshakeResponse(i){let l,d;if(vf(i)){const g=new Uint8Array(i),A=g.indexOf(ls.RecordSeparatorCode);if(A===-1)throw new Error("Message is incomplete.");const U=A+1;l=String.fromCharCode.apply(null,Array.prototype.slice.call(g.slice(0,U))),d=g.byteLength>U?g.slice(U).buffer:null}else{const g=i,A=g.indexOf(ls.RecordSeparator);if(A===-1)throw new Error("Message is incomplete.");const U=A+1;l=g.substring(0,U),d=g.length>U?g.substring(U):null}const p=ls.parse(l),w=JSON.parse(p[0]);if(w.type)throw new Error("Expected a handshake response from the server.");return[d,w]}}var Ar;(function(o){o[o.Invocation=1]="Invocation",o[o.StreamItem=2]="StreamItem",o[o.Completion=3]="Completion",o[o.StreamInvocation=4]="StreamInvocation",o[o.CancelInvocation=5]="CancelInvocation",o[o.Ping=6]="Ping",o[o.Close=7]="Close",o[o.Ack=8]="Ack",o[o.Sequence=9]="Sequence"})(Ar||(Ar={}));class $K{constructor(){this.observers=[]}next(i){for(const l of this.observers)l.next(i)}error(i){for(const l of this.observers)l.error&&l.error(i)}complete(){for(const i of this.observers)i.complete&&i.complete()}subscribe(i){return this.observers.push(i),new kK(this,i)}}class XK{constructor(i,l,d){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=i,this._connection=l,this._bufferSize=d}async _send(i){const l=this._protocol.writeMessage(i);let d=Promise.resolve();if(this._isInvocationMessage(i)){this._totalMessageCount++;let p=()=>{},w=()=>{};vf(l)?this._bufferedByteCount+=l.byteLength:this._bufferedByteCount+=l.length,this._bufferedByteCount>=this._bufferSize&&(d=new Promise((R,g)=>{p=R,w=g})),this._messages.push(new QK(l,this._totalMessageCount,p,w))}try{this._reconnectInProgress||await this._connection.send(l)}catch(p){this._disconnected()}await d}_ack(i){let l=-1;for(let d=0;d<this._messages.length;d++){const p=this._messages[d];if(p._id<=i.sequenceId)l=d,vf(p._message)?this._bufferedByteCount-=p._message.byteLength:this._bufferedByteCount-=p._message.length,p._resolver();else if(this._bufferedByteCount<this._bufferSize)p._resolver();else break}l!==-1&&(this._messages=this._messages.slice(l+1))}_shouldProcessMessage(i){if(this._waitForSequenceMessage)return i.type!==Ar.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(i))return!0;const l=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,l<=this._latestReceivedSequenceId?(l===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=l,this._ackTimer(),!0)}_resetSequence(i){if(i.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=i.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const i=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ar.Sequence,sequenceId:i}));const l=this._messages;for(const d of l)await this._connection.send(d._message);this._reconnectInProgress=!1}_dispose(i){i!=null||(i=new Error("Unable to reconnect to server."));for(const l of this._messages)l._rejector(i)}_isInvocationMessage(i){switch(i.type){case Ar.Invocation:case Ar.StreamItem:case Ar.Completion:case Ar.StreamInvocation:case Ar.CancelInvocation:return!0;case Ar.Close:case Ar.Sequence:case Ar.Ping:case Ar.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ar.Ack,sequenceId:this._latestReceivedSequenceId}))}catch(i){}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class QK{constructor(i,l,d,p){this._message=i,this._id=l,this._resolver=d,this._rejector=p}}const JK=30*1e3,eV=15*1e3,tV=1e5;var Fi;(function(o){o.Disconnected="Disconnected",o.Connecting="Connecting",o.Connected="Connected",o.Disconnecting="Disconnecting",o.Reconnecting="Reconnecting"})(Fi||(Fi={}));class SC{static create(i,l,d,p,w,R,g){return new SC(i,l,d,p,w,R,g)}constructor(i,l,d,p,w,R,g){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(wn.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},po.isRequired(i,"connection"),po.isRequired(l,"logger"),po.isRequired(d,"protocol"),this.serverTimeoutInMilliseconds=w!=null?w:JK,this.keepAliveIntervalInMilliseconds=R!=null?R:eV,this._statefulReconnectBufferSize=g!=null?g:tV,this._logger=l,this._protocol=d,this.connection=i,this._reconnectPolicy=p,this._handshakeProtocol=new WK,this.connection.onreceive=A=>this._processIncomingData(A),this.connection.onclose=A=>this._connectionClosed(A),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ar.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(i){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!i)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=i}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Fi.Connecting,this._logger.log(wn.Debug,"Starting HubConnection.");try{await this._startInternal(),Hi.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Fi.Connected,this._connectionStarted=!0,this._logger.log(wn.Debug,"HubConnection connected successfully.")}catch(i){return this._connectionState=Fi.Disconnected,this._logger.log(wn.Debug,"HubConnection failed to start successfully because of error '".concat(i,"'.")),Promise.reject(i)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const i=new Promise((l,d)=>{this._handshakeResolver=l,this._handshakeRejecter=d});await this.connection.start(this._protocol.transferFormat);try{let l=this._protocol.version;this.connection.features.reconnect||(l=1);const d={protocol:this._protocol.name,version:l};if(this._logger.log(wn.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(d)),this._logger.log(wn.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await i,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new XK(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(l){throw this._logger.log(wn.Debug,"Hub handshake failed with error '".concat(l,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(l),l}}async stop(){const i=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await i}catch(l){}}_stopInternal(i){if(this._connectionState===Fi.Disconnected)return this._logger.log(wn.Debug,"Call to HubConnection.stop(".concat(i,") ignored because it is already in the disconnected state.")),Promise.resolve();if(this._connectionState===Fi.Disconnecting)return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;const l=this._connectionState;return this._connectionState=Fi.Disconnecting,this._logger.log(wn.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(wn.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(l===Fi.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=i||new nu("The connection was stopped before the hub handshake could complete."),this.connection.stop(i))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch(i){}}stream(i,...l){const[d,p]=this._replaceStreamingParams(l),w=this._createStreamInvocation(i,l,p);let R;const g=new $K;return g.cancelCallback=()=>{const A=this._createCancelInvocation(w.invocationId);return delete this._callbacks[w.invocationId],R.then(()=>this._sendWithProtocol(A))},this._callbacks[w.invocationId]=(A,U)=>{if(U){g.error(U);return}else A&&(A.type===Ar.Completion?A.error?g.error(new Error(A.error)):g.complete():g.next(A.item))},R=this._sendWithProtocol(w).catch(A=>{g.error(A),delete this._callbacks[w.invocationId]}),this._launchStreams(d,R),g}_sendMessage(i){return this._resetKeepAliveInterval(),this.connection.send(i)}_sendWithProtocol(i){return this._messageBuffer?this._messageBuffer._send(i):this._sendMessage(this._protocol.writeMessage(i))}send(i,...l){const[d,p]=this._replaceStreamingParams(l),w=this._sendWithProtocol(this._createInvocation(i,l,!0,p));return this._launchStreams(d,w),w}invoke(i,...l){const[d,p]=this._replaceStreamingParams(l),w=this._createInvocation(i,l,!1,p);return new Promise((g,A)=>{this._callbacks[w.invocationId]=(C,y)=>{if(y){A(y);return}else C&&(C.type===Ar.Completion?C.error?A(new Error(C.error)):g(C.result):A(new Error("Unexpected message type: ".concat(C.type))))};const U=this._sendWithProtocol(w).catch(C=>{A(C),delete this._callbacks[w.invocationId]});this._launchStreams(d,U)})}on(i,l){!i||!l||(i=i.toLowerCase(),this._methods[i]||(this._methods[i]=[]),this._methods[i].indexOf(l)===-1&&this._methods[i].push(l))}off(i,l){if(!i)return;i=i.toLowerCase();const d=this._methods[i];if(d)if(l){const p=d.indexOf(l);p!==-1&&(d.splice(p,1),d.length===0&&delete this._methods[i])}else delete this._methods[i]}onclose(i){i&&this._closedCallbacks.push(i)}onreconnecting(i){i&&this._reconnectingCallbacks.push(i)}onreconnected(i){i&&this._reconnectedCallbacks.push(i)}_processIncomingData(i){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(i=this._processHandshakeResponse(i),this._receivedHandshakeResponse=!0),i){const l=this._protocol.parseMessages(i,this._logger);for(const d of l)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(d)))switch(d.type){case Ar.Invocation:this._invokeClientMethod(d);break;case Ar.StreamItem:case Ar.Completion:{const p=this._callbacks[d.invocationId];if(p){d.type===Ar.Completion&&delete this._callbacks[d.invocationId];try{p(d)}catch(w){this._logger.log(wn.Error,"Stream callback threw error: ".concat(jk(w)))}}break}case Ar.Ping:break;case Ar.Close:{this._logger.log(wn.Information,"Close message received from server.");const p=d.error?new Error("Server returned an error on close: "+d.error):void 0;d.allowReconnect===!0?this.connection.stop(p):this._stopPromise=this._stopInternal(p);break}case Ar.Ack:this._messageBuffer&&this._messageBuffer._ack(d);break;case Ar.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(d);break;default:this._logger.log(wn.Warning,"Invalid message type: ".concat(d.type,"."));break}}this._resetTimeoutPeriod()}_processHandshakeResponse(i){let l,d;try{[d,l]=this._handshakeProtocol.parseHandshakeResponse(i)}catch(p){const w="Error parsing handshake response: "+p;this._logger.log(wn.Error,w);const R=new Error(w);throw this._handshakeRejecter(R),R}if(l.error){const p="Server returned handshake error: "+l.error;this._logger.log(wn.Error,p);const w=new Error(p);throw this._handshakeRejecter(w),w}else this._logger.log(wn.Debug,"Server handshake complete.");return this._handshakeResolver(),d}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let i=this._nextKeepAlive-new Date().getTime();i<0&&(i=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Fi.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(l){this._cleanupPingTimer()}},i)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(i){const l=i.target.toLowerCase(),d=this._methods[l];if(!d){this._logger.log(wn.Warning,"No client method with the name '".concat(l,"' found.")),i.invocationId&&(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(i.invocationId,"'.")),await this._sendWithProtocol(this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)));return}const p=d.slice(),w=!!i.invocationId;let R,g,A;for(const U of p)try{const C=R;R=await U.apply(this,i.arguments),w&&R&&C&&(this._logger.log(wn.Error,"Multiple results provided for '".concat(l,"'. Sending error to server.")),A=this._createCompletionMessage(i.invocationId,"Client provided multiple results.",null)),g=void 0}catch(C){g=C,this._logger.log(wn.Error,"A callback for the method '".concat(l,"' threw error '").concat(C,"'."))}A?await this._sendWithProtocol(A):w?(g?A=this._createCompletionMessage(i.invocationId,"".concat(g),null):R!==void 0?A=this._createCompletionMessage(i.invocationId,null,R):(this._logger.log(wn.Warning,"No result given for '".concat(l,"' method and invocation ID '").concat(i.invocationId,"'.")),A=this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(A)):R&&this._logger.log(wn.Error,"Result given for '".concat(l,"' method but server is not expecting a result."))}_connectionClosed(i){this._logger.log(wn.Debug,"HubConnection.connectionClosed(".concat(i,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||i||new nu("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(i||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(i):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(i):this._connectionState===Fi.Connected&&this._completeClose(i)}_completeClose(i){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(i!=null?i:new Error("Connection closed.")),this._messageBuffer=void 0),Hi.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(l=>l.apply(this,[i]))}catch(l){this._logger.log(wn.Error,"An onclose callback called with error '".concat(i,"' threw error '").concat(l,"'."))}}}async _reconnect(i){const l=Date.now();let d=0,p=i!==void 0?i:new Error("Attempting to reconnect due to a unknown error."),w=this._getNextRetryDelay(d++,0,p);if(w===null){this._logger.log(wn.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(i);return}if(this._connectionState=Fi.Reconnecting,i?this._logger.log(wn.Information,"Connection reconnecting because of error '".concat(i,"'.")):this._logger.log(wn.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(R=>R.apply(this,[i]))}catch(R){this._logger.log(wn.Error,"An onreconnecting callback called with error '".concat(i,"' threw error '").concat(R,"'."))}if(this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;w!==null;){if(this._logger.log(wn.Information,"Reconnect attempt number ".concat(d," will start in ").concat(w," ms.")),await new Promise(R=>{this._reconnectDelayHandle=setTimeout(R,w)}),this._reconnectDelayHandle=void 0,this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Fi.Connected,this._logger.log(wn.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(R=>R.apply(this,[this.connection.connectionId]))}catch(R){this._logger.log(wn.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(R,"'."))}return}catch(R){if(this._logger.log(wn.Information,"Reconnect attempt failed because of error '".concat(R,"'.")),this._connectionState!==Fi.Reconnecting){this._logger.log(wn.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),this._connectionState===Fi.Disconnecting&&this._completeClose();return}p=R instanceof Error?R:new Error(R.toString()),w=this._getNextRetryDelay(d++,Date.now()-l,p)}}this._logger.log(wn.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-l," ms and ").concat(d," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(i,l,d){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:l,previousRetryCount:i,retryReason:d})}catch(p){return this._logger.log(wn.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(i,", ").concat(l,") threw error '").concat(p,"'.")),null}}_cancelCallbacksWithError(i){const l=this._callbacks;this._callbacks={},Object.keys(l).forEach(d=>{const p=l[d];try{p(null,i)}catch(w){this._logger.log(wn.Error,"Stream 'error' callback called with '".concat(i,"' threw error: ").concat(jk(w)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(i,l,d,p){if(d)return p.length!==0?{arguments:l,streamIds:p,target:i,type:Ar.Invocation}:{arguments:l,target:i,type:Ar.Invocation};{const w=this._invocationId;return this._invocationId++,p.length!==0?{arguments:l,invocationId:w.toString(),streamIds:p,target:i,type:Ar.Invocation}:{arguments:l,invocationId:w.toString(),target:i,type:Ar.Invocation}}}_launchStreams(i,l){if(i.length!==0){l||(l=Promise.resolve());for(const d in i)i[d].subscribe({complete:()=>{l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d)))},error:p=>{let w;p instanceof Error?w=p.message:p&&p.toString?w=p.toString():w="Unknown error",l=l.then(()=>this._sendWithProtocol(this._createCompletionMessage(d,w)))},next:p=>{l=l.then(()=>this._sendWithProtocol(this._createStreamItemMessage(d,p)))}})}}_replaceStreamingParams(i){const l=[],d=[];for(let p=0;p<i.length;p++){const w=i[p];if(this._isObservable(w)){const R=this._invocationId;this._invocationId++,l[R]=w,d.push(R.toString()),i.splice(p,1)}}return[l,d]}_isObservable(i){return i&&i.subscribe&&typeof i.subscribe=="function"}_createStreamInvocation(i,l,d){const p=this._invocationId;return this._invocationId++,d.length!==0?{arguments:l,invocationId:p.toString(),streamIds:d,target:i,type:Ar.StreamInvocation}:{arguments:l,invocationId:p.toString(),target:i,type:Ar.StreamInvocation}}_createCancelInvocation(i){return{invocationId:i,type:Ar.CancelInvocation}}_createStreamItemMessage(i,l){return{invocationId:i,item:l,type:Ar.StreamItem}}_createCompletionMessage(i,l,d){return l?{error:l,invocationId:i,type:Ar.Completion}:{invocationId:i,result:d,type:Ar.Completion}}_createCloseMessage(){return{type:Ar.Close}}}const nV=[0,2e3,1e4,3e4,null];class Gk{constructor(i){this._retryDelays=i!==void 0?[...i,null]:nV}nextRetryDelayInMilliseconds(i){return this._retryDelays[i.previousRetryCount]}}class ff{}ff.Authorization="Authorization";ff.Cookie="Cookie";class rV extends sE{constructor(i,l){super(),this._innerClient=i,this._accessTokenFactory=l}async send(i){let l=!0;this._accessTokenFactory&&(!this._accessToken||i.url&&i.url.indexOf("/negotiate?")>0)&&(l=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(i);const d=await this._innerClient.send(i);return l&&d.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(i),await this._innerClient.send(i)):d}_setAuthorizationHeader(i){i.headers||(i.headers={}),this._accessToken?i.headers[ff.Authorization]="Bearer ".concat(this._accessToken):this._accessTokenFactory&&i.headers[ff.Authorization]&&delete i.headers[ff.Authorization]}getCookieString(i){return this._innerClient.getCookieString(i)}}var uo;(function(o){o[o.None=0]="None",o[o.WebSockets=1]="WebSockets",o[o.ServerSentEvents=2]="ServerSentEvents",o[o.LongPolling=4]="LongPolling"})(uo||(uo={}));var Qo;(function(o){o[o.Text=1]="Text",o[o.Binary=2]="Binary"})(Qo||(Qo={}));let iV=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class qk{get pollAborted(){return this._pollAbort.aborted}constructor(i,l,d){this._httpClient=i,this._logger=l,this._pollAbort=new iV,this._options=d,this._running=!1,this.onreceive=null,this.onclose=null}async connect(i,l){if(po.isRequired(i,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._url=i,this._logger.log(wn.Trace,"(LongPolling transport) Connecting."),l===Qo.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[d,p]=yh(),w={[d]:p,...this._options.headers},R={abortSignal:this._pollAbort.signal,headers:w,timeout:1e5,withCredentials:this._options.withCredentials};l===Qo.Binary&&(R.responseType="arraybuffer");const g="".concat(i,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(g,"."));const A=await this._httpClient.get(g,R);A.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(A.statusCode,".")),this._closeError=new cf(A.statusText||"",A.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,R)}async _poll(i,l){try{for(;this._running;)try{const d="".concat(i,"&_=").concat(Date.now());this._logger.log(wn.Trace,"(LongPolling transport) polling: ".concat(d,"."));const p=await this._httpClient.get(d,l);p.statusCode===204?(this._logger.log(wn.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):p.statusCode!==200?(this._logger.log(wn.Error,"(LongPolling transport) Unexpected response code: ".concat(p.statusCode,".")),this._closeError=new cf(p.statusText||"",p.statusCode),this._running=!1):p.content?(this._logger.log(wn.Trace,"(LongPolling transport) data received. ".concat(Gg(p.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(p.content)):this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(d){this._running?d instanceof TC?this._logger.log(wn.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=d,this._running=!1):this._logger.log(wn.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(d.message))}}finally{this._logger.log(wn.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(i){return this._running?yU(this._logger,"LongPolling",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(wn.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(wn.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const i={},[l,d]=yh();i[l]=d;const p={headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let w;try{await this._httpClient.delete(this._url,p)}catch(R){w=R}w?w instanceof cf&&(w.statusCode===404?this._logger.log(wn.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(wn.Trace,"(LongPolling transport) Error sending a DELETE request: ".concat(w))):this._logger.log(wn.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(wn.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let i="(LongPolling transport) Firing onclose event.";this._closeError&&(i+=" Error: "+this._closeError),this._logger.log(wn.Trace,i),this.onclose(this._closeError)}}}class oV{constructor(i,l,d,p){this._httpClient=i,this._accessToken=l,this._logger=d,this._options=p,this.onreceive=null,this.onclose=null}async connect(i,l){return po.isRequired(i,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(SSE transport) Connecting."),this._url=i,this._accessToken&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(this._accessToken))),new Promise((d,p)=>{let w=!1;if(l!==Qo.Text){p(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let R;if(Hi.isBrowser||Hi.isWebWorker)R=new this._options.EventSource(i,{withCredentials:this._options.withCredentials});else{const g=this._httpClient.getCookieString(i),A={};A.Cookie=g;const[U,C]=yh();A[U]=C,R=new this._options.EventSource(i,{withCredentials:this._options.withCredentials,headers:{...A,...this._options.headers}})}try{R.onmessage=g=>{if(this.onreceive)try{this._logger.log(wn.Trace,"(SSE transport) data received. ".concat(Gg(g.data,this._options.logMessageContent),".")),this.onreceive(g.data)}catch(A){this._close(A);return}},R.onerror=g=>{w?this._close():p(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},R.onopen=()=>{this._logger.log(wn.Information,"SSE connected to ".concat(this._url)),this._eventSource=R,w=!0,d()}}catch(g){p(g);return}})}async send(i){return this._eventSource?yU(this._logger,"SSE",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(i){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(i))}}class aV{constructor(i,l,d,p,w,R){this._logger=d,this._accessTokenFactory=l,this._logMessageContent=p,this._webSocketConstructor=w,this._httpClient=i,this.onreceive=null,this.onclose=null,this._headers=R}async connect(i,l){po.isRequired(i,"url"),po.isRequired(l,"transferFormat"),po.isIn(l,Qo,"transferFormat"),this._logger.log(wn.Trace,"(WebSockets transport) Connecting.");let d;return this._accessTokenFactory&&(d=await this._accessTokenFactory()),new Promise((p,w)=>{i=i.replace(/^http/,"ws");let R;const g=this._httpClient.getCookieString(i);let A=!1;if(Hi.isNode||Hi.isReactNative){const U={},[C,y]=yh();U[C]=y,d&&(U[ff.Authorization]="Bearer ".concat(d)),g&&(U[ff.Cookie]=g),R=new this._webSocketConstructor(i,void 0,{headers:{...U,...this._headers}})}else d&&(i+=(i.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(d)));R||(R=new this._webSocketConstructor(i)),l===Qo.Binary&&(R.binaryType="arraybuffer"),R.onopen=U=>{this._logger.log(wn.Information,"WebSocket connected to ".concat(i,".")),this._webSocket=R,A=!0,p()},R.onerror=U=>{let C=null;typeof ErrorEvent<"u"&&U instanceof ErrorEvent?C=U.error:C="There was an error with the transport",this._logger.log(wn.Information,"(WebSockets transport) ".concat(C,"."))},R.onmessage=U=>{if(this._logger.log(wn.Trace,"(WebSockets transport) data received. ".concat(Gg(U.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(U.data)}catch(C){this._close(C);return}},R.onclose=U=>{if(A)this._close(U);else{let C=null;typeof ErrorEvent<"u"&&U instanceof ErrorEvent?C=U.error:C="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",w(new Error(C))}}})}send(i){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(wn.Trace,"(WebSockets transport) sending data. ".concat(Gg(i,this._logMessageContent),".")),this._webSocket.send(i),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(i){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(wn.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(i)&&(i.wasClean===!1||i.code!==1e3)?this.onclose(new Error("WebSocket closed with status code: ".concat(i.code," (").concat(i.reason||"no reason given",")."))):i instanceof Error?this.onclose(i):this.onclose())}_isCloseEvent(i){return i&&typeof i.wasClean=="boolean"&&typeof i.code=="number"}}const Hk=100;class sV{constructor(i,l={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,po.isRequired(i,"url"),this._logger=LK(l.logger),this.baseUrl=this._resolveUrl(i),l=l||{},l.logMessageContent=l.logMessageContent===void 0?!1:l.logMessageContent,typeof l.withCredentials=="boolean"||l.withCredentials===void 0)l.withCredentials=l.withCredentials===void 0?!0:l.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");l.timeout=l.timeout===void 0?100*1e3:l.timeout;let d=null,p=null;Hi.isNode&&typeof require<"u"&&(d=HK(),p=KK()),!Hi.isNode&&typeof WebSocket<"u"&&!l.WebSocket?l.WebSocket=WebSocket:Hi.isNode&&!l.WebSocket&&d&&(l.WebSocket=d),!Hi.isNode&&typeof EventSource<"u"&&!l.EventSource?l.EventSource=EventSource:Hi.isNode&&!l.EventSource&&typeof p<"u"&&(l.EventSource=p),this._httpClient=new rV(l.httpClient||new YK(this._logger),l.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=l,this.onreceive=null,this.onclose=null}async start(i){if(i=i||Qo.Binary,po.isIn(i,Qo,"transferFormat"),this._logger.log(wn.Debug,"Starting connection with transfer format '".concat(Qo[i],"'.")),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(i),await this._startInternalPromise,this._connectionState==="Disconnecting"){const l="Failed to start the HttpConnection before stop() was called.";return this._logger.log(wn.Error,l),await this._stopPromise,Promise.reject(new nu(l))}else if(this._connectionState!=="Connected"){const l="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(wn.Error,l),Promise.reject(new nu(l))}this._connectionStarted=!0}send(i){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new wC(this.transport)),this._sendQueue.send(i))}async stop(i){if(this._connectionState==="Disconnected")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnected state.")),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(wn.Debug,"Call to HttpConnection.stop(".concat(i,") ignored because the connection is already in the disconnecting state.")),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(l=>{this._stopPromiseResolver=l}),await this._stopInternal(i),await this._stopPromise}async _stopInternal(i){this._stopError=i;try{await this._startInternalPromise}catch(l){}if(this.transport){try{await this.transport.stop()}catch(l){this._logger.log(wn.Error,"HttpConnection.transport.stop() threw error '".concat(l,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(wn.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(i){let l=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===uo.WebSockets)this.transport=this._constructTransport(uo.WebSockets),await this._startTransport(l,i);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let d=null,p=0;do{if(d=await this._getNegotiationResponse(l),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new nu("The connection was stopped during negotiation.");if(d.error)throw new Error(d.error);if(d.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(d.url&&(l=d.url),d.accessToken){const w=d.accessToken;this._accessTokenFactory=()=>w,this._httpClient._accessToken=w,this._httpClient._accessTokenFactory=void 0}p++}while(d.url&&p<Hk);if(p===Hk&&d.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(l,this._options.transport,d,i)}this.transport instanceof qk&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(wn.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(d){return this._logger.log(wn.Error,"Failed to start the connection: "+d),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(d)}}async _getNegotiationResponse(i){const l={},[d,p]=yh();l[d]=p;const w=this._resolveNegotiateUrl(i);this._logger.log(wn.Debug,"Sending negotiation request: ".concat(w,"."));try{const R=await this._httpClient.post(w,{content:"",headers:{...l,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(R.statusCode!==200)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(R.statusCode,"'")));const g=JSON.parse(R.content);return(!g.negotiateVersion||g.negotiateVersion<1)&&(g.connectionToken=g.connectionId),g.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Bk("Client didn't negotiate Stateful Reconnect but the server did.")):g}catch(R){let g="Failed to complete negotiation with the server: "+R;return R instanceof cf&&R.statusCode===404&&(g=g+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(wn.Error,g),Promise.reject(new Bk(g))}}_createConnectUrl(i,l){return l?i+(i.indexOf("?")===-1?"?":"&")+"id=".concat(l):i}async _createTransport(i,l,d,p){let w=this._createConnectUrl(i,d.connectionToken);if(this._isITransport(l)){this._logger.log(wn.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=l,await this._startTransport(w,p),this.connectionId=d.connectionId;return}const R=[],g=d.availableTransports||[];let A=d;for(const U of g){const C=this._resolveTransportOrError(U,l,p,(A==null?void 0:A.useStatefulReconnect)===!0);if(C instanceof Error)R.push("".concat(U.transport," failed:")),R.push(C);else if(this._isITransport(C)){if(this.transport=C,!A){try{A=await this._getNegotiationResponse(i)}catch(y){return Promise.reject(y)}w=this._createConnectUrl(i,A.connectionToken)}try{await this._startTransport(w,p),this.connectionId=A.connectionId;return}catch(y){if(this._logger.log(wn.Error,"Failed to start the transport '".concat(U.transport,"': ").concat(y)),A=void 0,R.push(new MK("".concat(U.transport," failed: ").concat(y),uo[U.transport])),this._connectionState!=="Connecting"){const v="Failed to select transport before stop() was called.";return this._logger.log(wn.Debug,v),Promise.reject(new nu(v))}}}}return R.length>0?Promise.reject(new DK("Unable to connect to the server with any of the available transports. ".concat(R.join(" ")),R)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(i){switch(i){case uo.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new aV(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case uo.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new oV(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case uo.LongPolling:return new qk(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(i,"."))}}_startTransport(i,l){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async d=>{let p=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(i,l),await this.features.resend()}catch(w){p=!0}else{this._stopConnection(d);return}p&&this._stopConnection(d)}:this.transport.onclose=d=>this._stopConnection(d),this.transport.connect(i,l)}_resolveTransportOrError(i,l,d,p){const w=uo[i.transport];if(w==null)return this._logger.log(wn.Debug,"Skipping transport '".concat(i.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(i.transport,"' because it is not supported by this client."));if(uV(l,w))if(i.transferFormats.map(g=>Qo[g]).indexOf(d)>=0){if(w===uo.WebSockets&&!this._options.WebSocket||w===uo.ServerSentEvents&&!this._options.EventSource)return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it is not supported in your environment.'")),new xK("'".concat(uo[w],"' is not supported in your environment."),w);this._logger.log(wn.Debug,"Selecting transport '".concat(uo[w],"'."));try{return this.features.reconnect=w===uo.WebSockets?p:void 0,this._constructTransport(w)}catch(g){return g}}else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it does not support the requested transfer format '").concat(Qo[d],"'.")),new Error("'".concat(uo[w],"' does not support ").concat(Qo[d],"."));else return this._logger.log(wn.Debug,"Skipping transport '".concat(uo[w],"' because it was disabled by the client.")),new NK("'".concat(uo[w],"' is disabled by the client."),w)}_isITransport(i){return i&&typeof i=="object"&&"connect"in i}_stopConnection(i){if(this._logger.log(wn.Debug,"HttpConnection.stopConnection(".concat(i,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,i=this._stopError||i,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(wn.Debug,"Call to HttpConnection.stopConnection(".concat(i,") was ignored because the connection is already in the disconnected state."));return}if(this._connectionState==="Connecting")throw this._logger.log(wn.Warning,"Call to HttpConnection.stopConnection(".concat(i,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(i,") was called while the connection is still in the connecting state."));if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),i?this._logger.log(wn.Error,"Connection disconnected with error '".concat(i,"'.")):this._logger.log(wn.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(l=>{this._logger.log(wn.Error,"TransportSendQueue.stop() threw error '".concat(l,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(i)}catch(l){this._logger.log(wn.Error,"HttpConnection.onclose(".concat(i,") threw error '").concat(l,"'."))}}}_resolveUrl(i){if(i.lastIndexOf("https://",0)===0||i.lastIndexOf("http://",0)===0)return i;if(!Hi.isBrowser)throw new Error("Cannot resolve '".concat(i,"'."));const l=window.document.createElement("a");return l.href=i,this._logger.log(wn.Information,"Normalizing '".concat(i,"' to '").concat(l.href,"'.")),l.href}_resolveNegotiateUrl(i){const l=new URL(i);l.pathname.endsWith("/")?l.pathname+="negotiate":l.pathname+="/negotiate";const d=new URLSearchParams(l.searchParams);return d.has("negotiateVersion")||d.append("negotiateVersion",this._negotiateVersion.toString()),d.has("useStatefulReconnect")?d.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&d.append("useStatefulReconnect","true"),l.search=d.toString(),l.toString()}}function uV(o,i){return!o||(i&o)!==0}class wC{constructor(i){this._transport=i,this._buffer=[],this._executing=!0,this._sendBufferedData=new Gy,this._transportResult=new Gy,this._sendLoopPromise=this._sendLoop()}send(i){return this._bufferData(i),this._transportResult||(this._transportResult=new Gy),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(i){if(this._buffer.length&&typeof this._buffer[0]!=typeof i)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof i));this._buffer.push(i),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Gy;const i=this._transportResult;this._transportResult=void 0;const l=typeof this._buffer[0]=="string"?this._buffer.join(""):wC._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(l),i.resolve()}catch(d){i.reject(d)}}}static _concatBuffers(i){const l=i.map(w=>w.byteLength).reduce((w,R)=>w+R),d=new Uint8Array(l);let p=0;for(const w of i)d.set(new Uint8Array(w),p),p+=w.byteLength;return d.buffer}}class Gy{constructor(){this.promise=new Promise((i,l)=>[this._resolver,this._rejecter]=[i,l])}resolve(){this._resolver()}reject(i){this._rejecter(i)}}const lV="json";class cV{constructor(){this.name=lV,this.version=2,this.transferFormat=Qo.Text}parseMessages(i,l){if(typeof i!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!i)return[];l===null&&(l=Zg.instance);const d=ls.parse(i),p=[];for(const w of d){const R=JSON.parse(w);if(typeof R.type!="number")throw new Error("Invalid payload.");switch(R.type){case Ar.Invocation:this._isInvocationMessage(R);break;case Ar.StreamItem:this._isStreamItemMessage(R);break;case Ar.Completion:this._isCompletionMessage(R);break;case Ar.Ping:break;case Ar.Close:break;case Ar.Ack:this._isAckMessage(R);break;case Ar.Sequence:this._isSequenceMessage(R);break;default:l.log(wn.Information,"Unknown message type '"+R.type+"' ignored.");continue}p.push(R)}return p}writeMessage(i){return ls.write(JSON.stringify(i))}_isInvocationMessage(i){this._assertNotEmptyString(i.target,"Invalid payload for Invocation message."),i.invocationId!==void 0&&this._assertNotEmptyString(i.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(i){if(this._assertNotEmptyString(i.invocationId,"Invalid payload for StreamItem message."),i.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(i){if(i.result&&i.error)throw new Error("Invalid payload for Completion message.");!i.result&&i.error&&this._assertNotEmptyString(i.error,"Invalid payload for Completion message."),this._assertNotEmptyString(i.invocationId,"Invalid payload for Completion message.")}_isAckMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(i,l){if(typeof i!="string"||i==="")throw new Error(l)}}const fV={trace:wn.Trace,debug:wn.Debug,info:wn.Information,information:wn.Information,warn:wn.Warning,warning:wn.Warning,error:wn.Error,critical:wn.Critical,none:wn.None};function dV(o){const i=fV[o.toLowerCase()];if(typeof i<"u")return i;throw new Error("Unknown log level: ".concat(o))}class Kk{configureLogging(i){if(po.isRequired(i,"logging"),hV(i))this.logger=i;else if(typeof i=="string"){const l=dV(i);this.logger=new P0(l)}else this.logger=new P0(i);return this}withUrl(i,l){return po.isRequired(i,"url"),po.isNotEmpty(i,"url"),this.url=i,typeof l=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...l}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:l},this}withHubProtocol(i){return po.isRequired(i,"protocol"),this.protocol=i,this}withAutomaticReconnect(i){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return i?Array.isArray(i)?this.reconnectPolicy=new Gk(i):this.reconnectPolicy=i:this.reconnectPolicy=new Gk,this}withServerTimeout(i){return po.isRequired(i,"milliseconds"),this._serverTimeoutInMilliseconds=i,this}withKeepAliveInterval(i){return po.isRequired(i,"milliseconds"),this._keepAliveIntervalInMilliseconds=i,this}withStatefulReconnect(i){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=i==null?void 0:i.bufferSize,this}build(){const i=this.httpConnectionOptions||{};if(i.logger===void 0&&(i.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const l=new sV(this.url,i);return SC.create(l,this.logger||Zg.instance,this.protocol||new cV,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function hV(o){return o.log!==void 0}class pV extends wf{constructor(i){var l;super(),this.options=i,this.hubConnection=i.hubConnection,this.updateIntervalFrequency=(l=i.updateIntervalFrequency)!=null?l:6e4*5}async getServerTimeOffset(){const i=await this.getSyncedTime();this.emit("serverTimeOffsetUpdate",{serverTimeOffset:Date.now()-i.getTime()}),!(this.updateIntervalFrequency<6e4)&&(this.timeoutInstance=setTimeout(this.getServerTimeOffset.bind(this),this.updateIntervalFrequency))}async start(){await this.getServerTimeOffset()}async getSyncedTime(){const i=this,l=12,d=1e4,p=20;let w;return await new Promise((R,g)=>{var T;const A=[];let U=0,C,y;function v(){var F;y=Date.now(),(F=i.hubConnection)==null||F.invoke("echo"),C=setTimeout(()=>{g(new Error("Did not get sufficient echoes from the server in time"))},d)}function D(F){w=F,clearTimeout(C),A.push(Date.now()-y),U++,U<l?setTimeout(v,p):m()}(T=i.hubConnection)==null||T.on("echo",D);function m(){var N;if((N=i.hubConnection)==null||N.off("echo",D),w===void 0){g(new Error("Server timestamp is undefined"));return}let F;i.options.roundtripCalcStrategy==="mean"?F=A.reduce((_,I)=>_+I)/A.length:F=_K(A),R(new Date(w+F/2))}v()})}destroy(){clearTimeout(this.timeoutInstance)}}const $s={STATE_UPDATE:"OnStateUpdated",RECIEVE_GROUP_COMMAND:"receiveGroupCommand",RECIEVE_GLOBAL_COMMAND:"receiveGlobalCommand",CLIENT_DISCONNECT:"DeviceLogOut",SETUP_REQUEST_HOST_TV_CONNECTED:"SetupRequestHostTvConnected",SETUP_STATUS_UPDATE:"SetupStatusUpdate",SETUP_ERROR_RECEIVED:"SetupErrorReceived"},XI={WAITING_FOR_HOST:"WaitingForHostState",READY_TO_PAIR_WITH_HOST:"ShowQrCodeState",CONNECTED_STATE:"ConnectedState",SHOW_QR_CODE_STATE:"ShowQrCode",HOST_TV_STATE:"HostTVState",IDLE:"Idle"};class gV extends wf{constructor({deviceId:i,debug:l}){super(),this.hubConnection=null,this.globalHubConnection=null,this.connected=!1,this.serverTimeService=null,this.state=XI.IDLE,this.deviceId=i,this.debugLogging=l!=null?l:!1}setupTimeService(){this.serverTimeService=new pV({hubConnection:this.hubConnection}),this.serverTimeService.on("serverTimeOffsetUpdate",i=>{this.emit("serverTimeOffsetUpdate",i)}),this.serverTimeService.start()}async join(){await this.sendGroupCommand({command:"join",value:this.deviceId})}async disconnect(){var i;console.log("SignalR: disconnect",$s.CLIENT_DISCONNECT,{deviceId:this.deviceId}),this.connected=!1,await((i=this.hubConnection)==null?void 0:i.invoke($s.CLIENT_DISCONNECT))}globalDisconnect(){var i;console.log("Disconnecting global signalR...",this.deviceId),(i=this.globalHubConnection)==null||i.invoke($s.CLIENT_DISCONNECT)}connect({url:i,accessToken:l,groupName:d}){var p;this.groupName=d,this.hubConnection=new Kk().withUrl(i,{accessTokenFactory:()=>l,transport:uo.WebSockets}).configureLogging(this.debugLogging?wn.Trace:wn.Information).build(),(p=this.hubConnection)==null||p.start().then(()=>{this.setupTimeService(),this.connectEventHandlers(),this.connected=!0,this.join()}).catch(w=>{console.error("Connection failed:",w)})}async globalConnect({url:i,accessToken:l}){return new Promise((d,p)=>{this.globalHubConnection=new Kk().withUrl(i,{accessTokenFactory:()=>l,transport:uo.WebSockets}).build(),this.globalHubConnection.start().catch(w=>{console.error("Global signalR connection failed:",w),p()}),this.globalHubConnection.on($s.SETUP_REQUEST_HOST_TV_CONNECTED,({scanTvDeviceId:w,ticketCode:R})=>{localStorage.setItem("ticketCode",R),d({ticketCode:R,scanTvDeviceId:w})})})}connectEventHandlers(){var i,l,d,p,w,R;(i=this.hubConnection)==null||i.on($s.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.on($s.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.on($s.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),(p=this.hubConnection)==null||p.on($s.SETUP_STATUS_UPDATE,this.onSetupStatusUpdate.bind(this)),(w=this.hubConnection)==null||w.onclose(g=>{g?console.error("SignalR: closed with error",g):console.log("SignalR: closed")}),(R=this.hubConnection)==null||R.onreconnected(g=>{g?console.error("SignalR: Reconnected error",g):console.log("SignalR: Reconnected")})}async destroy(){var i,l,d;console.log("destroy"),(i=this.hubConnection)==null||i.off($s.STATE_UPDATE,this.onStateUpdate.bind(this)),(l=this.hubConnection)==null||l.off($s.RECIEVE_GROUP_COMMAND,this.onReceiveGroupCommand.bind(this)),(d=this.hubConnection)==null||d.off($s.RECIEVE_GLOBAL_COMMAND,this.onReceiveGlobalCommand.bind(this)),await this.disconnect(),super.destroy()}onReceiveGroupCommand(i){var l,d,p,w,R;switch(console.log("onReceiveGroupCommand",i),i.command){case"play":this.emit("startTimeUpdated",{startTime:new Date(i.value.startDate)}),((l=i.value.rateClockState)==null?void 0:l.rate)===0?this.emit("pausePlayStream",{command:"pause",reference:(d=i.value.rateClockState)==null?void 0:d.reference,start:(p=i.value.rateClockState)==null?void 0:p.start}):this.emit("pausePlayStream",{command:"play",reference:(w=i.value.rateClockState)==null?void 0:w.reference,start:(R=i.value.rateClockState)==null?void 0:R.start});break;case"cast":this.emit("cast",{index:i.value});break;case"prepareCast":this.emit("prepareCast",{index:i.value});break;case"cancelCast":console.log("cancelCast");break}}onReceiveGlobalCommand(i){switch(console.log("onReceiveGlobalCommand",i),i.command){case"status_changed":this.emit("eventStatusChanged",void 0);break;case"event_canceled":this.emit("eventCanceled",void 0);break}}async sendGroupCommand(i){var l;return await((l=this.hubConnection)==null?void 0:l.invoke("sendGroupCommand",{groupName:this.groupName,arguments:[i]}))}onStateUpdate(i){switch(this.state=i.state.$type,i.state.$type){case XI.CONNECTED_STATE:if(!i.state.sessionId)return;this.emit("connected",{sessionId:i.state.sessionId}),this.emit("stateUpdated",{state:this.state});return;default:this.emit("stateUpdated",{state:this.state});break}}onSetupStatusUpdate(i){console.log("SetupStatusUpdate: ",i),this.emit("setupStatusUpdate",{deviceLists:i})}}async function Sh(o,i,l){var d;try{const p=await fetch(o,i);switch(p.status){case 401:throw new ng(l==null?void 0:l.name,"Unauthorized","Unauthorized",p.status);case 403:throw new ng(l==null?void 0:l.name,"Forbidden","Forbidden",p.status)}const w=await p.json();if(!p.ok)throw new ng(l==null?void 0:l.name,(d=w.sys)==null?void 0:d.id,w.message,p.status);return w}catch(p){throw p instanceof ng?p:new ng(l.name,"Network Error",l.message||"Could not make the request")}}var QI={exports:{}};(function(o,i){(function(l,d){var p="1.0.38",w="",R="?",g="function",A="undefined",U="object",C="string",y="major",v="model",D="name",m="type",T="vendor",F="version",N="architecture",_="console",I="mobile",b="tablet",j="smarttv",Y="wearable",$="embedded",W=500,ue="Amazon",x="Apple",X="ASUS",fe="BlackBerry",oe="Browser",ge="Chrome",Re="Edge",Je="Firefox",Se="Google",Be="Huawei",ot="LG",st="Microsoft",Ie="Motorola",Ye="Opera",mt="Samsung",Me="Sharp",We="Sony",rt="Xiaomi",qt="Zebra",kt="Facebook",ft="Chromium OS",At="Mac OS",Ce=function(dt,Et){var Tt={};for(var Rt in dt)Et[Rt]&&Et[Rt].length%2===0?Tt[Rt]=Et[Rt].concat(dt[Rt]):Tt[Rt]=dt[Rt];return Tt},re=function(dt){for(var Et={},Tt=0;Tt<dt.length;Tt++)Et[dt[Tt].toUpperCase()]=dt[Tt];return Et},je=function(dt,Et){return typeof dt===C?O(Et).indexOf(O(dt))!==-1:!1},O=function(dt){return dt.toLowerCase()},M=function(dt){return typeof dt===C?dt.replace(/[^\d\.]/g,w).split(".")[0]:d},q=function(dt,Et){if(typeof dt===C)return dt=dt.replace(/^\s\s*/,w),typeof Et===A?dt:dt.substring(0,W)},K=function(dt,Et){for(var Tt=0,Rt,hn,Qt,nn,Ot,Un;Tt<Et.length&&!Ot;){var gr=Et[Tt],Or=Et[Tt+1];for(Rt=hn=0;Rt<gr.length&&!Ot&&gr[Rt];)if(Ot=gr[Rt++].exec(dt),Ot)for(Qt=0;Qt<Or.length;Qt++)Un=Ot[++hn],nn=Or[Qt],typeof nn===U&&nn.length>0?nn.length===2?typeof nn[1]==g?this[nn[0]]=nn[1].call(this,Un):this[nn[0]]=nn[1]:nn.length===3?typeof nn[1]===g&&!(nn[1].exec&&nn[1].test)?this[nn[0]]=Un?nn[1].call(this,Un,nn[2]):d:this[nn[0]]=Un?Un.replace(nn[1],nn[2]):d:nn.length===4&&(this[nn[0]]=Un?nn[3].call(this,Un.replace(nn[1],nn[2])):d):this[nn]=Un||d;Tt+=2}},_e=function(dt,Et){for(var Tt in Et)if(typeof Et[Tt]===U&&Et[Tt].length>0){for(var Rt=0;Rt<Et[Tt].length;Rt++)if(je(Et[Tt][Rt],dt))return Tt===R?d:Tt}else if(je(Et[Tt],dt))return Tt===R?d:Tt;return dt},de={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},St={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[F,[D,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[F,[D,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[D,F],[/opios[\/ ]+([\w\.]+)/i],[F,[D,Ye+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[F,[D,Ye+" GX"]],[/\bopr\/([\w\.]+)/i],[F,[D,Ye]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[F,[D,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[D,F],[/\bddg\/([\w\.]+)/i],[F,[D,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[F,[D,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[F,[D,"WeChat"]],[/konqueror\/([\w\.]+)/i],[F,[D,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[F,[D,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[F,[D,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[F,[D,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[D,/(.+)/,"$1 Secure "+oe],F],[/\bfocus\/([\w\.]+)/i],[F,[D,Je+" Focus"]],[/\bopt\/([\w\.]+)/i],[F,[D,Ye+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[F,[D,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[F,[D,"Dolphin"]],[/coast\/([\w\.]+)/i],[F,[D,Ye+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[F,[D,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[F,[D,Je]],[/\bqihu|(qi?ho?o?|360)browser/i],[[D,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[D,/(.+)/,"$1 "+oe],F],[/samsungbrowser\/([\w\.]+)/i],[F,[D,mt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[D,/_/g," "],F],[/metasr[\/ ]?([\d\.]+)/i],[F,[D,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[D,"Sogou Mobile"],F],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[D,F],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[D],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[D,kt],F],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[D,F],[/\bgsa\/([\w\.]+) .*safari\//i],[F,[D,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[F,[D,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[F,[D,ge+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[D,ge+" WebView"],F],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[F,[D,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[D,F],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[F,[D,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[F,D],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[D,[F,_e,de]],[/(webkit|khtml)\/([\w\.]+)/i],[D,F],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[D,"Netscape"],F],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[F,[D,Je+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[D,F],[/(cobalt)\/([\w\.]+)/i],[D,[F,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[N,"amd64"]],[/(ia32(?=;))/i],[[N,O]],[/((?:i[346]|x)86)[;\)]/i],[[N,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[N,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[N,"armhf"]],[/windows (ce|mobile); ppc;/i],[[N,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[N,/ower/,w,O]],[/(sun4\w)[;\)]/i],[[N,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[N,O]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[T,mt],[m,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[T,mt],[m,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[v,[T,x],[m,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[T,x],[m,b]],[/(macintosh);/i],[v,[T,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[T,Me],[m,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[T,Be],[m,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[v,[T,Be],[m,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[T,rt],[m,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[T,rt],[m,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[T,"OPPO"],[m,I]],[/\b(opd2\d{3}a?) bui/i],[v,[T,"OPPO"],[m,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[T,"Vivo"],[m,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[v,[T,"Realme"],[m,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[T,Ie],[m,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[T,Ie],[m,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[T,ot],[m,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[T,ot],[m,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[T,"Lenovo"],[m,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[T,"Nokia"],[m,I]],[/(pixel c)\b/i],[v,[T,Se],[m,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[T,Se],[m,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[T,We],[m,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[T,We],[m,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[T,"OnePlus"],[m,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[T,ue],[m,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[T,ue],[m,I]],[/(playbook);[-\w\),; ]+(rim)/i],[v,T,[m,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[T,fe],[m,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[T,X],[m,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[T,X],[m,I]],[/(nexus 9)/i],[v,[T,"HTC"],[m,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[v,/_/g," "],[m,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[T,"Acer"],[m,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[T,"Meizu"],[m,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[v,[T,"Ulefone"],[m,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,v,[m,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,v,[m,b]],[/(surface duo)/i],[v,[T,st],[m,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[T,"Fairphone"],[m,I]],[/(u304aa)/i],[v,[T,"AT&T"],[m,I]],[/\bsie-(\w*)/i],[v,[T,"Siemens"],[m,I]],[/\b(rct\w+) b/i],[v,[T,"RCA"],[m,b]],[/\b(venue[\d ]{2,7}) b/i],[v,[T,"Dell"],[m,b]],[/\b(q(?:mv|ta)\w+) b/i],[v,[T,"Verizon"],[m,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[T,"Barnes & Noble"],[m,b]],[/\b(tm\d{3}\w+) b/i],[v,[T,"NuVision"],[m,b]],[/\b(k88) b/i],[v,[T,"ZTE"],[m,b]],[/\b(nx\d{3}j) b/i],[v,[T,"ZTE"],[m,I]],[/\b(gen\d{3}) b.+49h/i],[v,[T,"Swiss"],[m,I]],[/\b(zur\d{3}) b/i],[v,[T,"Swiss"],[m,b]],[/\b((zeki)?tb.*\b) b/i],[v,[T,"Zeki"],[m,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],v,[m,b]],[/\b(ns-?\w{0,9}) b/i],[v,[T,"Insignia"],[m,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[T,"NextBook"],[m,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],v,[m,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],v,[m,I]],[/\b(ph-1) /i],[v,[T,"Essential"],[m,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[T,"Envizen"],[m,b]],[/\b(trio[-\w\. ]+) b/i],[v,[T,"MachSpeed"],[m,b]],[/\btu_(1491) b/i],[v,[T,"Rotor"],[m,b]],[/(shield[\w ]+) b/i],[v,[T,"Nvidia"],[m,b]],[/(sprint) (\w+)/i],[T,v,[m,I]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[T,st],[m,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[T,qt],[m,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[T,qt],[m,I]],[/smart-tv.+(samsung)/i],[T,[m,j]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[T,mt],[m,j]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,ot],[m,j]],[/(apple) ?tv/i],[T,[v,x+" TV"],[m,j]],[/crkey/i],[[v,ge+"cast"],[T,Se],[m,j]],[/droid.+aft(\w+)( bui|\))/i],[v,[T,ue],[m,j]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[v,[T,Me],[m,j]],[/(bravia[\w ]+)( bui|\))/i],[v,[T,We],[m,j]],[/(mitv-\w{5}) bui/i],[v,[T,rt],[m,j]],[/Hbbtv.*(technisat) (.*);/i],[T,v,[m,j]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,q],[v,q],[m,j]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,j]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,v,[m,_]],[/droid.+; (shield) bui/i],[v,[T,"Nvidia"],[m,_]],[/(playstation [345portablevi]+)/i],[v,[T,We],[m,_]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[T,st],[m,_]],[/((pebble))app/i],[T,v,[m,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[v,[T,x],[m,Y]],[/droid.+; (glass) \d/i],[v,[T,Se],[m,Y]],[/droid.+; (wt63?0{2,3})\)/i],[v,[T,qt],[m,Y]],[/(quest( \d| pro)?)/i],[v,[T,kt],[m,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[m,$]],[/(aeobc)\b/i],[v,[T,ue],[m,$]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[v,[m,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[m,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,I]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[F,[D,Re+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[F,[D,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[D,F],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[F,D]],os:[[/microsoft (windows) (vista|xp)/i],[D,F],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[D,[F,_e,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[F,_e,Ke],[D,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[F,/_/g,"."],[D,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[D,At],[F,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[F,D],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[D,F],[/\(bb(10);/i],[F,[D,fe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[F,[D,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[F,[D,Je+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[F,[D,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[F,[D,"watchOS"]],[/crkey\/([\d\.]+)/i],[F,[D,ge+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[D,ft],F],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[D,F],[/(sunos) ?([\w\.\d]*)/i],[[D,"Solaris"],F],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[D,F]]},ut=function(dt,Et){if(typeof dt===U&&(Et=dt,dt=d),!(this instanceof ut))return new ut(dt,Et).getResult();var Tt=typeof l!==A&&l.navigator?l.navigator:d,Rt=dt||(Tt&&Tt.userAgent?Tt.userAgent:w),hn=Tt&&Tt.userAgentData?Tt.userAgentData:d,Qt=Et?Ce(St,Et):St,nn=Tt&&Tt.userAgent==Rt;return this.getBrowser=function(){var Ot={};return Ot[D]=d,Ot[F]=d,K.call(Ot,Rt,Qt.browser),Ot[y]=M(Ot[F]),nn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==g&&(Ot[D]="Brave"),Ot},this.getCPU=function(){var Ot={};return Ot[N]=d,K.call(Ot,Rt,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[T]=d,Ot[v]=d,Ot[m]=d,K.call(Ot,Rt,Qt.device),nn&&!Ot[m]&&hn&&hn.mobile&&(Ot[m]=I),nn&&Ot[v]=="Macintosh"&&Tt&&typeof Tt.standalone!==A&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ot[v]="iPad",Ot[m]=b),Ot},this.getEngine=function(){var Ot={};return Ot[D]=d,Ot[F]=d,K.call(Ot,Rt,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[D]=d,Ot[F]=d,K.call(Ot,Rt,Qt.os),nn&&!Ot[D]&&hn&&hn.platform&&hn.platform!="Unknown"&&(Ot[D]=hn.platform.replace(/chrome os/i,ft).replace(/macos/i,At)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Rt},this.setUA=function(Ot){return Rt=typeof Ot===C&&Ot.length>W?q(Ot,W):Ot,this},this.setUA(Rt),this};ut.VERSION=p,ut.BROWSER=re([D,F,y]),ut.CPU=re([N]),ut.DEVICE=re([v,T,m,_,I,j,b,Y,$]),ut.ENGINE=ut.OS=re([D,F]),o.exports&&(i=o.exports=ut),i.UAParser=ut;var at=typeof l!==A&&(l.jQuery||l.Zepto);if(at&&!at.ua){var tt=new ut;at.ua=tt.getResult(),at.ua.get=function(){return tt.getUA()},at.ua.set=function(dt){tt.setUA(dt);var Et=tt.getResult();for(var Tt in Et)at.ua[Tt]=Et[Tt]}}})(typeof window=="object"?window:tu)})(QI,QI.exports);var mV=QI.exports;const Vk=new mV.UAParser;function vV(o){const i=Vk.getOS(),l=Vk.getBrowser();return"Gigset/".concat(o," (").concat(i.name," ").concat(i.version,"; ").concat(l.name," ").concat(l.version,")")}function qg({sessionId:o,appVersion:i,apiVersion:l}){const d={"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*","Gigset-Client":vV(i),"Api-version":l!=null?l:"v1"};return o&&(d.Session=o),d}async function yV({deviceId:o,appVersion:i,baseUrl:l}){const d={deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(o,")"),deviceId:o};return(await Sh)("".concat(l,"/devicehub-api/negotiate-tv"),{method:"POST",body:JSON.stringify(d),headers:qg({appVersion:i})},{name:_a.NEGOTIATE_TV,message:"could not fetch negotiate-tv data"})}async function EV({deviceId:o,ticketCode:i,scanTvDeviceId:l,appVersion:d,baseUrl:p,ticketPrefix:w}){let R=p;w&&(R="".concat(p));const g={ticketCode:i,deviceOsVersion:window.navigator.userAgent,deviceName:"".concat(window.navigator.platform," (").concat(o,")"),deviceId:o,scanTvDeviceId:l};return(await Sh)("".concat(R,"/devicehub-api/negotiate"),{method:"POST",body:JSON.stringify(g),headers:qg({appVersion:d})},{name:_a.NEGOTIATE,message:"could not fetch negotiate data"})}async function zk({sessionId:o,appVersion:i,baseUrl:l,ticketPrefix:d,ticketCode:p}){let w=l;d&&(w="".concat(l,"/").concat(d));const R=await Sh("".concat(w,"/timeline-api/timeline/").concat(p,"/generate"),{method:"GET",headers:qg({sessionId:o,appVersion:i})},{name:_a.GENERATE,message:"could not fetch generate data"});return{...await fetch("".concat(R.timelineUrl).concat(R.queryParameters),{method:"GET",headers:qg({sessionId:o,appVersion:i})}).then(async A=>await A.json()),queryParameters:R.queryParameters,distributionUrl:R.distributionUrl}}async function Yk({sessionId:o,appVersion:i,baseUrl:l,ticketCode:d}){return(await Sh)("".concat(l,"/static-api/event/").concat(d,"/status"),{method:"GET",headers:qg({sessionId:o,appVersion:i})},{name:_a.EVENT_STATUS,message:"failed to get event status data"})}function _V(o){return"".concat(o,"/timeline-api/drm/license?drm=widevine")}var tf=(o=>(o.JUMPSPOT="jumpspot",o.FOLLOW="follow",o))(tf||{});function AC(o){return[...o.places.flatMap((i,l)=>i.jumpSpots.map(d=>({camera:d.camera,title:d.title,type:"jumpspot",placeIndex:l,mapPosition:i.mapPosition,mapScale:i.mapScale,placeTitle:i.title}))),...o.follows.map(i=>({camera:i.camera,title:i.title,type:"follow",mapPosition:i.mapPositions}))].map((i,l)=>({...i,index:l}))}function uE(o,i){return AC(o).filter(d=>{const p=mi(d.camera.span.time,o.frameRate),w=mi(d.camera.span.time,o.frameRate)+mi(d.camera.span.duration,o.frameRate);return p<=i&&w>=i})}function EU(o,i,l,d){const p=uE(o,i+l+2);if(!p.length)return;if(d){const g=(d==null?void 0:d.placeIndex)!==void 0&&p.find(A=>A.type==="jumpspot"&&A.placeIndex===(d==null?void 0:d.placeIndex));if(g)return g}const w=p.find(g=>g.type==="jumpspot");if(w)return w;const R=p.find(g=>g.type==="follow");if(R)return R}function TV(o){const i=AC(o),l=o.frameRate;return i.sort((d,p)=>{const w=mi(d.camera.span.time,l)+mi(d.camera.span.duration,l);return mi(p.camera.span.time,l)+mi(p.camera.span.duration,l)-w}),i[0]}function mi(o,i){if(!o)return 0;const[l,d,p,w]=o.split(":").map(Number),R=l*60*60,g=d*60;if(i){const A=w/i;return R+g+p+A}else return R+g+p}function JI(o,i,l){return uE(i,l.getExpectedPositionInSeconds()).find(d=>d.index===o)}function eb(o,i){return AC(i).find(d=>d.camera.cameraID===o)}const SV=o=>{if(typeof o=="string")return"String!";if(typeof o=="number")return"Int";if(typeof o=="boolean")return"Boolean";if(typeof o=="object"&&"OR"in o)return"ResourceSetFilter";throw new Error("Unknown type: ".concat(typeof o))};function _U(o,i,l){const d=o.includes("staging")||o.includes("qa"),p={...l,preview:d},R=(Array.isArray(i)?i[0]:i).replace(/#.*/g,"").replace(/\\n/g," ").replace(/\s\s+/g," ").replace(/\s*({|}|\(|\)|\.|:|,)\s*/g,"$1"),g=Object.entries(p).map(([U,C])=>"$".concat(U,": ").concat(SV(C))).join(", "),A="query(".concat(g,")").concat(R);return JSON.stringify({query:A,variables:p})}const TU=o=>"https://graphql.contentful.com/content/v1/spaces/".concat(o,"/environments/master");function SU(o,i){return{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:o}}const wV=(o,i)=>_U(i,"\n        {\n          eventCollection(\n            limit: 1\n            preview: $preview\n            where: { ticketCodePrefix: $ticketCodePrefix }\n          ) {\n            items {\n              title\n              timeZoneInSecondsFromGmt\n              timeZoneCode\n              preScreen {\n                showTitle\n                countdownTitle\n                startTimeSubtitle\n                logoutButtonTitle\n                setupGuideButtonTitle\n                backgroundLandscape {\n                  url\n                }\n                backgroundPortrait {\n                  url\n                }\n                logoLeft {\n                  url\n                }\n                logoRight {\n                  url\n                }\n              }\n              upsell {\n                title\n                web {\n                  title\n                  body\n                  image {\n                    url\n                  }\n                  linkTitle\n                  link\n                  upsellLink {\n                    label\n                    url\n                  }\n                }\n              }\n              postScreen {\n                title\n                body\n                logoutButtonTitle\n                scanQrCodeLabel\n                offersCollection(limit: 10) {\n                  items {\n                    link\n                    image {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      ",{preview:!0,ticketCodePrefix:o});async function Wk(o,i,l,d){var R,g;const p=wV(o.toUpperCase(),i),w=await Sh(TU(d),SU(p,l),{name:_a.EVENT_META,message:"Could not fetch event meta."});return(g=(R=w==null?void 0:w.data)==null?void 0:R.eventCollection.items)==null?void 0:g[0]}function AV(o,i){const l=o.reduce((d,p)=>(d.OR.push({slug:p}),d),{OR:[]});return _U(i,"\n        {\n          resourceSetCollection(preview: $preview, where: $resourceSetFilter) {\n            items {\n              slug\n              resourcesCollection {\n                items {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      ",{resourceSetFilter:l})}async function IV(o,i,l){var w,R;const d=AV(["app-general","player","setup-guide","setup","ticket-entry","web-requirements","web-app-pair"],o);return(R=(w=(await Sh(TU(l),SU(d,i),{name:_a.CONTENTFUL,message:"Could not fetch contentful data."})).data)==null?void 0:w.resourceSetCollection)==null?void 0:R.items}const $k=.4,Xk=.2;class bV{constructor(){switch(this._algorithmArray=[l=>{const d=this._videoElement;if(d){const p=l-d.currentTime-this._offset+.14;if((p>Xk||p<-Xk)&&!this._switchingInProgress)if(this._switchingInProgress=!0,setTimeout(()=>{this._switchingInProgress=!1},2e3),p>1)d.currentTime=d.currentTime+p+1.8;else{const w=p/2;d.playbackRate=Math.sign(p)===1?2:.5,setTimeout(()=>{d.playbackRate=1},Math.abs(w)*2200)}}},l=>{if(this._videoElement&&!this._switchingInProgress){const d=this._videoElement,p=l-d.currentTime-this._offset+.9;(p>$k||p<-$k)&&!this._switchingInProgress&&(this._switchingInProgress=!0,d.currentTime=d.currentTime+p,setTimeout(()=>{this._switchingInProgress=!1},3e3))}}],this._offset=0,this._switchingInProgress=!1,EC()){case lc.TIZEN:this._algorithm=0;break;case lc.WEBOS:this._algorithm=1;break;default:this._algorithm=0;break}}connectMediaElement(i,l=0){this._videoElement=i,this._offset=l}disconnectMedia(){this._videoElement=null,this._offset=0}sync(i){this._algorithmArray[this._algorithm](i)}destroy(){}}class CV extends wf{constructor(i){super(),this.isPaused=!1,this.playheadOffset=0,this.timelineFetchBuffer=3e5,this.prepareBuffer=1e4,this.playerSyncer=new bV,this.state="idle",this.startTime=i,this.serverTimeOffset=0}get adjustedStartTime(){return this.startTime.getTime()?this.startTime.getTime()+this.serverTimeOffset:0}get isLive(){const i=this.adjustedEndTime;return this.adjustedStartTime&&this.adjustedStartTime<Date.now()&&i&&i>Date.now()}get timeToPrepareStart(){return this.adjustedStartTime-Date.now()-this.prepareBuffer}get isInPrepare(){return this.timeToPrepareStart<0&&this.timeToPrepareStart>this.prepareBuffer*-1}get adjustedEndTime(){if(!this.adjustedStartTime||!this._timelineData)return 0;const i=this._timelineData.frameRate,l=TV(this._timelineData);return this.adjustedStartTime+(mi(l.camera.span.time,i)+mi(l.camera.span.duration,i))*1e3+this.playheadOffset*1e3}get demoEndtime(){return Date.now()-7047966+1e4}set timelineData(i){this._timelineData=i}pausePlayStream(i,l,d){if(i==="pause"&&!this.isPaused)this.isPaused=!0;else if(i==="play"){if(l&&d){const p=new Date(l).getTime()/1e3,w=new Date(d).getTime()/1e3;this.playheadOffset!==0&&(this.playheadOffset=0),this.playheadOffset=p-w}this.onStart()}}serverNow(){return Date.now()-this.serverTimeOffset}onStart(){console.log("> on start"),this.state="started",this.emit("start",void 0),this.isPaused=!1,clearInterval(this.queryInterval),this.queryInterval=setInterval(()=>{const i=this.getExpectedPositionInSeconds();this.isPaused||this.playerSyncer.sync(i)},500)}onPrepareStart(){this.emit("prepareStart",void 0)}updateStartTime(i,l=!1){console.log("update start time",i),this.startTime=i,this.emit("startTimeUpdated",void 0),console.log("> prepare #2"),this.preparePlayback(),l&&this.adjustedStartTime>Date.now()&&this.updateTimelineFetch()}updateTimelineFetch(){console.log("updateTimelineFetch"),this.adjustedStartTime-this.timelineFetchBuffer>Date.now()?(console.log("#here"),clearTimeout(this.fetchTimelineTimeout),this.fetchTimelineTimeout=setTimeout(()=>{this.emit("fetchTimeline",void 0)},this.adjustedStartTime-this.timelineFetchBuffer-Date.now())):this.emit("fetchTimeline",void 0)}preparePlayback(){console.log("preparePlayback",this.adjustedStartTime),console.log("this._timelineData",this._timelineData),this.adjustedStartTime>Date.now()?(console.log("preparePlayback",this.adjustedStartTime,Date.now()),clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),this.playheadOffset=0,console.log("this.adjustedStartTime - Date.now()",this.adjustedStartTime-Date.now()),this.startTimeout=setTimeout(()=>{this.onStart()},this.adjustedStartTime-Date.now()),this.timeToPrepareStart>0?this.prepareStartTimeout=setTimeout(()=>{this.onPrepareStart()},this.timeToPrepareStart):this.onPrepareStart()):this.adjustedStartTime<Date.now()&&this.state!=="started"?(console.log("> go to live"),this.emit("fetchTimeline",void 0),this.onStart()):this.state!=="started"&&this._timelineData&&this.onStart()}updateServerTimeOffset(i){console.log(">>> updateServerTimeOffset",i),this.serverTimeOffset=i,this.emit("startTimeUpdated",void 0),this.state!=="started"&&this.preparePlayback()}getExpectedPositionInSeconds(){return(Date.now()-this.adjustedStartTime)/1e3-this.playheadOffset}destroy(){clearTimeout(this.startTimeout),clearTimeout(this.prepareStartTimeout),clearInterval(this.queryInterval),clearTimeout(this.fetchTimelineTimeout),super.destroy()}}class RV extends wf{constructor(i,l,d){super(),this.eventClock=i,this.timelineData=void 0,this.nearEndThreshold=l!=null?l:0,this.transitionThreshold=d!=null?d:2}updateTimelineData(i){this.timelineData=i}updatePlaying(i){var d,p,w;let l=!1;if(this.timelineData){const R=this.timelineData.frameRate,g=(w=(p=(d=i.camera.attentions)==null?void 0:d.filter(A=>A.scope==="global"))==null?void 0:p.sort((A,U)=>mi(A.time)-mi(U.time)))!=null?w:[];clearInterval(this.playbackInterval),this.playbackInterval=setInterval(()=>{clearTimeout(this.nearEndTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.attentionTimeout);const U=this.eventClock.getExpectedPositionInSeconds()-mi(i.camera.span.time,R),C=mi(i.camera.span.duration,R)-U;if(g.length){const y=g.find(D=>U<mi(D.time)),v=y?mi(y.time)-U:0;v>0&&v<1&&(this.attentionTimeout=setTimeout(()=>{this.emit("attention",void 0)},v))}C<=this.nearEndThreshold+1&&C>this.nearEndThreshold&&!l?this.nearEndTimeout=setTimeout(()=>{this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0},(C-this.nearEndThreshold)*1e3):C<this.nearEndThreshold&&!l&&(this.emit("nearEnd",{remainingTime:this.nearEndThreshold}),l=!0),C<=this.transitionThreshold+1&&C>this.transitionThreshold&&(this.transitionTimeout=setTimeout(()=>{this.emit("transition",void 0)},(C-this.transitionThreshold)*1e3)),C<=1&&C>0&&(this.endedTimeout=setTimeout(()=>{this.emit("ended",void 0)},C*1e3))},1e3)}}endEvent(){this.emit("eventEnded",void 0)}destroy(){clearInterval(this.playbackInterval),clearTimeout(this.nearEndTimeout),clearTimeout(this.endedTimeout),clearTimeout(this.transitionTimeout),clearTimeout(this.attentionTimeout),super.destroy()}}const xV="1.0.0";var gn=j0();const ru=pb(gn);function NV({baseUrl:o,contentfulAccessToken:i,contentfulSpaceId:l}){const[d,p]=gn.useState(),[w,R]=gn.useState(),g=gn.useCallback((A,U)=>{var C,y;return d&&((y=(C=d.find(v=>v.slug===A))==null?void 0:C.resourcesCollection.items.find(v=>v.key===U))==null?void 0:y.value)||""},[d]);return gn.useEffect(()=>{o&&i&&l&&(R(void 0),IV(o,i,l).then(A=>{p(A)}).catch(A=>{R(A)}))},[o,i,l]),{contentfulData:d,getContentfulValue:g,error:w}}const MV={ticketCode:"",preferredProfile:"dash-drm",getContentfulValue:()=>"",isDev:!1,preConnectErrors:[],postConnectErrors:[]},ea=ru.createContext(MV);function DV({children:o,baseUrl:i,preferredProfile:l,contentfulAccessToken:d,contentfulSpaceId:p,newSetupToggle:w=!1,ticketCodeProp:R}){const g=wg(),A=xV,[U,C]=gn.useState(),[y,v]=gn.useState(),[D,m]=gn.useState(),[T,F]=gn.useState(),[N,_]=gn.useState(),[I,b]=gn.useState(),[j,Y]=gn.useState(R),[$,W]=gn.useState(),[ue,x]=gn.useState(),[X,fe]=gn.useState(),[oe,ge]=gn.useState(),[Re,Je]=gn.useState(),[Se,Be]=gn.useState([]),[ot,st]=gn.useState([]),[Ie,Ye]=gn.useState(!1),[mt,Me]=gn.useState(),{getContentfulValue:We,error:rt}=NV({baseUrl:i,contentfulAccessToken:d,contentfulSpaceId:p}),qt=3;function kt(ft,At){return At.filter(Ce=>ft!==Ce.name)}return gn.useEffect(()=>{Be(rt?ft=>[...ft,rt]:ft=>kt(_a.CONTENTFUL,ft))},[rt]),gn.useEffect(()=>{Y(R)},[R]),gn.useEffect(()=>{i&&g&&w&&(async()=>{let At=0;const Ce=()=>yV({deviceId:g,appVersion:A,baseUrl:i});for(;At<qt;)await Ce().then(re=>{Je(re),At=qt}).catch(re=>{At+=1,At===2&&console.error(re)})})()},[A,i,g,w]),gn.useEffect(()=>{if(!Re)return;const ft=new gV({deviceId:g,debug:!1});F(ft),ft==null||ft.globalConnect(Re).then(({ticketCode:At,scanTvDeviceId:Ce})=>{Y(At),W(Ce)}),setTimeout(()=>{localStorage.getItem("ticketCode")&&(Y(localStorage.getItem("ticketCode")),W("DEVICE_ID"))},500)},[Re]),gn.useEffect(()=>{!j||!$||!(T!=null&&T.globalHubConnection)||T.globalDisconnect()},[j,$,T==null?void 0:T.globalHubConnection]),gn.useEffect(()=>{if(!j||!$&&w){ge(void 0);return}const ft=j[0];Be(At=>kt(_a.NEGOTIATE,At)),EV({deviceId:g,deviceType:6,appVersion:A,ticketCode:j,scanTvDeviceId:$,ticketPrefix:ft,baseUrl:i}).then(At=>{ge(At),Ye(At.ticketType>3)}).catch(At=>{Be(Ce=>[...Ce,At])})},[j,A,i,g,$,w]),gn.useEffect(()=>{if(!(oe!=null&&oe.accessToken)||!oe.url||!j)return;const ft=new CV(new Date(0)),At=new RV(ft);return T==null||T.connect({url:oe.url,accessToken:oe.accessToken,groupName:j}),T==null||T.on("setupStatusUpdate",({deviceLists:Ce})=>{var M;const re=(M=Ce.connectedDevices[0])==null?void 0:M.sessionId;Me(Ce.connectedDevices),console.log("signalRClient `setupStatusUpdate` connected with sessionId: ",re),_(re),st(q=>kt(_a.EVENT_STATUS,q));const je=()=>{Yk({appVersion:A,baseUrl:i,ticketCode:j,sessionId:re}).then(q=>{if(console.log("eventStatus",q),v(q),q.broadcastStart)if(Ie){const K=new Date;K.setMinutes(K.getMinutes()+30),ft.updateStartTime(K,!0)}else ft.updateStartTime(new Date(q.broadcastStart),!0)}).catch(q=>{st(K=>[...K,q])})};je(),T.on("eventStatusChanged",je),Wk(j[0],i,d,p).then(q=>{m(q)}).catch(q=>{st(K=>[...K,q])}),st(q=>kt(_a.GENERATE,q));const O=()=>{console.log("# get timeline"),zk({sessionId:re,appVersion:A,baseUrl:i,ticketCode:j}).then(q=>{ft.timelineData=q,C(q),At.updateTimelineData(q)}).catch(q=>{st(K=>[...K,q])})};ft.on("fetchTimeline",O)}),T==null||T.on("stateUpdated",({state:Ce})=>{console.log(Ce,"stateUpdate"),b(Ce)}),T==null||T.on("serverTimeOffsetUpdate",({serverTimeOffset:Ce})=>{console.log("signalRClient: server time offset updated",Ce),ft.updateServerTimeOffset(Ce)}),T==null||T.on("startTimeUpdated",({startTime:Ce})=>{console.log("signalRClient: `startTimeUpdated`",Ce),ft.updateStartTime(Ce,!0)}),T==null||T.on("connected",({sessionId:Ce})=>{console.log("signalRClient: `connected` with sessionId: ",Ce),_(Ce),st(O=>kt(_a.EVENT_STATUS,O));const re=()=>{Yk({appVersion:A,baseUrl:i,ticketCode:j,sessionId:Ce}).then(O=>{if(v(O),O.broadcastStart)if(Ie){const M=new Date;M.setHours(M.getHours()+1),ft.updateStartTime(M,!0)}else ft.updateStartTime(new Date(O.broadcastStart),!0)}).catch(O=>{st(M=>[...M,O])})};re(),T.on("eventStatusChanged",re),Wk(j[0],i,d,p).then(O=>{m(O)}).catch(O=>{st(M=>[...M,O])}),st(O=>kt(_a.GENERATE,O));const je=()=>{zk({sessionId:Ce,appVersion:A,baseUrl:i,ticketCode:j}).then(O=>{ft.timelineData=O,C(O),At.updateTimelineData(O)}).catch(O=>{st(M=>[...M,O])})};ft.on("fetchTimeline",je)}),x(ft),fe(At),()=>{b(void 0),Me(void 0),T==null||T.destroy(),At.destroy(),ft.destroy()}},[oe,j,A,i,g,d,p,Ie]),It.jsx(ea.Provider,{value:{signalRClient:T,timelineData:U,eventStatus:y,eventMeta:D,hubState:I,sessionId:N,ticketCode:j,eventClock:ue,orchestrator:X,preferredProfile:l,baseUrl:i,negotiateData:oe,isDev:Ie,getContentfulValue:We,preConnectErrors:Se,postConnectErrors:ot,connectedDevices:mt},children:o})}const PV="_focused_tk4zu_1",OV={focused:PV};function jo({selfFocus:o,...i}){const{ref:l,focused:d,focusSelf:p}=gU.useFocusable({onEnterPress:()=>{i.onClick()}});return gn.useEffect(()=>{o&&p()},[p,o]),It.jsx("button",{...i,ref:l,className:"".concat(i.className||""," ").concat(d?OV.focused:""," ").concat(d&&i.focusstile?i.focusstile:"")})}function Af(){return gn.useContext(ea).signalRClient}function If(){return gn.useContext(ea).timelineData}function IC(){return gn.useContext(ea).eventMeta}function LV(){return gn.useContext(ea).hubState}function kV(){return gn.useContext(ea).sessionId}function FV(){return gn.useContext(ea).ticketCode?[0]:null}function su(){return gn.useContext(ea).eventClock}function UV(){return gn.useContext(ea).negotiateData}function bC(){return gn.useContext(ea).isDev}function BV(){return gn.useContext(ea).getContentfulValue}function jV(){return gn.useContext(ea).preConnectErrors}function ZV(){return gn.useContext(ea).postConnectErrors}function tm(){return gn.useContext(ea).orchestrator}function CC(){return gn.useContext(ea).connectedDevices}function wU(){const o=If(),i=FV(),l=gn.useContext(ea);return gn.useMemo(()=>[o==null?void 0:o.profiles.find(d=>d.name===l.preferredProfile),l.preferredProfile==="dash-drm"&&l.baseUrl?_V(l.baseUrl):void 0,o==null?void 0:o.queryParameters],[l.preferredProfile,i,o,l.baseUrl])}const GV=()=>It.jsx("svg",{width:"800px",height:"800px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:It.jsx("path",{d:"M36.96875 0C36.417969 0.015625 35.988281 0.480469 36 1.03125C36.011719 1.578125 36.457031 2 37 2L37.03125 2C37.160156 1.984375 40.671875 1.984375 44.28125 5.6875C47.914063 9.410156 48 12.96875 48 13C48 13.550781 48.445313 14 49 14C49.554688 14 50 13.550781 50 13C50 12.824219 49.953125 8.65625 45.71875 4.3125C41.457031 -0.0546875 37.164063 -0.0117188 36.96875 0 Z M 37 6C36.453125 6 36.007813 6.453125 36 7C35.992188 7.546875 36.453125 7.988281 37 8C37.066406 8 38.628906 8.066406 40.28125 9.71875C41.933594 11.371094 42 12.945313 42 13C42 13.550781 42.445313 14 43 14C43.554688 14 44 13.550781 44 13C44 12.902344 43.984375 10.546875 41.71875 8.28125C39.453125 6.015625 37.097656 6 37 6 Z M 28.71875 6.03125C27.644531 6.027344 26.539063 6.402344 25.6875 7.1875L1.1875 31.78125C-0.40625 33.375 -0.417969 35.984375 1.1875 37.71875L12.40625 48.90625C13.175781 49.675781 14.199219 50.09375 15.3125 50.09375C16.410156 50.09375 17.46875 49.683594 18.3125 48.90625L42.84375 24.34375C44.371094 22.558594 44.371094 19.964844 42.8125 18.40625L31.59375 7.1875C30.828125 6.421875 29.792969 6.035156 28.71875 6.03125 Z M 28 15C31.867188 15 35 18.132813 35 22C35 25.867188 31.867188 29 28 29C24.132813 29 21 25.867188 21 22C21 18.132813 24.132813 15 28 15 Z M 28 20C26.894531 20 26 20.894531 26 22C26 23.105469 26.894531 24 28 24C29.105469 24 30 23.105469 30 22C30 20.894531 29.105469 20 28 20 Z M 15 27C16.105469 27 17 27.894531 17 29C17 30.105469 16.105469 31 15 31C13.894531 31 13 30.105469 13 29C13 27.894531 13.894531 27 15 27 Z M 10 32C11.105469 32 12 32.894531 12 34C12 35.105469 11.105469 36 10 36C8.894531 36 8 35.105469 8 34C8 32.894531 8.894531 32 10 32 Z M 21 33C22.105469 33 23 33.894531 23 35C23 36.105469 22.105469 37 21 37C19.894531 37 19 36.105469 19 35C19 33.894531 19.894531 33 21 33 Z M 16 38C17.105469 38 18 38.894531 18 40C18 41.105469 17.105469 42 16 42C14.894531 42 14 41.105469 14 40C14 38.894531 14.894531 38 16 38Z"})});function qV(){const o=Af(),i=su(),l=gn.useCallback(R=>{!i||!o||o.sendGroupCommand({command:"play",value:{senderID:wg(),startDate:new Date(i.startTime.getTime()-R).toISOString(),rateClockState:{rate:1}}})},[o,i]),d=gn.useCallback(R=>{!i||!o||o.sendGroupCommand({command:"play",value:{senderID:wg(),startDate:new Date(i.serverNow()-R).toISOString(),rateClockState:{rate:1}}})},[o,i]),p=gn.useCallback(()=>{if(!i||!o)return;const R=new Date;R.setSeconds(R.getSeconds()+5),o.sendGroupCommand({command:"play",value:{senderID:wg(),startDate:new Date(R).toISOString(),rateClockState:{rate:1}}})},[o,i]);return{seekBy:l,seekTo:d,disconnect:()=>{o==null||o.disconnect()},restart:p}}function HV({eventPlayer:o}){var T,F;const i=Af(),l=su(),[d,p]=gn.useState(!1),[w,R]=gn.useState(),{seekBy:g,seekTo:A,disconnect:U,restart:C}=qV(),[y,v]=gn.useState([]),D=If(),m=()=>{p(!d)};return gn.useEffect(()=>{if(!l||!D)return;const N=setInterval(()=>{const _=l.getExpectedPositionInSeconds(),I=uE(D,_);v(I.map(b=>b)),R({expectedPosition:_})},500);return()=>{clearInterval(N)}},[l,D]),It.jsxs("div",{className:"demo-remote-container",children:[It.jsx("div",{className:"icon-wrapper",onClick:m,children:It.jsx(GV,{})}),d&&It.jsxs(It.Fragment,{children:[It.jsx("h2",{children:"Demo Remote"}),It.jsx(jo,{selfFocus:!0,onClick:()=>{o==null||o.requestFullscreen()},children:"Go to fullscreen"}),w&&It.jsx("div",{children:It.jsxs("p",{children:["Expected position in seconds"," ",w.expectedPosition.toFixed(2)]})}),It.jsx(jo,{onClick:()=>{A(-5e3)},children:"Start in 5 sec"}),It.jsx(jo,{onClick:()=>{C()},children:"Restart"}),It.jsx(jo,{onClick:()=>{g(1e4)},children:"Seek Forward"}),It.jsx(jo,{onClick:()=>{g(-1e4)},children:"Seek Backward"}),It.jsx(jo,{onClick:()=>{A(1e4)},children:"Seek to first video"}),It.jsx(jo,{onClick:()=>{A(1e5)},children:"Seek to 100"}),It.jsx(jo,{onClick:U,children:"Disconnect"}),It.jsx("h3",{children:"Available streams right now:"}),y.map(N=>It.jsxs("div",{className:"cast-button-group",children:[It.jsxs(jo,{onClick:()=>{i==null||i.sendGroupCommand({command:"cast",value:N.index})},children:[It.jsx("span",{style:{margin:"10px"},children:"►"}),N.title]}),It.jsxs(jo,{onClick:()=>{i==null||i.sendGroupCommand({command:"prepareCast",value:N.index})},children:[It.jsx("span",{style:{margin:"10px"},children:"►"}),"prepare cast"]}),It.jsxs(jo,{onClick:()=>{i==null||i.sendGroupCommand({command:"cancelCast",value:N.index})},children:[It.jsx("span",{style:{margin:"10px"},children:"►"}),"cancel cast"]})]},N.camera.assetName)),It.jsx("h3",{children:"Statistics:"}),It.jsxs("div",{className:"statistics-block",children:[It.jsx("label",{children:"Total frames:"}),It.jsx("div",{children:((T=o==null?void 0:o.stats)==null?void 0:T.totalVideoFrames)||0})]}),It.jsxs("div",{className:"statistics-block",children:[It.jsx("label",{children:"Dropped frames:"}),It.jsx("div",{children:((F=o==null?void 0:o.stats)==null?void 0:F.droppedVideoFrames)||0})]})]})]})}var AU={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */(function(o,i){(function(l,d){o.exports=d()})(self,function(){return function(){var l={4593:function(R,g){var A,U,C,y,v,D=function(F){for(var N=[],_=0;_<F.length;++_){var I=F.charCodeAt(_);I<128?N.push(I):I<2048?(N.push(192|I>>6),N.push(128|63&I)):I<65536?(N.push(224|I>>12),N.push(128|63&I>>6),N.push(128|63&I)):(N.push(240|I>>18),N.push(128|63&I>>12),N.push(128|63&I>>6),N.push(128|63&I))}return N},m=function(F){for(var N=[],_=0;_<F.length;){var I=F[_++];I<128||(I<224?(I=(31&I)<<6,I|=63&F[_++]):I<240?(I=(15&I)<<12,I|=(63&F[_++])<<6,I|=63&F[_++]):(I=(7&I)<<18,I|=(63&F[_++])<<12,I|=(63&F[_++])<<6,I|=63&F[_++])),N.push(String.fromCharCode(I))}return N.join("")},T={};A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=function(F){for(var N=0,_=[],I=0|F.length/3;0<I--;){var b=(F[N]<<16)+(F[N+1]<<8)+F[N+2];N+=3,_.push(A.charAt(63&b>>18)),_.push(A.charAt(63&b>>12)),_.push(A.charAt(63&b>>6)),_.push(A.charAt(63&b))}return F.length-N==2?(b=(F[N]<<16)+(F[N+1]<<8),_.push(A.charAt(63&b>>18)),_.push(A.charAt(63&b>>12)),_.push(A.charAt(63&b>>6)),_.push("=")):F.length-N==1&&(b=F[N]<<16,_.push(A.charAt(63&b>>18)),_.push(A.charAt(63&b>>12)),_.push("==")),_.join("")},C=function(){for(var F=[],N=0;N<A.length;++N)F[A.charCodeAt(N)]=N;return F[61]=0,F}(),y=function(F){for(var N=0,_=[],I=0|F.length/4;0<I--;){var b=(C[F.charCodeAt(N)]<<18)+(C[F.charCodeAt(N+1)]<<12)+(C[F.charCodeAt(N+2)]<<6)+C[F.charCodeAt(N+3)];_.push(255&b>>16),_.push(255&b>>8),_.push(255&b),N+=4}return _&&(F.charAt(N-2)=="="?(_.pop(),_.pop()):F.charAt(N-1)=="="&&_.pop()),_},v={encode:function(F){for(var N=[],_=0;_<F.length;++_)N.push(F.charCodeAt(_));return N},decode:function(F){for(var N=0;N<s.length;++N)a[N]=String.fromCharCode(a[N]);return a.join("")}},T.decodeArray=function(F){var N=y(F);return new Uint8Array(N)},T.encodeASCII=function(F){var N=v.encode(F);return U(N)},T.decodeASCII=function(F){var N=y(F);return v.decode(N)},T.encode=function(F){var N=D(F);return U(N)},T.decode=function(F){var N=y(F);return m(N)},g.decode=T.decode,g.decodeArray=T.decodeArray,g.encode=T.encode,g.encodeASCII=T.encodeASCII},452:function(R,g){(function(A){var U={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},C=function(x){var X=x;return U.hasOwnProperty(x)&&(X=U[x]),String.fromCharCode(X)},y=15,v=32,D={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},m={17:2,18:4,21:6,22:8,23:10,19:13,20:15},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},F={25:2,26:4,29:6,30:8,31:10,27:13,28:15},N=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(x){this.time=x},log:function(x,X){var fe=this.verboseFilter[x];this.verboseLevel>=fe&&console.log(this.time+" ["+x+"] "+X)}},I=function(x){for(var X=[],fe=0;fe<x.length;fe++)X.push(x[fe].toString(16));return X},b=function(x,X,fe,oe,ge){this.foreground=x||"white",this.underline=X||!1,this.italics=fe||!1,this.background=oe||"black",this.flash=ge||!1};b.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(x){for(var X=["foreground","underline","italics","background","flash"],fe=0;fe<X.length;fe++){var oe=X[fe];x.hasOwnProperty(oe)&&(this[oe]=x[oe])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(x){return this.foreground===x.foreground&&this.underline===x.underline&&this.italics===x.italics&&this.background===x.background&&this.flash===x.flash},copy:function(x){this.foreground=x.foreground,this.underline=x.underline,this.italics=x.italics,this.background=x.background,this.flash=x.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var j=function(x,X,fe,oe,ge,Re){this.uchar=x||" ",this.penState=new b(X,fe,oe,ge,Re)};j.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(x,X){this.uchar=x,this.penState.copy(X)},setPenState:function(x){this.penState.copy(x)},equals:function(x){return this.uchar===x.uchar&&this.penState.equals(x.penState)},copy:function(x){this.uchar=x.uchar,this.penState.copy(x.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var Y=function(){this.chars=[];for(var x=0;x<v;x++)this.chars.push(new j);this.pos=0,this.currPenState=new b};Y.prototype={equals:function(x){for(var X=!0,fe=0;fe<v;fe++)if(!this.chars[fe].equals(x.chars[fe])){X=!1;break}return X},copy:function(x){for(var X=0;X<v;X++)this.chars[X].copy(x.chars[X])},isEmpty:function(){for(var x=!0,X=0;X<v;X++)if(!this.chars[X].isEmpty()){x=!1;break}return x},setCursor:function(x){this.pos!==x&&(this.pos=x),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>v&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=v)},moveCursor:function(x){var X=this.pos+x;if(x>1)for(var fe=this.pos+1;fe<X+1;fe++)this.chars[fe].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(x){x>=144&&this.backSpace();var X=C(x);this.pos>=v?_.log("ERROR","Cannot insert "+x.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(x){var X;for(X=x;X<v;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var x=[],X=!0,fe=0;fe<v;fe++){var oe=this.chars[fe].uchar;oe!==" "&&(X=!1),x.push(oe)}return X?"":x.join("")},setPenStyles:function(x){this.currPenState.setStyles(x),this.chars[this.pos].setPenState(this.currPenState)}};var $=function(){this.rows=[];for(var x=0;x<y;x++)this.rows.push(new Y);this.currRow=14,this.nrRollUpRows=null,this.reset()};$.prototype={reset:function(){for(var x=0;x<y;x++)this.rows[x].clear();this.currRow=14},equals:function(x){for(var X=!0,fe=0;fe<y;fe++)if(!this.rows[fe].equals(x.rows[fe])){X=!1;break}return X},copy:function(x){for(var X=0;X<y;X++)this.rows[X].copy(x.rows[X])},isEmpty:function(){for(var x=!0,X=0;X<y;X++)if(!this.rows[X].isEmpty()){x=!1;break}return x},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(x){this.rows[this.currRow].insertChar(x)},setPen:function(x){this.rows[this.currRow].setPenStyles(x)},moveCursor:function(x){this.rows[this.currRow].moveCursor(x)},setCursor:function(x){_.log("INFO","setCursor: "+x),this.rows[this.currRow].setCursor(x)},setPAC:function(x){_.log("INFO","pacData = "+JSON.stringify(x));var X=x.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var fe=this.rows[this.currRow];if(x.indent!==null){var oe=x.indent,ge=Math.max(oe-1,0);fe.setCursor(x.indent),x.color=fe.chars[ge].penState.foreground}var Re={foreground:x.color,underline:x.underline,italics:x.italics,background:"black",flash:!1};this.setPen(Re)},setBkgData:function(x){_.log("INFO","bkgData = "+JSON.stringify(x)),this.backSpace(),this.setPen(x),this.insertChar(32)},setRollUpRows:function(x){this.nrRollUpRows=x},rollUp:function(){if(this.nrRollUpRows!==null){_.log("TEXT",this.getDisplayText());var x=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(x,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(x){x=x||!1;for(var X=[],fe="",oe=-1,ge=0;ge<y;ge++){var Re=this.rows[ge].getTextString();Re&&(oe=ge+1,x?X.push("Row "+oe+': "'+Re+'"'):X.push(Re.trim()))}return X.length>0&&(fe=x?"["+X.join(" | ")+"]":X.join("\n")),fe},getTextAndFormat:function(){return this.rows}};var W=function(x,X){this.chNr=x,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new $,this.nonDisplayedMemory=new $,this.lastOutputScreen=new $,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};W.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(x){this.outputFilter=x},setPAC:function(x){this.writeScreen.setPAC(x)},setBkgData:function(x){this.writeScreen.setBkgData(x)},setMode:function(x){x!==this.mode&&(this.mode=x,_.log("INFO","MODE="+x),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=x)},insertChars:function(x){for(var X=0;X<x.length;X++)this.writeScreen.insertChar(x[X]);var fe=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";_.log("INFO",fe+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(x){_.log("INFO","RU("+x+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(x)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var x=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=x,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(x){_.log("INFO","TO("+x+") - Tab Offset"),this.writeScreen.moveCursor(x)},cc_MIDROW:function(x){var X={flash:!1};if(X.underline=x%2==1,X.italics=x>=46,X.italics)X.foreground="white";else{var fe=Math.floor(x/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][fe]}_.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var x=_.time;x!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(x,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:x):this.cueStartTime=x,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(x){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,x,this.displayedMemory),this.cueStartTime=x))}};var ue=function(x,X,fe){this.field=x||1,this.outputs=[X,fe],this.channels=[new W(1,X),new W(2,fe)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};ue.prototype={getHandler:function(x){return this.channels[x].getHandler()},setHandler:function(x,X){this.channels[x].setHandler(X)},addData:function(x,X){var fe,oe,ge,Re=!1;this.lastTime=x,_.setTime(x);for(var Je=0;Je<X.length;Je+=2)oe=127&X[Je],ge=127&X[Je+1],oe>=16&&oe<=31&&oe===this.lastCmdA&&ge===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+I([oe,ge])+") is dropped")):oe!==0||ge!==0?(_.log("DATA","["+I([X[Je],X[Je+1]])+"] -> ("+I([oe,ge])+")"),(fe=this.parseCmd(oe,ge))||(fe=this.parseMidrow(oe,ge)),fe||(fe=this.parsePAC(oe,ge)),fe||(fe=this.parseBackgroundAttributes(oe,ge)),fe||(Re=this.parseChars(oe,ge))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Re):_.log("WARNING","No channel found yet. TEXT-MODE?")),fe?this.dataCounters.cmd+=2:Re?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+I([oe,ge])+" orig: "+I([X[Je],X[Je+1]])))):this.dataCounters.padding+=2},parseCmd:function(x,X){var fe;if(!((x===20||x===21||x===28||x===29)&&32<=X&&X<=47||(x===23||x===31)&&33<=X&&X<=35))return!1;fe=x===20||x===21||x===23?1:2;var oe=this.channels[fe-1];return x===20||x===21||x===28||x===29?X===32?oe.cc_RCL():X===33?oe.cc_BS():X===34?oe.cc_AOF():X===35?oe.cc_AON():X===36?oe.cc_DER():X===37?oe.cc_RU(2):X===38?oe.cc_RU(3):X===39?oe.cc_RU(4):X===40?oe.cc_FON():X===41?oe.cc_RDC():X===42?oe.cc_TR():X===43?oe.cc_RTD():X===44?oe.cc_EDM():X===45?oe.cc_CR():X===46?oe.cc_ENM():X===47&&oe.cc_EOC():oe.cc_TO(X-32),this.lastCmdA=x,this.lastCmdB=X,this.currChNr=fe,!0},parseMidrow:function(x,X){var fe=null;if((x===17||x===25)&&32<=X&&X<=47){if((fe=x===17?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var oe=this.channels[fe-1];return oe.insertChars([32]),oe.cc_MIDROW(X),_.log("DEBUG","MIDROW ("+I([x,X])+")"),this.lastCmdA=x,this.lastCmdB=X,!0}return!1},parsePAC:function(x,X){var fe,oe;if(!((17<=x&&x<=23||25<=x&&x<=31)&&64<=X&&X<=127||(x===16||x===24)&&64<=X&&X<=95))return!1;fe=x<=23?1:2,oe=64<=X&&X<=95?fe===1?D[x]:T[x]:fe===1?m[x]:F[x];var ge=this.interpretPAC(oe,X);return this.channels[fe-1].setPAC(ge),this.lastCmdA=x,this.lastCmdB=X,this.currChNr=fe,!0},interpretPAC:function(x,X){var fe,oe={color:null,italics:!1,indent:null,underline:!1,row:x};return fe=X>95?X-96:X-64,oe.underline=(1&fe)==1,fe<=13?oe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(fe/2)]:fe<=15?(oe.italics=!0,oe.color="white"):oe.indent=4*Math.floor((fe-16)/2),oe},parseChars:function(x,X){var fe=null,oe=null,ge=null;if(x>=25?(fe=2,ge=x-8):(fe=1,ge=x),17<=ge&&ge<=19){var Re;Re=ge===17?X+80:ge===18?X+112:X+144,_.log("INFO","Special char '"+C(Re)+"' in channel "+fe),oe=[Re],this.lastCmdA=x,this.lastCmdB=X}else 32<=x&&x<=127&&(oe=X===0?[x]:[x,X],this.lastCmdA=null,this.lastCmdB=null);if(oe){var Je=I(oe);_.log("DEBUG","Char codes =  "+Je.join(","))}return oe},parseBackgroundAttributes:function(x,X){var fe,oe,ge;return((x===16||x===24)&&32<=X&&X<=47||(x===23||x===31)&&45<=X&&X<=47)&&(fe={},x===16||x===24?(oe=Math.floor((X-32)/2),fe.background=N[oe],X%2==1&&(fe.background=fe.background+"_semi")):X===45?fe.background="transparent":(fe.foreground="black",X===47&&(fe.underline=!0)),ge=x<24?1:2,this.channels[ge-1].setBkgData(fe),this.lastCmdA=x,this.lastCmdB=X,!0)},reset:function(){for(var x=0;x<this.channels.length;x++)this.channels[x]&&this.channels[x].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(x){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(x)}},A.logger=_,A.PenState=b,A.CaptionScreen=$,A.Cea608Parser=ue,A.findCea608Nalus=function(x,X,fe){for(var oe=0,ge=X,Re=[],Je=function(Ie,Ye,mt,Me){if(Ie!==4||Ye<8)return null;var We=mt.getUint8(Me),rt=mt.getUint16(Me+1),qt=mt.getUint32(Me+3),kt=mt.getUint8(Me+7);return We==181&&rt==49&&qt==1195456820&&kt==3};ge<X+fe;){if(oe=x.getUint32(ge),(31&x.getUint8(ge+4))==6)for(var Se=ge+5,Be=-1;Se<ge+4+oe-1;){Be=0;for(var ot=255;ot===255;)Be+=ot=x.getUint8(Se),Se++;var st=0;for(ot=255;ot===255;)st+=ot=x.getUint8(Se),Se++;Je(Be,st,x,Se)&&Re.push([Se,st]),Se+=st}ge+=oe+4}return Re},A.extractCea608DataFromRange=function(x,X){var fe=X[0],oe=[[],[]];fe+=8;var ge=31&x.getUint8(fe);fe+=2;for(var Re=0;Re<ge;Re++){var Je=x.getUint8(fe),Se=4&Je,Be=3&Je;fe++;var ot=x.getUint8(fe);fe++;var st=x.getUint8(fe);fe++,Se&&(127&ot)+(127&st)!=0&&(Be===0?(oe[0].push(ot),oe[0].push(st)):Be===1&&(oe[1].push(ot),oe[1].push(st)))}return oe}})(g)},8416:function(R,g,A){var U=A(1139),C=A(5448),y=A(6398),v=A(2032),D=(A(5530),typeof window<"u"&&window||A.g),m=D.dashjs;m||(m=D.dashjs={}),m.MediaPlayer=U.Z,m.FactoryMaker=C.Z,m.Debug=y.Z,m.Version=(0,v.e)()},6398:function(R,g,A){var U=A(5595),C=A(8512),y=A(5448),v=1,D=2,m=3,T=4,F=5;function N(I){I=I||{};var b,j,Y,$,W=this.context,ue=(0,U.Z)(W).getInstance(),x=I.settings,X=[];function fe(ot){return ot&&ot.bind?ot.bind(window.console):window.console.log.bind(window.console)}function oe(){for(var ot=arguments.length,st=new Array(ot),Ie=0;Ie<ot;Ie++)st[Ie]=arguments[Ie];Be.apply(void 0,[v,this].concat(st))}function ge(){for(var ot=arguments.length,st=new Array(ot),Ie=0;Ie<ot;Ie++)st[Ie]=arguments[Ie];Be.apply(void 0,[D,this].concat(st))}function Re(){for(var ot=arguments.length,st=new Array(ot),Ie=0;Ie<ot;Ie++)st[Ie]=arguments[Ie];Be.apply(void 0,[m,this].concat(st))}function Je(){for(var ot=arguments.length,st=new Array(ot),Ie=0;Ie<ot;Ie++)st[Ie]=arguments[Ie];Be.apply(void 0,[T,this].concat(st))}function Se(){for(var ot=arguments.length,st=new Array(ot),Ie=0;Ie<ot;Ie++)st[Ie]=arguments[Ie];Be.apply(void 0,[F,this].concat(st))}function Be(ot,st){var Ie="",Ye=null;j&&(Ye=new Date().getTime(),Ie+="["+(Ye-$)+"]"),Y&&st&&st.getClassName&&(Ie+="["+st.getClassName()+"]",st.getType&&(Ie+="["+st.getType()+"]")),Ie.length>0&&(Ie+=" ");for(var mt=arguments.length,Me=new Array(mt>2?mt-2:0),We=2;We<mt;We++)Me[We-2]=arguments[We];Array.apply(null,Me).forEach(function(rt){Ie+=rt+" "}),X[ot]&&x&&x.get().debug.logLevel>=ot&&X[ot](Ie),x&&x.get().debug.dispatchEvent&&ue.trigger(C.Z.LOG,{message:Ie,level:ot})}return b={getLogger:function(ot){return{fatal:oe.bind(ot),error:ge.bind(ot),warn:Re.bind(ot),info:Je.bind(ot),debug:Se.bind(ot)}},setLogTimestampVisible:function(ot){j=ot},setCalleeNameVisible:function(ot){Y=ot}},j=!0,Y=!0,$=new Date().getTime(),typeof window<"u"&&window.console&&(X[v]=fe(window.console.error),X[D]=fe(window.console.error),X[m]=fe(window.console.warn),X[T]=fe(window.console.info),X[F]=fe(window.console.debug)),b}N.__dashjs_factory_name="Debug";var _=y.Z.getSingletonFactory(N);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=v,_.LOG_LEVEL_ERROR=D,_.LOG_LEVEL_WARNING=m,_.LOG_LEVEL_INFO=T,_.LOG_LEVEL_DEBUG=F,y.Z.updateSingletonFactory(N.__dashjs_factory_name,_),g.Z=_},5595:function(R,g,A){var U=A(5448),C=A(8825);function y(){var D={};function m(F,N,_){var I=-1;return D[F]&&D[F].some(function(b,j){if(b&&b.callback===N&&(!_||_===b.scope))return I=j,!0}),I}var T={on:function(F,N,_){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!F)throw new Error("event type cannot be null or undefined");if(!N||typeof N!="function")throw new Error("listener must be a function: "+N);var b=I.priority||0;if(!(m(F,N,_)>=0)){D[F]=D[F]||[];var j={callback:N,scope:_,priority:b};_&&_.getStreamId&&(j.streamId=_.getStreamId()),_&&_.getType&&(j.mediaType=_.getType()),I&&I.mode&&(j.mode=I.mode);var Y=D[F].some(function($,W){if($&&b>$.priority)return D[F].splice(W,0,j),!0});Y||D[F].push(j)}},off:function(F,N,_){if(F&&N&&D[F]){var I=m(F,N,_);I<0||(D[F][I]=null)}},trigger:function(F){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(F&&D[F]){if((N=N||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");N.type=F,_.streamId&&(N.streamId=_.streamId),_.mediaType&&(N.mediaType=_.mediaType),D[F].filter(function(I){return!(!I||_.streamId&&I.streamId&&I.streamId!==_.streamId||_.mediaType&&I.mediaType&&I.mediaType!==_.mediaType||_.mode&&I.mode&&I.mode!==_.mode||!I.mode&&_.mode&&_.mode===C.Z.EVENT_MODE_ON_RECEIVE)}).forEach(function(I){return I&&I.callback.call(I.scope,N)})}},reset:function(){D={}}};return T}y.__dashjs_factory_name="EventBus";var v=U.Z.getSingletonFactory(y);v.EVENT_PRIORITY_LOW=0,v.EVENT_PRIORITY_HIGH=5e3,U.Z.updateSingletonFactory(y.__dashjs_factory_name,v),g.Z=v},5448:function(R,g){var A=function(){var U,C=[],y={},v={};function D(N,_){for(var I in C){var b=C[I];if(b.context===N&&b.name===_)return b.instance}return null}function m(N,_){return _[N]}function T(N,_,I){N in I&&(I[N]=_)}function F(N,_,I){var b,j=N.__dashjs_factory_name,Y=_[j];if(Y){var $=Y.instance;if(!Y.override)return $.apply({context:_,factory:U},I);for(var W in b=N.apply({context:_},I),$=$.apply({context:_,factory:U,parent:b},I))b.hasOwnProperty(W)&&(b[W]=$[W])}else b=N.apply({context:_},I);return b.getClassName=function(){return j},b}return U={extend:function(N,_,I,b){!b[N]&&_&&(b[N]={instance:_,override:I})},getSingletonInstance:D,setSingletonInstance:function(N,_,I){for(var b in C){var j=C[b];if(j.context===N&&j.name===_)return void(C[b].instance=I)}C.push({name:_,context:N,instance:I})},deleteSingletonInstances:function(N){C=C.filter(function(_){return _.context!==N})},getSingletonFactory:function(N){var _=m(N.__dashjs_factory_name,y);return _||(_=function(I){var b;return I===void 0&&(I={}),{getInstance:function(){return b||(b=D(I,N.__dashjs_factory_name)),b||(b=F(N,I,arguments),C.push({name:N.__dashjs_factory_name,context:I,instance:b})),b}}},y[N.__dashjs_factory_name]=_),_},getSingletonFactoryByName:function(N){return m(N,y)},updateSingletonFactory:function(N,_){T(N,_,y)},getClassFactory:function(N){var _=m(N.__dashjs_factory_name,v);return _||(_=function(I){return I===void 0&&(I={}),{create:function(){return F(N,I,arguments)}}},v[N.__dashjs_factory_name]=_),_},getClassFactoryByName:function(N){return m(N,v)},updateClassFactory:function(N,_){T(N,_,v)}},U}();g.Z=A},1264:function(R,g,A){var U=A(5448),C=A(703),y=A(6398),v=A(3393),D=A(7855),m=A(5595),T=A(8512);function F(b){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},F(b)}function N(b,j,Y){return j in b?Object.defineProperty(b,j,{value:Y,enumerable:!0,configurable:!0,writable:!0}):b[j]=Y,b}function _(){var b,j,Y=this.context,$=(0,m.Z)(Y).getInstance(),W={"streaming.delay.liveDelay":T.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":T.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},ue={debug:{logLevel:y.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:v.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:v.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:v.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:v.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(b={},N(b,D.w.MPD_TYPE,500),N(b,D.w.XLINK_EXPANSION_TYPE,500),N(b,D.w.MEDIA_SEGMENT_TYPE,1e3),N(b,D.w.INIT_SEGMENT_TYPE,1e3),N(b,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),N(b,D.w.INDEX_SEGMENT_TYPE,1e3),N(b,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),N(b,D.w.LICENSE,1e3),N(b,D.w.OTHER_TYPE,1e3),N(b,"lowLatencyReductionFactor",10),b),retryAttempts:(j={},N(j,D.w.MPD_TYPE,3),N(j,D.w.XLINK_EXPANSION_TYPE,1),N(j,D.w.MEDIA_SEGMENT_TYPE,3),N(j,D.w.INIT_SEGMENT_TYPE,3),N(j,D.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),N(j,D.w.INDEX_SEGMENT_TYPE,3),N(j,D.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),N(j,D.w.LICENSE,3),N(j,D.w.OTHER_TYPE,3),N(j,"lowLatencyMultiplyFactor",5),j),abr:{movingAverageMethod:v.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:v.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:v.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:v.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},x=C.Z.clone(ue);function X(fe,oe,ge){for(var Re in fe)fe.hasOwnProperty(Re)&&(oe.hasOwnProperty(Re)?F(fe[Re])!=="object"||fe[Re]instanceof Array||fe[Re]===null?(oe[Re]=C.Z.clone(fe[Re]),W[ge+Re]&&$.trigger(W[ge+Re])):X(fe[Re],oe[Re],ge.slice()+Re+"."):console.error("Settings parameter "+ge+Re+" is not supported"))}return{get:function(){return x},update:function(fe){F(fe)==="object"&&X(fe,x,"")},reset:function(){x=C.Z.clone(ue)}}}_.__dashjs_factory_name="Settings";var I=U.Z.getSingletonFactory(_);g.Z=I},703:function(R,g,A){var U=A(3875),C=A.n(U),y=A(1067);function v(T){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},v(T)}function D(T,F){for(var N=0;N<F.length;N++){var _=F[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var m=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T)}var F,N;return F=T,N=[{key:"mixin",value:function(_,I,b){var j,Y={};if(_)for(var $ in I)I.hasOwnProperty($)&&(j=I[$],$ in _&&(_[$]===j||$ in Y&&Y[$]===j)||(v(_[$])==="object"&&_[$]!==null?_[$]=T.mixin(_[$],j,b):_[$]=b(j)));return _}},{key:"clone",value:function(_){if(!_||v(_)!=="object")return _;var I;if(_ instanceof Array){I=[];for(var b=0,j=_.length;b<j;++b)b in _&&I.push(T.clone(_[b]))}else I={};return T.mixin(I,_,T.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(_,I){try{if(!I||I.length===0)return _;var b=new URL(_);return I.forEach(function(j){j.key&&j.value&&b.searchParams.set(j.key,j.value)}),b.href}catch(j){return _}}},{key:"parseHttpHeaders",value:function(_){var I={};if(!_)return I;for(var b=_.trim().split("\r\n"),j=0,Y=b.length;j<Y;j++){var $=b[j],W=$.indexOf(": ");W>0&&(I[$.substring(0,W)]=$.substring(W+2))}return I}},{key:"generateUuid",value:function(){var _=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var b=(_+16*Math.random())%16|0;return _=Math.floor(_/16),(I=="x"?b:3&b|8).toString(16)})}},{key:"generateHashCode",value:function(_){var I=0;if(_.length===0)return I;for(var b=0;b<_.length;b++)I=(I<<5)-I+_.charCodeAt(b),I|=0;return I}},{key:"getRelativeUrl",value:function(_,I){try{var b=new URL(_),j=new URL(I);if(b.protocol=j.protocol,b.origin!==j.origin)return I;var Y=C().relative(b.pathname.substr(0,b.pathname.lastIndexOf("/")),j.pathname.substr(0,j.pathname.lastIndexOf("/"))),$=Y.length===0?1:0;return Y+=j.pathname.substr(j.pathname.lastIndexOf("/")+$,j.pathname.length-1),j.pathname.length<Y.length?j.pathname:Y}catch(W){return I}}},{key:"parseUserAgent",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var I=_===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,y.UAParser)(I)}catch(b){return{}}}},{key:"stringHasProtocol",value:function(_){return/(http(s?)):\/\//i.test(_)}}],N&&D(F,N),T}();g.Z=m},2032:function(R,g,A){function U(){return"4.7.4"}A.d(g,{e:function(){return U}})},2230:function(R,g){function A(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var y,v;return y=C,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,F=!!m&&m.publicOnly;for(var N in D)!D.hasOwnProperty(N)||this[N]&&!T||F&&D[N].indexOf("public_")===-1||(this[N]=D[N])}}}])&&A(y.prototype,v),C}();g.Z=U},4351:function(R,g,A){function U(m){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(m)}function C(m,T){return C=Object.setPrototypeOf||function(F,N){return F.__proto__=N,F},C(m,T)}function y(m,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=function(m){(function(I,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(b&&b.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),b&&C(I,b)})(_,m);var T,F,N=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,b=v(T);if(F){var j=v(this).constructor;I=Reflect.construct(b,arguments,j)}else I=b.apply(this,arguments);return y(this,I)});function _(){var I;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",I.BUFFERING_COMPLETED="bufferingCompleted",I.BUFFER_CLEARED="bufferCleared",I.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",I.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",I.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",I.CMSD_STATIC_HEADER="cmsdStaticHeader",I.CURRENT_TRACK_CHANGED="currentTrackChanged",I.DATA_UPDATE_COMPLETED="dataUpdateCompleted",I.INBAND_EVENTS="inbandEvents",I.INITIAL_STREAM_SWITCH="initialStreamSwitch",I.INIT_FRAGMENT_LOADED="initFragmentLoaded",I.INIT_FRAGMENT_NEEDED="initFragmentNeeded",I.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",I.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",I.LOADING_COMPLETED="loadingCompleted",I.LOADING_PROGRESS="loadingProgress",I.LOADING_DATA_PROGRESS="loadingDataProgress",I.LOADING_ABANDONED="loadingAborted",I.MANIFEST_UPDATED="manifestUpdated",I.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",I.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",I.QUOTA_EXCEEDED="quotaExceeded",I.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",I.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",I.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",I.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",I.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",I.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",I.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",I.SOURCE_BUFFER_ERROR="sourceBufferError",I.STREAMS_COMPOSED="streamsComposed",I.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",I.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",I.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",I.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",I.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",I.URL_RESOLUTION_FAILED="urlResolutionFailed",I.VIDEO_CHUNK_RECEIVED="videoChunkReceived",I.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",I.XLINK_ELEMENT_LOADED="xlinkElementLoaded",I.XLINK_READY="xlinkReady",I.SEEK_TARGET="seekTarget",I.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",I.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",I.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",I.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",I.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",I}return _}(A(8342).Z);g.Z=D},8512:function(R,g,A){function U(F){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},U(F)}function C(F,N){if(!(F instanceof N))throw new TypeError("Cannot call a class as a function")}function y(F,N){return y=Object.setPrototypeOf||function(_,I){return _.__proto__=I,_},y(F,N)}function v(F,N){return!N||U(N)!=="object"&&typeof N!="function"?function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(F):N}function D(F){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},D(F)}var m=function(F){(function(j,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Y&&Y.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Y&&y(j,Y)})(b,F);var N,_,I=(N=b,_=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(j){return!1}}(),function(){var j,Y=D(N);if(_){var $=D(this).constructor;j=Reflect.construct(Y,arguments,$)}else j=Y.apply(this,arguments);return v(this,j)});function b(){return C(this,b),I.apply(this,arguments)}return b}(A(4351).Z),T=new m;g.Z=T},8342:function(R,g){function A(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C)}var y,v;return y=C,(v=[{key:"extend",value:function(D,m){if(D){var T=!!m&&m.override,F=!!m&&m.publicOnly;for(var N in D)!D.hasOwnProperty(N)||this[N]&&!T||F&&D[N].indexOf("public_")===-1||(this[N]=D[N])}}}])&&A(y.prototype,v),C}();g.Z=U},9326:function(R,g,A){var U=A(3186),C=A(7855),y=A(5448),v=A(8825),D=A(7387),m=A(1553);function T(F){var N,_,I,b,j,Y=(F=F||{}).eventBus,$=F.debug,W=F.urlUtils,ue=F.type,x=F.streamInfo,X=F.segmentsController,fe=F.timelineConverter,oe=F.baseURLController;function ge(){return ue}function Re(){I=null}function Je(Ie,Ye,mt){var Me,We,rt=oe.resolve(mt.path),qt={};return rt&&Ye!==rt.url&&W.isRelative(Ye)?(Me=rt.url,We=rt.serviceLocation,qt=rt.queryParams,Ye&&(Me=W.resolve(Ye,Me))):Me=Ye,!W.isRelative(Me)&&(Ie.url=Me,Ie.serviceLocation=We,Ie.queryParams=qt,!0)}function Se(Ie,Ye){if(Ye==null)return null;var mt=new U.Z,Me=Ye.representation,We=Me.adaptation.period.mpd.manifest.Period_asArray[Me.adaptation.period.index].AdaptationSet_asArray[Me.adaptation.index].Representation_asArray[Me.index].bandwidth,rt=Ye.media;return rt=(0,D.vi)(rt,"Number",Ye.replacementNumber),rt=(0,D.vi)(rt,"Time",Ye.replacementTime),rt=(0,D.vi)(rt,"Bandwidth",We),rt=(0,D.Aj)(rt,Me.id),rt=(0,D.eR)(rt),mt.mediaType=ge(),mt.type=C.w.MEDIA_SEGMENT_TYPE,mt.range=Ye.mediaRange,mt.startTime=Ye.presentationStartTime,mt.mediaStartTime=Ye.mediaStartTime,mt.duration=Ye.duration,mt.timescale=Me.timescale,mt.availabilityStartTime=Ye.availabilityStartTime,mt.availabilityEndTime=Ye.availabilityEndTime,mt.availabilityTimeComplete=Me.availabilityTimeComplete,mt.wallStartTime=Ye.wallStartTime,mt.quality=Me.index,mt.index=Ye.index,mt.mediaInfo=Ie,mt.adaptationIndex=Me.adaptation.index,mt.representationId=Me.id,Je(mt,rt,Me)?mt:void 0}function Be(Ie,Ye,mt){var Me=null;if(!Ye||!Ye.segmentInfoType)return Me;var We=X.getSegmentByTime(Ye,mt);return We&&(I=We,_.debug("Index for time "+mt+" is "+We.index),Me=Se(Ie,We)),Me}function ot(Ie,Ye,mt){var Me=null,We=X.getSegmentByIndex(Ye,mt,I?I.mediaStartTime:-1);if(We)Me=Se(Ie,We),I=We;else{if(b&&!j)return _.debug(ge()+" No segment found at index: "+mt+". Wait for next loop"),null;j=!0}return Me}function st(){_.debug("Dynamic stream complete"),j=!0}return N={getCurrentIndex:function(){return I?I.index:-1},getInitRequest:function(Ie,Ye){return Ye?function(mt,Me,We){var rt=new U.Z,qt=Me.adaptation.period,kt=qt.start;if(rt.mediaType=We,rt.type=C.w.INIT_SEGMENT_TYPE,rt.range=Me.range,rt.availabilityStartTime=fe.calcAvailabilityStartTimeFromPresentationTime(kt,Me,b),rt.availabilityEndTime=fe.calcAvailabilityEndTimeFromPresentationTime(kt+qt.duration,Me,b),rt.quality=Me.index,rt.mediaInfo=mt,rt.representationId=Me.id,Je(rt,Me.initialization,Me))return rt.url=(0,D.vi)(rt.url,"Bandwidth",Me.bandwidth),rt}(Ie,Ye,ge()):null},getNextSegmentRequest:function(Ie,Ye){return Ye&&Ye.segmentInfoType?ot(Ie,Ye,I?I.index+1:0):null},getNextSegmentRequestIdempotent:function(Ie,Ye){var mt=I?I.index+1:0,Me=X.getSegmentByIndex(Ye,mt,I?I.mediaStartTime:-1);return Me?Se(Ie,Me):null},getSegmentRequestForTime:Be,getStreamId:function(){return x.id},getStreamInfo:function(){return x},getType:ge,getValidTimeAheadOfTargetTime:function(Ie,Ye,mt,Me){try{if(isNaN(Ie)||!Ye||!mt)return NaN;if(Ie<0&&(Ie=0),isNaN(Me)&&(Me=.5),Be(Ye,mt,Ie))return Ie;if(mt.adaptation.period.start+mt.adaptation.period.duration<Ie)return NaN;for(var We=isFinite(mt.adaptation.period.duration)?mt.adaptation.period.start+mt.adaptation.period.duration:Ie+30,rt=Math.min(Ie+Me,We),qt=NaN,kt=null;rt<=We;){var ft=null;if(rt<=We&&(ft=Be(Ye,mt,rt)),ft){qt=rt,kt=ft;break}rt+=Me}if(kt){var At=kt.startTime+kt.duration;return Ie>kt.startTime&&At-Ie>Me?Ie:!isNaN(kt.startTime)&&Ie<kt.startTime&&qt>kt.startTime?kt.startTime+.001:Math.min(At-Me,qt)}return qt}catch(Ce){return NaN}},initialize:function(Ie){b=Ie,j=!1,X.initialize(Ie)},isLastSegmentRequested:function(Ie,Ye){return!Ie||!I?!1:j?!0:!isFinite(Ie.adaptation.period.duration)||I.presentationStartTime+I.duration>Ye?!1:Ie.mediaFinishedInformation&&!isNaN(Ie.mediaFinishedInformation.numberOfSegments)&&!isNaN(I.index)&&I.index>=Ie.mediaFinishedInformation.numberOfSegments-1&&(!b||Ie.segmentInfoType===m.Z.SEGMENT_TEMPLATE||b&&Ie.segmentInfoType===m.Z.SEGMENT_LIST&&Ie.adaptation.period.nextPeriodId)?!0:!!(b&&Ie.adaptation.period.nextPeriodId&&Ie.segmentInfoType===m.Z.SEGMENT_TIMELINE&&Ie.mediaFinishedInformation&&!isNaN(Ie.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&I&&!isNaN(I.mediaStartTime)&&!isNaN(I.duration)&&I.mediaStartTime+I.duration>=Ie.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Ie,Ye){return Ye&&Ye.segmentInfoType?ot(Ie,Ye,I?I.index:0):null},reset:function(){Re(),Y.off(v.Z.DYNAMIC_TO_STATIC,st,N)}},_=$.getLogger(N),Re(),Y.on(v.Z.DYNAMIC_TO_STATIC,st,N),N}T.__dashjs_factory_name="DashHandler",g.Z=y.Z.getClassFactory(T)},1553:function(R,g){function A(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&A(y.prototype,v),C}());g.Z=U},7802:function(R,g,A){var U=A(5448),C=A(1724),y=A(3636),v=A(1736),D=A(5246);function m(F){F=F||{};var N,_,I=this.context,b=F.dashConstants,j=F.type,Y=F.segmentBaseController;function $(W){return W?W.segments?_[b.SEGMENT_BASE]:_[W.segmentInfoType]:null}return N={initialize:function(W){_[b.SEGMENT_TIMELINE]=(0,C.Z)(I).create(F,W),_[b.SEGMENT_TEMPLATE]=(0,y.Z)(I).create(F,W),_[b.SEGMENT_LIST]=(0,v.Z)(I).create(F,W),_[b.SEGMENT_BASE]=(0,D.Z)(I).create(F,W)},updateInitData:function(W,ue){return ue?Promise.resolve():Y.getSegmentBaseInitSegment({representation:W,mediaType:j})},updateSegmentData:function(W,ue){return ue?Promise.resolve():Y.getSegmentList({mimeType:W.mimeType,representation:W,mediaType:j})},getSegmentByIndex:function(W,ue,x){var X=$(W);return X?X.getSegmentByIndex(W,ue,x):null},getSegmentByTime:function(W,ue){var x=$(W);return x?x.getSegmentByTime(W,ue):null},getMediaFinishedInformation:function(W){var ue=$(W);return ue?ue.getMediaFinishedInformation(W):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},_={},N}m.__dashjs_factory_name="SegmentsController";var T=U.Z.getClassFactory(m);g.Z=T},1736:function(R,g,A){var U=A(5448),C=A(3393),y=A(7387);function v(m,T){var F=(m=m||{}).timelineConverter;function N(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,b){if(N(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=j.SegmentURL_asArray.length,$=I&&!isNaN(I.startNumber)?I.startNumber:1,W=Math.max($-1,0),ue=Math.max(b-W,0),x=null;if(ue<Y){var X=j.SegmentURL_asArray[ue];(x=(0,y.NF)(F,T,I,b))&&(x.replacementTime=($+b-1)*I.segmentDuration,x.media=X.media?X.media:"",x.mediaRange=X.mediaRange,x.indexRange=X.indexRange)}return x}return{getSegmentByIndex:_,getSegmentByTime:function(I,b){if(N(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var Y=F.calcPeriodRelativeTimeFromMpdRelativeTime(I,b);return _(I,Math.floor(Y/j))},getMediaFinishedInformation:function(I){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return b;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentList,Y=I&&!isNaN(I.startNumber)?I.startNumber:1,$=Math.max(Y-1,0);return b.numberOfSegments=$+j.SegmentURL_asArray.length,b}}}v.__dashjs_factory_name="ListSegmentsGetter";var D=U.Z.getClassFactory(v);g.Z=D},5246:function(R,g,A){var U=A(5448),C=A(3393);function y(D){var m=(D=D||{}).timelineConverter;function T(){if(!m||!m.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function F(N,_){if(T(),!N)return null;var I,b=N.segments?N.segments.length:-1;if(_<b&&(I=N.segments[_])&&I.index===_)return I;for(var j=0;j<b;j++)if((I=N.segments[j])&&I.index===_)return I;return null}return{getSegmentByIndex:F,getSegmentByTime:function(N,_){T();var I=function(b,j){if(!b)return-1;var Y,$,W,ue,x,X=b.segments,fe=X?X.length:null,oe=-1;if(X&&fe>0){for(x=0;x<fe;x++)if(W=($=X[x]).presentationStartTime,j+(Y=(ue=$.duration)/2)>=W&&j-Y<W+ue){oe=$.index;break}}return oe}(N,_);return F(N,I)},getMediaFinishedInformation:function(N){var _={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return N&&N.segments&&(_.numberOfSegments=N.segments.length),_}}}y.__dashjs_factory_name="SegmentBaseGetter";var v=U.Z.getClassFactory(y);g.Z=v},7387:function(R,g,A){A.d(g,{Aj:function(){return v},NF:function(){return F},TJ:function(){return N},eR:function(){return y},vi:function(){return D}});var U=A(2011);function C(_,I){for(;_.length<I;)_="0"+_;return _}function y(_){return _&&_.split("$$").join("$")}function v(_,I){if(!I||!_||_.indexOf("$RepresentationID$")===-1)return _;var b=I.toString();return _.split("$RepresentationID$").join(b)}function D(_,I,b){var j,Y,$,W,ue,x,X=I.length,fe=2;if(!_)return _;for(;;){if((j=_.indexOf("$"+I))<0||(Y=_.indexOf("$",j+X))<0)return _;if(($=_.indexOf("%0",j+X))>j&&$<Y)switch(W=_.charAt(Y-1),ue=parseInt(_.substring($+fe,Y-1),10),W){case"d":case"i":case"u":x=C(b.toString(),ue);break;case"x":x=C(b.toString(16),ue);break;case"X":x=C(b.toString(16),ue).toUpperCase();break;case"o":x=C(b.toString(8),ue);break;default:return _}else x=b;_=_.substring(0,j)+x+_.substring(Y+1)}}function m(_,I,b,j,Y,$,W,ue){var x,X=new U.Z;return X.representation=_,X.duration=I,X.presentationStartTime=b,X.mediaStartTime=j,X.availabilityStartTime=Y.calcAvailabilityStartTimeFromPresentationTime($,_,W),X.availabilityEndTime=Y.calcAvailabilityEndTimeFromPresentationTime($+I,_,W),X.wallStartTime=Y.calcWallTimeForSegment(X,W),X.replacementNumber=(x=ue,X.representation.startNumber+x),X.index=ue,X}function T(_,I,b,j){var Y=I.adaptation.period;if(isFinite(Y.duration)&&Y.start+Y.duration<=b.presentationStartTime)return!1;if(j){if(I.availabilityTimeOffset==="INF")return!0;var $=_.getClientReferenceTime();return b.availabilityStartTime.getTime()<=$&&(!isFinite(b.availabilityEndTime)||b.availabilityEndTime.getTime()>=$)}return!0}function F(_,I,b,j){var Y,$,W;Y=b.segmentDuration,isNaN(Y)&&(Y=b.adaptation.period.duration),$=parseFloat((b.adaptation.period.start+j*Y).toFixed(5)),W=parseFloat(($+Y).toFixed(5));var ue=m(b,Y,$,_.calcMediaTimeFromPresentationTime($,b),_,W,I,j);return T(_,b,ue,I)?ue:null}function N(_,I,b,j,Y,$,W,ue,x,X){var fe,oe,ge=j/$,Re=Y/$;return fe=_.calcPresentationTimeFromMediaTime(ge,b),T(_,b,oe=m(b,Re,fe,ge,_,fe+Re,I,x),I)?(oe.replacementTime=X||j,W=D(W,"Number",oe.replacementNumber),W=D(W,"Time",oe.replacementTime),oe.media=W,oe.mediaRange=ue,oe):null}},3636:function(R,g,A){var U=A(5448),C=A(3393),y=A(7387);function v(m,T){var F=(m=m||{}).timelineConverter;function N(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.Z.MISSING_CONFIG_ERROR)}function _(I,b){if(N(),!I)return null;var j=I.adaptation.period.mpd.manifest.Period_asArray[I.adaptation.period.index].AdaptationSet_asArray[I.adaptation.index].Representation_asArray[I.index].SegmentTemplate;b=Math.max(b,0);var Y=(0,y.NF)(F,T,I,b);if(Y){Y.replacementTime=Math.round((b-1)*I.segmentDuration*I.timescale,10);var $=j.media;$=(0,y.vi)($,"Number",Y.replacementNumber),$=(0,y.vi)($,"Time",Y.replacementTime),Y.media=$}return Y}return{getSegmentByIndex:_,getSegmentByTime:function(I,b){if(N(),!I)return null;var j=I.segmentDuration;if(isNaN(j))return null;var Y=F.calcPeriodRelativeTimeFromMpdRelativeTime(I,b);return _(I,Math.floor(Y/j))},getMediaFinishedInformation:function(I){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!I)return b;var j=I.segmentDuration;return isNaN(j)?b.numberOfSegments=1:b.numberOfSegments=Math.ceil(I.adaptation.period.duration/j),b}}}v.__dashjs_factory_name="TemplateSegmentsGetter";var D=U.Z.getClassFactory(v);g.Z=D},1724:function(R,g,A){var U=A(5448),C=A(3393),y=A(7387);function v(m,T){var F=(m=m||{}).timelineConverter,N=m.dashMetrics;function _(){if(!F)throw new Error(C.Z.MISSING_CONFIG_ERROR)}function I(j,Y){var $,W,ue,x,X,fe,oe,ge=j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList,Re=ge.SegmentTimeline,Je=ge.SegmentURL_asArray,Se=0,Be=-1;oe=j.timescale;var ot=!1;for(ue=0,x=($=Re.S_asArray).length;ue<x&&!ot;ue++)for(fe=0,(W=$[ue]).hasOwnProperty("r")&&(fe=W.r),W.hasOwnProperty("t")&&(Se=W.t),fe<0&&(fe=b(j,$[ue+1],W,oe,Se/oe)),X=0;X<=fe&&!ot;X++)(ot=Y(Se,ge,Je,W,oe,++Be,ue))&&(j.segmentDuration=W.d/oe),Se+=W.d}function b(j,Y,$,W,ue){var x;if(Y&&Y.hasOwnProperty("t"))x=Y.t/W;else try{var X=0;if(isNaN(j.adaptation.period.start)||isNaN(j.adaptation.period.duration)||!isFinite(j.adaptation.period.duration)){var fe=N.getCurrentDVRInfo();X=isNaN(fe.end)?0:fe.end}else X=j.adaptation.period.start+j.adaptation.period.duration;x=F.calcMediaTimeFromPresentationTime(X,j),j.segmentDuration=$.d/W}catch(oe){x=0}return Math.max(Math.ceil((x-ue)/($.d/W))-1,0)}return{getSegmentByIndex:function(j,Y,$){if(_(),!j)return null;var W=null,ue=!1;return I(j,function(x,X,fe,oe,ge,Re,Je){if(ue||$<0){var Se=X.media,Be=oe.mediaRange;return fe&&(Se=fe[Je].media||"",Be=fe[Je].mediaRange),W=(0,y.TJ)(F,T,j,x,oe.d,ge,Se,Be,Re,oe.tManifest),!0}return x>=$*ge-.5*oe.d&&(ue=!0),!1}),W},getSegmentByTime:function(j,Y){if(_(),!j)return null;Y===void 0&&(Y=null);var $=null,W=F.calcMediaTimeFromPresentationTime(Y,j);return I(j,function(ue,x,X,fe,oe,ge,Re){var Je=parseFloat((W*oe).toPrecision(15));if(Je<ue+fe.d&&Je>=ue){var Se=x.media,Be=fe.mediaRange;return X&&(Se=X[Re].media||"",Be=X[Re].mediaRange),$=(0,y.TJ)(F,T,j,ue,fe.d,oe,Se,Be,ge,fe.tManifest),!0}return!1}),$},getMediaFinishedInformation:function(j){if(!j)return 0;var Y,$,W,ue,x,X,fe,oe=(j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentTemplate||j.adaptation.period.mpd.manifest.Period_asArray[j.adaptation.period.index].AdaptationSet_asArray[j.adaptation.index].Representation_asArray[j.index].SegmentList).SegmentTimeline,ge=0,Re=0,Je=0;for(fe=j.timescale,ue=(Y=oe.S_asArray).length,W=0;W<ue;W++)for(X=0,($=Y[W]).hasOwnProperty("r")&&(X=$.r),$.hasOwnProperty("t")&&(Re=(ge=$.t)/fe),X<0&&(X=b(j,Y[W+1],$,fe,Re)),x=0;x<=X;x++)Je++,Re=(ge+=$.d)/fe;return{numberOfSegments:Je,mediaTimeOfLastSignaledSegment:Re}}}}v.__dashjs_factory_name="TimelineSegmentsGetter";var D=U.Z.getClassFactory(v);g.Z=D},2011:function(R,g){g.Z=function A(){(function(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")})(this,A),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(R,g){g.Z=function A(){(function(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")})(this,A),this.schemeIdUri="",this.value=""}},1139:function(R,g,A){A.d(g,{Z:function(){return Zm}});var U=A(452),C=A.n(U),y=A(3393),v=A(1553),D=A(3860),m=A(5595),T=A(8512),F=A(5448),N=A(6398),_=A(8825);function I(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze,$e,Ee,ke,Ae,Ge,Z,le,ae,se=this.context,Q=(0,m.Z)(se).getInstance();function Pe(){he(),pe=!1,we=0,ye=0,Ze=0,Z=!1,$e=!0,Ee=!1,le=!1,ke=NaN,Oe=NaN,H&&(Q.off(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.off(T.Z.LOADING_PROGRESS,Lt,L),Q.off(T.Z.MANIFEST_UPDATED,Kt,L),Q.off(T.Z.STREAMS_COMPOSED,ze,L),Q.off(_.Z.PLAYBACK_ENDED,Ct,L),Q.off(_.Z.STREAM_INITIALIZING,ct,L),Q.off(_.Z.REPRESENTATION_SWITCH,nt,L),Q.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Wt,L),$t(),H.removeEventListener("canplay",en),H.removeEventListener("canplaythrough",Jt),H.removeEventListener("play",Dn),H.removeEventListener("waiting",xn),H.removeEventListener("playing",rr),H.removeEventListener("pause",ir),H.removeEventListener("error",Sn),H.removeEventListener("seeking",bt),H.removeEventListener("seeked",Xt),H.removeEventListener("timeupdate",Gt),H.removeEventListener("progress",un),H.removeEventListener("ratechange",vn),H.removeEventListener("loadedmetadata",Pn),H.removeEventListener("loadeddata",Nn),H.removeEventListener("stalled",On),H.removeEventListener("ended",Fn),H.removeEventListener("volumechange",Gn)),ce=null,H=null,ie=null,me=null}function be(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((Fe(Ve)-lt()).toFixed(5))}function Fe(Ve){var Dt=Ve||ie;return Dt.start+Dt.duration}function xe(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ie&&H&&H.getElement()?(Ve&&me&&ht(lt()),H.play()):pe=!0}function he(){ie&&H&&H.pause()}function Ne(Ve){var Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(ie&&H&&H.getElement()){var sr=isNaN(ke)?H.getTime():ke;Ve!==sr&&((Ae=fn===!0)||(ke=Ve),P.info("Requesting seek to time: "+Ve+(Ae?" (internal)":"")),me&&Tn&&ht(Ve),H.setCurrentTime(Ve,Dt))}}function Xe(){if(ie&&H&&me){var Ve=B&&B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=ee.getCurrentDVRInfo(Ve);return Dt&&Dt.range?Dt.range.end:0}}function ht(Ve){var Dt=new Date(ne.getClientReferenceTime()),fn=J.getRegularPeriods()[0],Tn=ne.calcPresentationTimeFromWallTime(Dt,fn);we=Tn-Ve}function lt(){return ie&&H?H.getTime():null}function et(){return ie&&H?H.isPaused():null}function pt(){return ie&&H?H.isSeeking():null}function jt(){return ie&&H?H.isStalled():null}function Ht(){return ie&&H?H.getPlaybackRate():null}function Ft(){return ie&&H?H.getEnded():null}function Ut(){return me}function An(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!et()&&me&&H.getReadyState()!==0&&!pt()&&!Z){Ve||(Ve=B.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO);var Dt=lt(),fn=it(Dt,Ve),Tn=!isNaN(fn)&&fn!==Dt;Tn&&!pt()&&(jt()||Ge||H.getReadyState()===1)&&(P.debug("UpdateCurrentTime: Seek to actual time: ".concat(fn," from currentTime: ").concat(Dt)),Ne(fn,!1,!1))}}function it(Ve,Dt){var fn=ee.getCurrentDVRInfo(Dt),Tn=fn?fn.range:null;return Tn?Ve>Tn.end?Math.max(Tn.end-we,Tn.start):Ve>0&&Ve+.25<Tn.start&&Math.abs(Ve-Tn.start)<31536e4?Ee?Math.max(Tn.end-we,Tn.start):Tn.start:Ve:NaN}function yt(){ce===null&&(ce=setInterval(function(){(function(){if(Q.trigger(T.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:me,time:new Date}),Ut()){var Ve=Date.now();(isNaN(Oe)||Ve>Oe+ae.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(B.addDVRMetric(),et()?function(){var Dt=Date.now();(!He||Dt>He+500)&&(He=Dt,Gt())}():An(),Oe=Ve)}})()},ae.get().streaming.wallclockTimeUpdateInterval))}function $t(){clearInterval(ce),ce=null}function Nt(Ve){var Dt=J.convertRepresentationToRepresentationInfo(Ve.currentRepresentation),fn=Dt?Dt.mediaInfo.streamInfo:null;fn!==null&&ie.id===fn.id&&(ie=fn)}function en(){Q.trigger(T.Z.CAN_PLAY)}function Jt(){Q.trigger(T.Z.CAN_PLAY_THROUGH)}function Wt(Ve){Ve.streamId===B.getActiveStreamInfo().id&&(Ge=Ve.state===D.Z.BUFFER_EMPTY,ae.get().streaming.buffer.setStallState&&H.setStallState(Ve.mediaType,Ve.state===D.Z.BUFFER_EMPTY))}function Dn(){P.info("Native video element event: play"),An(),yt(),Q.trigger(T.Z.PLAYBACK_STARTED,{startTime:lt()})}function xn(){P.info("Native video element event: waiting"),Q.trigger(T.Z.PLAYBACK_WAITING,{playingTime:lt()})}function rr(){P.info("Native video element event: playing"),Ae=!1,Q.trigger(T.Z.PLAYBACK_PLAYING,{playingTime:lt()})}function ir(){P.info("Native video element event: pause"),Q.trigger(T.Z.PLAYBACK_PAUSED,{ended:Ft()})}function bt(){if(!Ae){var Ve=lt();isNaN(ke)||ke===Ve||(Ve=ke),ke=NaN,P.info("Seeking to: "+Ve),yt(),Q.trigger(T.Z.PLAYBACK_SEEKING,{seekTime:Ve,streamId:ie.id})}}function Xt(){P.info("Native video element event: seeked"),Ae=!1,Q.trigger(T.Z.PLAYBACK_SEEKED)}function Gt(){ie&&Q.trigger(T.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:be(),time:lt(),streamId:ie.id})}function un(){Q.trigger(T.Z.PLAYBACK_PROGRESS,{streamId:ie.id})}function vn(){var Ve=Ht();P.info("Native video element event: ratechange: ",Ve),Q.trigger(T.Z.PLAYBACK_RATE_CHANGED,{playbackRate:Ve})}function Pn(){P.info("Native video element event: loadedmetadata"),Q.trigger(T.Z.PLAYBACK_METADATA_LOADED),yt()}function Nn(){P.info("Native video element event: loadeddata"),Q.trigger(T.Z.PLAYBACK_LOADED_DATA)}function Fn(){P.info("Native video element event: ended"),he(),$t();var Ve=B?B.getActiveStreamInfo():null;Ve&&Q.trigger(T.Z.PLAYBACK_ENDED,{isLast:Ve.isLast})}function Gn(){Q.trigger(T.Z.PLAYBACK_VOLUME_CHANGED)}function Ct(Ve){if(ce&&Ve.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Dt=Ve.seekTime?Ve.seekTime:Fe();H.setCurrentTime(Dt),he(),$t()}}function Sn(Ve){var Dt=Ve.target||Ve.srcElement;Q.trigger(T.Z.PLAYBACK_ERROR,{error:Dt.error})}function En(){me=!1}function Lt(Ve){if(Ve.stream===!1&&Ee&&!isNaN(Ve.request.duration)){var Dt=1.2*Ve.request.duration;Dt>we&&(P.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Dt.toFixed(2)),we=Dt,ye=Dt)}}function On(Ve){Q.trigger(T.Z.PLAYBACK_STALLED,{e:Ve})}function ct(Ve){var Dt;(Dt=Ve.mediaInfo)&&Dt.supplementalProperties&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Dt.supplementalProperties[y.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Ee=!0)}function nt(Ve){var Dt=B.getActiveStreamInfo();Ve&&Dt&&Ve.currentRepresentation&&Ve.streamId&&Ve.streamId===Dt.id&&Ve.mediaType&&(Ve.mediaType===y.Z.VIDEO||Ve.mediaType===y.Z.AUDIO)&&($e=Ve.currentRepresentation.availabilityTimeComplete,(Ee=!$e)&&!le&&(le=!0))}function Kt(){Z=!0}function ze(){Z=!1}return L={initialize:function(Ve,Dt){ie=Ve,Dt!==!0&&(H.addEventListener("canplay",en),H.addEventListener("canplaythrough",Jt),H.addEventListener("play",Dn),H.addEventListener("waiting",xn),H.addEventListener("playing",rr),H.addEventListener("pause",ir),H.addEventListener("error",Sn),H.addEventListener("seeking",bt),H.addEventListener("seeked",Xt),H.addEventListener("timeupdate",Gt),H.addEventListener("progress",un),H.addEventListener("ratechange",vn),H.addEventListener("loadedmetadata",Pn),H.addEventListener("loadeddata",Nn),H.addEventListener("stalled",On),H.addEventListener("ended",Fn),H.addEventListener("volumechange",Gn),me=ie.manifestInfo.isDynamic,Ge=!1,Ae=!1,Q.on(T.Z.DATA_UPDATE_COMPLETED,Nt,L),Q.on(T.Z.LOADING_PROGRESS,Lt,L),Q.on(T.Z.MANIFEST_UPDATED,Kt,L),Q.on(T.Z.STREAMS_COMPOSED,ze,L),Q.on(_.Z.PLAYBACK_ENDED,Ct,L,{priority:m.Z.EVENT_PRIORITY_HIGH}),Q.on(_.Z.STREAM_INITIALIZING,ct,L),Q.on(_.Z.REPRESENTATION_SWITCH,nt,L),Q.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Wt,L),Q.on(_.Z.DYNAMIC_TO_STATIC,En,L),pe&&(pe=!1,xe()))},setConfig:function(Ve){Ve&&(Ve.streamController&&(B=Ve.streamController),Ve.serviceDescriptionController&&(V=Ve.serviceDescriptionController),Ve.dashMetrics&&(ee=Ve.dashMetrics),Ve.adapter&&(J=Ve.adapter),Ve.videoModel&&(H=Ve.videoModel),Ve.timelineConverter&&(ne=Ve.timelineConverter),Ve.settings&&(ae=Ve.settings))},getTimeToStreamEnd:be,getBufferLevel:function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Dt=null;return B.getActiveStreamProcessors().forEach(function(fn){if(!Ve||Ve.length===0||Ve.indexOf(fn.getType())===-1){var Tn=fn.getBufferLevel();Dt=Dt===null?Tn:Math.min(Dt,Tn)}}),Dt},getPlaybackStalled:function(){return Ge},getTime:lt,getLowLatencyModeEnabled:function(){return Ee},getInitialCatchupModeActivated:function(){return le},getIsManifestUpdateInProgress:function(){return Z},getPlaybackRate:Ht,getPlayedRanges:function(){return ie&&H?H.getPlayedRanges():null},getEnded:Ft,getIsDynamic:Ut,getStreamController:function(){return B},computeAndSetLiveDelay:function(Ve,Dt){var fn,Tn,sr,Zr=!isNaN(Ve)&&isFinite(Ve)?Ve:NaN,Ai=J.getSuggestedPresentationDelay(),zr=V.getServiceDescriptionSettings();return fn=isNaN(ae.get().streaming.delay.liveDelay)?ae.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ae.get().streaming.delay.liveDelayFragmentCount)||isNaN(Zr)?zr&&!isNaN(zr.liveDelay)&&zr.liveDelay>0?zr.liveDelay:ae.get().streaming.delay.useSuggestedPresentationDelay===!0&&Ai!==null&&!isNaN(Ai)&&Ai>0?Ai:isNaN(Zr)?Dt&&!isNaN(Dt.minBufferTime)?4*Dt.minBufferTime:4*ie.manifestInfo.minBufferTime:4*Zr:Zr*ae.get().streaming.delay.liveDelayFragmentCount:ae.get().streaming.delay.liveDelay,(sr=J.getAvailabilityStartTime())!==null&&(Ze=sr),Tn=Dt&&Dt.dvrWindowSize>0?Math.min(fn,Dt.dvrWindowSize):fn,we=Tn,ye=Tn,Tn},getLiveDelay:function(){return we},getOriginalLiveDelay:function(){return ye},getCurrentLiveLatency:function(){if(!me||isNaN(Ze))return NaN;var Ve=lt();if(isNaN(Ve)||Ve===0)return 0;var Dt=new Date().getTime()+1e3*ne.getClientTimeOffset();return Math.max(((Dt-Ze-1e3*Ve)/1e3).toFixed(3),0)},play:xe,isPaused:et,isStalled:jt,pause:he,isSeeking:pt,getStreamEndTime:Fe,seek:Ne,seekToOriginalLive:function(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Xe();if(Tn!==0){var sr=Tn-(we=ye);Ne(sr,Ve,Dt,fn)}},seekToCurrentLive:function(){var Ve=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Tn=Xe();if(Tn!==0){var sr=Tn-we;Ne(sr,Ve,Dt,fn)}},reset:Pe,updateCurrentTime:An,getAvailabilityStartTime:function(){return Ze}},P=(0,N.Z)(se).getInstance().getLogger(L),Pe(),L}I.__dashjs_factory_name="PlaybackController";var b=F.Z.getSingletonFactory(I),j=A(3186),Y="loading",$="executed",W="failed";function ue(L){var P,B,V,ee,J=(L=L||{}).eventBus,H=L.events,ne=L.dashMetrics,ce=L.fragmentLoader,we=L.debug,ye=L.streamInfo,ie=L.type;function me(Z){var le;return!!Z&&(le=!1,V.some(function(ae){if(se=Z,Q=ae,!isNaN(se.index)&&se.startTime===Q.startTime&&se.adaptationIndex===Q.adaptationIndex&&se.type===Q.type||function(Pe,be){return isNaN(Pe.index)&&isNaN(be.index)&&Pe.quality===be.quality}(Z,ae)||function(Pe,be){return Pe.action===j.Z.ACTION_COMPLETE&&Pe.action===be.action}(Z,ae))return le=!0;var se,Q}),le)}function pe(Z){return isNaN(Z.duration)?.25:Math.min(Z.duration/8,.5)}function He(Z){V=V.filter(function(le){var ae=pe(le);return isNaN(le.startTime)||Z!==void 0&&le.startTime>=Z-ae})}function Oe(Z,le){le<=Z+.5||(V=V.filter(function(ae){var se=pe(ae);return isNaN(ae.startTime)||ae.startTime>=le-se||isNaN(ae.duration)||ae.startTime+ae.duration<=Z+se}))}function Ze(Z,le,ae){for(var se=Z.length-1;se>=0;se--){var Q=Z[se],Pe=Q.startTime,be=Pe+Q.duration;if(ae=isNaN(ae)?pe(Q):ae,!isNaN(Pe)&&!isNaN(be)&&le+ae>=Pe&&le-ae<be||isNaN(Pe)&&isNaN(le))return Q}return null}function $e(Z,le){ne.addSchedulingInfo(Z,le),ne.addRequestsQueue(Z.mediaType,ee,V)}function Ee(Z){Z.sender===ce&&(ee.splice(ee.indexOf(Z.request),1),Z.response&&!Z.error&&V.push(Z.request),$e(Z.request,Z.error?W:$),J.trigger(H.FRAGMENT_LOADING_COMPLETED,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:ye.id,mediaType:ie}))}function ke(Z){Z.sender===ce&&J.trigger(H.FRAGMENT_LOADING_PROGRESS,{request:Z.request,response:Z.response,error:Z.error,sender:this},{streamId:ye.id,mediaType:ie})}function Ae(Z){Z.sender===ce&&J.trigger(H.FRAGMENT_LOADING_ABANDONED,{request:Z.request},{streamId:ye.id,mediaType:ie})}function Ge(){V=[],ee=[]}return P={getStreamId:function(){return ye.id},getType:function(){return ie},getRequests:function(Z){var le=Z?Z.state instanceof Array?Z.state:[Z.state]:[],ae=[];return le.forEach(function(se){var Q=function(Pe){var be;switch(Pe){case Y:be=ee;break;case $:be=V;break;default:be=[]}return be}(se);ae=ae.concat(function(Pe,be){return be.hasOwnProperty("time")?[Ze(Pe,be.time,be.threshold)]:Pe.filter(function(Fe){for(var xe in be)if(xe!=="state"&&be.hasOwnProperty(xe)&&Fe[xe]!=be[xe])return!1;return!0})}(Q,Z))}),ae},isFragmentLoaded:me,isFragmentLoadedOrPending:function(Z){var le,ae=!1,se=0;if(!(ae=me(Z)))for(se=0;se<ee.length;se++)le=ee[se],Z.url===le.url&&Z.startTime===le.startTime&&(ae=!0);return ae},removeExecutedRequestsBeforeTime:He,removeExecutedRequestsAfterTime:function(Z){V=V.filter(function(le){return isNaN(le.startTime)||Z!==void 0&&le.startTime<Z})},syncExecutedRequestsWithBufferedRange:function(Z,le){if(Z&&Z.length!==0){for(var ae=0,se=0,Q=Z.length;se<Q;se++)Oe(ae,Z.start(se)),ae=Z.end(se);le>0&&Oe(ae,le)}else He()},abortRequests:function(){B.debug("abort requests"),ce.abort(),ee=[]},executeRequest:function(Z){Z.action===j.Z.ACTION_DOWNLOAD?($e(Z,Y),ee.push(Z),function(le){J.trigger(H.FRAGMENT_LOADING_STARTED,{request:le},{streamId:ye.id,mediaType:ie}),ce.load(le)}(Z)):B.warn("Unknown request action.")},reset:function(){J.off(H.LOADING_COMPLETED,Ee,this),J.off(H.LOADING_DATA_PROGRESS,ke,this),J.off(H.LOADING_ABANDONED,Ae,this),ce&&ce.reset(),Ge()},resetInitialSettings:Ge,addExecutedRequest:function(Z){V.push(Z)}},B=we.getLogger(P),Ge(),J.on(H.LOADING_COMPLETED,Ee,P),J.on(H.LOADING_DATA_PROGRESS,ke,P),J.on(H.LOADING_ABANDONED,Ae,P),P}ue.__dashjs_factory_name="FragmentModel";var x=F.Z.getClassFactory(ue);x.FRAGMENT_MODEL_LOADING=Y,x.FRAGMENT_MODEL_EXECUTED=$,x.FRAGMENT_MODEL_CANCELED="canceled",x.FRAGMENT_MODEL_FAILED=W,F.Z.updateClassFactory(ue.__dashjs_factory_name,x);var X=x,fe=A(5459);function oe(L){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},oe(L)}function ge(L,P){return ge=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},ge(L,P)}function Re(L,P){return!P||oe(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Je(L){return Je=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Je(L)}var Se=new(function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&ge(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Je(P);if(B){var ne=Je(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Re(this,J)});function ee(){var J;return function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,J.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,J.SEGMENT_BASE_LOADER_ERROR_CODE=15,J.TIME_SYNC_FAILED_ERROR_CODE=16,J.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,J.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,J.APPEND_ERROR_CODE=20,J.REMOVE_ERROR_CODE=21,J.DATA_UPDATE_FAILED_ERROR_CODE=22,J.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,J.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,J.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,J.DOWNLOAD_ERROR_ID_SIDX_CODE=26,J.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,J.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,J.DOWNLOAD_ERROR_ID_XLINK_CODE=29,J.MANIFEST_ERROR_ID_PARSE_CODE=31,J.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,J.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,J.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,J.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,J.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",J.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",J.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",J.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",J.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",J.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",J.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",J.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",J.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",J.APPEND_ERROR_MESSAGE="chunk is not defined",J.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",J.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",J.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",J.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",J.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",J.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",J}return ee}(A(2230).Z)),Be=A(1264),ot=A(7855);function st(L){var P,B,V,ee,J,H,ne=this.context,ce=(0,Be.Z)(ne).getInstance(),we=L.textController,ye=L.eventBus,ie=[],me=[],pe=!1,He=L.mediaSource,Oe=null;function Ze(Q){return new Promise(function(Pe){se(function(){ee.changeType&&ee.changeType(Q),Pe()})})}function $e(Q){return ee=we.getTextSourceBuffer(Q),Promise.resolve()}function Ee(){if(typeof ee.addEventListener=="function")try{ee.addEventListener("updateend",le,!1),ee.addEventListener("error",ae,!1),ee.addEventListener("abort",ae,!1)}catch(Q){H=setInterval(le,50)}else H=setInterval(le,50)}function ke(Q){return new Promise(function(Pe){ee&&ce.get().streaming.buffer.useAppendWindow?se(function(){try{if(!ee)return void Pe();var be=He.duration,Fe=0;Q&&!isNaN(Q.start)&&!isNaN(Q.duration)&&isFinite(Q.duration)&&(be=Q.start+Q.duration),Q&&!isNaN(Q.start)&&(Fe=Q.start),ee.appendWindowEnd===be&&ee.appendWindowStart===Fe||(ee.appendWindowStart=0,ee.appendWindowEnd=be+.01,ee.appendWindowStart=Math.max(Fe-.1,0),V.debug("Updated append window for ".concat(J.type,". Set start to ").concat(ee.appendWindowStart," and end to ").concat(ee.appendWindowEnd))),Pe()}catch(xe){V.warn("Failed to set append window"),Pe()}}):Pe()})}function Ae(Q){return new Promise(function(Pe){ee?se(function(){try{ee.timestampOffset===Q||isNaN(Q)||(ee.timestampOffset=Q,V.debug("Set MSE timestamp offset to ".concat(Q))),Pe()}catch(be){Pe()}}):Pe()})}function Ge(){if(!pe&&me.length>0){pe=!0;var Q=me[0];me.splice(0,1);var Pe=function(){pe=!1,me.length>0&&Ge.call(this),Q&&Q.data&&Q.data.segmentType&&Q.data.segmentType!==ot.w.INIT_SEGMENT_TYPE&&delete Q.data.bytes,Q.promise.resolve({chunk:Q.data})};try{Oe=Q.request,Q.data.bytes.byteLength===0?Pe.call(this):(ee.appendBuffer?ee.appendBuffer(Q.data.bytes):ee.append(Q.data.bytes,Q.data),se(Pe.bind(this)))}catch(be){V.fatal('SourceBuffer append failed "'+be+'"'),me.length>0?Ge():pe=!1,delete Q.data.bytes,Q.promise.reject({chunk:Q.data,error:new fe.Z(be.code,be.message)})}}}function Z(){ie.length>0&&(ee.updating||(ie.shift()(),Z()))}function le(){ee.updating||Z()}function ae(Q){var Pe,be,Fe=Q.target||{};Pe=T.Z.SOURCE_BUFFER_ERROR,be={error:Fe,lastRequestAppended:Oe},ye.trigger(Pe,be,{streamId:J.streamInfo.id,mediaType:B})}function se(Q){ie.push(Q),ee.updating||Z()}return P={getType:function(){return B},getAllBufferRanges:function(){try{return ee.buffered}catch(Q){return V.error("getAllBufferRanges exception: "+Q.message),null}},getBuffer:function(){return ee},append:function(Q){var Pe=this,be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(Fe,xe){Q?(me.push({data:Q,promise:{resolve:Fe,reject:xe},request:be}),se(Ge.bind(Pe))):xe({chunk:Q,error:new fe.Z(Se.APPEND_ERROR_CODE,Se.APPEND_ERROR_MESSAGE)})})},remove:function(Q){return new Promise(function(Pe,be){var Fe=Q.start,xe=Q.end;Fe>=0&&xe>Fe?se(function(){try{ee.remove(Fe,xe),se(function(){Pe({from:Fe,to:xe,unintended:!1}),Q.resolve&&Q.resolve()})}catch(he){be({from:Fe,to:xe,unintended:!1,error:new fe.Z(Se.REMOVE_ERROR_CODE,Se.REMOVE_ERROR_MESSAGE)}),Q.reject&&Q.reject(he)}}):Pe()})},abort:function(){return new Promise(function(Q){try{me=[],He.readyState==="open"?se(function(){try{ee&&ee.abort(),Q()}catch(Pe){Q()}}):(ee&&ee.setTextTrack&&He.readyState==="ended"&&ee.abort(),Q())}catch(Pe){Q()}})},reset:function(){if(ee){try{ie=[],function(){try{typeof ee.removeEventListener=="function"&&(ee.removeEventListener("updateend",le,!1),ee.removeEventListener("error",ae,!1),ee.removeEventListener("abort",ae,!1)),clearInterval(H)}catch(Q){V.error(Q)}}(),pe=!1,me=[],ee.getClassName&&ee.getClassName()==="TextSourceBuffer"||(V.debug("Removing sourcebuffer from media source"),He.removeSourceBuffer(ee))}catch(Q){}ee=null}Oe=null},updateTimestampOffset:Ae,initializeForStreamSwitch:function(Q,Pe,be){B=(J=Q).type;var Fe=J.codec;(function(he){ee=he.getBuffer()})(be),Ee();var xe=[];return xe.push(new Promise(function(he){se(function(){var Ne=ee.appendWindowStart,Xe=ee.appendWindowEnd;ee&&(ee.abort(),ee.appendWindowStart=Ne,ee.appendWindowEnd=Xe),he()})})),xe.push(ke(J.streamInfo)),ce.get().streaming.buffer.useChangeTypeForTrackSwitch&&xe.push(Ze(Fe)),Pe&&Pe.MSETimeOffset!==void 0&&xe.push(Ae(Pe.MSETimeOffset)),Promise.all(xe)},initializeForFirstUse:function(Q,Pe,be){B=(J=Pe).type;var Fe=J.codec;try{if(Fe.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return $e(Q);ee=He.addSourceBuffer(Fe),Ee();var xe=[];return xe.push(ke(J.streamInfo)),be&&be.MSETimeOffset!==void 0&&xe.push(Ae(be.MSETimeOffset)),Promise.all(xe)}catch(he){return J.type==y.Z.TEXT&&!J.isFragmented||Fe.indexOf('codecs="stpp')!==-1||Fe.indexOf('codecs="vtt')!==-1||Fe.indexOf("text/vtt")!==-1?$e(Q):Promise.reject(he)}},updateAppendWindow:ke,changeType:Ze},V=(0,N.Z)(ne).getInstance().getLogger(P),P}st.__dashjs_factory_name="SourceBufferSink";var Ie=F.Z.getClassFactory(st);function Ye(L){var P,B,V,ee=this.context,J=[],H=L;function ne(ce,we){return J=J.filter(function(ye){return!((isNaN(we)||ye.start<we)&&(isNaN(ce)||ye.end>ce))}),Promise.resolve()}return P={getAllBufferRanges:function(){for(var ce=[],we=0;we<J.length;we++){var ye=J[we];ce.length===0||ye.start>ce[ce.length-1].end?ce.push({start:ye.start,end:ye.end}):ce[ce.length-1].end=ye.end}var ie={start:function(me){return ce[me].start},end:function(me){return ce[me].end}};return Object.defineProperty(ie,"length",{get:function(){return ce.length}}),ie},append:function(ce){return ce.segmentType!=="InitializationSegment"?(J.push(ce),J.sort(function(we,ye){return we.start-ye.start}),V=null):V=ce,B.debug("PreBufferSink appended chunk s: "+ce.start+"; e: "+ce.end),H&&H({chunk:ce}),Promise.resolve()},remove:ne,abort:function(){return Promise.resolve()},discharge:function(ce,we){var ye=function(ie,me){return J.filter(function(pe){return(isNaN(me)||pe.start<me)&&(isNaN(ie)||pe.end>ie)})}(ce,we);return V&&(ye.push(V),V=null),ne(ce,we),ye},reset:function(){J=[],V=null,H=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(ce){ce()},getBuffer:function(){return this}},B=(0,N.Z)(ee).getInstance().getLogger(P),P}Ye.__dashjs_factory_name="PreBufferSink";var mt=F.Z.getClassFactory(Ye);function Me(){var L={};return{save:function(P){var B=P.streamId,V=P.representationId;L[B]=L[B]||{},L[B][V]=P},extract:function(P,B){return L&&L[P]&&L[P][B]?L[P][B]:null},reset:function(){L={}}}}Me.__dashjs_factory_name="InitCache";var We=F.Z.getSingletonFactory(Me),rt=.01,qt="BufferController";function kt(L){L=L||{};var P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze,$e,Ee,ke,Ae,Ge,Z=this.context,le=(0,m.Z)(Z).getInstance(),ae=L.errHandler,se=L.fragmentModel,Q=L.representationController,Pe=L.adapter,be=L.textController,Fe=L.abrController,xe=L.playbackController,he=L.streamInfo,Ne=L.type,Xe=L.settings;function ht(nt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(ze,Ve){H=nt,we&&Kt&&typeof we.discharge=="function"?(ye=we,et(Kt).then(function(){ze()}).catch(function(Dt){Ve(Dt)})):ze()})}function lt(nt){return Pe.convertRepresentationToRepresentationInfo(Q.getRepresentationForQuality(nt))}function et(nt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(ze,Ve){Ee&&nt?H?(ie=!1,jt(nt,Kt).then(function(Dt){ze(Dt)}).catch(function(Dt){Ve(Dt)})):(ie=!0,pt().then(function(Dt){ze(Dt)}).catch(function(Dt){Ve(Dt)})):ze(null)})}function pt(){var nt=this;return new Promise(function(Kt,ze){var Ve=Fe.getQualityFor(Ne,he.id);we=mt(Z).create(it.bind(nt)),Pn(lt(Ve)).then(function(){Kt(we)}).catch(function(){ze()})})}function jt(nt,Kt){return new Promise(function(ze,Ve){var Dt=Fe.getQualityFor(Ne,he.id);we=Ie(Z).create({mediaSource:H,textController:be,eventBus:le}),function(fn,Tn,sr){var Zr=lt(sr);return Tn&&Tn[Ne]&&(Ne===y.Z.VIDEO||Ne===y.Z.AUDIO)?we.initializeForStreamSwitch(fn,Zr,Tn[Ne]):we.initializeForFirstUse(he,fn,Zr)}(nt,Kt,Dt).then(function(){return Pn(lt(Dt))}).then(function(){ze(we)}).catch(function(fn){B.fatal("Caught error on create SourceBuffer: "+fn),ae.error(new fe.Z(Se.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Se.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Ne)),Ve(fn)})})}function Ht(nt){Xe.get().streaming.cacheInitSegments&&(B.info("Init fragment finished loading saving to",Ne+"'s init cache"),Ee.save(nt.chunk)),B.debug("Append Init fragment",Ne," with representationId:",nt.chunk.representationId," and quality:",nt.chunk.quality,", data size:",nt.chunk.bytes.byteLength),Ut(nt.chunk)}function Ft(nt){Ut(nt.chunk,nt.request)}function Ut(nt){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;we&&(we.append(nt,Kt).then(function(ze){it(ze)}).catch(function(ze){it(ze)}),nt.mediaInfo.type===y.Z.VIDEO&&On(T.Z.VIDEO_CHUNK_RECEIVED,{chunk:nt}))}function An(nt){if(nt&&nt.length>0)for(var Kt=0,ze=nt.length;Kt<ze;Kt++)B.debug("Buffered range: "+nt.start(Kt)+" - "+nt.end(Kt)+", currentTime = ",xe.getTime())}function it(nt){if(nt.error)return nt.error.code===22&&function(){if($e=!0,J=.8*Sn(),B.warn("Quota exceeded, Critical Buffer: "+J),J>0){var Ve=Math.max(.2*J,1),Dt=J-Ve,fn=Math.min(Xe.get().streaming.buffer.bufferTimeAtTopQuality,.9*Dt),Tn=Math.min(Xe.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Dt),sr={streaming:{buffer:{bufferToKeep:parseFloat(Ve.toFixed(5)),bufferTimeAtTopQuality:parseFloat(fn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Tn.toFixed(5))}}};Xe.update(sr)}}(),void(nt.error.code!==22&&Lt()||(B.warn("Clearing playback buffer to overcome quota exceed situation"),On(T.Z.QUOTA_EXCEEDED,{criticalBufferLevel:J,quotaExceededTime:nt.chunk.start}),Gt(Xt())));if(we&&(Dn(),$e=!1,(He=nt.chunk)&&He.endFragment)){He&&!isNaN(He.index)&&(ne=Math.max(He.index,ne),xn());var Kt=we.getAllBufferRanges();He.segmentType===ot.w.MEDIA_SEGMENT_TYPE&&(An(Kt),Nt(),function(){if(!isNaN(Ge)&&!ie)if(Ne===y.Z.AUDIO||Ne===y.Z.VIDEO){var Ve=xe.getTime(),Dt=Wt(Ve,0),fn=Wt(Ge,0);if(Dt&&fn&&Dt.start===fn.start)Ge=NaN;else{var Tn=Q.getCurrentRepresentation().segmentDuration,sr=Wt(Ge,Tn);sr&&(Xe.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ve-Ge)>Tn?Ge<=sr.end&&xe.seek(Math.max(Ge,sr.start),!1,!0):Ve<sr.start&&xe.seek(sr.start,!1,!0))}}else Ge=NaN}());var ze=!1;me&&(me.indexOf(He)>0&&(ze=!0),me=null),He&&!ze&&On(T.Z.BYTES_APPENDED_END_FRAGMENT,{quality:He.quality,startTime:He.start,index:He.index,bufferedRanges:Kt,segmentType:He.segmentType,mediaType:Ne})}}function yt(){return new Promise(function(nt,Kt){var ze=$t();if(!ze||ze.length===0)return Nt(),void nt();Gt(ze).then(function(){nt()}).catch(function(Ve){Kt(Ve)})})}function $t(nt){var Kt=[],ze=we.getAllBufferRanges();if(!ze||ze.length===0)return Kt;if(!nt&&nt!==0||isNaN(nt))Kt.push({start:ze.start(0),end:ze.end(ze.length-1)+.5});else{var Ve=function(fn,Tn){var sr=Xe.get().streaming.buffer.bufferToKeep,Zr=Tn.start(0);if(fn-Zr>sr){var Ai=Math.max(0,fn-sr),zr=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:rt})[0];if(zr&&(Ai=Math.min(zr.startTime,Ai)),Ai>0)return{start:Zr,end:Ai}}return null}(nt,ze),Dt=function(fn,Tn){var sr=Tn.end(Tn.length-1)+.5,Zr=En(fn),Ai=he.manifestInfo.duration>=Xe.get().streaming.buffer.longFormContentDurationThreshold?Xe.get().streaming.buffer.bufferTimeAtTopQualityLongForm:Xe.get().streaming.buffer.bufferTimeAtTopQuality,zr=isNaN(Zr)?fn:Math.min(Zr,fn+Ai);if(zr>=Tn.end(Tn.length-1))return null;var io=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:fn,threshold:rt})[0];if(io&&(zr=Math.max(io.startTime+io.duration,zr)),Xe.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var Zi=0;Zi<Tn.length;Zi++)if(Tn.start(Zi)<=fn&&fn<=Tn.end(Zi)&&Tn.start(Zi)<=zr&&zr<=Tn.end(Zi)){var Bs=zr;zr=Zi+1<Tn.length?Tn.start(Zi+1):Tn.end(Zi)+1,B.debug("Buffered range ["+Tn.start(Zi)+", "+Tn.end(Zi)+"] overlaps with targetTime "+fn+" and range to be pruned ["+Bs+", "+sr+"], using ["+zr+", "+sr+"] instead"+(zr<sr?"":" (no actual pruning)"));break}}return zr<Tn.end(Tn.length-1)?{start:zr,end:sr}:null}(nt,ze);Ve&&Kt.push(Ve),Dt&&Kt.push(Dt)}return Kt}function Nt(){(!Ae||Ne===y.Z.TEXT&&be.isTextEnabled())&&Dn()}function en(){rr()}function Jt(){rr(),Ge=NaN}function Wt(nt,Kt){if(!we)return null;var ze,Ve,Dt=we.getAllBufferRanges(),fn=0,Tn=0,sr=null,Zr=null,Ai=0,zr=isNaN(Kt)?.15:Kt;if(Dt!=null){for(Ve=0,ze=Dt.length;Ve<ze;Ve++)if(fn=Dt.start(Ve),Tn=Dt.end(Ve),sr===null)Ai=Math.abs(fn-nt),(nt>=fn&&nt<Tn||Ai<=zr)&&(sr=fn,Zr=Tn);else{if(!((Ai=fn-Zr)<=zr))break;Zr=Tn}if(sr!==null)return{start:sr,end:Zr}}return null}function Dn(){if(xe){var nt=xe.getTime()||0;ie&&(nt=isNaN(Ge)?0:Ge);var Kt=Xe.get().streaming.gaps.jumpGaps&&!isNaN(Xe.get().streaming.gaps.smallGapLimit)?Xe.get().streaming.gaps.smallGapLimit:NaN;ee=Math.max(function(ze,Ve){var Dt;return Xe.get().streaming.gaps.jumpGaps&&(Ve=Xe.get().streaming.gaps.smallGapLimit),(Dt=Wt(ze,Ve))===null?0:Dt.end-ze}(nt,Kt),0),On(T.Z.BUFFER_LEVEL_UPDATED,{mediaType:Ne,bufferLevel:ee}),rr()}}function xn(){var nt=ne>=ce-1,Kt=xe.getTimeToStreamEnd(he)-ee<1e-5;!nt&&!Kt||V||(Ct(!0),B.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(he.id," and type ").concat(Ne)))}function rr(){Ne!==y.Z.AUDIO&&Ne!==y.Z.VIDEO||((!xe.getLowLatencyModeEnabled()&&ee<Xe.get().streaming.buffer.stallThreshold||ee===0)&&!V?ir(D.Z.BUFFER_EMPTY):(V||ee>=Xe.get().streaming.buffer.stallThreshold||xe.getLowLatencyModeEnabled()&&ee>0)&&ir(D.Z.BUFFER_LOADED))}function ir(nt){pe===nt||nt===D.Z.BUFFER_EMPTY&&xe.getTime()===0||Ne===y.Z.TEXT&&!be.isTextEnabled()||(pe=nt,On(T.Z.BUFFER_LEVEL_STATE_CHANGED,{state:nt}),On(nt===D.Z.BUFFER_LOADED?T.Z.BUFFER_LOADED:T.Z.BUFFER_EMPTY),B.debug(nt===D.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function bt(){we&&Ne!==y.Z.TEXT&&(V||Gt(Xt()))}function Xt(){var nt=[],Kt=we.getAllBufferRanges();if(!Kt||Kt.length===0)return nt;var ze=xe.getTime(),Ve=Math.max(0,ze-Xe.get().streaming.buffer.bufferToKeep),Dt=se.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:ze,threshold:rt})[0];if(Dt)Ve=Math.min(Dt.startTime,Ve);else if(ze===0&&xe.getIsDynamic())return[];if(Kt.start(0)<=Ve){for(var fn={start:0,end:Ve},Tn=0;Tn<Kt.length&&Kt.end(Tn)<=Ve;Tn++)fn.end=Kt.end(Tn);fn.start<fn.end&&nt.push(fn)}return nt}function Gt(nt){return new Promise(function(Kt,ze){if(nt&&we&&nt.length!==0){var Ve=[];nt.forEach(function(Dt){Ve.push(function(fn){return new Promise(function(Tn,sr){fn.resolve=Tn,fn.reject=sr,ke.push(fn)})}(Dt))}),Ze||un(),Promise.all(Ve).then(function(){Kt()}).catch(function(Dt){ze(Dt)})}else Kt()})}function un(){try{if(ke.length===0||!we)return B.debug("Nothing to prune, halt pruning"),ke=[],void(Ze=!1);var nt=we.getBuffer();if(!nt||!nt.buffered||nt.buffered.length===0)return B.debug("SourceBuffer is empty (or does not exist), halt pruning"),ke=[],void(Ze=!1);var Kt=ke.shift();B.debug("".concat(Ne,": Removing buffer from: ").concat(Kt.start," to ").concat(Kt.end)),Ze=!0,xe.getTime()<Kt.end&&Ct(!1),we.remove(Kt).then(function(ze){vn(ze)}).catch(function(ze){vn(ze)})}catch(ze){Ze=!1}}function vn(nt){B.debug("onRemoved buffer from:",nt.from,"to",nt.to),we&&(An(we.getAllBufferRanges()),ke.length===0&&(Ze=!1,Dn()),nt.unintended&&(B.warn("Detected unintended removal from:",nt.from,"to",nt.to,"setting streamprocessor time to",nt.from),On(T.Z.SEEK_TARGET,{time:nt.from})),Ze?un():(Ae?Ae=!1:Dn(),On(T.Z.BUFFER_CLEARED,{from:nt.from,to:nt.to,unintended:nt.unintended,hasEnoughSpaceToAppend:Lt(),quotaExceeded:$e})))}function Pn(nt){return new Promise(function(Kt){nt&&nt.MSETimeOffset!==void 0&&we&&we.updateTimestampOffset?we.updateTimestampOffset(nt.MSETimeOffset).then(function(){Kt()}).catch(function(){Kt()}):Kt()})}function Nn(){return we&&!V?we.updateAppendWindow(he):Promise.resolve()}function Fn(){++Oe*(Xe.get().streaming.wallclockTimeUpdateInterval/1e3)>=Xe.get().streaming.buffer.bufferPruningInterval&&(Oe=0,bt())}function Gn(){rr()}function Ct(nt){(V=nt)?On(T.Z.BUFFERING_COMPLETED):ce=Number.POSITIVE_INFINITY}function Sn(){try{var nt,Kt,ze=we.getAllBufferRanges(),Ve=0;if(!ze)return Ve;for(Kt=0,nt=ze.length;Kt<nt;Kt++)Ve+=ze.end(Kt)-ze.start(Kt);return Ve}catch(Dt){return 0}}function En(nt){try{var Kt=nt,ze=we.getAllBufferRanges();if(!ze||ze.length===0)return NaN;for(var Ve=0;Kt===nt&&Ve<ze.length;){var Dt=ze.start(Ve),fn=ze.end(Ve);Kt>=Dt&&Kt<=fn&&(Kt=fn),Ve+=1}return Kt===nt?NaN:Kt}catch(Tn){}}function Lt(){var nt=Sn();return isNaN(nt)||nt<J}function On(nt,Kt){var ze=Kt||{};le.trigger(nt,ze,{streamId:he.id,mediaType:Ne})}function ct(nt,Kt){if(J=Number.POSITIVE_INFINITY,pe=void 0,ce=Number.POSITIVE_INFINITY,ne=0,He=null,V=!1,Ze=!1,$e=!1,ee=0,Oe=0,ke=[],Ge=NaN,ie=!1,we){var ze=we;we=null,nt||Kt||ze.abort().then(function(){ze.reset(Kt),ze=null})}Ae=!1}return P={initialize:function(nt){ht(nt),le.on(T.Z.INIT_FRAGMENT_LOADED,Ht,P),le.on(T.Z.MEDIA_FRAGMENT_LOADED,Ft,P),le.on(T.Z.WALLCLOCK_TIME_UPDATED,Fn,P),le.on(_.Z.PLAYBACK_PLAYING,Jt,P),le.on(_.Z.PLAYBACK_PROGRESS,Nt,P),le.on(_.Z.PLAYBACK_TIME_UPDATED,Nt,P),le.on(_.Z.PLAYBACK_RATE_CHANGED,Gn,P),le.on(_.Z.PLAYBACK_STALLED,en,P)},getStreamId:function(){return he.id},getType:function(){return Ne},getBufferControllerType:function(){return qt},createBufferSink:et,dischargePreBuffer:function(){if(we&&ye&&typeof ye.discharge=="function"){var nt=ye.getAllBufferRanges();if(nt.length>0){for(var Kt="Beginning "+Ne+"PreBuffer discharge, adding buffer for:",ze=0;ze<nt.length;ze++)Kt+=" start: "+nt.start(ze)+", end: "+nt.end(ze)+";";B.debug(Kt)}else B.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");me=[];for(var Ve=ye.discharge(),Dt=null,fn=0;fn<Ve.length;fn++){var Tn=Ve[fn];if(Tn.segmentType!==ot.w.INIT_SEGMENT_TYPE){var sr=Ee.extract(Tn.streamId,Tn.representationId);sr&&Dt!==sr&&(me.push(sr),we.append(sr),Dt=sr)}me.push(Tn),we.append(Tn)}ye.reset(),ye=null}},getBuffer:function(){return we},getBufferLevel:function(){return ee},getRangeAt:Wt,hasBufferAtTime:function(nt){try{var Kt=we.getAllBufferRanges();if(!Kt||Kt.length===0)return!1;for(var ze=0;ze<Kt.length;){var Ve=Kt.start(ze),Dt=Kt.end(ze);if(nt>=Ve&&nt<=Dt)return!0;ze+=1}return!1}catch(fn){return B.error(fn),!1}},pruneBuffer:bt,setMediaSource:ht,getMediaSource:function(){return H},appendInitSegmentFromCache:function(nt){var Kt=Ee.extract(he.id,nt);return!!Kt&&(B.info("Append Init fragment",Ne," with representationId:",Kt.representationId," and quality:",Kt.quality,", data size:",Kt.bytes.byteLength),Ut(Kt),!0)},getIsBufferingCompleted:function(){return V},setIsBufferingCompleted:Ct,getIsPruningInProgress:function(){return Ze},reset:function(nt,Kt){le.off(T.Z.INIT_FRAGMENT_LOADED,Ht,this),le.off(T.Z.MEDIA_FRAGMENT_LOADED,Ft,this),le.off(T.Z.WALLCLOCK_TIME_UPDATED,Fn,this),le.off(_.Z.PLAYBACK_PLAYING,Jt,this),le.off(_.Z.PLAYBACK_PROGRESS,Nt,this),le.off(_.Z.PLAYBACK_TIME_UPDATED,Nt,this),le.off(_.Z.PLAYBACK_RATE_CHANGED,Gn,this),le.off(_.Z.PLAYBACK_STALLED,en,this),ct(nt,Kt)},prepareForPlaybackSeek:function(){return V&&Ct(!1),we.abort()},prepareForReplacementTrackSwitch:function(nt){return new Promise(function(Kt,ze){we.abort().then(function(){return Nn()}).then(function(){return Xe.get().streaming.buffer.useChangeTypeForTrackSwitch?we.changeType(nt):Promise.resolve()}).then(function(){return yt()}).then(function(){Ct(!1),Kt()}).catch(function(Ve){ze(Ve)})})},prepareForNonReplacementTrackSwitch:function(nt){return new Promise(function(Kt,ze){Nn().then(function(){return Xe.get().streaming.buffer.useChangeTypeForTrackSwitch?we.changeType(nt):Promise.resolve()}).then(function(){Kt()}).catch(function(Ve){ze(Ve)})})},prepareForForceReplacementQualitySwitch:function(nt){return new Promise(function(Kt,ze){we.abort().then(function(){return Nn()}).then(function(){return yt()}).then(function(){return Pn(nt)}).then(function(){Ct(!1),Kt()}).catch(function(Ve){ze(Ve)})})},updateAppendWindow:Nn,getAllRangesWithSafetyFactor:$t,getContinuousBufferTimeForTargetTime:En,clearBuffers:Gt,pruneAllSafely:yt,updateBufferTimestampOffset:Pn,setSeekTarget:function(nt){Ge=nt},segmentRequestingCompleted:function(nt){isNaN(nt)||(ce=nt,xn())}},B=(0,N.Z)(Z).getInstance().getLogger(P),Ee=We(Z).getInstance(),ct(),P}kt.__dashjs_factory_name=qt;var ft=F.Z.getClassFactory(kt),At="NotFragmentedTextBufferController";function Ce(L){L=L||{};var P,B,V,ee,J,H,ne=this.context,ce=(0,m.Z)(ne).getInstance(),we=L.textController,ye=L.errHandler,ie=L.streamInfo,me=L.type;function pe(Ze){ee=Ze}function He(Ze){var $e,Ee;B!==Ze&&(B=Ze)&&($e=T.Z.BUFFERING_COMPLETED,Ee={},ce.trigger($e,Ee,{streamId:ie.id,mediaType:me}))}function Oe(Ze){Ze.chunk.bytes&&!B&&(H.save(Ze.chunk),J.append(Ze.chunk),He(!0))}return P={initialize:function(Ze){pe(Ze)},getStreamId:function(){return ie.id},getType:function(){return me},getBufferControllerType:function(){return At},createBufferSink:function(Ze){return new Promise(function($e,Ee){try{(J=Ie(ne).create({mediaSource:ee,textController:we,eventBus:ce})).initializeForFirstUse(ie,Ze),V||(J.getBuffer()&&typeof J.getBuffer().initialize=="function"&&J.getBuffer().initialize(),V=!0),$e(J)}catch(ke){ye.error(new fe.Z(Se.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Se.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+me)),Ee(ke)}})},dischargePreBuffer:function(){},getBuffer:function(){return J},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:pe,getMediaSource:function(){return ee},appendInitSegmentFromCache:function(Ze){return H.extract(ie.id,Ze)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:He,getIsPruningInProgress:function(){return!1},reset:function(Ze){ce.off(T.Z.INIT_FRAGMENT_LOADED,Oe,P),!Ze&&J&&(J.abort(),J.reset(),J=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},V=!1,ee=null,B=!1,H=We(ne).getInstance(),ce.on(T.Z.INIT_FRAGMENT_LOADED,Oe,P),P}Ce.__dashjs_factory_name=At;var re=F.Z.getClassFactory(Ce);function je(L){L=L||{};var P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He=this.context,Oe=(0,m.Z)(He).getInstance(),Ze=L.dashMetrics,$e=L.mediaPlayerModel,Ee=L.fragmentModel,ke=L.abrController,Ae=L.playbackController,Ge=L.textController,Z=L.type,le=L.bufferController,ae=L.representationController,se=L.settings;function Q(){me=!0}function Pe(){me=!1}function be(jt){if(!le.getIsBufferingCompleted()){Fe();var Ht=isNaN(jt)?0:jt;J=setTimeout(xe,Ht)}}function Fe(){J&&(clearTimeout(J),J=null)}function xe(){try{if(function(){try{return Z===y.Z.TEXT&&!Ge.isTextEnabled()||Ae.isPaused()&&(!Ae.getStreamController().getInitialPlayback()||!Ae.getStreamController().getAutoPlay())&&!se.get().streaming.scheduling.scheduleWhilePaused}catch(Ft){return!1}}())return void Fe();if(function(){try{return!!me&&ae.getCurrentRepresentationInfo()&&(isNaN(we)||ye||(Ft=B.id,Ut=ke.getMaxAllowedIndexFor(Z,Ft),!(!isNaN(ce)&&ce==Ut||(V.info("Top quality "+Z+" index has changed from "+ce+" to "+Ut),ce=Ut,0)))||function(){var An=ae.getCurrentRepresentationInfo();return!Z||!An||Ze.getCurrentBufferLevel(Z)<he()}())}catch(An){return!1}var Ft,Ut}()){var jt=!1;pe&&(jt=ke.checkPlaybackQuality(Z,B.id)),jt||(Ht=ae.getCurrentRepresentationInfo(),ie||Ht.quality!==we||ye?(ye?(V.debug("Switch track for "+Z+", representation id = "+Ht.id),ye=!1):V.debug("Quality has changed, get init request for representationid = "+Ht.id),Oe.trigger(T.Z.INIT_FRAGMENT_NEEDED,{representationId:Ht.id,sender:P},{streamId:B.id,mediaType:Z}),pe=!1,ie=!1):(V.debug("Media segment needed for ".concat(Z," and stream id ").concat(B.id)),Oe.trigger(T.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:B.id,mediaType:Z}),pe=!0))}else be(Ae.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}catch(Ft){be(Ae.getLowLatencyModeEnabled()?se.get().streaming.scheduling.lowLatencyTimeout:se.get().streaming.scheduling.defaultTimeout)}var Ht}function he(){var jt=NaN,Ht=ae.getCurrentRepresentationInfo();return Z&&Ht&&(jt=Z===y.Z.TEXT?function(){try{if(Ge.isTextEnabled()){var Ft=ae.getCurrentRepresentationInfo();if(isNaN(Ft.fragmentDuration)){var Ut=Ze.getCurrentSchedulingInfo(D.Z.SCHEDULING_INFO);return Ut?Ut.duration:0}return Ft.fragmentDuration}return 0}catch(An){return 0}}():Z===y.Z.AUDIO&&H?function(){try{var Ft=Ze.getCurrentBufferLevel(y.Z.VIDEO),Ut=ae.getCurrentRepresentationInfo();return isNaN(Ut.fragmentDuration)?Ft+1:Math.max(Ft+1,Ut.fragmentDuration)}catch(An){return 0}}():function(){try{var Ft=ae.getCurrentRepresentationInfo().mediaInfo.streamInfo;return ke.isPlayingAtTopQuality(Ft)?Ft.manifestInfo.duration>=se.get().streaming.buffer.longFormContentDurationThreshold?se.get().streaming.buffer.bufferTimeAtTopQualityLongForm:se.get().streaming.buffer.bufferTimeAtTopQuality:$e.getStableBufferTime()}catch(Ut){return $e.getStableBufferTime()}}()),jt}function Ne(){Xe(!0)}function Xe(jt){if(Ae&&Ee){var Ht=Ee.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ae.getTime(),threshold:0})[0];Ht&&Ae.getTime()>=Ht.startTime&&((!ne.mediaInfo||Ht.mediaInfo.type===ne.mediaInfo.type&&Ht.mediaInfo.index!==ne.mediaInfo.index)&&jt&&Oe.trigger(T.Z.TRACK_CHANGE_RENDERED,{mediaType:Z,oldMediaInfo:ne.mediaInfo,newMediaInfo:Ht.mediaInfo,streamId:B.id}),Ht.quality===ne.quality&&Ht.adaptationIndex===ne.adaptationIndex||!jt||(V.debug("Quality change rendered for streamId ".concat(B.id," and type ").concat(Z)),Oe.trigger(T.Z.QUALITY_CHANGE_RENDERED,{mediaType:Z,oldQuality:ne.quality,newQuality:Ht.quality,streamId:B.id})),ne={mediaInfo:Ht.mediaInfo,quality:Ht.quality,adaptationIndex:Ht.adaptationIndex})}}function ht(){Ee.abortRequests(),Fe()}function lt(){se.get().streaming.scheduling.scheduleWhilePaused||be()}function et(jt){Ze.updatePlayListTraceMetrics({playbackspeed:jt.playbackRate.toString()})}function pt(){pe=!0,ee=0,we=NaN,ne={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},ce=NaN,ye=!1,ie=!1,me=!0}return P={initialize:function(jt){H=jt,Oe.on(T.Z.URL_RESOLUTION_FAILED,ht,P),Oe.on(_.Z.PLAYBACK_STARTED,lt,P),Oe.on(_.Z.PLAYBACK_RATE_CHANGED,et,P),Oe.on(_.Z.PLAYBACK_TIME_UPDATED,Ne,P),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),Oe.on(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,P)},getType:function(){return Z},getStreamId:function(){return B.id},setTimeToLoadDelay:function(jt){ee=jt},getTimeToLoadDelay:function(){return ee},setSwitchTrack:function(jt){ye=jt},getSwitchTrack:function(){return ye},startScheduleTimer:be,clearScheduleTimer:Fe,reset:function(){Oe.off(T.Z.URL_RESOLUTION_FAILED,ht,P),Oe.off(_.Z.PLAYBACK_STARTED,lt,P),Oe.off(_.Z.PLAYBACK_RATE_CHANGED,et,P),Oe.off(_.Z.PLAYBACK_TIME_UPDATED,Ne,P),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,Q,P),Oe.off(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Pe,P),Fe(),Xe(!1),pt(),B=null},getBufferTarget:he,getPlaybackController:function(){return Ae},setCheckPlaybackQuality:function(jt){pe=jt},setInitSegmentRequired:function(jt){ie=jt},setLastInitializedQuality:function(jt){we=jt}},V=(0,N.Z)(He).getInstance().getLogger(P),pt(),B=L.streamInfo,P}je.__dashjs_factory_name="ScheduleController";var O=F.Z.getClassFactory(je),M=A(7387);function q(L){var P,B,V,ee,J,H,ne=(L=L||{}).eventBus,ce=L.events,we=L.abrController,ye=L.dashMetrics,ie=L.playbackController,me=L.timelineConverter,pe=L.type,He=L.streamInfo,Oe=L.dashConstants,Ze=L.segmentsController,$e=L.isDynamic,Ee=L.adapter;function ke(){return pe}function Ae(){return V}function Ge(){return H}function Z(){B=null,V=!0,ee=[],J=null}function le(Fe){return new Promise(function(xe,he){var Ne=Fe.hasInitialization(),Xe=Fe.hasSegments(),ht=[];ht.push(Ze.updateInitData(Fe,Ne)),ht.push(Ze.updateSegmentData(Fe,Xe)),Promise.all(ht).then(function(lt){var et;lt[0]&&!lt[0].error&&(Fe=function(pt,jt){return jt&&!jt.error&&jt.representation?jt.representation:pt}(Fe,lt[0])),lt[1]&&!lt[1].error&&(Fe=function(pt,jt){if(jt&&!jt.error){var Ht,Ft,Ut,An,it=jt.segments,yt=[],$t=0;for(Ht=0,Ft=it?it.length:0;Ht<Ft;Ht++)Ut=it[Ht],(An=(0,M.TJ)(me,$e,pt,Ut.startTime,Ut.duration,Ut.timescale,Ut.media,Ut.mediaRange,$t))&&(yt.push(An),An=null,$t++);return yt.length>0&&(pt.segments=yt),pt}}(Fe,lt[1])),(et=Fe).mediaFinishedInformation=Ze.getMediaFinishedInformation(et),function(pt){if(Ae()){var jt,Ht,Ft=ye.getCurrentManifestUpdate(),Ut=!1;if(Ft){for(var An=0;An<Ft.representationInfo.length;An++)if((jt=Ft.representationInfo[An]).index===pt.index&&jt.mediaType===ke()){Ut=!0;break}Ut||ye.addManifestUpdateRepresentationInfo(pt,ke())}if(function(){for(var yt=0,$t=ee.length;yt<$t;yt++){var Nt=ee[yt].segmentInfoType;if(!ee[yt].hasInitialization()||(Nt===Oe.SEGMENT_BASE||Nt===Oe.BASE_URL)&&!ee[yt].segments)return!1}return!0}()){we.setPlaybackQuality(pe,He,(Ht=H,ee.indexOf(Ht)));var it=ye.getCurrentDVRInfo(pe);it&&ye.updateManifestUpdateInfo({latency:it.range.end-ie.getTime()}),ye.getCurrentRepresentationSwitch(Ge().adaptation.type)||ae(),Q()}}}(Fe),xe()}).catch(function(lt){he(lt)})})}function ae(){(function(){if(!(we&&ye&&ie&&me))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var Fe=new Date,xe=Ge(),he=1e3*ie.getTime();xe&&ye.addRepresentationSwitch(xe.adaptation.type,Fe,he,xe.id),ne.trigger(_.Z.REPRESENTATION_SWITCH,{mediaType:pe,streamId:He.id,currentRepresentation:xe,numberOfRepresentations:ee.length},{streamId:He.id,mediaType:pe})}function se(Fe){return Fe==null||Fe>=ee.length?null:ee[Fe]}function Q(Fe){V=!1,ne.trigger(ce.DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:H,error:Fe},{streamId:He.id,mediaType:pe})}function Pe(Fe){H=Fe,J=Ee.convertRepresentationToRepresentationInfo(H)}function be(Fe){if(Fe.newDuration){var xe=Ge();xe&&xe.adaptation.period&&(xe.adaptation.period.duration=Fe.newDuration)}}return P={getStreamId:function(){return He.id},getType:ke,getData:function(){return B},isUpdating:Ae,updateData:function(Fe,xe,he,Ne,Xe){return new Promise(function(ht,lt){if(V=!0,ee=xe,B=Fe,Pe(se(Xe)),he!==y.Z.VIDEO&&he!==y.Z.AUDIO&&(he!==y.Z.TEXT||!Ne))return Q(),void ht();for(var et=[],pt=0,jt=ee.length;pt<jt;pt++){var Ht=ee[pt];et.push(le(Ht))}Promise.all(et).then(function(){Pe(se(Xe)),ht()}).catch(function(Ft){lt(Ft)})})},getCurrentRepresentation:Ge,getCurrentRepresentationInfo:function(){return J},getRepresentationForQuality:se,prepareQualityChange:function(Fe){Pe(se(Fe)),ae()},reset:function(){ne.off(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),Z()}},Z(),ne.on(_.Z.MANIFEST_VALIDITY_CHANGED,be,P),P}q.__dashjs_factory_name="RepresentationController";var K=F.Z.getClassFactory(q),_e=A(3106),de=A(9326),Ke=A(7473),St=A(2594);function ut(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var at=function L(){ut(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};at.INITIAL_PLAYOUT_START_REASON="initial_playout",at.SEEK_START_REASON="seek",at.RESUME_FROM_PAUSE_START_REASON="resume",at.METRICS_COLLECTION_START_REASON="metrics_collection_start";var tt=function L(){ut(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};tt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",tt.REBUFFERING_REASON="rebuffering",tt.USER_REQUEST_STOP_REASON="user_request",tt.END_OF_PERIOD_STOP_REASON="end_of_period",tt.END_OF_CONTENT_STOP_REASON="end_of_content",tt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",tt.FAILURE_STOP_REASON="failure";var dt=A(7802);function Et(){return{ntpToUTC:function(L){var P=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(P.getTime()+L).getTime()}}}Et.__dashjs_factory_name="TimeUtils";var Tt=F.Z.getSingletonFactory(Et);function Rt(L){L=L||{};var P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze=this.context,$e=(0,m.Z)(Ze).getInstance(),Ee=L.streamInfo,ke=L.type,Ae=L.errHandler,Ge=L.mimeType,Z=L.timelineConverter,le=L.adapter,ae=L.manifestModel,se=L.mediaPlayerModel,Q=L.fragmentModel,Pe=L.abrController,be=L.playbackController,Fe=L.mediaController,xe=L.textController,he=L.dashMetrics,Ne=L.settings,Xe=L.boxParser,ht=L.segmentBlacklistController;function lt(){return Ee.id}function et(){return ke}function pt(){return le.getIsTextTrack(ce.getData())}function jt(){J=[],ee=null,He=0,we=!1,ye=!1,ie=!1,Oe=null}function Ht(ct){return!isNaN(ct)&&!isNaN(Ee.duration)&&isFinite(Ee.duration)&&ct>=Ee.start+Ee.duration}function Ft(ct){var nt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(ct.sender){if(be.getIsManifestUpdateInProgress())$t();else if((!pt()||xe.isTextEnabled())&&H&&ct.representationId&&!H.appendInitSegmentFromCache(ct.representationId)){var Kt=ce.getCurrentRepresentation();if(Kt.range===0)return void Ut();var ze=me?me.getInitRequest(ee,Kt):null;ze?Q.executeRequest(ze):nt&&(ne.setInitSegmentRequired(!0),$t())}}}function Ut(ct){var nt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(be.getIsManifestUpdateInProgress()||H.getIsPruningInProgress())$t();else{var Kt=yt();Kt?(we=!1,ye=!1,An(Kt)):it(nt)}}function An(ct){isNaN(ct.startTime+ct.duration)||(He=ct.startTime+ct.duration),ct.delayLoadingTime=new Date().getTime()+ne.getTimeToLoadDelay(),ne.setTimeToLoadDelay(0),function(nt){var Kt=nt.url;return nt.range&&(Kt=Kt.concat("_",nt.range)),ht.contains(Kt)}(ct)?(B.warn("Fragment request url ".concat(ct.url," for stream id ").concat(Ee.id," and media type ").concat(ke," is on the ignore list and will be skipped")),$t()):(B.debug("Next fragment request url for stream id ".concat(Ee.id," and media type ").concat(ke," is ").concat(ct.url)),Q.executeRequest(ct))}function it(ct){var nt,Kt=ce.getCurrentRepresentation();if(!Ne.get().streaming.gaps.enableSeekFix||!we&&be.getTime()!==0||(V?V&&Kt.segmentInfoType===v.Z.SEGMENT_TIMELINE&&(nt=me.getValidTimeAheadOfTargetTime(He,ee,Kt,Ne.get().streaming.gaps.threshold)):nt=me.getValidTimeAheadOfTargetTime(He,ee,Kt,Ne.get().streaming.gaps.threshold),isNaN(nt)||nt===He)){if(me.isLastSegmentRequested(Kt,He)){var ze=me.getCurrentIndex();return B.debug("Segment requesting for stream ".concat(Ee.id," has finished")),$e.trigger(T.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:ze},{streamId:Ee.id,mediaType:ke}),H.segmentRequestingCompleted(ze),void ne.clearScheduleTimer()}ct&&$t()}else be.isSeeking()||be.getTime()===0?(B.warn("Adjusting playback time ".concat(nt," because of gap in the manifest. Seeking by ").concat(nt-He)),be.seek(nt,!1,!1)):(B.warn("Adjusting buffering time ".concat(nt," because of gap in the manifest. Adjusting time by ").concat(nt-He)),On(nt),ct&&$t())}function yt(){var ct,nt=Nn();if(isNaN(He)||et()===y.Z.TEXT&&!xe.isTextEnabled())return null;if(me){var Kt=ce&&nt?ce.getRepresentationForQuality(nt.quality):null;ct=we?me.getSegmentRequestForTime(ee,Kt,He):ye?me.repeatSegmentRequest(ee,Kt):me.getNextSegmentRequest(ee,Kt)}return ct}function $t(){ne.startScheduleTimer(be.getLowLatencyModeEnabled()?Ne.get().streaming.scheduling.lowLatencyTimeout:Ne.get().streaming.scheduling.defaultTimeout)}function Nt(ct){ct.error||H.getIsBufferingCompleted()||H.updateBufferTimestampOffset(ct.currentRepresentation)}function en(ct){he.addBufferState(ke,ct.state,ne.getBufferTarget()),ct.state!==D.Z.BUFFER_EMPTY||be.isSeeking()||(B.info("Buffer is empty! Stalling!"),he.pushPlayListTraceMetrics(new Date,tt.REBUFFERING_REASON))}function Jt(ct){Q.syncExecutedRequestsWithBufferedRange(H.getBuffer().getAllBufferRanges(),Ee.duration),ct.quotaExceeded&&ct.from>be.getTime()&&On(ct.from),ct.hasEnoughSpaceToAppend&&ct.quotaExceeded&&ne.startScheduleTimer()}function Wt(ct){if(ct&&ct.lastRequestAppended&&ct.lastRequestAppended.url){var nt=ct.lastRequestAppended.url;ct.lastRequestAppended.range&&(nt=nt.concat("_",ct.lastRequestAppended.range)),B.warn("Blacklisting segment with url ".concat(nt)),ht.add(nt)}}function Dn(ct){if(B.debug("Appended bytes for ".concat(ct.mediaType," and stream id ").concat(ct.streamId)),ct.segmentType===ot.w.INIT_SEGMENT_TYPE){var nt=ct.quality;ne.setLastInitializedQuality(nt),B.info("["+ke+"] lastInitializedRepresentationInfo changed to "+ct.quality)}Oe?xn(Oe):ne.startScheduleTimer(0)}function xn(ct){var nt=Q.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(nt&&nt.length>0)return B.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Oe=ct);H.updateBufferTimestampOffset(ct).then(function(){ne.setCheckPlaybackQuality(!1),ee.segmentAlignment||ee.subSegmentAlignment?ne.startScheduleTimer():En(),Oe=null,ie=!1}).catch(function(){Oe=null,ie=!1})}function rr(ct){B.info("onFragmentLoadingAbandoned request: "+ct.request.url+" has been aborted"),be.isSeeking()||ne.getSwitchTrack()||ie||(B.info("onFragmentLoadingAbandoned request: "+ct.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),ct.request&&ct.request.isInitializationRequest()?ne.setInitSegmentRequired(!0):On(ct.request.startTime+ct.request.duration/2),ne.startScheduleTimer(0))}function ir(ct){B.info("OnFragmentLoadingCompleted for stream id "+Ee.id+" and media type "+ke+" - Url:",ct.request?ct.request.url:"undefined",ct.request.range?", Range:"+ct.request.range:""),pt()&&ne.startScheduleTimer(0),ct.error&&ct.request.serviceLocation&&function(nt){B.info("Fragment loading completed with an error"),nt&&nt.request&&nt.request.type&&(nt.request.type===ot.w.INIT_SEGMENT_TYPE?Ft({representationId:nt.request.representationId,sender:{}},!1):nt.request.type===ot.w.MEDIA_SEGMENT_TYPE&&(On(nt.request.startTime+nt.request.duration/2),Ut({},!1)))}(ct)}function bt(){On(be.getTime()),Pn().startScheduleTimer()}function Xt(ct){var nt=ct.currentTrackInfo;if(nt){var Kt=J.find(function(ze){return ze.index===nt.index&&ze.lang===nt.lang});Kt&&vn(Kt).then(function(){H.setIsBufferingCompleted(!1),On(be.getTime()),ne.setInitSegmentRequired(!0),ne.startScheduleTimer()})}}function Gt(ct){On(ct.quotaExceededTime),ne.clearScheduleTimer()}function un(){return H?H.getBuffer():null}function vn(ct){ct===ee||ct&&ee&&ct.type!==ee.type||(ee=ct);var nt=le.getRealAdaptation(Ee,ee),Kt=le.getVoRepresentations(ee);if(ce){var ze,Ve=ce.getData(),Dt=Pe.getMaxAllowedIndexFor(ke,Ee.id),fn=Pe.getMinAllowedIndexFor(ke,Ee.id),Tn=null;return Ve!==null&&Ve.id===nt.id||ke===y.Z.TEXT?ze=Pe.getQualityFor(ke,Ee.id):(Tn=Pe.getThroughputHistory().getAverageThroughput(ke,V)||Pe.getInitialBitrateFor(ke,Ee.id),ze=Pe.getQualityForBitrate(ee,Tn,Ee.id)),fn!==void 0&&ze<fn&&(ze=fn),ze>Dt&&(ze=Dt),ce.updateData(nt,Kt,ke,ee.isFragmented,ze)}return Promise.resolve()}function Pn(){return ne}function Nn(ct){var nt;return ct!==void 0?((0,_e.SE)(ct),nt=ce?ce.getRepresentationForQuality(ct):null):nt=ce?ce.getCurrentRepresentation():null,le.convertRepresentationToRepresentationInfo(nt)}function Fn(){return!!H&&H.getIsBufferingCompleted()}function Gn(ct){if(Ne.get().streaming.enableManifestTimescaleMismatchFix){var nt=ct.chunk,Kt=nt.bytes,ze=Nn(nt.quality),Ve=ce&&ze?ce.getRepresentationForQuality(ze.quality):null;ze&&Ve&&(Ve.timescale=Xe.getMediaTimescaleFromMoov(Kt))}}function Ct(ct){var nt=ct.chunk,Kt=nt.bytes,ze=nt.quality,Ve=Nn(ze),Dt=ce&&Ve?ce.getRepresentationForQuality(Ve.quality):null;if(Ve&&Dt){var fn;if(Ne.get().streaming.parseInbandPrft&&ct.request.type===ot.w.MEDIA_SEGMENT_TYPE){var Tn=function(io,Zi){var Bs=io.getBoxes("prft"),Qu=[];return Bs.forEach(function(Ju){Qu.push(function(Xa,js){var Po="unknown";switch(Xa.flags){case 0:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Po=v.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var Eu=1e3*Xa.ntp_timestamp_sec+Xa.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Po,ntpTimestamp:Eu=Tt(Ze).getInstance().ntpToUTC(Eu),mediaTime:Xa.media_time/js}}(Ju,Zi))}),Qu}(fn=fn||Xe.parse(Kt),Dt.timescale);Tn&&Tn.length&&$e.trigger(_.Z.INBAND_PRFT,{data:Tn},{streamId:Ee.id,mediaType:ke})}var sr=le.getEventsFor(Ve.mediaInfo,null,Ee),Zr=le.getEventsFor(Ve,Dt,Ee);if(sr&&sr.length>0||Zr&&Zr.length>0){var Ai=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:ze,index:nt.index})[0],zr=function(io,Zi,Bs,Qu){try{for(var Ju={},Xa=[],js=Bs.concat(Qu),Po=0,Eu=js.length;Po<Eu;Po++)Ju[js[Po].schemeIdUri+"/"+js[Po].value]=js[Po];var _u=io.getBoxes("emsg");if(!_u||_u.length===0)return Xa;for(var fa=io.getBox("sidx"),Uc=!fa||isNaN(fa.earliest_presentation_time)||isNaN(fa.timescale)?Zi&&!isNaN(Zi.mediaStartTime)?Zi.mediaStartTime:0:fa.earliest_presentation_time/fa.timescale,Xf=Math.max(Uc,0),el=ce.getCurrentRepresentation(),Qa=0,Bc=_u.length;Qa<Bc;Qa++){var Zs=le.getEvent(_u[Qa],Ju,Xf,el);Zs&&Xa.push(Zs)}return Xa}catch(Pt){return[]}}(fn=fn||Xe.parse(Kt),Ai,sr,Zr);$e.trigger(T.Z.INBAND_EVENTS,{events:zr},{streamId:Ee.id})}}}function Sn(){var ct=be.getTime();Ne.get().streaming.buffer.flushBufferAtTrackSwitch&&be.seek(ct+.001,!1,!0),On(ct),H.setSeekTarget(ct),ne.startScheduleTimer()}function En(){var ct=be.getTime(),nt=H.getContinuousBufferTimeForTargetTime(ct);On(isNaN(nt)?ct:nt),ne.startScheduleTimer()}function Lt(ct){ct&&!isNaN(ct.time)&&(On(ct.time),H.setSeekTarget(ct.time))}function On(ct){He=ct,we=!0}return P={initialize:function(ct,nt,Kt){pe=(0,dt.Z)(Ze).create({events:T.Z,eventBus:$e,streamInfo:Ee,timelineConverter:Z,dashConstants:v.Z,segmentBaseController:L.segmentBaseController,type:ke}),me=(0,de.Z)(Ze).create({streamInfo:Ee,type:ke,timelineConverter:Z,dashMetrics:he,mediaPlayerModel:se,baseURLController:L.baseURLController,errHandler:Ae,segmentsController:pe,settings:Ne,boxParser:Xe,events:T.Z,eventBus:$e,errors:Se,debug:(0,N.Z)(Ze).getInstance(),requestModifier:(0,Ke.Z)(Ze).getInstance(),dashConstants:v.Z,constants:y.Z,urlUtils:(0,St.Z)(Ze).getInstance()}),V=Ee.manifestInfo.isDynamic,me.initialize(V),Pe.registerStreamType(ke,P),ce=K(Ze).create({streamInfo:Ee,type:ke,abrController:Pe,dashMetrics:he,playbackController:be,timelineConverter:Z,dashConstants:v.Z,events:T.Z,eventBus:$e,errors:Se,isDynamic:V,adapter:le,segmentsController:pe}),H=function(ze,Ve){return ze?ze!==y.Z.TEXT||Ve?ft(Ze).create({streamInfo:Ee,type:ze,mediaPlayerModel:se,manifestModel:ae,fragmentModel:Q,errHandler:Ae,mediaController:Fe,representationController:ce,adapter:le,textController:xe,abrController:Pe,playbackController:be,settings:Ne}):re(Ze).create({streamInfo:Ee,type:ze,mimeType:Ge,fragmentModel:Q,textController:xe,errHandler:Ae,settings:Ne}):(Ae.error(new fe.Z(Se.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Se.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ke,Kt),H&&H.initialize(ct),(ne=O(Ze).create({streamInfo:Ee,type:ke,mimeType:Ge,adapter:le,dashMetrics:he,mediaPlayerModel:se,fragmentModel:Q,abrController:Pe,playbackController:be,textController:xe,mediaController:Fe,bufferController:H,representationController:ce,settings:Ne})).initialize(nt),He=0,we=!1,ye=!1},getStreamId:lt,getType:et,isUpdating:function(){return!!ce&&ce.isUpdating()},getBufferController:function(){return H},dischargePreBuffer:function(){H.dischargePreBuffer()},getFragmentModel:function(){return Q},getScheduleController:Pn,getRepresentationController:function(){return ce},getRepresentationInfo:Nn,getBufferLevel:function(){return H?H.getBufferLevel():0},isBufferingCompleted:Fn,createBufferSinks:function(ct){var nt=un();return nt?Promise.resolve(nt):H?H.createBufferSink(ee,ct):Promise.resolve(null)},updateStreamInfo:function(ct){return Ee=ct,Fn()?Promise.resolve():H.updateAppendWindow()},getStreamInfo:function(){return Ee},selectMediaInfo:vn,clearMediaInfoArray:function(){J=[]},addMediaInfo:function(ct){J.indexOf(ct)===-1&&J.push(ct)},prepareTrackSwitch:function(){return new Promise(function(ct){B.debug("Preparing track switch for type ".concat(ke));var nt=ke===y.Z.TEXT||Ne.get().streaming.trackSwitchMode[ke]===y.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&be.getTimeToStreamEnd(Ee)>Ne.get().streaming.buffer.stallThreshold;if(H.getIsBufferingCompleted()&&!nt)return H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){$e.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Ee.id,mediaType:ke})}).catch(function(){$e.trigger(T.Z.BUFFERING_COMPLETED,{},{streamId:Ee.id,mediaType:ke})}),void ct();ne.clearScheduleTimer(),ne.setSwitchTrack(!0),nt?($e.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:Ee.id},{mediaType:ke,streamId:Ee.id}),Q.abortRequests(),H.prepareForReplacementTrackSwitch(ee.codec).then(function(){var Kt=Nn();return H.updateBufferTimestampOffset(Kt)}).then(function(){Sn(),ct()}).catch(function(){Sn(),ct()})):H.prepareForNonReplacementTrackSwitch(ee.codec).then(function(){En(),ct()}).catch(function(){En(),ct()})})},prepareQualityChange:function(ct){Oe&&B.warn("Canceling queued representation switch to ".concat(Oe.quality," for ").concat(ke)),B.debug("Preparing quality switch for type ".concat(ke));var nt=ct.newQuality;ie=!0,ne.clearScheduleTimer(),ce.prepareQualityChange(nt);var Kt=Nn(nt);ct.reason&&ct.reason.forceReplace?function(ze){Q.abortRequests(),$e.trigger(T.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:ke,streamId:Ee.id},{mediaType:ke,streamId:Ee.id}),ne.setCheckPlaybackQuality(!1),H.prepareForForceReplacementQualitySwitch(ze).then(function(){Sn(),Oe=null,ie=!1}).catch(function(){Sn(),Oe=null,ie=!1})}(Kt):ct&&ct.reason&&ct.reason.forceAbandon?function(ze){H.updateBufferTimestampOffset(ze).then(function(){Q.abortRequests(),ye=!0,ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),ie=!1,Oe=null}).catch(function(){Oe=null,ie=!1})}(Kt):Ne.get().streaming.buffer.fastSwitchEnabled?function(ze){var Ve=be.getTime(),Dt=1.5*(isNaN(ze.fragmentDuration)?1:ze.fragmentDuration),fn=Q.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:Ve+Dt,threshold:0})[0];if(fn&&!pt()){var Tn=H.getBufferLevel(),sr=Pe.getAbandonmentStateFor(Ee.id,ke);fn.quality<ze.quality&&Tn>=Dt&&sr!==D.Z.ABANDON_LOAD?H.updateBufferTimestampOffset(ze).then(function(){Q.abortRequests(),On(Ve+Dt),ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),ie=!1}).catch(function(){ie=!1}):xn(ze)}else xn(ze)}(Kt):xn(Kt),he.pushPlayListTraceMetrics(new Date,tt.REPRESENTATION_SWITCH_STOP_REASON),he.createPlaylistTraceMetrics(Kt.id,1e3*be.getTime(),be.getPlaybackRate())},getMediaInfo:function(){return ee},getMediaSource:function(){return H.getMediaSource()},setMediaSource:function(ct){return H.setMediaSource(ct,ee)},getBuffer:un,setExplicitBufferingTime:On,finalisePlayList:function(ct,nt){he.pushPlayListTraceMetrics(ct,nt)},probeNextRequest:function(){var ct=Nn(),nt=ce&&ct?ce.getRepresentationForQuality(ct.quality):null;return me.getNextSegmentRequestIdempotent(ee,nt)},prepareInnerPeriodPlaybackSeeking:function(ct){return new Promise(function(nt){if(H.hasBufferAtTime(ct.seekTime))return H.pruneBuffer(),Ht(H.getContinuousBufferTimeForTargetTime(ct.seekTime))&&H.setIsBufferingCompleted(!0),void nt();ne.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){var Kt=H.getAllRangesWithSafetyFactor(ct.seekTime);return H.clearBuffers(Kt)}).then(function(){var Kt=H.getContinuousBufferTimeForTargetTime(ct.seekTime);if(Ht(Kt))H.setIsBufferingCompleted(!0),nt();else{var ze=isNaN(Kt)?ct.seekTime:Kt;On(ze),H.setSeekTarget(ze);var Ve=[];Ve.push(H.updateAppendWindow());var Dt=Nn();Ve.push(H.updateBufferTimestampOffset(Dt)),Promise.all(Ve).then(function(){ne.setInitSegmentRequired(!0),ne.setCheckPlaybackQuality(!1),ne.startScheduleTimer(),nt()})}}).catch(function(Kt){B.error(Kt)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(function(ct,nt){try{ne.clearScheduleTimer(),Q.abortRequests(),H.prepareForPlaybackSeek().then(function(){return H.pruneAllSafely()}).then(function(){ct()})}catch(Kt){nt(Kt)}})},reset:function(ct,nt){me&&me.reset(),H&&(H.reset(ct,nt),H=null),ne&&(ne.reset(),ne=null),ce&&(ce.reset(),ce=null),pe&&(pe=null),Pe&&Pe.unRegisterStreamType(lt(),ke),$e.off(T.Z.DATA_UPDATE_COMPLETED,Nt,P),$e.off(T.Z.INIT_FRAGMENT_NEEDED,Ft,P),$e.off(T.Z.MEDIA_FRAGMENT_NEEDED,Ut,P),$e.off(T.Z.INIT_FRAGMENT_LOADED,Gn,P),$e.off(T.Z.MEDIA_FRAGMENT_LOADED,Ct,P),$e.off(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),$e.off(T.Z.BUFFER_CLEARED,Jt,P),$e.off(T.Z.SEEK_TARGET,Lt,P),$e.off(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),$e.off(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),$e.off(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,bt,P),$e.off(T.Z.SET_NON_FRAGMENTED_TEXT,Xt,P),$e.off(T.Z.QUOTA_EXCEEDED,Gt,P),$e.off(T.Z.SOURCE_BUFFER_ERROR,Wt,P),$e.off(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),jt(),ke=null,Ee=null}},B=(0,N.Z)(Ze).getInstance().getLogger(P),jt(),$e.on(T.Z.DATA_UPDATE_COMPLETED,Nt,P,{priority:m.Z.EVENT_PRIORITY_HIGH}),$e.on(T.Z.INIT_FRAGMENT_NEEDED,Ft,P),$e.on(T.Z.MEDIA_FRAGMENT_NEEDED,Ut,P),$e.on(T.Z.INIT_FRAGMENT_LOADED,Gn,P),$e.on(T.Z.MEDIA_FRAGMENT_LOADED,Ct,P),$e.on(T.Z.BUFFER_LEVEL_STATE_CHANGED,en,P),$e.on(T.Z.BUFFER_CLEARED,Jt,P),$e.on(T.Z.SEEK_TARGET,Lt,P),$e.on(T.Z.FRAGMENT_LOADING_ABANDONED,rr,P),$e.on(T.Z.FRAGMENT_LOADING_COMPLETED,ir,P),$e.on(T.Z.QUOTA_EXCEEDED,Gt,P),$e.on(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,bt,P),$e.on(T.Z.SET_NON_FRAGMENTED_TEXT,Xt,P),$e.on(T.Z.SOURCE_BUFFER_ERROR,Wt,P),$e.on(T.Z.BYTES_APPENDED_END_FRAGMENT,Dn,P),P}Rt.__dashjs_factory_name="StreamProcessor";var hn=F.Z.getClassFactory(Rt),Qt=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},nn=A(9032);function Ot(L,P){if(L){if(typeof L=="string")return Un(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Un(L,P):void 0}}function Un(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function gr(L){L=L||{};var P,B,V=this.context,ee=L.requestModifier,J=L.lowLatencyThroughputModel,H=L.boxParser,ne=(0,Be.Z)(V).getInstance();function ce(ie){var me,pe=new Date,He=ie.request,Oe=new Headers;if(He.range&&Oe.append("Range","bytes="+He.range),ie.headers)for(var Ze in ie.headers){var $e=ie.headers[Ze];$e&&Oe.append(Ze,$e)}He.requestStartDate||(He.requestStartDate=pe),ee&&ee.modifyRequestHeader&&ee.modifyRequestHeader({setRequestHeader:function(Z,le){Oe.append(Z,le)}},{url:ie.url}),typeof window.AbortController=="function"&&(me=new AbortController,ie.abortController=me,me.signal.onabort=ie.onabort);var Ee={method:ie.method,headers:Oe,credentials:ie.withCredentials?"include":void 0,signal:me?me.signal:void 0},ke=ne.get().streaming.abr.fetchThroughputCalculationMode,Ae=Date.now(),Ge=0;new Promise(function(Z){if(ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J&&(Ge=J.getThroughputCapacityDelayMS(He,1e3*B.getCurrentBufferLevel(He.mediaType))))return setTimeout(Z,Ge);Z()}).then(function(){var Z=Date.now();fetch(ie.url,Ee).then(function(le){ie.response||(ie.response={}),ie.response.status=le.status,ie.response.statusText=le.statusText,ie.response.responseURL=le.url,le.ok||ie.onerror();var ae,se="",Q=function(Nt,en){var Jt;if(typeof Symbol>"u"||Nt[Symbol.iterator]==null){if(Array.isArray(Nt)||(Jt=Ot(Nt))){Jt&&(Nt=Jt);var Wt=0,Dn=function(){};return{s:Dn,n:function(){return Wt>=Nt.length?{done:!0}:{done:!1,value:Nt[Wt++]}},e:function(bt){throw bt},f:Dn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var xn,rr=!0,ir=!1;return{s:function(){Jt=Nt[Symbol.iterator]()},n:function(){var bt=Jt.next();return rr=bt.done,bt},e:function(bt){ir=!0,xn=bt},f:function(){try{rr||Jt.return==null||Jt.return()}finally{if(ir)throw xn}}}}(le.headers.keys());try{for(Q.s();!(ae=Q.n()).done;){var Pe=ae.value;se+=Pe+": "+le.headers.get(Pe)+"\r\n"}}catch(Nt){Q.e(Nt)}finally{Q.f()}if(ie.response.responseHeaders=se,!le.body)return le.arrayBuffer().then(function(Nt){ie.response.response=Nt;var en={loaded:Nt.byteLength,total:Nt.byteLength,stream:!1};ie.progress(en),ie.onload(),ie.onend()});var be,Fe,xe,he,Ne=parseInt(le.headers.get("Content-Length"),10),Xe=0,ht=!1,lt=new Uint8Array,et=0;if(ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&J){var pt=Z,jt=0,Ht=(xe=le.body.tee(),he=2,function(Nt){if(Array.isArray(Nt))return Nt}(xe)||function(Nt,en){if(typeof Symbol<"u"&&Symbol.iterator in Object(Nt)){var Jt=[],Wt=!0,Dn=!1,xn=void 0;try{for(var rr,ir=Nt[Symbol.iterator]();!(Wt=(rr=ir.next()).done)&&(Jt.push(rr.value),!en||Jt.length!==en);Wt=!0);}catch(bt){Dn=!0,xn=bt}finally{try{Wt||ir.return==null||ir.return()}finally{if(Dn)throw xn}}return Jt}}(xe,he)||Ot(xe,he)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Ft=Ht[0],Ut=Ht[1];be=Ft.getReader(),Fe=[],be.read().then(function Nt(en){var Jt=en.value,Wt=en.done;if(jt=Date.now(),Jt&&Jt.length){var Dn=jt-pt,xn=Jt.length;Fe.push({chunkDownloadTimeRelativeMS:jt-Z,chunkDownloadDurationMS:Dn,chunkBytes:xn,kbps:Math.round(8*xn/(Dn/1e3)),bufferLevel:B.getCurrentBufferLevel(He.mediaType)})}if(Wt){var rr=jt-Z,ir=Fe.reduce(function(bt,Xt){return bt+Xt.chunkBytes},0);return J.addMeasurement(He,rr,Fe,Ae,Ge,se),void ie.progress({loaded:ir,total:ir,lengthComputable:!0,time:J.getEstimatedDownloadDurationMS(He),stream:!0})}return pt=Date.now(),be.read().then(Nt)}),ie.reader=Ut.getReader()}else ie.reader=le.body.getReader();var An=[],it=[],yt=[],$t=!0;we(ie,function Nt(en){var Jt=en.value;if(en.done){if(lt){if(ke!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Wt=null,Dn=null;ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Wt=function(bt,Xt){try{var Gt,un;Gt=bt.filter(function(Sn,En){return En<bt.length-1}),un=Xt.filter(function(Sn,En){return En<Xt.length-1});var vn=[];if(Gt.length>1){for(var Pn=0,Nn=0,Fn=0;Fn<Gt.length;Fn++)if(Gt[Fn]&&un[Fn]){var Gn=un[Fn].ts-Gt[Fn].ts;if(Gn>1)vn.push(8*un[Fn].bytes/Gn),Nn=0;else{Nn===0&&(Nn=Gt[Fn].ts,Pn=0);var Ct=un[Fn].ts-Nn;Ct>1?(Pn+=un[Fn].bytes,vn.push(8*Pn/Ct),Nn=0):Pn+=un[Fn].bytes}}if(vn.length>0)return vn.reduce(function(Sn,En){return Sn+En},0)/vn.length}return null}catch(Sn){return null}}(it,yt),Wt&&(Dn=8*Xe/Wt)):ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Dn=ye(An,Xe)),ie.progress({loaded:Xe,total:isNaN(Ne)?Xe:Ne,lengthComputable:!0,time:Dn,stream:!0})}ie.response.response=lt.buffer}return ie.onload(),void ie.onend()}if(Jt&&Jt.length>0){lt=function(bt,Xt){if(bt.length===0)return Xt;var Gt=new Uint8Array(bt.length+Xt.length);return Gt.set(bt),Gt.set(Xt,bt.length),Gt}(lt,Jt),Xe+=Jt.length,An.push({ts:Date.now(),bytes:Jt.length}),ke===y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&$t&&H.findLastTopIsoBoxCompleted(["moof"],lt,et).found&&($t=!1,it.push({ts:performance.now(),bytes:Jt.length}));var xn=H.findLastTopIsoBoxCompleted(["moov","mdat"],lt,et);if(xn.found){var rr,ir=xn.lastCompletedOffset+xn.size;ke!==y.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||$t||($t=!0,yt.push({ts:performance.now(),bytes:lt.length})),ir===lt.length?(rr=lt,lt=new Uint8Array):(rr=new Uint8Array(lt.subarray(0,ir)),lt=lt.subarray(ir)),ie.progress({data:rr.buffer,lengthComputable:!1,noTrace:!0}),et=0}else et=xn.lastCompletedOffset,ht||(ie.progress({lengthComputable:!1,noTrace:!0}),ht=!0)}we(ie,Nt)})}).catch(function(le){ie.onerror&&ie.onerror(le)})})}function we(ie,me){ie.reader.read().then(me).catch(function(pe){ie.onerror&&ie.response.status===200&&ie.onerror(pe)})}function ye(ie,me){try{if((ie=ie.filter(function(Oe){return Oe.bytes>me/4/ie.length})).length>1){var pe=0,He=(ie[ie.length-1].ts-ie[0].ts)/ie.length;return ie.forEach(function(Oe,Ze){var $e=ie[Ze+1];if($e){var Ee=$e.ts-Oe.ts;pe+=Ee<He?Ee:0}}),pe}return null}catch(Oe){return null}}return P={load:function(ie){ee&&ee.modifyRequest?(0,Ke.k)(ie,ee).then(function(){return ce(ie)}):ce(ie)},abort:function(ie){if(ie.abortController)ie.abortController.abort();else if(ie.reader)try{ie.reader.cancel(),ie.onabort()}catch(me){}},calculateDownloadedTime:ye,setup:function(ie){B=ie.dashMetrics}},P}gr.__dashjs_factory_name="FetchLoader";var Or=F.Z.getClassFactory(gr),dr=A(1180);function ei(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Ji=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var P,B;return P=L,(B=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==v.Z.BASE_URL&&this.segmentInfoType!==v.Z.SEGMENT_BASE&&!this.indexRange}}])&&ei(P.prototype,B),L}(),Lr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},eo=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};eo.DEFAULT_ID="defaultId";var _i=eo,Mi=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},zi=A(2610),to=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},Ti=function L(P,B,V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||P||"",this.dvbPriority=V||1,this.dvbWeight=ee||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};Ti.DEFAULT_DVB_PRIORITY=1,Ti.DEFAULT_DVB_WEIGHT=1;var Qn=Ti,Pu=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},tn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},sn=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function an(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var wt=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var P,B;return P=L,(B=[{key:"init",value:function(V){return V&&(this.schemeIdUri=V.schemeIdUri?V.schemeIdUri:null,this.value=V.value?V.value:null,this.id=V.id?V.id:null,V[v.Z.DVB_URL]&&(this.dvbUrl=V[v.Z.DVB_URL]),V[v.Z.DVB_MIMETYPE]&&(this.dvbMimeType=V[v.Z.DVB_MIMETYPE]),V[v.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=V[v.Z.DVB_FONTFAMILY])),this}}])&&an(P.prototype,B),L}(),Yt=A(3101),Mt=A.n(Yt);function zt(){return{areEqual:function(L,P){return Mt()(L,P)}}}zt.__dashjs_factory_name="ObjectUtils";var mn=F.Z.getSingletonFactory(zt),In=A(7803),Zn=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.queryParams={}},Cn=function L(P,B,V){(function(ee,J){if(!(ee instanceof J))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||"",this.serviceLocation=B||null,this.ttl=V||NaN,this.queryParams={}};function Rn(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function on(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Rn(Object(B),!0).forEach(function(V){Bn(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Rn(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Bn(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function kn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=er(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(ce){throw ce},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,ne=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var ce=B.next();return H=ce.done,ce},e:function(ce){ne=!0,J=ce},f:function(){try{H||B.return==null||B.return()}finally{if(ne)throw J}}}}function er(L,P){if(L){if(typeof L=="string")return Er(L,P);var B=Object.prototype.toString.call(L).slice(8,-1);return B==="Object"&&L.constructor&&(B=L.constructor.name),B==="Map"||B==="Set"?Array.from(L):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Er(L,P):void 0}}function Er(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Ur(){var L,P,B,V,ee=this.context,J=(0,St.Z)(ee).getInstance(),H=Number.isInteger||function(Z){return typeof Z=="number"&&isFinite(Z)&&Math.floor(Z)===Z};function ne(Z,le){if(!Z)throw new Error("adaptation is not defined");if(!le)throw new Error("type is not defined");if(Z.Representation_asArray&&Z.Representation_asArray.length){var ae=Ze(Z.Representation_asArray[0]);if(ae&&ae.length>0&&In.Y.indexOf(ae[0].schemeIdUri)>=0)return le===y.Z.IMAGE}if(Z.ContentComponent_asArray&&Z.ContentComponent_asArray.length>0){if(Z.ContentComponent_asArray.length>1)return le===y.Z.MUXED;if(Z.ContentComponent_asArray[0].contentType===le)return!0}var se=le===y.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(le);if(Z.Representation_asArray&&Z.Representation_asArray.length){var Q=Z.Representation_asArray[0].codecs;if(se.test(Q))return!0}if(Z.hasOwnProperty(v.Z.MIME_TYPE))return se.test(Z.mimeType);if(Z.Representation_asArray){for(var Pe,be=0;be<Z.Representation_asArray.length;be++)if((Pe=Z.Representation_asArray[be]).hasOwnProperty(v.Z.MIME_TYPE))return se.test(Pe.mimeType)}return!1}function ce(Z){if(!Z)throw new Error("adaptation is not defined");if(Z.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||Z.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||Z.hasOwnProperty(v.Z.SEGMENT_LIST)||Z.hasOwnProperty(v.Z.SEGMENT_BASE))return!0;if(Z.Representation_asArray&&Z.Representation_asArray.length>0){var le=Z.Representation_asArray[0];if(le.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)||le.hasOwnProperty(v.Z.SEGMENT_TIMELINE)||le.hasOwnProperty(v.Z.SEGMENT_LIST)||le.hasOwnProperty(v.Z.SEGMENT_BASE))return!0}return!1}function we(Z){return ne(Z,y.Z.VIDEO)}function ye(Z){return ne(Z,y.Z.TEXT)}function ie(Z){return ne(Z,y.Z.IMAGE)}function me(Z){return Z&&Array.isArray(Z.Representation_asArray)&&Z.Representation_asArray.sort(function(le,ae){return le.bandwidth-ae.bandwidth}),Z}function pe(Z,le){return Z&&Z.Period_asArray&&H(le)&&Z.Period_asArray[le]?Z.Period_asArray[le].AdaptationSet_asArray:[]}function He(Z){return Z&&Z.Period_asArray?Z.Period_asArray:[]}function Oe(Z){var le=!1;return Z&&Z.hasOwnProperty("type")&&(le=Z.type===v.Z.DYNAMIC),le}function Ze(Z){return Z&&Z.EssentialProperty_asArray&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return{schemeIdUri:le.schemeIdUri,value:le.value}}):null}function $e(Z){if(!Z||!Z.S_asArray)return NaN;var le=Z.S_asArray[0],ae=Z.S_asArray[1];return le.hasOwnProperty("d")?le.d:ae.t-le.t}function Ee(Z,le){if(!Z)throw new Error("Period cannot be null or undefined");var ae=_i.DEFAULT_ID+"_"+le;return Z.hasOwnProperty(v.Z.ID)&&Z.id.length>0&&Z.id!=="__proto__"&&(ae=Z.id),ae}function ke(Z,le,ae){var se,Q=[];if(!Z)return Q;for(se=0;se<Z.length;se++){var Pe=new Pu;if(Pe.timescale=1,Pe.representation=le,!Z[se].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Pe.schemeIdUri=Z[se].schemeIdUri,Z[se].hasOwnProperty(v.Z.TIMESCALE)&&(Pe.timescale=Z[se].timescale),Z[se].hasOwnProperty(v.Z.VALUE)&&(Pe.value=Z[se].value),Q.push(Pe),Pe.period=ae}return Q}function Ae(Z){var le=[],ae=Z.BaseURL_asArray||[Z.baseUri],se=!1;return ae.some(function(Q){if(Q){var Pe=new Qn,be=Q.__text||Q;return J.isRelative(be)&&(se=!0,Z.baseUri&&(be=J.resolve(be,Z.baseUri))),Pe.url=be,Q.hasOwnProperty(v.Z.SERVICE_LOCATION)&&Q.serviceLocation.length?Pe.serviceLocation=Q.serviceLocation:Pe.serviceLocation=be,Q.hasOwnProperty(v.Z.DVB_PRIORITY)&&(Pe.dvbPriority=Q[v.Z.DVB_PRIORITY]),Q.hasOwnProperty(v.Z.DVB_WEIGHT)&&(Pe.dvbWeight=Q[v.Z.DVB_WEIGHT]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)&&(Pe.availabilityTimeOffset=Q[v.Z.AVAILABILITY_TIME_OFFSET]),Q.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)&&(Pe.availabilityTimeComplete=Q[v.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),le.push(Pe),se}}),le}function Ge(Z){var le=new sn;return le.serverUrl=Z.__text,Z.hasOwnProperty(v.Z.DEFAULT_SERVICE_LOCATION)&&(le.defaultServiceLocation=Z[v.Z.DEFAULT_SERVICE_LOCATION],le.defaultServiceLocationArray=le.defaultServiceLocation.split(" ")),Z.hasOwnProperty(v.Z.QUERY_BEFORE_START)&&(le.queryBeforeStart=Z[v.Z.QUERY_BEFORE_START].toLowerCase()==="true"),Z.hasOwnProperty(v.Z.CLIENT_REQUIREMENT)&&(le.clientRequirement=Z[v.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),le}return L={getIsTypeOf:ne,getIsText:ye,getIsFragmented:ce,getProducerReferenceTimesForAdaptation:function(Z){var le=Z&&Z.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)?Z[v.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(Z&&Z.hasOwnProperty(v.Z.REPRESENTATION_ASARRAY)?Z[v.Z.REPRESENTATION_ASARRAY]:[]).forEach(function(se){var Q;se.hasOwnProperty(v.Z.PRODUCERREFERENCETIME_ASARRAY)&&le.push.apply(le,function(Pe){if(Array.isArray(Pe))return Er(Pe)}(Q=se[v.Z.PRODUCERREFERENCETIME_ASARRAY])||function(Pe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Pe))return Array.from(Pe)}(Q)||er(Q)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())});var ae=[];return le.forEach(function(se){var Q=new tn;se.hasOwnProperty(v.Z.ID)&&(Q[v.Z.ID]=se[v.Z.ID],se.hasOwnProperty(v.Z.WALL_CLOCK_TIME)&&(Q[v.Z.WALL_CLOCK_TIME]=se[v.Z.WALL_CLOCK_TIME],se.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(Q[v.Z.PRESENTATION_TIME]=se[v.Z.PRESENTATION_TIME],se.hasOwnProperty(v.Z.INBAND)&&(Q[v.Z.INBAND]=se[v.Z.INBAND]!=="false"),se.hasOwnProperty(v.Z.TYPE)&&(Q[v.Z.TYPE]=se[v.Z.TYPE]),ae.push(Q))))}),ae},getLanguageForAdaptation:function(Z){var le="";return Z&&Z.hasOwnProperty(v.Z.LANG)&&(le=Z.lang),le},getViewpointForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.VIEWPOINT_ASARRAY)&&Z[v.Z.VIEWPOINT_ASARRAY].length?Z[v.Z.VIEWPOINT_ASARRAY].map(function(le){return new wt().init(le)}):[]},getRolesForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ROLE_ASARRAY)&&Z[v.Z.ROLE_ASARRAY].length?Z[v.Z.ROLE_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAccessibilityForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ACCESSIBILITY_ASARRAY)&&Z[v.Z.ACCESSIBILITY_ASARRAY].length?Z[v.Z.ACCESSIBILITY_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAudioChannelConfigurationForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAudioChannelConfigurationForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?Z[v.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map(function(le){return new wt().init(le)}):[]},getAdaptationForIndex:function(Z,le,ae){var se=pe(le,ae);return se.length>0&&H(Z)?se[Z]:null},getIndexForAdaptation:function(Z,le,ae){if(!Z)return-1;for(var se=pe(le,ae),Q=0;Q<se.length;Q++)if(mn(ee).getInstance().areEqual(se[Q],Z))return Q;return-1},getAdaptationForId:function(Z,le,ae){var se,Q,Pe=pe(le,ae);for(se=0,Q=Pe.length;se<Q;se++)if(Pe[se].hasOwnProperty(v.Z.ID)&&Pe[se].id===Z)return Pe[se];return null},getAdaptationsForType:function(Z,le,ae){var se,Q,Pe=pe(Z,le),be=[];for(se=0,Q=Pe.length;se<Q;se++)ne(Pe[se],ae)&&be.push(me(Pe[se]));return be},getRealPeriods:He,getRealPeriodForIndex:function(Z,le){var ae=He(le);return ae.length>0&&H(Z)?ae[Z]:null},getCodec:function(Z,le,ae){var se=null;if(Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0){var Q=H(le)&&le>=0&&le<Z.Representation_asArray.length?Z.Representation_asArray[le]:Z.Representation_asArray[0];Q&&(se=Q.mimeType+';codecs="'+Q.codecs+'"',ae&&Q.width!==void 0&&(se+=';width="'+Q.width+'";height="'+Q.height+'"'))}return se&&(se=se.replace(/\sprofiles=[^;]*/g,"")),se},getSelectionPriority:function(Z){try{var le=Z&&Z.selectionPriority!==void 0?parseInt(Z.selectionPriority):1;return isNaN(le)?1:le}catch(ae){return 1}},getMimeType:function(Z){return Z&&Z.Representation_asArray&&Z.Representation_asArray.length>0?Z.Representation_asArray[0].mimeType:null},getKID:function(Z){return Z&&Z.hasOwnProperty(v.Z.CENC_DEFAULT_KID)?Z[v.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(Z){if(!Z||!Array.isArray(Z.Label_asArray))return[];for(var le=[],ae=0;ae<Z.Label_asArray.length;ae++)le.push({lang:Z.Label_asArray[ae].lang,text:Z.Label_asArray[ae].__text||Z.Label_asArray[ae]});return le},getContentProtectionData:function(Z){return Z&&Z.hasOwnProperty(v.Z.CONTENTPROTECTION_ASARRAY)&&Z.ContentProtection_asArray.length!==0?Z.ContentProtection_asArray:null},getIsDynamic:Oe,getId:function(Z){return Z&&Z[v.Z.ID]||null},hasProfile:function(Z,le){var ae=!1;return Z&&Z.profiles&&Z.profiles.length>0&&(ae=Z.profiles.indexOf(le)!==-1),ae},getDuration:function(Z){return Z&&Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)?Z.mediaPresentationDuration:Z&&Z.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(Z){return Z&&Z.bandwidth?Z.bandwidth:NaN},getManifestUpdatePeriod:function(Z){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ae=NaN;return Z&&Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(ae=Z.minimumUpdatePeriod),isNaN(ae)?ae:Math.max(ae-le,1)},getPublishTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(Z[v.Z.PUBLISH_TIME]):null},getRepresentationCount:function(Z){return Z&&Array.isArray(Z.Representation_asArray)?Z.Representation_asArray.length:0},getBitrateListForAdaptation:function(Z){var le=me(Z);return(le&&Array.isArray(le.Representation_asArray)?le.Representation_asArray:[]).map(function(ae){return{bandwidth:ae.bandwidth,width:ae.width||0,height:ae.height||0,scanType:ae.scanType||null,id:ae.id||null}})},getRepresentationFor:function(Z,le){return le&&le.Representation_asArray&&le.Representation_asArray.length>0&&H(Z)?le.Representation_asArray[Z]:null},getRepresentationsForAdaptation:function(Z){var le,ae,se,Q,Pe=[],be=function(lt){if(lt&&lt.period&&H(lt.period.index)){var et=lt.period.mpd.manifest.Period_asArray[lt.period.index];if(et&&et.AdaptationSet_asArray&&H(lt.index))return me(et.AdaptationSet_asArray[lt.index])}}(Z);if(be&&be.Representation_asArray){if(Z&&Z.period&&H(Z.period.index)){var Fe=Ae(Z.period.mpd.manifest);Fe&&(ae=Fe[0])}for(var xe=0,he=be.Representation_asArray.length;xe<he;++xe){var Ne=be.Representation_asArray[xe],Xe=new Ji;if(Xe.index=xe,Xe.adaptation=Z,Ne.hasOwnProperty(v.Z.ID)&&(Xe.id=Ne.id),Ne.hasOwnProperty(v.Z.CODECS)&&(Xe.codecs=Ne.codecs),Ne.hasOwnProperty(v.Z.MIME_TYPE)&&(Xe.mimeType=Ne[v.Z.MIME_TYPE]),Ne.hasOwnProperty(v.Z.CODEC_PRIVATE_DATA)&&(Xe.codecPrivateData=Ne.codecPrivateData),Ne.hasOwnProperty(v.Z.BANDWITH)&&(Xe.bandwidth=Ne.bandwidth),Ne.hasOwnProperty(v.Z.WIDTH)&&(Xe.width=Ne.width),Ne.hasOwnProperty(v.Z.HEIGHT)&&(Xe.height=Ne.height),Ne.hasOwnProperty(v.Z.SCAN_TYPE)&&(Xe.scanType=Ne.scanType),Ne.hasOwnProperty(v.Z.MAX_PLAYOUT_RATE)&&(Xe.maxPlayoutRate=Ne.maxPlayoutRate),Ne.hasOwnProperty(v.Z.SEGMENT_BASE)?(le=Ne.SegmentBase,Xe.segmentInfoType=v.Z.SEGMENT_BASE):Ne.hasOwnProperty(v.Z.SEGMENT_LIST)?(le=Ne.SegmentList).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Xe.segmentInfoType=v.Z.SEGMENT_TIMELINE:Xe.segmentInfoType=v.Z.SEGMENT_LIST:Ne.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)?((le=Ne.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)?Xe.segmentInfoType=v.Z.SEGMENT_TIMELINE:Xe.segmentInfoType=v.Z.SEGMENT_TEMPLATE,le.hasOwnProperty(v.Z.INITIALIZATION_MINUS)&&(Xe.initialization=le.initialization.split("$Bandwidth$").join(Ne.bandwidth).split("$RepresentationID$").join(Ne.id))):Xe.segmentInfoType=v.Z.BASE_URL,Xe.essentialProperties=Ze(Ne),le){if(le.hasOwnProperty(v.Z.INITIALIZATION)){var ht=le.Initialization;ht.hasOwnProperty(v.Z.SOURCE_URL)&&(Xe.initialization=ht.sourceURL),ht.hasOwnProperty(v.Z.RANGE)&&(Xe.range=ht.range)}else ye(be)&&ce(be)&&be.mimeType&&be.mimeType.indexOf("application/mp4")===-1&&(Xe.range=0);le.hasOwnProperty(v.Z.TIMESCALE)&&(Xe.timescale=le.timescale),le.hasOwnProperty(v.Z.DURATION)?Xe.segmentDuration=le.duration/Xe.timescale:Ne.hasOwnProperty(v.Z.SEGMENT_TEMPLATE)&&(le=Ne.SegmentTemplate).hasOwnProperty(v.Z.SEGMENT_TIMELINE)&&(Xe.segmentDuration=$e(le.SegmentTimeline)/Xe.timescale),le.hasOwnProperty(v.Z.MEDIA)&&(Xe.media=le.media),le.hasOwnProperty(v.Z.START_NUMBER)&&(Xe.startNumber=le.startNumber),le.hasOwnProperty(v.Z.INDEX_RANGE)&&(Xe.indexRange=le.indexRange),le.hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(Xe.presentationTimeOffset=le.presentationTimeOffset/Xe.timescale),le.hasOwnProperty(v.Z.AVAILABILITY_TIME_OFFSET)?Xe.availabilityTimeOffset=le.availabilityTimeOffset:ae&&ae.availabilityTimeOffset!==void 0&&(Xe.availabilityTimeOffset=ae.availabilityTimeOffset),le.hasOwnProperty(v.Z.AVAILABILITY_TIME_COMPLETE)?Xe.availabilityTimeComplete=le.availabilityTimeComplete!=="false":ae&&ae.availabilityTimeComplete!==void 0&&(Xe.availabilityTimeComplete=ae.availabilityTimeComplete)}Xe.MSETimeOffset=(Q=(se=Xe).presentationTimeOffset,se.adaptation.period.start-Q),Xe.path=[Z.period.index,Z.index,xe],Pe.push(Xe)}}return Pe},getAdaptationsForPeriod:function(Z){var le,ae,se,Q=Z&&H(Z.index)?Z.mpd.manifest.Period_asArray[Z.index]:null,Pe=[];if(Q&&Q.AdaptationSet_asArray)for(se=0;se<Q.AdaptationSet_asArray.length;se++)ae=Q.AdaptationSet_asArray[se],le=new Lr,ae.hasOwnProperty(v.Z.ID)&&(le.id=ae.id),le.index=se,le.period=Z,ne(ae,y.Z.MUXED)?le.type=y.Z.MUXED:ne(ae,y.Z.AUDIO)?le.type=y.Z.AUDIO:we(ae)?le.type=y.Z.VIDEO:ye(ae)?le.type=y.Z.TEXT:ie(ae)?le.type=y.Z.IMAGE:P.warn("Unknown Adaptation stream type"),Pe.push(le);return Pe},getRegularPeriods:function(Z){var le,ae,se=!!Z&&Oe(Z.manifest),Q=[],Pe=null,be=null,Fe=null,xe=null;for(ae=0,le=Z&&Z.manifest&&Z.manifest.Period_asArray?Z.manifest.Period_asArray.length:0;ae<le;ae++)(be=Z.manifest.Period_asArray[ae]).hasOwnProperty(v.Z.START)?(xe=new _i).start=be.start:Pe!==null&&Pe.hasOwnProperty(v.Z.DURATION)&&Fe!==null?(xe=new _i).start=parseFloat((Fe.start+Fe.duration).toFixed(5)):ae!==0||se||((xe=new _i).start=0),Fe!==null&&isNaN(Fe.duration)&&(xe!==null?Fe.duration=parseFloat((xe.start-Fe.start).toFixed(5)):P.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),xe!==null&&(xe.id=Ee(be,ae),xe.index=ae,xe.mpd=Z,be.hasOwnProperty(v.Z.DURATION)&&(xe.duration=be.duration),Fe&&(Fe.nextPeriodId=xe.id),Q.push(xe),Pe=be,Fe=xe),be=null,xe=null;return Q.length===0||Fe!==null&&isNaN(Fe.duration)&&(Fe.duration=parseFloat((function(he){(function(){if(!B||!B.hasOwnProperty("error"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var Ne,Xe=Oe(he.mpd.manifest);return he.mpd.manifest.mediaPresentationDuration?Ne=he.mpd.manifest.mediaPresentationDuration:he.duration?Ne=he.duration:Xe?Ne=Number.POSITIVE_INFINITY:B.error(new fe.Z(Se.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",he)),Ne}(Fe)-Fe.start).toFixed(5))),Q},getMpd:function(Z){var le=new Mi;return Z&&(le.manifest=Z,Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)?le.availabilityStartTime=new Date(Z.availabilityStartTime.getTime()):Z.loadedTime&&(le.availabilityStartTime=new Date(Z.loadedTime.getTime())),Z.hasOwnProperty(v.Z.AVAILABILITY_END_TIME)&&(le.availabilityEndTime=new Date(Z.availabilityEndTime.getTime())),Z.hasOwnProperty(v.Z.MINIMUM_UPDATE_PERIOD)&&(le.minimumUpdatePeriod=Z.minimumUpdatePeriod),Z.hasOwnProperty(v.Z.MEDIA_PRESENTATION_DURATION)&&(le.mediaPresentationDuration=Z.mediaPresentationDuration),Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)&&(le.suggestedPresentationDelay=Z.suggestedPresentationDelay),Z.hasOwnProperty(v.Z.TIMESHIFT_BUFFER_DEPTH)&&(le.timeShiftBufferDepth=Z.timeShiftBufferDepth),Z.hasOwnProperty(v.Z.MAX_SEGMENT_DURATION)&&(le.maxSegmentDuration=Z.maxSegmentDuration),Z.hasOwnProperty(v.Z.PUBLISH_TIME)&&(le.publishTime=new Date(Z.publishTime))),le},getEventsForPeriod:function(Z){var le,ae,se=Z&&Z.mpd&&Z.mpd.manifest?Z.mpd.manifest:null,Q=se?se.Period_asArray:null,Pe=Q&&Z&&H(Z.index)?Q[Z.index].EventStream_asArray:null,be=[];if(Pe)for(le=0;le<Pe.length;le++){var Fe=new Pu;if(Fe.period=Z,Fe.timescale=1,!Pe[le].hasOwnProperty(y.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(Fe.schemeIdUri=Pe[le][y.Z.SCHEME_ID_URI],Pe[le].hasOwnProperty(v.Z.TIMESCALE)&&(Fe.timescale=Pe[le][v.Z.TIMESCALE]),Pe[le].hasOwnProperty(v.Z.VALUE)&&(Fe.value=Pe[le][v.Z.VALUE]),Pe[le].hasOwnProperty(v.Z.PRESENTATION_TIME_OFFSET)&&(Fe.presentationTimeOffset=Pe[le][v.Z.PRESENTATION_TIME_OFFSET]),ae=0;Pe[le].Event_asArray&&ae<Pe[le].Event_asArray.length;ae++){var xe=Pe[le].Event_asArray[ae],he=new to;he.presentationTime=0,he.eventStream=Fe,xe.hasOwnProperty(v.Z.PRESENTATION_TIME)&&(he.presentationTime=xe.presentationTime);var Ne=Fe.presentationTimeOffset?Fe.presentationTimeOffset/Fe.timescale:0;he.calculatedPresentationTime=he.presentationTime/Fe.timescale+Z.start-Ne,xe.hasOwnProperty(v.Z.DURATION)&&(he.duration=xe.duration/Fe.timescale),xe.hasOwnProperty(v.Z.ID)?he.id=xe.id:he.id=null,xe.Signal&&xe.Signal.Binary?he.messageData=V.decodeArray(xe.Signal.Binary.toString()):he.messageData=xe.messageData||xe.__cdata||xe.__text,be.push(he)}}return be},getEssentialPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.EssentialProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){se.e(Pe)}finally{se.f()}}return le},getEssentialPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.ESSENTIAL_PROPERTY_ASARRAY)&&Z.EssentialProperty_asArray.length?Z.EssentialProperty_asArray.map(function(le){return new wt().init(le)}):[]},getEssentialPropertiesForRepresentation:Ze,getEventStreamForAdaptationSet:function(Z,le,ae){var se,Q,Pe;return Z&&Z.Period_asArray&&le&&le.period&&H(le.period.index)&&(Q=Z.Period_asArray[le.period.index])&&Q.AdaptationSet_asArray&&H(le.index)&&(Pe=Q.AdaptationSet_asArray[le.index])&&(se=Pe.InbandEventStream_asArray),ke(se,null,ae)},getEventStreamForRepresentation:function(Z,le,ae){var se,Q,Pe,be;return Z&&Z.Period_asArray&&le&&le.adaptation&&le.adaptation.period&&H(le.adaptation.period.index)&&(Q=Z.Period_asArray[le.adaptation.period.index])&&Q.AdaptationSet_asArray&&H(le.adaptation.index)&&(Pe=Q.AdaptationSet_asArray[le.adaptation.index])&&Pe.Representation_asArray&&H(le.index)&&(be=Pe.Representation_asArray[le.index])&&(se=be.InbandEventStream_asArray),ke(se,le,ae)},getUTCTimingSources:function(Z){var le=Oe(Z),ae=!!Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME),se=Z?Z.UTCTiming_asArray:null,Q=[];return(le||ae)&&se&&se.forEach(function(Pe){var be=new zi.Z;Pe.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(be.schemeIdUri=Pe.schemeIdUri,Pe.hasOwnProperty(v.Z.VALUE)&&(be.value=Pe.value.toString(),Q.push(be)))}),Q},getBaseURLsFromElement:Ae,getRepresentationSortFunction:function(){return function(Z,le){return Z.bandwidth-le.bandwidth}},getContentSteering:function(Z){if(Z&&Z.hasOwnProperty(v.Z.CONTENT_STEERING_AS_ARRAY))return Ge(Z[v.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.LOCATION_AS_ARRAY)?Z[v.Z.LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,se=le.hasOwnProperty(v.Z.SERVICE_LOCATION)?le[v.Z.SERVICE_LOCATION]:null;return new Zn(ae,se)}):[]},getPatchLocation:function(Z){return Z&&Z.hasOwnProperty(v.Z.PATCH_LOCATION_AS_ARRAY)?Z[v.Z.PATCH_LOCATION_AS_ARRAY].map(function(le){var ae=le.__text||le,se=le.hasOwnProperty(v.Z.SERVICE_LOCATION)?le[v.Z.SERVICE_LOCATION]:null,Q=le.hasOwnProperty(v.Z.TTL)?1e3*parseFloat(le[v.Z.TTL]):NaN;return new Cn(ae,se,Q)}):[]},getSuggestedPresentationDelay:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUGGESTED_PRESENTATION_DELAY)?Z.suggestedPresentationDelay:null},getAvailabilityStartTime:function(Z){return Z&&Z.hasOwnProperty(v.Z.AVAILABILITY_START_TIME)&&Z.availabilityStartTime!==null?Z.availabilityStartTime.getTime():null},getServiceDescriptions:function(Z){var le=[];if(Z&&Z.hasOwnProperty(v.Z.SERVICE_DESCRIPTION)){var ae,se=kn(Z.ServiceDescription_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value,Pe=null,be=null,Fe=null,xe=null,he=null,Ne=null,Xe=null;for(var ht in Q)Q.hasOwnProperty(ht)&&(ht===v.Z.ID?Pe=Q[ht]:ht===v.Z.SERVICE_DESCRIPTION_SCOPE?be=Q[ht].schemeIdUri:ht===v.Z.SERVICE_DESCRIPTION_LATENCY?Fe={target:parseInt(Q[ht].target),max:parseInt(Q[ht].max),min:parseInt(Q[ht].min),referenceId:parseInt(Q[ht].referenceId)}:ht===v.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?xe={max:parseFloat(Q[ht].max),min:parseFloat(Q[ht].min)}:ht===v.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?he={mediaType:Q[ht].mediaType,max:parseInt(Q[ht].max),min:parseInt(Q[ht].min),target:parseInt(Q[ht].target),type:Q[ht].type,maxQualityDifference:parseInt(Q[ht].maxQualityDifference)}:ht===v.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Ne={mediaType:Q[ht].mediaType,max:parseInt(Q[ht].max),min:parseInt(Q[ht].min),target:parseInt(Q[ht].target)}:ht===v.Z.CONTENT_STEERING&&(Xe=Ge(Q[ht])));le.push({id:Pe,schemeIdUri:be,latency:Fe,playbackRate:xe,operatingQuality:he,operatingBandwidth:Ne,contentSteering:Xe})}}catch(lt){se.e(lt)}finally{se.f()}}return le},getSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SEGMENT_ALIGNMENT))&&Z[v.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(Z){return!(!Z||!Z.hasOwnProperty(v.Z.SUB_SEGMENT_ALIGNMENT))&&Z[v.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){se.e(Pe)}finally{se.f()}}return le},getSupplementalPropertiesAsArrayForAdaptation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new wt().init(le)}):[]},getSupplementalPropertiesForRepresentation:function(Z){var le={};if(Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var ae,se=kn(Z.SupplementalProperty_asArray);try{for(se.s();!(ae=se.n()).done;){var Q=ae.value;Q.hasOwnProperty(y.Z.SCHEME_ID_URI)&&(le[Q[y.Z.SCHEME_ID_URI]]=on({},Q))}}catch(Pe){se.e(Pe)}finally{se.f()}}return le},getSupplementalPropertiesAsArrayForRepresentation:function(Z){return Z&&Z.hasOwnProperty(v.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&Z.SupplementalProperty_asArray.length?Z.SupplementalProperty_asArray.map(function(le){return new wt().init(le)}):[]},setConfig:function(Z){Z&&(Z.errHandler&&(B=Z.errHandler),Z.BASE64&&(V=Z.BASE64))}},P=(0,N.Z)(ee).getInstance().getLogger(L),L}Ur.__dashjs_factory_name="DashManifestModel";var Vn=F.Z.getSingletonFactory(Ur),rn=A(703);function cn(L,P){var B;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(B=function(ce,we){if(ce){if(typeof ce=="string")return bn(ce,we);var ye=Object.prototype.toString.call(ce).slice(8,-1);return ye==="Object"&&ce.constructor&&(ye=ce.constructor.name),ye==="Map"||ye==="Set"?Array.from(ce):ye==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ye)?bn(ce,we):void 0}}(L))||P){B&&(L=B);var V=0,ee=function(){};return{s:ee,n:function(){return V>=L.length?{done:!0}:{done:!1,value:L[V++]}},e:function(ce){throw ce},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,H=!0,ne=!1;return{s:function(){B=L[Symbol.iterator]()},n:function(){var ce=B.next();return H=ce.done,ce},e:function(ce){ne=!0,J=ce},f:function(){try{H||B.return==null||B.return()}finally{if(ne)throw J}}}}function bn(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function Jn(){var L,P,B,V,ee,J,H,ne,ce,we,ye=this.context,ie=(0,m.Z)(ye).getInstance(),me=(0,Be.Z)(ye).getInstance();function pe(){B={pr:1,nor:null,st:null,sf:null,sid:"".concat(rn.Z.generateUuid()),cid:null},ce={},ne={},we={},Oe()}function He(){Oe()}function Oe(){if(J){var Q=J.getStreamController();if(Q&&typeof Q.getActiveStream=="function"){var Pe=Q.getActiveStream();Pe&&(H=Pe.getProcessors())}}}function Ze(Q,Pe){var be,Fe={},xe=cn(Pe);try{for(xe.s();!(be=xe.n()).done;){var he=be.value;Q[he]&&(Fe[he]=Q[he])}}catch(Ne){xe.e(Ne)}finally{xe.f()}return Fe}function $e(Q){var Pe=me.get().streaming.cmcd.enabledKeys;return Q.filter(function(be){return Pe.includes(be)})}function Ee(Q){try{return Q.type===ot.w.MPD_TYPE?((be=ke()).ot="m",be):Q.type===ot.w.MEDIA_SEGMENT_TYPE?(Pe=Q.mediaType,we.hasOwnProperty(Pe)||(we[Pe]=!1),ne.hasOwnProperty(Pe)||(ne[Pe]=!1),ce.hasOwnProperty(Pe)||(ce[Pe]=!1),function(Fe){var xe,he=ke(),Ne=function(Ut){try{var An=Ut.quality,it=Ut.mediaInfo.bitrateList;return parseInt(it[An].bandwidth/1e3)}catch(yt){return null}}(Fe),Xe=function(Ut){try{return isNaN(Ut.duration)?NaN:Math.round(1e3*Ut.duration)}catch(An){return null}}(Fe),ht=function(Ut){try{return 100*parseInt(V.getThroughputHistory().getSafeAverageThroughput(Ut)/100)}catch(An){return null}}(Fe.mediaType),lt=function(Ut){try{var An=B.pr,it=ee.getCurrentBufferLevel(Ut);return isNaN(An)||isNaN(it)?null:100*parseInt(it/An*10)}catch(yt){return null}}(Fe.mediaType),et=Ae(Fe.mediaType),pt=function(Ut){try{var An=V.getTopBitrateInfoFor(Ut);return Math.round(An.bitrate/1e3)}catch(it){return null}}(Fe.mediaType),jt=B.pr,Ht=function(Ut){if(H&&H.length!==0){var An,it=cn(H);try{for(it.s();!(An=it.n()).done;){var yt=An.value;if(yt.getType()===Ut)return yt.probeNextRequest()}}catch($t){it.e($t)}finally{it.f()}}}(Fe.mediaType);Fe.mediaType===y.Z.VIDEO&&(xe="v"),Fe.mediaType===y.Z.AUDIO&&(xe="a"),Fe.mediaType===y.Z.TEXT&&(xe=Fe.mediaInfo.mimeType==="application/mp4"?"tt":"c");var Ft=me.get().streaming.cmcd.rtp;return Ft||(Ft=function(Ut){try{var An=J.getPlaybackRate();An||(An=1);var it=Ut.quality,yt=Ut.mediaType,$t=Ut.mediaInfo,Nt=Ut.duration;if(!$t)return NaN;var en=Ae(yt);en===0&&(en=500);var Jt=$t.bitrateList[it].bandwidth*Nt/1e3/(en/An/1e3),Wt=me.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(me.get().streaming.cmcd.rtpSafetyFactor)?me.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Jt*Wt/100)+1)}catch(Dn){return NaN}}(Fe)),isNaN(Ft)||(he.rtp=Ft),Ht&&(Fe.url!==Ht.url?he.nor=encodeURIComponent(rn.Z.getRelativeUrl(Fe.url,Ht.url)):Ht.range&&(he.nrr=Ht.range)),Ne&&(he.br=Ne),xe&&(he.ot=xe),isNaN(Xe)||(he.d=Xe),isNaN(ht)||(he.mtp=ht),isNaN(lt)||(he.dl=lt),isNaN(et)||(he.bl=et),isNaN(pt)||(he.tb=pt),isNaN(jt)||jt===1||(he.pr=jt),ce[Fe.mediaType]&&(he.bs=!0,ce[Fe.mediaType]=!1),!ne[Fe.mediaType]&&we[Fe.mediaType]||(he.su=!0,ne[Fe.mediaType]=!1,we[Fe.mediaType]=!0),he}(Q)):Q.type===ot.w.INIT_SEGMENT_TYPE?function(){var Fe=ke();return Fe.ot="i",Fe.su=!0,Fe}():Q.type===ot.w.OTHER_TYPE||Q.type===ot.w.XLINK_EXPANSION_TYPE?function(){var Fe=ke();return Fe.ot="o",Fe}():Q.type===ot.w.LICENSE?function(Fe){var xe=ke();return xe.ot="k",xe}():null}catch(Fe){return null}var Pe,be}function ke(){var Q={},Pe=me.get().streaming.cmcd.cid?me.get().streaming.cmcd.cid:B.cid;return Q.v=1,Q.sid=me.get().streaming.cmcd.sid?me.get().streaming.cmcd.sid:B.sid,Q.sid="".concat(Q.sid),Pe&&(Q.cid="".concat(Pe)),isNaN(B.pr)||B.pr===1||B.pr===null||(Q.pr=B.pr),B.st&&(Q.st=B.st),B.sf&&(Q.sf=B.sf),Q}function Ae(Q){try{var Pe=ee.getCurrentBufferLevel(Q);return isNaN(Pe)?null:100*parseInt(10*Pe)}catch(be){return null}}function Ge(Q){try{B.pr=Q.playbackRate}catch(Pe){}}function Z(Q){try{var Pe=L.getIsDynamic(Q.data)?"l":"v",be=Q.protocol&&Q.protocol==="MSS"?"s":"d";B.st="".concat(Pe),B.sf="".concat(be)}catch(Fe){}}function le(Q){try{Q.state&&Q.mediaType&&Q.state===_.Z.BUFFER_EMPTY&&(ce[Q.mediaType]||(ce[Q.mediaType]=!0),ne[Q.mediaType]||(ne[Q.mediaType]=!0))}catch(Pe){}}function ae(){for(var Q in ce)ce.hasOwnProperty(Q)&&(ce[Q]=!0);for(var Pe in ne)ne.hasOwnProperty(Pe)&&(ne[Pe]=!0)}function se(Q){try{if(!Q)return null;var Pe=Object.keys(Q).sort(function(xe,he){return xe.localeCompare(he)}),be=Pe.length,Fe=Pe.reduce(function(xe,he,Ne){return he==="v"&&Q[he]===1||(typeof Q[he]=="string"&&he!=="ot"&&he!=="sf"&&he!=="st"?xe+="".concat(he,"=").concat(JSON.stringify(Q[he])):xe+="".concat(he,"=").concat(Q[he]),Ne<be-1&&(xe+=",")),xe},"");return(Fe=Fe.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(xe){return null}}return P={getQueryParameter:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Pe=Ee(Q),be=function(xe){try{var he=me.get().streaming.cmcd.enabledKeys;return Object.keys(xe).filter(function(Ne){return he.includes(Ne)}).reduce(function(Ne,Xe){return Ne[Xe]=xe[Xe],Ne},{})}catch(Ne){return xe}}(Pe),Fe=se(be);return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Pe,cmcdString:Fe}),{key:"CMCD",value:Fe}}return null}catch(xe){return null}},getHeaderParameters:function(Q){try{if(me.get().streaming.cmcd&&me.get().streaming.cmcd.enabled){var Pe=Ee(Q),be=Ze(Pe,$e(["br","d","ot","tb"])),Fe=Ze(Pe,$e(["bl","dl","mtp","nor","nrr","su"])),xe=Ze(Pe,$e(["bs","rtp"])),he=Ze(Pe,$e(["cid","pr","sf","sid","st","v"])),Ne={"CMCD-Object":se(be),"CMCD-Request":se(Fe),"CMCD-Status":se(xe),"CMCD-Session":se(he)};return ie.trigger(dr.Z.CMCD_DATA_GENERATED,{url:Q.url,mediaType:Q.mediaType,cmcdData:Pe,headers:Ne}),Ne}return null}catch(Xe){return null}},setConfig:function(Q){Q&&(Q.abrController&&(V=Q.abrController),Q.dashMetrics&&(ee=Q.dashMetrics),Q.playbackController&&(J=Q.playbackController))},reset:function(){ie.off(_.Z.PLAYBACK_RATE_CHANGED,Ge,this),ie.off(_.Z.MANIFEST_LOADED,Z,this),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,P),ie.off(_.Z.PLAYBACK_SEEKED,ae,P),pe()},initialize:function(){ie.on(_.Z.PLAYBACK_RATE_CHANGED,Ge,P),ie.on(_.Z.MANIFEST_LOADED,Z,P),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,le,P),ie.on(_.Z.PLAYBACK_SEEKED,ae,P),ie.on(_.Z.PERIOD_SWITCH_COMPLETED,He,P)}},L=Vn(ye).getInstance(),pe(),P}Jn.__dashjs_factory_name="CmcdModel";var ar=F.Z.getSingletonFactory(Jn);function br(L){return br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},br(L)}function kr(L,P){kr=function(ne,ce){return new J(ne,void 0,ce)};var B=no(RegExp),V=RegExp.prototype,ee=new WeakMap;function J(ne,ce,we){var ye=B.call(this,ne,ce);return ee.set(ye,we||ee.get(ne)),ye}function H(ne,ce){var we=ee.get(ce);return Object.keys(we).reduce(function(ye,ie){return ye[ie]=ne[we[ie]],ye},Object.create(null))}return Yi(J,B),J.prototype.exec=function(ne){var ce=V.exec.call(this,ne);return ce&&(ce.groups=H(ce,this)),ce},J.prototype[Symbol.replace]=function(ne,ce){if(typeof ce=="string"){var we=ee.get(this);return V[Symbol.replace].call(this,ne,ce.replace(/\$<([^>]+)>/g,function(ie,me){return"$"+we[me]}))}if(typeof ce=="function"){var ye=this;return V[Symbol.replace].call(this,ne,function(){var ie=[];return ie.push.apply(ie,arguments),br(ie[ie.length-1])!=="object"&&ie.push(H(ie,ye)),ce.apply(this,ie)})}return V[Symbol.replace].call(this,ne,ce)},kr.apply(this,arguments)}function Yi(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(P&&P.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),P&&hi(L,P)}function no(L){var P=typeof Map=="function"?new Map:void 0;return no=function(B){if(B===null||(V=B,Function.toString.call(V).indexOf("[native code]")===-1))return B;var V;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(P!==void 0){if(P.has(B))return P.get(B);P.set(B,ee)}function ee(){return Br(B,arguments,vi(this).constructor)}return ee.prototype=Object.create(B.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),hi(ee,B)},no(L)}function Br(L,P,B){return Br=qr()?Reflect.construct:function(V,ee,J){var H=[null];H.push.apply(H,ee);var ne=new(Function.bind.apply(V,H));return J&&hi(ne,J.prototype),ne},Br.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}function hi(L,P){return hi=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},hi(L,P)}function vi(L){return vi=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},vi(L)}var wo="static",ro="dynamic",ta="cmsd-",bi=ta+wo,wl=ta+ro,uu="stream",vc=["mb","st","sf","v"],Rf={video:"v",audio:"a",text:"tt",stream:uu},si=/^[-0-9]/;function Ms(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){B={},V={}}function ne(pe){pe&&Object.keys(pe).forEach(function(He){vc.includes(He)||delete pe[He]})}function ce(pe){return!pe||pe.toLowerCase()!=="false"&&(si.test(pe)?parseInt(pe,10):pe.replace(/["]+/g,""))}function we(pe){try{for(var He={},Oe=pe.split(","),Ze=0;Ze<Oe.length;Ze++){var $e=Oe[Ze].split("="),Ee=$e[0],ke=ce($e[1]);He[Ee]=ke}return He}catch(Ae){P.error("Failed to parse CMSD-Static response header value:",Ae)}}function ye(pe){try{for(var He={},Oe=pe.split(","),Ze=Oe[Oe.length-1].split(";"),$e=1;$e<Ze.length;$e++){var Ee=Ze[$e].split("="),ke=Ee[0],Ae=ce(Ee[1]);He[ke]=Ae}return He}catch(Ge){return P.error("Failed to parse CMSD-Dynamic response header value:",Ge),[]}}function ie(pe){return Rf[pe]||"o"}function me(pe,He,Oe){var Ze=pe===wo?B:V,$e=Ze[He]||{},Ee=Ze[uu]||{};return $e[Oe]||Ee[Oe]}return L={setConfig:function(){},initialize:function(){},reset:function(){H()},parseResponseHeaders:function(pe,He){for(var Oe=null,Ze=null,$e=pe.split("\r\n"),Ee=$e.length-1;Ee>=0;Ee--){var ke=$e[Ee].match(kr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(ke&&ke.groups){var Ae=ke.groups.key.toLowerCase(),Ge=ke.groups.value;switch(Ae){case bi:Oe=we(Ge),J.trigger(T.Z.CMSD_STATIC_HEADER,Oe);break;case wl:Ze||(Ze=ye(Ge))}}}var Z=uu;return Oe&&Oe.ot?Z=Oe.ot:He&&(Z=ie(He)),ne(B[Z]),ne(V[Z]),Oe&&(B[Z]=Object.assign(B[Z]||{},Oe)),Ze&&(V[Z]=Object.assign(V[Z]||{},Ze)),{static:Oe,dynamic:Ze}},getMaxBitrate:function(pe){var He=ie(pe);return me(ro,He,"mb")||-1},getEstimatedThroughput:function(pe){var He=ie(pe);return me(ro,He,"etp")||null},getResponseDelay:function(pe){var He=ie(pe);return me(ro,He,"rd")||null},getRoundTripTime:function(pe){var He=ie(pe);return me(ro,He,"rtt")||null}},P=(0,N.Z)(ee).getInstance().getLogger(L),H(),L}Ms.__dashjs_factory_name="CmsdModel";var _n=F.Z.getSingletonFactory(Ms);function Xn(){var L,P,B=this.context,V={};function ee(){P=(0,N.Z)(B).getInstance().getLogger(L)}function J(ne){for(var ce={},we=0,ye=0,ie=0,me=0,pe=ne.length,He=0;He<pe;++He)we+=ne[He].chunkDownloadTimeRelativeMS,ye+=ne[He].bufferLevel,ie+=ne[He].chunkDownloadTimeRelativeMS*ne[He].bufferLevel,me+=ne[He].chunkDownloadTimeRelativeMS*ne[He].chunkDownloadTimeRelativeMS;return ce.m=(ie-we*ye/pe)/(me-we*we/pe),ce.b=ye/pe-ce.m*we/pe,function(Oe){return ce.m*Oe+ce.b}}function H(ne){var ce,we=!0,ye=ne.reduce(function(ie,me){return ie+me.bufferLevelAtSegmentEnd},0)/ne.length;return ne.forEach(function(ie){Math.abs(ie.bufferLevelAtSegmentEnd/ie.bufferLevelAtSegmentStart)<.95&&(we=!1),ie.bufferLevelAtSegmentEnd/ye<.8&&(we=!1),ce?ce>ie.bitrate&&(we=!1):ce=ie.bitrate}),we}return L={setup:ee,addMeasurement:function(ne,ce,we,ye,ie){ne&&ne.mediaType&&!V[ne.mediaType]&&(V[ne.mediaType]=[]);var me=ne.mediaInfo.bitrateList.find(function(pe){return pe.id===ne.representationId});V[ne.mediaType].push({index:ne.index,repId:ne.representationId,mediaType:ne.mediaType,requestTimeMS:ye,adjustedAvailabilityStartTimeMS:ne.availabilityStartTime.getTime(),segDurationMS:1e3*ne.duration,chunksDurationMS:we.reduce(function(pe,He){return pe+He.chunkDownloadDurationMS},0),segmentBytes:we.reduce(function(pe,He){return pe+He.chunkBytes},0),bitrate:me&&me.bandwidth,bitrateList:ne.mediaInfo.bitrateList,chunkMeasurements:we,fetchDownloadDurationMS:ce,throughputCapacityDelayMS:ie,getEstimatedBufferLevel:J(we.slice(1))}),V[ne.mediaType].length>10&&V[ne.mediaType].shift()},getThroughputCapacityDelayMS:function(ne,ce){var we=V[ne.mediaType]&&V[ne.mediaType].slice(-3);return!we||we.length<3?0:H(we)?ce/4>250?250:ce/4:0},getEstimatedDownloadDurationMS:function(ne){var ce=V[ne.mediaType].slice(-1).pop(),we=V[ne.mediaType].slice(-3),ye=ce.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;ce.bufferLevelAtSegmentStart=ce.getEstimatedBufferLevel(ye/2),ce.bufferLevelAtSegmentEnd=ce.getEstimatedBufferLevel(ye);var ie=H(we),me=ie?.6:.8;if(ce.isBufferStable&&1.05*ce.segDurationMS<ce.fetchDownloadDurationMS)return ce.fetchDownloadDurationMS;if(!ie||ce.segDurationMS<ce.fetchDownloadDurationMS||ce.adjustedAvailabilityStartTimeMS<=ce.requestTimeMS+ce.throughputCapacityDelayMS-ce.segDurationMS)return .8*ce.fetchDownloadDurationMS;for(var pe=ce.requestTimeMS+ce.throughputCapacityDelayMS-ce.adjustedAvailabilityStartTimeMS,He=0,Oe=0,Ze=0,$e=0;$e<ce.chunkMeasurements.length;$e++){var Ee=ce.chunkMeasurements[$e];if(pe<Oe+Ee.chunkDownloadDurationMS)break;Oe+=Ee.chunkDownloadDurationMS,He+=Ee.chunkBytes,Ze++}if(pe<0&&P.warn("request time was before adjusted availibitly start time"),He&&Oe&&Ze>.2*ce.chunkMeasurements.length){var ke=He/Oe,Ae=ce.segmentBytes/ke;return ce.fetchDownloadDurationMS<Ae?ce.fetchDownloadDurationMS*me:Ae*me}var Ge=ce.bitrate;return ce.bitrateList.some(function(Z){if(Z.bandwidth>ce.bitrate)return Ge=Z.bandwidth,!0}),Ge===ce.bitrate?ce.fetchDownloadDurationMS*me:me*ce.segmentBytes*8*1e3/Ge}},ee(),L}Xn.__dashjs_factory_name="LowLatencyThroughputModel";var hr=F.Z.getSingletonFactory(Xn),ti=A(5717);function Mr(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Bi(L){L=L||{};var P,B,V,ee,J,H,ne,ce,we,ye,ie,me=this.context,pe=L.errHandler,He=L.dashMetrics,Oe=L.mediaPlayerModel,Ze=L.requestModifier,$e=L.boxParser,Ee=L.errors,ke=L.requestTimeout||0,Ae=(0,m.Z)(me).getInstance(),Ge=(0,Be.Z)(me).getInstance();function Z(le,ae){var se,Q=le.request,Pe=[],be=!0,Fe=!0,xe=new Date,he=xe,Ne=0,Xe=null,ht=null;if(!Ze||!He||!pe)throw new Error("config object is not correct or missing");var lt,et=function(en){Q.requestStartDate=xe,Q.requestEndDate=new Date,Q.firstByteDate=Q.firstByteDate||xe,Q.fileLoaderType=ht;var Jt=se.response?se.response.responseURL:null,Wt=se.response?se.response.status:null,Dn=se.response&&se.response.getAllResponseHeaders?se.response.getAllResponseHeaders():se.response?se.response.responseHeaders:null,xn=Dn&&Ge.get().streaming.cmsd&&Ge.get().streaming.cmsd.enabled?ne.parseResponseHeaders(Dn,Q.mediaType):null;He.addHttpRequest(Q,Jt,Wt,Dn,en?Pe:null,xn)},pt=function(en){Fe=!1,et(en),Q.type===ot.w.MPD_TYPE&&(He.addManifestUpdate(Q),Ae.trigger(T.Z.MANIFEST_LOADING_FINISHED,{request:Q}))},jt=function(){if(Xe&&(clearTimeout(Xe),Xe=null),B.indexOf(se)!==-1&&(B.splice(B.indexOf(se),1),Fe))if(pt(!1),ae>0){try{Ge.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&Q.type===ot.w.MEDIA_SEGMENT_TYPE&&Oe.getRetryAttemptsForType(ot.w.MEDIA_SEGMENT_TYPE)===ae&&Ae.trigger(T.Z.ATTEMPT_BACKGROUND_SYNC)}catch(Jt){}ae--;var en={config:le};ee.push(en),en.timeout=setTimeout(function(){ee.indexOf(en)!==-1&&(ee.splice(ee.indexOf(en),1),Z(le,ae))},Oe.getRetryIntervalsForType(Q.type))}else{if(Q.type===ot.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;pe.error(new fe.Z(J[Q.type],Q.url+" is not available",{request:Q,response:se.response})),le.error&&le.error(Q,"error",se.response.statusText,se.response),le.complete&&le.complete(Q,se.response.statusText)}};Q.hasOwnProperty("availabilityTimeComplete")&&Q.availabilityTimeComplete===!1&&window.fetch&&Q.responseType==="arraybuffer"&&Q.type===ot.w.MEDIA_SEGMENT_TYPE?((lt=Or(me).create({requestModifier:Ze,lowLatencyThroughputModel:we,boxParser:$e})).setup({dashMetrics:He}),ht=y.Z.FILE_LOADER_TYPES.FETCH):(lt=(0,nn.Z)(me).create({requestModifier:Ze}),ht=y.Z.FILE_LOADER_TYPES.XHR);var Ht=null,Ft=Ze.modifyRequestURL?Ze.modifyRequestURL(Q.url):Q.url;if(Ge.get().streaming.cmcd&&Ge.get().streaming.cmcd.enabled){var Ut=Ge.get().streaming.cmcd.mode;if(Ut===y.Z.CMCD_MODE_QUERY){var An=function(en){try{var Jt=[],Wt=H.getQueryParameter(en);return Wt&&Jt.push(Wt),Jt}catch(Dn){return[]}}(Q);Ft=rn.Z.addAditionalQueryParameterToUrl(Ft,An)}else Ut===y.Z.CMCD_MODE_HEADER&&(Ht=H.getHeaderParameters(Q))}var it=ce.getXHRWithCredentialsForType(Q.type);if(Q.queryParams){var yt=Object.keys(Q.queryParams).map(function(en){return{key:en,value:Q.queryParams[en]}});Ft=rn.Z.addAditionalQueryParameterToUrl(Ft,yt)}Q.url=Ft,se={url:Ft,method:ot.w.GET,withCredentials:it,request:Q,onload:function(){se.response.status>=200&&se.response.status<=299&&(pt(!0),le.success&&le.success(se.response.response,se.response.statusText,se.response.responseURL),le.complete&&le.complete(Q,se.response.statusText))},onend:jt,onerror:jt,progress:function(en){var Jt=new Date;be&&(be=!1,(!en.lengthComputable||en.lengthComputable&&en.total!==en.loaded)&&(Q.firstByteDate=Jt)),en.lengthComputable&&(Q.bytesLoaded=en.loaded,Q.bytesTotal=en.total),en.noTrace||(Pe.push({s:he,d:en.time?en.time:Jt.getTime()-he.getTime(),b:[en.loaded?en.loaded-Ne:0]}),he=Jt,Ne=en.loaded),Xe&&(clearTimeout(Xe),Xe=null),Ge.get().streaming.fragmentRequestProgressTimeout>0&&(Xe=setTimeout(function(){ye.warn("Abort request "+se.url+" due to progress timeout"),se.response.onabort=null,se.loader.abort(se),jt()},Ge.get().streaming.fragmentRequestProgressTimeout)),le.progress&&en&&le.progress(en)},onabort:function(){et(!0),Xe&&(clearTimeout(Xe),Xe=null),le.abort&&le.abort(Q)},ontimeout:function(en){var Jt;if(en.lengthComputable){var Wt=en.loaded/en.total*100;Jt="Request timeout: loaded: "+en.loaded+", out of: "+en.total+" : "+Wt.toFixed(3)+"% Completed"}else Jt="Request timeout: non-computable download size";ye.warn(Jt)},loader:lt,timeout:ke,headers:Ht};var $t=new Date().getTime();if(isNaN(Q.delayLoadingTime)||$t>=Q.delayLoadingTime)B.push(se),lt.load(se);else{var Nt={httpRequest:se};V.push(Nt),Nt.delayTimeout=setTimeout(function(){if(V.indexOf(Nt)!==-1){V.splice(V.indexOf(Nt),1);try{xe=new Date,he=xe,B.push(Nt.httpRequest),lt.load(Nt.httpRequest)}catch(en){Nt.httpRequest.onerror()}}},Q.delayLoadingTime-$t)}}return P={load:function(le){le.request?Z(le,Oe.getRetryAttemptsForType(le.request.type)):le.error&&le.error(le.request,"error")},abort:function(){ee.forEach(function(le){clearTimeout(le.timeout),le.config.request&&le.config.abort&&le.config.abort(le.config.request)}),ee=[],V.forEach(function(le){return clearTimeout(le.delayTimeout)}),V=[],B.forEach(function(le){le.request.type!==ot.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(le.onloadend=le.onerror=le.onprogress=void 0,le.loader.abort(le))}),B=[]}},ye=(0,N.Z)(me).getInstance().getLogger(P),B=[],V=[],ee=[],H=ar(me).getInstance(),ne=_n(me).getInstance(),we=hr(me).getInstance(),ce=(0,ti.Z)(me).getInstance(),Mr(ie={},ot.w.MPD_TYPE,Ee.DOWNLOAD_ERROR_ID_MANIFEST_CODE),Mr(ie,ot.w.XLINK_EXPANSION_TYPE,Ee.DOWNLOAD_ERROR_ID_XLINK_CODE),Mr(ie,ot.w.INIT_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),Mr(ie,ot.w.MEDIA_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,ot.w.INDEX_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,ot.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),Mr(ie,ot.w.OTHER_TYPE,Ee.DOWNLOAD_ERROR_ID_CONTENT_CODE),J=ie,P}Bi.__dashjs_factory_name="HTTPLoader";var Xr=F.Z.getClassFactory(Bi);function na(){var L;function P(){L={}}function B(){P()}return B(),{getLoader:function(V){for(var ee in L)if(L.hasOwnProperty(ee)&&V.startsWith(ee))return L[ee];return Xr},registerLoader:function(V,ee){L[V]=ee},unregisterLoader:function(V){L[V]&&delete L[V]},unregisterAllLoader:P,reset:B}}na.__dashjs_factory_name="SchemeLoaderFactory";var Di=F.Z.getSingletonFactory(na);function ui(L){L=L||{};var P,B,V=this.context;return P=Di(V).getInstance(),{load:function(ee){if(!B){var J=P.getLoader(ee&&ee.request?ee.request.url:null);B=J(V).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}B.load(ee)},abort:function(){B&&B.abort()}}}ui.__dashjs_factory_name="URLLoader";var Ao=F.Z.getClassFactory(ui);function Wi(L){return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Wi(L)}function qo(L,P){return qo=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},qo(L,P)}function ra(L,P){return!P||Wi(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function gt(L){return gt=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},gt(L)}var ia=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&qo(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=gt(P);if(B){var ne=gt(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return ra(this,J)});function ee(J){var H;return function(ne,ce){if(!(ne instanceof ce))throw new TypeError("Cannot call a class as a function")}(this,ee),(H=V.call(this,J)).checkForExistenceOnly=!0,H}return ee}(j.Z);function Ds(L){L=L||{};var P,B,V=this.context,ee=L.eventBus,J=L.events,H=L.urlUtils,ne=L.errors,ce=L.streamId;return P={checkForExistence:function(we){var ye=function(me){ee.trigger(J.CHECK_FOR_EXISTENCE_COMPLETED,{request:we,exists:me})};if(we){var ie=new ia(we.url);B.load({request:ie,success:function(){ye(!0)},error:function(){ye(!1)}})}else ye(!1)},load:function(we){var ye=function(ie,me){ee.trigger(J.LOADING_COMPLETED,{request:we,response:ie||null,error:me||null,sender:P})};we?B.load({request:we,progress:function(ie){ee.trigger(J.LOADING_PROGRESS,{request:we,stream:ie.stream,streamId:ce}),ie.data&&ee.trigger(J.LOADING_DATA_PROGRESS,{request:we,response:ie.data||null,error:null,sender:P})},success:function(ie){ye(ie)},error:function(ie,me,pe){ye(void 0,new fe.Z(ne.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,pe,me))},abort:function(ie){ie&&ee.trigger(J.LOADING_ABANDONED,{mediaType:ie.mediaType,request:ie,sender:P})}}):ye(void 0,new fe.Z(ne.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,ne.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){B&&B.abort()},reset:function(){B&&(B.abort(),B=null)}},B=Ao(V).create({errHandler:L.errHandler,errors:ne,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:H,constants:y.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),P}Ds.__dashjs_factory_name="FragmentLoader";var pr=F.Z.getClassFactory(Ds);function Io(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}Io.__dashjs_factory_name="SegmentResponseModifier";var lu=F.Z.getSingletonFactory(Io);function Al(L){L=L||{};var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=L.errHandler,ne=L.mediaPlayerModel,ce=L.dashMetrics,we=(0,N.Z)(ee).getInstance(),ye=lu(ee).getInstance(),ie=L.streamInfo;function me(){return ie.id}function pe(){for(var Oe in V)V[Oe].reset();V={}}function He(Oe){if(Oe.sender){var Ze=Oe.request,$e=Oe.response,Ee=Ze.isInitializationRequest(),ke=Ze.mediaInfo.streamInfo;if(Oe.error&&(Ze.mediaType===y.Z.AUDIO||Ze.mediaType===y.Z.VIDEO||Ze.mediaType===y.Z.TEXT&&Ze.mediaInfo.isFragmented)&&J.trigger(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Oe.request.serviceLocation}),$e&&ke){var Ae=function(Ge,Z,le,ae){var se=new Qt;return se.streamId=le,se.mediaInfo=Z.mediaInfo,se.segmentType=Z.type,se.start=Z.startTime,se.duration=Z.duration,se.end=se.start+se.duration,se.bytes=Ge,se.index=Z.index,se.quality=Z.quality,se.representationId=Z.representationId,se.endFragment=ae,se}($e,Ze,ie.id,Oe.type!==T.Z.FRAGMENT_LOADING_PROGRESS);ye.modifyResponseAsync(Ae).then(function(Ge){J.trigger(Ee?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ge,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})}).catch(function(Ge){B.error(Ge),J.trigger(Ee?T.Z.INIT_FRAGMENT_LOADED:T.Z.MEDIA_FRAGMENT_LOADED,{chunk:Ae,request:Ze},{streamId:ke.id,mediaType:Ze.mediaType})})}else B.warn("No "+Ze.mediaType+" bytes to push or stream is inactive.")}}return P={getStreamId:me,getModel:function(Oe){var Ze=V[Oe];return Ze||(Ze=X(ee).create({streamInfo:ie,type:Oe,dashMetrics:ce,fragmentLoader:pr(ee).create({dashMetrics:ce,mediaPlayerModel:ne,errHandler:H,requestModifier:(0,Ke.Z)(ee).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:J,events:T.Z,errors:Se,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:me()}),debug:we,eventBus:J,events:T.Z}),V[Oe]=Ze),Ze},reset:function(){J.off(_.Z.FRAGMENT_LOADING_COMPLETED,He,this),J.off(_.Z.FRAGMENT_LOADING_PROGRESS,He,this),pe()}},B=we.getLogger(P),pe(),J.on(_.Z.FRAGMENT_LOADING_COMPLETED,He,P),J.on(_.Z.FRAGMENT_LOADING_PROGRESS,He,P),P}Al.__dashjs_factory_name="FragmentController";var gs=F.Z.getClassFactory(Al),qa=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},Ou=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function Lu(L){var P,B,V=this.context,ee=L.streamInfo;function J(ne){B.setTrackByIndex(ne)}function H(){B&&B.reset()}return P={getStreamId:function(){return ee.id},initialize:function(){B.addTracks();var ne=B.getTracks();ne&&ne.length>0&&J(0)},provide:function(ne,ce){if(typeof ce=="function"){var we,ye,ie=B.getCurrentTrack();if(!ie||ie.segmentDuration<=0||ne==null)ce(null);else{(ye=B.getThumbnailRequestForTime(ne))&&(ie.segmentDuration=ye.duration),we=ne%ie.segmentDuration;var me=Math.floor(we*ie.tilesHor*ie.tilesVert/ie.segmentDuration),pe=new qa;if(pe.width=Math.floor(ie.widthPerTile),pe.height=Math.floor(ie.heightPerTile),pe.x=Math.floor(me%ie.tilesHor)*ie.widthPerTile,pe.y=Math.floor(me/ie.tilesHor)*ie.heightPerTile,"readThumbnail"in ie)return ie.readThumbnail(ne,function(Oe){pe.url=Oe,ce(pe)});if(ye)pe.url=ye.url,ie.segmentDuration=NaN;else{var He=Math.floor(ne/ie.segmentDuration);pe.url=function(Oe,Ze){var $e=Ze+Oe.startNumber,Ee=(0,M.vi)(Oe.templateUrl,"Number",$e);return Ee=(0,M.vi)(Ee,"Time",($e-1)*Oe.segmentDuration*Oe.timescale),Ee=(0,M.vi)(Ee,"Bandwidth",Oe.bandwidth),(0,M.eR)(Ee)}(ie,He)}ce(pe)}}},setTrackByIndex:J,getCurrentTrackIndex:function(){return B.getCurrentTrackIndex()},getBitrateList:function(){var ne=B.getTracks(),ce=0;return ne.map(function(we){var ye=new Ou;return ye.mediaType=y.Z.IMAGE,ye.qualityIndex=ce++,ye.bitrate=we.bitrate,ye.width=we.width,ye.height=we.height,ye})},reset:H},H(),B=(0,In.Z)(V).create({streamInfo:ee,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),P}Lu.__dashjs_factory_name="ThumbnailController";var oa=F.Z.getClassFactory(Lu),aa=A(7417);function cu(L){var P;L=L||{};var B=[],V=(0,m.Z)(this.context).getInstance(),ee=L.updateEventName,J=L.addBlacklistEventName;function H(ne){B.indexOf(ne)===-1&&(B.push(ne),V.trigger(ee,{entry:ne}))}return P={add:H,contains:function(ne){return!!(B.length&&ne&&ne.length)&&B.indexOf(ne)!==-1},reset:function(){B=[]}},J&&V.on(J,function(ne){H(ne.entry)},P),P}cu.__dashjs_factory_name="BlackListController";var ms=F.Z.getClassFactory(cu),yc=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT,y.Z.MUXED,y.Z.IMAGE];function xr(L){L=L||{};var P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze,$e,Ee,ke=this.context,Ae=(0,m.Z)(ke).getInstance(),Ge=(0,St.Z)(ke).getInstance(),Z=L.manifestModel,le=L.mediaPlayerModel,ae=L.dashMetrics,se=L.manifestUpdater,Q=L.adapter,Pe=L.timelineConverter,be=L.capabilities,Fe=L.errHandler,xe=L.abrController,he=L.playbackController,Ne=L.eventController,Xe=L.mediaController,ht=L.protectionController,lt=L.textController,et=L.videoModel,pt=L.streamInfo,jt=L.settings;function Ht(Ct,Sn){return new Promise(function(En,Lt){Jt(),ye=!0,Dn();var On=et.getElement(),ct=[];yc.forEach(function(nt){(nt!==y.Z.TEXT||Ct)&&(nt!==y.Z.VIDEO||!On||On&&/^VIDEO$/i.test(On.nodeName))&&ct.push(Ft(nt,Ct))}),Promise.all(ct).then(function(){return nt=Sn,new Promise(function(Kt){var ze={},Ve=V.map(function(Dt){return Dt.createBufferSinks(nt)});Promise.all(Ve).then(function(Dt){Dt.forEach(function(fn){fn&&(ze[fn.getType()]=fn)}),Kt(ze)}).catch(function(){Kt(ze)})});var nt}).then(function(nt){if(ye=!1,V.length===0){var Kt="No streams to play.";Fe.error(new fe.Z(Se.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Kt,Z.getValue())),B.fatal(Kt)}else xn();Ct&&lt.createTracks(pt),En(nt)}).catch(function(nt){Lt(nt)})})}function Ft(Ct,Sn){var En,Lt=Q.getAllMediaInfoForType(pt,Ct),On=[],ct=null;if(!Lt||Lt.length===0)return B.info("No "+Ct+" data."),Promise.resolve();Ct===y.Z.VIDEO&&(ne=!0),Ct===y.Z.AUDIO&&(ce=!0);for(var nt=0,Kt=Lt.length;nt<Kt;nt++)ct=Lt[nt],Ct===y.Z.TEXT&&ct.isEmbedded&&(lt.addEmbeddedTrack(pt,ct),On.push(ct)),Ut(ct)&&Xe.addTrack(ct);if(On.length>0&&(Xe.setInitialMediaSettingsForType(Ct,pt),lt.addMediaInfosToBuffer(pt,Ct,On)),Lt=Lt.filter(function(Ve){return!Ve.isEmbedded}),Lt.length===0)return Promise.resolve();if(Ct===y.Z.IMAGE)return(me=oa(ke).create({streamInfo:pt,adapter:Q,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Ze,eventBus:Ae,events:T.Z,dashConstants:v.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();Ae.trigger(T.Z.STREAM_INITIALIZING,{streamInfo:pt,mediaInfo:ct}),Xe.setInitialMediaSettingsForType(Ct,pt);var ze=function(Ve,Dt){var fn=Ve&&Ve.length>0?Ve[0]:null,Tn=ie.getModel(fn?fn.type:null),sr=fn?fn.type:null,Zr=fn?fn.mimeType:null,Ai=fn?fn.isFragmented:null,zr=hn(ke).create({streamInfo:pt,type:sr,mimeType:Zr,timelineConverter:Pe,adapter:Q,manifestModel:Z,mediaPlayerModel:le,fragmentModel:Tn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:xe,playbackController:he,mediaController:Xe,textController:lt,errHandler:Fe,settings:jt,boxParser:Oe,segmentBlacklistController:pe});zr.initialize(Dt,ne,Ai),V.push(zr);for(var io=0;io<Ve.length;io++)zr.addMediaInfo(Ve[io]);return sr===y.Z.TEXT&&lt.addMediaInfosToBuffer(pt,sr,Ve,Tn),zr}(Lt,Sn);return(En=Xe.getCurrentTrackFor(Ct,pt.id))?(xe.updateTopQualityIndex(En),ze.selectMediaInfo(Ct===y.Z.TEXT&&En.isEmbedded?Lt[0]:En)):Promise.resolve()}function Ut(Ct){var Sn,En=Ct?Ct.type:null;return En===y.Z.MUXED?(Sn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",B.fatal(Sn),Fe.error(new fe.Z(Se.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Sn,Z.getValue())),!1):!(En!==y.Z.TEXT&&En!==y.Z.IMAGE&&Ct.contentProtection&&!be.supportsEncryptedMedia()&&(Fe.error(new fe.Z(Se.CAPABILITY_MEDIAKEYS_ERROR_CODE,Se.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function An(Ct){for(var Sn=V?V.length:0,En=0;En<Sn;En++){var Lt=V[En].getFragmentModel();Lt.abortRequests(),Lt.resetInitialSettings(),V[En].reset(!1,Ct)}lt&&lt.deactivateStream(pt),V=[],J=!1,H=!1,Fn(!1),yt(!1),Ae.trigger(T.Z.STREAM_DEACTIVATED,{streamInfo:pt})}function it(Ct){An(Ct),ee=!1,ne=!1,ce=!1,we={},ye=!1,$e=!1,Ee=[]}function yt(Ct){$e=Ct}function $t(){return pt?pt.start:NaN}function Nt(){return pt?pt.id:null}function en(){return pt}function Jt(){if(!et||!xe)throw new Error(y.Z.MISSING_CONFIG_ERROR)}function Wt(Ct){Ct.error&&(Fe.error(Ct.error),B.fatal(Ct.error.message))}function Dn(){if(Ne){var Ct=Q.getEventsFor(pt);Ct&&Ct.length>0&&Ne.addInlineEvents(Ct,pt.id)}}function xn(){for(var Ct=V.length,Sn=we.audio||we.video?new fe.Z(Se.DATA_UPDATE_FAILED_ERROR_CODE,Se.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,En=0;En<Ct;En++)if(V[En].isUpdating()||ye)return;if(ht){ht.clearMediaInfoArray();for(var Lt=0;Lt<Ct&&V[Lt];Lt++){var On=V[Lt].getType(),ct=V[Lt].getMediaInfo();if(On===y.Z.AUDIO||On===y.Z.VIDEO||On===y.Z.TEXT&&ct.isFragmented){var nt=V[Lt].getMediaInfo();nt&&ht.initializeForMedia(nt)}}ht.handleKeySystemFromManifest()}Sn?Fe.error(Sn):ee||(ee=!0,et.waitForReadyState(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){Ae.trigger(T.Z.STREAM_INITIALIZED,{streamInfo:pt})}))}function rr(){var Ct=un(),Sn=Ct.length;if(Sn!==0){for(var En=0;En<Sn;En++)if(!Ct[En].isBufferingCompleted()&&(Ct[En].getType()===y.Z.AUDIO||Ct[En].getType()===y.Z.VIDEO))return void B.debug("onBufferingCompleted - One streamProcessor has finished but",Ct[En].getType(),"one is not buffering completed");B.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),H=!0,Ae.trigger(T.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:pt},{streamInfo:pt})}else B.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ir(Ct){we[Ct.mediaType]=Ct.error,xn()}function bt(Ct){Ne&&Ne.addInbandEvents(Ct.events,pt.id)}function Xt(Ct){return Ct&&Ct.type?Gt(Ct.type):null}function Gt(Ct){return Ct?un().filter(function(Sn){return Sn.getType()===Ct})[0]:null}function un(){for(var Ct,Sn,En=[],Lt=0;Lt<V.length;Lt++)(Ct=(Sn=V[Lt]).getType())!==y.Z.AUDIO&&Ct!==y.Z.VIDEO&&Ct!==y.Z.TEXT||En.push(Sn);return En}function vn(Ct,Sn){var En=en(),Lt=Sn.getStreamInfo();if(!Lt||!En)return!0;var On=Q.getAdaptationForType(Lt.index,Ct,Lt),ct=Q.getAdaptationForType(En.index,Ct,En);return On&&ct?!(!Pn(ct)&&Pn(On)):!On&&!ct}function Pn(Ct){return!!Ct&&!!(Ct.ContentProtection||Ct.Representation_asArray&&Ct.Representation_asArray.length>0&&Ct.Representation_asArray[0].ContentProtection)}function Nn(Ct,Sn){var En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Ct||!Ct.hasOwnProperty("getStreamInfo"))return!1;var Lt=Ct.getStreamInfo(),On=En?En.getStreamInfo():en();if(!Lt||!On)return!1;var ct=Q.getAdaptationForType(Lt.index,Sn,Lt),nt=Q.getAdaptationForType(On.index,Sn,On);if(!ct||!nt)return!ct&&!nt;var Kt=ct&&nt&&ct.mimeType===nt.mimeType,ze=nt.Representation_asArray.map(function(Tn){return Tn.codecs}),Ve=ct.Representation_asArray.map(function(Tn){return Tn.codecs}),Dt=Ve.some(function(Tn){return ze.indexOf(Tn)>-1}),fn=Ve.some(function(Tn){return ze.some(function(sr){return be.codecRootCompatibleWithCodec(sr,Tn)})});return Dt||fn&&Kt}function Fn(Ct){He=Ct}function Gn(){return He}return P={initialize:function(){Ae.on(T.Z.BUFFERING_COMPLETED,rr,P),Ae.on(T.Z.DATA_UPDATE_COMPLETED,ir,P),Ae.on(T.Z.INBAND_EVENTS,bt,P),ht&&(Ae.on(T.Z.KEY_ERROR,Wt,P),Ae.on(T.Z.SERVER_CERTIFICATE_UPDATED,Wt,P),Ae.on(T.Z.LICENSE_REQUEST_COMPLETE,Wt,P),Ae.on(T.Z.KEY_SYSTEM_SELECTED,Wt,P),Ae.on(T.Z.KEY_SESSION_CREATED,Wt,P),Ae.on(T.Z.KEY_STATUSES_CHANGED,Wt,P)),lt.initializeForStream(pt),Ae.trigger(T.Z.STREAM_UPDATED,{streamInfo:pt})},getStreamId:function(){return pt?pt.id:null},activate:function(Ct,Sn){return new Promise(function(En,Lt){if(!J)return Gn()?(J=!0,Ae.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:pt}),void En(Sn)):void function(On,ct){return Ht(On,ct)}(Ct,Sn).then(function(On){J=!0,Ae.trigger(T.Z.STREAM_ACTIVATED,{streamInfo:pt}),En(On)}).catch(function(On){Lt(On)});En(Sn)})},deactivate:An,getIsActive:function(){return J},getDuration:function(){return pt?pt.duration:NaN},getStartTime:$t,getId:Nt,getStreamInfo:en,getHasAudioTrack:function(){return ce},getHasVideoTrack:function(){return ne},startPreloading:function(Ct,Sn){return new Promise(function(En,Lt){Gn()?Lt():(B.info("[startPreloading] Preloading next stream with id ".concat(Nt())),Fn(!0),Ht(Ct,Sn).then(function(){for(var On=0;On<V.length&&V[On];On++)V[On].setExplicitBufferingTime($t()),V[On].getScheduleController().startScheduleTimer();En()}).catch(function(){Fn(!1),Lt()}))})},initializeForTextWithMediaSource:function(Ct){return new Promise(function(Sn,En){Ft(y.Z.TEXT,Ct).then(function(){return(Lt=Gt(y.Z.TEXT))?Lt.createBufferSinks():Promise.resolve();var Lt}).then(function(){lt.createTracks(pt),Sn()}).catch(function(Lt){En(Lt)})})},getThumbnailController:function(){return me},getBitrateListFor:function(Ct){if(Jt(),Ct===y.Z.IMAGE)return me?me.getBitrateList():[];var Sn=function(En){for(var Lt=null,On=0;On<V.length;On++)if((Lt=V[On]).getType()===En)return Lt.getMediaInfo();return null}(Ct);return xe.getBitrateList(Sn)},updateData:function(Ct){return new Promise(function(Sn){ye=!0,pt=Ct,Ne&&Dn();for(var En=[],Lt=0,On=V.length;Lt<On;Lt++){var ct=V[Lt],nt=ct.getMediaInfo();En.push(ct.updateStreamInfo(pt));var Kt=Q.getAllMediaInfoForType(pt,ct.getType());if(Kt=Kt.filter(function(Dt){return!Dt.isEmbedded})){ct.clearMediaInfoArray();for(var ze=0;ze<Kt.length;ze++){var Ve=Kt[ze];ct.addMediaInfo(Kt[ze]),Q.areMediaInfosEqual(nt,Ve)&&(xe.updateTopQualityIndex(Ve),En.push(ct.selectMediaInfo(Ve)))}}}Promise.all(En).then(function(){for(En=[];Ee.length>0;){var Dt=Ee.pop(),fn=Dt.newMediaInfo,Tn=Xt(Dt.oldMediaInfo);if(!Tn)return;En.push(Tn.prepareTrackSwitch()),En.push(Tn.selectMediaInfo(fn))}return Promise.all(En)}).then(function(){ye=!1,xn(),Ae.trigger(T.Z.STREAM_UPDATED,{streamInfo:pt}),Sn()})})},reset:function(Ct){ie&&(ie.reset(),ie=null),xe&&pt&&xe.clearDataForStream(pt.id),pe&&(pe.reset(),pe=null),it(Ct),pt=null,Ae.off(T.Z.DATA_UPDATE_COMPLETED,ir,P),Ae.off(T.Z.BUFFERING_COMPLETED,rr,P),Ae.off(T.Z.INBAND_EVENTS,bt,P),ht&&(Ae.off(T.Z.KEY_ERROR,Wt,P),Ae.off(T.Z.SERVER_CERTIFICATE_UPDATED,Wt,P),Ae.off(T.Z.LICENSE_REQUEST_COMPLETE,Wt,P),Ae.off(T.Z.KEY_SYSTEM_SELECTED,Wt,P),Ae.off(T.Z.KEY_SESSION_CREATED,Wt,P),Ae.off(T.Z.KEY_STATUSES_CHANGED,Wt,P))},getProcessors:un,setMediaSource:function(Ct){return new Promise(function(Sn,En){for(var Lt=[],On=0;On<V.length;)Ut(V[On].getMediaInfo())?(Lt.push(V[On].setMediaSource(Ct)),On++):(V[On].reset(),V.splice(On,1));Promise.all(Lt).then(function(){for(var ct=0;ct<V.length;ct++)V[ct].dischargePreBuffer();if(V.length===0){var nt="No streams to play.";Fe.error(new fe.Z(Se.MANIFEST_ERROR_ID_NOSTREAMS_CODE,nt+"nostreams",Z.getValue())),B.fatal(nt)}Sn()}).catch(function(ct){B.error(ct),En(ct)})})},isMediaCodecCompatible:function(Ct){var Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Nn(Ct,y.Z.VIDEO,Sn)&&Nn(Ct,y.Z.AUDIO,Sn)},isProtectionCompatible:function(Ct){return!Ct||vn(y.Z.VIDEO,Ct)&&vn(y.Z.AUDIO,Ct)},getPreloaded:Gn,getIsEndedEventSignaled:function(){return $e},setIsEndedEventSignaled:yt,getAdapter:function(){return Q},getHasFinishedBuffering:function(){return H},setPreloaded:Fn,startScheduleControllers:function(){for(var Ct=V.length,Sn=0;Sn<Ct&&V[Sn];Sn++)V[Sn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(Ct){if(J&&pt){H=!1;var Sn=Ct.newMediaInfo,En=Z.getValue();Q.setCurrentMediaInfo(pt.id,Sn.type,Sn);var Lt=Xt(Sn);if(Lt){var On=he.getTime();B.info("Stream -  Process track changed at current time "+On),En.refreshManifestOnSwitchTrack?(Ee.push(Ct),se.getIsUpdating()||(B.debug("Stream -  Refreshing manifest for switch track"),se.refreshManifest())):Lt.selectMediaInfo(Sn).then(function(){Sn.type!==y.Z.VIDEO&&Sn.type!==y.Z.AUDIO||xe.updateTopQualityIndex(Sn),Lt.prepareTrackSwitch()})}}},prepareQualityChange:function(Ct){var Sn=Gt(Ct.mediaType);Sn&&Sn.prepareQualityChange(Ct)}},function(){try{Ze=(0,N.Z)(ke).getInstance(),B=Ze.getLogger(P),it(),Oe=(0,aa.Z)(ke).getInstance(),pe=ms(ke).create({updateEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),ie=gs(ke).create({streamInfo:pt,mediaPlayerModel:le,dashMetrics:ae,errHandler:Fe,settings:jt,boxParser:Oe,dashConstants:v.Z,urlUtils:Ge})}catch(Ct){throw Ct}}(),P}xr.__dashjs_factory_name="Stream";var vs=F.Z.getClassFactory(xr),ys=function L(P){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=P||null,this.type=ot.w.CONTENT_STEERING_TYPE,this.responseType="json"},Yr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Ec(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe=this.context,Ze=(0,St.Z)(Oe).getInstance();function $e(xe){Z(xe,"baseUrl")}function Ee(xe){Z(xe,"location")}function ke(xe){if(xe&&xe.request&&xe.request.serviceLocation&&xe.request.requestStartDate&&xe.request.requestEndDate&&!isNaN(xe.request.bytesTotal)){var he=xe.request.serviceLocation,Ne=xe.request.requestEndDate.getTime()-xe.request.requestStartDate.getTime();Ge(he,parseInt(8*xe.request.bytesTotal/Ne*1e3))}}function Ae(xe){xe&&xe.httpRequest&&xe.httpRequest._serviceLocation&&!isNaN(xe.throughput)&&Ge(xe.httpRequest._serviceLocation,1e3*xe.throughput)}function Ge(xe,he){ee[xe]||(ee[xe]=[]),ee[xe].push(he),ee[xe].length>4&&ee[xe].shift()}function Z(xe,he){if(xe&&xe.request&&xe.request.serviceLocation){var Ne=xe.request.serviceLocation;V[he].all.indexOf(Ne)===-1&&V[he].all.push(Ne),V[he].current=Ne}}function le(){var xe=ye.getValue(),he=He.getContentSteering(xe);return he||(he=me.getServiceDescriptionSettings().contentSteering),he}function ae(){return new Promise(function(xe){try{var he=le();if(!he||!he.serverUrl)return void xe();var Ne=function(ht){var lt=ht.serverUrl;B&&B.reloadUri&&(lt=Ze.isRelative(B.reloadUri)?Ze.resolve(B.reloadUri,ht.serverUrl):B.reloadUri);var et=[],pt=V.baseUrl.all.concat(V.location.all);if(pt.length>0){var jt=pt.map(function(Ut){var An=function(it){if(!it||!ee[it]||ee[it].length===0)return-1;var yt=ee[it].reduce(function($t,Nt){return $t+Nt})/ee[it].length;return parseInt(yt)}(Ut);return{serviceLocation:Ut,throughput:An}});jt.sort(function(Ut,An){return An.throughput-Ut.throughput});var Ht="",Ft="";jt.forEach(function(Ut,An){An!==0&&(Ht="".concat(Ht,","),Ut.throughput>-1&&(Ft="".concat(Ft,","))),Ht="".concat(Ht).concat(Ut.serviceLocation),Ut.throughput>-1&&(Ft="".concat(Ft).concat(Ut.throughput))}),et.push({key:"_DASH_pathway",value:'"'.concat(Ht,'"')}),et.push({key:"_DASH_throughput",value:Ft})}return lt=rn.Z.addAditionalQueryParameterToUrl(lt,et)}(he),Xe=new ys(Ne);H.load({request:Xe,success:function(ht){(function(lt){lt&&lt[v.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(lt[v.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((B=new Yr).version=lt[v.Z.CONTENT_STEERING_RESPONSE.VERSION],lt[v.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(lt[v.Z.CONTENT_STEERING_RESPONSE.TTL])&&(B.ttl=lt[v.Z.CONTENT_STEERING_RESPONSE.TTL]),lt[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(B.reloadUri=lt[v.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),lt[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(B.pathwayPriority=lt[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),lt[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(B.pathwayClones=lt[v.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],B.pathwayClones=B.pathwayClones.filter(function(et){return function(pt){return pt[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&pt[v.Z.CONTENT_STEERING_RESPONSE.ID]&&pt[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&pt[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST]}(et)})),Pe())})(ht),pe.trigger(_.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:B,url:Ne}),xe()},error:function(ht,lt,et,pt){(function(jt,Ht){try{switch(P.warn("Error fetching data from content steering server",jt),Ht.status){case 410:break;case 429:var Ft=Ht&&Ht.getResponseHeader?Ht.getResponseHeader("retry-after"):null;Ft!==null&&(B||(B={}),B.ttl=parseInt(Ft)),Pe();break;default:Pe()}}catch(Ut){P.error(Ut)}})(ht,pt),xe(ht)},complete:function(){V.baseUrl.all=se(V.baseUrl),V.location.all=se(V.location)}})}catch(ht){xe(ht)}})}function se(xe){return xe.all&&xe.all.length!==0&&xe.current?xe.all.filter(function(he){return he===xe.current}):[]}function Q(xe){try{var he=[];return xe&&xe.length!==0&&B&&B.pathwayClones&&B.pathwayClones.length!==0&&B.pathwayClones.forEach(function(Ne){var Xe=xe.filter(function(jt){return Ne[v.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===jt.serviceLocation}),ht=null;if(Xe&&Xe.length>0&&(ht=Xe[0]),ht){var lt=new URL(ht.url),et=Ne[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.HOST];et=rn.Z.stringHasProtocol(et)?et:"".concat(lt.protocol,"//").concat(et);var pt={synthesizedUrl:"".concat(et).concat(lt.pathname),serviceLocation:Ne[v.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Ne[v.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][v.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:ht};he.push(pt)}}),he}catch(Ne){return P.error(Ne),[]}}function Pe(){B&&B.ttl&&!isNaN(B.ttl)&&(J&&clearTimeout(J),J=setTimeout(function(){ae()},1e3*B.ttl))}function be(){J&&clearTimeout(J),J=null}function Fe(){B=null,ee={},V={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},be()}return L={reset:function(){Fe(),pe.off(_.Z.FRAGMENT_LOADING_STARTED,$e,L),pe.off(_.Z.MANIFEST_LOADING_STARTED,Ee,L),pe.off(_.Z.MANIFEST_LOADING_FINISHED,ke,L),pe.off(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ae,L)},setConfig:function(xe){xe&&(xe.adapter&&(He=xe.adapter),xe.errHandler&&(ne=xe.errHandler),xe.dashMetrics&&(ce=xe.dashMetrics),xe.mediaPlayerModel&&(we=xe.mediaPlayerModel),xe.requestModifier&&(ie=xe.requestModifier),xe.manifestModel&&(ye=xe.manifestModel),xe.serviceDescriptionController&&(me=xe.serviceDescriptionController),xe.eventBus&&(pe=xe.eventBus))},loadSteeringData:ae,getCurrentSteeringResponseData:function(){return B},shouldQueryBeforeStart:function(){var xe=le();return!!xe&&xe.queryBeforeStart},getSteeringDataFromManifest:le,stopSteeringRequestTimer:be,getSynthesizedBaseUrlElements:function(xe){try{return Q(xe).map(function(he){var Ne=new Qn(he.synthesizedUrl,he.serviceLocation);return Ne.queryParams=he.queryParams,Ne.dvbPriority=he.reference.dvbPriority,Ne.dvbWeight=he.reference.dvbWeight,Ne.availabilityTimeOffset=he.reference.availabilityTimeOffset,Ne.availabilityTimeComplete=he.reference.availabilityTimeComplete,Ne})}catch(he){return P.error(he),[]}},getSynthesizedLocationElements:function(xe){try{return Q(xe).map(function(he){var Ne=new Zn(he.synthesizedUrl,he.serviceLocation);return Ne.queryParams=he.queryParams,Ne})}catch(he){return P.error(he),[]}},initialize:function(){H=Ao(Oe).create({errHandler:ne,dashMetrics:ce,mediaPlayerModel:we,requestModifier:ie,errors:Se}),pe.on(_.Z.FRAGMENT_LOADING_STARTED,$e,L),pe.on(_.Z.MANIFEST_LOADING_STARTED,Ee,L),pe.on(_.Z.MANIFEST_LOADING_FINISHED,ke,L),pe.on(_.Z.THROUGHPUT_MEASUREMENT_STORED,Ae,L)}},P=(0,N.Z)(Oe).getInstance().getLogger(L),Fe(),L}Ec.__dashjs_factory_name="ContentSteeringController";var Aa=F.Z.getSingletonFactory(Ec);function Il(){var L,P,B,V=this.context,ee=(0,Be.Z)(V).getInstance();return L={select:function(J){if(!J||J.length===0)return null;var H=null;return ee.get().streaming.applyContentSteering&&(H=function(ne){var ce=B.getCurrentSteeringResponseData();return ce&&ce.pathwayPriority&&ce.pathwayPriority.length>0?function(){for(var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ie=0,me=null,pe=function(){var He=we[ie],Oe=ye.findIndex(function(Ze){return Ze.serviceLocation&&Ze.serviceLocation===He});if(Oe!==-1&&!P.contains(ye[Oe].serviceLocation))return me=ye[Oe],"break";ie+=1};ie<we.length&&pe()!=="break";);return me}(ce.pathwayPriority,ne):null}(J)),H||(H=function(ne){return ne[0]}(J)),H},setConfig:function(J){J.blacklistController&&(P=J.blacklistController),J.contentSteeringController&&(B=J.contentSteeringController)},reset:function(){P.reset()}},P=ms(V).create({updateEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),B=Aa(V).getInstance(),L}Il.__dashjs_factory_name="LocationSelector";var sa=F.Z.getClassFactory(Il);function Es(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He=this.context,Oe=(0,m.Z)(He).getInstance(),Ze=(0,St.Z)(He).getInstance();function $e(){B=NaN,H=!1,ee=!0,J=!1,Ee()}function Ee(){V!==null&&(clearTimeout(V),V=null)}function ke(be){Ee(),J||(isNaN(be)&&!isNaN(B)&&(be=1e3*B),isNaN(be)||(P.debug("Refresh manifest in "+be+" milliseconds."),V=setTimeout(le,be)))}function Ae(){var be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];H=!0;var Fe=ce.getValue(),xe=Fe.url,he=null,Ne=ye.getPatchLocation(Fe),Xe=we.select(Ne),ht=null;if(Xe&&!be)xe=Xe.url,he=Xe.serviceLocation,ht=Xe.queryParams;else{var lt=Ge(Fe),et=we.select(lt);et&&(xe=et.url,he=et.serviceLocation,ht=et.queryParams)}Ze.isRelative(xe)&&(xe=Ze.resolve(xe,Fe.url)),ne.load(xe,he,ht)}function Ge(be){var Fe=ye.getLocation(be),xe=me.getSynthesizedLocationElements(Fe);return Fe.concat(xe)}function Z(be){if(be){if(ye.getIsPatch(be)){var Fe=be;be=ce.getValue();var xe=ye.isPatchValid(be,Fe),he=xe;if(xe){var Ne=ye.getPublishTime(be);he=ye.applyPatchToManifest(be,Fe);var Xe=ye.getPublishTime(be);he=Ne.getTime()!=Xe.getTime()}if(!he)return P.debug("Patch provided is invalid, performing full manifest refresh"),void Ae(!0);be.loadedTime=new Date}}else(be=ce.getValue()).loadedTime=new Date;if(ce.getValue()&&ce.getValue().type===v.Z.DYNAMIC&&be.type===v.Z.STATIC)return Oe.trigger(T.Z.DYNAMIC_TO_STATIC),H=!1,void(J=!0);ce.setValue(be);var ht=new Date,lt=(ht.getTime()-be.loadedTime.getTime())/1e3;1e3*(B=ye.getManifestUpdatePeriod(be,lt))>2147483647&&(B=2147483647e-3),Oe.trigger(T.Z.MANIFEST_UPDATED,{manifest:be}),P.info("Manifest has been refreshed at "+ht+"["+ht.getTime()/1e3+"] "),ee||ke()}function le(){ee||(H?ke(pe.get().streaming.manifestUpdateRetryInterval):Ae())}function ae(be){be.error?be.error.code===Se.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ie.error(be.error):Z(be.manifest)}function se(){ee=!1,ke()}function Q(){(ee=!pe.get().streaming.scheduling.scheduleWhilePaused)&&Ee()}function Pe(){H=!1}return L={initialize:function(){$e(),Oe.on(T.Z.STREAMS_COMPOSED,Pe,this),Oe.on(_.Z.PLAYBACK_STARTED,se,this),Oe.on(_.Z.PLAYBACK_PAUSED,Q,this),Oe.on(T.Z.INTERNAL_MANIFEST_LOADED,ae,this)},setManifest:function(be){Z(be)},refreshManifest:Ae,getIsUpdating:function(){return H},setConfig:function(be){be&&(be.manifestModel&&(ce=be.manifestModel),be.adapter&&(ye=be.adapter),be.manifestLoader&&(ne=be.manifestLoader),be.errHandler&&(ie=be.errHandler),be.locationSelector&&(we=be.locationSelector),be.settings&&(pe=be.settings),be.contentSteeringController&&(me=be.contentSteeringController))},reset:function(){Oe.off(_.Z.PLAYBACK_STARTED,se,this),Oe.off(_.Z.PLAYBACK_PAUSED,Q,this),Oe.off(T.Z.STREAMS_COMPOSED,Pe,this),Oe.off(T.Z.INTERNAL_MANIFEST_LOADED,ae,this),$e()}},P=(0,N.Z)(He).getInstance().getLogger(L),we=sa(He).create(),L}Es.__dashjs_factory_name="ManifestUpdater";var Vr=F.Z.getClassFactory(Es);function Ha(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze=this.context,$e=(0,m.Z)(Ze).getInstance(),Ee=(0,St.Z)(Ze).getInstance();function ke(){ne=[],ce=[],we=null,ye=null,me=null,ie=NaN,B=!1,V=!1,pe=ee.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ae(){ee.get().streaming.utcSynchronization.enabled&&!B&&!V&&me&&me.value&&me.schemeIdUri&&!isNaN(ie)&&!isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)&&(ye&&(Date.now()-ye)/1e3<30||(ne=[],V=!0,Ge(isNaN(ee.get().streaming.utcSynchronization.backgroundAttempts)?2:ee.get().streaming.utcSynchronization.backgroundAttempts)))}function Ge(et){try{if(et<=0)return void ht();var pt=Date.now();J[me.schemeIdUri](me.value,function(jt){var Ht=Date.now(),Ft=le(pt,Ht,jt);ne.push(Ft),Ge(et-1)},function(){ht()})}catch(jt){ht()}}function Z(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,pt=et||0;if(!ce||ce.length===0||pt>=ce.length)ae();else{var jt=ce[pt];if(jt)if(J.hasOwnProperty(jt.schemeIdUri)){var Ht=new Date().getTime();J[jt.schemeIdUri](jt.value,function(Ft){var Ut=new Date().getTime(),An=le(Ht,Ut,Ft);me=jt,ae(An)},function(){Z(pt+1)})}else Z(pt+1);else ae()}}function le(et,pt,jt){return jt-(pt-(pt-et)/2)}function ae(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,pt=isNaN(et);pt&&ee.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?Ne():Xe(pt,et)}function se(et){var pt=Date.parse(et);return isNaN(pt)&&(pt=function(jt){var Ht,Ft,Ut=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(jt);return Ht=Date.UTC(parseInt(Ut[1],10),parseInt(Ut[2],10)-1,parseInt(Ut[3],10),parseInt(Ut[4],10),parseInt(Ut[5],10),Ut[6]&&(parseInt(Ut[6],10)||0),Ut[7]&&1e3*parseFloat(Ut[7])||0),Ut[9]&&Ut[10]&&(Ft=60*parseInt(Ut[9],10)+parseInt(Ut[10],10),Ht+=(Ut[8]==="+"?-1:1)*Ft*60*1e3),new Date(Ht).getTime()}(et)),pt}function Q(et){return Date.parse(et)}function Pe(et){return Date.parse(et)}function be(et,pt,jt){jt()}function Fe(et,pt,jt){var Ht=se(et);isNaN(Ht)?jt():pt(Ht)}function xe(et,pt,jt,Ht,Ft){var Ut,An,it=!1,yt=new XMLHttpRequest,$t=Ft?ot.w.HEAD:ot.w.GET,Nt=pt.match(/\S+/g);if(pt=Nt.shift(),Ut=function(){it||(it=!0,Nt.length?xe(et,Nt.join(" "),jt,Ht,Ft):Ht())},An=function(){var Jt,Wt;yt.status===200&&(Jt=Ft?yt.getResponseHeader("Date"):yt.response,Wt=et(Jt),isNaN(Wt)||(jt(Wt),it=!0))},Ee.isRelative(pt)){var en=Oe.resolve();en&&(pt=Ee.resolve(pt,en.url))}yt.open($t,pt),yt.timeout=5e3,yt.onload=An,yt.onloadend=Ut,yt.send()}function he(et,pt,jt){xe(Pe,et,pt,jt,!0)}function Ne(){var et=H.getLatestMPDRequestHeaderValueByID("Date"),pt=et!==null?new Date(et).getTime():Number.NaN;isNaN(pt)?Xe(!0):Xe(!1,pt-Date.now())}function Xe(et,pt){if(isNaN(ie)||isNaN(pt)||et||function(Ht){try{var Ft,Ut=lt(Ht),An=isNaN(pe)?30:pe,it=isNaN(ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ee.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,yt=isNaN(ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ee.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,$t=isNaN(ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ee.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Ut?(Ft=Math.min(An*it,yt),P.debug("Increasing timeBetweenSyncAttempts to ".concat(Ft))):(Ft=Math.max(An/it,$t),P.debug("Decreasing timeBetweenSyncAttempts to ".concat(Ft))),pe=Ft}catch(Nt){}}(pt),!et&&!isNaN(pt)){we=Date.now(),B=!1;var jt=isNaN(ie);ie=pt,jt&&Ae(),P.debug("Completed UTC sync. Setting client - server offset to ".concat(pt))}et&&(me=null,B=!1,He.error(new fe.Z(Se.TIME_SYNC_FAILED_ERROR_CODE,Se.TIME_SYNC_FAILED_ERROR_MESSAGE))),$e.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:pt}),$e.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED)}function ht(){if(ne&&ne.length!==0){var et=ne.reduce(function(pt,jt){return pt+jt},0)/ne.length;lt(et)?P.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(P.debug("Completed background UTC sync. Setting client - server offset to ".concat(et)),ie=et,$e.trigger(T.Z.UPDATE_TIME_SYNC_OFFSET,{offset:ie})),V=!1,ye=Date.now()}}function lt(et){try{if(isNaN(ie))return!0;var pt=ee.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ee.get().streaming.utcSynchronization.maximumAllowedDrift)?ee.get().streaming.utcSynchronization.maximumAllowedDrift:100;return et>=ie-pt&&et<=ie+pt}catch(jt){return!0}}return L={initialize:function(){ke(),J={"urn:mpeg:dash:utc:http-head:2014":he,"urn:mpeg:dash:utc:http-xsdate:2014":xe.bind(null,se),"urn:mpeg:dash:utc:http-iso:2014":xe.bind(null,Q),"urn:mpeg:dash:utc:direct:2014":Fe,"urn:mpeg:dash:utc:http-head:2012":he,"urn:mpeg:dash:utc:http-xsdate:2012":xe.bind(null,se),"urn:mpeg:dash:utc:http-iso:2012":xe.bind(null,Q),"urn:mpeg:dash:utc:direct:2012":Fe,"urn:mpeg:dash:utc:http-ntp:2014":be,"urn:mpeg:dash:utc:ntp:2014":be,"urn:mpeg:dash:utc:sntp:2014":be}},attemptSync:function(et,pt){ce=et,B||(function(jt){try{if(!jt||!ee.get().streaming.utcSynchronization.enabled)return!1;var Ht=isNaN(pe)?30:pe;return!(we&&Ht&&!isNaN(Ht))||(Date.now()-we)/1e3>=Ht}catch(Ft){return!0}}(pt)?(B=!0,Z()):$e.trigger(T.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(et){et&&(et.dashMetrics&&(H=et.dashMetrics),et.baseURLController&&(Oe=et.baseURLController),et.errHandler&&(He=et.errHandler),et.settings&&(ee=et.settings))},reset:function(){ke(),$e.off(T.Z.ATTEMPT_BACKGROUND_SYNC,Ae,L)}},P=(0,N.Z)(Ze).getInstance().getLogger(L),$e.on(T.Z.ATTEMPT_BACKGROUND_SYNC,Ae,L),L}Ha.__dashjs_factory_name="TimeSyncController";var Ka=F.Z.getSingletonFactory(Ha);Ka.HTTP_TIMEOUT_MS=5e3,F.Z.updateSingletonFactory(Ha.__dashjs_factory_name,Ka);var Va=Ka;function xf(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance();return L={attachMediaSource:function(ne){var ce=window.URL.createObjectURL(P);return ne.setSource(ce),V==="managedMediaSource"&&(ne.setDisableRemotePlayback(!0),P.addEventListener("startstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)}),P.addEventListener("endstreaming",function(){H.trigger(_.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)})),ce},createMediaSource:function(){var ne="WebKitMediaSource"in window,ce="MediaSource"in window;return"ManagedMediaSource"in window?(P=new ManagedMediaSource,V="managedMediaSource",ee.info("Created ManagedMediaSource")):ce?(P=new MediaSource,V="mediaSource",ee.info("Created MediaSource")):ne&&(P=new WebKitMediaSource,ee.info("Created WebkitMediaSource")),P},detachMediaSource:function(ne){ne.setSource(null)},setConfig:function(ne){ne&&ne.settings&&(B=ne.settings)},setDuration:function ne(ce){P&&P.readyState==="open"&&(ce===null&&isNaN(ce)||P.duration!==ce&&(ce!==1/0||B.get().streaming.buffer.mediaSourceDurationInfinity||(ce=Math.pow(2,32)),function(we){for(var ye=we.sourceBuffers,ie=0;ie<ye.length;ie++)if(ye[ie].updating)return!0;return!1}(P)?setTimeout(ne.bind(null,ce),50):(ee.info("Set MediaSource duration:"+ce),P.duration=ce)))},setSeekable:function(ne,ce){P&&typeof P.setLiveSeekableRange=="function"&&typeof P.clearLiveSeekableRange=="function"&&P.readyState==="open"&&ne>=0&&ne<ce&&(P.clearLiveSeekableRange(),P.setLiveSeekableRange(ne,ce))},signalEndOfStream:function(ne){if(ne&&ne.readyState==="open"){for(var ce=ne.sourceBuffers,we=0;we<ce.length;we++)if(ce[we].updating||ce[we].buffered.length===0)return;ee.info("call to mediaSource endOfStream"),ne.endOfStream()}}},ee=(0,N.Z)(J).getInstance().getLogger(L),L}xf.__dashjs_factory_name="MediaSourceController";var Ah=F.Z.getSingletonFactory(xf);function bo(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie="urn:mpeg:dash:event:2012",me="discarded",pe="updated",He="added",Oe=this.context,Ze=(0,m.Z)(Oe).getInstance();function $e(){if(!H||!ne)throw new Error("setConfig function has to be called previously")}function Ee(){ye=!1,B={},V={},ee=null,we=!1,J=Date.now()/1e3}function ke(){try{if(!we){we=!0;var be=ne.getTime(),Fe=be-J;Fe=J>0?Math.max(0,Fe):0,Ae(V,Fe,be),Ae(B,Fe,be),Ge(V),Ge(B),J=be,we=!1}}catch(xe){we=!1,P.error(xe)}}function Ae(be,Fe,xe){try{se(be,function(he){if(he!==void 0){var Ne=isNaN(he.duration)?0:he.duration;he.calculatedPresentationTime<=xe&&he.calculatedPresentationTime+Fe+Ne>=xe?Pe(he,_.Z.EVENT_MODE_ON_START):(Q(xe,Ne+Fe,he.calculatedPresentationTime)||function(Xe){try{var ht=Xe.eventStream.period.start+Xe.eventStream.period.duration;return Xe.calculatedPresentationTime>ht}catch(lt){return P.error(lt),!1}}(he))&&(P.debug("Removing event ".concat(he.id," from period ").concat(he.eventStream.period.id," as it is expired or invalid")),function(Xe,ht){try{var lt=ht.eventStream.schemeIdUri,et=ht.eventStream.period.id,pt=ht.eventStream.value,jt=ht.id;Xe[et][lt]=Xe[et][lt].filter(function(Ht){return pt&&Ht.eventStream.value&&Ht.eventStream.value!==pt||Ht.id!==jt}),Xe[et][lt].length===0&&delete Xe[et][lt]}catch(Ht){P.error(Ht)}}(be,he))}})}catch(he){P.error(he)}}function Ge(be){try{for(var Fe in be)be.hasOwnProperty(Fe)&&Object.keys(be[Fe]).length===0&&delete be[Fe]}catch(xe){P.error(xe)}}function Z(be,Fe){var xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],he=be.eventStream.schemeIdUri,Ne=be.eventStream.value,Xe=be.id,ht=me;Fe[he]||(Fe[he]=[]);var lt=Fe[he].findIndex(function(pt){return(!Ne||pt.eventStream.value&&pt.eventStream.value===Ne)&&pt.id===Xe});if(lt===-1)Fe[he].push(be),be.triggeredReceivedEvent=!1,be.triggeredStartEvent=!1,ht=He;else if(xe){var et=Fe[he][lt];be.triggeredReceivedEvent=et.triggeredReceivedEvent,be.triggeredStartEvent=et.triggeredStartEvent,Fe[he][lt]=be,ht=pe}return ht}function le(be){try{if(be.eventStream.value==1){var Fe,xe=be.calculatedPresentationTime;Fe=be.calculatedPresentationTime==4294967295?NaN:be.calculatedPresentationTime+be.duration,Ze.trigger(_.Z.MANIFEST_VALIDITY_CHANGED,{id:be.id,validUntil:xe,newDuration:Fe,newManifestValidAfter:NaN},{mode:_.Z.EVENT_MODE_ON_START})}}catch(he){P.error(he)}}function ae(be){try{var Fe=ne.getTime();se(be,function(xe){var he=xe.eventStream&&xe.eventStream.period&&!isNaN(xe.eventStream.period.duration)?xe.eventStream.period.duration:NaN,Ne=xe.eventStream&&xe.eventStream.period&&!isNaN(xe.eventStream.period.start)?xe.eventStream.period.start:NaN;if(!isNaN(he)&&!isNaN(Ne)){var Xe=xe.calculatedPresentationTime;Math.abs(Xe-Fe)<300&&Pe(xe,_.Z.EVENT_MODE_ON_START)}})}catch(xe){P.error(xe)}}function se(be,Fe){try{if(be)for(var xe=Object.keys(be),he=0;he<xe.length;he++)for(var Ne=be[xe[he]],Xe=Object.keys(Ne),ht=0;ht<Xe.length;ht++)Ne[Xe[ht]].forEach(function(lt){lt!==void 0&&Fe(lt)})}catch(lt){P.error(lt)}}function Q(be,Fe,xe){try{return be-Fe>xe}catch(he){return P.error(he),!1}}function Pe(be,Fe){try{var xe=ne.getTime(),he=be.id;if(Fe===_.Z.EVENT_MODE_ON_RECEIVE&&!be.triggeredReceivedEvent)return P.debug("Received event ".concat(he)),be.triggeredReceivedEvent=!0,void Ze.trigger(be.eventStream.schemeIdUri,{event:be},{mode:Fe});be.triggeredStartEvent||(be.eventStream.schemeIdUri===ie&&be.eventStream.value==1?be.duration===0&&be.presentationTimeDelta===0||(P.debug("Starting manifest refresh event ".concat(he," at ").concat(xe)),function(){try{$e(),H.refreshManifest()}catch(Ne){P.error(Ne)}}()):be.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&be.eventStream.value==1?(P.debug("Starting callback event ".concat(he," at ").concat(xe)),function(Ne){try{(0,nn.Z)(Oe).create({}).load({method:"get",url:Ne,request:{responseType:"arraybuffer"}})}catch(Xe){P.error(Xe)}}(be.messageData)):(P.debug("Starting event ".concat(he," from period ").concat(be.eventStream.period.id," at ").concat(xe)),Ze.trigger(be.eventStream.schemeIdUri,{event:be},{mode:Fe})),be.triggeredStartEvent=!0)}catch(Ne){P.error(Ne)}}return L={addInlineEvents:function(be,Fe){try{if($e(),B[Fe]||(B[Fe]={}),be)for(var xe=0;xe<be.length;xe++){var he=be[xe];if(!Q(ne.getTime(),isNaN(he.duration)?0:he.duration,he.calculatedPresentationTime)){var Ne=Z(he,B[Fe],!0);Ne===He?(P.debug("Added inline event with id ".concat(he.id," from period ").concat(Fe)),Pe(he,_.Z.EVENT_MODE_ON_RECEIVE)):Ne===pe&&P.debug("Updated inline event with id ".concat(he.id," from period ").concat(Fe))}}}catch(Xe){throw Xe}},addInbandEvents:function(be,Fe){try{$e(),V[Fe]||(V[Fe]={});for(var xe=0;xe<be.length;xe++){var he=be[xe];Q(ne.getTime(),isNaN(he.duration)?0:he.duration,he.calculatedPresentationTime)||(Z(he,V[Fe],!1)===He?(he.eventStream.schemeIdUri===ie&&le(he),P.debug("Added inband event with id ".concat(he.id," from period ").concat(Fe)),Pe(he,_.Z.EVENT_MODE_ON_RECEIVE)):P.debug("Inband event with scheme_id_uri ".concat(he.eventStream.schemeIdUri,", value ").concat(he.eventStream.value,", period id ").concat(Fe," and event id ").concat(he.id," was ignored because it has been added before.")))}ke()}catch(Ne){throw Ne}},getInbandEvents:function(){return V},getInlineEvents:function(){return B},start:function(){try{$e(),P.debug("Start Event Controller");var be=ce.get().streaming.eventControllerRefreshDelay;ye||isNaN(be)||(ye=!0,ee=setInterval(ke,be))}catch(Fe){throw Fe}},setConfig:function(be){try{if(!be)return;be.manifestUpdater&&(H=be.manifestUpdater),be.playbackController&&(ne=be.playbackController),be.settings&&(ce=be.settings)}catch(Fe){throw Fe}},reset:function(){(function(){try{ee!==null&&ye&&(clearInterval(ee),ee=null,ye=!1,function(){try{ae(V),ae(B)}catch(be){P.error(be)}}())}catch(be){throw be}})(),Ee()}},P=(0,N.Z)(Oe).getInstance().getLogger(L),Ee(),L}bo.__dashjs_factory_name="EventController";var om=F.Z.getSingletonFactory(bo),Pi={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Nf(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function fu(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze,$e,Ee,ke,Ae,Ge,Z,le,ae,se,Q,Pe,be,Fe,xe,he,Ne,Xe,ht,lt,et,pt,jt,Ht,Ft,Ut,An,it,yt,$t,Nt,en,Jt=this.context,Wt=(0,m.Z)(Jt).getInstance();function Dn(){if(!(J&&J.hasOwnProperty("load")&&Ae&&Ae.hasOwnProperty("initialize")&&Ae.hasOwnProperty("reset")&&Ae.hasOwnProperty("getClientTimeOffset")&&H&&ke&&ce&&Ne))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function xn(){if(!ee||!ee.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function rr(){(function(){try{var Pt=ne.getStreamsInfo();if(!Z&&Pt.length===0)throw new Error("There are no periods in the MPD");Z&&Pt.length>0&&ce.updateManifestUpdateInfo({currentTime:Ne.getTime(),buffered:he.getBufferRange(),presentationStartTime:Pt[0].start,clientTimeOffset:Ae.getClientTimeOffset()}),Ge.length>0&&function(Ir){Ir.length!==0?Ge=Ge.filter(function(fr){var ri=Ir.filter(function(Qr){return Qr.id===fr.getId()}).length>0||fr.getId()===Z.getId();return ri||(P.debug("Removing stream ".concat(fr.getId())),fr.reset(!0)),ri}):P.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Pt);for(var yn=[],Hn=0,ur=Pt.length;Hn<ur;Hn++){var Tr=Pt[Hn];yn.push(bt(Tr)),ce.addManifestUpdateStreamInfo(Tr)}Promise.all(yn).then(function(){return new Promise(function(Ir,fr){Z?Ir():Xt(Pt,Ir,fr)})}).then(function(){Wt.trigger(T.Z.STREAMS_COMPOSED),Tn()}).catch(function(Ir){throw Ir})}catch(Ir){ke.error(new fe.Z(Se.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Ir.message+" nostreamscomposed",H.getValue())),Fe=!0,Qa()}})()}function ir(){yt=!0}function bt(Pt){var yn=Uc(Pt.id);return yn?yn.updateData(Pt):(yn=vs(Jt).create({manifestModel:H,mediaPlayerModel:ht,dashMetrics:ce,manifestUpdater:ee,adapter:ne,timelineConverter:Ae,capabilities:B,capabilitiesFilter:V,errHandler:ke,baseURLController:me,segmentBaseController:pe,textController:ae,abrController:Oe,playbackController:Ne,eventController:$e,mediaController:Ze,protectionController:le,videoModel:he,streamInfo:Pt,settings:it}),Ge.push(yn),yn.initialize(),Promise.resolve())}function Xt(Pt,yn,Hn){try{On();var ur=ce.getCurrentDVRInfo().range;if(ur.end<ur.start){$t&&clearTimeout($t);var Tr=Math.min(1e3*(-1*(ur.end-ur.start)+2),2147483647);return P.debug("Waiting for ".concat(Tr," ms before playback can start")),Wt.trigger(T.Z.AST_IN_FUTURE,{delay:Tr}),void($t=setTimeout(function(){Xt(Pt,yn,Hn)},Tr))}it.get().streaming.applyProducerReferenceTime&&Xe.calculateProducerReferenceTimeOffsets(Pt);var Ir=Pt[0].manifestInfo;if(it.get().streaming.applyServiceDescription&&Xe.applyServiceDescription(Ir),ne.getIsDynamic()){var fr=Qu(Pt,Ir);Ne.computeAndSetLiveDelay(fr,Ir)}(it.get().streaming.applyContentSteering&&ie.shouldQueryBeforeStart()?ie.loadSteeringData():Promise.resolve()).then(function(){var ri=H.getValue();ri&&me.update(ri),Gt(),yn()}).catch(function(ri){P.error(ri),Gt(),yn()})}catch(ri){Hn(ri)}}function Gt(){var Pt=function(){var ur;if(ne.getIsDynamic()){var Tr=ce.getCurrentDVRInfo();ur=(Tr&&Tr.range?Tr.range.end:0)-Ne.getOriginalLiveDelay();var Ir=Tr?Tr.range:null;if(Ir){if(isNaN(Nt)&&Nt.toString().indexOf("posix:")===-1){var fr=io(!0);isNaN(fr)||(P.info("Start time from URI parameters: ".concat(fr)),ur=Math.min(ur,fr))}else{P.info("Start time provided by the app: ".concat(Nt));var ri=Zi(!0,Nt);isNaN(ri)||(ur=Math.min(ur,ri))}var Qr=it.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;ur=Math.max(ur,Ir.start+Qr)}}else if(ur=Zs()[0].getStreamInfo().start,isNaN(Nt)){var Gs=io(!1);isNaN(Gs)||(P.info("Start time from URI parameters: ".concat(Gs)),ur=Math.max(ur,Gs))}else{P.info("Start time provided by the app: ".concat(Nt));var qs=Zi(!1,Nt);isNaN(qs)||(ur=Math.max(ur,qs))}return ur}(),yn=Lt(Pt),Hn=yn!==null?yn:Ge[0];Wt.trigger(T.Z.INITIAL_STREAM_SWITCH,{startTime:Pt}),un(Hn,null,Pt),Ht||(Ht=setInterval(function(){!Pe&&Ne.getTimeToStreamEnd()<=0&&!Ne.isSeeking()&&Wt.trigger(T.Z.PLAYBACK_ENDED,{isLast:fa().isLast})},200))}function un(Pt,yn,Hn){try{if(Pe||!Pt||yn===Pt&&Pt.getIsActive())return;Pe=!0,Wt.trigger(T.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:yn?yn.getStreamInfo():null,toStreamInfo:Pt.getStreamInfo()});var ur=!1;Z=Pt,yn&&(ur=Sn(Pt,yn),yn.deactivate(ur)),Hn=isNaN(Hn)?!ur&&yn?Pt.getStreamInfo().start:NaN:Hn,P.info("Switch to stream ".concat(Pt.getId(),". Seektime is ").concat(Hn,", current playback time is ").concat(Ne.getTime(),". Seamless period switch is set to ").concat(ur)),Ut=Ut.filter(function(Tr){return Tr.getId()!==Z.getId()}),Ne.initialize(fa(),!!yn),he.getElement()?vn(Hn,ur,!1):Pn(Hn,ur)}catch(Tr){Pe=!1}}function vn(Pt,yn){var Hn,ur=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Tr(){if(xe&&xe.readyState==="open"){P.debug("MediaSource is open!"),window.URL.revokeObjectURL(Hn),xe.removeEventListener("sourceopen",Tr),xe.removeEventListener("webkitsourceopen",Tr),zr();var fr=ce.getCurrentDVRInfo();we.setSeekable(fr.range.start,fr.range.end),ur?(isNaN(Pt)||Ne.seek(Pt,!0,!0),Z.setMediaSource(xe).then(function(){Z.initializeForTextWithMediaSource(xe)})):Pn(Pt,yn)}}function Ir(){xe.addEventListener("sourceopen",Tr,!1),xe.addEventListener("webkitsourceopen",Tr,!1),Hn=we.attachMediaSource(he),P.debug("MediaSource attached to element.  Waiting on open...")}xe?yn?Pn(Pt,yn):(we.detachMediaSource(he),Ir()):(xe=we.createMediaSource(),Ir())}function Pn(Pt,yn){Z.activate(xe,yn?Ft:void 0,Pt).then(function(Hn){if(Hn){var ur=Object.keys(Hn);ur.length>0&&Hn[ur[0]].getBuffer().changeType&&(An=!0),Ft=Hn}isNaN(Pt)||(Wt.trigger(T.Z.SEEK_TARGET,{time:Pt},{streamId:Z.getId()}),Ne.seek(Pt,!1,!0),Z.startScheduleControllers()),Pe=!1,Wt.trigger(T.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:fa()})})}function Nn(Pt){var yn=Lt(Pt.seekTime);yn&&yn!==Z?yn&&yn!==Z&&(Fn(),function(Hn,ur){var Tr=Hn&&!isNaN(Hn.seekTime)?Hn.seekTime:NaN,Ir=Z.getProcessors().map(function(fr){return fr.prepareOuterPeriodPlaybackSeeking(Hn)});Promise.all(Ir).then(function(){un(ur,Z,Tr)}).catch(function(fr){ke.error(fr)})}(Pt,yn)):(Fn(),function(Hn){Z.getProcessors().forEach(function(ur){return ur.prepareInnerPeriodPlaybackSeeking(Hn)}),Po(tt.USER_REQUEST_STOP_REASON)}(Pt)),Eu(at.SEEK_START_REASON)}function Fn(){Gn()}function Gn(){Ut&&Ut.length>0&&(Ut.forEach(function(Pt){Pt.deactivate(!0)}),Ut=[])}function Ct(Pt){if(Pt.newMediaInfo.streamInfo.id===Z.getId()){if(Gn(),it.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Pt.oldMediaInfo&&Pt.oldMediaInfo.codec!==Pt.newMediaInfo.codec){var yn=Ne.getTime();return Z.deactivate(!1),void vn(yn,!1,!1)}Z.prepareTrackChange(Pt)}}function Sn(Pt,yn){try{return it.get().streaming.buffer.reuseExistingSourceBuffers&&(yn.isProtectionCompatible(Pt)||yt)&&(An&&it.get().streaming.buffer.useChangeTypeForTrackSwitch||yn.isMediaCodecCompatible(Pt,yn))}catch(Hn){return!1}}function En(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(xe&&!Pt.getPreloaded()){var Hn=Sn(Pt,yn);Hn&&Pt.startPreloading(xe,Ft).then(function(){Ut.push(Pt)})}}function Lt(Pt){if(isNaN(Pt))return null;for(var yn=Ge.length,Hn=0;Hn<yn;Hn++){var ur=Ge[Hn];if(Pt<parseFloat((ur.getStartTime()+ur.getDuration()).toFixed(5)))return ur}return null}function On(){try{var Pt=ne.getIsDynamic(),yn=ne.getStreamsInfo()[0].manifestInfo,Hn=Ne.getTime(),ur=Ae.calcTimeShiftBufferWindow(Ge,Pt),Tr=Zr();if(ur.start===void 0||ur.end===void 0)return;Tr&&Tr.length!==0?Tr.forEach(function(Ir){ce.addDVRInfo(Ir.getType(),Hn,yn,ur)}):ce.addDVRInfo(y.Z.VIDEO,Hn,yn,ur)}catch(Ir){}}function ct(Pt){if(pt&&Q){var yn=ht.getInitialBufferLevel(),Hn=[y.Z.TEXT];(isNaN(yn)||yn<=Ne.getBufferLevel(Hn)||ne.getIsDynamic()&&yn>Ne.getLiveDelay())&&(pt=!1,Eu(at.INITIAL_PLAYOUT_START_REASON),Ne.play())}Pt&&Pt.mediaType&&ce.addBufferLevel(Pt.mediaType,new Date,1e3*Pt.bufferLevel)}function nt(Pt){Pt.streamInfo.id===Z.getId()&&Pt.reason&&Pt.reason.forceReplace&&Gn(),Uc(Pt.streamInfo.id).prepareQualityChange(Pt)}function Kt(){if(ne.getIsDynamic()&&Ne.getOriginalLiveDelay()!==0&&Z){var Pt=ne.getStreamsInfo();if(Pt.length>0){var yn=Pt[0].manifestInfo,Hn=Qu(Pt,yn);Ne.computeAndSetLiveDelay(Hn,yn)}}}function ze(){if(Xa()){var Pt=he.getPlaybackQuality();Pt&&ce.addDroppedFrames(Pt)}}function Ve(){P.debug("[onPlaybackStarted]"),!pt&&et&&Eu(at.RESUME_FROM_PAUSE_START_REASON),pt&&(pt=!1),jt&&(jt=!1,it.get().streaming.applyContentSteering&&!ie.shouldQueryBeforeStart()&&ie.loadSteeringData()),et=!1}function Dt(Pt){P.debug("[onPlaybackPaused]"),Pt.ended||(et=!0,Po(tt.USER_REQUEST_STOP_REASON))}function fn(Pt){P.debug("Stream with id ".concat(Pt.streamInfo.id," finished buffering"));var yn=Pt.streamInfo.isLast;xe&&yn?(P.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),we.signalEndOfStream(xe)):Tn()}function Tn(){if(Z&&Z.getHasFinishedBuffering())for(var Pt=function(){var Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Ir=Tr||Z||null;if(Ir){var fr=Ir.getStreamInfo();return Ge.filter(function(ri){var Qr=ri.getStreamInfo();return Qr.start>fr.start&&fr.id!==Qr.id})}}catch(ri){return[]}}(Z),yn=0;yn<Pt.length;){var Hn=Pt[yn],ur=yn===0?Z:Pt[yn-1];!Hn.getPreloaded()&&ur.getHasFinishedBuffering()&&xe&&En(Hn,ur),yn+=1}}function sr(){Ht&&(clearInterval(Ht),Ht=null)}function Zr(){return Z?Z.getProcessors():[]}function Ai(Pt){if(Z&&!Z.getIsEndedEventSignaled()){Z.setIsEndedEventSignaled(!0);var yn=function(){var Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,ur=Hn||Z||null;if(!ur)return null;for(var Tr=ur.getStreamInfo(),Ir=Tr.start,fr=0,ri=-1,Qr=NaN;fr<Ge.length;){var Gs=Ge[fr].getStreamInfo(),qs=Gs.start-Ir;qs>0&&(isNaN(Qr)||qs<Qr)&&Tr.id!==Gs.id&&(Qr=qs,ri=fr),fr+=1}return ri>=0?Ge[ri]:null}();yn?(P.debug("StreamController onEnded, found next stream with id ".concat(yn.getStreamInfo().id,". Switching from ").concat(Z.getStreamInfo().id," to ").concat(yn.getStreamInfo().id)),un(yn,Z,NaN)):(P.debug("StreamController no next stream found"),Z.setIsEndedEventSignaled(!1)),Po(yn?tt.END_OF_PERIOD_STOP_REASON:tt.END_OF_CONTENT_STOP_REASON)}Pt&&Pt.isLast&&(sr(),ie.stopSteeringRequestTimer())}function zr(Pt){var yn=Pt||fa().manifestInfo.duration;we.setDuration(yn)}function io(Pt){var yn=He.getURIFragmentData();if(!yn||!yn.t)return NaN;var Hn=Zs()[0].getStreamInfo().start;return yn.t=yn.t.split(",")[0],Bs(Pt,yn.t,Hn)}function Zi(Pt,yn){var Hn=0;return Pt||(Hn=Zs()[0].getStreamInfo().start),Bs(Pt,yn,Hn)}function Bs(Pt,yn,Hn){var ur=ne.getRegularPeriods()[0],Tr=yn.toString(),Ir=Tr.indexOf("posix:")!==-1?Tr.substring(6)==="now"?Date.now()/1e3:parseFloat(Tr.substring(6)):NaN;return Pt&&!isNaN(Ir)?Ae.calcPresentationTimeFromWallTime(new Date(1e3*Ir),ur):parseFloat(Tr)+Hn}function Qu(Pt,yn){try{var Hn=NaN;if(yn&&!isNaN(yn.maxFragmentDuration)&&isFinite(yn.maxFragmentDuration))return yn.maxFragmentDuration;if(Pt&&Pt.length===1){var ur=Pt[0],Tr=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT].reduce(function(fr,ri){var Qr=ne.getMediaInfoForType(ur,ri);return Qr&&Qr.isFragmented!==!1&&fr.push(Qr),fr},[]).reduce(function(fr,ri){var Qr=ne.getVoRepresentations(ri);return Qr&&Qr.length>0&&Qr.forEach(function(Gs){Gs&&fr.push(Gs)}),fr},[]).reduce(function(fr,ri){var Qr=ne.convertRepresentationToRepresentationInfo(ri);return Qr&&Qr.fragmentDuration&&!isNaN(Qr.fragmentDuration)&&fr.push(Qr.fragmentDuration),fr},[]);Hn=Math.max.apply(Math,function(fr){if(Array.isArray(fr))return Nf(fr)}(Ir=Tr)||function(fr){if(typeof Symbol<"u"&&Symbol.iterator in Object(fr))return Array.from(fr)}(Ir)||function(fr,ri){if(fr){if(typeof fr=="string")return Nf(fr,ri);var Qr=Object.prototype.toString.call(fr).slice(8,-1);return Qr==="Object"&&fr.constructor&&(Qr=fr.constructor.name),Qr==="Map"||Qr==="Set"?Array.from(fr):Qr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qr)?Nf(fr,ri):void 0}}(Ir)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(Hn)?Hn:NaN}catch(fr){return NaN}var Ir}function Ju(Pt){if(Pt.error)Fe=!0,Qa();else{P.info("Manifest updated... updating data system wide.");var yn=Pt.manifest;ne.updatePeriods(yn);var Hn=ne.getUTCTimingSources();!ne.getIsDynamic()||Hn&&Hn.length!==0||Wt.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.WARNING,event:Pi.EVENTS.NO_UTC_TIMING_ELEMENT});var ur=ne.getIsDynamic()?Hn.concat(lt.getUTCTimingSources()):Hn;V.filterUnsupportedFeatures(yn).then(function(){me.initialize(yn),ye.attemptSync(ur,ne.getIsDynamic())})}}function Xa(){return!!Z&&Z.getHasVideoTrack()}function js(){return!!Z&&Z.getHasAudioTrack()}function Po(Pt,yn){yn=yn||new Date,Zr().forEach(function(Hn){Hn.finalisePlayList(yn,Pt)}),ce.addPlayList()}function Eu(Pt){ce.createPlaylistMetrics(1e3*Ne.getTime(),Pt)}function _u(Pt){if(Pt.error){var yn="";switch(Pt.error.code){case 1:yn="MEDIA_ERR_ABORTED";break;case 2:yn="MEDIA_ERR_NETWORK";break;case 3:yn="MEDIA_ERR_DECODE",en.counts.mediaErrorDecode+=1;break;case 4:yn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:yn="MEDIA_ERR_ENCRYPTED";break;default:yn="UNKNOWN"}yn==="MEDIA_ERR_DECODE"&&it.get().errors.recoverAttempts.mediaErrorDecode>=en.counts.mediaErrorDecode?function(){P.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Hn=Ne.getTime();Z.deactivate(!1),P.warn("MediaSource has been resetted. Resuming playback from time ".concat(Hn)),vn(Hn,!1,!1)}():(be=!0,Pt.error.message&&(yn+=" ("+Pt.error.message+")"),Pt.error.msExtendedCode&&(yn+=" (0x"+(Pt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),P.fatal("Video Element Error: "+yn),Pt.error&&P.fatal(Pt.error),ke.error(new fe.Z(Pt.error.code,yn)),Qa())}}function fa(){return Z?Z.getStreamInfo():null}function Uc(Pt){for(var yn=0,Hn=Ge.length;yn<Hn;yn++)if(Ge[yn].getId()===Pt)return Ge[yn];return null}function Xf(Pt){isNaN(Pt.newDuration)||zr(Pt.newDuration)}function el(){Ge=[],Nt=NaN,le=null,Pe=!1,Z=null,be=!1,Fe=!1,pt=!0,jt=!0,et=!1,Q=!0,Ht=null,yt=!1,An=!1,Ut=[],$t=null,en={counts:{mediaErrorDecode:0}}}function Qa(){Dn(),ye.reset(),Po(be||Fe?tt.FAILURE_STOP_REASON:tt.USER_REQUEST_STOP_REASON);for(var Pt=0,yn=Ge?Ge.length:0;Pt<yn;Pt++)Ge[Pt].reset(be);Wt.off(_.Z.PLAYBACK_TIME_UPDATED,ze,L),Wt.off(_.Z.PLAYBACK_SEEKING,Nn,L),Wt.off(_.Z.PLAYBACK_ERROR,_u,L),Wt.off(_.Z.PLAYBACK_STARTED,Ve,L),Wt.off(_.Z.PLAYBACK_PAUSED,Dt,L),Wt.off(_.Z.PLAYBACK_ENDED,Ai,L),Wt.off(_.Z.METRIC_ADDED,Bc,L),Wt.off(_.Z.MANIFEST_VALIDITY_CHANGED,Xf,L),Wt.off(_.Z.BUFFER_LEVEL_UPDATED,ct,L),Wt.off(_.Z.QUALITY_CHANGE_REQUESTED,nt,L),T.Z.KEY_SESSION_UPDATED&&Wt.off(T.Z.KEY_SESSION_UPDATED,ir,L),Wt.off(T.Z.MANIFEST_UPDATED,Ju,L),Wt.off(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Wt.off(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Wt.off(T.Z.CURRENT_TRACK_CHANGED,Ct,L),Wt.off(T.Z.SETTING_UPDATED_LIVE_DELAY,Kt,L),Wt.off(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Kt,L),me.reset(),ee.reset(),$e.reset(),ce.clearAllCurrentMetrics(),H.setValue(null),J.reset(),Ae.reset(),Ee.reset(),xe&&(we.detachMediaSource(he),xe=null),he=null,le&&(le=null,se=null,H.getValue()&&Wt.trigger(T.Z.PROTECTION_DESTROYED,{data:H.getValue().url})),sr(),Wt.trigger(T.Z.STREAM_TEARDOWN_COMPLETE),el()}function Bc(Pt){if(Pt.metric===D.Z.DVR_INFO){var yn=js()?y.Z.AUDIO:y.Z.VIDEO;Pt.mediaType===yn&&we.setSeekable(Pt.value.range.start,Pt.value.range.end)}}function Zs(){return Ge}return L={initialize:function(Pt,yn){Dn(),Q=Pt,se=yn,Ae.initialize(),(ee=Vr(Jt).create()).setConfig({manifestModel:H,adapter:ne,manifestLoader:J,errHandler:ke,settings:it,contentSteeringController:ie}),ee.initialize(),($e=om(Jt).getInstance()).setConfig({manifestUpdater:ee,playbackController:Ne,settings:it}),$e.start(),ye.setConfig({dashMetrics:ce,baseURLController:me,errHandler:ke,settings:it}),ye.initialize(),we.setConfig({settings:it}),le&&(Wt.trigger(T.Z.PROTECTION_CREATED,{controller:le}),le.setMediaElement(he.getElement()),se&&le.setProtectionData(se)),Wt.on(_.Z.PLAYBACK_TIME_UPDATED,ze,L),Wt.on(_.Z.PLAYBACK_SEEKING,Nn,L),Wt.on(_.Z.PLAYBACK_ERROR,_u,L),Wt.on(_.Z.PLAYBACK_STARTED,Ve,L),Wt.on(_.Z.PLAYBACK_PAUSED,Dt,L),Wt.on(_.Z.PLAYBACK_ENDED,Ai,L),Wt.on(_.Z.METRIC_ADDED,Bc,L),Wt.on(_.Z.MANIFEST_VALIDITY_CHANGED,Xf,L),Wt.on(_.Z.BUFFER_LEVEL_UPDATED,ct,L),Wt.on(_.Z.QUALITY_CHANGE_REQUESTED,nt,L),T.Z.KEY_SESSION_UPDATED&&Wt.on(T.Z.KEY_SESSION_UPDATED,ir,L),Wt.on(T.Z.MANIFEST_UPDATED,Ju,L),Wt.on(T.Z.STREAM_BUFFERING_COMPLETED,fn,L),Wt.on(T.Z.TIME_SYNCHRONIZATION_COMPLETED,rr,L),Wt.on(T.Z.CURRENT_TRACK_CHANGED,Ct,L),Wt.on(T.Z.SETTING_UPDATED_LIVE_DELAY,Kt,L),Wt.on(T.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Kt,L)},getActiveStreamInfo:fa,addDVRMetric:On,hasVideoTrack:Xa,hasAudioTrack:js,getStreamById:Uc,getStreamForTime:Lt,getTimeRelativeToStreamId:function(Pt,yn){for(var Hn=null,ur=0,Tr=0,Ir=null,fr=0;fr<Ge.length;fr++){if(Tr=(Hn=Ge[fr]).getStartTime(),Ir=Hn.getDuration(),Number.isFinite(Tr)&&(ur=Tr),Hn.getId()===yn)return Pt-ur;Number.isFinite(Ir)&&(ur+=Ir)}return null},load:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Dn(),Nt=yn,J.load(Pt)},loadWithManifest:function(Pt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;xn(),Nt=yn,ee.setManifest(Pt)},getActiveStreamProcessors:Zr,setConfig:function(Pt){Pt&&(Pt.capabilities&&(B=Pt.capabilities),Pt.capabilitiesFilter&&(V=Pt.capabilitiesFilter),Pt.manifestLoader&&(J=Pt.manifestLoader),Pt.manifestModel&&(H=Pt.manifestModel),Pt.mediaPlayerModel&&(ht=Pt.mediaPlayerModel),Pt.customParametersModel&&(lt=Pt.customParametersModel),Pt.protectionController&&(le=Pt.protectionController),Pt.adapter&&(ne=Pt.adapter),Pt.dashMetrics&&(ce=Pt.dashMetrics),Pt.errHandler&&(ke=Pt.errHandler),Pt.timelineConverter&&(Ae=Pt.timelineConverter),Pt.videoModel&&(he=Pt.videoModel),Pt.playbackController&&(Ne=Pt.playbackController),Pt.serviceDescriptionController&&(Xe=Pt.serviceDescriptionController),Pt.contentSteeringController&&(ie=Pt.contentSteeringController),Pt.textController&&(ae=Pt.textController),Pt.abrController&&(Oe=Pt.abrController),Pt.mediaController&&(Ze=Pt.mediaController),Pt.settings&&(it=Pt.settings),Pt.baseURLController&&(me=Pt.baseURLController),Pt.uriFragmentModel&&(He=Pt.uriFragmentModel),Pt.segmentBaseController&&(pe=Pt.segmentBaseController),Pt.manifestUpdater&&(ee=Pt.manifestUpdater))},setProtectionData:function(Pt){se=Pt,le&&le.setProtectionData(se)},getIsStreamSwitchInProgress:function(){return Pe},switchToVideoElement:function(Pt){Z&&(Ne.initialize(fa()),vn(Pt,!1,!0))},getHasMediaOrInitialisationError:function(){return be||Fe},getStreams:Zs,getActiveStream:function(){return Z},getInitialPlayback:function(){return pt},getAutoPlay:function(){return Q},refreshManifest:function(){ee.getIsUpdating()||ee.refreshManifest()},reset:Qa},P=(0,N.Z)(Jt).getInstance().getLogger(L),ye=Va(Jt).getInstance(),we=Ah(Jt).getInstance(),Ee=We(Jt).getInstance(),el(),L}fu.__dashjs_factory_name="StreamController";var Ho=F.Z.getSingletonFactory(fu);function du(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me=this.context,pe=(0,m.Z)(me).getInstance();function He(){ie.debug("Stopping the gap controller"),ee&&(clearInterval(ee),ee=null),function(){pe.off(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),pe.off(T.Z.INITIAL_STREAM_SWITCH,Ee,this),pe.off(T.Z.PLAYBACK_SEEKING,Oe,this),pe.off(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,L),pe.off(T.Z.TRACK_CHANGE_RENDERED,$e,L)}(),ee=null,J=NaN,V=0,we=null,ye={}}function Oe(){we&&(clearTimeout(we),we=null)}function Ze(se){try{if(se.streamId!==ne.getActiveStreamInfo().id||se.mediaType!==y.Z.VIDEO&&se.mediaType!==y.Z.AUDIO)return;se.streamId===ne.getActiveStreamInfo().id&&(ye[se.mediaType]=!0)}catch(Q){ie.error(Q)}}function $e(se){se&&se.mediaType&&(ye[se.mediaType]=!1)}function Ee(){ee||function(){try{ee||(ie.debug("Starting the gap controller"),ee=setInterval(function(){Ae()&&ae(H.getTime())},100))}catch(se){}}()}function ke(){if(Ae(B.get().streaming.gaps.enableSeekFix)&&++V>=10){var se=H.getTime();P===se?ae(se,!0):(P=se,J=NaN),V=0}}function Ae(){var se=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!ne.getActiveStream())return!1;var Q=Object.keys(ye).some(function(be){return ye[be]}),Pe=!!se&&Ge();return!Q&&B.get().streaming.gaps.jumpGaps&&ne.getActiveStreamProcessors().length>0&&(!H.isSeeking()||Pe)&&!H.isPaused()&&!ne.getIsStreamSwitchInProgress()&&!ne.getHasMediaOrInitialisationError()}function Ge(){var se=ne.getActiveStream(),Q=parseFloat((se.getStartTime()+se.getDuration()).toFixed(5));return H.getTime()+B.get().streaming.gaps.threshold>=Q}function Z(se,Q){try{if(!se||se.length<=1&&Q>0)return NaN;for(var Pe=NaN,be=0;isNaN(Pe)&&be<se.length;){var Fe=be>0?se.end(be-1):0;Q<se.start(be)&&Fe-Q<B.get().streaming.gaps.threshold&&(Pe=be),be+=1}return Pe}catch(xe){return null}}function le(se,Q){for(var Pe=0,be=se.length;Pe<be;Pe++)if(Q>=se.start(Pe)&&Q<=se.end(Pe))return!0;return!1}function ae(se){var Q,Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],be=B.get().streaming.gaps.enableStallFix,Fe=B.get().streaming.gaps.stallSeek,xe=B.get().streaming.gaps.smallGapLimit,he=B.get().streaming.gaps.jumpLargeGaps,Ne=ce.getBufferRange(),Xe=NaN,ht=!1;if(Q=Z(Ne,se),!isNaN(Q)){var lt=Ne.start(Q),et=lt-se;et>0&&(et<=xe||he)&&(Xe=lt)}var pt=H.getTimeToStreamEnd();if(isNaN(Xe)&&Pe&&isFinite(pt)&&!isNaN(pt)&&pt<xe&&(Xe=parseFloat(H.getStreamEndTime().toFixed(5)),ht=!0),be&&isNaN(Xe)&&Pe&&isNaN(Q)&&le(Ne,se)&&(Fe===0?(ie.warn("Toggle play pause to break stall"),ce.pause(),ce.play()):(ie.warn("Jumping ".concat(Fe,"s to break stall")),Xe=se+Fe)),Xe>0&&J!==Xe&&Xe>se&&!we){var jt=Xe-se;if(ht){var Ht=ne.getStreamForTime(Xe),Ft=Ht&&!!Ht.getPreloaded();ie.warn("Jumping to end of stream because of gap from ".concat(se," to ").concat(Xe,". Gap duration: ").concat(jt)),H.seek(Xe,!0,Ft)}else{var Ut=H.getIsDynamic(),An=Q>0?Ne.end(Q-1):se,it=Ut?1e3*Math.max(0,jt-.1):0;we=window.setTimeout(function(){H.seek(Xe,!0,!0),ie.warn("Jumping gap occuring in period ".concat(ne.getActiveStream().getStreamId()," starting at ").concat(An," and ending at ").concat(Xe,". Jumping by: ").concat(Xe-An)),we=null},it)}J=Xe}}return L={reset:He,setConfig:function(se){se&&(se.settings&&(B=se.settings),se.playbackController&&(H=se.playbackController),se.streamController&&(ne=se.streamController),se.videoModel&&(ce=se.videoModel))},initialize:function(){(function(){pe.on(T.Z.WALLCLOCK_TIME_UPDATED,ke,this),pe.on(T.Z.INITIAL_STREAM_SWITCH,Ee,this),pe.on(T.Z.PLAYBACK_SEEKING,Oe,this),pe.on(T.Z.BUFFER_REPLACEMENT_STARTED,Ze,L),pe.on(T.Z.TRACK_CHANGE_RENDERED,$e,L)})()}},ie=(0,N.Z)(me).getInstance().getLogger(L),He(),L}du.__dashjs_factory_name="GapController";var Ps=F.Z.getSingletonFactory(du);function li(){var L,P,B,V,ee,J,H,ne,ce,we,ye=this.context,ie=(0,m.Z)(ye).getInstance();function me(){P=!1;var Ge=rn.Z.parseUserAgent();B=Ge&&Ge.browser&&Ge.browser.name&&Ge.browser.name.toLowerCase()==="safari"}function pe(){P=!1}function He(Ge){if(Ge.streamId===J.getActiveStreamInfo().id&&ce){var Z=H.getLiveDelay();H.getBufferLevel()>Z/2&&(ce=!1)}}function Oe(Ge){Ge.streamId===J.getActiveStreamInfo().id&&(ce=Ge.state===D.Z.BUFFER_EMPTY)}function Ze(){ne.getCatchupModeEnabled()||V.setPlaybackRate(1)}function $e(){H.getIsDynamic()&&ne.getCatchupModeEnabled()&&(ne.getCatchupPlaybackRates().max>0||ne.getCatchupPlaybackRates().min<0)&&!H.isPaused()&&!H.isSeeking()&&function(){try{return!(!H.getTime()>0||P)&&(ke()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(Ge,Z){try{return Math.abs(Ee())>0||Ge<Z}catch(le){return!1}}(H.getBufferLevel(),ee.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(Ee())>0}catch(Ge){return!1}}())}catch(Ge){return!1}}()&&function(){if(!P&&V){var Ge,Z=V.getPlaybackRate(),le=ne.getCatchupPlaybackRates(),ae=H.getBufferLevel(),se=Ee(),Q=ne.getCatchupMaxDrift();if(!isNaN(Q)&&Q>0&&se>Q)we.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,H.seekToCurrentLive(!0,!1);else{var Pe=H.getCurrentLiveLatency(),be=H.getLiveDelay();Ge=ke()===y.Z.LIVE_CATCHUP_MODE_LOLP?function(xe,he,Ne,Xe,ht){var lt;if(ht<Xe){var et=Math.abs(xe.min),pt=5*(ht-Xe);lt=1-et+2*et/(1+Math.pow(Math.E,-pt)),we.debug("[LoL+ playback control_buffer-based] bufferLevel: "+ht+", newRate: "+lt)}else{if(Math.abs(he-Ne)<=.02*Ne)lt=1;else{var jt=he-Ne,Ht=jt<0?Math.abs(xe.min):xe.max,Ft=5*jt;lt=1-Ht+2*Ht/(1+Math.pow(Math.E,-Ft))}we.debug("[LoL+ playback control_latency-based] latency: "+he+", newRate: "+lt)}return lt}(le,Pe,be,ee.get().streaming.liveCatchup.playbackBufferMin,ae):function(xe,he,Ne,Xe){if(ce)return 1;var ht=he-Ne,lt=ht<0?Math.abs(xe.min):xe.max,et=5*ht,pt=1-lt+2*lt/(1+Math.pow(Math.E,-et));return H.getPlaybackStalled()&&Xe<=Ne/2&&ht>0&&(pt=1),pt}(le,Pe,be,ae);var Fe=B?.25:.02/(.5/le.max);Ge&&Math.abs(Z-Ge)>=Fe&&(we.debug("[CatchupController]: Setting playback rate to ".concat(Ge)),V.setPlaybackRate(Ge))}}}()}function Ee(){return H.getCurrentLiveLatency()-H.getLiveDelay()}function ke(){var Ge=ee.get().streaming.liveCatchup.playbackBufferMin;return ee.get().streaming.liveCatchup.mode!==y.Z.LIVE_CATCHUP_MODE_LOLP||Ge===null||isNaN(Ge)?y.Z.LIVE_CATCHUP_MODE_DEFAULT:y.Z.LIVE_CATCHUP_MODE_LOLP}function Ae(){ne.getCatchupPlaybackRates(!0)}return L={reset:function(){ie.off(_.Z.BUFFER_LEVEL_UPDATED,He,L),ie.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,L),ie.off(_.Z.PLAYBACK_PROGRESS,$e,L),ie.off(_.Z.PLAYBACK_TIME_UPDATED,$e,L),ie.off(_.Z.PLAYBACK_SEEKED,pe,L),ie.off(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,L),ie.off(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,L),ie.off(_.Z.STREAM_INITIALIZED,Ae,L),me(),V.setPlaybackRate(1,!0)},setConfig:function(Ge){Ge&&(Ge.settings&&(ee=Ge.settings),Ge.videoModel&&(V=Ge.videoModel),Ge.streamController&&(J=Ge.streamController),Ge.playbackController&&(H=Ge.playbackController),Ge.mediaPlayerModel&&(ne=Ge.mediaPlayerModel))},initialize:function(){ie.on(_.Z.BUFFER_LEVEL_UPDATED,He,L),ie.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,L),ie.on(_.Z.PLAYBACK_PROGRESS,$e,L),ie.on(_.Z.PLAYBACK_TIME_UPDATED,$e,L),ie.on(_.Z.PLAYBACK_SEEKED,pe,L),ie.on(T.Z.SETTING_UPDATED_CATCHUP_ENABLED,Ze,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ae,L),ie.on(T.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ae,L),ie.on(_.Z.STREAM_INITIALIZED,Ae,L),Ae()}},we=(0,N.Z)(ye).getInstance().getLogger(L),me(),L}li.__dashjs_factory_name="CatchupController";var co=F.Z.getSingletonFactory(li),ku=[y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Ih="video",Fu="audio";function Co(){var L,P,B,V,ee,J=this.context;function H(){P={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},B=[]}function ne(ce,we,ye){try{P[ce][we]=ye/1e3}catch(ie){V.error(ie)}}return L={getServiceDescriptionSettings:function(){return P},getProducerReferenceTimeOffsets:function(){return B},calculateProducerReferenceTimeOffsets:function(ce){try{var we=[];if(ce&&ce.length>0){var ye=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT],ie=ee.getAvailabilityStartTime()/1e3;ce.forEach(function(me){var pe=ye.reduce(function(He,Oe){return He.concat(ee.getAllMediaInfoForType(me,Oe))},[]).reduce(function(He,Oe){return ee.getProducerReferenceTimes(me,Oe).forEach(function(Ze){var $e=ee.getVoRepresentations(Oe);if($e&&$e.length>0&&$e[0].adaptation&&$e[0].segmentInfoType===v.Z.SEGMENT_TEMPLATE){var Ee=$e[0],ke=new Date(Ze[v.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Ze[v.Z.PRESENTATION_TIME]/Ee[v.Z.TIMESCALE]-Ee[v.Z.PRESENTATION_TIME_OFFSET]+me.start),Ae=ie-ke;He.push({id:Ze[v.Z.ID],to:Ae})}}),He},[]);we=we.concat(pe)})}B=we}catch(me){V.error(me),B=[]}},applyServiceDescription:function(ce){if(ce&&ce.serviceDescriptions){var we=ce.serviceDescriptions.filter(function(me){return ku.includes(me.schemeIdUri)}),ye=ce.serviceDescriptions.filter(function(me){return me.schemeIdUri==null}),ie=we.length>0?we[we.length-1]:ye[ye.length-1];ie&&(ie.latency&&ie.latency.target>0&&function(me){var pe;if(me.schemeIdUri,y.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,pe=function($e){return{liveDelay:$e.latency.target/1e3,maxDrift:!isNaN($e.latency.max)&&$e.latency.max>$e.latency.target?($e.latency.max-$e.latency.target+500)/1e3:NaN,referenceId:$e.latency.referenceId||NaN}}(me),B.length>0){var He=function($e){var Ee,ke=0,Ae=B.filter(function(Ge){return Ge.id===$e.referenceId});return Ae.length===0?(ke=B.length>0?B[0].to:0,Ee=B[0].id||NaN):(ke=Ae[0].to||0,Ee=Ae[0].id||NaN),{to:ke,id:Ee}}(pe),Oe=He.to,Ze=He.id;P.liveDelay=pe.liveDelay-Oe,P.liveCatchup.maxDrift=pe.maxDrift,V.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(Oe," from ProducerReferenceTime element with id ").concat(Ze,".\n                Live Delay: ").concat(pe.liveDelay-Oe,", Live catchup max drift: ").concat(pe.maxDrift,"\n            "))}else P.liveDelay=pe.liveDelay,P.liveCatchup.maxDrift=pe.maxDrift,V.debug("Found latency properties coming from service description: Live Delay: ".concat(pe.liveDelay,", Live catchup max drift: ").concat(pe.maxDrift))}(ie),ie.playbackRate&&function(me){var pe=me.playbackRate.min?Math.round(1e3*(me.playbackRate.min-1))/1e3:NaN,He=me.playbackRate.max?Math.round(1e3*(me.playbackRate.max-1))/1e3:NaN;P.liveCatchup.playbackRate.min=pe,P.liveCatchup.playbackRate.max=He,V.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(pe)),V.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(He))}(ie),ie.operatingQuality,ie.operatingBandwidth&&function(me){if(me&&me.operatingBandwidth&&me.operatingBandwidth.mediaType&&me.operatingBandwidth.mediaType!=="all"){var pe={};pe.minBandwidth=me.operatingBandwidth.min,pe.maxBandwidth=me.operatingBandwidth.max,pe.targetBandwidth=me.operatingBandwidth.target;var He=[];me.operatingBandwidth.mediaType===Ih||me.operatingBandwidth.mediaType===Fu?He.push(me.operatingBandwidth.mediaType):me.operatingBandwidth.mediaType==="any"&&(He.push(Fu),He.push(Ih)),He.forEach(function(Oe){isNaN(pe.minBandwidth)||ne("minBitrate",Oe,pe.minBandwidth),isNaN(pe.maxBandwidth)||ne("maxBitrate",Oe,pe.maxBandwidth),isNaN(pe.targetBandwidth)||ne("initialBitrate",Oe,pe.targetBandwidth)})}}(ie),ie.contentSteering&&function(me){P.contentSteering=me.contentSteering}(ie))}},reset:function(){H()},setConfig:function(ce){ce&&ce.adapter&&(ee=ce.adapter)}},V=(0,N.Z)(J).getInstance().getLogger(L),H(),L}Co.__dashjs_factory_name="ServiceDescriptionController";var bh=F.Z.getSingletonFactory(Co),vr=A(3973),yi=A.n(vr),Ch=A(3039);function _c(){var L,P,B,V,ee,J,H,ne,ce=this.context,we=(0,m.Z)(ce).getInstance();function ye(he,Ne){return he&&B[Ne]&&B[Ne][he]?B[Ne][he].list:[]}function ie(he,Ne){return he&&B[Ne]&&B[Ne][he]?B[Ne][he].current:null}function me(he){var Ne=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(he&&he.streamInfo){var Xe=he.type,ht=he.streamInfo,lt=ht.id,et=ie(Xe,lt);if(B[lt]&&B[lt][Xe]&&(B[lt][Xe].current=he,B[lt][Xe].current&&(Xe!==y.Z.TEXT&&!Oe(he,et)||Xe===y.Z.TEXT&&he.isFragmented)&&we.trigger(T.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:et,newMediaInfo:he,switchMode:V.get().streaming.trackSwitchMode[Xe]},{streamId:lt}),!Ne)){var pt=$e(he);if(!pt||!B[lt][Xe].storeLastSettings)return;pt.roles&&(pt.role=pt.roles[0],delete pt.roles),pt.accessibility&&(pt.accessibility=pt.accessibility[0]),pt.audioChannelConfiguration&&(pt.audioChannelConfiguration=pt.audioChannelConfiguration[0]),J[Xe]=pt,ne.setSavedMediaSettings(Xe,pt)}}}function pe(he,Ne){he&&Ne&&(ee[he]=Ne)}function He(he){return he?ee[he]:null}function Oe(he,Ne){if(!he&&!Ne)return!0;if(!he||!Ne)return!1;var Xe=he.id===Ne.id,ht=he.viewpoint===Ne.viewpoint,lt=JSON.stringify(he.viewpointsWithSchemeIdUri)===JSON.stringify(Ne.viewpointsWithSchemeIdUri),et=he.lang===Ne.lang,pt=he.codec===Ne.codec,jt=he.roles.toString()===Ne.roles.toString(),Ht=JSON.stringify(he.rolesWithSchemeIdUri)===JSON.stringify(Ne.rolesWithSchemeIdUri),Ft=he.accessibility.toString()===Ne.accessibility.toString(),Ut=JSON.stringify(he.accessibilitiesWithSchemeIdUri)===JSON.stringify(Ne.accessibilitiesWithSchemeIdUri),An=he.audioChannelConfiguration.toString()===Ne.audioChannelConfiguration.toString(),it=JSON.stringify(he.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Ne.audioChannelConfigurationsWithSchemeIdUri);return Xe&&pt&&ht&&lt&&et&&jt&&Ht&&Ft&&Ut&&An&&it}function Ze(){B={},J={},ee={audio:null,video:null,text:null}}function $e(he){var Ne={lang:he.lang,viewpoint:he.viewpoint,roles:he.roles,accessibility:he.accessibility,audioChannelConfiguration:he.audioChannelConfiguration,codec:he.codec};return Ne.lang||Ne.viewpoint||Ne.role&&Ne.role.length>0||Ne.accessibility&&Ne.accessibility.length>0||Ne.audioChannelConfiguration&&Ne.audioChannelConfiguration.length>0?Ne:null}function Ee(he,Ne,Xe){var ht=[];return he.forEach(function(lt){Ne(Xe,lt)&&ht.push(lt)}),ht.length!==0?ht:he}function ke(he,Ne){try{return!he.lang||he.lang instanceof RegExp?Ne.lang.match(he.lang):Ne.lang!==""&&(0,Ch.extendedFilter)(Ne.lang,yi()(he.lang)).length>0}catch(Xe){return!1}}function Ae(he,Ne){return he.index===void 0||he.index===null||Ne.index===he.index}function Ge(he,Ne){return!he.viewpoint||he.viewpoint===Ne.viewpoint}function Z(he,Ne){var Xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ht=!he.role||!!Ne.roles.filter(function(lt){return lt===he.role})[0];return ht||Ne.type===y.Z.AUDIO&&Xe}function le(he,Ne){return he.accessibility?!!Ne.accessibility.filter(function(Xe){return Xe===he.accessibility})[0]:!Ne.accessibility.length}function ae(he,Ne){return!he.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Xe){return Xe===he.audioChannelConfiguration})[0]}function se(he,Ne){return!he.codec||he.codec===Ne.codec}function Q(he){var Ne,Xe=0,ht=[];return he.forEach(function(lt){(Ne=Math.max.apply(Math,lt.bitrateList.map(function(et){return et.bandwidth})))>Xe?(Xe=Ne,ht=[lt]):Ne===Xe&&ht.push(lt)}),ht}function Pe(he){var Ne,Xe=1/0,ht=[];return he.forEach(function(lt){var et=lt.bitrateList.reduce(function(pt,jt){var Ht=Math.max(1,jt.width*jt.height);return pt+jt.bandwidth/Ht},0);(Ne=et/lt.bitrateList.length)<Xe?(Xe=Ne,ht=[lt]):Ne===Xe&&ht.push(lt)}),ht}function be(he){var Ne,Xe=0,ht=[];return he.forEach(function(lt){(Ne=lt.representationCount)>Xe?(Xe=Ne,ht=[lt]):Ne===Xe&&ht.push(lt)}),ht}function Fe(he,Ne){if(he===y.Z.TEXT)return Ne[0];var Xe,ht=V.get().streaming.selectionModeForInitialTrack,lt=H.getCustomInitialTrackSelectionFunction();if(lt&&typeof lt=="function")Xe=lt(Ne);else switch(ht){case y.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Xe=function(et){var pt,jt,Ht=(pt=0,jt=[],et.forEach(function(Ft){isNaN(Ft.selectionPriority)||(Ft.selectionPriority>pt?(pt=Ft.selectionPriority,jt=[Ft]):Ft.selectionPriority===pt&&jt.push(Ft))}),jt);return Ht.length>1&&(Ht=Q(Ht)),Ht.length>1&&(Ht=be(Ht)),Ht}(Ne);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Xe=function(et){var pt=Q(et);return pt.length>1&&(pt=be(pt)),pt}(Ne);break;case y.Z.TRACK_SELECTION_MODE_FIRST_TRACK:Xe=xe(Ne);break;case y.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Xe=function(et){var pt=Pe(et);return pt.length>1&&(pt=Q(pt)),pt}(Ne);break;case y.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:Xe=function(et){var pt=be(et);return pt.length>1&&(pt=Q(et)),pt}(Ne);break;default:P.warn("Track selection mode ".concat(ht," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Xe=xe(Ne)}return Xe.length>0?Xe[0]:Ne[0]}function xe(he){return he[0]}return L={setInitialMediaSettingsForType:function(he,Ne){var Xe=J[he]||He(he),ht=ye(he,Ne.id),lt=[];Xe||((Xe=ne.getSavedMediaSettings(he))&&delete Xe.codec,pe(he,Xe)),ht&&ht.length!==0&&(Xe&&(lt=Ee(lt=Array.from(ht),ke,Xe),lt=Ee(lt,Ae,Xe),lt=Ee(lt,Ge,Xe),he===y.Z.AUDIO&&J[he]||(lt=Ee(lt,Z,Xe)),lt=Ee(lt,le,Xe),lt=Ee(lt,ae,Xe),lt=Ee(lt,se,Xe)),lt.length===0?me(Fe(he,ht),!0):lt.length>1?me(Fe(he,lt)):me(lt[0]))},addTrack:function(he){if(he){var Ne=he.type;if((Xe=Ne)===y.Z.AUDIO||Xe===y.Z.VIDEO||Xe===y.Z.TEXT||Xe===y.Z.IMAGE){var Xe,ht,lt=he.streamInfo.id;B[lt]||(B[lt]={audio:{list:[],storeLastSettings:ht=V.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:ht,current:null},text:{list:[],storeLastSettings:ht,current:null},image:{list:[],storeLastSettings:ht,current:null}});for(var et=B[lt][Ne].list,pt=0,jt=et.length;pt<jt;++pt)if(Oe(et[pt],he))return;et.push(he)}}},getTracksFor:ye,getCurrentTrackFor:ie,isCurrentTrack:function(he){if(!he)return!1;var Ne=he.type,Xe=he.streamInfo.id;return B[Xe]&&B[Xe][Ne]&&Oe(B[Xe][Ne].current,he)},setTrack:me,selectInitialTrack:Fe,setInitialSettings:pe,getInitialSettings:He,getTracksWithHighestBitrate:Q,getTracksWithHighestEfficiency:Pe,getTracksWithWidestRange:be,isTracksEqual:Oe,matchSettings:function(he,Ne){var Xe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var ht=!1;if(he.lang){if(he.lang instanceof RegExp)ht=Ne.lang.match(he.lang);else if(Ne.lang!==""){var lt=yi()(he.lang);lt&&(ht=(0,Ch.extendedFilter)(Ne.lang,lt).length>0)}}else ht=!0;var et=he.index===void 0||he.index===null||Ne.index===he.index,pt=!he.viewpoint||he.viewpoint===Ne.viewpoint,jt=!he.role||!!Ne.roles.filter(function(Ut){return Ut===he.role})[0],Ht=!he.accessibility||!!Ne.accessibility.filter(function(Ut){return Ut===he.accessibility})[0],Ft=!he.audioChannelConfiguration||!!Ne.audioChannelConfiguration.filter(function(Ut){return Ut===he.audioChannelConfiguration})[0];return ht&&et&&pt&&(jt||Ne.type===y.Z.AUDIO&&Xe)&&Ht&&Ft}catch(Ut){return!1}},matchSettingsLang:ke,matchSettingsIndex:Ae,matchSettingsViewPoint:Ge,matchSettingsRole:Z,matchSettingsAccessibility:le,matchSettingsAudioChannelConfig:ae,saveTextSettingsDisabled:function(){ne.setSavedMediaSettings(y.Z.TEXT,null)},setConfig:function(he){he&&(he.domStorage&&(ne=he.domStorage),he.settings&&(V=he.settings),he.customParametersModel&&(H=he.customParametersModel))},reset:Ze},P=(0,N.Z)(ce).getInstance().getLogger(L),Ze(),L}_c.__dashjs_factory_name="MediaController";var Si=F.Z.getSingletonFactory(_c);F.Z.updateSingletonFactory(_c.__dashjs_factory_name,Si);var Uu=Si,Os=NaN,am=function L(P,B){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:P||null,selectedIdx:B||Os},this.children=[]};function Mf(){var L,P,B,V,ee=this.context,J=mn(ee).getInstance();function H(ye,ie,me){var pe=ne(me);ye[ie]?J.areEqual(pe,ye[ie].data.baseUrls)||(ye[ie].data.baseUrls=pe,ye[ie].data.selectedIdx=Os):ye[ie]=new am(pe)}function ne(ye){var ie=B.getBaseURLsFromElement(ye),me=V.getSynthesizedBaseUrlElements(ie);return me&&me.length>0&&(ie=ie.concat(me)),ie}function ce(ye,ie){var me=ie||P;ye(me.data),me.children&&me.children.forEach(function(pe){return ce(ye,pe)})}function we(){P=new am}return L={reset:we,update:function(ye){(function(ie){(function(){if(!B||!B.hasOwnProperty("getBaseURLsFromElement")||!B.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var me=ne(ie);J.areEqual(me,P.data.baseUrls)||(P.data.baseUrls=me,P.data.selectedIdx=Os),ie&&ie.Period_asArray&&ie.Period_asArray.forEach(function(pe,He){H(P.children,He,pe),pe.AdaptationSet_asArray&&pe.AdaptationSet_asArray.forEach(function(Oe,Ze){H(P.children[He].children,Ze,Oe),Oe.Representation_asArray&&Oe.Representation_asArray.sort(B.getRepresentationSortFunction()).forEach(function($e,Ee){H(P.children[He].children[Ze].children,Ee,$e)})})})})(ye)},getForPath:function(ye){var ie=P,me=[ie.data];return ye&&ye.forEach(function(pe){(ie=ie.children[pe])&&me.push(ie.data)}),me.filter(function(pe){return pe.baseUrls.length})},invalidateSelectedIndexes:function(ye){ce(function(ie){isNaN(ie.selectedIdx)||ye===ie.baseUrls[ie.selectedIdx].serviceLocation&&(ie.selectedIdx=Os)})},setConfig:function(ye){ye.adapter&&(B=ye.adapter),ye.contentSteeringController&&(V=ye.contentSteeringController)},getBaseUrls:function(ye){return ne(ye)}},we(),L}Mf.__dashjs_factory_name="BaseURLTreeModel";var Ia=F.Z.getClassFactory(Mf);function za(L){var P=(L=L||{}).blacklistController;return{select:function(B){return B&&function(ee){var J,H,ne=0,ce=[],we=0;if((H=ee.sort(function(ye,ie){var me=ye.dvbPriority-ie.dvbPriority;return isNaN(me)?0:me}).filter(function(ye,ie,me){return!ie||me[0].dvbPriority&&ye.dvbPriority&&me[0].dvbPriority===ye.dvbPriority})).length)return H.length>1&&(H.forEach(function(ye){ne+=ye.dvbWeight,ce.push(ne)}),J=Math.floor(Math.random()*(ne-1)),ce.every(function(ye,ie){return we=ie,!(J<ye)})),H[we]}((V=[],B.filter(function(ee){return!P.contains(ee.serviceLocation)||(ee.dvbPriority&&V.push(ee.dvbPriority),!1)}).filter(function(ee){return!V.length||!ee.dvbPriority||V.indexOf(ee.dvbPriority)===-1})));var V}}}za.__dashjs_factory_name="DVBSelector";var ba=F.Z.getClassFactory(za);function Do(L){var P=(L=L||{}).blacklistController;return{select:function(B){var V,ee=0;return B&&B.some(function(J,H){return ee=H,!P.contains(J.serviceLocation)})&&(V=B[ee]),V}}}Do.__dashjs_factory_name="BasicSelector";var sm=F.Z.getClassFactory(Do);function Rh(){var L,P,B,V=this.context;function ee(){for(var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ne=0,ce=NaN,we=function(){var ie=J[ne],me=H.findIndex(function(pe){return pe.serviceLocation&&pe.serviceLocation===ie});if(me!==-1&&!B.contains(H[me].serviceLocation))return ce=me,"break";ne+=1};ne<J.length;){var ye=we();if(ye==="break")break}return ce}return L={selectBaseUrlIndex:function(J){var H=NaN;if(isNaN(J.selectedIdx)){var ne=P.getSteeringDataFromManifest();ne&&ne.defaultServiceLocationArray.length>0&&(H=ee(ne.defaultServiceLocationArray,J.baseUrls))}var ce=P.getCurrentSteeringResponseData();return J.baseUrls&&J.baseUrls.length&&ce&&ce.pathwayPriority&&ce.pathwayPriority.length&&(H=ee(ce.pathwayPriority,J.baseUrls)),H},setConfig:function(J){J.blacklistController&&(B=J.blacklistController),J.contentSteeringController&&(P=J.contentSteeringController)}},P=Aa(V).getInstance(),L}Rh.__dashjs_factory_name="ContentSteeringSelector";var vE=F.Z.getClassFactory(Rh);function hu(){var L,P,B,V,ee,J,H=this.context,ne=(0,m.Z)(H).getInstance(),ce=(0,Be.Z)(H).getInstance();function we(){P.reset()}return L={chooseSelector:function(ye){(0,_e.PS)(ye,"boolean"),J=ye?V:B},select:function(ye){if(ye){if(ce.get().streaming.applyContentSteering){var ie=ee.selectBaseUrlIndex(ye);isNaN(ie)||ie===-1||(ye.selectedIdx=ie)}if(!isNaN(ye.selectedIdx))return ye.baseUrls[ye.selectedIdx];var me=J.select(ye.baseUrls);return me?(ye.selectedIdx=ye.baseUrls.indexOf(me),me):(ne.trigger(T.Z.URL_RESOLUTION_FAILED,{error:new fe.Z(Se.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Se.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(J===B&&we()))}},reset:we,setConfig:function(ye){ye.selector&&(J=ye.selector),ye.contentSteeringSelector&&(ee=ye.contentSteeringSelector)}},P=ms(H).create({updateEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=sm(H).create({blacklistController:P}),V=ba(H).create({blacklistController:P}),(ee=vE(H).create()).setConfig({blacklistController:P}),J=B,L}hu.__dashjs_factory_name="BaseURLSelector";var Ls=F.Z.getClassFactory(hu);function bl(){var L,P,B,V,ee,J=this.context,H=(0,m.Z)(J).getInstance(),ne=(0,St.Z)(J).getInstance();function ce(ye){B.update(ye),V.chooseSelector(P.getIsDVB(ye)),H.trigger(_.Z.BASE_URLS_UPDATED,{baseUrls:we(ye)})}function we(ye){return B.getBaseUrls(ye)}return L={reset:function(){B.reset(),V.reset()},initialize:function(ye){B.setConfig({adapter:P,contentSteeringController:ee}),ce(ye)},resolve:function(ye){var ie=B.getForPath(ye).reduce(function(me,pe){var He=V.select(pe);return He?(ne.isRelative(He.url)?me.url=ne.resolve(He.url,me.url):(me.url=He.url,me.serviceLocation=He.serviceLocation),me.availabilityTimeOffset=He.availabilityTimeOffset,me.availabilityTimeComplete=He.availabilityTimeComplete,me.queryParams=He.queryParams,me):new Qn},new Qn);if(!ne.isRelative(ie.url))return ie},setConfig:function(ye){ye.baseURLTreeModel&&(B=ye.baseURLTreeModel),ye.baseURLSelector&&(V=ye.baseURLSelector),ye.adapter&&(P=ye.adapter),ye.contentSteeringController&&(ee=ye.contentSteeringController)},getBaseUrls:we,update:ce},B=Ia(J).create(),V=Ls(J).create(),H.on(T.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(ye){B.invalidateSelectedIndexes(ye.entry)},L),L}bl.__dashjs_factory_name="BaseURLController";var yE=F.Z.getClassFactory(bl);function xh(L){return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},xh(L)}function Df(L,P){return Df=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Df(L,P)}function um(L,P){return!P||xh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Pf(L){return Pf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Pf(L)}var ji=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Df(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Pf(P);if(B){var ne=Pf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return um(this,J)});function ee(J,H){var ne;return function(ce,we){if(!(ce instanceof we))throw new TypeError("Cannot call a class as a function")}(this,ee),(ne=V.call(this)).url=J||null,ne.type=H||null,ne.mediaType=y.Z.STREAM,ne.responseType="",ne}return ee}(j.Z);function lm(L){L=L||{};var P=this.context,B=(0,m.Z)(P).getInstance(),V=Ao(P).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:Se});return{load:function(ee,J,H){var ne=function(we,ye){J.resolved=!0,J.resolvedContent=we||null,B.trigger(T.Z.XLINK_ELEMENT_LOADED,{element:J,resolveObject:H,error:we||ye?null:new fe.Z(Se.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Se.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+ee)})};if(ee==="urn:mpeg:dash:resolve-to-zero:2013")ne(null,!0);else{var ce=new ji(ee,ot.w.XLINK_EXPANSION_TYPE);V.load({request:ce,success:function(we){ne(we)},error:function(){ne(null)}})}},reset:function(){V&&(V.abort(),V=null)}}}lm.__dashjs_factory_name="XlinkLoader";var cm=F.Z.getClassFactory(lm),Bu=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function P(Ee){var ke=Ee.localName;return ke==null&&(ke=Ee.baseName),ke!=null&&ke!=""||(ke=Ee.nodeName),ke}function B(Ee){return typeof Ee=="string"?Ee.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):Ee}function V(Ee,ke,Ae,Ge){for(var Z=0;Z<Ee.length;Z++){var le=Ee[Z];if(typeof le=="string"){if(le==Ge)break}else if(le instanceof RegExp){if(le.test(Ge))break}else if(typeof le=="function"&&le(ke,Ae,Ge))break}return Z!=Ee.length}function ee(Ee,ke,Ae){L.arrayAccessForm==="property"&&(Ee[ke]instanceof Array?Ee[ke+"_asArray"]=Ee[ke]:Ee[ke+"_asArray"]=[Ee[ke]]),!(Ee[ke]instanceof Array)&&L.arrayAccessFormPaths.length>0&&V(L.arrayAccessFormPaths,Ee,ke,Ae)&&(Ee[ke]=[Ee[ke]])}function J(Ee){var ke=Ee.split(/[-T:+Z]/g),Ae=new Date(ke[0],ke[1]-1,ke[2]),Ge=ke[5].split(".");if(Ae.setHours(ke[3],ke[4],Ge[0]),Ge.length>1&&Ae.setMilliseconds(Ge[1]),ke[6]&&ke[7]){var Z=60*ke[6]+Number(ke[7]);Z=0+((/\d\d-\d\d:\d\d$/.test(Ee)?"-":"+")=="-"?-1*Z:Z),Ae.setMinutes(Ae.getMinutes()-Z-Ae.getTimezoneOffset())}else Ee.indexOf("Z",Ee.length-1)!==-1&&(Ae=new Date(Date.UTC(Ae.getFullYear(),Ae.getMonth(),Ae.getDate(),Ae.getHours(),Ae.getMinutes(),Ae.getSeconds(),Ae.getMilliseconds())));return Ae}function H(Ee,ke,Ae,Ge){return!(ke==1&&L.xmlElementsFilter.length>0)||V(L.xmlElementsFilter,Ee,Ae,Ge)}function ne(Ee,ke){if(Ee.nodeType==9){for(var Ae=new Object,Ge=Ee.childNodes,Z=0;Z<Ge.length;Z++)(ae=Ge[Z]).nodeType==1&&(L.ignoreRoot?Ae=ne(ae):(Ae={})[se=P(ae)]=ne(ae));return Ae}if(Ee.nodeType==1){(Ae=new Object).__cnt=0;var le=[];for(Ge=Ee.childNodes,Z=0;Z<Ge.length;Z++){var ae,se=P(ae=Ge[Z]);if(ae.nodeType!=8){var Q=ke+"."+se;if(H(Ae,ae.nodeType,se,Q))if(Ae.__cnt++,Ae[se]==null){var Pe=ne(ae,Q);(se!="#text"||/[^\s]/.test(Pe))&&((be={})[se]=Pe,le.push(be)),Ae[se]=Pe,ee(Ae,se,Q)}else{var be;Ae[se]!=null&&(Ae[se]instanceof Array||(Ae[se]=[Ae[se]],ee(Ae,se,Q))),Pe=ne(ae,Q),(se!="#text"||/[^\s]/.test(Pe))&&((be={})[se]=Pe,le.push(be)),Ae[se][Ae[se].length]=Pe}}}Ae.__children=le;for(var Fe=P(Ee),xe=0;xe<Ee.attributes.length;xe++){var he=Ee.attributes[xe];Ae.__cnt++;for(var Ne=he.value,Xe=0,ht=L.matchers.length;Xe<ht;Xe++){var lt=L.matchers[Xe];lt.test(he,Fe)&&(Ne=lt.converter(he.value))}Ae[L.attributePrefix+he.name]=Ne}var et=function(pt){return pt.prefix}(Ee);return et!=null&&et!=""&&(Ae.__cnt++,Ae.__prefix=et),Ae["#text"]!=null&&(Ae.__text=Ae["#text"],Ae.__text instanceof Array&&(Ae.__text=Ae.__text.join("\n")),L.stripWhitespaces&&(Ae.__text=Ae.__text.trim()),delete Ae["#text"],L.arrayAccessForm=="property"&&delete Ae["#text_asArray"],Ae.__text=function(pt,jt,Ht){if(L.datetimeAccessFormPaths.length>0){var Ft=Ht.split(".#")[0];return V(L.datetimeAccessFormPaths,pt,jt,Ft)?J(pt):pt}return pt}(Ae.__text,se,ke+"."+se)),Ae["#cdata-section"]!=null&&(Ae.__cdata=Ae["#cdata-section"],delete Ae["#cdata-section"],L.arrayAccessForm=="property"&&delete Ae["#cdata-section_asArray"]),Ae.__cnt==0&&L.emptyNodeForm=="text"?Ae="":Ae.__cnt==1&&Ae.__text!=null?Ae=Ae.__text:Ae.__cnt!=1||Ae.__cdata==null||L.keepCData?Ae.__cnt>1&&Ae.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&Ae.__text==""||Ae.__text.trim()=="")&&delete Ae.__text:Ae=Ae.__cdata,delete Ae.__cnt,!L.enableToStringFunc||Ae.__text==null&&Ae.__cdata==null||(Ae.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),Ae}if(Ee.nodeType==3||Ee.nodeType==4)return Ee.nodeValue}function ce(Ee,ke,Ae,Ge){var Z="<"+(Ee!=null&&Ee.__prefix!=null?Ee.__prefix+":":"")+ke;if(Ae!=null)for(var le=0;le<Ae.length;le++){var ae=Ae[le],se=Ee[ae];L.escapeMode&&(se=B(se)),Z+=" "+ae.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?Z+='"'+se+'"':Z+="'"+se+"'"}return Z+(Ge?"/>":">")}function we(Ee,ke){return"</"+(Ee.__prefix!=null?Ee.__prefix+":":"")+ke+">"}function ye(Ee,ke){return L.arrayAccessForm=="property"&&(Ge="_asArray",(Ae=ke.toString()).indexOf(Ge,Ae.length-Ge.length)!==-1)||ke.toString().indexOf(L.attributePrefix)==0||ke.toString().indexOf("__")==0||Ee[ke]instanceof Function;var Ae,Ge}function ie(Ee){var ke=0;if(Ee instanceof Object)for(var Ae in Ee)ye(Ee,Ae)||ke++;return ke}function me(Ee,ke,Ae){return L.jsonPropertiesFilter.length==0||Ae==""||V(L.jsonPropertiesFilter,Ee,ke,Ae)}function pe(Ee){var ke=[];if(Ee instanceof Object)for(var Ae in Ee)Ae.toString().indexOf("__")==-1&&Ae.toString().indexOf(L.attributePrefix)==0&&ke.push(Ae);return ke}function He(Ee){var ke="";return Ee instanceof Object?ke+=function(Ae){var Ge="";return Ae.__cdata!=null&&(Ge+="<![CDATA["+Ae.__cdata+"]]>"),Ae.__text!=null&&(L.escapeMode?Ge+=B(Ae.__text):Ge+=Ae.__text),Ge}(Ee):Ee!=null&&(L.escapeMode?ke+=B(Ee):ke+=Ee),ke}function Oe(Ee,ke){return Ee===""?ke:Ee+"."+ke}function Ze(Ee,ke,Ae,Ge){var Z="";if(Ee.length==0)Z+=ce(Ee,ke,Ae,!0);else for(var le=0;le<Ee.length;le++)Z+=ce(Ee[le],ke,pe(Ee[le]),!1),Z+=$e(Ee[le],Oe(Ge,ke)),Z+=we(Ee[le],ke);return Z}function $e(Ee,ke){var Ae="";if(ie(Ee)>0){for(var Ge in Ee)if(!ye(Ee,Ge)&&(ke==""||me(Ee,Ge,Oe(ke,Ge)))){var Z=Ee[Ge],le=pe(Z);Z==null||Z==null?Ae+=ce(Z,Ge,le,!0):Z instanceof Object?Z instanceof Array?Ae+=Ze(Z,Ge,le,ke):Z instanceof Date?(Ae+=ce(Z,Ge,le,!1),Ae+=Z.toISOString(),Ae+=we(Z,Ge)):ie(Z)>0||Z.__text!=null||Z.__cdata!=null?(Ae+=ce(Z,Ge,le,!1),Ae+=$e(Z,Oe(ke,Ge)),Ae+=we(Z,Ge)):Ae+=ce(Z,Ge,le,!0):(Ae+=ce(Z,Ge,le,!1),Ae+=He(Z),Ae+=we(Z,Ge))}}return Ae+He(Ee)}this.parseXmlString=function(Ee){var ke;if(Ee===void 0)return null;if(window.DOMParser){var Ae=new window.DOMParser;try{(ke=Ae.parseFromString(Ee,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(ke=null)}catch(Ge){ke=null}}else Ee.indexOf("<?")==0&&(Ee=Ee.substr(Ee.indexOf("?>")+2)),(ke=new ActiveXObject("Microsoft.XMLDOM")).async="false",ke.loadXML(Ee);return ke},this.asArray=function(Ee){return Ee===void 0||Ee==null?[]:Ee instanceof Array?Ee:[Ee]},this.toXmlDateTime=function(Ee){return Ee instanceof Date?Ee.toISOString():typeof Ee=="number"?new Date(Ee).toISOString():null},this.asDateTime=function(Ee){return typeof Ee=="string"?J(Ee):Ee},this.xml2json=function(Ee){return ne(Ee)},this.xml_str2json=function(Ee){var ke=this.parseXmlString(Ee);return ke!=null?this.xml2json(ke):null},this.json2xml_str=function(Ee){return $e(Ee,"")},this.json2xml=function(Ee){var ke=this.json2xml_str(Ee);return this.parseXmlString(ke)},this.getVersion=function(){return"1.2.0"}},mo="onLoad";function ju(L){L=L||{};var P,B,V,ee,J,H,ne=this.context,ce=(0,m.Z)(ne).getInstance(),we=(0,St.Z)(ne).getInstance();function ye(Oe,Ze,$e){var Ee,ke,Ae={};Ae.elements=Oe,Ae.type=Ze,Ae.resolveType=$e,Ae.elements.length===0&&me(Ae);for(var Ge=0;Ge<Ae.elements.length;Ge++)Ee=Ae.elements[Ge],ke=we.isHTTPURL(Ee.url)?Ee.url:Ee.originalContent.BaseURL+Ee.url,H.load(ke,Ee,Ae)}function ie(Oe){var Ze,$e,Ee="";if(Ze=Oe.element,$e=Oe.resolveObject,Ze.resolvedContent){var ke=0;Ze.resolvedContent.indexOf("<?xml")===0&&(ke=Ze.resolvedContent.indexOf("?>")+2),Ee=Ze.resolvedContent.substr(0,ke)+"<response>"+Ze.resolvedContent.substr(ke)+"</response>",Ze.resolvedContent=J.xml_str2json(Ee)}(function(Ae){var Ge;for(Ge=0;Ge<Ae.elements.length;Ge++)if(Ae.elements[Ge].resolved===!1)return!1;return!0})($e)&&me($e)}function me(Oe){var Ze,$e,Ee=[];if(function(ke){var Ae,Ge,Z,le,ae,se,Q=[];for(le=ke.elements.length-1;le>=0;le--){if(Ge=(Ae=ke.elements[le]).type+"_asArray",Ae.resolvedContent){if(Ae.resolvedContent)for(ae=0;ae<Ae.resolvedContent[Ge].length;ae++)Z=Ae.resolvedContent[Ge][ae],Q.push(Z)}else delete Ae.originalContent["xlink:actuate"],delete Ae.originalContent["xlink:href"],Q.push(Ae.originalContent);for(Ae.parentElement[Ge].splice(Ae.index,1),se=0;se<Q.length;se++)Ae.parentElement[Ge].splice(Ae.index+se,0,Q[se]);Q=[]}ke.elements.length>0&&V.run(ee)}(Oe),Oe.resolveType==="onActuate"&&ce.trigger(T.Z.XLINK_READY,{manifest:ee}),Oe.resolveType===mo)switch(Oe.type){case v.Z.PERIOD:for(Ze=0;Ze<ee[v.Z.PERIOD+"_asArray"].length;Ze++)($e=ee[v.Z.PERIOD+"_asArray"][Ze]).hasOwnProperty(v.Z.ADAPTATION_SET+"_asArray")&&(Ee=Ee.concat(pe($e[v.Z.ADAPTATION_SET+"_asArray"],$e,v.Z.ADAPTATION_SET,mo))),$e.hasOwnProperty(v.Z.EVENT_STREAM+"_asArray")&&(Ee=Ee.concat(pe($e[v.Z.EVENT_STREAM+"_asArray"],$e,v.Z.EVENT_STREAM,mo)));ye(Ee,v.Z.ADAPTATION_SET,mo);break;case v.Z.ADAPTATION_SET:ce.trigger(T.Z.XLINK_READY,{manifest:ee})}}function pe(Oe,Ze,$e,Ee){var ke,Ae,Ge,Z=[];for(Ae=Oe.length-1;Ae>=0;Ae--)(ke=Oe[Ae]).hasOwnProperty("xlink:href")&&ke["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&Oe.splice(Ae,1);for(Ae=0;Ae<Oe.length;Ae++)(ke=Oe[Ae]).hasOwnProperty("xlink:href")&&ke.hasOwnProperty("xlink:actuate")&&ke["xlink:actuate"]===Ee&&(Ge=He(ke["xlink:href"],Ze,$e,Ae,Ee,ke),Z.push(Ge));return Z}function He(Oe,Ze,$e,Ee,ke,Ae){return{url:Oe,parentElement:Ze,type:$e,index:Ee,resolveType:ke,originalContent:Ae,resolvedContent:null,resolved:!1}}return P={resolveManifestOnLoad:function(Oe){J=new Bu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:B}),(ee=Oe).Period_asArray?ye(pe(ee.Period_asArray,ee,v.Z.PERIOD,mo),v.Z.PERIOD,mo):ce.trigger(T.Z.XLINK_READY,{manifest:ee})},setMatchers:function(Oe){Oe&&(B=Oe)},setIron:function(Oe){Oe&&(V=Oe)},reset:function(){ce.off(T.Z.XLINK_ELEMENT_LOADED,ie,P),H&&(H.reset(),H=null)}},ce.on(T.Z.XLINK_ELEMENT_LOADED,ie,P),H=cm(ne).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),P}ju.__dashjs_factory_name="XlinkController";var Tc=F.Z.getClassFactory(ju);function Zu(L){return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Zu(L)}function Cr(L){function P(ee,J){for(var H in ee)J.hasOwnProperty(H)||(J[H]=ee[H])}function B(ee,J,H){for(var ne=0,ce=ee.length;ne<ce;++ne){var we=ee[ne];if(J[we.name])if(H[we.name]){if(we.merge){var ye=J[we.name],ie=H[we.name];Zu(ye)==="object"&&Zu(ie)==="object"?P(ye,ie):H[we.name]=ye+ie}}else H[we.name]=J[we.name]}}function V(ee,J){for(var H=0,ne=ee.children.length;H<ne;++H){var ce=ee.children[H],we=J[ce.name+"_asArray"];if(we)for(var ye=0,ie=we.length;ye<ie;++ye){var me=we[ye];B(ee.properties,J,me),V(ce,me)}}}return{run:function(ee){if(ee===null||Zu(ee)!=="object")return ee;if(ee.Period_asArray&&"period"in L)for(var J=L.period,H=ee.Period_asArray,ne=0,ce=H.length;ne<ce;++ne){var we=H[ne];if(V(J,we),"adaptationset"in L){var ye=we.AdaptationSet_asArray;if(ye)for(var ie=L.adaptationset,me=0,pe=ye.length;me<pe;++me)V(ie,ye[me])}}return ee}}}Cr.__dashjs_factory_name="ObjectIron";var Gu=F.Z.getClassFactory(Cr);function Nh(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var qu=function(){function L(V,ee){(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=V,this._converter=ee}var P,B;return P=L,(B=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&Nh(P.prototype,B),L}();function Cl(L){return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Cl(L)}function ni(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Ya(L,P){return Ya=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Ya(L,P)}function fm(L,P){return!P||Cl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Sc(L){return Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Sc(L)}var dm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Ya(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Sc(P);if(B){var ne=Sc(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return fm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var ne,ce=(ni(ne={},v.Z.MPD,[v.Z.ID,v.Z.PROFILES]),ni(ne,v.Z.PERIOD,[v.Z.ID]),ni(ne,v.Z.BASE_URL,[v.Z.SERVICE_LOCATION,v.Z.BYTE_RANGE]),ni(ne,v.Z.SEGMENT_BASE,[v.Z.INDEX_RANGE]),ni(ne,v.Z.INITIALIZATION,[v.Z.RANGE]),ni(ne,v.Z.REPRESENTATION_INDEX,[v.Z.RANGE]),ni(ne,v.Z.SEGMENT_LIST,[v.Z.INDEX_RANGE]),ni(ne,v.Z.BITSTREAM_SWITCHING,[v.Z.RANGE]),ni(ne,v.Z.SEGMENT_URL,[v.Z.MEDIA_RANGE,v.Z.INDEX_RANGE]),ni(ne,v.Z.SEGMENT_TEMPLATE,[v.Z.INDEX_RANGE,v.Z.MEDIA,v.Z.INDEX,v.Z.INITIALIZATION_MINUS,v.Z.BITSTREAM_SWITCHING_MINUS]),ni(ne,v.Z.ASSET_IDENTIFIER,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.EVENT_STREAM,[v.Z.VALUE]),ni(ne,v.Z.ADAPTATION_SET,[v.Z.PROFILES,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.CONTENT_TYPE]),ni(ne,v.Z.FRAME_PACKING,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.AUDIO_CHANNEL_CONFIGURATION,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.CONTENT_PROTECTION,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ESSENTIAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.SUPPLEMENTAL_PROPERTY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.INBAND_EVENT_STREAM,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ACCESSIBILITY,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.ROLE,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.RATING,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.VIEWPOINT,[v.Z.VALUE,v.Z.ID]),ni(ne,v.Z.CONTENT_COMPONENT,[v.Z.CONTENT_TYPE]),ni(ne,v.Z.REPRESENTATION,[v.Z.ID,v.Z.DEPENDENCY_ID,v.Z.MEDIA_STREAM_STRUCTURE_ID]),ni(ne,v.Z.SUBSET,[v.Z.ID]),ni(ne,v.Z.METRICS,[v.Z.METRICS_MINUS]),ni(ne,v.Z.REPORTING,[v.Z.VALUE,v.Z.ID]),ne);if(ce.hasOwnProperty(H)){var we=ce[H];return we!==void 0&&we.indexOf(J.name)>=0}return!1},function(J){return String(J)})}return ee}(qu);function Mh(L){return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Mh(L)}function Dh(L,P){return Dh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Dh(L,P)}function Of(L,P){return!P||Mh(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function wc(L){return wc=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},wc(L)}var hm=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,pm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Dh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=wc(P);if(B){var ne=wc(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return Of(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){for(var H=[v.Z.MIN_BUFFER_TIME,v.Z.MEDIA_PRESENTATION_DURATION,v.Z.MINIMUM_UPDATE_PERIOD,v.Z.TIMESHIFT_BUFFER_DEPTH,v.Z.MAX_SEGMENT_DURATION,v.Z.MAX_SUBSEGMENT_DURATION,v.Z.SUGGESTED_PRESENTATION_DELAY,v.Z.START,y.Z.START_TIME,v.Z.DURATION],ne=H.length,ce=0;ce<ne;ce++)if(J.nodeName===H[ce])return hm.test(J.value);return!1},function(J){var H=hm.exec(J),ne=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return H[1]!==void 0&&(ne=-ne),ne})}return ee}(qu);function Ph(L){return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Ph(L)}function Lf(L,P){return Lf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Lf(L,P)}function gm(L,P){return!P||Ph(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function kf(L){return kf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},kf(L)}var Oh=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,mm=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Lf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=kf(P);if(B){var ne=kf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return gm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return Oh.test(J.value)},function(J){var H,ne=Oh.exec(J);if(H=Date.UTC(parseInt(ne[1],10),parseInt(ne[2],10)-1,parseInt(ne[3],10),parseInt(ne[4],10),parseInt(ne[5],10),ne[6]&&parseInt(ne[6],10)||0,ne[7]&&1e3*parseFloat(ne[7])||0),ne[9]&&ne[10]){var ce=60*parseInt(ne[9],10)+parseInt(ne[10],10);H+=(ne[8]==="+"?-1:1)*ce*60*1e3}return new Date(H)})}return ee}(qu);function Hu(L){return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hu(L)}function Rl(L,P){return Rl=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Rl(L,P)}function EE(L,P){return!P||Hu(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ff(L){return Ff=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ff(L)}var _E=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,xl=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Rl(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ff(P);if(B){var ne=Ff(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return EE(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J){return _E.test(J.value)},function(J){return parseFloat(J)})}return ee}(qu);function Nl(L){return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Nl(L)}function Ku(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function Ac(L,P){return Ac=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Ac(L,P)}function vm(L,P){return!P||Nl(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Ml(L){return Ml=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Ml(L)}var ym=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Ac(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Ml(P);if(B){var ne=Ml(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return vm(this,J)});function ee(){return function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")}(this,ee),V.call(this,function(J,H){var ne,ce=(Ku(ne={},v.Z.ADAPTATION_SET,[v.Z.LANG]),Ku(ne,v.Z.REPRESENTATION,[v.Z.LANG]),Ku(ne,v.Z.CONTENT_COMPONENT,[v.Z.LANG]),Ku(ne,v.Z.LABEL,[v.Z.LANG]),Ku(ne,v.Z.GROUP_LABEL,[v.Z.LANG]),ne);if(ce.hasOwnProperty(H)){var we=ce[H];return we!==void 0&&we.indexOf(J.name)>=0}return!1},function(J){return yi()(J)||String(J)})}return ee}(qu);function Uf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Bf=function(){function L(V){var ee;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V,this._merge=(ee=V)&&ee.length&&ee.charAt(0)===ee.charAt(0).toUpperCase()}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&Uf(P.prototype,B),L}();function Ic(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Vu=function(){function L(V,ee,J){var H=this;(function(ne,ce){if(!(ne instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=V||"",this._properties=[],this._children=J||[],Array.isArray(ee)&&ee.forEach(function(ne){H._properties.push(new Bf(ne))})}var P,B;return P=L,(B=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&Ic(P.prototype,B),L}();function jf(L){return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},jf(L)}function Lh(L,P){return Lh=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Lh(L,P)}function TE(L,P){return!P||jf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function zu(L){return zu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},zu(L)}var SE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Lh(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=zu(P);if(B){var ne=zu(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return TE(this,J)});function ee(){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.PROFILES,v.Z.WIDTH,v.Z.HEIGHT,v.Z.SAR,v.Z.FRAMERATE,v.Z.AUDIO_SAMPLING_RATE,v.Z.MIME_TYPE,v.Z.SEGMENT_PROFILES,v.Z.CODECS,v.Z.MAXIMUM_SAP_PERIOD,v.Z.START_WITH_SAP,v.Z.MAX_PLAYOUT_RATE,v.Z.CODING_DEPENDENCY,v.Z.SCAN_TYPE,v.Z.FRAME_PACKING,v.Z.AUDIO_CHANNEL_CONFIGURATION,v.Z.CONTENT_PROTECTION,v.Z.ESSENTIAL_PROPERTY,v.Z.ESSENTIAL_PROPERTY+"_asArray",v.Z.SUPPLEMENTAL_PROPERTY,v.Z.INBAND_EVENT_STREAM];return V.call(this,v.Z.ADAPTATION_SET,J,[new Vu(v.Z.REPRESENTATION,J,[new Vu(v.Z.SUB_REPRESENTATION,J)])])}return ee}(Vu);function Hr(L){return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Hr(L)}function Zf(L,P){return Zf=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},Zf(L,P)}function kh(L,P){return!P||Hr(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Gf(L){return Gf=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Gf(L)}var wE=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&Zf(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Gf(P);if(B){var ne=Gf(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return kh(this,J)});function ee(){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,ee);var J=[v.Z.SEGMENT_BASE,v.Z.SEGMENT_TEMPLATE,v.Z.SEGMENT_LIST];return V.call(this,v.Z.PERIOD,J,[new Vu(v.Z.ADAPTATION_SET,J,[new Vu(v.Z.REPRESENTATION,J)])])}return ee}(Vu);function bc(L){L=L||{};var P,B,V,ee,J,H=this.context,ne=L.debug;return P={parse:function(ce){var we,ye=window.performance.now();if(!(we=ee.xml_str2json(ce)))throw new Error("parsing the manifest failed");var ie=window.performance.now();we.Patch?((we=we.Patch).add_asArray&&we.add_asArray.forEach(function(pe){return J.run(pe)}),we.replace_asArray&&we.replace_asArray.forEach(function(pe){return J.run(pe)})):(we=we.MPD,J.run(we));var me=window.performance.now();return B.info("Parsing complete: ( xml2json: "+(ie-ye).toPrecision(3)+"ms, objectiron: "+(me-ie).toPrecision(3)+"ms, total: "+((me-ye)/1e3).toPrecision(3)+"s)"),we.protocol="DASH",we},getMatchers:function(){return V},getIron:function(){return J}},B=ne.getLogger(P),V=[new pm,new mm,new xl,new ym,new dm],ee=new Bu({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:V}),J=Gu(H).create({adaptationset:new SE,period:new wE}),P}bc.__dashjs_factory_name="DashParser";var Em=F.Z.getClassFactory(bc);function Fh(L){L=L||{};var P,B,V,ee,J,H=this.context,ne=L.debug,ce=L.settings,we=(0,m.Z)(H).getInstance(),ye=(0,St.Z)(H).getInstance(),ie=L.mssHandler,me=L.errHandler;function pe(Oe){we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:Oe.manifest})}function He(Oe){var Ze=null;return Oe.indexOf("SmoothStreamingMedia")>-1?(ie&&(Ze=ie.createMssParser(),ie.createMssFragmentProcessor(),ie.registerEvents()),Ze):Oe.indexOf("MPD")>-1||Oe.indexOf("Patch")>-1?Em(H).create({debug:ne}):Ze}return P={load:function(Oe){var Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,$e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Ee=new Date,ke=new ji(Oe,ot.w.MPD_TYPE);Ze&&(ke.serviceLocation=Ze),$e&&(ke.queryParams=$e),ke.requestStartDate||(ke.requestStartDate=Ee),we.trigger(T.Z.MANIFEST_LOADING_STARTED,{request:ke}),V.load({request:ke,success:function(Ae,Ge,Z){var le,ae,se;if(ee)if(Z&&Z!==Oe?(ae=ye.parseBaseUrl(Z),le=Z):(ye.isRelative(Oe)&&(Oe=ye.resolve(Oe,window.location.href)),ae=ye.parseBaseUrl(Oe)),Ge!="No Content")if(J===null&&(J=He(Ae)),J!==null){ee.setMatchers(J.getMatchers()),ee.setIron(J.getIron());try{se=J.parse(Ae)}catch(Pe){return void we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new fe.Z(Se.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Se.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}if(se){if(se.url=le||Oe,se.originalUrl||(se.originalUrl=se.url),ce&&ce.get().streaming.enableManifestDurationMismatchFix&&se.mediaPresentationDuration&&se.Period_asArray.length>1){var Q=se.Period_asArray.reduce(function(Pe,be){return Pe+be.duration},0);!isNaN(Q)&&se.mediaPresentationDuration>Q&&(B.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),se.mediaPresentationDuration=Q)}se.baseUri=ae,se.loadedTime=new Date,ee.resolveManifestOnLoad(se),we.trigger(T.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:Ae})}else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new fe.Z(Se.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Se.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new fe.Z(Se.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Se.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))});else we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Ae,Ge,Z){we.trigger(T.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new fe.Z(Se.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Se.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Oe,", ").concat(Z))})}})},reset:function(){we.off(T.Z.XLINK_READY,pe,P),ie&&ie.reset(),ee&&(ee.reset(),ee=null),V&&(V.abort(),V=null)}},B=ne.getLogger(P),we.on(T.Z.XLINK_READY,pe,P),V=Ao(H).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:ye,constants:y.Z,dashConstants:v.Z,errors:Se,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),ee=Tc(H).create({errHandler:me,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),J=null,P}Fh.__dashjs_factory_name="ManifestLoader";var _m=F.Z.getClassFactory(Fh);function Uh(){var L=this.context,P=(0,m.Z)(L).getInstance();return{error:function(B){P.trigger(T.Z.ERROR,{error:B})}}}Uh.__dashjs_factory_name="ErrorHandler";var Dl=F.Z.getSingletonFactory(Uh),Tm=A(1715);function Sm(){var L,P,B,V,ee,J,H=this.context,ne=(0,m.Z)(H).getInstance();function ce(we,ye){if(!ye||!ye.Period_asArray||ye.Period_asArray.length===0)return Promise.resolve();var ie=[];return ye.Period_asArray.forEach(function(me){ie.push(function(pe,He){return new Promise(function(Oe){if(pe&&pe.AdaptationSet_asArray&&pe.AdaptationSet_asArray.length!==0){var Ze=[];pe.AdaptationSet_asArray.forEach(function($e){P.getIsTypeOf($e,He)&&Ze.push(function(Ee,ke){return new Promise(function(Ae){if(Ee.Representation_asArray&&Ee.Representation_asArray.length!==0){var Ge=[],Z=[];Ee.Representation_asArray.forEach(function(le,ae){var se=P.getCodec(Ee,ae,!1),Q=function(Pe,be,Fe){switch(Pe){case y.Z.VIDEO:return function(xe,he){return{codec:he,width:xe.width||null,height:xe.height||null,framerate:xe.frameRate||null,bitrate:xe.bandwidth||null}}(be,Fe);case y.Z.AUDIO:return function(xe,he){var Ne=xe.audioSamplingRate||null;return{codec:he,bitrate:xe.bandwidth||null,samplerate:Ne}}(be,Fe);default:return null}}(ke,le,se);Z.push(Q),Ge.push(B.supportsCodec(Q,ke))}),Promise.all(Ge).then(function(le){Ee.Representation_asArray=Ee.Representation_asArray.filter(function(ae,se){return le[se]||J.debug("[Stream] Codec ".concat(Z[se].codec," not supported ")),le[se]}),Ae()}).catch(function(){Ae()})}else Ae()})}($e,He))}),Promise.all(Ze).then(function(){pe.AdaptationSet_asArray=pe.AdaptationSet_asArray.filter(function($e){var Ee=$e.Representation_asArray&&$e.Representation_asArray.length>0;return Ee||(ne.trigger(T.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:$e}),J.warn("AdaptationSet has been removed because of no supported Representation")),Ee}),Oe()}).catch(function(){Oe()})}else Oe()})}(me,we))}),Promise.all(ie)}return L={setConfig:function(we){we&&(we.adapter&&(P=we.adapter),we.capabilities&&(B=we.capabilities),we.settings&&(V=we.settings),we.customParametersModel&&(ee=we.customParametersModel))},filterUnsupportedFeatures:function(we){return new Promise(function(ye){var ie=[];ie.push(ce(y.Z.VIDEO,we)),ie.push(ce(y.Z.AUDIO,we)),Promise.all(ie).then(function(){V.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(me){me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(pe){pe.AdaptationSet_asArray=pe.AdaptationSet_asArray.filter(function(He){return!He.Representation_asArray||He.Representation_asArray.length===0||(He.Representation_asArray=He.Representation_asArray.filter(function(Oe){var Ze=P.getEssentialPropertiesForRepresentation(Oe);if(Ze&&Ze.length>0)for(var $e=0;$e<Ze.length;){if(!B.supportsEssentialProperty(Ze[$e]))return J.debug("[Stream] EssentialProperty not supported: "+Ze[$e].schemeIdUri),!1;$e+=1}return!0}),He.Representation_asArray&&He.Representation_asArray.length>0)})})}(we),function(me){var pe=ee.getCustomCapabilitiesFilters();pe&&pe.length!==0&&me&&me.Period_asArray&&me.Period_asArray.length!==0&&me.Period_asArray.forEach(function(He){He.AdaptationSet_asArray=He.AdaptationSet_asArray.filter(function(Oe){return!Oe.Representation_asArray||Oe.Representation_asArray.length===0||(Oe.Representation_asArray=Oe.Representation_asArray.filter(function(Ze){return!pe.some(function($e){return!$e(Ze)})}),Oe.Representation_asArray&&Oe.Representation_asArray.length>0)})})}(we),ye()}).catch(function(){ye()})})}},J=(0,N.Z)(H).getInstance().getLogger(L),L}Sm.__dashjs_factory_name="CapabilitiesFilter";var AE=F.Z.getSingletonFactory(Sm),IE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function wm(){var L;return{initialize:function(P){if(L=new IE,!P)return null;var B=P.indexOf("#");if(B!==-1)for(var V=P.substr(B+1).split("&"),ee=0,J=V.length;ee<J;++ee){var H=V[ee],ne=H.indexOf("=");if(ne!==-1){var ce=H.substring(0,ne);L.hasOwnProperty(ce)&&(L[ce]=H.substr(ne+1))}}},getURIFragmentData:function(){return L}}}wm.__dashjs_factory_name="URIFragmentModel";var bE=F.Z.getSingletonFactory(wm);function Am(){var L,P=this.context,B=(0,m.Z)(P).getInstance();return{getValue:function(){return L},setValue:function(V){L=V,V&&B.trigger(T.Z.MANIFEST_LOADED,{data:V})}}}Am.__dashjs_factory_name="ManifestModel";var CE=F.Z.getSingletonFactory(Am),Bh=-.5;function jh(){var L,P,B,V,ee=this.context,J=(0,Be.Z)(ee).getInstance();function H(we,ye){return isNaN(we)?0:we>0?(ye&&P.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):we<Bh?(ye&&P.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(Bh,": ").concat(-50,"% playback speed.")),Bh):we}function ne(we,ye){return isNaN(we)?0:we<0?(ye&&P.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):we>1?(ye&&P.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):we}function ce(){var we=J.get().streaming.buffer.stableBufferTime>0?J.get().streaming.buffer.stableBufferTime:J.get().streaming.buffer.fastSwitchEnabled?20:12,ye=B.getLiveDelay();return!isNaN(ye)&&ye>0?Math.min(we,ye):we}return L={getCatchupMaxDrift:function(){if(!isNaN(J.get().streaming.liveCatchup.maxDrift)&&J.get().streaming.liveCatchup.maxDrift>0)return J.get().streaming.liveCatchup.maxDrift;var we=V.getServiceDescriptionSettings();return we&&we.liveCatchup&&!isNaN(we.liveCatchup.maxDrift)&&we.liveCatchup.maxDrift>0?we.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return J.get().streaming.liveCatchup.enabled!==null?J.get().streaming.liveCatchup.enabled:B.getInitialCatchupModeActivated()},getStableBufferTime:ce,getInitialBufferLevel:function(){var we=J.get().streaming.buffer.initialBufferLevel;return isNaN(we)||we<0?0:Math.min(ce(),we)},getRetryAttemptsForType:function(we){var ye=isNaN(J.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:J.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryAttempts[we]*ye:J.get().streaming.retryAttempts[we]},getRetryIntervalsForType:function(we){var ye=isNaN(J.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:J.get().streaming.retryIntervals.lowLatencyReductionFactor;return B.getLowLatencyModeEnabled()?J.get().streaming.retryIntervals[we]/ye:J.get().streaming.retryIntervals[we]},getCatchupPlaybackRates:function(we){var ye=J.get().streaming.liveCatchup.playbackRate;if(!isNaN(ye.min)||!isNaN(ye.max))return{min:H(ye.min,we),max:ne(ye.max,we)};var ie=V.getServiceDescriptionSettings();if(ie&&ie.liveCatchup&&(!isNaN(ie.liveCatchup.playbackRate.min)||!isNaN(ie.liveCatchup.playbackRate.max))){var me=ie.liveCatchup.playbackRate;return{min:H(me.min,we),max:ne(me.max,we)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(we,ye){try{var ie=J.get().streaming.abr[we][ye];if(!isNaN(ie)&&ie!==-1)return ie;var me=V.getServiceDescriptionSettings();return me&&me[we]&&!isNaN(me[we][ye])?me[we][ye]:-1}catch(pe){return-1}},setConfig:function(we){we.playbackController&&(B=we.playbackController),we.serviceDescriptionController&&(V=we.serviceDescriptionController)},reset:function(){}},P=(0,N.Z)(ee).getInstance().getLogger(L),L}jh.__dashjs_factory_name="MediaPlayerModel";var Pl=F.Z.getSingletonFactory(jh),Cc=A(1767);function Zh(L){var P=(L=L||{}).abrController,B=L.switchHistory,V=L.droppedFramesHistory,ee=L.currentRequest,J=L.useBufferOccupancyABR,H=L.useL2AABR,ne=L.useLoLPABR,ce=L.streamProcessor?L.streamProcessor.getScheduleController():null,we=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,ye=L.videoModel?L.videoModel:null;function ie(){return we?we.mediaInfo:null}return{getMediaType:function(){var me=ie();return me?me.type:null},getMediaInfo:ie,getDroppedFramesHistory:function(){return V},getCurrentRequest:function(){return ee},getSwitchHistory:function(){return B},getStreamInfo:function(){var me=ie();return me?me.streamInfo:null},getScheduleController:function(){return ce},getAbrController:function(){return P},getRepresentationInfo:function(){return we},useBufferOccupancyABR:function(){return J},useL2AABR:function(){return H},useLoLPABR:function(){return ne},getVideoModel:function(){return ye}}}Zh.__dashjs_factory_name="RulesContext";var Gh=F.Z.getClassFactory(Zh),ua=A(2068);function Rr(){var L=[],P=[];return{push:function(B){B.newValue===ua.Z.NO_CHANGE&&(B.newValue=B.oldValue),L[B.oldValue]||(L[B.oldValue]={noDrops:0,drops:0,dropSize:0});var V=B.newValue-B.oldValue,ee=V<0?1:0,J=ee?-V:0,H=ee?0:1;if(L[B.oldValue].drops+=ee,L[B.oldValue].dropSize+=J,L[B.oldValue].noDrops+=H,P.push({idx:B.oldValue,noDrop:H,drop:ee,dropSize:J}),P.length>8){var ne=P.shift();L[ne.idx].drops-=ne.drop,L[ne.idx].dropSize-=ne.dropSize,L[ne.idx].noDrops-=ne.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],P=[]}}}Rr.__dashjs_factory_name="SwitchRequestHistory";var pi=F.Z.getClassFactory(Rr);function pu(){var L={},P={},B={};return{push:function(V,ee,J){if(ee){L[V]||(L[V]=[],P[V]=0,B[V]=0);var H=J&&J.droppedVideoFrames?J.droppedVideoFrames:0,ne=J&&J.totalVideoFrames?J.totalVideoFrames:0,ce=H-P[V];P[V]=H;var we=ne-B[V];B[V]=ne;var ye=L[V];isNaN(ee)||(ye[ee]?(ye[ee].droppedVideoFrames+=ce,ye[ee].totalVideoFrames+=we):ye[ee]={droppedVideoFrames:ce,totalVideoFrames:we})}},getFrameHistory:function(V){return L[V]},clearForStream:function(V){try{delete L[V],delete P[V],delete B[V]}catch(ee){}},reset:function(){L={},P={},B={}}}}pu.__dashjs_factory_name="DroppedFramesHistory";var qh=F.Z.getClassFactory(pu);function Yu(L){var P,B,V,ee,J,H=this.context,ne=(L=L||{}).settings,ce=(0,m.Z)(H).getInstance();function we(Oe,Ze,$e,Ee){var ke=Math.pow(.5,$e/Ee.fast);Oe.fastEstimate=(1-ke)*Ze+ke*Oe.fastEstimate;var Ae=Math.pow(.5,$e/Ee.slow);Oe.slowEstimate=(1-Ae)*Ze+Ae*Oe.slowEstimate,Oe.totalWeight+=$e}function ye(Oe,Ze,$e){return ne.get().streaming.abr.movingAverageMethod!==y.Z.MOVING_AVERAGE_SLIDING_WINDOW?function(Ee,ke){var Ae=Ee?J.throughputHalfLife:J.latencyHalfLife,Ge=Ee?V[ke]:ee[ke];if(!Ge||Ge.totalWeight<=0)return NaN;var Z=Ge.fastEstimate/(1-Math.pow(.5,Ge.totalWeight/Ae.fast)),le=Ge.slowEstimate/(1-Math.pow(.5,Ge.totalWeight/Ae.slow));return Ee?Math.min(Z,le):Math.max(Z,le)}(Oe,Ze):function(Ee,ke,Ae){var Ge=function(le,ae,se){var Q,Pe;if(le?(Q=P[ae],Pe=se?3:4):(Q=B[ae],Pe=4),Q){if(Pe>=Q.length)Pe=Q.length;else if(le)for(var be=1;be<Pe;++be){var Fe=Q[Q.length-be]/Q[Q.length-be-1];if((Fe>=1.3||Fe<=.7692307692307692)&&(Pe+=1)===Q.length)break}}else Pe=0;return Pe}(Ee,ke,Ae),Z=(Ee?P:B)[ke];return Ge!==0&&Z&&Z.length!==0?(Z=Z.slice(-Ge)).reduce(function(le,ae){return le+ae})/Z.length:NaN}(Oe,Ze,$e)}function ie(Oe,Ze){return ye(!0,Oe,Ze)}function me(Oe){P[Oe]=P[Oe]||[],B[Oe]=B[Oe]||[],V[Oe]=V[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},ee[Oe]=ee[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function pe(){P={},B={},V={},ee={}}var He={push:function(Oe,Ze,$e){if(Ze.trace&&Ze.trace.length){var Ee,ke=Ze.tresponse.getTime()-Ze.trequest.getTime()||1,Ae=Ze._tfinish.getTime()-Ze.tresponse.getTime()||1,Ge=Ze.trace.reduce(function(se,Q){return se+Q.b[0]},0),Z=0;if((Ee=Ze._fileLoaderType&&Ze._fileLoaderType===y.Z.FILE_LOADER_TYPES.FETCH?Ze.trace.reduce(function(se,Q){return se+Q.d},0):$e?Ae:ke+Ae)!==0&&(Z=Math.round(8*Ge/Ee)),Ze.cmsd){var le=Ze.cmsd.dynamic&&Ze.cmsd.dynamic.etp?Ze.cmsd.dynamic.etp:null;if(le){var ae=ne.get().streaming.cmsd.abr.etpWeightRatio;ae>0&&ae<=1&&(Z=Z*(1-ae)+le*ae)}}if(me(Oe),function(se,Q,Pe){return se===y.Z.VIDEO?Pe<ne.get().streaming.cacheLoadThresholds[y.Z.VIDEO]:se===y.Z.AUDIO?Pe<ne.get().streaming.cacheLoadThresholds[y.Z.AUDIO]:void 0}(Oe,0,Ae)){if(P[Oe].length>0&&!P[Oe].hasCachedEntries)return;P[Oe].hasCachedEntries=!0}else P[Oe]&&P[Oe].hasCachedEntries&&function(se){delete P[se],delete B[se],delete V[se],delete ee[se],me(se)}(Oe);P[Oe].push(Z),ce.trigger(_.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:Z,mediaType:Oe,httpRequest:Ze}),P[Oe].length>20&&P[Oe].shift(),B[Oe].push(ke),B[Oe].length>20&&B[Oe].shift(),we(V[Oe],Z,.001*Ae,J.throughputHalfLife),we(ee[Oe],ke,1,J.latencyHalfLife)}},getAverageThroughput:ie,getSafeAverageThroughput:function(Oe,Ze){var $e=ie(Oe,Ze);return isNaN($e)||($e*=ne.get().streaming.abr.bandwidthSafetyFactor),$e},getAverageLatency:function(Oe){return ye(!1,Oe)},reset:pe};return J={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},pe(),He}Yu.__dashjs_factory_name="ThroughputHistory";var Im=F.Z.getClassFactory(Yu);function qf(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze,$e,Ee,ke,Ae,Ge,Z,le,ae,se,Q,Pe=this.context,be=(0,N.Z)(Pe).getInstance(),Fe=(0,m.Z)(Pe).getInstance();function xe(){ee={},J={},ne={},H={},ke={},Z={},le={},ae={},we===void 0&&(we=!1),Ae&&Ae.reset(),Ee=void 0,Ae=void 0,Ge=void 0,clearTimeout(ce),ce=null}function he(it){var yt=it.request.mediaType,$t=it.streamId;if(yt&&$t&&H[$t]&&Q.get().streaming.abr.autoSwitchBitrate[yt]){var Nt=H[$t][yt];if(Nt){var en=Gh(Pe).create({abrController:L,streamProcessor:Nt,currentRequest:it.request,useBufferOccupancyABR:Z[yt],useL2AABR:le[yt],useLoLPABR:ae[yt],videoModel:pe}),Jt=B.shouldAbandonFragment(en,$t);Jt.quality>ua.Z.NO_CHANGE&&Nt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:it.request.index})[0]&&(ne[$t][yt].state=D.Z.ABANDON_LOAD,ke[$t][yt].reset(),ke[$t][yt].push({oldValue:et(yt,$t),newValue:Jt.quality,confidence:1,reason:Jt.reason}),pt(yt,V.getActiveStreamInfo(),Jt.quality,Jt.reason),clearTimeout(ce),ce=setTimeout(function(){ne[$t][yt].state=D.Z.ALLOW_LOAD,ce=null},Q.get().streaming.abandonLoadTimeout))}}}function Ne(it){it.mediaType===y.Z.VIDEO&&(Ee!==void 0&&Ae.push(it.streamId,Ee,pe.getPlaybackQuality()),Ee=it.newQuality)}function Xe(it){var yt,$t;it.metric!==D.Z.HTTP_REQUEST||!it.value||it.value.type!==ot.w.MEDIA_SEGMENT_TYPE||it.mediaType!==y.Z.AUDIO&&it.mediaType!==y.Z.VIDEO||Ge.push(it.mediaType,it.value,Q.get().streaming.abr.useDeadTimeLatency),it.metric!==D.Z.BUFFER_LEVEL||it.mediaType!==y.Z.AUDIO&&it.mediaType!==y.Z.VIDEO||(yt=it.mediaType,$t=.001*it.value.level,Q.get().streaming.abr.ABRStrategy===y.Z.ABR_STRATEGY_DYNAMIC&&function(Nt,en){try{var Jt=He.getStableBufferTime(),Wt=Jt,Dn=.5*Jt,xn=Z[Nt],rr=en>(xn?Dn:Wt);Z[Nt]=rr,rr!==xn&&(rr?P.info("["+Nt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+en.toFixed(3)+")."):P.info("["+Nt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+en.toFixed(3)+")."))}catch(ir){P.error(ir)}}(yt,$t))}function ht(it,yt){try{var $t;return ee[yt]=ee[yt]||{},ee[yt].hasOwnProperty(it)||(ee[yt][it]=0),$t=function(Nt,en){var Jt=ee[en][Nt],Wt=Jt;if(!H[en]||!H[en][Nt])return Wt;var Dn=lt(Nt,en);Dn!==void 0&&(Wt=Math.max(Jt,Dn));var xn=function(rr,ir){try{var bt=He.getAbrBitrateParameter("maxBitrate",rr);return bt>-1?Ft(H[ir][rr].getMediaInfo(),bt,ir):void 0}catch(Xt){return}}(Nt,en);return xn!==void 0&&(Wt=Math.min(Wt,xn)),Wt}(it,yt),$t=function(Nt,en,Jt){var Wt=ee[Jt][en],Dn=Q.get().streaming.abr.maxRepresentationRatio[en];return isNaN(Dn)||Dn>=1||Dn<0?Nt:Math.min(Nt,Math.round(Wt*Dn))}($t,it,yt),$t=function(Nt,en,Jt){if(en!==y.Z.VIDEO||!Q.get().streaming.abr.limitBitrateByPortal||!H[Jt]||!H[Jt][en])return Nt;we||An();var Wt=H[Jt][en].getStreamInfo(),Dn=me.getAdaptationForType(Wt.index,en,Wt).Representation_asArray,xn=Nt;if(ye>0&&ie>0){for(;xn>0&&Dn[xn]&&ye<Dn[xn].width&&ye-Dn[xn-1].width<Dn[xn].width-ye;)xn-=1;for(;xn<Dn.length-1&&Dn[xn].width===Dn[xn+1].width;)xn+=1}return xn}($t,it,yt),Q.get().streaming.cmsd.enabled&&Q.get().streaming.cmsd.abr.applyMb&&($t=function(Nt,en,Jt){if(en!=="video")return Nt;var Wt=Ze.getMaxBitrate(en);if(Wt<0)return Nt;var Dn=Ht(Jt,"audio",et("audio",Jt));Wt-=Dn?Dn.bitrate/1e3:0;var xn=Ft(H[Jt][en].getMediaInfo(),Wt,Jt);return P.debug("Stream ID: "+Jt+" ["+en+"] Apply max bit rate from CMSD: "+Wt),Math.min(Nt,xn)}($t,it,yt)),$t}catch(Nt){return}}function lt(it,yt){try{return function($t,Nt){try{var en=He.getAbrBitrateParameter("minBitrate",$t);if(en>-1){var Jt=H[Nt][$t].getMediaInfo(),Wt=Ut(Jt),Dn=Ft(Jt,en,Nt);return Wt[Dn]&&Dn<Wt.length-1&&Wt[Dn].bitrate<1e3*en&&Dn++,Dn}return}catch(xn){return}}(it,yt)}catch($t){return}}function et(it){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return yt||(yt=V.getActiveStreamInfo().id),it&&H[yt]&&H[yt][it]&&yt?(J[yt]=J[yt]||{},J[yt].hasOwnProperty(it)||(J[yt][it]=0),J[yt][it]):0}catch($t){return 0}}function pt(it,yt,$t){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(yt&&yt.id&&it){var en=yt.id,Jt=et(it,en);(0,_e.SE)($t);var Wt=ht(it,en);$t!==Jt&&$t>=0&&$t<=Wt&&jt(it,Jt,$t,Wt,Nt,en)}}function jt(it,yt,$t,Nt,en,Jt){if(it&&H[Jt]&&H[Jt][it]){var Wt=H[Jt][it].getStreamInfo(),Dn=Wt&&Wt.manifestInfo&&Wt.manifestInfo.isDynamic,xn=se.getCurrentBufferLevel(it);P.info("Stream ID: "+Jt+" ["+it+"] switch from "+yt+" to "+$t+"/"+Nt+" (buffer: "+xn+") "+(en?JSON.stringify(en):".")),J[Jt]=J[Jt]||{},J[Jt][it]=$t;var rr=Ht(Jt,it,$t);Fe.trigger(T.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:yt,newQuality:$t,reason:en,streamInfo:Wt,bitrateInfo:rr,maxIdx:Nt,mediaType:it},{streamId:Wt.id,mediaType:it});var ir=Ge.getAverageThroughput(it,Dn);isNaN(ir)||$e.setSavedBitrateSettings(it,ir)}}function Ht(it,yt,$t){if(yt&&H&&H[it]&&H[it][yt]){var Nt=Ut(H[it][yt].getMediaInfo());return Nt[$t]?Nt[$t]:null}return null}function Ft(it,yt,$t){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,en=it&&it.type?H[$t][it.type].getRepresentationInfo():null;if(Q.get().streaming.abr.useDeadTimeLatency&&Nt&&en&&en.fragmentDuration){Nt/=1e3;var Jt=en.fragmentDuration;if(Nt>Jt)return 0;var Wt=Nt/Jt;yt*=1-Wt}for(var Dn=Ut(it),xn=Dn.length-1;xn>=0;xn--){var rr=Dn[xn];if(1e3*yt>=rr.bitrate)return xn}return 0}function Ut(it){var yt=[];if(!it||!it.bitrateList)return yt;for(var $t,Nt=it.bitrateList,en=it.type,Jt=0,Wt=Nt.length;Jt<Wt;Jt++)($t=new Ou).mediaType=en,$t.qualityIndex=Jt,$t.bitrate=Nt[Jt].bandwidth,$t.width=Nt[Jt].width,$t.height=Nt[Jt].height,$t.scanType=Nt[Jt].scanType,yt.push($t);return yt}function An(){if(pe){var it=Q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;ye=pe.getClientWidth()*it,ie=pe.getClientHeight()*it}}return L={initialize:function(){Ae=qh(Pe).create(),Ge=Im(Pe).create({settings:Q}),(B=(0,Cc.Z)(Pe).create({dashMetrics:se,customParametersModel:Oe,mediaPlayerModel:He,settings:Q})).initialize(),Fe.on(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),Fe.on(_.Z.METRIC_ADDED,Xe,L),Fe.on(T.Z.LOADING_PROGRESS,he,L)},isPlayingAtTopQuality:function(it){var yt=it?it.id:null,$t=et(y.Z.AUDIO,yt),Nt=et(y.Z.VIDEO,yt);return $t===ht(y.Z.AUDIO,yt)&&Nt===ht(y.Z.VIDEO,yt)},updateTopQualityIndex:function(it){var yt=it.type,$t=it.streamInfo.id,Nt=it.representationCount-1;return ee[$t]=ee[$t]||{},ee[$t][yt]=Nt,Nt},clearDataForStream:function(it){Ae&&Ae.clearForStream(it),H[it]&&delete H[it],ke[it]&&delete ke[it],ne[it]&&delete ne[it]},getThroughputHistory:function(){return Ge},getBitrateList:Ut,getQualityForBitrate:Ft,getTopBitrateInfoFor:function(it){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(yt||(yt=V.getActiveStreamInfo().id),it&&H&&H[yt]&&H[yt][it]){var $t=ht(it,yt),Nt=Ut(H[yt][it].getMediaInfo());return Nt[$t]?Nt[$t]:null}return null},getMinAllowedIndexFor:lt,getMaxAllowedIndexFor:ht,getInitialBitrateFor:function(it,yt){if(function(){if(!$e||!$e.hasOwnProperty("getSavedBitrateSettings"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}(),it===y.Z.TEXT)return NaN;var $t=$e.getSavedBitrateSettings(it),Nt=He.getAbrBitrateParameter("initialBitrate",it),en=Q.get().streaming.abr.initialRepresentationRatio[it];if(Nt===-1)if(en>-1){var Jt=H[yt][it].getStreamInfo(),Wt=me.getAdaptationForType(Jt.index,it,Jt).Representation_asArray;Nt=Array.isArray(Wt)?Wt[Math.max(Math.round(Wt.length*en)-1,0)].bandwidth/1e3:0}else Nt=isNaN($t)?it===y.Z.VIDEO?1e3:100:$t;return Nt},getQualityFor:et,getAbandonmentStateFor:function(it,yt){return ne[it]&&ne[it][yt]?ne[it][yt].state:null},setPlaybackQuality:pt,checkPlaybackQuality:function(it,yt){try{if(!(it&&H&&H[yt]&&H[yt][it]))return!1;if(Ae){var $t=pe.getPlaybackQuality();$t&&Ae.push(yt,Ee,$t)}if(!Q.get().streaming.abr.autoSwitchBitrate[it])return!1;var Nt=et(it,yt),en=Gh(Pe).create({abrController:L,switchHistory:ke[yt][it],droppedFramesHistory:Ae,streamProcessor:H[yt][it],currentValue:Nt,useBufferOccupancyABR:Z[it],useL2AABR:le[it],useLoLPABR:ae[it],videoModel:pe}),Jt=lt(it,yt),Wt=ht(it,yt),Dn=B.getMaxQuality(en),xn=Dn.quality;return Jt!==void 0&&(xn>ua.Z.NO_CHANGE?xn:Nt)<Jt&&(xn=Jt),xn>Wt&&(xn=Wt),ke[yt][it].push({oldValue:Nt,newValue:xn}),xn>ua.Z.NO_CHANGE&&xn!==Nt&&(ne[yt][it].state===D.Z.ALLOW_LOAD||xn<Nt)&&(jt(it,Nt,xn,Wt,Dn.reason,yt),!0)}catch(rr){return!1}},setElementSize:An,setWindowResizeEventCalled:function(it){we=it},registerStreamType:function(it,yt){var $t=yt.getStreamInfo().id;H[$t]||(H[$t]={}),ke[$t]||(ke[$t]={}),ne[$t]||(ne[$t]={}),ke[$t][it]=pi(Pe).create(),H[$t][it]=yt,ne[$t][it]={},ne[$t][it].state=D.Z.ALLOW_LOAD,function(Nt){var en=Q.get().streaming.abr.ABRStrategy;en===y.Z.ABR_STRATEGY_L2A?(Z[Nt]=!1,ae[Nt]=!1,le[Nt]=!0):en===y.Z.ABR_STRATEGY_LoLP?(Z[Nt]=!1,ae[Nt]=!0,le[Nt]=!1):en===y.Z.ABR_STRATEGY_BOLA?(Z[Nt]=!0,ae[Nt]=!1,le[Nt]=!1):en===y.Z.ABR_STRATEGY_THROUGHPUT?(Z[Nt]=!1,ae[Nt]=!1,le[Nt]=!1):en===y.Z.ABR_STRATEGY_DYNAMIC&&(Z[Nt]=!(!Z||!Z[Nt])&&Z[Nt],ae[Nt]=!1,le[Nt]=!1)}(it),it===y.Z.VIDEO&&An()},unRegisterStreamType:function(it,yt){try{H[it]&&H[it][yt]&&delete H[it][yt],ke[it]&&ke[it][yt]&&delete ke[it][yt],ne[it]&&ne[it][yt]&&delete ne[it][yt]}catch($t){}},setConfig:function(it){it&&(it.streamController&&(V=it.streamController),it.domStorage&&($e=it.domStorage),it.mediaPlayerModel&&(He=it.mediaPlayerModel),it.customParametersModel&&(Oe=it.customParametersModel),it.cmsdModel&&(Ze=it.cmsdModel),it.dashMetrics&&(se=it.dashMetrics),it.adapter&&(me=it.adapter),it.videoModel&&(pe=it.videoModel),it.settings&&(Q=it.settings))},reset:function(){xe(),Fe.off(T.Z.LOADING_PROGRESS,he,L),Fe.off(_.Z.QUALITY_CHANGE_RENDERED,Ne,L),Fe.off(_.Z.METRIC_ADDED,Xe,L),B&&B.reset()}},P=be.getLogger(L),xe(),L}qf.__dashjs_factory_name="AbrController";var Hh=F.Z.getSingletonFactory(qf);Hh.QUALITY_DEFAULT=0,F.Z.updateSingletonFactory(qf.__dashjs_factory_name,Hh);var Wn=Hh,bm=new Map([[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Rc(){var L,P,B,V,ee,J,H,ne,ce=this.context,we=(0,m.Z)(ce).getInstance(),ye=[];function ie(){B&&(B.playbackRate=1,B.removeEventListener("canplay",ie))}function me(){return ye.length>0}function pe(){if(B&&me()&&B.playbackRate===0){var Ae=document.createEvent("Event");Ae.initEvent("waiting",!0,!1),B.dispatchEvent(Ae)}}function He(Ae,Ge){B&&B.addEventListener(Ae,Ge)}function Oe(Ae,Ge){B&&B.removeEventListener(Ae,Ge)}function Ze(){return B?B.readyState:NaN}function $e(){return B?B.buffered:null}function Ee(Ae,Ge,Z,le,ae){if(B){for(var se=0;se<B.textTracks.length;se++)if(B.textTracks[se].kind===Ae&&(!Ge||B.textTracks[se].label==Ge)&&B.textTracks[se].language===Z&&B.textTracks[se].isTTML===le&&B.textTracks[se].isEmbedded===ae)return B.textTracks[se]}return null}function ke(Ae,Ge){return Ae===y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ze()>=Ae?(Ge(),null):function(Z,le){var ae=function se(){Oe(Z,se),le(Z)};return He(Z,ae),{func:ae,event:Z}}(bm.get(Ae),Ge)}return L={addEventListener:He,addTextTrack:function(Ae,Ge,Z,le,ae){if(!B)return null;var se=Ee(Ae,Ge,Z,le,ae);return se||((se=B.addTextTrack(Ae,Ge,Z)).isEmbedded=ae,se.isTTML=le),se},appendChild:function(Ae){B&&(B.appendChild(Ae),Ae.isTTML!==void 0&&(B.textTracks[B.textTracks.length-1].isTTML=Ae.isTTML,B.textTracks[B.textTracks.length-1].isEmbedded=Ae.isEmbedded))},getBufferRange:$e,getClientHeight:function(){return B?B.clientHeight:NaN},getClientWidth:function(){return B?B.clientWidth:NaN},getElement:function(){return B},getEnded:function(){return B?B.ended:null},getPlaybackQuality:function(){if(!B)return null;var Ae="webkitDroppedFrameCount"in B&&"webkitDecodedFrameCount"in B,Ge=null;return"getVideoPlaybackQuality"in B?Ge=B.getVideoPlaybackQuality():Ae&&(Ge={droppedVideoFrames:B.webkitDroppedFrameCount,totalVideoFrames:B.webkitDroppedFrameCount+B.webkitDecodedFrameCount,creationTime:new Date}),Ge},getPlaybackRate:function(){return B?B.playbackRate:null},getPlayedRanges:function(){return B?B.played:null},getReadyState:Ze,getSource:function(){return B?B.src:null},getTTMLRenderingDiv:function(){return J},getTextTrack:Ee,getTextTracks:function(){return B?B.textTracks:[]},getTime:function(){return B?isNaN(V)?B.currentTime:V:null},getVideoHeight:function(){return B?B.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(B){var Ae=B.parentNode.host||B.parentNode;return Ae?B.getBoundingClientRect().left-Ae.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(B){var Ae=B.parentNode.host||B.parentNode;return Ae?B.getBoundingClientRect().top-Ae.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return B?B.videoWidth:NaN},getVttRenderingDiv:function(){return H},initialize:function(){we.on(T.Z.PLAYBACK_PLAYING,pe,this)},isPaused:function(){return B?B.paused:null},isSeeking:function(){return B?B.seeking||!isNaN(V):null},isStalled:me,pause:function(){B&&(B.pause(),B.autoplay=!1)},play:function(){if(B){B.autoplay=!0;var Ae=B.play();Ae&&Ae.catch&&typeof Promise<"u"&&Ae.catch(function(Ge){Ge.name==="NotAllowedError"&&we.trigger(T.Z.PLAYBACK_NOT_ALLOWED),P.warn("Caught pending play exception - continuing (".concat(Ge,")"))})}},removeChild:function(Ae){B&&B.removeChild(Ae)},removeEventListener:Oe,reset:function(){clearTimeout(ne),we.off(T.Z.PLAYBACK_PLAYING,pe,this)},setCurrentTime:function(Ae,Ge){B&&(ee&&ee.func&&ee.event&&Oe(ee.event,ee.func),V=Ae,ee=ke(y.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(B)if(B.currentTime!==V)try{V=Ge?function(Z){var le=$e(),ae=Z,se=9999999999;if(le)for(var Q=0;Q<le.length;Q++){var Pe=le.start(Q),be=le.end(Q),Fe=Math.abs(Pe-Z),xe=Math.abs(be-Z);if(Z>=Pe&&Z<=be)return Z;Fe<se&&(se=Fe,ae=Pe),xe<se&&(se=xe,ae=be)}return ae}(V):V,isNaN(V)||(B.currentTime=V),V=NaN}catch(Z){B.readyState===0&&Z.code===Z.INVALID_STATE_ERR&&(ne=setTimeout(function(){B.currentTime=V,V=NaN},400))}else V=NaN}))},setElement:function(Ae){if(!(Ae==null||Ae&&/^(VIDEO|AUDIO)$/i.test(Ae.nodeName)))throw"element is not video or audio DOM type!";(B=Ae)&&(B.preload="auto")},setPlaybackRate:function(Ae){var Ge=arguments.length>1&&arguments[1]!==void 0&&arguments[1];B&&(!Ge&&B.readyState<=2&&Ae>0?B.addEventListener("canplay",ie):B.playbackRate=Ae)},setSource:function(Ae){B&&(Ae?B.src=Ae:(B.removeAttribute("src"),B.load()))},setStallState:function(Ae,Ge){(function(Z,le){le?function(ae){ae!==null&&B&&!B.seeking&&ye.indexOf(ae)===-1&&ye.push(ae)}(Z):function(ae){var se=ye.indexOf(ae);ae!==null&&se!==-1&&ye.splice(se,1)}(Z)})(Ae,Ge)},setTTMLRenderingDiv:function(Ae){(J=Ae).style.position="absolute",J.style.display="flex",J.style.overflow="hidden",J.style.pointerEvents="none",J.style.top=0,J.style.left=0},setVttRenderingDiv:function(Ae){H=Ae},waitForReadyState:ke,setDisableRemotePlayback:function(Ae){B&&(B.disableRemotePlayback=Ae)}},P=(0,N.Z)(ce).getInstance().getLogger(L),V=NaN,L}Rc.__dashjs_factory_name="VideoModel";var Sr=F.Z.getSingletonFactory(Rc),Ol=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],gu="dashjs_?_bitrate",Kr="dashjs_?_settings",Ko="localStorage",Oi="lastBitrate",Cm="lastMediaSettings";function Kh(L){L=L||{};var P,B,V,ee=this.context,J=L.settings;function H(ye){if(V!==void 0)return V;var ie;V=!1;try{typeof window<"u"&&(ie=window[ye])}catch(me){return B.warn("DOMStorage access denied: "+me.message),V}if(!ie||ye!==Ko)return V;try{ie.setItem("1","1"),ie.removeItem("1"),V=!0}catch(me){B.warn("DOMStorage is supported, but cannot be used: "+me.message)}return V}function ne(){var ye=6e5;return Math.round(new Date().getTime()/ye)*ye}function ce(ye,ie){return H(ye)&&J.get().streaming[ie+"CachingInfo"].enabled}function we(){if(!J)throw new Error(y.Z.MISSING_CONFIG_ERROR)}return P={getSavedBitrateSettings:function(ye){if(we(),!J.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var ie=NaN;if(ce(Ko,Oi)){var me=gu.replace(/\?/,ye);try{var pe=JSON.parse(localStorage.getItem(me))||{},He=new Date().getTime()-parseInt(pe.timestamp,10)>=J.get().streaming.lastBitrateCachingInfo.ttl||!1,Oe=parseFloat(pe.bitrate);isNaN(Oe)||He?He&&localStorage.removeItem(me):(ie=Oe,B.debug("Last saved bitrate for "+ye+" was "+Oe))}catch(Ze){return null}}return ie},setSavedBitrateSettings:function(ye,ie){if(ce(Ko,Oi)&&ie){var me=gu.replace(/\?/,ye);try{localStorage.setItem(me,JSON.stringify({bitrate:ie.toFixed(3),timestamp:ne()}))}catch(pe){B.error(pe.message)}}},getSavedMediaSettings:function(ye){if(we(),!J.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var ie=null;if(ce(Ko,Cm)){var me=Kr.replace(/\?/,ye);try{var pe=JSON.parse(localStorage.getItem(me))||{},He=new Date().getTime()-parseInt(pe.timestamp,10)>=J.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;ie=pe.settings,He&&(localStorage.removeItem(me),ie=null)}catch(Oe){return null}}return ie},setSavedMediaSettings:function(ye,ie){if(ce(Ko,Cm)){var me=Kr.replace(/\?/,ye);try{localStorage.setItem(me,JSON.stringify({settings:ie,timestamp:ne()}))}catch(pe){B.error(pe.message)}}}},B=(0,N.Z)(ee).getInstance().getLogger(P),H(Ko)&&Ol.forEach(function(ye){var ie=localStorage.getItem(ye.oldKey);if(ie){localStorage.removeItem(ye.oldKey);try{localStorage.setItem(ye.newKey,ie)}catch(me){B.error(me.message)}}}),P}Kh.__dashjs_factory_name="DOMStorage";var RE=F.Z.getSingletonFactory(Kh),Rm=A(2032),Vh=A(2011);function xc(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe=this.context;function He(Ee,ke,Ae,Ge){var Z=null,le=Ee?me.resolve(Ee.path):null,ae=Ge||{init:!0,url:le?le.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ke};P.debug("Start searching for initialization.");var se=$e(ae);ne.load({request:se,success:function(Q){if(ae.bytesLoaded=ae.range.end,!(Z=V.findInitRange(Q)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,He(Ee,ke,Ae,ae);Ee.range=Z,Ae(Ee)},error:function(){Ae(Ee)}}),P.debug("Perform init search: "+ae.url)}function Oe(Ee,ke,Ae,Ge,Z,le){if(Ae&&(Ae.start===void 0||Ae.end===void 0)){var ae=Ae?Ae.toString().split("-"):null;Ae=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}Z=Z||Ze;var se=null,Q=null,Pe=!!Ae,be=Ee?me.resolve(Ee.path):null,Fe={init:!1,url:be?be.url:void 0,range:Pe?Ae:{start:0,end:1500},searching:!Pe,bytesLoaded:le?le.bytesLoaded:0,bytesToLoad:1500,mediaType:ke},xe=$e(Fe);ne.load({request:xe,success:function(he){var Ne=Fe.bytesToLoad,Xe=he.byteLength;if(Fe.bytesLoaded=Fe.range.end-Fe.range.start,se=V.parse(he),(Q=se.getBox("sidx"))&&Q.isComplete){var ht,lt,et=Q.references;if(et!=null&&et.length>0&&(ht=et[0].reference_type===1),ht){var pt,jt,Ht,Ft;P.debug("Initiate multiple SIDX load."),Fe.range.end=Fe.range.start+Q.size;var Ut=[],An=0,it=(Q.offset||Fe.range.start)+Q.size,yt=function(Nt){Nt?(Ut=Ut.concat(Nt),++An>=jt&&(Ut.sort(function(en,Jt){return en.startTime-Jt.startTime<0?-1:0}),Z(Ut,Ee,Ge))):Z(null,Ee,Ge)};for(pt=0,jt=et.length;pt<jt;pt++)Ht=it,Ft=it+et[pt].referenced_size-1,it+=et[pt].referenced_size,Oe(Ee,ke,{start:Ht,end:Ft},Ge,yt,Fe)}else P.debug("Parsing segments from SIDX. representation "+ke+" - id: "+Ee.id+" for range : "+Fe.range.start+" - "+Fe.range.end),lt=function(Nt,en){for(var Jt,Wt,Dn,xn,rr=Nt.references,ir=rr.length,bt=Nt.timescale,Xt=Nt.earliest_presentation_time,Gt=en.range.start+Nt.offset+Nt.first_offset+Nt.size,un=[],vn=0;vn<ir;vn++)Dn=rr[vn].subsegment_duration,xn=rr[vn].referenced_size,(Jt=new Vh.Z).duration=Dn,Jt.startTime=Xt,Jt.timescale=bt,Wt=Gt+xn-1,Jt.mediaRange=Gt+"-"+Wt,un.push(Jt),Xt+=Dn,Gt+=xn;return un}(Q,Fe),Z(lt,Ee,Ge)}else{if(Q)Fe.range.start=Q.offset||Fe.range.start,Fe.range.end=Fe.range.start+(Q.size||Ne);else{if(Xe<Fe.bytesLoaded)return void Z(null,Ee,Ge);var $t=se.getLastBox();$t&&$t.size?(Fe.range.start=$t.offset+$t.size,Fe.range.end=Fe.range.start+Ne):Fe.range.end+=Ne}Oe(Ee,ke,Fe.range,Ge,null,Fe)}},error:function(){Z(null,Ee,Ge)}}),P.debug("Perform SIDX load for type ".concat(ke," : ").concat(Fe.url," with range ").concat(Fe.range.start," - ").concat(Fe.range.end))}function Ze(Ee,ke,Ae){Ae({segments:Ee,representation:ke,error:Ee?void 0:new fe.Z(ce.SEGMENT_BASE_LOADER_ERROR_CODE,ce.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function $e(Ee){if(Ee.url){var ke=new j.Z;return ke.setInfo(Ee),ke}}return L={setConfig:function(Ee){Ee.baseURLController&&(me=Ee.baseURLController),Ee.dashMetrics&&(J=Ee.dashMetrics),Ee.mediaPlayerModel&&(H=Ee.mediaPlayerModel),Ee.errHandler&&(B=Ee.errHandler),Ee.boxParser&&(V=Ee.boxParser),Ee.debug&&(P=Ee.debug.getLogger(L)),Ee.requestModifier&&(ee=Ee.requestModifier),Ee.errors&&(ce=Ee.errors),Ee.urlUtils&&(ie=Ee.urlUtils),Ee.constants&&(we=Ee.constants),Ee.dashConstants&&(ye=Ee.dashConstants)},initialize:function(){ne=Ao(pe).create({errHandler:B,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,boxParser:V,errors:ce,urlUtils:ie,constants:we,dashConstants:ye})},loadInitialization:function(Ee,ke){return new Promise(function(Ae){He(Ee,ke,Ae)})},loadSegments:function(Ee,ke,Ae){return new Promise(function(Ge){Oe(Ee,ke,Ae,Ge)})},reset:function(){ne&&(ne.abort(),ne=null)}}}xc.__dashjs_factory_name="SegmentBaseLoader";var Wa=F.Z.getSingletonFactory(xc);function zh(L){var P;L=L||{};var B=new DataView(L.data),V=0;function ee(H,ne){var ce=!0,we=0;if(ne===void 0&&(ne=!1),H.tag>16777215?(B.getUint32(V)!==H.tag&&(ce=!1),we=4):H.tag>65535?(256*B.getUint16(V)+B.getUint8(V+2)!==H.tag&&(ce=!1),we=3):H.tag>255?(B.getUint16(V)!==H.tag&&(ce=!1),we=2):(B.getUint8(V)!==H.tag&&(ce=!1),we=1),!ce&&H.required&&!ne)throw new Error("required tag not found");return ce&&(V+=we),ce}function J(H){var ne=1,ce=128,we=-1,ye=0,ie=B.getUint8(V),me=0;for(me=0;me<8;me+=1){if((ie&ce)===ce){ye=H===void 0?ie&~ce:ie,we=me;break}ce>>=1}for(me=0;me<we;me+=1,ne+=1)ye=ye<<8|255&B.getUint8(V+ne);return V+=ne,ye}return P={getPos:function(){return V},setPos:function(H){V=H},consumeTag:ee,consumeTagAndSize:function(H,ne){var ce=ee(H,ne);return ce&&J(),ce},parseTag:function(H){var ne;return ee(H),ne=J(),P[H.parse](ne)},skipOverElement:function(H,ne){var ce,we=ee(H,ne);return we&&(ce=J(),V+=ce),we},getMatroskaCodedNum:J,getMatroskaFloat:function(H){var ne;switch(H){case 4:ne=B.getFloat32(V),V+=4;break;case 8:ne=B.getFloat64(V),V+=8}return ne},getMatroskaUint:function(H){if(H>4)return function(we){for(var ye=Math.floor(Number.MAX_SAFE_INTEGER/256),ie=0,me=0;me<we;me+=1){if(ie>ye)throw new Error("Value exceeds safe integer limit");ie*=256;var pe=B.getUint8(V+me);if(ie>Number.MAX_SAFE_INTEGER-pe)throw new Error("Value exceeds safe integer limit");ie+=pe}return V+=we,ie}(H);for(var ne=0,ce=0;ce<H;ce+=1)ne<<=8,ne|=255&B.getUint8(V+ce);return V+=H,ne>>>0},moreData:function(){return V<B.byteLength}}}zh.__dashjs_factory_name="EBMLParser";var Nc=F.Z.getClassFactory(zh);function Wu(){var L,P,B,V,ee,J,H,ne,ce,we,ye=this.context;function ie(me){var pe=new j.Z;return pe.setInfo(me),pe}return L={setConfig:function(me){if(!(me.baseURLController&&me.dashMetrics&&me.mediaPlayerModel&&me.errHandler))throw new Error(y.Z.MISSING_CONFIG_ERROR);we=me.baseURLController,J=me.dashMetrics,H=me.mediaPlayerModel,V=me.errHandler,ce=me.errors,P=me.debug.getLogger(L),ee=me.requestModifier},initialize:function(){ne=Ao(ye).create({errHandler:V,dashMetrics:J,mediaPlayerModel:H,requestModifier:ee,errors:ce})},loadInitialization:function(me,pe){return new Promise(function(He){var Oe=null,Ze=me?we.resolve(me.path):null,$e=me?me.range.split("-"):null,Ee={range:{start:$e?parseFloat($e[0]):null,end:$e?parseFloat($e[1]):null},request:Oe,url:Ze?Ze.url:void 0,init:!0,mediaType:pe};P.info("Start loading initialization."),Oe=ie(Ee),ne.load({request:Oe,success:function(){He(me)},error:function(){He(me)}}),P.debug("Perform init load: "+Ee.url)})},loadSegments:function(me,pe,He){return new Promise(function(Oe){var Ze=null,$e=me?we.resolve(me.path):null,Ee=$e?$e.url:void 0;Ze=ie({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Ze,url:Ee,init:!1,mediaType:pe}),P.debug("Parsing ebml header"),ne.load({request:Ze,success:function(ke){(function(Ae,Ge,Z,le){if(Ae&&Ae.byteLength!==0){var ae,se,Q,Pe,be=Nc(ye).create({data:Ae}),Fe=Z?Z.split("-"):null,xe=null,he={url:Ge,range:{start:Fe?parseFloat(Fe[0]):null,end:Fe?parseFloat(Fe[1]):null},request:xe};for(P.debug("Parse EBML header: "+he.url),be.skipOverElement(B.EBML),be.consumeTag(B.Segment),Q=be.getMatroskaCodedNum(),Q+=be.getPos(),Pe=be.getPos();be.moreData()&&!be.consumeTagAndSize(B.Segment.Info,!0);)if(!(be.skipOverElement(B.Segment.SeekHead,!0)||be.skipOverElement(B.Segment.Tracks,!0)||be.skipOverElement(B.Segment.Cues,!0)||be.skipOverElement(B.Void,!0)))throw new Error("no valid top level element found");for(;ae===void 0;){var Ne=be.getMatroskaCodedNum(!0),Xe=be.getMatroskaCodedNum();Ne===B.Segment.Info.Duration.tag?ae=be[B.Segment.Info.Duration.parse](Xe):be.setPos(be.getPos()+Xe)}xe=ie(he),ne.load({request:xe,success:function(ht){se=function(lt,et,pt,jt){var Ht,Ft,Ut,An,it,yt,$t,Nt;for(Ut=[],it=0,yt=(Ft=function(en){var Jt,Wt,Dn=[],xn=Nc(ye).create({data:en});for(xn.consumeTagAndSize(B.Segment.Cues);xn.moreData()&&xn.consumeTagAndSize(B.Segment.Cues.CuePoint,!0);){for((Jt={}).CueTime=xn.parseTag(B.Segment.Cues.CuePoint.CueTime),Jt.CueTracks=[];xn.moreData()&&xn.consumeTag(B.Segment.Cues.CuePoint.CueTrackPositions,!0);){var rr=xn.getMatroskaCodedNum(),ir=xn.getPos();if((Wt={}).Track=xn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Wt.Track===0)throw new Error("Cue track cannot be 0");Wt.ClusterPosition=xn.parseTag(B.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Jt.CueTracks.push(Wt),xn.setPos(ir+rr)}if(Jt.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Dn.push(Jt)}if(Dn.length===0)throw new Error("mandatory cuepoint not found");return Dn}(lt)).length;it<yt;it+=1)An=new Vh.Z,Ht=it<Ft.length-1?Ft[it+1].CueTime-Ft[it].CueTime:jt-Ft[it].CueTime,An.duration=Ht,An.startTime=Ft[it].CueTime,An.timescale=1e3,$t=Ft[it].CueTracks[0].ClusterPosition+et,Nt=it<Ft.length-1?Ft[it+1].CueTracks[0].ClusterPosition+et-1:pt-1,An.mediaRange=$t+"-"+Nt,Ut.push(An);return P.debug("Parsed cues: "+Ut.length+" cues."),Ut}(ht,Pe,Q,ae),le(se)},error:function(){P.error("Download Error: Cues "+he.url),le(null)}}),P.debug("Perform cues load: "+he.url+" bytes="+he.range.start+"-"+he.range.end)}else le(null)})(ke,Ee,He,function(Ae){Oe({segments:Ae,representation:me,error:Ae?void 0:new fe.Z(ce.SEGMENT_BASE_LOADER_ERROR_CODE,ce.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){Oe({representation:me,error:new fe.Z(ce.SEGMENT_BASE_LOADER_ERROR_CODE,ce.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){ne&&(ne.abort(),ne=null)}},B={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}Wu.__dashjs_factory_name="WebmSegmentBaseLoader";var jr=F.Z.getSingletonFactory(Wu);function Hf(L){L=L||{};var P,B,V,ee=this.context,J=L.eventBus,H=L.events,ne=L.dashMetrics,ce=L.mediaPlayerModel,we=L.errHandler,ye=L.baseURLController,ie=L.debug,me=L.boxParser,pe=L.requestModifier,He=L.errors;function Oe(Ze){return(Ze?Ze.split("/")[1]:"").toLowerCase()==="webm"}return P={initialize:function(){B.initialize(),V.initialize()},getSegmentBaseInitSegment:function(Ze){return Oe(Ze.representation.mimeType)?V.loadInitialization(Ze.representation,Ze.mediaType):B.loadInitialization(Ze.representation,Ze.mediaType)},getSegmentList:function(Ze){return Oe(Ze.mimeType)?V.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null):B.loadSegments(Ze.representation,Ze.mediaType,Ze.representation?Ze.representation.indexRange:null)},reset:function(){B.reset(),V.reset()}},B=Wa(ee).getInstance(),V=jr(ee).getInstance(),B.setConfig({baseURLController:ye,dashMetrics:ne,mediaPlayerModel:ce,errHandler:we,eventBus:J,events:H,errors:He,debug:ie,boxParser:me,requestModifier:pe}),V.setConfig({baseURLController:ye,dashMetrics:ne,mediaPlayerModel:ce,errHandler:we,eventBus:J,events:H,errors:He,debug:ie,requestModifier:pe}),P}Hf.__dashjs_factory_name="SegmentBaseController";var xE=F.Z.getSingletonFactory(Hf),Ll=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},Mc=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Dr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},ks=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function xm(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var Fr=function(){function L(V){var ee=this;(function(J,H){if(!(J instanceof H))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=V[0]=="/",this.path=V.split("/").filter(function(J){return J.length!==0}).map(function(J){var H={name:J},ne=J.indexOf("[");if(ne!=-1){H.name=J.substring(0,ne);var ce=J.substring(ne+1,J.length-1);ee.valid=ee.valid&&ce.indexOf("[")==-1;var we=ce.indexOf("=");we!=-1?(H.attribute={name:ce.substring(1,we),value:ce.substring(we+1)},["'",'"'].indexOf(H.attribute.value[0])!=-1&&(H.attribute.value=H.attribute.value.substring(1,H.attribute.value.length-1))):H.position=parseInt(ce,10)-1}return H})}var P,B;return P=L,(B=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(V,ee){for(var J=null,H=V,ne=1,ce="MPD";ne<this.path.length&&H!==null;){J=H;var we=this.path[ne];if(ce=we.name,ne!==this.path.length-1||!ce.startsWith("@")&&ce!=="text()"){var ye=J[ce+"_asArray"]||[];ye.length===0&&J[ce]&&ye.push(J[ce]),we.position?H=ye[we.position]||null:we.attribute?function(){var ie=we.attribute;H=ye.filter(function(me){return me[ie.name]==ie.value})[0]||null}():H=ye[0]||null}ne++}return H===null?null:ce.startsWith("@")?{name:ce.substring(1),leaf:H,target:H}:ce==="text()"?{name:"__text",leaf:H,target:H}:{name:ce,leaf:H,target:ee?J:H}}}])&&xm(P.prototype,B),L}();function yr(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var mu=function(){function L(V,ee,J){(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=V,this.xpath=ee,this.value=J,this.position=null}var P,B;return P=L,(B=[{key:"getMpdTarget",value:function(V){var ee=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(V,ee)}}])&&yr(P.prototype,B),L}();function wi(){var L,P,B=this.context;return L={getIsPatch:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.PUBLISH_TIME)?new Date(V[v.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(V){return V&&V.hasOwnProperty(v.Z.ORIGINAL_PUBLISH_TIME)?new Date(V[v.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(V){return V&&V[v.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(V){return V?(V.__children||[]).map(function(ee){var J=Object.keys(ee)[0];if(J!=="add"&&J!=="remove"&&J!=="replace")return P.warn("Ignoring node of invalid action: ".concat(J)),null;var H=ee[J],ne=H.sel;if(J==="add"&&H.type){if(!H.type.startsWith("@"))return P.warn("Ignoring add action for prefixed namespace declaration: ".concat(H.type,"=").concat(H.__text)),null;ne="".concat(ne,"/").concat(H.type)}var ce=new Fr(ne);if(!ce.isValid())return P.warn("Ignoring action with invalid selector: ".concat(J," - ").concat(ne)),null;var we=null;ce.findsAttribute()||ce.findsTextReplace()?we=H.__text||"":J!=="remove"&&(we=H.__children.reduce(function(ie,me){var pe=Object.keys(me)[0];return pe!=="#text"&&(ie[pe]=ie[pe]||[],ie[pe].push(me[pe])),ie},{}));var ye=new mu(J,ce,we);return J==="add"&&(ye.position=H.pos),ye}).filter(function(ee){return!!ee}):[]}},P=(0,N.Z)(B).getInstance().getLogger(L),L}wi.__dashjs_factory_name="PatchManifestModel";var Yh=F.Z.getSingletonFactory(wi);function $u(){var L,P,B,V,ee,J,H,ne=this.context;function ce(ae,se,Q){var Pe,be=P.getAdaptationsForType(V[0].mpd.manifest,ae,se);if(!be||be.length===0)return null;if(be.length>1&&Q){var Fe=ie(Q,se);if(ee[Q.id]&&ee[Q.id][se]){for(var xe=0,he=be.length;xe<he;xe++)if(we(ee[Q.id][se],Fe[xe]))return be[xe]}for(var Ne=0,Xe=be.length;Ne<Xe;Ne++)if(Pe=be[Ne],P.getRolesForAdaptation(Pe).filter(function(ht){return ht.value===v.Z.MAIN})[0])return be[Ne]}return be[0]}function we(ae,se){if(!ae||!se)return!1;var Q=ae.id===se.id,Pe=ae.codec===se.codec,be=ae.viewpoint===se.viewpoint,Fe=JSON.stringify(ae.viewpointsWithSchemeIdUri)===JSON.stringify(se.viewpointsWithSchemeIdUri),xe=ae.lang===se.lang,he=ae.roles.toString()===se.roles.toString(),Ne=JSON.stringify(ae.rolesWithSchemeIdUri)===JSON.stringify(se.rolesWithSchemeIdUri),Xe=ae.accessibility.toString()===se.accessibility.toString(),ht=JSON.stringify(ae.accessibilitiesWithSchemeIdUri)===JSON.stringify(se.accessibilitiesWithSchemeIdUri),lt=ae.audioChannelConfiguration.toString()===se.audioChannelConfiguration.toString(),et=JSON.stringify(ae.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(se.audioChannelConfigurationsWithSchemeIdUri);return Q&&Pe&&be&&Fe&&xe&&he&&Ne&&Xe&&ht&&lt&&et}function ye(ae,se,Q,Pe,be,Fe){var xe,he,Ne,Xe,ht,lt,et=[];if(!Pe||Pe.length===0)return[];var pt=P.getAdaptationsForPeriod(se);for(Xe=0,lt=Pe.length;Xe<lt;Xe++)if(xe=Pe[Xe],he=Ee(pt[Ne=P.getIndexForAdaptation(xe,ae,Q.index)]),Fe){var jt=he.accessibility.length;for(ht=0;ht<jt;ht++)if(he){var Ht=he.accessibility[ht];if(Ht.indexOf("cea-608:")===0){var Ft=Ht.substring(8).split(";");if(Ft[0].substring(0,2)==="CC")for(ht=0;ht<Ft.length;ht++)he||(he=Ee.call(this,pt[Ne])),ke(he,Ft[ht].substring(0,3),Ft[ht].substring(4)),et.push(he),he=null;else for(ht=0;ht<Ft.length;ht++)he||(he=Ee.call(this,pt[Ne])),ke(he,"CC"+(ht+1),Ft[ht]),et.push(he),he=null}else Ht.indexOf("cea-608")===0&&(ke(he,J.CC1,"eng"),et.push(he),he=null)}}else be===J.IMAGE?(he.type=J.IMAGE,et.push(he),he=null):he&&et.push(he);return et}function ie(ae,se,Q){var Pe=V,be=Q,Fe=[];if(be)Ge(),Pe=me(be);else{if(!(V.length>0))return Fe;be=V[0].mpd.manifest}var xe=$e(ae,Pe),he=P.getAdaptationsForType(be,ae?ae.index:null,se);return Fe=ye(be,xe,ae,he,se),se===J.TEXT&&(he=P.getAdaptationsForType(be,ae?ae.index:null,J.VIDEO),Fe=Fe.concat(ye(be,xe,ae,he,se,!0))),Fe}function me(ae){var se=pe(ae);return P.getRegularPeriods(se)}function pe(ae){var se=Oe(ae);return P.getMpd(se)}function He(){V=[],ee={}}function Oe(ae){return ae||(V.length>0?V[0].mpd.manifest:null)}function Ze(ae){try{var se=$e(ae.streamInfo,V),Q=P.getAdaptationsForPeriod(se);return ae&&ae.streamInfo&&ae.streamInfo.id!==void 0&&Q?Q[ae.index]:null}catch(Pe){return null}}function $e(ae,se){for(var Q=se.length,Pe=0;Pe<Q;Pe++){var be=se[Pe];if(ae&&ae.id===be.id)return be}return null}function Ee(ae){if(!ae)return null;var se,Q,Pe,be,Fe,xe=new Mc,he=ae.period.mpd.manifest.Period_asArray[ae.period.index].AdaptationSet_asArray[ae.index];if(xe.id=ae.id,xe.index=ae.index,xe.type=ae.type,xe.streamInfo=Ae(ae.period),xe.representationCount=P.getRepresentationCount(he),xe.labels=P.getLabelsForAdaptation(he),xe.lang=P.getLanguageForAdaptation(he),xe.segmentAlignment=P.getSegmentAlignment(he),xe.subSegmentAlignment=P.getSubSegmentAlignment(he),se=P.getViewpointForAdaptation(he),xe.viewpoint=se.length?se[0].value:void 0,xe.viewpointsWithSchemeIdUri=se,Fe=P.getAccessibilityForAdaptation(he),xe.accessibility=Fe.map(function(et){var pt=et.value,jt=pt;return et.schemeIdUri&&et.schemeIdUri.search("cea-608")>=0&&H!==void 0&&(jt=pt?"cea-608:"+pt:"cea-608",xe.embeddedCaptions=!0),jt}),xe.accessibilitiesWithSchemeIdUri=Fe,Q=P.getAudioChannelConfigurationForAdaptation(he),xe.audioChannelConfiguration=Q.map(function(et){return et.value}),xe.audioChannelConfigurationsWithSchemeIdUri=Q,xe.audioChannelConfiguration.length===0&&Array.isArray(he.Representation_asArray)&&he.Representation_asArray.length>0&&(Pe=P.getAudioChannelConfigurationForRepresentation(he.Representation_asArray[0]),xe.audioChannelConfiguration=Pe.map(function(et){return et.value}),xe.audioChannelConfigurationsWithSchemeIdUri=Pe),be=P.getRolesForAdaptation(he),xe.roles=be.map(function(et){return et.value}),xe.rolesWithSchemeIdUri=be,xe.codec=P.getCodec(he),xe.mimeType=P.getMimeType(he),xe.contentProtection=P.getContentProtectionData(he),xe.bitrateList=P.getBitrateListForAdaptation(he),xe.selectionPriority=P.getSelectionPriority(he),xe.contentProtection){var Ne=xe.contentProtection.map(function(et){return P.getKID(et)}).filter(function(et){return et!==null});if(Ne.length){var Xe=Ne[0];xe.contentProtection.forEach(function(et){et.keyId=Xe})}}if(xe.isText=P.getIsText(he),xe.supplementalProperties=P.getSupplementalPropertiesForAdaptation(he),(!xe.supplementalProperties||Object.keys(xe.supplementalProperties).length===0)&&Array.isArray(he.Representation_asArray)&&he.Representation_asArray.length>0){var ht=he.Representation_asArray.map(function(et){return P.getSupplementalPropertiesForRepresentation(et)});ht.every(function(et){return JSON.stringify(et)===JSON.stringify(ht[0])})&&(xe.supplementalProperties=ht[0])}if(xe.supplementalPropertiesAsArray=P.getSupplementalPropertiesAsArrayForAdaptation(he),(!xe.supplementalPropertiesAsArray||xe.supplementalPropertiesAsArray.length===0)&&Array.isArray(he.Representation_asArray)&&he.Representation_asArray.length>0){var lt=he.Representation_asArray.map(function(et){return P.getSupplementalPropertiesAsArrayForRepresentation(et)});lt.every(function(et){return JSON.stringify(et)===JSON.stringify(lt[0])})&&(xe.supplementalPropertiesAsArray=lt[0])}return xe.essentialProperties=P.getEssentialPropertiesForAdaptation(he),xe.essentialPropertiesAsArray=P.getEssentialPropertiesAsArrayForAdaptation(he),xe.isFragmented=P.getIsFragmented(he),xe.isEmbedded=!1,xe}function ke(ae,se,Q){ae.id=se,ae.index=100+parseInt(se.substring(2,3)),ae.type=J.TEXT,ae.codec="cea-608-in-SEI",ae.isEmbedded=!0,ae.isFragmented=!1;var Pe=yi()(Q);ae.lang=Pe||Q,ae.roles=["caption"],ae.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Ae(ae){var se,Q,Pe=new Dr;return Pe.id=ae.id,Pe.index=ae.index,Pe.start=ae.start,Pe.duration=ae.duration,Pe.manifestInfo=(se=ae.mpd,(Q=new ks).dvrWindowSize=se.timeShiftBufferDepth,Q.loadedTime=se.manifest.loadedTime,Q.availableFrom=se.availabilityStartTime,Q.minBufferTime=se.manifest.minBufferTime,Q.maxFragmentDuration=se.maxSegmentDuration,Q.duration=P.getDuration(se.manifest),Q.isDynamic=P.getIsDynamic(se.manifest),Q.serviceDescriptions=P.getServiceDescriptions(se.manifest),Q.protocol=se.manifest.protocol,Q),Pe.isLast=ae.mpd.manifest.Period_asArray.length===1||Math.abs(Pe.start+Pe.duration-Pe.manifestInfo.duration)<1,Pe}function Ge(){if(!J)throw new Error("setConfig function has to be called previously")}function Z(ae){return V.length>0?V[0].mpd.manifest.Period_asArray[ae]:null}function le(ae,se,Q){var Pe,be,Fe,xe,he;if(ae){for(Pe=ae.AdaptationSet_asArray,xe=0;xe<Pe.length;xe+=1)for(Fe=Pe[xe].Representation_asArray,he=0;he<Fe.length;he+=1)if(se===(be=Fe[he]).id)return Q?he:be}return null}return L={getBandwidthForRepresentation:function(ae,se){var Q;return(Q=le(Z(se),ae))?Q.bandwidth:null},getIndexForRepresentation:function(ae,se){return function(Q,Pe){var be=le(Q,Pe,!0);return be!==null?be:-1}(Z(se),ae)},getMaxIndexForBufferType:function(ae,se){return function(Q,Pe){var be,Fe,xe,he;if(!Q||!Pe)return-1;for(Fe=Q.AdaptationSet_asArray,he=0;he<Fe.length;he+=1)if(xe=(be=Fe[he]).Representation_asArray,P.getIsTypeOf(be,Pe))return xe.length;return-1}(Z(se),ae)},convertRepresentationToRepresentationInfo:function(ae){if(ae){var se=new Ll,Q=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Pe=P.getRepresentationFor(ae.index,Q);return se.id=ae.id,se.quality=ae.index,se.bandwidth=P.getBandwidth(Pe),se.fragmentDuration=ae.segmentDuration||(ae.segments&&ae.segments.length>0?ae.segments[0].duration:NaN),se.MSETimeOffset=ae.MSETimeOffset,se.mediaInfo=Ee(ae.adaptation),se}return null},getStreamsInfo:function(ae,se){var Q=[],Pe=V;if(ae&&(Ge(),Pe=me(ae)),Pe.length>0){(!se||se>Pe.length)&&(se=Pe.length);for(var be=0;be<se;be++)Q.push(Ae(Pe[be]))}return Q},getMediaInfoForType:function(ae,se){if(V.length===0||!ae)return null;var Q=$e(ae,V);if(!Q)return null;var Pe=P.getAdaptationsForPeriod(Q),be=ce(ae.index,se,ae);return be?Ee(Pe[P.getIndexForAdaptation(be,V[0].mpd.manifest,ae.index)]):null},getAllMediaInfoForType:ie,getAdaptationForType:ce,getRealAdaptation:function(ae,se){var Q,Pe,be=$e(ae,V);return Q=se?se.id:null,V.length>0&&be&&(Pe=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,be.index)),Pe},getProducerReferenceTimes:function(ae,se){var Q,Pe,be=$e(ae,V);return Q=se?se.id:null,V.length>0&&be&&(Pe=Q?P.getAdaptationForId(Q,V[0].mpd.manifest,be.index):P.getAdaptationForIndex(se?se.index:null,V[0].mpd.manifest,be.index)),Pe?P.getProducerReferenceTimesForAdaptation(Pe):[]},getRealPeriodByIndex:function(ae){return P.getRealPeriodForIndex(ae,V[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(ae){try{return P.getEssentialPropertiesForRepresentation(ae)}catch(se){return[]}},getVoRepresentations:function(ae){var se=Ze(ae);return P.getRepresentationsForAdaptation(se)},getEventsFor:function(ae,se,Q){var Pe=[];if(V.length>0){var be=V[0].mpd.manifest;if(ae instanceof Dr){var Fe=$e(ae,V);Pe=P.getEventsForPeriod(Fe)}else if(ae instanceof Mc){var xe=$e(Q,V);Pe=P.getEventStreamForAdaptationSet(be,Ze(ae),xe)}else if(ae instanceof Ll){var he=$e(Q,V);Pe=P.getEventStreamForRepresentation(be,se,he)}}return Pe},getEvent:function(ae,se,Q,Pe){try{if(!ae||!se||isNaN(Q)||!Pe)return null;var be=ae.scheme_id_uri,Fe=ae.value;if(!se[be+"/"+Fe])return null;var xe,he=new to,Ne=ae.timescale||1,Xe=Pe.adaptation.period.start,ht=se[be+"/"+Fe],lt=isNaN(Pe.presentationTimeOffset)?isNaN(ht.presentationTimeOffset)?0:ht.presentationTimeOffset:Pe.presentationTimeOffset,et=ae.presentation_time_delta/Ne;xe=ae.version===0?Xe+Q-lt+et:Xe-lt+et;var pt=ae.event_duration/Ne,jt=ae.id,Ht=ae.message_data;return he.eventStream=ht,he.eventStream.value=Fe,he.eventStream.timescale=Ne,he.duration=pt,he.id=jt,he.calculatedPresentationTime=xe,he.messageData=Ht,he.presentationTimeDelta=et,he}catch(Ft){return null}},getMpd:pe,setConfig:function(ae){ae&&(ae.constants&&(J=ae.constants),ae.cea608parser&&(H=ae.cea608parser),ae.errHandler&&P.setConfig({errHandler:ae.errHandler}),ae.BASE64&&P.setConfig({BASE64:ae.BASE64}))},updatePeriods:function(ae){if(!ae)return null;Ge(),V=me(ae)},getIsTextTrack:function(ae){return P.getIsText(ae)},getUTCTimingSources:function(){var ae=Oe();return P.getUTCTimingSources(ae)},getSuggestedPresentationDelay:function(){var ae=V.length>0?V[0].mpd:null;return P.getSuggestedPresentationDelay(ae)},getAvailabilityStartTime:function(ae){var se=pe(ae);return P.getAvailabilityStartTime(se)},getIsTypeOf:function(ae,se){return P.getIsTypeOf(ae,se)},getIsDynamic:function(ae){var se=Oe(ae);return P.getIsDynamic(se)},getDuration:function(ae){var se=Oe(ae);return P.getDuration(se)},getRegularPeriods:me,getContentSteering:function(ae){return P.getContentSteering(ae)},getLocation:function(ae){return P.getLocation(ae)},getPatchLocation:function(ae){var se=P.getPatchLocation(ae),Q=P.getPublishTime(ae);return se&&se.length!==0&&Q?se.filter(function(Pe){return isNaN(Pe.ttl)||Q.getTime()+Pe.ttl>new Date().getTime()}):[]},getManifestUpdatePeriod:function(ae){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return P.getManifestUpdatePeriod(ae,se)},getPublishTime:function(ae){return P.getPublishTime(ae)},getIsDVB:function(ae){return P.hasProfile(ae,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(ae){return B.getIsPatch(ae)},getBaseURLsFromElement:function(ae){return P.getBaseURLsFromElement(ae)},getRepresentationSortFunction:function(){return P.getRepresentationSortFunction()},getCodec:function(ae,se,Q){return P.getCodec(ae,se,Q)},getPeriodById:function(ae){if(!ae||V.length===0)return null;var se=V.filter(function(Q){return Q.id===ae});return se&&se.length>0?se[0]:null},setCurrentMediaInfo:function(ae,se,Q){ee[ae]=ee[ae]||{},ee[ae][se]=ee[ae][se]||{},ee[ae][se]=Q},isPatchValid:function(ae,se){var Q=P.getId(ae),Pe=B.getMpdId(se),be=P.getPublishTime(ae),Fe=B.getPublishTime(se),xe=B.getOriginalPublishTime(se);return!!(Q&&Pe&&Q==Pe&&be&&xe&&be.getTime()==xe.getTime()&&Fe&&be.getTime()<Fe.getTime())},applyPatchToManifest:function(ae,se){B.getPatchOperations(se).forEach(function(Q){var Pe=Q.getMpdTarget(ae);if(Pe!==null){var be=Pe.name,Fe=Pe.target,xe=Pe.leaf;if(Q.xpath.findsAttribute()||be==="__text")switch(Q.action){case"add":case"replace":Fe[be]=Q.value;break;case"remove":delete Fe[be]}else{var he=(Fe[be+"_asArray"]||[]).indexOf(xe),Ne=Q.position==="prepend"||Q.position==="before";if((Q.action==="remove"||Q.action==="replace")&&(delete Fe[be],he!=-1)){var Xe=Fe[be+"_asArray"];Xe.splice(he,1),Xe.length>1?Fe[be]=Xe:Xe.length==1?Fe[be]=Xe[0]:delete Fe[be+"_asArray"]}Q.action!=="add"&&Q.action!=="replace"||Object.keys(Q.value).forEach(function(ht){var lt=Q.value[ht],et=Fe[ht+"_asArray"]||[];if(et.length===0&&Fe[ht]&&et.push(Fe[ht]),et.length===0)et=lt;else{var pt=et.length;pt=ht==be&&he!=-1?he+(Ne?0:1)+(Q.action=="replace"?-1:0):Ne?0:et.length,et.splice.apply(et,[pt,0].concat(lt))}Fe[ht+"_asArray"]=et,Fe[ht]=et.length==1?et[0]:et})}}})},areMediaInfosEqual:we,reset:He},P=Vn(ne).getInstance(),B=Yh(ne).getInstance(),He(),L}$u.__dashjs_factory_name="DashAdapter";var Nm=F.Z.getSingletonFactory($u);function Kf(L,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(L,V.key,V)}}var kl=function(){function L(){(function(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,L)}var P,B;return P=L,B=[{key:"round10",value:function(V,ee){return function(J,H,ne){return ne===void 0||+ne==0?Math[J](H):(ne=+ne,(H=+H)===null||isNaN(H)||typeof ne!="number"||ne%1!=0?NaN:(H=H.toString().split("e"),+((H=(H=Math[J](+(H[0]+"e"+(H[1]?+H[1]-ne:-ne)))).toString().split("e"))[0]+"e"+(H[1]?+H[1]+ne:ne))))}("round",V,ee)}}],B&&Kf(P,B),L}(),NE=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},Mm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},Dm=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},Vf=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=D.Z.BUFFER_EMPTY},Wh=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},Fl=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Dc(L,P){if(!(L instanceof P))throw new TypeError("Cannot call a class as a function")}var ME=function L(){Dc(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},zf=function L(){Dc(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},DE=function L(){Dc(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Wr=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Ci=function L(){(function(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function vu(L){var P,B,V=(L=L||{}).settings,ee=this.context,J=(0,m.Z)(ee).getInstance();function H(){J.trigger(T.Z.METRICS_CHANGED)}function ne(pe){J.trigger(T.Z.METRIC_CHANGED,{mediaType:pe}),H()}function ce(pe,He,Oe){J.trigger(T.Z.METRIC_UPDATED,{mediaType:pe,metric:He,value:Oe}),ne(pe)}function we(pe,He,Oe){J.trigger(T.Z.METRIC_ADDED,{mediaType:pe,metric:He,value:Oe}),ne(pe)}function ye(pe,He){var Oe=null;return pe&&(B.hasOwnProperty(pe)?Oe=B[pe]:He||(Oe=new NE,B[pe]=Oe)),Oe}function ie(pe,He,Oe){var Ze=ye(pe);Ze!==null&&(Ze[He].push(Oe),Ze[He].length>V.get().streaming.metrics.maxListDepth&&Ze[He].shift())}function me(pe,He,Oe){ie(pe,He,Oe),we(pe,He,Oe)}return P={clearCurrentMetricsForType:function(pe){delete B[pe],ne(pe)},clearAllCurrentMetrics:function(){B={},H()},getMetricsFor:ye,addHttpRequest:function pe(He,Oe,Ze,$e,Ee,ke,Ae,Ge,Z,le,ae,se,Q,Pe,be,Fe,xe){var he=new ot.w;ke!=null&&ke!==$e&&(pe(He,null,Ze,$e,Ee,null,null,Ge,Z,null,null,null,Q,null,null,Fe,xe),he.actualurl=ke),he.tcpid=Oe,he.type=Ze,he.url=$e,he.range=Ge,he.trequest=Z,he.tresponse=le,he.responsecode=se,he.cmsd=xe,he._tfinish=ae,he._stream=He,he._mediaduration=Q,he._quality=Ee,he._responseHeaders=Pe,he._serviceLocation=Ae,he._fileLoaderType=Fe,be?be.forEach(function(Ne){(function(Xe,ht,lt,et){var pt=new ot.O;pt.s=ht,pt.d=lt,pt.b=et,Xe.trace.push(pt),Xe.interval||(Xe.interval=0),Xe.interval+=lt})(he,Ne.s,Ne.d,Ne.b)}):(delete he.interval,delete he.trace),me(He,D.Z.HTTP_REQUEST,he)},addRepresentationSwitch:function(pe,He,Oe,Ze,$e){var Ee=new Mm;Ee.t=He,Ee.mt=Oe,Ee.to=Ze,$e?Ee.lto=$e:delete Ee.lto,me(pe,D.Z.TRACK_SWITCH,Ee)},addBufferLevel:function(pe,He,Oe){var Ze=new Dm;Ze.t=He,Ze.level=Oe,me(pe,D.Z.BUFFER_LEVEL,Ze)},addBufferState:function(pe,He,Oe){var Ze=new Vf;Ze.target=Oe,Ze.state=He,me(pe,D.Z.BUFFER_STATE,Ze)},addDVRInfo:function(pe,He,Oe,Ze){var $e=new Wh;$e.time=He,$e.range=Ze,$e.manifestInfo=Oe,me(pe,D.Z.DVR_INFO,$e)},addDroppedFrames:function(pe,He){var Oe=new Fl,Ze=ye(pe).DroppedFrames;He&&(Oe.time=He.creationTime,Oe.droppedFrames=He.droppedVideoFrames,Ze.length>0&&Ze[Ze.length-1]==Oe||me(pe,D.Z.DROPPED_FRAMES,Oe))},addSchedulingInfo:function(pe,He,Oe,Ze,$e,Ee,ke,Ae,Ge){var Z=new Wr;Z.mediaType=pe,Z.t=He,Z.type=Oe,Z.startTime=Ze,Z.availabilityStartTime=$e,Z.duration=Ee,Z.quality=ke,Z.range=Ae,Z.state=Ge,me(pe,D.Z.SCHEDULING_INFO,Z)},addRequestsQueue:function(pe,He,Oe){var Ze=new Ci;Ze.loadingRequests=He,Ze.executedRequests=Oe,ye(pe).RequestsQueue=Ze,we(pe,D.Z.REQUESTS_QUEUE,Ze)},addManifestUpdate:function(pe,He,Oe,Ze,$e,Ee,ke,Ae,Ge,Z){var le=new ME;le.mediaType=pe,le.type=He,le.requestTime=Oe,le.fetchTime=Ze,le.availabilityStartTime=$e,le.presentationStartTime=Ee,le.clientTimeOffset=ke,le.currentTime=Ae,le.buffered=Ge,le.latency=Z,ie(y.Z.STREAM,D.Z.MANIFEST_UPDATE,le),we(pe,D.Z.MANIFEST_UPDATE,le)},updateManifestUpdateInfo:function(pe,He){if(pe){for(var Oe in He)pe[Oe]=He[Oe];ce(pe.mediaType,D.Z.MANIFEST_UPDATE,pe)}},addManifestUpdateStreamInfo:function(pe,He,Oe,Ze,$e){if(pe){var Ee=new zf;Ee.id=He,Ee.index=Oe,Ee.start=Ze,Ee.duration=$e,pe.streamInfo.push(Ee),ce(pe.mediaType,D.Z.MANIFEST_UPDATE_STREAM_INFO,pe)}},addManifestUpdateRepresentationInfo:function(pe,He,Oe,Ze,$e,Ee,ke,Ae){if(pe&&pe.representationInfo){var Ge=new DE;Ge.id=He,Ge.index=Oe,Ge.streamIndex=Ze,Ge.mediaType=$e,Ge.startNumber=ke,Ge.fragmentInfoType=Ae,Ge.presentationTimeOffset=Ee,pe.representationInfo.push(Ge),ce(pe.mediaType,D.Z.MANIFEST_UPDATE_TRACK_INFO,pe)}},addPlayList:function(pe){pe.trace&&Array.isArray(pe.trace)?pe.trace.forEach(function(He){He.hasOwnProperty("subreplevel")&&!He.subreplevel&&delete He.subreplevel}):delete pe.trace,me(y.Z.STREAM,D.Z.PLAY_LIST,pe)},addDVBErrors:function(pe){me(y.Z.STREAM,D.Z.DVB_ERRORS,pe)}},B={},P}vu.__dashjs_factory_name="MetricsModel";var Ca=F.Z.getSingletonFactory(vu);function la(L){L=L||{};var P,B,V,ee,J=this.context,H=L.metricsModel;function ne(ye){var ie=H.getMetricsFor(ye,!0);if(!ie)return null;var me,pe=ie.HttpList,He=null;if(!pe||pe.length<=0)return null;for(me=pe.length-1;me>=0;){if(pe[me].responsecode){He=pe[me];break}me--}return He}function ce(ye){var ie=H.getMetricsFor(ye,!0);return ie&&ie.HttpList?ie.HttpList:[]}function we(ye,ie){if(!ye)return null;var me=ye[ie];return me&&me.length!==0?me[me.length-1]:null}return P={getCurrentRepresentationSwitch:function(ye){return we(H.getMetricsFor(ye,!0),D.Z.TRACK_SWITCH)},getCurrentBufferState:function(ye){return we(H.getMetricsFor(ye,!0),D.Z.BUFFER_STATE)},getCurrentBufferLevel:function(ye){var ie=we(H.getMetricsFor(ye,!0),D.Z.BUFFER_LEVEL);return ie?kl.round10(ie.level/1e3,-3):0},getCurrentHttpRequest:ne,getHttpRequests:ce,getCurrentDroppedFrames:function(){return we(H.getMetricsFor(y.Z.VIDEO,!0),D.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(ye){return we(H.getMetricsFor(ye,!0),D.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(ye){return we(ye?H.getMetricsFor(ye,!0):H.getMetricsFor(y.Z.VIDEO,!0)||H.getMetricsFor(y.Z.AUDIO,!0),D.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return we(H.getMetricsFor(y.Z.STREAM),D.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(ye,ie){if(!ie)return null;var me={},pe=ne(ye);pe&&(me=rn.Z.parseHttpHeaders(pe._responseHeaders));var He=me[ie.toLowerCase()];return He===void 0?null:He},getLatestMPDRequestHeaderValueByID:function(ye){if(!ye)return null;var ie,me,pe,He={};for(pe=(ie=ce(y.Z.STREAM)).length-1;pe>=0;pe--)if((me=ie[pe]).type===ot.w.MPD_TYPE){He=rn.Z.parseHttpHeaders(me._responseHeaders);break}var Oe=He[ye.toLowerCase()];return Oe===void 0?null:Oe},addRepresentationSwitch:function(ye,ie,me,pe,He){H.addRepresentationSwitch(ye,ie,me,pe,He)},addDVRInfo:function(ye,ie,me,pe){H.addDVRInfo(ye,ie,me,pe)},updateManifestUpdateInfo:function(ye){var ie=this.getCurrentManifestUpdate();H.updateManifestUpdateInfo(ie,ye)},addManifestUpdateStreamInfo:function(ye){if(ye){var ie=this.getCurrentManifestUpdate();H.addManifestUpdateStreamInfo(ie,ye.id,ye.index,ye.start,ye.duration)}},addManifestUpdateRepresentationInfo:function(ye,ie){if(ye){var me=this.getCurrentManifestUpdate();H.addManifestUpdateRepresentationInfo(me,ye.id,ye.index,ye.streamIndex,ie,ye.presentationTimeOffset,ye.startNumber,ye.fragmentInfoType)}},addManifestUpdate:function(ye){H.addManifestUpdate(y.Z.STREAM,ye.type,ye.requestStartDate,ye.requestEndDate)},addHttpRequest:function(ye,ie,me,pe,He,Oe){H.addHttpRequest(ye.mediaType,null,ye.type,ye.url,ye.quality,ie,ye.serviceLocation||null,ye.range||null,ye.requestStartDate,ye.firstByteDate,ye.requestEndDate,me,ye.duration,pe,He,ye.fileLoaderType,Oe)},addSchedulingInfo:function(ye,ie){H.addSchedulingInfo(ye.mediaType,new Date,ye.type,ye.startTime,ye.availabilityStartTime,ye.duration,ye.quality,ye.range,ie)},addRequestsQueue:function(ye,ie,me){H.addRequestsQueue(ye,ie,me)},addBufferLevel:function(ye,ie,me){H.addBufferLevel(ye,ie,me)},addBufferState:function(ye,ie,me){H.addBufferState(ye,ie,me)},addDroppedFrames:function(ye){H.addDroppedFrames(y.Z.VIDEO,ye)},addPlayList:function(){ee&&(H.addPlayList(ee),ee=null)},addDVBErrors:function(ye){H.addDVBErrors(ye)},createPlaylistMetrics:function(ye,ie){(ee=new at).start=new Date,ee.mstart=ye,ee.starttype=ie},createPlaylistTraceMetrics:function(ye,ie,me){B===!0&&(B=!1,(V=new tt).representationid=ye,V.start=new Date,V.mstart=ie,V.playbackspeed=me!==null?me.toString():null)},updatePlayListTraceMetrics:function(ye){if(V)for(var ie in V)V[ie]=ye[ie]},pushPlayListTraceMetrics:function(ye,ie){if(B===!1&&ee&&V&&V.start){var me=V.start,pe=ye.getTime()-me.getTime();V.duration=pe,V.stopreason=ie,ee.trace.push(V),B=!0}},clearAllCurrentMetrics:function(){H.clearAllCurrentMetrics()}},H=H||Ca(J).getInstance({settings:L.settings}),B=!0,V=null,ee=null,P}la.__dashjs_factory_name="DashMetrics";var Fs=F.Z.getSingletonFactory(la);function _r(){var L,P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,Be.Z)(ee).getInstance();function ne($e){V=$e}function ce($e,Ee,ke,Ae){var Ge,Z=Ee.adaptation.period.mpd,le=Z.availabilityStartTime;if(Ae)Ge=ke&&Z.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*($e+Z.timeShiftBufferDepth)):Z.availabilityEndTime;else if(ke){var ae=Ee.availabilityTimeOffset;Ge=new Date(le.getTime()+1e3*($e-ae))}else Ge=le;return Ge}function we($e,Ee){return($e.getTime()-Ee.mpd.availabilityStartTime.getTime()+1e3*V)/1e3}function ye($e,Ee){return $e+(Ee.adaptation.period.start-Ee.presentationTimeOffset)}function ie($e){var Ee={start:NaN,end:NaN},ke=$e[0].getAdapter().getRegularPeriods()[0],Ae=we(new Date,ke);if(!$e||$e.length===0)return{range:Ee,now:Ae};$e.forEach(function(Z){var le=Z.getAdapter(),ae=le.getMediaInfoForType(Z.getStreamInfo(),y.Z.VIDEO)||le.getMediaInfoForType(Z.getStreamInfo(),y.Z.AUDIO),se=le.getVoRepresentations(ae)[0],Q={start:NaN,end:NaN};if(se)if(se.segmentInfoType===v.Z.SEGMENT_TIMELINE)Q=function(be){var Fe,xe,he,Ne,Xe=be.adaptation.period.mpd.manifest.Period_asArray[be.adaptation.period.index].AdaptationSet_asArray[be.adaptation.index],ht=P.getRepresentationFor(be.index,Xe),lt=ht.SegmentTemplate||ht.SegmentList,et=lt.SegmentTimeline,pt=lt.timescale,jt=et.S_asArray,Ht={start:0,end:0},Ft=jt[0].t,Ut=!isNaN(Ft),An=Ut?Ft:0,it=0;for(Ut&&(Ht.start=ye(An/pt,be)),he=0,Ne=jt.length;he<Ne;he++)xe=0,(Fe=jt[he]).hasOwnProperty("r")&&(xe=Fe.r),it+=Fe.d*(1+xe);return Ht.end=ye((An+it)/pt,be),Ht}(se);else{var Pe=se.adaptation.period;Q.start=Pe.start,Q.end=Math.max(Ae,Pe.start+Pe.duration)}!isNaN(Q.start)&&(isNaN(Ee.start)||Ee.start>Q.start)&&(Ee.start=Q.start),!isNaN(Q.end)&&(isNaN(Ee.end)||Ee.end<Q.end)&&(Ee.end=Q.end)}),Ee.end=Math.min(Ae,Ee.end);var Ge=pe($e,Ee.end,!0);return Ee.end=isNaN(Ge)?Ee.end:Ge,Ee.start=ke&&ke.mpd&&ke.mpd.timeShiftBufferDepth&&!isNaN(ke.mpd.timeShiftBufferDepth)&&!isNaN(Ee.end)?Math.max(Ee.end-ke.mpd.timeShiftBufferDepth,Ee.start):Ee.start,Ee.start=pe($e,Ee.start),{range:Ee,now:Ae}}function me($e,Ee){B=$e-Ee.end}function pe($e,Ee){var ke=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var Ae=0,Ge=!1,Z=NaN;!Ge&&Ae<$e.length;){var le=$e[Ae].getStreamInfo();le.start<=Ee&&(!isFinite(le.duration)||le.start+le.duration>=Ee)?(Z=Ee,Ge=!0):!ke&&le.start>Ee&&(isNaN(Z)||le.start<Z)?Z=le.start:ke&&le.start+le.duration<Ee&&(isNaN(Z)||le.start+le.duration>Z)&&(Z=le.start+le.duration),Ae+=1}return Z}catch(ae){return Ee}}function He($e){$e.offset===void 0||isNaN($e.offset)||ne($e.offset/1e3)}function Oe(){V=0,B=0}function Ze(){J.off(T.Z.UPDATE_TIME_SYNC_OFFSET,He,this),Oe()}return L={initialize:function(){Oe(),J.on(T.Z.UPDATE_TIME_SYNC_OFFSET,He,this)},getClientTimeOffset:function(){return V},setClientTimeOffset:ne,getClientReferenceTime:function(){return Date.now()-1e3*B+1e3*V},calcAvailabilityStartTimeFromPresentationTime:function($e,Ee,ke){return ce($e,Ee,ke)},calcAvailabilityEndTimeFromPresentationTime:function($e,Ee,ke){return ce($e,Ee,ke,!0)},calcPresentationTimeFromWallTime:we,calcPresentationTimeFromMediaTime:ye,calcPeriodRelativeTimeFromMpdRelativeTime:function($e,Ee){return Ee-$e.adaptation.period.start},calcMediaTimeFromPresentationTime:function($e,Ee){return $e-Ee.adaptation.period.start+Ee.presentationTimeOffset},calcWallTimeForSegment:function($e,Ee){var ke,Ae,Ge;return Ee&&(ke=$e.representation.adaptation.period.mpd.suggestedPresentationDelay,Ae=$e.presentationStartTime+ke,Ge=new Date($e.availabilityStartTime.getTime()+1e3*Ae)),Ge},calcTimeShiftBufferWindow:function($e,Ee){if(!Ee)return function(Ae){var Ge={start:NaN,end:NaN},Z=0,le=NaN;return Ae.forEach(function(ae){var se=ae.getStreamInfo();Z+=se.duration,(isNaN(le)||se.start<le)&&(le=se.start)}),Ge.start=le,Ge.end=le+Z,Ge}($e);if(H.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ke=ie($e);return me(ke.now,ke.range),ke.range}return function(Ae){var Ge={start:NaN,end:NaN};if(!Ae||Ae.length===0)return Ge;var Z=Ae[0].getAdapter().getRegularPeriods()[0],le=we(new Date,Z),ae=Z.mpd.timeShiftBufferDepth,se=isNaN(ae)?0:le-ae;if(Ge.start=pe(Ae,se),Ge.end=!isNaN(Ge.start)&&le<Ge.start?le:pe(Ae,le,!0),!isNaN(ae)&&Ge.end<le-ae&&(Ge.end=NaN),H.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var Q=ie(Ae);if(Q.range.end<Ge.start)return J.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.WARNING,event:Pi.EVENTS.INVALID_DVR_WINDOW}),me(Q.now,Q.range),Q.range}return Ge}($e)},reset:Ze},P=Vn(ee).getInstance(),Ze(),L}_r.__dashjs_factory_name="TimelineConverter";var yu=F.Z.getSingletonFactory(_r),Yf=A(4593),ca=A(6934);function Wf(L){return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},Wf(L)}function $a(L,P){return $a=Object.setPrototypeOf||function(B,V){return B.__proto__=V,B},$a(L,P)}function $f(L,P){return!P||Wf(P)!=="object"&&typeof P!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(L):P}function Xu(L){return Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},Xu(L)}var Us=function(L){(function(J,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(H&&H.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),H&&$a(J,H)})(ee,L);var P,B,V=(P=ee,B=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(J){return!1}}(),function(){var J,H=Xu(P);if(B){var ne=Xu(this).constructor;J=Reflect.construct(H,arguments,ne)}else J=H.apply(this,arguments);return $f(this,J)});function ee(){var J;return function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")}(this,ee),(J=V.call(this)).captionData=null,J.label=null,J.defaultTrack=!1,J.kind=null,J.isFragmented=!1,J.isEmbedded=!1,J.isTTML=null,J}return ee}(Mc),Ro=A(2295);function Pc(){var L=0;function P(ne){for(var ce="",we=0;we<ne.length;++we)ce+=ne[we].uchar;return ce.length-ce.replace(/^\s+/,"").length}function B(ne){return"left: "+3.125*ne.x+"%; top: "+6.66*ne.y1+"%; width: "+(100-3.125*ne.x)+"%; height: "+6.66*Math.max(ne.y2-1-ne.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function V(ne){return ne==="red"?"rgb(255, 0, 0)":ne==="green"?"rgb(0, 255, 0)":ne==="blue"?"rgb(0, 0, 255)":ne==="cyan"?"rgb(0, 255, 255)":ne==="magenta"?"rgb(255, 0, 255)":ne==="yellow"?"rgb(255, 255, 0)":ne==="white"?"rgb(255, 255, 255)":ne==="black"?"rgb(0, 0, 0)":ne}function ee(ne,ce){var we=ne.videoHeight/15;return ce?"font-size: "+we+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(ce.foreground?V(ce.foreground):"rgb(255, 255, 255)")+"; font-style: "+(ce.italics?"italic":"normal")+"; text-decoration: "+(ce.underline?"underline":"none")+"; white-space: pre; background-color: "+(ce.background?V(ce.background):"transparent")+";":"font-size: "+we+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function J(ne){return ne.replace(/^\s+/g,"")}function H(ne){return ne.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(ne,ce,we,ye){var ie,me,pe=null,He=!1,Oe=-1,Ze={start:ce,end:we,spans:[]},$e="style_cea608_white_black",Ee={},ke={},Ae=[];for(ie=0;ie<15;++ie){var Ge=ye.rows[ie],Z="",le=null;if(Ge.isEmpty()===!1){var ae=P(Ge.chars);pe===null&&(pe={x:ae,y1:ie,y2:ie+1,p:[]}),ae!==Oe&&He&&(pe.p.push(Ze),Ze={start:ce,end:we,spans:[]},pe.y2=ie,pe.name="region_"+pe.x+"_"+pe.y1+"_"+pe.y2,Ee.hasOwnProperty(pe.name)===!1?(Ae.push(pe),Ee[pe.name]=pe):Ee[pe.name].p.contat(pe.p),pe={x:ae,y1:ie,y2:ie+1,p:[]});for(var se=0;se<Ge.chars.length;++se){var Q=Ge.chars[se],Pe=Q.penState;if(le===null||!Pe.equals(le)){Z.trim().length>0&&(Ze.spans.push({name:$e,line:Z,row:ie}),Z="");var be="style_cea608_"+Pe.foreground+"_"+Pe.background;Pe.underline&&(be+="_underline"),Pe.italics&&(be+="_italics"),ke.hasOwnProperty(be)||(ke[be]=JSON.parse(JSON.stringify(Pe))),le=Pe,$e=be}Z+=Q.uchar}Z.trim().length>0&&Ze.spans.push({name:$e,line:Z,row:ie}),He=!0,Oe=ae}else He=!1,Oe=-1,pe&&(pe.p.push(Ze),Ze={start:ce,end:we,spans:[]},pe.y2=ie,pe.name="region_"+pe.x+"_"+pe.y1+"_"+pe.y2,Ee.hasOwnProperty(pe.name)===!1?(Ae.push(pe),Ee[pe.name]=pe):Ee[pe.name].p.contat(pe.p),pe=null)}pe&&(pe.p.push(Ze),pe.y2=ie+1,pe.name="region_"+pe.x+"_"+pe.y1+"_"+pe.y2,Ee.hasOwnProperty(pe.name)===!1?(Ae.push(pe),Ee[pe.name]=pe):Ee[pe.name].p.contat(pe.p),pe=null);var Fe=[];for(ie=0;ie<Ae.length;++ie){var xe=Ae[ie],he="sub_cea608_"+L++,Ne=document.createElement("div");Ne.id=he;var Xe=B(xe);Ne.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+Xe;var ht=document.createElement("div");ht.className="paragraph bodyStyle",ht.style.cssText=ee(ne);var lt=document.createElement("div");lt.className="cueUniWrapper",lt.style.cssText="unicode-bidi: normal; direction: ltr;";for(var et=0;et<xe.p.length;++et){var pt=xe.p[et],jt=0;for(me=0;me<pt.spans.length;++me){var Ht=pt.spans[me];if(Ht.line.length>0){if(me!==0&&jt!=Ht.row){var Ft=document.createElement("br");Ft.className="lineBreak",lt.appendChild(Ft)}var Ut=!1;jt===Ht.row&&(Ut=!0),jt=Ht.row;var An=ke[Ht.name],it=document.createElement("span");it.className="spanPadding "+Ht.name+" customSpanColor",it.style.cssText=ee(ne,An),me!==0&&Ut?me===pt.spans.length-1?it.textContent=H(Ht.line):it.textContent=Ht.line:pt.spans.length>1&&me<pt.spans.length-1&&Ht.row===pt.spans[me+1].row?it.textContent=J(Ht.line):it.textContent=Ht.line.trim(),lt.appendChild(it)}}}ht.appendChild(lt),Ne.appendChild(ht);var yt={bodyStyle:["%",90]};for(var $t in ke)ke.hasOwnProperty($t)&&(yt[$t]=["%",90]);Fe.push({type:"html",start:ce,end:we,cueHTMLElement:Ne,cueID:he,cellResolution:[32,15],isFromCEA608:!0,fontSize:yt,lineHeight:{},linePadding:{}})}return Fe}}}Pc.__dashjs_factory_name="EmbeddedTextHtmlRender";var $h=F.Z.getSingletonFactory(Pc);function Pm(L){var P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze,$e,Ee=L.errHandler,ke=L.manifestModel,Ae=L.mediaController,Ge=L.videoModel,Z=L.textTracks,le=L.vttParser,ae=L.vttCustomRenderingParser,se=L.ttmlParser,Q=L.streamInfo,Pe=L.settings,be=this.context,Fe=(0,m.Z)(be).getInstance(),xe=!1;function he(){H=null,ce=NaN,we=[],ye=null,ne=!1,J=[],ee=null}function Ne(Ft){var Ut=new Us;for(var An in Ft)Ut[An]=Ft[An];Ut.labels=Ft.labels,Ut.defaultTrack=function(it){var yt=!1;return me.length>1&&it.isEmbedded?yt=it.id&&it.id===y.Z.CC1:me.length===1?it.id&&typeof it.id=="string"&&it.id.substring(0,2)==="CC"&&(yt=!0):me.length===0&&(yt=it.index===J[0].index),yt}(Ft),Ut.isFragmented=Ft.isFragmented,Ut.isEmbedded=!!Ft.isEmbedded,Ut.isTTML=function(it){return it.codec&&it.codec.search(y.Z.STPP)>=0||it.mimeType&&it.mimeType.search(y.Z.TTML)>=0}(Ft),Ut.kind=function(it,yt){var $t=it.roles&&it.roles.length>0?yt[it.roles[0]]:yt.caption;return $t=$t===yt.caption||$t===yt.subtitle?$t:yt.caption}(Ft,{subtitle:"subtitles",caption:"captions"}),Z.addTextTrack(Ut)}function Xe(Ft){var Ut=Ft.chunk;Ut.mediaInfo.embeddedCaptions&&lt(Ut.bytes,Ut)}function ht(Ft){ie=Ft}function lt(Ft,Ut){var An=Ut.mediaInfo,it=An.type,yt=An.mimeType,$t=An.codec||yt;$t?An.codec.indexOf("application/mp4")!==-1?function(Nt,en,Jt){var Wt;if(en.segmentType==="InitializationSegment")ne=!0,ce=V.getMediaTimescaleFromMoov(Nt);else{if(!ne)return;(Wt=V.getSamplesInfo(Nt).sampleList).length>0&&(ye=Wt[0].cts-en.start*ce),Jt.search(y.Z.STPP)>=0?function(Dn,xn,rr){var ir,bt;for(ee=ee!==null?ee:jt(rr),ir=0;ir<xn.length;ir++){var Xt=xn[ir],Gt=Xt.cts,un=pt(),vn=un+Gt/ce,Pn=vn+Xt.duration/ce;P.buffered.add(vn,Pn);var Nn=new DataView(Dn,Xt.offset,Xt.subSizes[0]),Fn=ca.Utils.dataViewToString(Nn,y.Z.UTF8),Gn=[],Ct=Xt.offset+Xt.subSizes[0];for(bt=1;bt<Xt.subSizes.length;bt++){var Sn=new Uint8Array(Dn,Ct,Xt.subSizes[bt]),En=String.fromCharCode.apply(null,Sn);Gn.push(En),Ct+=Xt.subSizes[bt]}try{var Lt=ke.getValue().ttmlTimeIsRelative?Gt/ce:0,On=ee.parse(Fn,Lt,Gt/ce,(Gt+Xt.duration)/ce,Gn);Z.addCaptions(ie,un,On)}catch(ct){H.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+ct.message)}}}(Nt,Wt,Jt):function(Dn,xn){var rr,ir,bt,Xt=[];for(rr=0;rr<xn.length;rr++){var Gt=xn[rr];Gt.cts-=ye;var un=pt()+Gt.cts/ce,vn=un+Gt.duration/ce;P.buffered.add(un,vn);var Pn=Dn.slice(Gt.offset,Gt.offset+Gt.size),Nn=ca.parseBuffer(Pn);for(ir=0;ir<Nn.boxes.length;ir++){var Fn=Nn.boxes[ir];if(B.debug("VTT box1: "+Fn.type),Fn.type!=="vtte"&&Fn.type==="vttc"){B.debug("VTT vttc boxes.length = "+Fn.boxes.length);var Gn={styles:{}};for(bt=0;bt<Fn.boxes.length;bt++){var Ct=Fn.boxes[bt];if(B.debug("VTT box2: "+Ct.type),Ct.type==="payl")Gn.start=Gt.cts/ce,Gn.end=(Gt.cts+Gt.duration)/ce,Gn.data=Ct.cue_text;else if(Ct.type==="sttg"&&Ct.settings&&Ct.settings!=="")try{var Sn=Ct.settings.split(" ");Gn.styles=le.getCaptionStyles(Sn)}catch(En){}}Gn&&Gn.data&&(Xt.push(Gn),B.debug("VTT  ".concat(Gn.start," - ").concat(Gn.end," :  ").concat(Gn.data)))}}}Xt.length>0&&Z.addCaptions(ie,0,Xt)}(Nt,Wt)}}(Ft,Ut,$t):it===y.Z.VIDEO?function(Nt,en){var Jt,Wt;if(en.segmentType===ot.w.INIT_SEGMENT_TYPE)pe===0&&(pe=V.getMediaTimescaleFromMoov(Nt));else if(en.segmentType===ot.w.MEDIA_SEGMENT_TYPE){if(pe===0)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var Dn=(Wt=V.getSamplesInfo(Nt)).lastSequenceNumber,xn=Math.trunc(en.start),rr=Math.trunc(en.end);if(Ze[0]||Ze[1]||function(){for(var un,vn=0;vn<me.length;vn++){if((un=Z.getTrackIdxForId(me[vn].id))===-1)return void B.warn("CEA-608: data before track is ready.");var Pn=et(un);Ze[vn]=new(C()).Cea608Parser(vn+1,{newCue:Pn},null)}}(),pe){if(function(un,vn,Pn,Nn,Fn){return un!==null&&vn!==null&&Nn!==null&&Fn!==null&&(vn===un?Nn!==Fn:vn!==un+Pn)}(He,Dn,Wt.numSequences,Oe,xn))for(Jt=0;Jt<Ze.length;Jt++)Ze[Jt]&&Ze[Jt].reset();for(var ir=function(un,vn){if(vn.length===0)return null;for(var Pn={splits:[],fields:[[],[]]},Nn=new DataView(un),Fn=0;Fn<vn.length;Fn++)for(var Gn=vn[Fn],Ct=C().findCea608Nalus(Nn,Gn.offset,Gn.size),Sn=null,En=0,Lt=0;Lt<Ct.length;Lt++)for(var On=C().extractCea608DataFromRange(Nn,Ct[Lt]),ct=0;ct<2;ct++)if(On[ct].length>0){Gn.cts!==Sn?En=0:En+=1;var nt=pt();Pn.fields[ct].push([Gn.cts+nt*pe,On[ct],En]),Sn=Gn.cts}return Pn.fields.forEach(function(Kt){Kt.sort(function(ze,Ve){return ze[0]===Ve[0]?ze[2]-Ve[2]:ze[0]-Ve[0]})}),Pn}(Nt,Wt.sampleList),bt=0;bt<Ze.length;bt++){var Xt=ir.fields[bt],Gt=Ze[bt];if(Gt)for(Jt=0;Jt<Xt.length;Jt++)Gt.addData(Xt[Jt][0]/pe,Xt[Jt][1])}He=Dn,Oe=rr}}}(Ft,Ut):function(Nt,en,Jt){var Wt,Dn,xn=new DataView(Nt,0,Nt.byteLength);Dn=ca.Utils.dataViewToString(xn,y.Z.UTF8);try{Wt=jt(Jt).parse(Dn,0),Z.addCaptions(Z.getCurrentTrackIdx(),0,Wt),P.buffered&&P.buffered.add(en.start,en.end)}catch(rr){Ee.error(new fe.Z(Se.TIMED_TEXT_ERROR_ID_PARSE_CODE,Se.TIMED_TEXT_ERROR_MESSAGE_PARSE+rr.message,Dn))}}(Ft,Ut,$t):B.error("No text type defined")}function et(Ft){return function(Ut,An,it){var yt;(yt=Ge.getTTMLRenderingDiv()?$e.createHTMLCaptionsFromScreen(Ge.getElement(),Ut,An,it):[{start:Ut,end:An,data:it.getDisplayText(),styles:{}}])&&Z.addCaptions(Ft,0,yt)}}function pt(){return isNaN(P.timestampOffset)?0:P.timestampOffset}function jt(Ft){var Ut;return Ft.search(y.Z.VTT)>=0?Ut=Pe.get().streaming.text.webvtt.customRenderingEnabled&&ae?ae:le:(Ft.search(y.Z.TTML)>=0||Ft.search(y.Z.STPP)>=0)&&(Ut=se),Ut}function Ht(Ft){me.forEach(function(Ut){var An=Z.getTrackIdxForId(Ut.id);An>=0&&Z.deleteCuesFromTrackIdx(An,Ft.from,Ft.to)})}return P={initialize:function(){xe||(me=[],ie=null,pe=0,Ze=[],He=null,Oe=null,xe=!0,$e=$h(be).getInstance(),Fe.on(T.Z.VIDEO_CHUNK_RECEIVED,Xe,P),Fe.on(T.Z.BUFFER_CLEARED,Ht,P))},addMediaInfos:function(Ft,Ut,An){if(J=J.concat(Ut),Ft===y.Z.TEXT&&Ut[0].isFragmented&&!Ut[0].isEmbedded){H=An,P.buffered=(0,Ro.Z)(be).create(),we=Ae.getTracksFor(y.Z.TEXT,Q.id).filter(function(Nt){return Nt.isFragmented});for(var it=Ae.getCurrentTrackFor(y.Z.TEXT,Q.id),yt=0;yt<we.length;yt++)if(we[yt]===it){ht(yt);break}}for(var $t=0;$t<Ut.length;$t++)Ne(Ut[$t])},resetMediaInfos:function(){J=[]},getStreamId:function(){return Q.id},append:lt,abort:function(){},addEmbeddedTrack:function(Ft){if(xe&&Ft)if(Ft.id===y.Z.CC1||Ft.id===y.Z.CC3){for(var Ut=0;Ut<me.length;Ut++)if(me[Ut].id===Ft.id)return;me.push(Ft)}else B.warn("Embedded track "+Ft.id+" not supported!")},resetEmbedded:function(){Fe.off(T.Z.VIDEO_CHUNK_RECEIVED,Xe,P),Fe.off(T.Z.BUFFER_CLEARED,Ht,P),Z&&Z.deleteAllTextTracks(),xe=!1,me=[],Ze=[null,null],He=null,Oe=null},getConfig:function(){return{fragmentModel:H,fragmentedTracks:we,videoModel:Ge}},setCurrentFragmentedTrackIdx:ht,remove:function(Ft,Ut){Ft===void 0&&Ft===Ut&&(Ft=P.buffered.start(0),Ut=P.buffered.end(P.buffered.length-1)),P.buffered.remove(Ft,Ut),Z.deleteCuesFromTrackIdx(ie,Ft,Ut)},reset:function(){he(),J=[],V=null}},B=(0,N.Z)(be).getInstance().getLogger(P),V=(0,aa.Z)(be).getInstance(),he(),P}Pm.__dashjs_factory_name="TextSourceBuffer";var Xh=F.Z.getClassFactory(Pm),Oc=A(4403);function Lc(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}var PE=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function Om(L){var P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze,$e,Ee,ke,Ae,Ge=this.context,Z=(0,m.Z)(Ge).getInstance(),le=L.videoModel,ae=L.streamInfo,se=L.settings;function Q(bt,Xt,Gt,un,vn,Pn){var Nn=0,Fn=0;bt/Xt>Gt/un?Nn=(Fn=Xt)/un*Gt:Fn=(Nn=bt)/Gt*un;var Gn,Ct,Sn=0,En=0;return Nn/Fn>vn?(En=Fn,Sn=Fn*vn):(Sn=Nn,En=Nn/vn),Gn=(bt-Sn)/2,Ct=(Xt-En)/2,Pn?{x:Gn+.1*Sn,y:Ct+.1*En,w:.8*Sn,h:.8*En}:{x:Gn,y:Ct,w:Sn,h:En}}function Pe(bt,Xt){var Gt=le.getClientWidth(),un=le.getClientHeight(),vn=le.getVideoWidth(),Pn=le.getVideoHeight(),Nn=le.getVideoRelativeOffsetTop(),Fn=le.getVideoRelativeOffsetLeft();if(vn!==0&&Pn!==0){var Gn=vn/Pn,Ct=!1;bt.isFromCEA608&&(Gn=1.1666666666666667,Ct=!0);var Sn=Q.call(this,Gt,un,vn,Pn,Gn,Ct),En=Sn.w,Lt=Sn.h,On=Sn.x,ct=Sn.y;if(En!=we||Lt!=ye||On!=ne||ct!=ce||Xt){if(ne=On+Fn,ce=ct+Nn,we=En,ye=Lt,ie){var nt=ie.style;nt&&(nt.left=ne+"px",nt.top=ce+"px",nt.width=we+"px",nt.height=ye+"px",nt.zIndex=He&&document[He]||Oe?$e:null,Z.trigger(_.Z.CAPTION_CONTAINER_RESIZE))}var Kt=bt.activeCues;if(Kt)for(var ze=Kt.length,Ve=0;Ve<ze;++Ve){var Dt=Kt[Ve];Dt.scaleCue(Dt)}}}}function be(bt){var Xt,Gt,un,vn,Pn,Nn=we,Fn=ye;if(bt.cellResolution){var Gn=[Nn/bt.cellResolution[0],Fn/bt.cellResolution[1]];if(bt.linePadding){for(Xt in bt.linePadding)if(bt.linePadding.hasOwnProperty(Xt)){Gt=(bt.linePadding[Xt]*Gn[0]).toString();for(var Ct=document.getElementsByClassName("spanPadding"),Sn=0;Sn<Ct.length;Sn++)Ct[Sn].style.cssText=Ct[Sn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt),Ct[Sn].style.cssText=Ct[Sn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}}if(bt.fontSize){for(Xt in bt.fontSize)if(bt.fontSize.hasOwnProperty(Xt)){bt.fontSize[Xt][0]==="%"?un=bt.fontSize[Xt][1]/100:bt.fontSize[Xt][0]==="c"&&(un=bt.fontSize[Xt][1]),Gt=(un*Gn[1]).toString(),Pn=Xt!=="defaultFontSize"?document.getElementsByClassName(Xt):document.getElementsByClassName("paragraph");for(var En=0;En<Pn.length;En++)Pn[En].style.cssText=Pn[En].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}if(bt.lineHeight){for(Xt in bt.lineHeight)if(bt.lineHeight.hasOwnProperty(Xt)){bt.lineHeight[Xt][0]==="%"?vn=bt.lineHeight[Xt][1]/100:bt.fontSize[Xt][0]==="c"&&(vn=bt.lineHeight[Xt][1]),Gt=(vn*Gn[1]).toString(),Pn=document.getElementsByClassName(Xt);for(var Lt=0;Lt<Pn.length;Lt++)Pn[Lt].style.cssText=Pn[Lt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Gt)}}}}if(bt.isd){var On=document.getElementById(bt.cueID);On&&ie.removeChild(On),xe(bt)}}function Fe(bt,Xt){var Gt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,un=/^#(.*)$/;if(Gt.test(Xt)){var vn=Gt.exec(Xt),Pn=parseInt(vn[4],10)-1;return"data:image/png;base64,"+btoa(bt.images[Pn])}if(un.test(Xt)){var Nn=un.exec(Xt)[1];return"data:image/png;base64,"+bt.embeddedImages[Nn]}return Xt}function xe(bt){if(ie){ir.call(this);var Xt=document.createElement("div");ie.appendChild(Xt),Ze=(0,Oc.renderHTML)(bt.isd,Xt,function(Gt){return Fe(bt,Gt)},ie.clientHeight,ie.clientWidth,se.get().streaming.text.imsc.displayForcedOnlyMode,function(Gt){B.info("renderCaption :",Gt)},Ze,se.get().streaming.text.imsc.enableRollUp),Xt.id=bt.cueID,Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:Xt,currentTrackIdx:H})}}function he(bt,Xt){return!!Xt&&Xt.endTime>=bt.startTime}function Ne(bt,Xt){return!!se.get().streaming.text.extendSegmentedCues&&!!function(Gt,un,vn){for(var Pn=0;Pn<vn.length;Pn++){var Nn=vn[Pn];if(JSON.stringify(Gt[Nn])!==JSON.stringify(un[Nn]))return!1}return!0}(Xt,bt,PE)&&(Xt.endTime=Math.max(Xt.endTime,bt.endTime),!0)}function Xe(bt,Xt){Xt&&Xt.forEach(function(Gt){Gt.kind&&Gt.kind==="image"&&(Gt.src=Fe(bt,Gt.src)),Xe(bt,Gt.contents)})}function ht(bt,Xt,Gt){var un=yt(bt),vn=se.get().streaming.text.dispatchForManualRendering;if(un&&Array.isArray(Gt)&&Gt.length!==0)for(var Pn=0;Pn<Gt.length;Pn++){var Nn=null,Fn=Gt[Pn];un.cellResolution=Fn.cellResolution,un.isFromCEA608=Fn.isFromCEA608,isNaN(Fn.start)||isNaN(Fn.end)||(vn?Nn=lt(Fn,Xt):Ft(Fn)&&ie?Nn=jt(Fn,Xt,un):Fn.data&&(Nn=Ht(Fn,Xt,un)));try{if(Nn){if(!en(un,Nn))if(se.get().streaming.text.webvtt.customRenderingEnabled)un.manualCueList||(un.manualCueList=[]),un.manualCueList.push(Nn);else{var Gn=void 0;un.cues&&un.cues.length!==0&&(Gn=un.cues[un.cues.length-1]),he(Nn,Gn)?Ne(Nn,Gn)||(Gn.isd&&(Gn.onexit=function(){}),un.mode!==y.Z.TEXT_DISABLED&&un.addCue(Nn)):un.mode!==y.Z.TEXT_DISABLED&&un.addCue(Nn)}var Ct=se.get().streaming.buffer.bufferToKeep;Wt(un,0,le.getTime()-Ct)}else B.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Sn){throw Dn(un),un.addCue(Nn),Sn}}}function lt(bt,Xt){var Gt=Ut(bt,Xt);return Gt.onenter=function(){Ft(bt)&&Ae&&Ae.cueID!==Gt.cueID&&pt(Ae),delete Gt.type,Ae=Gt,et(Gt)},Gt.onexit=function(){pt(Gt),Ae=null},Gt}function et(bt){Z.trigger(_.Z.CUE_ENTER,bt)}function pt(bt){Z.trigger(_.Z.CUE_EXIT,{cueID:bt.cueID})}function jt(bt,Xt,Gt){var un=this,vn=Ut(bt,Xt);return ie.style.left=ne+"px",ie.style.top=ce+"px",ie.style.width=we+"px",ie.style.height=ye+"px",vn.onenter=function(){var Pn=this;Gt.mode===y.Z.TEXT_SHOWING&&(this.isd?(ke?requestAnimationFrame(function(){return xe(Pn)}):xe(this),B.debug("Cue enter id:"+this.cueID)):(ie.appendChild(this.cueHTMLElement),be.call(un,this),Z.trigger(_.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:H})))},vn.onexit=function(){if(ie)for(var Pn=ie.childNodes,Nn=0;Nn<Pn.length;++Nn)Pn[Nn].id===this.cueID&&(B.debug("Cue exit id:"+Pn[Nn].id),ie.removeChild(Pn[Nn]),--Nn)},vn}function Ht(bt,Xt,Gt){var un=Ut(bt,Xt);if(un.isActive=!1,bt.styles)try{bt.styles.align!==void 0&&"align"in un&&(un.align=bt.styles.align),bt.styles.line!==void 0&&"line"in un&&(un.line=bt.styles.line),bt.styles.snapToLines!==void 0&&"snapToLines"in un&&(un.snapToLines=bt.styles.snapToLines),bt.styles.position!==void 0&&"position"in un&&(un.position=bt.styles.position),bt.styles.size!==void 0&&"size"in un&&(un.size=bt.styles.size)}catch(vn){B.error(vn)}return un.onenter=function(){Gt.mode===y.Z.TEXT_SHOWING&&Z.trigger(_.Z.CAPTION_RENDERED,{currentTrackIdx:H})},un}function Ft(bt){return bt.type==="html"}function Ut(bt,Xt){return Ft(bt)?function(Gt,un){var vn=new V(Gt.start+un,Gt.end+un,"");return vn.cueHTMLElement=Gt.cueHTMLElement,vn.isd=Gt.isd,vn.images=Gt.images,vn.embeddedImages=Gt.embeddedImages,vn.cueID=Gt.cueID,vn.scaleCue=be.bind(self),vn.cellResolution=Gt.cellResolution,vn.lineHeight=Gt.lineHeight,vn.linePadding=Gt.linePadding,vn.fontSize=Gt.fontSize,vn.isd&&Xe(vn,vn.isd.contents),vn}(bt,Xt):function(Gt,un){var vn=new V(Gt.start-un,Gt.end-un,Gt.data);return vn.cueID="".concat(vn.startTime,"_").concat(vn.endTime),vn}(bt,Xt)}function An(bt){if(me)for(var Xt=me.childNodes,Gt=0;Gt<Xt.length;++Gt)Xt[Gt].id===bt.cueID&&(me.removeChild(Xt[Gt]),--Gt)}function it(){var bt,Xt=[],Gt=function(vn,Pn){var Nn;if(typeof Symbol>"u"||vn[Symbol.iterator]==null){if(Array.isArray(vn)||(Nn=function(Lt,On){if(Lt){if(typeof Lt=="string")return Lc(Lt,On);var ct=Object.prototype.toString.call(Lt).slice(8,-1);return ct==="Object"&&Lt.constructor&&(ct=Lt.constructor.name),ct==="Map"||ct==="Set"?Array.from(Lt):ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct)?Lc(Lt,On):void 0}}(vn))||Pn){Nn&&(vn=Nn);var Fn=0,Gn=function(){};return{s:Gn,n:function(){return Fn>=vn.length?{done:!0}:{done:!1,value:vn[Fn++]}},e:function(Lt){throw Lt},f:Gn}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ct,Sn=!0,En=!1;return{s:function(){Nn=vn[Symbol.iterator]()},n:function(){var Lt=Nn.next();return Sn=Lt.done,Lt},e:function(Lt){En=!0,Ct=Lt},f:function(){try{Sn||Nn.return==null||Nn.return()}finally{if(En)throw Ct}}}}(le.getTextTracks());try{for(Gt.s();!(bt=Gt.n()).done;){var un=bt.value;un.manualMode===y.Z.TEXT_SHOWING&&Xt.push(un)}}catch(vn){Gt.e(vn)}finally{Gt.f()}return Xt}function yt(bt){return bt>=0&&ee[bt]?le.getTextTrack(ee[bt].kind,ee[bt].id,ee[bt].lang,ee[bt].isTTML,ee[bt].isEmbedded):null}function $t(bt){var Xt=this;if(bt!==H){var Gt=yt(H=bt);Nt.call(this,Gt),pe&&(clearInterval(pe),pe=null),Gt&&Gt.renderingType==="html"&&(Pe.call(this,Gt,!0),window.ResizeObserver?(Ee=new window.ResizeObserver(function(){Pe.call(Xt,Gt,!0)})).observe(le.getElement()):pe=setInterval(Pe.bind(this,Gt),500))}}function Nt(bt){ir.call(this),bt&&bt.renderingType==="html"?xn.call(this):rr.call(this)}function en(bt,Xt){if(!bt.cues)return!1;for(var Gt=0;Gt<bt.cues.length;Gt++)if(bt.cues[Gt].startTime===Xt.startTime&&bt.cues[Gt].endTime===Xt.endTime)return!0;return!1}function Jt(bt,Xt,Gt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!bt&&(isNaN(Xt)||(un?bt.startTime:bt.endTime)>=Xt)&&(isNaN(Gt)||(un?bt.endTime:bt.startTime)<=Gt)}function Wt(bt,Xt,Gt){var un,vn;if(!(Gt<Xt)&&bt&&(bt.cues||bt.manualCueList)){var Pn=bt.cues&&bt.cues.length>0?"native":"custom",Nn=Pn==="native"?bt.cues:bt.manualCueList;if(!Nn||Nn.length===0)return;for(var Fn=Nn.length-1;Fn>=0;Fn--)!Jt(Nn[Fn],Xt,Gt,!0)||(un=Nn[Fn],vn=le.getTime(),un.startTime>=vn&&un.endTime<=vn)||(Pn==="native"?bt.removeCue(Nn[Fn]):(An(Nn[Fn]),delete bt.manualCueList[Fn]))}}function Dn(bt,Xt,Gt){var un=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(bt&&(bt.cues||bt.manualCueList)){var vn=bt.cues&&bt.cues.length>0?"native":"custom",Pn=vn==="native"?bt.cues:bt.manualCueList;if(!Pn||Pn.length===0)return;for(var Nn=Pn.length-1,Fn=Nn;Fn>=0;Fn--)Jt(Pn[Fn],Xt,Gt,un)&&(vn==="native"?(Pn[Fn].onexit&&Pn[Fn].onexit(),bt.removeCue(Pn[Fn])):(An(Pn[Fn]),delete bt.manualCueList[Fn]))}}function xn(){var bt=document.getElementById("native-cue-style");if(!bt){(bt=document.createElement("style")).id="native-cue-style",document.head.appendChild(bt);var Xt=bt.sheet,Gt=le.getElement();try{Gt&&(Gt.id?Xt.insertRule("#"+Gt.id+"::cue {background: transparent}",0):Gt.classList.length!==0?Xt.insertRule("."+Gt.className+"::cue {background: transparent}",0):Xt.insertRule("video::cue {background: transparent}",0))}catch(un){B.info(""+un.message)}}}function rr(){var bt=document.getElementById("native-cue-style");bt&&document.head.removeChild(bt)}function ir(){if(ie)for(;ie.firstChild;)ie.removeChild(ie.firstChild)}return P={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(V=window.VTTCue||window.TextTrackCue,ee=[],J=[],H=-1,ne=0,ce=0,we=0,ye=0,ie=null,me=null,pe=null,Oe=!1,$e=2147483647,Ze=null,ke="requestAnimationFrame"in window,document.fullscreenElement!==void 0?He="fullscreenElement":document.webkitIsFullScreen!==void 0?He="webkitIsFullScreen":document.msFullscreenElement?He="msFullscreenElement":document.mozFullScreen&&(He="mozFullScreen"))},getStreamId:function(){return ae.id},addTextTrack:function(bt){ee.push(bt)},addCaptions:ht,createTracks:function(){var bt=se.get().streaming.text.dispatchForManualRendering;ee.sort(function(On,ct){return On.index-ct.index}),ie=le.getTTMLRenderingDiv(),me=le.getVttRenderingDiv();for(var Xt,Gt,un,vn,Pn,Nn,Fn=-1,Gn=0;Gn<ee.length;Gn++){var Ct=(Gt=(Xt=ee[Gn]).kind,un=Xt.id!==void 0?Xt.id:Xt.lang,vn=Xt.lang,Pn=Xt.isTTML,Nn=Xt.isEmbedded,le.addTextTrack(Gt,un,vn,Pn,Nn));J.push(Ct),ee[Gn].defaultTrack&&(Ct.default=!0,Fn=Gn);var Sn=yt(Gn);Sn&&(Sn.mode=y.Z.TEXT_SHOWING,ie&&(ee[Gn].isTTML||ee[Gn].isEmbedded)?Sn.renderingType="html":Sn.renderingType="default"),ht(Gn,0,ee[Gn].captionData),Z.trigger(_.Z.TEXT_TRACK_ADDED)}if($t.call(this,Fn),Fn>=0){Z.on(_.Z.PLAYBACK_METADATA_LOADED,function On(){var ct=yt(Fn);ct&&ct.renderingType==="html"&&Pe.call(this,ct,!0),Z.off(_.Z.PLAYBACK_METADATA_LOADED,On,this)},this);for(var En=0;En<ee.length;En++){var Lt=yt(En);Lt&&(Lt.mode=En!==Fn||bt?y.Z.TEXT_HIDDEN:y.Z.TEXT_SHOWING,Lt.manualMode=En===Fn?y.Z.TEXT_SHOWING:y.Z.TEXT_HIDDEN)}}Z.trigger(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:H,tracks:ee,streamId:ae.id})},getCurrentTrackIdx:function(){return H},setCurrentTrackIdx:$t,getTrackIdxForId:function(bt){for(var Xt=-1,Gt=0;Gt<ee.length;Gt++)if(ee[Gt].id===bt){Xt=Gt;break}return Xt},getCurrentTrackInfo:function(){return ee[H]},setModeForTrackIdx:function(bt,Xt){var Gt=yt(bt);Gt&&Gt.mode!==Xt&&(Gt.mode=Xt),Gt&&Gt.manualMode!==Xt&&(Gt.manualMode=Xt)},deleteCuesFromTrackIdx:function(bt,Xt,Gt){var un=yt(bt);un&&Dn(un,Xt,Gt)},deleteAllTextTracks:function(){for(var bt=J?J.length:0,Xt=0;Xt<bt;Xt++){var Gt=yt(Xt);Gt&&Dn.call(this,Gt,ae.start,ae.start+ae.duration,!1)}J=[],ee=[],pe&&(clearInterval(pe),pe=null),Ee&&le&&(Ee.unobserve(le.getElement()),Ee=null),H=-1,ir.call(this)},manualCueProcessing:function(bt){var Xt=it();if(Xt&&Xt.length>0){var Gt=Xt[0].manualCueList;Gt&&Gt.length>0&&Gt.forEach(function(un){un.startTime<=bt&&un.endTime>=bt&&!un.isActive?(un.isActive=!0,se.get().streaming.text.dispatchForManualRendering?et(un):WebVTT.processCues(window,[un],me,un.cueID)):un.isActive&&(un.startTime>bt||un.endTime<bt)&&(un.isActive=!1,se.get().streaming.text.dispatchForManualRendering?pt(un):An(un))})}},disableManualTracks:function(){var bt=it();if(bt&&bt.length>0){var Xt=bt[0].manualCueList;Xt&&Xt.length>0&&Xt.forEach(function(Gt){if(Gt.isActive){if(Gt.isActive=!1,se.get().streaming.text.dispatchForManualRendering)pt(Gt);else if(me)for(var un=me.childNodes,vn=0;vn<un.length;++vn)un[vn].id===Gt.cueID&&(me.removeChild(un[vn]),--vn)}})}}},B=(0,N.Z)(Ge).getInstance().getLogger(P),P}Om.__dashjs_factory_name="TextTracks";var Lm=F.Z.getClassFactory(Om);function km(){var L,P,B,V,ee,J,H=this.context;function ne(ie){var me=ie.split(":"),pe=me.length-1;return ie=60*parseInt(me[pe-1],10)+parseFloat(me[pe]),pe===2&&(ie+=3600*parseInt(me[0],10)),ie}function ce(ie){var me=ie.split(V),pe=me[1].split(J);return pe.shift(),me[1]=pe[0],pe.shift(),{cuePoints:me,styles:we(pe)}}function we(ie){var me={};return ie.forEach(function(pe){if(pe.split(/:/).length>1){var He=pe.split(/:/)[1],Oe=!1;He&&He.search(/%/)!=-1&&(Oe=!0,He=parseInt(He.replace(/%/,""),10)),(pe.match(/align/)||pe.match(/A/))&&(me.align=He),(pe.match(/line/)||pe.match(/L/))&&(me.line=He==="auto"?He:parseInt(He,10),Oe&&(me.snapToLines=!1)),(pe.match(/position/)||pe.match(/P/))&&(me.position=He),(pe.match(/size/)||pe.match(/S/))&&(me.size=He)}}),me}function ye(ie,me){for(var pe,He=me,Oe="",Ze="";ie[He]!==""&&He<ie.length;)He++;if((pe=He-me)>1)for(var $e=0;$e<pe;$e++){if((Ze=ie[me+$e]).match(V)){Oe="";break}Oe+=Ze,$e!==pe-1&&(Oe+="\n")}else(Ze=ie[me]).match(V)||(Oe=Ze);return Oe}return L={parse:function(ie){var me,pe,He=[];if(!ie)return He;me=(ie=ie.split(B)).length,pe=-1;for(var Oe=0;Oe<me;Oe++){var Ze=ie[Oe];if(Ze.length>0&&Ze!=="WEBVTT"&&Ze.match(V)){var $e=ce(Ze),Ee=$e.cuePoints,ke=$e.styles,Ae=ye(ie,Oe+1),Ge=ne(Ee[0].replace(ee,"")),Z=ne(Ee[1].replace(ee,""));!isNaN(Ge)&&!isNaN(Z)&&Ge>=pe&&Z>Ge?Ae!==""?(pe=Ge,He.push({start:Ge,end:Z,data:Ae,styles:ke})):P.error("Skipping cue due to empty/malformed cue text"):P.error("Skipping cue due to incorrect cue timing")}}return He},getCaptionStyles:we},P=(0,N.Z)(H).getInstance().getLogger(L),B=/(?:\r\n|\r|\n)/gm,V=/-->/,ee=/(^[\s]+|[\s]+$)/g,J=/\s\b/g,L}km.__dashjs_factory_name="VTTParser";var Fm=F.Z.getSingletonFactory(km);function Qh(){var L,P;return L={parse:function(B){var V=[];return P.oncue=function(ee){ee.start=ee.startTime,ee.end=ee.endTime,ee.data=ee.text,ee.styles={align:ee.align,line:ee.line,position:ee.position,size:ee.size},V.push(ee)},P.parse(B),V}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(P=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(B){}}(),L}Qh.__dashjs_factory_name="VttCustomRenderingParser";var OE=F.Z.getSingletonFactory(Qh);function Um(){var L,P,B=this.context,V=(0,m.Z)(B).getInstance(),ee=0;return L={parse:function(J,H,ne,ce,we){var ye,ie,me,pe="",He=[],Oe={},Ze={},$e="",Ee="",ke={onOpenTag:function(ae,se,Q){if(Q[" imagetype"]&&!Q[" imageType"]&&(V.trigger(_.Z.CONFORMANCE_VIOLATION,{level:Pi.LEVELS.ERROR,event:Pi.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Q[" imageType"]=Q[" imagetype"]),se==="image"&&(ae==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ae==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Q[" imageType"]||Q[" imageType"].value!=="PNG")return void P.warn("smpte-tt imageType != PNG. Discarded");$e=Q["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){$e&&(Ze[$e]=Ee.trim()),Ee="",$e=""},onText:function(ae){$e&&(Ee+=ae)}};if(!J)throw pe="no ttml data to parse",new Error(pe);Oe.data=J,V.trigger(T.Z.TTML_TO_PARSE,Oe);var Ae=(0,Oc.fromXML)(Oe.data,function(ae){pe=ae},ke);V.trigger(T.Z.TTML_PARSED,{ttmlString:Oe.data,ttmlDoc:Ae});var Ge,Z=Ae.getMediaTimeEvents();for(me=0;me<Z.length;me++){var le=(0,Oc.generateISD)(Ae,Z[me],function(ae){pe=ae});le.contents.some(function(ae){return ae.contents.length})&&(ye=Z[me]+H)<(ie=Z[me+1]+H)&&He.push({start:ye,end:ie,type:"html",cueID:(Ge="cue_TTML_"+ee,ee++,Ge),isd:le,images:we,embeddedImages:Ze})}if(pe!=="")throw P.error(pe),new Error(pe);return He}},P=(0,N.Z)(B).getInstance().getLogger(L),L}Um.__dashjs_factory_name="TTMLParser";var LE=F.Z.getSingletonFactory(Um);function Jh(L,P){var B=Object.keys(L);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(L);P&&(V=V.filter(function(ee){return Object.getOwnPropertyDescriptor(L,ee).enumerable})),B.push.apply(B,V)}return B}function Ul(L){for(var P=1;P<arguments.length;P++){var B=arguments[P]!=null?arguments[P]:{};P%2?Jh(Object(B),!0).forEach(function(V){Bm(L,V,B[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(B)):Jh(Object(B)).forEach(function(V){Object.defineProperty(L,V,Object.getOwnPropertyDescriptor(B,V))})}return L}function Bm(L,P,B){return P in L?Object.defineProperty(L,P,{value:B,enumerable:!0,configurable:!0,writable:!0}):L[P]=B,L}function ep(L,P){(P==null||P>L.length)&&(P=L.length);for(var B=0,V=new Array(P);B<P;B++)V[B]=L[B];return V}function tp(L){var P,B,V,ee=this.context,J=(0,m.Z)(ee).getInstance(),H=(0,St.Z)(ee).getInstance(),ne=L.adapter,ce=L.baseURLController;function we(me,pe){var He,Oe,Ze=!1;if(ce.resolve()){var $e=ne.getVoRepresentations(me);$e&&$e.length>0&&(He=ce.resolve($e[0].path).url)}var Ee=me.essentialPropertiesAsArray.filter(function(Ae){return Ae.schemeIdUri&&Ae.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME}),ke=me.supplementalPropertiesAsArray.filter(function(Ae){return Ae.schemeIdUri&&Ae.schemeIdUri===y.Z.FONT_DOWNLOAD_DVB_SCHEME});Ee.length>0?(Ze=!0,Oe=Ee):Oe=ke,Oe.forEach(function(Ae){if(function(ae){return!(!(ae.value&&ae.value==="1"&&ae.dvbUrl&&ae.dvbUrl.length>0&&ae.dvbFontFamily&&ae.dvbFontFamily.length>0&&ae.dvbMimeType)||ae.dvbMimeType!==y.Z.OFF_MIMETYPE&&ae.dvbMimeType!==y.Z.WOFF_MIMETYPE)}(Ae)){var Ge=(Z=Ae.dvbUrl,le=He,H.isPathAbsolute(Z)?Z:H.isRelative(Z)?le?H.resolve(Z,le):H.resolve(Z):Z);V.push({fontFamily:Ae.dvbFontFamily,url:Ge,mimeType:Ae.dvbMimeType,trackId:me.id,streamId:pe,isEssential:Ze,status:"unloaded",fontFace:new FontFace(Ae.dvbFontFamily,"url(".concat(Ge,")"),{display:"swap"})})}var Z,le})}function ye(me,pe){var He=V[me];V[me]=Ul(Ul({},He),{},{status:pe})}function ie(){V=[]}return P={addFontsFromTracks:function(me,pe){if(me&&Array.isArray(me)&&pe)for(var He=0;He<me.length;He++)we(me[He],pe)},downloadFonts:function(){for(var me=function(He){var Oe=V[He];document.fonts.add(Oe.fontFace),J.trigger(_.Z.DVB_FONT_DOWNLOAD_ADDED,Oe),Oe.fontFace.load().then(function(){ye(He,"loaded"),J.trigger(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,Oe)},function(Ze){ye(He,"error"),B.debug("Font download error: ",Ze),J.trigger(_.Z.DVB_FONT_DOWNLOAD_FAILED,Oe)})},pe=0;pe<V.length;pe++)me(pe)},getFonts:function(){return V},getFontsForTrackId:function(me){return V.filter(function(pe){return pe.trackId&&pe.trackId===me})},reset:function(){(function(){var me,pe=function(Ze,$e){var Ee;if(typeof Symbol>"u"||Ze[Symbol.iterator]==null){if(Array.isArray(Ze)||(Ee=function(ae,se){if(ae){if(typeof ae=="string")return ep(ae,se);var Q=Object.prototype.toString.call(ae).slice(8,-1);return Q==="Object"&&ae.constructor&&(Q=ae.constructor.name),Q==="Map"||Q==="Set"?Array.from(ae):Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q)?ep(ae,se):void 0}}(Ze))||$e){Ee&&(Ze=Ee);var ke=0,Ae=function(){};return{s:Ae,n:function(){return ke>=Ze.length?{done:!0}:{done:!1,value:Ze[ke++]}},e:function(ae){throw ae},f:Ae}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ge,Z=!0,le=!1;return{s:function(){Ee=Ze[Symbol.iterator]()},n:function(){var ae=Ee.next();return Z=ae.done,ae},e:function(ae){le=!0,Ge=ae},f:function(){try{Z||Ee.return==null||Ee.return()}finally{if(le)throw Ge}}}}(V);try{for(pe.s();!(me=pe.n()).done;){var He=me.value,Oe=document.fonts.delete(He.fontFace);B.debug("Removal of fontFamily: ".concat(He.fontFamily," was ").concat(Oe?"successful":"unsuccessful"))}}catch(Ze){pe.e(Ze)}finally{pe.f()}})(),ie()}},B=(0,N.Z)(ee).getInstance().getLogger(P),ie(),P}tp.__dashjs_factory_name="DVBFonts";var kE=F.Z.getClassFactory(tp);function jm(L){var P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe=this.context,Ze=L.adapter,$e=L.errHandler,Ee=L.manifestModel,ke=L.mediaController,Ae=L.baseURLController,Ge=L.videoModel,Z=L.settings;function le(Ne){if(He.error("Could not download ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Xe=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);ee[Ne.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_DISABLED)}}function ae(Ne){if(He.debug("Successfully downloaded ".concat(Ne.isEssential?"an essential":"a"," font - fontFamily: ").concat(Ne.fontFamily,", url: ").concat(Ne.url)),Ne.isEssential){var Xe=ee[Ne.streamId].getTrackIdxForId(Ne.trackId);Xe===ee[Ne.streamId].getCurrentTrackIdx()?ee[Ne.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_SHOWING):ee[Ne.streamId].setModeForTrackIdx(Xe,y.Z.TEXT_HIDDEN)}}function se(Ne){var Xe=Ne.tracks,ht=Ne.index,lt=Ne.streamId;if(Z.get().streaming.text.defaultEnabled===!1&&!be()||me)Fe(lt,-1);else{var et=ke.getCurrentTrackFor(y.Z.TEXT,lt);if(et){var pt={lang:et.lang,role:et.roles[0],index:et.index,codec:et.codec,accessibility:et.accessibility[0]};Xe.some(function(jt,Ht){if(ke.matchSettings(pt,jt))return Fe(lt,Ht),ht=Ht,!0})}we=!1}B[lt].lastEnabledIndex=ht,ce.trigger(_.Z.TEXT_TRACKS_ADDED,{enabled:be(),index:ht,tracks:Xe,streamId:lt}),ie=!0,pe.addFontsFromTracks(Xe,lt),pe.getFonts().forEach(function(jt){if(jt.isEssential){var Ht=ee[jt.streamId].getTrackIdxForId(jt.trackId);ee[jt.streamId].setModeForTrackIdx(Ht,y.Z.TEXT_DISABLED)}}),pe.downloadFonts()}function Q(Ne){try{var Xe=Ne.streamId;if(!ee[Xe]||isNaN(Ne.time))return;ee[Xe].manualCueProcessing(Ne.time)}catch(ht){}}function Pe(Ne){try{var Xe=Ne.streamId;if(!ee[Xe])return;ee[Xe].disableManualTracks()}catch(ht){}}function be(){var Ne=!0;return we&&!ye&&(Ne=!1),Ne}function Fe(Ne,Xe){(we=Xe===-1)&&ke&&ke.saveTextSettingsDisabled();var ht=xe(Ne);if(ht!==Xe&&ee[Ne]){ee[Ne].disableManualTracks();var lt=ee[Ne].getCurrentTrackInfo(),et=lt?Ge.getTextTrack(lt.kind,lt.id,lt.lang,lt.isTTML,lt.isEmbedded):null;et&&et.mode!==y.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(ht,y.Z.TEXT_HIDDEN),ee[Ne].setCurrentTrackIdx(Xe),lt=ee[Ne].getCurrentTrackInfo();var pt=Z.get().streaming.text.dispatchForManualRendering;lt&&!pt&&lt.mode!==y.Z.TEXT_DISABLED&&ee[Ne].setModeForTrackIdx(Xe,y.Z.TEXT_SHOWING),lt&&lt.isFragmented&&!lt.isEmbedded?function(jt,Ht,Ft){if(V[jt])for(var Ut=V[jt].getConfig().fragmentedTracks,An=0;An<Ut.length;An++){var it=Ut[An];if(Ht.lang===it.lang&&(it.id?Ht.id===it.id:Ht.index===it.index)){var yt=ke.getCurrentTrackFor(y.Z.TEXT,jt);(it.id?yt.id!==it.id:yt.index!==it.index)?(ee[jt].deleteCuesFromTrackIdx(Ft),V[jt].setCurrentFragmentedTrackIdx(An)):Ft===-1&&ce.trigger(T.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:jt,mediaType:y.Z.TEXT})}}}(Ne,lt,ht):lt&&!lt.isFragmented&&function(jt,Ht){ce.trigger(T.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Ht},{streamId:jt,mediaType:y.Z.TEXT})}(Ne,lt),ke.setTrack(lt)}}function xe(Ne){return ee[Ne].getCurrentTrackIdx()}function he(){V={},ee={},B={},we=!0,ie=!1,me=!1}return P={deactivateStream:function(Ne){if(Ne){var Xe=Ne.id;V[Xe]&&V[Xe].resetMediaInfos(),ee[Xe]&&ee[Xe].deleteAllTextTracks()}},initialize:function(){pe=kE(Oe).create({adapter:Ze,baseURLController:Ae}),ce.on(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),ce.on(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,P),ce.on(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(ce.on(T.Z.PLAYBACK_TIME_UPDATED,Q,P),ce.on(T.Z.PLAYBACK_SEEKING,Pe,P))},initializeForStream:function(Ne){var Xe=Ne.id,ht=Lm(Oe).create({videoModel:Ge,settings:Z,streamInfo:Ne});ht.initialize(),ee[Xe]=ht;var lt=Xh(Oe).create({errHandler:$e,adapter:Ze,dvbFonts:pe,manifestModel:Ee,mediaController:ke,videoModel:Ge,textTracks:ht,vttParser:J,vttCustomRenderingParser:H,ttmlParser:ne,streamInfo:Ne,settings:Z});lt.initialize(),V[Xe]=lt,B[Xe]={},B[Xe].lastEnabledIndex=-1},createTracks:function(Ne){var Xe=Ne.id;ee[Xe]&&ee[Xe].createTracks()},getTextSourceBuffer:function(Ne){var Xe=Ne.id;if(V&&V[Xe])return V[Xe]},getAllTracksAreDisabled:function(){return we},addEmbeddedTrack:function(Ne,Xe){var ht=Ne.id;V[ht]&&V[ht].addEmbeddedTrack(Xe)},enableText:function(Ne,Xe){return(0,_e.PS)(Xe,"boolean"),be()!==Xe&&(Xe&&Fe(Ne,B[Ne].lastEnabledIndex),Xe||(B[Ne].lastEnabledIndex=xe(Ne),ie?Fe(Ne,-1):me=!0)),!0},isTextEnabled:be,setTextTrack:Fe,getCurrentTrackIdx:xe,enableForcedTextStreaming:function(Ne){return(0,_e.PS)(Ne,"boolean"),ye=Ne,!0},addMediaInfosToBuffer:function(Ne,Xe,ht){var lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,et=Ne.id;V[et]&&V[et].addMediaInfos(Xe,ht,lt)},reset:function(){pe.reset(),he(),ce.off(T.Z.TEXT_TRACKS_QUEUE_INITIALIZED,se,P),ce.off(T.Z.DVB_FONT_DOWNLOAD_FAILED,le,P),ce.off(T.Z.DVB_FONT_DOWNLOAD_COMPLETE,ae,P),Z.get().streaming.text.webvtt.customRenderingEnabled&&(ce.off(T.Z.PLAYBACK_TIME_UPDATED,Q,P),ce.off(T.Z.PLAYBACK_SEEKING,Pe,P)),Object.keys(V).forEach(function(Ne){V[Ne].resetEmbedded(),V[Ne].reset()})}},ye=!1,ie=!1,me=!1,J=Fm(Oe).getInstance(),H=OE(Oe).getInstance(),ne=LE(Oe).getInstance(),ce=(0,m.Z)(Oe).getInstance(),He=(0,N.Z)(Oe).getInstance().getLogger(P),he(),P}jm.__dashjs_factory_name="TextController";var FE=F.Z.getClassFactory(jm);function kc(){var L,P,B,V,ee,J,H,ne,ce,we,ye,ie,me,pe,He,Oe,Ze,$e,Ee,ke,Ae,Ge,Z,le,ae,se,Q,Pe,be,Fe,xe,he,Ne,Xe,ht,lt,et,pt,jt,Ht="You must first call initialize() and set a source before calling this method",Ft="You must first call initialize() and set a valid source and view before calling this method",Ut="You must first call attachView() to set the video element before calling this method",An="You must first call attachSource() with a valid source before calling this method",it="MediaPlayer not initialized!",yt=this.context,$t=(0,m.Z)(yt).getInstance(),Nt=(0,Be.Z)(yt).getInstance(),en=(0,N.Z)(yt).getInstance({settings:Nt});function Jt(){Gn(null),Nn(null),V=null,pe&&(pe.reset(),pe=null),He&&(He.reset(),He=null),ke&&ke.reset(),Nt.reset(),Ze&&(Ze.reset(),Ze=null)}function Wt(){return!!B&&!!lt.getElement()}function Dn(){return(0,Rm.e)()}function xn(){if(!H)throw Ft;return Pe.isPaused()}function rr(){if(!H)throw Ft;return Pe.getIsDynamic()}function ir(ze){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=he.getCurrentDVRInfo(Ve);if(!Dt)return 0;var fn=Pe.getOriginalLiveDelay(),Tn=Dt.range.start+ze;return Tn>Dt.range.end-fn&&(Tn=Dt.range.end-fn),Tn}function bt(ze){if(!H)throw Ft;var Ve=Pn().currentTime;if(ze!==void 0)Ve=ae.getTimeRelativeToStreamId(Ve,ze);else if(Pe.getIsDynamic()){var Dt=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,fn=he.getCurrentDVRInfo(Dt);Ve=fn===null||Ve===0?0:Math.max(0,Ve-fn.range.start)}return Ve}function Xt(){if(!H)throw Ft;var ze=Pn().duration;if(Pe.getIsDynamic()){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=he.getCurrentDVRInfo(Ve);ze=Dt?Dt.range.end-Dt.range.start:0}return ze}function Gt(ze){(0,_e.PS)(ze,"boolean"),ne=ze}function un(){ke.restoreDefaultUTCTimingSources()}function vn(){return he}function Pn(){if(!lt.getElement())throw Ut;return lt.getElement()}function Nn(ze){if(!ee)throw it;lt.setElement(ze),ze&&(On(),function(){if(!He){var Ve=dashjs.MetricsReporting;if(typeof Ve=="function"){var Dt=Ve(yt).create();He=Dt.createMetricsReporting({debug:en,eventBus:$t,mediaElement:Pn(),adapter:$e,dashMetrics:he,mediaPlayerModel:Ee,events:T.Z,constants:y.Z,metricsConstants:D.Z})}}}(),function(){if(!Oe){var Ve=dashjs.MssHandler;typeof Ve=="function"&&(Se.extend(Ve.errors),Oe=Ve(yt).create({eventBus:$t,mediaPlayerModel:Ee,dashMetrics:he,manifestModel:Ne,playbackController:Pe,streamController:ae,protectionController:pe,baseURLController:Ge,errHandler:Ae,events:T.Z,constants:y.Z,debug:en,initSegmentType:ot.w.INIT_SEGMENT_TYPE,BASE64:Yf,ISOBoxer:ca,settings:Nt}))}}(),ae&&ae.switchToVideoElement(ce)),H&&Sn(),Kt(ce)}function Fn(ze){if(!J)throw Ht;var Ve=ae.getActiveStreamInfo();return Ve?me.getTracksFor(ze,Ve.id):[]}function Gn(ze){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!ee)throw it;typeof ze=="string"&&et.initialize(ze),Ve==null&&(Ve=NaN),isNaN(Ve)||(Ve=Math.max(0,Ve)),ce=Ve,B=ze,(J||H)&&Sn(),Wt()&&Kt(ce)}function Ct(){if(!J)throw Ht;var ze=ae.getActiveStreamInfo();return ze?ae.getStreamById(ze.id):null}function Sn(){H=!1,J=!1,$e.reset(),ae.reset(),Q.reset(),xe.reset(),Pe.reset(),be.reset(),Fe.reset(),we.reset(),me.reset(),jt.reset(),pe&&(Nt.get().streaming.protection.keepProtectionMediaKeys?pe.stop():(pe.reset(),pe=null,On())),se.reset(),Xe.reset(),ht.reset()}function En(){var ze=Lt();ae||(ae=Ho(yt).getInstance()),se||(se=FE(yt).create({errHandler:Ae,manifestModel:Ne,adapter:$e,mediaController:me,baseURLController:Ge,videoModel:lt,settings:Nt})),le.setConfig({capabilities:Z,customParametersModel:ke,adapter:$e,settings:Nt,manifestModel:Ne,errHandler:Ae}),ae.setConfig({capabilities:Z,capabilitiesFilter:le,manifestLoader:ze,manifestModel:Ne,mediaPlayerModel:Ee,customParametersModel:ke,protectionController:pe,textController:se,adapter:$e,dashMetrics:he,errHandler:Ae,timelineConverter:ie,videoModel:lt,playbackController:Pe,serviceDescriptionController:be,contentSteeringController:Fe,abrController:we,mediaController:me,settings:Nt,baseURLController:Ge,uriFragmentModel:et,segmentBaseController:jt}),Q.setConfig({settings:Nt,playbackController:Pe,streamController:ae,videoModel:lt,timelineConverter:ie,adapter:$e}),Pe.setConfig({streamController:ae,serviceDescriptionController:be,dashMetrics:he,adapter:$e,videoModel:lt,timelineConverter:ie,settings:Nt}),xe.setConfig({streamController:ae,playbackController:Pe,mediaPlayerModel:Ee,videoModel:lt,settings:Nt}),we.setConfig({streamController:ae,domStorage:pt,mediaPlayerModel:Ee,customParametersModel:ke,cmsdModel:ht,dashMetrics:he,adapter:$e,videoModel:lt,settings:Nt}),Xe.setConfig({abrController:we,dashMetrics:he,playbackController:Pe}),ht.setConfig({}),we.initialize(),ae.initialize(ne,V),se.initialize(),Q.initialize(),xe.initialize(),Xe.initialize(),ht.initialize(),Fe.initialize(),jt.initialize()}function Lt(){return _m(yt).create({debug:en,errHandler:Ae,dashMetrics:he,mediaPlayerModel:Ee,requestModifier:(0,Ke.Z)(yt).getInstance(),mssHandler:Oe,settings:Nt})}function On(){if(pe)return pe;var ze=dashjs.Protection;if(typeof ze=="function"){var Ve=ze(yt).create();return T.Z.extend(ze.events),_.Z.extend(ze.events,{publicOnly:!0}),Se.extend(ze.errors),Z||(Z=(0,Tm.Z)(yt).getInstance()),pe=Ve.createProtectionSystem({debug:en,errHandler:Ae,videoModel:lt,customParametersModel:ke,capabilities:Z,eventBus:$t,events:T.Z,BASE64:Yf,constants:y.Z,cmcdModel:Xe,settings:Nt})}return null}function ct(){if(!ee)throw it;if(Ze)return Ze;var ze=dashjs.OfflineController;if(typeof ze=="function"){T.Z.extend(ze.events),_.Z.extend(ze.events,{publicOnly:!0}),Se.extend(ze.errors);var Ve=Lt(),Dt=Vr(yt).create();return Dt.setConfig({manifestModel:Ne,adapter:$e,manifestLoader:Ve,errHandler:Ae,contentSteeringController:Fe}),Ze=ze(yt).create({debug:en,manifestUpdater:Dt,baseURLController:Ge,manifestLoader:Ve,manifestModel:Ne,mediaPlayerModel:Ee,abrController:we,playbackController:Pe,adapter:$e,errHandler:Ae,dashMetrics:he,timelineConverter:ie,segmentBaseController:jt,schemeLoaderFactory:ye,eventBus:$t,events:T.Z,errors:Se,constants:y.Z,settings:Nt,dashConstants:v.Z,urlUtils:(0,St.Z)(yt).getInstance()})}return null}function nt(ze){var Ve=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Dt=he.getCurrentDVRInfo(Ve);return Dt?ze+(Dt.manifestInfo.availableFrom.getTime()/1e3+Dt.range.start):0}function Kt(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Ze&&Ze.resetRecords(),!J&&B&&(J=!0,P.info("Streaming Initialized"),En(),typeof B=="string"?ae.load(B,ze):ae.loadWithManifest(B,ze)),!H&&Wt()&&(H=!0,P.info("Playback Initialized"))}return L={initialize:function(ze,Ve,Dt){var fn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;Z||(Z=(0,Tm.Z)(yt).getInstance()).setConfig({settings:Nt}),Ae||(Ae=Dl(yt).getInstance()),Z.supportsMediaSource()?(ee||(ee=!0,ie=yu(yt).getInstance(),we||(we=Wn(yt).getInstance()).setConfig({settings:Nt}),ye||(ye=Di(yt).getInstance()),Pe||(Pe=b(yt).getInstance()),me||(me=Uu(yt).getInstance()),ae||(ae=Ho(yt).getInstance()),Q||(Q=Ps(yt).getInstance()),xe||(xe=co(yt).getInstance()),be||(be=bh(yt).getInstance()),Fe||(Fe=Aa(yt).getInstance()),le||(le=AE(yt).getInstance()),$e=Nm(yt).getInstance(),Ne=CE(yt).getInstance(),Xe=ar(yt).getInstance(),ht=_n(yt).getInstance(),he=Fs(yt).getInstance({settings:Nt}),pt=RE(yt).getInstance({settings:Nt}),$e.setConfig({constants:y.Z,cea608parser:C(),errHandler:Ae,BASE64:Yf}),Ge||(Ge=yE(yt).create()),Ge.setConfig({adapter:$e,contentSteeringController:Fe}),be.setConfig({adapter:$e}),jt||(jt=xE(yt).getInstance({dashMetrics:he,mediaPlayerModel:Ee,errHandler:Ae,baseURLController:Ge,events:T.Z,eventBus:$t,debug:en,boxParser:(0,aa.Z)(yt).getInstance(),requestModifier:(0,Ke.Z)(yt).getInstance(),errors:Se})),me.setConfig({domStorage:pt,settings:Nt,customParametersModel:ke}),Ee.setConfig({playbackController:Pe,serviceDescriptionController:be}),Fe.setConfig({adapter:$e,errHandler:Ae,dashMetrics:he,mediaPlayerModel:Ee,manifestModel:Ne,serviceDescriptionController:be,eventBus:$t,requestModifier:(0,Ke.Z)(yt).getInstance()}),un(),Gt(Dt===void 0||Dt),ct()),ze&&Nn(ze),Ve&&Gn(Ve,fn),P.info("[dash.js "+Dn()+"] MediaPlayer has been initialized")):Ae.error(new fe.Z(Se.CAPABILITY_MEDIASOURCE_ERROR_CODE,Se.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(ze){ze&&(ze.capabilities&&(Z=ze.capabilities),ze.capabilitiesFilter&&(le=ze.capabilitiesFilter),ze.streamController&&(ae=ze.streamController),ze.textController&&(se=ze.textController),ze.gapController&&(Q=ze.gapController),ze.playbackController&&(Pe=ze.playbackController),ze.serviceDescriptionController&&(be=ze.serviceDescriptionController),ze.contentSteeringController&&(Fe=ze.contentSteeringController),ze.catchupController&&(xe=ze.catchupController),ze.mediaPlayerModel&&(Ee=ze.mediaPlayerModel),ze.customParametersModel&&(ke=ze.customParametersModel),ze.abrController&&(we=ze.abrController),ze.schemeLoaderFactory&&(ye=ze.schemeLoaderFactory),ze.mediaController&&(me=ze.mediaController),ze.settings&&(Nt=ze.settings))},on:function(ze,Ve,Dt,fn){$t.on(ze,Ve,Dt,fn)},off:function(ze,Ve,Dt){$t.off(ze,Ve,Dt)},extend:function(ze,Ve,Dt){F.Z.extend(ze,Ve,Dt,yt)},attachView:Nn,attachSource:Gn,refreshManifest:function(ze){if(!ee)throw it;if(!Wt())return ze(null,An);var Ve=this;typeof ze=="function"&&$t.on(T.Z.INTERNAL_MANIFEST_LOADED,function Dt(fn){$t.off(T.Z.INTERNAL_MANIFEST_LOADED,Dt,Ve),fn.error?ze(null,fn.error):ze(fn.manifest)},Ve),ae.refreshManifest()},isReady:Wt,preload:function(){if(!lt.getElement()&&!J){if(!B)throw An;Kt(ce)}},play:function(){if(!H)throw Ft;(!ne||xn()&&H)&&Pe.play(!0)},isPaused:xn,pause:function(){if(!H)throw Ft;Pe.pause()},isSeeking:function(){if(!H)throw Ft;return Pe.isSeeking()},isDynamic:rr,getLowLatencyModeEnabled:function(){if(!H)throw Ft;return Pe.getLowLatencyModeEnabled()},seek:function(ze){if(!H)throw Ft;if((0,_e.PS)(ze,"number"),isNaN(ze))throw y.Z.BAD_ARGUMENT_ERROR;ze<0&&(ze=0);var Ve=Pe.getIsDynamic()?ir(ze):ze,Dt=Pn();!Pe.getIsDynamic()&&Dt.duration&&(Ve=Math.min(Dt.duration,Ve)),Pe.seek(Ve,!1,!1,!0)},seekToOriginalLive:function(){H&&rr()&&Pe.seekToOriginalLive()},setPlaybackRate:function(ze){Pn().playbackRate=ze},getPlaybackRate:function(){return Pn().playbackRate},setMute:function(ze){(0,_e.PS)(ze,"boolean"),Pn().muted=ze},isMuted:function(){return Pn().muted},setVolume:function(ze){if(typeof ze!="number"||isNaN(ze)||ze<0||ze>1)throw y.Z.BAD_ARGUMENT_ERROR;Pn().volume=ze},getVolume:function(){return Pn().volume},time:bt,duration:Xt,timeAsUTC:function(){if(!H)throw Ft;return bt()<0?NaN:nt(bt())},durationAsUTC:function(){if(!H)throw Ft;return nt(Xt())},getActiveStream:Ct,getDVRWindowSize:function(){var ze=ae&&ae.hasVideoTrack()?y.Z.VIDEO:y.Z.AUDIO,Ve=he.getCurrentDVRInfo(ze);return Ve?Ve.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:ir,getAvailableBaseUrls:function(){var ze=Ne.getValue();return ze?Ge.getBaseUrls(ze):[]},getAvailableLocations:function(){var ze=Ne.getValue();if(!ze)return[];var Ve=$e.getLocation(ze),Dt=Fe.getSynthesizedLocationElements(Ve);return Ve.concat(Dt)},getTargetLiveDelay:function(){if(!H)throw Ft;return Pe.getOriginalLiveDelay()},convertToTimeCode:function(ze){ze=Math.max(ze,0);var Ve=Math.floor(ze/3600),Dt=Math.floor(ze%3600/60),fn=Math.floor(ze%3600%60);return(Ve===0?"":Ve<10?"0"+Ve.toString()+":":Ve.toString()+":")+(Dt<10?"0"+Dt.toString():Dt.toString())+":"+(fn<10?"0"+fn.toString():fn.toString())},formatUTC:function(ze,Ve,Dt){var fn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Tn=new Date(1e3*ze),sr=Tn.toLocaleDateString(Ve),Zr=Tn.toLocaleTimeString(Ve,{hour12:Dt});return fn?Zr+" "+sr:Zr},getVersion:Dn,getDebug:function(){return en},getBufferLength:function(ze){var Ve=[y.Z.VIDEO,y.Z.AUDIO,y.Z.TEXT];if(ze)return Ve.indexOf(ze)!==-1?vn().getCurrentBufferLevel(ze)||NaN:(P.warn("getBufferLength requested for invalid type"),NaN);var Dt=Ve.map(function(fn){return Fn(fn).length>0?vn().getCurrentBufferLevel(fn):Number.MAX_VALUE}).reduce(function(fn,Tn){return Math.min(fn,Tn)});return Dt===Number.MAX_VALUE?NaN:Dt},getTTMLRenderingDiv:function(){return lt?lt.getTTMLRenderingDiv():null},getVideoElement:Pn,getSource:function(){if(!B)throw An;return B},updateSource:function(ze){B=ze,ae.load(B)},getCurrentLiveLatency:function(){if(!ee)throw it;return H?Pe.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(ze){if(!J)throw Ht;return we.getTopBitrateInfoFor(ze)},setAutoPlay:Gt,getAutoPlay:function(){return ne},getDashMetrics:vn,getQualityFor:function(ze){if(!J)throw Ht;if(ze===y.Z.IMAGE){var Ve=Ct();if(!Ve)return-1;var Dt=Ve.getThumbnailController();return Dt?Dt.getCurrentTrackIndex():-1}return we.getQualityFor(ze)},setQualityFor:function(ze,Ve){var Dt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!J)throw Ht;if(ze===y.Z.IMAGE){var fn=Ct();if(!fn)return;var Tn=fn.getThumbnailController();Tn&&Tn.setTrackByIndex(Ve)}we.setPlaybackQuality(ze,ae.getActiveStreamInfo(),Ve,{forceReplace:Dt})},updatePortalSize:function(){we.setElementSize(),we.setWindowResizeEventCalled(!0)},enableText:function(ze){var Ve=ae.getActiveStreamInfo();return!(!Ve||!se)&&se.enableText(Ve.id,ze)},enableForcedTextStreaming:function(ze){return!(!ae.getActiveStreamInfo()||!se)&&se.enableForcedTextStreaming(ze)},isTextEnabled:function(){var ze=ae.getActiveStreamInfo();return!(!ze||!se)&&se.isTextEnabled(ze)},setTextTrack:function(ze){if(!H)throw Ft;var Ve=ae.getActiveStreamInfo();Ve&&se&&se.setTextTrack(Ve.id,ze)},getBitrateInfoListFor:function(ze){if(!J)throw Ht;var Ve=Ct();return Ve?Ve.getBitrateListFor(ze):[]},getStreamsFromManifest:function(ze){if(!J)throw Ht;return $e.getStreamsInfo(ze)},getTracksFor:Fn,getTracksForTypeFromManifest:function(ze,Ve,Dt){if(!J)throw Ht;return(Dt=Dt||$e.getStreamsInfo(Ve,1)[0])?$e.getAllMediaInfoForType(Dt,ze,Ve):[]},getCurrentTrackFor:function(ze){if(!J)throw Ht;var Ve=ae.getActiveStreamInfo();return me.getCurrentTrackFor(ze,Ve.id)},setInitialMediaSettingsFor:function(ze,Ve){if(!ee)throw it;me.setInitialSettings(ze,Ve)},getInitialMediaSettingsFor:function(ze){if(!ee)throw it;return me.getInitialSettings(ze)},setCurrentTrack:function(ze){var Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!J)throw Ht;me.setTrack(ze,Ve)},addABRCustomRule:function(ze,Ve,Dt){ke.addAbrCustomRule(ze,Ve,Dt)},removeABRCustomRule:function(ze){ke.removeAbrCustomRule(ze)},removeAllABRCustomRule:function(){ke.removeAllAbrCustomRule()},getABRCustomRules:function(){return ke.getAbrCustomRules()},getAverageThroughput:function(ze){var Ve=we.getThroughputHistory(),Dt=Pe.getIsDynamic();return Ve?Ve.getAverageThroughput(ze,Dt):0},retrieveManifest:function(ze,Ve){var Dt=Lt(),fn=this;$t.on(T.Z.INTERNAL_MANIFEST_LOADED,function Tn(sr){sr.error?Ve(null,sr.error):Ve(sr.manifest),$t.off(T.Z.INTERNAL_MANIFEST_LOADED,Tn,fn),Dt.reset()},fn),et.initialize(ze),Dt.load(ze)},addUTCTimingSource:function(ze,Ve){ke.addUTCTimingSource(ze,Ve)},removeUTCTimingSource:function(ze,Ve){ke.removeUTCTimingSource(ze,Ve)},clearDefaultUTCTimingSources:function(){ke.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:un,setXHRWithCredentialsForType:function(ze,Ve){ke.setXHRWithCredentialsForType(ze,Ve)},getXHRWithCredentialsForType:function(ze){return ke.getXHRWithCredentialsForType(ze)},getProtectionController:function(){return On()},attachProtectionController:function(ze){pe=ze},setProtectionData:function(ze){V=ze,ae&&ae.setProtectionData(V)},registerLicenseRequestFilter:function(ze){ke.registerLicenseRequestFilter(ze)},registerLicenseResponseFilter:function(ze){ke.registerLicenseResponseFilter(ze)},unregisterLicenseRequestFilter:function(ze){ke.unregisterLicenseRequestFilter(ze)},unregisterLicenseResponseFilter:function(ze){ke.unregisterLicenseResponseFilter(ze)},registerCustomCapabilitiesFilter:function(ze){ke.registerCustomCapabilitiesFilter(ze)},unregisterCustomCapabilitiesFilter:function(ze){ke.unregisterCustomCapabilitiesFilter(ze)},setCustomInitialTrackSelectionFunction:function(ze){ke.setCustomInitialTrackSelectionFunction(ze)},resetCustomInitialTrackSelectionFunction:function(){ke.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(ze){if(!lt.getElement())throw Ut;lt.setTTMLRenderingDiv(ze)},attachVttRenderingDiv:function(ze){if(!lt.getElement())throw Ut;lt.setVttRenderingDiv(ze)},getCurrentTextTrackIndex:function(){var ze=ae.getActiveStreamInfo();if(ze&&se)return se.getCurrentTrackIdx(ze.id)},provideThumbnail:function(ze,Ve){if(typeof Ve=="function")if(ze<0)Ve(null);else{var Dt=Pe.getIsDynamic()?ir(ze):ze,fn=ae.getStreamForTime(Dt);if(fn!==null){var Tn=fn.getThumbnailController();if(Tn)return Tn.provide(Dt,Ve);Ve(null)}else Ve(null)}},getDashAdapter:function(){return $e},getOfflineController:function(){return ct()},triggerSteeringRequest:function(){if(Fe)return Fe.loadSteeringData()},getCurrentSteeringResponseData:function(){if(Fe)return Fe.getCurrentSteeringResponseData()},getSettings:function(){return Nt.get()},updateSettings:function(ze){Nt.update(ze)},resetSettings:function(){Nt.reset()},reset:Jt,destroy:function(){Jt(),F.Z.deleteSingletonInstances(yt)}},P=en.getLogger(L),ee=!1,H=!1,J=!1,ne=!0,ce=NaN,pe=null,Ze=null,V=null,$e=null,jt=null,T.Z.extend(_.Z),Ee=Pl(yt).getInstance(),ke=(0,ti.Z)(yt).getInstance(),lt=Sr(yt).getInstance(),et=bE(yt).getInstance(),L}kc.__dashjs_factory_name="MediaPlayer";var Fc=F.Z.getClassFactory(kc);Fc.events=_.Z,Fc.errors=Se,F.Z.updateClassFactory(kc.__dashjs_factory_name,Fc);var Zm=Fc},8825:function(R,g,A){function U(m){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(m)}function C(m,T){return C=Object.setPrototypeOf||function(F,N){return F.__proto__=N,F},C(m,T)}function y(m,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(b&&b.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),b&&C(I,b)})(_,m);var T,F,N=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,b=v(T);if(F){var j=v(this).constructor;I=Reflect.construct(b,arguments,j)}else I=b.apply(this,arguments);return y(this,I)});function _(){var I;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).AST_IN_FUTURE="astInFuture",I.BASE_URLS_UPDATED="baseUrlsUpdated",I.BUFFER_EMPTY="bufferStalled",I.BUFFER_LOADED="bufferLoaded",I.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",I.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",I.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",I.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",I.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",I.DYNAMIC_TO_STATIC="dynamicToStatic",I.ERROR="error",I.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",I.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",I.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",I.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",I.LOG="log",I.MANIFEST_LOADING_STARTED="manifestLoadingStarted",I.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",I.MANIFEST_LOADED="manifestLoaded",I.METRICS_CHANGED="metricsChanged",I.METRIC_CHANGED="metricChanged",I.METRIC_ADDED="metricAdded",I.METRIC_UPDATED="metricUpdated",I.PERIOD_SWITCH_STARTED="periodSwitchStarted",I.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",I.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",I.QUALITY_CHANGE_RENDERED="qualityChangeRendered",I.TRACK_CHANGE_RENDERED="trackChangeRendered",I.STREAM_INITIALIZING="streamInitializing",I.STREAM_UPDATED="streamUpdated",I.STREAM_ACTIVATED="streamActivated",I.STREAM_DEACTIVATED="streamDeactivated",I.STREAM_INITIALIZED="streamInitialized",I.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",I.TEXT_TRACKS_ADDED="allTextTracksAdded",I.TEXT_TRACK_ADDED="textTrackAdded",I.CUE_ENTER="cueEnter",I.CUE_EXIT="cueExit",I.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",I.TTML_PARSED="ttmlParsed",I.TTML_TO_PARSE="ttmlToParse",I.CAPTION_RENDERED="captionRendered",I.CAPTION_CONTAINER_RESIZE="captionContainerResize",I.CAN_PLAY="canPlay",I.CAN_PLAY_THROUGH="canPlayThrough",I.PLAYBACK_ENDED="playbackEnded",I.PLAYBACK_ERROR="playbackError",I.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",I.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",I.PLAYBACK_LOADED_DATA="playbackLoadedData",I.PLAYBACK_PAUSED="playbackPaused",I.PLAYBACK_PLAYING="playbackPlaying",I.PLAYBACK_PROGRESS="playbackProgress",I.PLAYBACK_RATE_CHANGED="playbackRateChanged",I.PLAYBACK_SEEKED="playbackSeeked",I.PLAYBACK_SEEKING="playbackSeeking",I.PLAYBACK_STALLED="playbackStalled",I.PLAYBACK_STARTED="playbackStarted",I.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",I.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",I.PLAYBACK_WAITING="playbackWaiting",I.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",I.EVENT_MODE_ON_START="eventModeOnStart",I.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",I.CONFORMANCE_VIOLATION="conformanceViolation",I.REPRESENTATION_SWITCH="representationSwitch",I.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",I.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",I.INBAND_PRFT="inbandPrft",I.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",I.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",I}return _}(A(8342).Z));g.Z=D},3393:function(R,g){function A(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&A(y.prototype,v),C}());g.Z=U},3860:function(R,g){function A(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=new(function(){function C(){(function(D,m){if(!(D instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this.init()}var y,v;return y=C,(v=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&A(y.prototype,v),C}());g.Z=U},8080:function(R,g,A){A.d(g,{default:function(){return q}});var U=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};U.SSL_CONNECTION_FAILED_PREFIX="SSL",U.DNS_RESOLUTION_FAILED="C00",U.HOST_UNREACHABLE="C01",U.CONNECTION_REFUSED="C02",U.CONNECTION_ERROR="C03",U.CORRUPT_MEDIA_ISOBMFF="M00",U.CORRUPT_MEDIA_OTHER="M01",U.BASE_URL_CHANGED="F00",U.BECAME_REPORTER="S00";var C=U,y=A(1180);function v(K){var _e,de,Ke=(K=K||{}).eventBus,St=K.dashMetrics,ut=K.metricsConstants,at=K.events;function tt(Qt){var nn=new C;if(de){for(var Ot in Qt)Qt.hasOwnProperty(Ot)&&(nn[Ot]=Qt[Ot]);nn.mpdurl||(nn.mpdurl=de.originalUrl||de.url),nn.terror||(nn.terror=new Date),St.addDVBErrors(nn)}}function dt(Qt){Qt.error||(de=Qt.manifest)}function Et(Qt){tt({errorcode:C.BASE_URL_CHANGED,servicelocation:Qt.entry})}function Tt(){tt({errorcode:C.BECAME_REPORTER})}function Rt(Qt){var nn;Qt.metric===ut.HTTP_REQUEST&&((nn=Qt.value).responsecode===0||nn.responsecode==null||nn.responsecode>=400||nn.responsecode<100||nn.responsecode>=600)&&tt({errorcode:nn.responsecode||C.CONNECTION_ERROR,url:nn.url,terror:nn.tresponse,servicelocation:nn._serviceLocation})}function hn(Qt){var nn;switch(Qt.error?Qt.error.code:0){case MediaError.MEDIA_ERR_NETWORK:nn=C.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:nn=C.CORRUPT_MEDIA_OTHER;break;default:return}tt({errorcode:nn})}return _e={initialize:function(){Ke.on(at.MANIFEST_UPDATED,dt,_e),Ke.on(at.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Et,_e),Ke.on(at.METRIC_ADDED,Rt,_e),Ke.on(at.METRIC_UPDATED,Rt,_e),Ke.on(at.PLAYBACK_ERROR,hn,_e),Ke.on(y.Z.BECAME_REPORTING_PLAYER,Tt,_e)},reset:function(){Ke.off(at.MANIFEST_UPDATED,dt,_e),Ke.off(at.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Et,_e),Ke.off(at.METRIC_ADDED,Rt,_e),Ke.off(at.METRIC_UPDATED,Rt,_e),Ke.off(at.PLAYBACK_ERROR,hn,_e),Ke.off(y.Z.BECAME_REPORTING_PLAYER,Tt,_e)}}}v.__dashjs_factory_name="DVBErrorsTranslator";var D=dashjs.FactoryMaker.getSingletonFactory(v),m=A(2295);function T(K){K=K||{};var _e,de,Ke=!1,St=this.context,ut=K.mediaElement;return _e={initialize:function(at){at&&at.length&&(at.forEach(function(tt){var dt=tt.starttime,Et=dt+tt.duration;de.add(dt,Et)}),Ke=!!at[0]._useWallClockTime)},reset:function(){de.clear()},isEnabled:function(){var at,tt=de.length;if(!tt)return!0;at=Ke?new Date().getTime()/1e3:ut.currentTime;for(var dt=0;dt<tt;dt+=1){var Et=de.start(dt),Tt=de.end(dt);if(Et<=at&&at<Tt)return!0}return!1}},de=(0,m.Z)(St).create(),_e}T.__dashjs_factory_name="RangeController";var F=dashjs.FactoryMaker.getClassFactory(T);function N(){return{serialise:function K(_e){var de,Ke,St=[],ut=[];for(de in _e)if(_e.hasOwnProperty(de)&&de.indexOf("_")!==0){if((Ke=_e[de])==null&&(Ke=""),Array.isArray(Ke)){if(!Ke.length)continue;ut=[],Ke.forEach(function(at){var tt=Object.prototype.toString.call(at).slice(8,-1)!=="Object";ut.push(tt?at:K(at))}),Ke=ut.map(encodeURIComponent).join(",")}else typeof Ke=="string"?Ke=encodeURIComponent(Ke):Ke instanceof Date?Ke=Ke.toISOString():typeof Ke=="number"&&(Ke=Math.round(Ke));St.push(de+"="+Ke)}return St.join("&")}}}N.__dashjs_factory_name="MetricSerialiser";var _=dashjs.FactoryMaker.getSingletonFactory(N);function I(){var K,_e,de,Ke=window.crypto||window.msCrypto,St=Uint32Array,ut=Math.pow(2,8*St.BYTES_PER_ELEMENT)-1;function at(){Ke&&(K||(K=new St(10)),Ke.getRandomValues(K),_e=0)}return de={random:function(tt,dt){var Et;return tt||(tt=0),dt||(dt=1),Ke?(_e===K.length&&at(),Et=K[_e]/ut,_e+=1):Et=Math.random(),Et*(dt-tt)+tt}},at(),de}I.__dashjs_factory_name="RNG";var b=dashjs.FactoryMaker.getSingletonFactory(I),j=A(5717);function Y(K){var _e;K=K||{};var de,Ke,St,ut,at,tt,dt,Et=this.context,Tt=[],Rt=K.metricsConstants;function hn(){ut=!1,at=!1,tt=null,dt=null}return _e={report:function(Qt,nn){Array.isArray(nn)||(nn=[nn]),at&&dt.isEnabled()&&nn.forEach(function(Ot){var Un=de.serialise(Ot);Qt!==Rt.DVB_ERRORS&&(Un="metricname=".concat(Qt,"&").concat(Un)),function(gr,Or,dr){var ei=new XMLHttpRequest;ei.withCredentials=Ke.getXHRWithCredentialsForType(Rt.HTTP_REQUEST_DVB_REPORTING_TYPE);var Ji=function(){var Lr=Tt.indexOf(ei);Lr!==-1&&(Tt.splice(Lr,1),!(ei.status>=200&&ei.status<300)&&dr&&dr())};Tt.push(ei);try{ei.open("GET",gr),ei.onloadend=Ji,ei.onerror=Ji,ei.send()}catch(Lr){ei.onerror()}}(Un="".concat(tt,"?").concat(Un),0,function(){at=!1})})},initialize:function(Qt,nn){var Ot;if(dt=nn,!(tt=Qt.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");ut||((Ot=Qt.dvbProbability)&&(Ot===1e3||Ot/1e3>=St.random())&&(at=!0),ut=!0)},reset:function(){hn()}},de=_(Et).getInstance(),St=b(Et).getInstance(),Ke=(0,j.Z)(Et).getInstance(),hn(),_e}Y.__dashjs_factory_name="DVBReporting";var $=dashjs.FactoryMaker.getClassFactory(Y);function W(K){K=K||{};var _e,de={"urn:dvb:dash:reporting:2014":$},Ke=this.context,St=K.debug?K.debug.getLogger(_e):{},ut=K.metricsConstants,at=K.mediaPlayerModel||{};return{create:function(tt,dt){var Et;try{(Et=de[tt.schemeIdUri](Ke).create({metricsConstants:ut,mediaPlayerModel:at})).initialize(tt,dt)}catch(Tt){Et=null,St.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(tt.schemeIdUri," (").concat(Tt.message,")"))}return Et},register:function(tt,dt){de[tt]=dt},unregister:function(tt){delete de[tt]}}}W.__dashjs_factory_name="ReportingFactory";var ue=dashjs.FactoryMaker.getSingletonFactory(W);function x(K){var _e=[],de=ue(this.context).getInstance(K);return{initialize:function(Ke,St){Ke.some(function(ut){var at=de.create(ut,St);if(at)return _e.push(at),!0})},reset:function(){_e.forEach(function(Ke){return Ke.reset()}),_e=[]},report:function(Ke,St){_e.forEach(function(ut){return ut.report(Ke,St)})}}}x.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(x);function fe(){return{reconstructFullMetricName:function(K,_e,de){var Ke=K;return _e&&(Ke+="("+_e,de&&de.length&&(Ke+=","+de),Ke+=")"),Ke},validateN:function(K){if(!K)throw new Error("missing n");if(isNaN(K))throw new Error("n is NaN");if(K<0)throw new Error("n must be positive");return K}}}fe.__dashjs_factory_name="HandlerHelpers";var oe=dashjs.FactoryMaker.getSingletonFactory(fe);function ge(K){var _e,de,Ke,St,ut;K=K||{};var at=this.context,tt=oe(at).getInstance(),dt=[],Et=K.metricsConstants;function Tt(){var Rt=function(){try{return Object.keys(dt).map(function(hn){return dt[hn]}).reduce(function(hn,Qt){return hn.level<Qt.level?hn:Qt})}catch(hn){return}}();Rt&&ut!==Rt.t&&(ut=Rt.t,_e.report(Ke,Rt))}return{initialize:function(Rt,hn,Qt){hn&&(de=tt.validateN(Qt),_e=hn,Ke=tt.reconstructFullMetricName(Rt,Qt),St=setInterval(Tt,de))},reset:function(){clearInterval(St),St=null,de=0,_e=null,ut=null},handleNewMetric:function(Rt,hn,Qt){Rt===Et.BUFFER_LEVEL&&(dt[Qt]=hn)}}}ge.__dashjs_factory_name="BufferLevelHandler";var Re=dashjs.FactoryMaker.getClassFactory(ge),Je=dashjs.FactoryMaker.getClassFactory(function(K){var _e,de=(K=K||{}).eventBus,Ke=K.metricsConstants;function St(){de.off(y.Z.METRICS_INITIALISATION_COMPLETE,St,this),de.trigger(y.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(ut,at){at&&(_e=at,de.on(y.Z.METRICS_INITIALISATION_COMPLETE,St,this))},reset:function(){_e=null},handleNewMetric:function(ut,at){ut===Ke.DVB_ERRORS&&_e&&_e.report(ut,at)}}});function Se(K){var _e,de,Ke,St,ut;K=K||{};var at=[],tt=oe(this.context).getInstance(),dt=K.metricsConstants;function Et(){var Tt=at;Tt.length&&_e&&_e.report(St,Tt),at=[]}return{initialize:function(Tt,Rt,hn,Qt){Rt&&(de=tt.validateN(hn),_e=Rt,Qt&&Qt.length&&(Ke=Qt),St=tt.reconstructFullMetricName(Tt,hn,Qt),ut=setInterval(Et,de))},reset:function(){clearInterval(ut),ut=null,de=null,Ke=null,at=[],_e=null},handleNewMetric:function(Tt,Rt){Tt===dt.HTTP_REQUEST&&(Ke&&Ke!==Rt.type||at.push(Rt))}}}Se.__dashjs_factory_name="HttpListHandler";var Be=dashjs.FactoryMaker.getClassFactory(Se);function ot(){var K,_e;return{initialize:function(de,Ke){K=de,_e=Ke},reset:function(){_e=null,K=void 0},handleNewMetric:function(de,Ke){de===K&&_e&&_e.report(K,Ke)}}}ot.__dashjs_factory_name="GenericMetricHandler";var st=dashjs.FactoryMaker.getClassFactory(ot);function Ie(K){var _e,de=(K=K||{}).debug?K.debug.getLogger(_e):{},Ke=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,St=this.context,ut={BufferLevel:Re,DVBErrors:Je,HttpList:Be,PlayList:st,RepSwitchList:st,TcpList:st};return{create:function(at,tt){var dt,Et=at.match(Ke);if(Et){try{(dt=ut[Et[1]](St).create({eventBus:K.eventBus,metricsConstants:K.metricsConstants})).initialize(Et[1],tt,Et[3],Et[5])}catch(Tt){dt=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(Et[1]," with args ").concat(Et[3],", ").concat(Et[5]," (").concat(Tt.message,")"))}return dt}},register:function(at,tt){ut[at]=tt},unregister:function(at){delete ut[at]}}}Ie.__dashjs_factory_name="MetricsHandlerFactory";var Ye=dashjs.FactoryMaker.getSingletonFactory(Ie);function mt(K){K=K||{};var _e,de=[],Ke=this.context,St=K.eventBus,ut=K.events,at=Ye(Ke).getInstance({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants});function tt(dt){de.forEach(function(Et){Et.handleNewMetric(dt.metric,dt.value,dt.mediaType)})}return _e={initialize:function(dt,Et){dt.split(",").forEach(function(Tt,Rt,hn){var Qt;if(Tt.indexOf("(")!==-1&&Tt.indexOf(")")===-1){var nn=hn[Rt+1];nn&&nn.indexOf("(")===-1&&nn.indexOf(")")!==-1&&(Tt+=","+nn,delete hn[Rt+1])}(Qt=at.create(Tt,Et))&&de.push(Qt)}),St.on(ut.METRIC_ADDED,tt,_e),St.on(ut.METRIC_UPDATED,tt,_e)},reset:function(){St.off(ut.METRIC_ADDED,tt,_e),St.off(ut.METRIC_UPDATED,tt,_e),de.forEach(function(dt){return dt.reset()}),de=[]}}}mt.__dashjs_factory_name="MetricsHandlersController";var Me=dashjs.FactoryMaker.getClassFactory(mt);function We(K){var _e,de,Ke;K=K||{};var St=this.context;function ut(){_e&&_e.reset(),de&&de.reset(),Ke&&Ke.reset()}return{initialize:function(at){try{(Ke=F(St).create({mediaElement:K.mediaElement})).initialize(at.Range),(de=X(St).create({debug:K.debug,metricsConstants:K.metricsConstants,mediaPlayerModel:K.mediaPlayerModel})).initialize(at.Reporting,Ke),(_e=Me(St).create({debug:K.debug,eventBus:K.eventBus,metricsConstants:K.metricsConstants,events:K.events})).initialize(at.metrics,de)}catch(tt){throw ut(),tt}},reset:ut}}We.__dashjs_factory_name="MetricsController";var rt=dashjs.FactoryMaker.getClassFactory(We),qt=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.metrics="",this.Range=[],this.Reporting=[]},kt=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},ft=function K(){(function(_e,de){if(!(_e instanceof de))throw new TypeError("Cannot call a class as a function")})(this,K),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function At(K){var _e=(K=K||{}).adapter,de=K.constants;return{getMetrics:function(Ke){var St=[];return Ke&&Ke.Metrics_asArray&&Ke.Metrics_asArray.forEach(function(ut){var at=new qt,tt=_e.getIsDynamic(Ke);ut.hasOwnProperty("metrics")&&(at.metrics=ut.metrics,ut.Range_asArray&&ut.Range_asArray.forEach(function(dt){var Et=new kt;Et.starttime=function(Tt,Rt,hn){var Qt,nn,Ot=0;return Rt?Ot=_e.getAvailabilityStartTime(Tt)/1e3:(Qt=_e.getRegularPeriods(Tt)).length&&(Ot=Qt[0].start),nn=Ot,hn&&hn.hasOwnProperty(de.START_TIME)&&(nn+=hn.starttime),nn}(Ke,tt,dt),dt.hasOwnProperty("duration")?Et.duration=dt.duration:Et.duration=_e.getDuration(Ke),Et._useWallClockTime=tt,at.Range.push(Et)}),ut.Reporting_asArray&&(ut.Reporting_asArray.forEach(function(dt){var Et=new ft;dt.hasOwnProperty(de.SCHEME_ID_URI)&&(Et.schemeIdUri=dt.schemeIdUri,dt.hasOwnProperty("value")&&(Et.value=dt.value),dt.hasOwnProperty(de.DVB_REPORTING_URL)&&(Et.dvbReportingUrl=dt[de.DVB_REPORTING_URL]),dt.hasOwnProperty(de.DVB_PROBABILITY)&&(Et.dvbProbability=dt[de.DVB_PROBABILITY]),at.Reporting.push(Et))}),St.push(at)))}),St}}}At.__dashjs_factory_name="ManifestParsing";var Ce=dashjs.FactoryMaker.getSingletonFactory(At);function re(K){var _e;K=K||{};var de={},Ke=this.context,St=K.eventBus,ut=K.events;function at(dt){if(!dt.error){var Et=Object.keys(de);Ce(Ke).getInstance({adapter:K.adapter,constants:K.constants}).getMetrics(dt.manifest).forEach(function(Tt){var Rt=JSON.stringify(Tt);if(de.hasOwnProperty(Rt))Et.splice(Rt,1);else try{var hn=rt(Ke).create(K);hn.initialize(Tt),de[Rt]=hn}catch(Qt){}}),Et.forEach(function(Tt){de[Tt].reset(),delete de[Tt]}),St.trigger(y.Z.METRICS_INITIALISATION_COMPLETE)}}function tt(){Object.keys(de).forEach(function(dt){de[dt].reset()}),de={}}return _e={reset:function(){St.off(ut.MANIFEST_UPDATED,at,_e),St.off(ut.STREAM_TEARDOWN_COMPLETE,tt,_e)}},St.on(ut.MANIFEST_UPDATED,at,_e),St.on(ut.STREAM_TEARDOWN_COMPLETE,tt,_e),_e}re.__dashjs_factory_name="MetricsCollectionController";var je=dashjs.FactoryMaker.getClassFactory(re);function O(){var K=this.context;return{createMetricsReporting:function(_e){return D(K).getInstance({eventBus:_e.eventBus,dashMetrics:_e.dashMetrics,metricsConstants:_e.metricsConstants,events:_e.events}).initialize(),je(K).create(_e)},getReportingFactory:function(){return ue(K).getInstance()},getMetricsHandlerFactory:function(){return Ye(K).getInstance()}}}O.__dashjs_factory_name="MetricsReporting";var M=dashjs.FactoryMaker.getClassFactory(O);M.events=y.Z,dashjs.FactoryMaker.updateClassFactory(O.__dashjs_factory_name,M);var q=M},1180:function(R,g,A){function U(m){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},U(m)}function C(m,T){return C=Object.setPrototypeOf||function(F,N){return F.__proto__=N,F},C(m,T)}function y(m,T){return!T||U(T)!=="object"&&typeof T!="function"?function(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}(m):T}function v(m){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},v(m)}var D=new(function(m){(function(I,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(b&&b.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),b&&C(I,b)})(_,m);var T,F,N=(T=_,F=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}(),function(){var I,b=v(T);if(F){var j=v(this).constructor;I=Reflect.construct(b,arguments,j)}else I=b.apply(this,arguments);return y(this,I)});function _(){var I;return function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,_),(I=N.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",I.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",I.CMCD_DATA_GENERATED="cmcdDataGenerated",I}return _}(A(8342).Z));g.Z=D},5717:function(R,g,A){var U=A(2610),C=A(5448),y=A(1264),v=A(3106),D=A(1767),m=A(3393);function T(){var F,N,_,I,b,j,Y,$,W=this.context,ue=(0,y.Z)(W).getInstance();function x(){I=[],b=[],j=[],$=[],Y=null,N=[]}function X(Re,Je){var Se=-1;Re.some(function(Be,ot){if(Be===Je)return Se=ot,!0}),Se<0||Re.splice(Se,1)}function fe(Re){var Je;for(Je=0;Je<$.length;Je++)if($[Je].rulename===Re)return Je;return-1}function oe(Re,Je){ge(Re,Je);var Se=new U.Z;Se.schemeIdUri=Re,Se.value=Je,N.push(Se)}function ge(Re,Je){(0,v.PS)(Re,"string"),(0,v.PS)(Je,"string"),N.forEach(function(Se,Be){Se.schemeIdUri===Re&&Se.value===Je&&N.splice(Be,1)})}return F={getCustomInitialTrackSelectionFunction:function(){return Y},setCustomInitialTrackSelectionFunction:function(Re){Y=Re},resetCustomInitialTrackSelectionFunction:function(){Y=null},getLicenseResponseFilters:function(){return b},getLicenseRequestFilters:function(){return I},getCustomCapabilitiesFilters:function(){return j},registerCustomCapabilitiesFilter:function(Re){j.push(Re)},registerLicenseResponseFilter:function(Re){b.push(Re)},registerLicenseRequestFilter:function(Re){I.push(Re)},unregisterCustomCapabilitiesFilter:function(Re){X(j,Re)},unregisterLicenseResponseFilter:function(Re){X(b,Re)},unregisterLicenseRequestFilter:function(Re){X(I,Re)},addAbrCustomRule:function(Re,Je,Se){if(typeof Re!="string"||Re!==D.Z.ABANDON_FRAGMENT_RULES&&Re!==D.Z.QUALITY_SWITCH_RULES||typeof Je!="string")throw m.Z.BAD_ARGUMENT_ERROR;var Be=fe(Je);Be===-1?$.push({type:Re,rulename:Je,rule:Se}):($[Be].type=Re,$[Be].rule=Se)},removeAllAbrCustomRule:function(){$=[]},removeAbrCustomRule:function(Re){if(Re){var Je=fe(Re);Je!==-1&&$.splice(Je,1)}else $=[]},getAbrCustomRules:function(){return $},addUTCTimingSource:oe,removeUTCTimingSource:ge,getUTCTimingSources:function(){return N},clearDefaultUTCTimingSources:function(){N=[]},restoreDefaultUTCTimingSources:function(){var Re=ue.get().streaming.utcSynchronization.defaultTimingSource;oe(Re.scheme,Re.value)},setXHRWithCredentialsForType:function Re(Je,Se){Je?_[Je]=!!Se:Object.keys(_).forEach(function(Be){Re(Be,Se)})},getXHRWithCredentialsForType:function(Re){var Je=_[Re];return Je===void 0?_.default:Je},setConfig:function(){},reset:function(){x()}},_={default:!1},x(),F}T.__dashjs_factory_name="CustomParametersModel",g.Z=C.Z.getSingletonFactory(T)},9032:function(R,g,A){var U=A(5448),C=A(7473);function y(D){var m=(D=D||{}).requestModifier;function T(F){var N=new Date,_=F.request,I=new XMLHttpRequest;if(I.open(F.method,F.url,!0),_.responseType&&(I.responseType=_.responseType),_.range&&I.setRequestHeader("Range","bytes="+_.range),_.requestStartDate||(_.requestStartDate=N),m&&m.modifyRequestHeader&&(I=m.modifyRequestHeader(I,{url:F.url})),F.headers)for(var b in F.headers){var j=F.headers[b];j&&I.setRequestHeader(b,j)}I.withCredentials=F.withCredentials,I.onload=F.onload,I.onloadend=F.onend,I.onerror=F.onerror,I.onprogress=F.progress,I.onabort=F.onabort,I.ontimeout=F.ontimeout,I.timeout=F.timeout,I.send(),F.response=I}return{load:function(F){m&&m.modifyRequest?(0,C.k)(F,m).then(function(){return T(F)}):T(F)},abort:function(F){var N=F.response;N.onloadend=N.onerror=N.onprogress=void 0,N.abort()}}}y.__dashjs_factory_name="XHRLoader";var v=U.Z.getClassFactory(y);g.Z=v},1737:function(R,g,A){function U(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}A.d(g,{default:function(){return Pu}});var C={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},y=function(){function tn(){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn)}var sn,an;return sn=tn,an=[{key:"findCencContentProtection",value:function(wt){for(var Yt=null,Mt=0;Mt<wt.length;++Mt){var zt=wt[Mt];zt.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||zt.value.toLowerCase()!=="cenc"&&zt.value.toLowerCase()!=="cbcs"||(Yt=zt)}return Yt}},{key:"getPSSHData",value:function(wt){var Yt=8,Mt=new DataView(wt),zt=Mt.getUint8(Yt);return Yt+=20,zt>0&&(Yt+=4+16*Mt.getUint32(Yt)),Yt+=4,wt.slice(Yt)}},{key:"getPSSHForKeySystem",value:function(wt,Yt){var Mt=tn.parsePSSHList(Yt);return wt&&Mt.hasOwnProperty(wt.uuid.toLowerCase())?Mt[wt.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(wt,Yt){return"pssh"in wt?(wt.pssh.__text=wt.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),Yt.decodeArray(wt.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(wt){if(wt==null)return[];for(var Yt=new DataView(wt.buffer||wt),Mt={},zt=0;;){var mn,In,Zn=void 0,Cn=zt;if(zt>=Yt.buffer.byteLength)break;if(mn=zt+Yt.getUint32(zt),zt+=4,Yt.getUint32(zt)===1886614376)if(zt+=4,(In=Yt.getUint8(zt))===0||In===1){zt++,zt+=3,Zn="";var Rn=void 0,on=void 0;for(Rn=0;Rn<4;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=4,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<2;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;for(zt+=2,Zn+="-",Rn=0;Rn<6;Rn++)Zn+=(on=Yt.getUint8(zt+Rn).toString(16)).length===1?"0"+on:on;zt+=6,zt+=4,Mt[Zn=Zn.toLowerCase()]=Yt.buffer.slice(Cn,mn),zt=mn}else zt=mn;else zt=mn}return Mt}},{key:"getLicenseServerUrlFromMediaInfo",value:function(wt,Yt){try{if(!wt||wt.length===0)return null;for(var Mt=0,zt=null;Mt<wt.length&&!zt;){var mn=wt[Mt];if(mn&&mn.contentProtection&&mn.contentProtection.length>0){var In=mn.contentProtection.filter(function(er){return er.schemeIdUri&&er.schemeIdUri===Yt});if(In&&In.length>0)for(var Zn=0;Zn<In.length&&!zt;){for(var Cn=In[Zn],Rn=0;Rn<C.attributes.length&&!zt;){for(var on=0,Bn=C.attributes[Rn];on<C.prefixes.length&&!zt;){var kn=C.prefixes[on];Cn[Bn]&&Cn[Bn].__prefix&&Cn[Bn].__prefix===kn&&Cn[Bn].__text&&(zt=Cn[Bn].__text),on+=1}Rn+=1}Zn+=1}}Mt+=1}return zt}catch(er){return null}}}],an&&U(sn,an),tn}(),v=function tn(sn,an){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.contentType=sn,this.robustness=an},D=function tn(sn,an,wt,Yt,Mt){(function(zt,mn){if(!(zt instanceof mn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initDataTypes=["cenc"],sn&&sn.length&&(this.audioCapabilities=sn),an&&an.length&&(this.videoCapabilities=an),this.distinctiveIdentifier=wt,this.persistentState=Yt,this.sessionTypes=Mt};function m(tn){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},m(tn)}function T(tn,sn){return T=Object.setPrototypeOf||function(an,wt){return an.__proto__=wt,an},T(tn,sn)}function F(tn,sn){return!sn||m(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function N(tn){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},N(tn)}var _=new(function(tn){(function(Mt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),zt&&T(Mt,zt)})(Yt,tn);var sn,an,wt=(sn=Yt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,zt=N(sn);if(an){var mn=N(this).constructor;Mt=Reflect.construct(zt,arguments,mn)}else Mt=zt.apply(this,arguments);return F(this,Mt)});function Yt(){var Mt;return function(zt,mn){if(!(zt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,Yt),(Mt=wt.call(this)).MEDIA_KEYERR_CODE=100,Mt.MEDIA_KEYERR_UNKNOWN_CODE=101,Mt.MEDIA_KEYERR_CLIENT_CODE=102,Mt.MEDIA_KEYERR_SERVICE_CODE=103,Mt.MEDIA_KEYERR_OUTPUT_CODE=104,Mt.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Mt.MEDIA_KEYERR_DOMAIN_CODE=106,Mt.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Mt.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Mt.KEY_SESSION_CREATED_ERROR_CODE=113,Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Mt.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Mt.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Mt.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Mt.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Mt.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Mt.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Mt.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Mt.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Mt.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Mt.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Mt.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Mt.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Mt.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Mt.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Mt}return Yt}(A(2230).Z)),I=A(5459),b=function tn(sn,an,wt,Yt,Mt,zt,mn,In){(function(Zn,Cn){if(!(Zn instanceof Cn))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.method=an,this.responseType=wt,this.headers=Yt,this.withCredentials=Mt,this.messageType=zt,this.sessionId=mn,this.data=In},j=function tn(sn,an,wt){(function(Yt,Mt){if(!(Yt instanceof Mt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.url=sn,this.headers=an,this.data=wt},Y=A(7855),$=A(703),W=A(3393),ue=A(5448);function x(tn){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},x(tn)}function X(tn){var sn,an,wt,Yt,Mt,zt,mn,In,Zn,Cn,Rn,on=(tn=tn||{}).protectionKeyController,Bn=tn.protectionModel,kn=tn.eventBus,er=tn.events,Er=tn.debug,Ur=tn.BASE64,Vn=tn.constants,rn=[],cn=tn.cmcdModel,bn=tn.settings,Jn=tn.customParametersModel;function ar(){if(!(kn&&kn.hasOwnProperty("on")&&on&&on.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function br(_n,Xn){In||Zn?In&&kr():function(hr,ti){if(!Zn){Zn=!0;var Mr,Bi=[];hr=hr.sort(function(Di,ui){return(Mt&&Mt[Di.ks.systemString]&&Mt[Di.ks.systemString].priority>=0?Mt[Di.ks.systemString].priority:hr.length)-(Mt&&Mt[ui.ks.systemString]&&Mt[ui.ks.systemString].priority>=0?Mt[ui.ks.systemString].priority:hr.length)});for(var Xr=0;Xr<hr.length;Xr++){var na=wo(hr[Xr]);Bi.push({ks:hr[Xr].ks,configs:[na],protData:hr[Xr].protData})}Bn.requestKeySystemAccess(Bi).then(function(Di){var ui=(Mr=Di.data).mksa&&Mr.mksa.selectedSystemString?Mr.mksa.selectedSystemString:Mr.keySystem.systemString;return an.info("DRM: KeySystem Access Granted for system string ("+ui+")!  Selecting key system..."),Bn.selectKeySystem(Mr)}).then(function(Di){if(In=Di,Zn=!1,Bn){kn.trigger(er.KEY_SYSTEM_SELECTED,{data:Mr});var ui=qr(In);ui&&ui.serverCertificate&&ui.serverCertificate.length>0&&Bn.setServerCertificate(Ur.decodeArray(ui.serverCertificate).buffer),kr()}}).catch(function(Di){In=null,Zn=!1,ti||kn.trigger(er.KEY_SYSTEM_SELECTED,{data:null,error:new I.Z(_.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,_.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Di.error)})})}}(_n,Xn)}function kr(){for(var _n,Xn=0;Xn<wt.length;Xn++)for(_n=0;_n<wt[Xn].length;_n++)if(In===wt[Xn][_n].ks){Yi(wt[Xn][_n]);break}wt=[]}function Yi(_n){if(on.isClearKey(In)&&_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){var Xn={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify(Xn))}_n.sessionId?no(_n):_n.initData!==null&&Br(_n)}function no(_n){ar(),Bn.loadKeySession(_n)}function Br(_n){var Xn=y.getPSSHForKeySystem(In,_n?_n.initData:null);if(Xn){if(function(hr){if(!hr)return!1;try{for(var ti=Bn.getSessions(),Mr=0;Mr<ti.length;Mr++)if(ti[Mr].getKeyId()===hr)return!0;return!1}catch(Bi){return!1}}(_n.keyId)||hi(Xn))return;try{_n.initData=Xn,Bn.createKeySession(_n)}catch(hr){kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+hr.message)})}}else _n&&_n.initData?Bn.createKeySession(_n):kn.trigger(er.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(In?In.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function qr(_n){if(_n){var Xn=_n.systemString;if(Mt)return Xn in Mt?Mt[Xn]:null}return null}function hi(_n){if(!_n)return!1;try{for(var Xn=Bn.getAllInitData(),hr=0;hr<Xn.length;hr++)if(on.initDataEquals(_n,Xn[hr]))return an.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(ti){return!1}}function vi(_n){ar(),_n?(Bn.setMediaElement(_n),kn.on(er.NEED_KEY,Ms,sn)):_n===null&&(Bn.setMediaElement(_n),kn.off(er.NEED_KEY,Ms,sn))}function wo(_n){var Xn=_n.protData,hr=[],ti=[],Mr=Xn&&Xn.audioRobustness&&Xn.audioRobustness.length>0?Xn.audioRobustness:mn,Bi=Xn&&Xn.videoRobustness&&Xn.videoRobustness.length>0?Xn.videoRobustness:mn,Xr=_n.sessionType,na=Xn&&Xn.distinctiveIdentifier?Xn.distinctiveIdentifier:"optional",Di=Xn&&Xn.persistentState?Xn.persistentState:Xr==="temporary"?"optional":"required";return Yt.forEach(function(ui){ui.type===Vn.AUDIO?hr.push(new v(ui.codec,Mr)):ui.type===Vn.VIDEO&&ti.push(new v(ui.codec,Bi))}),new D(hr,ti,na,Di,[Xr])}function ro(_n){_n.error?kn.trigger(er.KEY_STATUSES_CHANGED,{data:null,error:_n.error}):an.debug("DRM: key status = "+_n.status)}function ta(_n){an.debug("DRM: onKeyMessage");var Xn=_n.data;kn.trigger(er.KEY_MESSAGE,{data:Xn});var hr=Xn.messageType?Xn.messageType:"license-request",ti=Xn.message,Mr=Xn.sessionToken,Bi=qr(In),Xr=on.getLicenseServerModelInstance(In,Bi,hr),na={sessionToken:Mr,messageType:hr};if(ti&&ti.byteLength!==0){if(!Xr)return an.debug("DRM: License server request not required for this message (type = "+_n.data.messageType+").  Session ID = "+Mr.getSessionId()),void bi(na);if(on.isClearKey(In)){var Di=on.processClearKeyLicenseRequest(In,Bi,ti);if(Di&&Di.keyPairs&&Di.keyPairs.length>0)return an.debug("DRM: ClearKey license request handled by application!"),bi(na),void Bn.updateKeySession(Mr,Di)}(function(ui,Ao,Wi){var qo=ui.sessionToken,ra=ui.messageType?ui.messageType:"license-request",gt={sessionToken:qo,messageType:ra},ia=In?In.systemString:null,Ds=function(xr,vs,ys,Yr,Ec){var Aa=null,Il=Yr.message;if(xr&&xr.serverURL){var sa=xr.serverURL;typeof sa=="string"&&sa!==""?Aa=sa:x(sa)==="object"&&sa.hasOwnProperty(vs)&&(Aa=sa[vs])}else if(xr&&xr.laURL&&xr.laURL!=="")Aa=xr.laURL;else if(!(Aa=y.getLicenseServerUrlFromMediaInfo(Yt,In.schemeIdURI))&&!on.isClearKey(In)){var Es=y.getPSSHData(ys.initData);(Aa=In.getLicenseServerURLFromInitData(Es))||(Aa=Yr.laURL)}return Aa=Ec.getServerURLFromMessage(Aa,Il,vs)}(Wi,ra,qo,ui,Ao);if(Ds){var pr={},Io=!1;Wi&&vc(pr,Wi.httpRequestHeaders);var lu=ui.message;vc(pr,In.getRequestHeadersFromMessage(lu)),Object.keys(pr).forEach(function(xr){xr.toLowerCase()==="authorization"&&(Io=!0)}),Wi&&typeof Wi.withCredentials=="boolean"&&(Io=Wi.withCredentials);var Al=function(xr){if(Bn)if(xr.status>=200&&xr.status<=299){var vs=$.Z.parseHttpHeaders(xr.getAllResponseHeaders?xr.getAllResponseHeaders():null),ys=new j(xr.responseURL,vs,xr.response);si(Jn.getLicenseResponseFilters(),ys).then(function(){var Yr=Ao.getLicenseMessage(ys.data,ia,ra);Yr!==null?(bi(gt),Bn.updateKeySession(qo,Yr)):Rf(xr,gt,ia,ra,Ao)})}else Rf(xr,gt,ia,ra,Ao)},gs=function(xr){bi(gt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ia+' update, XHR aborted. status is "'+xr.statusText+'" ('+xr.status+"), readyState is "+xr.readyState))},qa=function(xr){bi(gt,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ia+' update, XHR error. status is "'+xr.statusText+'" ('+xr.status+"), readyState is "+xr.readyState))},Ou=In.getLicenseRequestFromMessage(lu),Lu=Ao.getHTTPMethod(ra),oa=Ao.getResponseType(ia,ra),aa=Wi&&!isNaN(Wi.httpTimeout)?Wi.httpTimeout:8e3,cu=qo.getSessionId()||null,ms=new b(Ds,Lu,oa,pr,Io,ra,cu,Ou),yc=isNaN(bn.get().streaming.retryAttempts[Y.w.LICENSE])?3:bn.get().streaming.retryAttempts[Y.w.LICENSE];si(Jn.getLicenseRequestFilters(),ms).then(function(){wl(ms,yc,aa,Al,gs,qa)})}else bi(gt,new I.Z(_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(Xn,Xr,Bi)}else bi(na,new I.Z(_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function bi(_n,Xn){kn.trigger(er.LICENSE_REQUEST_COMPLETE,{data:_n,error:Xn})}function wl(_n,Xn,hr,ti,Mr,Bi){var Xr=new XMLHttpRequest;if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===W.Z.CMCD_MODE_QUERY){var na=cn.getQueryParameter({url:_n.url,type:Y.w.LICENSE});na&&(_n.url=$.Z.addAditionalQueryParameterToUrl(_n.url,[na]))}for(var Di in Xr.open(_n.method,_n.url,!0),Xr.responseType=_n.responseType,Xr.withCredentials=_n.withCredentials,hr>0&&(Xr.timeout=hr),_n.headers)Xr.setRequestHeader(Di,_n.headers[Di]);if(bn.get().streaming.cmcd&&bn.get().streaming.cmcd.enabled&&bn.get().streaming.cmcd.mode===W.Z.CMCD_MODE_HEADER){var ui=cn.getHeaderParameters({url:_n.url,type:Y.w.LICENSE});if(ui)for(var Ao in ui){var Wi=ui[Ao];Wi&&Xr.setRequestHeader(Ao,Wi)}}var qo=function(){Xn--;var ra=isNaN(bn.get().streaming.retryIntervals[Y.w.LICENSE])?1e3:bn.get().streaming.retryIntervals[Y.w.LICENSE];Rn=setTimeout(function(){wl(_n,Xn,hr,ti,Mr,Bi)},ra)};Xr.onload=function(){Cn=null,this.status>=200&&this.status<=299||Xn<=0?ti(this):(an.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Xn),qo())},Xr.ontimeout=Xr.onerror=function(){Cn=null,Xn<=0?Bi(this):(an.warn("License request network request failed . Retrying it... Pending retries: "+Xn),qo())},Xr.onabort=function(){Mr(this)},kn.trigger(er.LICENSE_REQUEST_SENDING,{url:_n.url,headers:_n.headers,payload:_n.data,sessionId:_n.sessionId}),Cn=Xr,Xr.send(_n.data)}function uu(){Cn&&(Cn.onloadend=Cn.onerror=Cn.onprogress=void 0,Cn.abort(),Cn=null),Rn&&(clearTimeout(Rn),Rn=null)}function vc(_n,Xn){if(Xn)for(var hr in Xn)_n[hr]=Xn[hr]}function Rf(_n,Xn,hr,ti,Mr){var Bi="NONE",Xr=null;_n.response&&(Bi=Mr.getErrorResponse(_n.response,hr,ti),Xr={serverResponse:_n.response||null,responseCode:_n.status||null,responseText:_n.statusText||null}),bi(Xn,new I.Z(_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,_.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+hr+' update, XHR complete. status is "'+_n.statusText+'" ('+_n.status+"), readyState is "+_n.readyState+".  Response is "+Bi,Xr))}function si(_n,Xn){return _n?_n.reduce(function(hr,ti){return hr.then(function(){return ti(Xn)})},Promise.resolve()):Promise.resolve()}function Ms(_n,Xn){if(!bn.get().streaming.protection.ignoreEmeEncryptedEvent){if(an.debug("DRM: onNeedKey"),_n.key.initDataType!=="cenc")return void an.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+_n.key.initDataType);if(Yt.length===0&&(an.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Xn=Xn===void 0?1:Xn+1)<5))return void rn.push(setTimeout(function(){Ms(_n,Xn)},500));var hr=_n.key.initData;if(ArrayBuffer.isView(hr)&&(hr=hr.buffer),In){var ti=y.getPSSHForKeySystem(In,hr);if(ti&&hi(ti))return}an.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(hr)));var Mr=on.getSupportedKeySystemsFromSegmentPssh(hr,Mt,zt);if(Mr.length===0)return void an.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(Bi){wt.push(Bi),br(Bi,!1)})(Mr)}}return sn={initializeForMedia:function(_n){if(!_n)throw new Error("mediaInfo can not be null or undefined");ar(),Yt.push(_n)},clearMediaInfoArray:function(){Yt=[]},handleKeySystemFromManifest:function(){if(Yt&&Yt.length!==0){var _n=[];Yt.forEach(function(Xn){var hr=on.getSupportedKeySystemsFromContentProtection(Xn.contentProtection,Mt,zt);hr.length>0&&(_n.length===0&&(_n=hr),wt.push(hr))}),_n&&_n.length>0&&br(_n,!0)}},createKeySession:Br,loadKeySession:no,removeKeySession:function(_n){ar(),Bn.removeKeySession(_n)},closeKeySession:function(_n){ar(),Bn.closeKeySession(_n)},setServerCertificate:function(_n){ar(),Bn.setServerCertificate(_n)},setMediaElement:vi,setSessionType:function(_n){zt=_n},setRobustnessLevel:function(_n){mn=_n},setProtectionData:function(_n){Mt=_n,on.setProtectionData(_n)},getSupportedKeySystemsFromContentProtection:function(_n){return ar(),on.getSupportedKeySystemsFromContentProtection(_n,Mt,zt)},getKeySystems:function(){return on?on.getKeySystems():[]},setKeySystems:function(_n){on&&on.setKeySystems(_n)},stop:function(){uu(),Bn&&Bn.stop()},reset:function(){kn.off(er.INTERNAL_KEY_MESSAGE,ta,sn),kn.off(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),ar(),uu(),vi(null),In=null,Zn=!1,Bn&&(Bn.reset(),Bn=null),rn.forEach(function(_n){return clearTimeout(_n)}),rn=[],Yt=[],wt=[]}},an=Er.getLogger(sn),wt=[],Yt=[],zt="temporary",mn="",Cn=null,Rn=null,kn.on(er.INTERNAL_KEY_MESSAGE,ta,sn),kn.on(er.INTERNAL_KEY_STATUS_CHANGED,ro,sn),sn}X.__dashjs_factory_name="ProtectionController";var fe=ue.Z.getClassFactory(X),oe=function tn(sn,an){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keyID=sn,this.key=an};function ge(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}var Re=function(){function tn(wt,Yt){if(function(Mt,zt){if(!(Mt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,tn),Yt&&Yt!=="persistent"&&Yt!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=wt,this.type=Yt}var sn,an;return sn=tn,(an=[{key:"toJWK",value:function(){var wt,Yt=this.keyPairs.length,Mt={keys:[]};for(wt=0;wt<Yt;wt++){var zt={kty:"oct",alg:"A128KW",kid:this.keyPairs[wt].keyID,k:this.keyPairs[wt].key};Mt.keys.push(zt)}this.type&&(Mt.type=this.type);var mn=JSON.stringify(Mt),In=mn.length,Zn=new ArrayBuffer(In),Cn=new Uint8Array(Zn);for(wt=0;wt<In;wt++)Cn[wt]=mn.charCodeAt(wt);return Zn}}])&&ge(sn.prototype,an),tn}();function Je(tn,sn){for(var an=0;an<sn.length;an++){var wt=sn[an];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(tn,wt.key,wt)}}var Se=new(function(){function tn(){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.init()}var sn,an;return sn=tn,(an=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Je(sn.prototype,an),tn}()),Be="e2719d58-a985-b3c9-781a-b030af78d30e",ot=Se.CLEARKEY_KEYSTEM_STRING,st="urn:uuid:"+Be;function Ie(tn){var sn=(tn=tn||{}).BASE64;return{uuid:Be,schemeIdURI:st,systemString:ot,getInitData:function(an,wt){try{var Yt=y.parseInitDataFromContentProtection(an,sn);if(!Yt&&wt){var Mt={kids:[function(zt){try{var mn=zt.replace(/-/g,"");return(mn=btoa(mn.match(/\w{2}/g).map(function(In){return String.fromCharCode(parseInt(In,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(In){return null}}(wt["cenc:default_KID"])]};Yt=new TextEncoder().encode(JSON.stringify(Mt))}return Yt}catch(zt){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(an){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(an))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(an,wt){var Yt=null;if(an){for(var Mt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(wt))),zt=[],mn=0;mn<Mt.kids.length;mn++){var In=Mt.kids[mn],Zn=an.clearkeys&&an.clearkeys.hasOwnProperty(In)?an.clearkeys[In]:null;if(!Zn)throw new Error("DRM: ClearKey keyID ("+In+") is not known!");zt.push(new oe(In,Zn))}Yt=new Re(zt)}return Yt}}}Ie.__dashjs_factory_name="KeySystemClearKey";var Ye=dashjs.FactoryMaker.getSingletonFactory(Ie),mt="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Me=Se.CLEARKEY_KEYSTEM_STRING,We="urn:uuid:"+mt;function rt(tn){var sn,an=tn.BASE64,wt=tn.debug.getLogger(sn);return{uuid:mt,schemeIdURI:We,systemString:Me,getInitData:function(Yt){return y.parseInitDataFromContentProtection(Yt,an)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Yt){return new Uint8Array(Yt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Yt,Mt){var zt=null;if(Yt){for(var mn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Mt))),In=[],Zn=0;Zn<mn.kids.length;Zn++){var Cn=mn.kids[Zn],Rn=Yt.clearkeys&&Yt.clearkeys.hasOwnProperty(Cn)?Yt.clearkeys[Cn]:null;if(!Rn)throw new Error("DRM: ClearKey keyID ("+Cn+") is not known!");In.push(new oe(Cn,Rn))}zt=new Re(In),wt.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return zt}}}rt.__dashjs_factory_name="KeySystemW3CClearKey";var qt=dashjs.FactoryMaker.getSingletonFactory(rt),kt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",ft=Se.WIDEVINE_KEYSTEM_STRING,At="urn:uuid:"+kt;function Ce(tn){var sn=(tn=tn||{}).BASE64;return{uuid:kt,schemeIdURI:At,systemString:ft,getInitData:function(an){return y.parseInitDataFromContentProtection(an,sn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(an){return new Uint8Array(an)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ce.__dashjs_factory_name="KeySystemWidevine";var re=dashjs.FactoryMaker.getSingletonFactory(Ce),je="9a04f079-9840-4286-ab92-e65be0885f95",O=Se.PLAYREADY_KEYSTEM_STRING,M="urn:uuid:"+je;function q(tn){var sn="utf-16",an=(tn=tn||{}).BASE64,wt=tn.settings;function Yt(){if(!an||!an.hasOwnProperty("decodeArray")||!an.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:je,schemeIdURI:M,systemString:O,getInitData:function(Mt){var zt,mn,In,Zn,Cn,Rn=new Uint8Array([112,115,115,104,0,0,0,0]),on=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),Bn=0,kn=null;if(Yt(),!Mt)return null;if("pssh"in Mt)return y.parseInitDataFromContentProtection(Mt,an);if("pro"in Mt)kn=an.decodeArray(Mt.pro.__text);else{if(!("prheader"in Mt))return null;kn=an.decodeArray(Mt.prheader.__text)}return zt=kn.length,mn=4+Rn.length+on.length+4+zt,In=new ArrayBuffer(mn),Zn=new Uint8Array(In),(Cn=new DataView(In)).setUint32(Bn,mn),Bn+=4,Zn.set(Rn,Bn),Bn+=Rn.length,Zn.set(on,Bn),Bn+=on.length,Cn.setUint32(Bn,zt),Bn+=4,Zn.set(kn,Bn),Bn+=zt,Zn.buffer},getRequestHeadersFromMessage:function(Mt){var zt,mn,In={},Zn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return In["Content-Type"]="text/xml; charset=utf-8",In;var Cn=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);zt=String.fromCharCode.apply(null,Cn);for(var Rn=(mn=Zn.parseFromString(zt,"application/xml")).getElementsByTagName("name"),on=mn.getElementsByTagName("value"),Bn=0;Bn<Rn.length;Bn++)In[Rn[Bn].childNodes[0].nodeValue]=on[Bn].childNodes[0].nodeValue;return In.hasOwnProperty("Content")&&(In["Content-Type"]=In.Content,delete In.Content),In.hasOwnProperty("Content-Type")||(In["Content-Type"]="text/xml; charset=utf-8"),In},getLicenseRequestFromMessage:function(Mt){var zt=null,mn=new DOMParser;if(wt&&wt.get().streaming.protection.detectPlayreadyMessageFormat&&sn==="utf-16"&&Mt&&Mt.byteLength%2==1)return Mt;var In=sn==="utf-16"?new Uint16Array(Mt):new Uint8Array(Mt);Yt();var Zn=String.fromCharCode.apply(null,In),Cn=mn.parseFromString(Zn,"application/xml");if(!Cn.getElementsByTagName("PlayReadyKeyMessage")[0])return Mt;var Rn=Cn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return Rn&&(zt=an.decode(Rn)),zt},getLicenseServerURLFromInitData:function(Mt){if(Mt)for(var zt=new DataView(Mt),mn=zt.getUint16(4,!0),In=6,Zn=new DOMParser,Cn=0;Cn<mn;Cn++){var Rn=zt.getUint16(In,!0);In+=2;var on=zt.getUint16(In,!0);if(In+=2,Rn===1){var Bn=Mt.slice(In,In+on),kn=String.fromCharCode.apply(null,new Uint16Array(Bn)),er=Zn.parseFromString(kn,"application/xml");if(er.getElementsByTagName("LA_URL")[0]){var Er=er.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Er)return Er}if(er.getElementsByTagName("LUI_URL")[0]){var Ur=er.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Ur)return Ur}}else In+=on}return null},getCDMData:function(Mt){var zt,mn,In,Zn;if(Yt(),!Mt)return null;for(zt=[],Zn=0;Zn<Mt.length;++Zn)zt.push(Mt.charCodeAt(Zn)),zt.push(0);for(zt=String.fromCharCode.apply(null,zt),zt=an.encode(zt),mn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",zt),In=[],Zn=0;Zn<mn.length;++Zn)In.push(mn.charCodeAt(Zn)),In.push(0);return new Uint8Array(In).buffer},setPlayReadyMessageFormat:function(Mt){if(Mt!=="utf-8"&&Mt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');sn=Mt}}}q.__dashjs_factory_name="KeySystemPlayReady";var K=dashjs.FactoryMaker.getSingletonFactory(q);function _e(tn){var sn=(tn=tn||{}).BASE64,an={};return an[Se.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(wt){return sn.decodeArray(wt.license)},getErrorResponse:function(wt){return wt}},an[Se.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(wt){return wt},getErrorResponse:function(wt){return String.fromCharCode.apply(null,new Uint8Array(wt))}},{getServerURLFromMessage:function(wt){return wt},getHTTPMethod:function(){return"POST"},getResponseType:function(wt){return an[wt].responseType},getLicenseMessage:function(wt,Yt){return function(){if(!sn||!sn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),an[Yt].getLicenseMessage(wt)},getErrorResponse:function(wt,Yt){return an[Yt].getErrorResponse(wt)}}}_e.__dashjs_factory_name="DRMToday";var de=dashjs.FactoryMaker.getSingletonFactory(_e);function Ke(){var tn="http://schemas.xmlsoap.org/soap/envelope/";function sn(Yt){var Mt=String.fromCharCode.apply(null,new Uint8Array(Yt));return decodeURIComponent(escape(Mt))}function an(Yt){if(window.DOMParser){var Mt=sn(Yt),zt=new window.DOMParser().parseFromString(Mt,"text/xml"),mn=zt?zt.getElementsByTagNameNS(tn,"Envelope")[0]:null,In=mn?mn.getElementsByTagNameNS(tn,"Body")[0]:null;if(In&&In.getElementsByTagNameNS(tn,"Fault")[0])return null}return Yt}function wt(Yt){var Mt="",zt="",mn="",In=-1,Zn=-1;if(window.DOMParser){var Cn=sn(Yt),Rn=new window.DOMParser().parseFromString(Cn,"text/xml"),on=Rn?Rn.getElementsByTagNameNS(tn,"Envelope")[0]:null,Bn=on?on.getElementsByTagNameNS(tn,"Body")[0]:null,kn=Bn?Bn.getElementsByTagNameNS(tn,"Fault")[0]:null,er=kn?kn.getElementsByTagName("detail")[0]:null,Er=er?er.getElementsByTagName("Exception")[0]:null,Ur=null;if(kn===null)return Cn;Mt=(Ur=kn.getElementsByTagName("faultstring")[0].firstChild)?Ur.nodeValue:null,Er!==null&&(zt=(Ur=Er.getElementsByTagName("StatusCode")[0])?Ur.firstChild.nodeValue:null,In=(mn=(Ur=Er.getElementsByTagName("Message")[0])?Ur.firstChild.nodeValue:null)?mn.lastIndexOf("[")+1:-1,Zn=mn?mn.indexOf("]"):-1,mn=mn?mn.substring(In,Zn):"")}var Vn="code: ".concat(zt,", name: ").concat(Mt);return mn&&(Vn+=", message: ".concat(mn)),Vn}return{getServerURLFromMessage:function(Yt){return Yt},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Yt){return an.call(this,Yt)},getErrorResponse:function(Yt){return wt.call(this,Yt)}}}Ke.__dashjs_factory_name="PlayReady";var St=ue.Z.getSingletonFactory(Ke);function ut(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(tn){return tn},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}ut.__dashjs_factory_name="Widevine";var at=dashjs.FactoryMaker.getSingletonFactory(ut);function tt(){return{getServerURLFromMessage:function(tn){return tn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(tn){if(!tn.hasOwnProperty("keys"))return null;for(var sn=[],an=0;an<tn.keys.length;an++){var wt=tn.keys[an],Yt=wt.kid.replace(/=/g,""),Mt=wt.k.replace(/=/g,"");sn.push(new oe(Yt,Mt))}return new Re(sn)},getErrorResponse:function(tn){return String.fromCharCode.apply(null,new Uint8Array(tn))}}}tt.__dashjs_factory_name="ClearKey";var dt=dashjs.FactoryMaker.getSingletonFactory(tt);function Et(){var tn,sn,an,wt,Yt,Mt,zt,mn,In=this.context;function Zn(on,Bn){return Bn&&on in Bn?Bn[on]:null}function Cn(on,Bn){return on&&on.sessionId?on.sessionId:Bn&&Bn.sessionId?Bn.sessionId:null}function Rn(on,Bn){return on&&on.sessionType?on.sessionType:Bn}return tn={initialize:function(){var on;wt=[],on=K(In).getInstance({BASE64:Yt,settings:Mt}),wt.push(on),on=re(In).getInstance({BASE64:Yt}),wt.push(on),on=Ye(In).getInstance({BASE64:Yt}),wt.push(on),zt=on,on=qt(In).getInstance({BASE64:Yt,debug:sn}),wt.push(on),mn=on},setProtectionData:function(on){for(var Bn,kn,er=0;er<wt.length;er++){var Er=wt[er];Er.hasOwnProperty("init")&&Er.init((Bn=Er.systemString,kn=void 0,kn=null,on&&(kn=Bn in on?on[Bn]:null),kn))}},isClearKey:function(on){return on===zt||on===mn},initDataEquals:function(on,Bn){if(on.byteLength===Bn.byteLength){for(var kn=new Uint8Array(on),er=new Uint8Array(Bn),Er=0;Er<kn.length;Er++)if(kn[Er]!==er[Er])return!1;return!0}return!1},getKeySystems:function(){return wt},setKeySystems:function(on){wt=on},getKeySystemBySystemString:function(on){for(var Bn=0;Bn<wt.length;Bn++)if(wt[Bn].systemString===on)return wt[Bn];return null},getSupportedKeySystemsFromContentProtection:function(on,Bn,kn){var er,Er,Ur,Vn,rn=[];if(on){var cn=y.findCencContentProtection(on);for(Ur=0;Ur<wt.length;++Ur){var bn=Zn((Er=wt[Ur]).systemString,Bn);for(Vn=0;Vn<on.length;++Vn)if((er=on[Vn]).schemeIdUri.toLowerCase()===Er.schemeIdURI){var Jn=Er.getInitData(er,cn);rn.push({ks:wt[Ur],keyId:er.keyId,initData:Jn,protData:bn,cdmData:Er.getCDMData(bn?bn.cdmData:null),sessionId:Cn(bn,er),sessionType:Rn(bn,kn)})}}}return rn},getSupportedKeySystemsFromSegmentPssh:function(on,Bn,kn){for(var er,Er=[],Ur=y.parsePSSHList(on),Vn=0;Vn<wt.length;++Vn){var rn=Zn((er=wt[Vn]).systemString,Bn);er.uuid in Ur&&Er.push({ks:er,initData:Ur[er.uuid],protData:rn,cdmData:er.getCDMData(rn?rn.cdmData:null),sessionId:Cn(rn),sessionType:Rn(rn,kn)})}return Er},getLicenseServerModelInstance:function(on,Bn,kn){if(kn==="license-release"||kn==="individualization-request")return null;var er=null;return Bn&&Bn.hasOwnProperty("drmtoday")?er=de(In).getInstance({BASE64:Yt}):on.systemString===Se.WIDEVINE_KEYSTEM_STRING?er=at(In).getInstance():on.systemString===Se.PLAYREADY_KEYSTEM_STRING?er=St(In).getInstance():on.systemString===Se.CLEARKEY_KEYSTEM_STRING&&(er=dt(In).getInstance()),er},processClearKeyLicenseRequest:function(on,Bn,kn){try{return on.getClearKeysFromProtectionData(Bn,kn)}catch(er){return an.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(on){on&&(on.debug&&(sn=on.debug,an=sn.getLogger(tn)),on.BASE64&&(Yt=on.BASE64),on.settings&&(Mt=on.settings))}},tn}Et.__dashjs_factory_name="ProtectionKeyController";var Tt=dashjs.FactoryMaker.getSingletonFactory(Et);function Rt(tn){return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn},Rt(tn)}function hn(tn,sn){return hn=Object.setPrototypeOf||function(an,wt){return an.__proto__=wt,an},hn(tn,sn)}function Qt(tn,sn){return!sn||Rt(sn)!=="object"&&typeof sn!="function"?function(an){if(an===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an}(tn):sn}function nn(tn){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)},nn(tn)}var Ot=new(function(tn){(function(Mt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),zt&&hn(Mt,zt)})(Yt,tn);var sn,an,wt=(sn=Yt,an=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Mt){return!1}}(),function(){var Mt,zt=nn(sn);if(an){var mn=nn(this).constructor;Mt=Reflect.construct(zt,arguments,mn)}else Mt=zt.apply(this,arguments);return Qt(this,Mt)});function Yt(){var Mt;return function(zt,mn){if(!(zt instanceof mn))throw new TypeError("Cannot call a class as a function")}(this,Yt),(Mt=wt.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Mt.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Mt.KEY_ADDED="public_keyAdded",Mt.KEY_ERROR="public_keyError",Mt.KEY_MESSAGE="public_keyMessage",Mt.KEY_SESSION_CLOSED="public_keySessionClosed",Mt.KEY_SESSION_CREATED="public_keySessionCreated",Mt.KEY_SESSION_REMOVED="public_keySessionRemoved",Mt.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Mt.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Mt.KEY_SYSTEM_SELECTED="public_keySystemSelected",Mt.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Mt.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Mt.NEED_KEY="needkey",Mt.PROTECTION_CREATED="public_protectioncreated",Mt.PROTECTION_DESTROYED="public_protectiondestroyed",Mt.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Mt.TEARDOWN_COMPLETE="protectionTeardownComplete",Mt.VIDEO_ELEMENT_SELECTED="videoElementSelected",Mt.KEY_SESSION_UPDATED="public_keySessionUpdated",Mt}return Yt}(A(8342).Z)),Un=function tn(sn,an){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.initData=sn,this.initDataType=an},gr=function tn(sn,an,wt,Yt){(function(Mt,zt){if(!(Mt instanceof zt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.sessionToken=sn,this.message=an,this.defaultURL=wt,this.messageType=Yt||"license-request"},Or=function tn(sn,an){(function(wt,Yt){if(!(wt instanceof Yt))throw new TypeError("Cannot call a class as a function")})(this,tn),this.keySystem=sn,this.ksConfiguration=an},dr={};function ei(tn){tn=tn||{};var sn,an,wt,Yt,Mt,zt,mn,In,Zn=this.context,Cn=tn.eventBus,Rn=tn.events,on=tn.debug;function Bn(rn,cn,bn,Jn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var ar="Insecure origins are not allowed";return Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:ar}),void Jn({error:ar})}var br=rn[cn].protData&&rn[cn].protData.systemStringPriority?rn[cn].protData.systemStringPriority:null,kr=rn[cn].configs,Yi=rn[cn].ks,no=Yi.systemString;(function(Br,qr){return new Promise(function(hi,vi){kn(Br,qr,0,hi,vi)})})(br||(dr[no]?dr[no]:[no]),kr).then(function(Br){var qr=typeof Br.getConfiguration=="function"?Br.getConfiguration():null,hi=new Or(Yi,qr);hi.mksa=Br,Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{data:hi}),bn({data:hi})}).catch(function(Br){if(cn+1<rn.length)Bn(rn,cn+1,bn,Jn);else{var qr="Key system access denied! ";Cn.trigger(Rn.KEY_SYSTEM_ACCESS_COMPLETE,{error:qr+Br.message}),Jn({error:qr+Br.message})}})}function kn(rn,cn,bn,Jn,ar){var br=rn[bn];an.debug("Requesting key system access for system string ".concat(br)),navigator.requestMediaKeySystemAccess(br,cn).then(function(kr){kr.selectedSystemString=br,Jn(kr)}).catch(function(kr){bn+1<rn.length?kn(rn,cn,bn+1,Jn,ar):ar(kr)})}function er(rn){if(!rn||!rn.session)return Promise.resolve;var cn=rn.session;return cn.removeEventListener("keystatuseschange",rn),cn.removeEventListener("message",rn),cn.close()}function Er(rn){for(var cn=0;cn<zt.length;cn++)if(zt[cn]===rn){zt.splice(cn,1);break}}function Ur(rn){var cn,bn;return rn&&rn.length>0&&(rn[0]&&(typeof rn[0]=="string"?cn=rn[0]:bn=rn[0]),rn[1]&&(typeof rn[1]=="string"?cn=rn[1]:bn=rn[1])),{status:cn,keyId:bn}}function Vn(rn,cn){var bn={session:rn,keyId:cn.keyId,initData:cn.initData,sessionId:cn.sessionId,sessionType:cn.sessionType,handleEvent:function(Jn){switch(Jn.type){case"keystatuseschange":Cn.trigger(Rn.KEY_STATUSES_CHANGED,{data:this}),Jn.target.keyStatuses.forEach(function(){var br=Ur(arguments);br.status==="expired"?Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,{error:new I.Z(_.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):Cn.trigger(Rn.INTERNAL_KEY_STATUS_CHANGED,br)});break;case"message":var ar=ArrayBuffer.isView(Jn.message)?Jn.message.buffer:Jn.message;Cn.trigger(Rn.INTERNAL_KEY_MESSAGE,{data:new gr(this,ar,void 0,Jn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return rn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rn.expiration},getKeyStatuses:function(){return rn.keyStatuses},getUsable:function(){var Jn=!1;return rn.keyStatuses.forEach(function(){var ar=Ur(arguments);ar.status==="usable"&&(Jn=!0)}),Jn}};return rn.addEventListener("keystatuseschange",bn),rn.addEventListener("message",bn),rn.closed.then(function(){Er(bn),an.debug("DRM: Session closed.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:bn.getSessionId()})}),zt.push(bn),bn}return sn={getAllInitData:function(){for(var rn=[],cn=0;cn<zt.length;cn++)zt[cn].initData&&rn.push(zt[cn].initData);return rn},getSessions:function(){return zt},requestKeySystemAccess:function(rn){return new Promise(function(cn,bn){Bn(rn,0,cn,bn)})},selectKeySystem:function(rn){return new Promise(function(cn,bn){rn.mksa.createMediaKeys().then(function(Jn){return wt=rn.keySystem,Mt=Jn,Yt?Yt.setMediaKeys(Mt):Promise.resolve()}).then(function(){cn(wt)}).catch(function(){bn({error:"Error selecting keys system ("+rn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(rn){Yt!==rn&&(Yt&&(Yt.removeEventListener("encrypted",mn),Yt.setMediaKeys&&Yt.setMediaKeys(null)),(Yt=rn)&&(Yt.addEventListener("encrypted",mn),Yt.setMediaKeys&&Mt&&Yt.setMediaKeys(Mt)))},setServerCertificate:function(rn){if(!wt||!Mt)throw new Error("Can not set server certificate until you have selected a key system");Mt.setServerCertificate(rn).then(function(){an.info("DRM: License server certificate successfully updated."),Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED)}).catch(function(cn){Cn.trigger(Rn.SERVER_CERTIFICATE_UPDATED,{error:new I.Z(_.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+cn.name)})})},createKeySession:function(rn){if(!wt||!Mt)throw new Error("Can not create sessions until you have selected a key system");var cn=Mt.createSession(rn.sessionType),bn=Vn(cn,rn),Jn=wt.systemString===Se.CLEARKEY_KEYSTEM_STRING&&(rn.initData||rn.protData&&rn.protData.clearkeys)?Se.INITIALIZATION_DATA_TYPE_KEYIDS:Se.INITIALIZATION_DATA_TYPE_CENC;cn.generateRequest(Jn,rn.initData).then(function(){an.debug("DRM: Session created.  SessionID = "+bn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:bn})}).catch(function(ar){Er(bn),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ar.name)})})},updateKeySession:function(rn,cn){var bn=rn.session;In.isClearKey(wt)&&(cn=cn.toJWK()),bn.update(cn).then(function(){Cn.trigger(Rn.KEY_SESSION_UPDATED)}).catch(function(Jn){Cn.trigger(Rn.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"Error sending update() message! "+Jn.name,rn)})})},loadKeySession:function(rn){if(!wt||!Mt)throw new Error("Can not load sessions until you have selected a key system");for(var cn=rn.sessionId,bn=0;bn<zt.length;bn++)if(cn===zt[bn].sessionId)return void an.warn("DRM: Ignoring session ID because we have already seen it!");var Jn=Mt.createSession(rn.sessionType),ar=Vn(Jn,rn);Jn.load(cn).then(function(br){br?(an.debug("DRM: Session loaded.  SessionID = "+ar.getSessionId()),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:ar})):(Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+cn+")")}))}).catch(function(br){Er(ar),Cn.trigger(Rn.KEY_SESSION_CREATED,{data:null,error:new I.Z(_.KEY_SESSION_CREATED_ERROR_CODE,_.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+cn+")! "+br.name)})})},removeKeySession:function(rn){rn.session.remove().then(function(){an.debug("DRM: Session removed.  SessionID = "+rn.getSessionId()),Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:rn.getSessionId()})},function(cn){Cn.trigger(Rn.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rn.getSessionId()+"). "+cn.name})})},closeKeySession:function(rn){er(rn).catch(function(cn){Er(rn),Cn.trigger(Rn.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rn.getSessionId()+") "+cn.name})})},stop:function(){for(var rn,cn=0;cn<zt.length;cn++)(rn=zt[cn]).getUsable()||(er(rn),Er(rn))},reset:function(){var rn,cn=zt.length;cn!==0?function(){for(var bn=function(ar){Er(ar),zt.length===0&&(Yt?(Yt.removeEventListener("encrypted",mn),Yt.setMediaKeys(null).then(function(){Cn.trigger(Rn.TEARDOWN_COMPLETE)})):Cn.trigger(Rn.TEARDOWN_COMPLETE))},Jn=0;Jn<cn;Jn++)(function(ar){er(rn),bn(ar)})(rn=zt[Jn])}():Cn.trigger(Rn.TEARDOWN_COMPLETE)}},an=on.getLogger(sn),wt=null,Yt=null,Mt=null,zt=[],In=Tt(Zn).getInstance(),mn={handleEvent:function(rn){if(rn.type==="encrypted"&&rn.initData){var cn=ArrayBuffer.isView(rn.initData)?rn.initData.buffer:rn.initData;Cn.trigger(Rn.NEED_KEY,{key:new Un(cn,rn.initDataType)})}}},sn}dr[Se.PLAYREADY_KEYSTEM_STRING]=[Se.PLAYREADY_KEYSTEM_STRING,Se.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],dr[Se.WIDEVINE_KEYSTEM_STRING]=[Se.WIDEVINE_KEYSTEM_STRING],dr[Se.CLEARKEY_KEYSTEM_STRING]=[Se.CLEARKEY_KEYSTEM_STRING],ei.__dashjs_factory_name="ProtectionModel_21Jan2015";var Ji=dashjs.FactoryMaker.getClassFactory(ei);function Lr(tn){tn=tn||{};var sn,an,wt,Yt,Mt,zt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api;function er(){try{for(var Vn=0;Vn<mn.length;Vn++)Er(mn[Vn]);wt&&wt.removeEventListener(kn.needkey,In),Rn.trigger(on.TEARDOWN_COMPLETE)}catch(rn){Rn.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+rn.message})}}function Er(Vn){var rn=Vn.session;rn.removeEventListener(kn.error,Vn),rn.removeEventListener(kn.message,Vn),rn.removeEventListener(kn.ready,Vn),rn.removeEventListener(kn.close,Vn);for(var cn=0;cn<mn.length;cn++)if(mn[cn]===Vn){mn.splice(cn,1);break}rn[kn.release]()}function Ur(){var Vn=null,rn=function(){wt.removeEventListener("loadedmetadata",Vn),wt[kn.setMediaKeys](Mt),Rn.trigger(on.VIDEO_ELEMENT_SELECTED)};wt.readyState>=1?rn():(Vn=rn.bind(this),wt.addEventListener("loadedmetadata",Vn))}return sn={getAllInitData:function(){for(var Vn=[],rn=0;rn<mn.length;rn++)Vn.push(mn[rn].initData);return Vn},getSessions:function(){return mn},requestKeySystemAccess:function(Vn){return new Promise(function(rn,cn){for(var bn=!1,Jn=0;Jn<Vn.length;Jn++)for(var ar=Vn[Jn].ks.systemString,br=Vn[Jn].configs,kr=null,Yi=null,no=0;no<br.length;no++){var Br=br[no].audioCapabilities,qr=br[no].videoCapabilities;if(Br&&Br.length!==0){kr=[];for(var hi=0;hi<Br.length;hi++)window[kn.MediaKeys].isTypeSupported(ar,Br[hi].contentType)&&kr.push(Br[hi])}if(qr&&qr.length!==0){Yi=[];for(var vi=0;vi<qr.length;vi++)window[kn.MediaKeys].isTypeSupported(ar,qr[vi].contentType)&&Yi.push(qr[vi])}if(!(!kr&&!Yi||kr&&kr.length===0||Yi&&Yi.length===0)){bn=!0;var wo=new D(kr,Yi),ro=Zn.getKeySystemBySystemString(ar),ta=new Or(ro,wo);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ta}),rn({data:ta});break}}if(!bn){var bi="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:bi}),cn({error:bi})}})},selectKeySystem:function(Vn){return new Promise(function(rn,cn){try{Mt=Vn.mediaKeys=new window[kn.MediaKeys](Vn.keySystem.systemString),Yt=Vn.keySystem,zt=Vn,wt&&Ur(),rn(Yt)}catch(bn){cn({error:"Error selecting keys system ("+Yt.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(Vn){wt!==Vn&&(wt&&wt.removeEventListener(kn.needkey,In),(wt=Vn)&&(wt.addEventListener(kn.needkey,In),Mt&&Ur()))},createKeySession:function(Vn){if(!Yt||!Mt||!zt)throw new Error("Can not create sessions until you have selected a key system");var rn=null;if(zt.ksConfiguration.videoCapabilities&&zt.ksConfiguration.videoCapabilities.length>0&&(rn=zt.ksConfiguration.videoCapabilities[0]),rn===null&&zt.ksConfiguration.audioCapabilities&&zt.ksConfiguration.audioCapabilities.length>0&&(rn=zt.ksConfiguration.audioCapabilities[0]),rn===null)throw new Error("Can not create sessions for unknown content types.");var cn=rn.contentType,bn=Mt.createSession(cn,new Uint8Array(Vn.initData),Vn.cdmData?new Uint8Array(Vn.cdmData):null),Jn=function(ar,br){return{session:ar,keyId:br.keyId,initData:br.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(kr){switch(kr.type){case kn.error:Rn.trigger(on.KEY_ERROR,{error:new I.Z(_.MEDIA_KEYERR_CODE,"KeyError",this)});break;case kn.message:var Yi=ArrayBuffer.isView(kr.message)?kr.message.buffer:kr.message;Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(this,Yi,kr.destinationURL)});break;case kn.ready:an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED);break;case kn.close:an.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),Rn.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(bn,Vn);bn.addEventListener(kn.error,Jn),bn.addEventListener(kn.message,Jn),bn.addEventListener(kn.ready,Jn),bn.addEventListener(kn.close,Jn),mn.push(Jn),an.debug("DRM: Session created.  SessionID = "+Jn.getSessionId()),Rn.trigger(on.KEY_SESSION_CREATED,{data:Jn})},updateKeySession:function(Vn,rn){var cn=Vn.session;Zn.isClearKey(Yt)?cn.update(new Uint8Array(rn.toJWK())):cn.update(new Uint8Array(rn)),Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:er,reset:er},an=Bn.getLogger(sn),wt=null,Yt=null,Mt=null,zt=null,mn=[],Zn=Tt(Cn).getInstance(),In={handleEvent:function(Vn){if(Vn.type===kn.needkey&&Vn.initData){var rn=ArrayBuffer.isView(Vn.initData)?Vn.initData.buffer:Vn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(rn,"cenc")})}}},sn}Lr.__dashjs_factory_name="ProtectionModel_3Feb2014";var eo=dashjs.FactoryMaker.getClassFactory(Lr);function _i(tn){tn=tn||{};var sn,an,wt,Yt,Mt,zt,mn,In,Zn,Cn=this.context,Rn=tn.eventBus,on=tn.events,Bn=tn.debug,kn=tn.api,er=tn.errHandler;function Er(){wt&&rn();for(var cn=0;cn<mn.length;cn++)Ur(mn[cn]);Rn.trigger(on.TEARDOWN_COMPLETE)}function Ur(cn){try{wt[kn.cancelKeyRequest](Yt.systemString,cn.sessionId)}catch(bn){Rn.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+cn.sessionId+") "+bn.message})}}function Vn(cn,bn){if(bn&&cn){for(var Jn=cn.length,ar=0;ar<Jn;ar++)if(cn[ar].sessionId==bn)return cn[ar];return null}return null}function rn(){wt.removeEventListener(kn.keyerror,Zn),wt.removeEventListener(kn.needkey,Zn),wt.removeEventListener(kn.keymessage,Zn),wt.removeEventListener(kn.keyadded,Zn)}return sn={getAllInitData:function(){for(var cn=[],bn=0;bn<zt.length;bn++)cn.push(zt[bn].initData);for(var Jn=0;Jn<mn.length;Jn++)cn.push(mn[Jn].initData);return cn},getSessions:function(){return mn.concat(zt)},requestKeySystemAccess:function(cn){return new Promise(function(bn,Jn){var ar=wt;ar||(ar=document.createElement("video"));for(var br=!1,kr=0;kr<cn.length;kr++)for(var Yi=cn[kr].ks.systemString,no=cn[kr].configs,Br=null,qr=0;qr<no.length;qr++){var hi=no[qr].videoCapabilities;if(hi&&hi.length!==0){Br=[];for(var vi=0;vi<hi.length;vi++)ar.canPlayType(hi[vi].contentType,Yi)!==""&&Br.push(hi[vi])}if(Br&&(!Br||Br.length!==0)){br=!0;var wo=new D(null,Br),ro=Mt.getKeySystemBySystemString(Yi),ta=new Or(ro,wo);Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:ta}),bn({data:ta});break}}if(!br){var bi="Key system access denied! -- No valid audio/video content configurations detected!";Rn.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:bi}),Jn({error:bi})}})},selectKeySystem:function(cn){return Yt=cn.keySystem,Promise.resolve(Yt)},setMediaElement:function(cn){if(wt!==cn){if(wt){rn();for(var bn=0;bn<mn.length;bn++)Ur(mn[bn]);mn=[]}(wt=cn)&&(wt.addEventListener(kn.keyerror,Zn),wt.addEventListener(kn.needkey,Zn),wt.addEventListener(kn.keymessage,Zn),wt.addEventListener(kn.keyadded,Zn),Rn.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(cn){if(!Yt)throw new Error("Can not create sessions until you have selected a key system");if(In||mn.length===0){var bn={sessionId:null,keyId:cn.keyId,initData:cn.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return zt.push(bn),wt[kn.generateKeyRequest](Yt.systemString,new Uint8Array(cn.initData)),bn}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(cn,bn){var Jn=cn.sessionId;if(Mt.isClearKey(Yt))for(var ar=0;ar<bn.keyPairs.length;ar++)wt[kn.addKey](Yt.systemString,bn.keyPairs[ar].key,bn.keyPairs[ar].keyID,Jn);else wt[kn.addKey](Yt.systemString,new Uint8Array(bn),new Uint8Array(cn.initData),Jn);Rn.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Ur,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Er,reset:Er},an=Bn.getLogger(sn),wt=null,Yt=null,zt=[],mn=[],Mt=Tt(Cn).getInstance(),Zn={handleEvent:function(cn){var bn=null;switch(cn.type){case kn.needkey:var Jn=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;Rn.trigger(on.NEED_KEY,{key:new Un(Jn,"cenc")});break;case kn.keyerror:if((bn=Vn(mn,cn.sessionId))||(bn=Vn(zt,cn.sessionId)),bn){var ar=_.MEDIA_KEYERR_CODE,br="";switch(cn.errorCode.code){case 1:ar=_.MEDIA_KEYERR_UNKNOWN_CODE,br+="MEDIA_KEYERR_UNKNOWN - "+_.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ar=_.MEDIA_KEYERR_CLIENT_CODE,br+="MEDIA_KEYERR_CLIENT - "+_.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ar=_.MEDIA_KEYERR_SERVICE_CODE,br+="MEDIA_KEYERR_SERVICE - "+_.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ar=_.MEDIA_KEYERR_OUTPUT_CODE,br+="MEDIA_KEYERR_OUTPUT - "+_.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ar=_.MEDIA_KEYERR_HARDWARECHANGE_CODE,br+="MEDIA_KEYERR_HARDWARECHANGE - "+_.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ar=_.MEDIA_KEYERR_DOMAIN_CODE,br+="MEDIA_KEYERR_DOMAIN - "+_.MEDIA_KEYERR_DOMAIN_MESSAGE}br+="  System Code = "+cn.systemCode,Rn.trigger(on.KEY_ERROR,{error:new I.Z(ar,br,bn)})}else an.error("No session token found for key error");break;case kn.keyadded:(bn=Vn(mn,cn.sessionId))||(bn=Vn(zt,cn.sessionId)),bn?(an.debug("DRM: Key added."),Rn.trigger(on.KEY_ADDED,{data:bn})):an.debug("No session token found for key added");break;case kn.keymessage:if((In=cn.sessionId!==null&&cn.sessionId!==void 0)?!(bn=Vn(mn,cn.sessionId))&&zt.length>0&&(bn=zt.shift(),mn.push(bn),bn.sessionId=cn.sessionId,Rn.trigger(on.KEY_SESSION_CREATED,{data:bn})):zt.length>0&&(bn=zt.shift(),mn.push(bn),zt.length!==0&&er.error(new I.Z(_.MEDIA_KEY_MESSAGE_ERROR_CODE,_.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),bn){var kr=ArrayBuffer.isView(cn.message)?cn.message.buffer:cn.message;bn.keyMessage=kr,Rn.trigger(on.INTERNAL_KEY_MESSAGE,{data:new gr(bn,kr,cn.defaultURL)})}else an.warn("No session token found for key message")}}},sn}_i.__dashjs_factory_name="ProtectionModel_01b";var Mi=dashjs.FactoryMaker.getClassFactory(_i),zi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],to=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Ti(){var tn,sn=this.context;function an(wt,Yt){for(var Mt=0;Mt<Yt.length;Mt++){var zt=Yt[Mt];if(typeof wt[zt[Object.keys(zt)[0]]]=="function")return zt}return null}return tn={createProtectionSystem:function(wt){var Yt=null,Mt=Tt(sn).getInstance();Mt.setConfig({debug:wt.debug,BASE64:wt.BASE64,settings:wt.settings}),Mt.initialize();var zt=function(mn){var In=mn.debug,Zn=In.getLogger(tn),Cn=mn.eventBus,Rn=mn.errHandler,on=mn.videoModel?mn.videoModel.getElement():null;return on&&on.onencrypted===void 0||on&&on.mediaKeys===void 0?an(on,to)?(Zn.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),eo(sn).create({debug:In,eventBus:Cn,events:mn.events,api:an(on,to)})):an(on,zi)?(Zn.info("EME detected on this user agent! (ProtectionModel_01b)"),Mi(sn).create({debug:In,eventBus:Cn,errHandler:Rn,events:mn.events,api:an(on,zi)})):(Zn.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Zn.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Ji(sn).create({debug:In,eventBus:Cn,events:mn.events}))}(wt);return!Yt&&zt&&(Yt=fe(sn).create({protectionModel:zt,protectionKeyController:Mt,eventBus:wt.eventBus,debug:wt.debug,events:wt.events,BASE64:wt.BASE64,constants:wt.constants,cmcdModel:wt.cmcdModel,customParametersModel:wt.customParametersModel,settings:wt.settings}),wt.capabilities.setEncryptedMediaSupported(!0)),Yt}}}Ti.__dashjs_factory_name="Protection";var Qn=dashjs.FactoryMaker.getClassFactory(Ti);Qn.events=Ot,Qn.errors=_,dashjs.FactoryMaker.updateClassFactory(Ti.__dashjs_factory_name,Qn);var Pu=Qn},2068:function(R,g,A){var U=A(5448),C={DEFAULT:.5,STRONG:1,WEAK:0};function y(D,m,T){var F,N;return F=D===void 0?-1:D,N=function(_){var I=C.DEFAULT;return _!==C.DEFAULT&&_!==C.STRONG&&_!==C.WEAK||(I=_),I}(T),{quality:F,reason:m===void 0?null:m,priority:N}}y.__dashjs_factory_name="SwitchRequest";var v=U.Z.getClassFactory(y);v.NO_CHANGE=-1,v.PRIORITY=C,U.Z.updateClassFactory(y.__dashjs_factory_name,v),g.Z=v},1767:function(R,g,A){var U=A(5628),C=A(6535),y=A(7423),v=A(895),D=A(6070),m=A(3112),T=A(1914),F=A(5435),N=A(5448),_=A(2068),I=A(3393),b="qualitySwitchRules",j="abandonFragmentRules";function Y(W){W=W||{};var ue,x,X=this.context,fe=W.mediaPlayerModel,oe=W.customParametersModel,ge=W.dashMetrics,Re=W.settings;function Je(Be){return Be.filter(function(ot){return ot.quality>_.Z.NO_CHANGE})}function Se(Be){var ot,st,Ie,Ye,mt,Me={},We=null;if(Be.length!==0){for(Me[_.Z.PRIORITY.STRONG]={quality:_.Z.NO_CHANGE,reason:null},Me[_.Z.PRIORITY.WEAK]={quality:_.Z.NO_CHANGE,reason:null},Me[_.Z.PRIORITY.DEFAULT]={quality:_.Z.NO_CHANGE,reason:null},ot=0,st=Be.length;ot<st;ot+=1)(Ie=Be[ot]).quality!==_.Z.NO_CHANGE&&(Me[Ie.priority].quality===_.Z.NO_CHANGE||Me[Ie.priority].quality>Ie.quality)&&(Me[Ie.priority].quality=Ie.quality,Me[Ie.priority].reason=Ie.reason||null);return Me[_.Z.PRIORITY.WEAK].quality!==_.Z.NO_CHANGE&&(We=Me[_.Z.PRIORITY.WEAK]),Me[_.Z.PRIORITY.DEFAULT].quality!==_.Z.NO_CHANGE&&(We=Me[_.Z.PRIORITY.DEFAULT]),Me[_.Z.PRIORITY.STRONG].quality!==_.Z.NO_CHANGE&&(We=Me[_.Z.PRIORITY.STRONG]),We&&(Ye=We.quality,mt=We.reason),(0,_.Z)(X).create(Ye,mt)}}return{initialize:function(){ue=[],x=[],Re.get().streaming.abr.useDefaultABRRules&&(Re.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_L2A?ue.push((0,T.Z)(X).create({dashMetrics:ge,settings:Re})):Re.get().streaming.abr.ABRStrategy===I.Z.ABR_STRATEGY_LoLP?ue.push((0,F.Z)(X).create({dashMetrics:ge})):(ue.push((0,m.Z)(X).create({dashMetrics:ge,mediaPlayerModel:fe,settings:Re})),ue.push((0,U.Z)(X).create({dashMetrics:ge})),Re.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&ue.push((0,C.Z)(X).create({dashMetrics:ge,settings:Re})),Re.get().streaming.abr.additionalAbrRules.switchHistoryRule&&ue.push((0,D.Z)(X).create()),Re.get().streaming.abr.additionalAbrRules.droppedFramesRule&&ue.push((0,v.Z)(X).create()),Re.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&x.push((0,y.Z)(X).create({dashMetrics:ge,mediaPlayerModel:fe,settings:Re})))),oe.getAbrCustomRules().forEach(function(Be){Be.type===b&&ue.push(Be.rule(X).create()),Be.type===j&&x.push(Be.rule(X).create())})},reset:function(){[ue,x].forEach(function(Be){Be&&Be.length&&Be.forEach(function(ot){return ot.reset&&ot.reset()})}),ue=[],x=[]},getMaxQuality:function(Be){return Se(Je(ue.map(function(ot){return ot.getMaxIndex(Be)})))||(0,_.Z)(X).create()},getMinSwitchRequest:Se,shouldAbandonFragment:function(Be,ot){var st=Se(Je(x.map(function(Ie){return Ie.shouldAbandon(Be,ot)})));return st&&(st.reason.forceAbandon=!0),st||(0,_.Z)(X).create()},getQualitySwitchRules:function(){return ue}}}Y.__dashjs_factory_name="ABRRulesCollection";var $=N.Z.getClassFactory(Y);$.QUALITY_SWITCH_RULES=b,$.ABANDON_FRAGMENT_RULES=j,N.Z.updateSingletonFactory(Y.__dashjs_factory_name,$),g.Z=$},7423:function(R,g,A){var U=A(2068),C=A(5448),y=A(6398);function v(D){D=D||{};var m,T,F,N,_,I=this.context,b=D.mediaPlayerModel,j=D.dashMetrics,Y=D.settings;function $(){F={},N={},_=[]}return m={shouldAbandon:function(W){var ue=(0,U.Z)(I).create(U.Z.NO_CHANGE,{name:v.__dashjs_factory_name});if(!(W&&W.hasOwnProperty("getMediaInfo")&&W.hasOwnProperty("getMediaType")&&W.hasOwnProperty("getCurrentRequest")&&W.hasOwnProperty("getRepresentationInfo")&&W.hasOwnProperty("getAbrController")))return ue;var x,X,fe=W.getMediaInfo(),oe=W.getMediaType(),ge=W.getStreamInfo(),Re=ge?ge.id:null,Je=W.getCurrentRequest();if(!isNaN(Je.index)){x=oe,X=Je.index,F[x]=F[x]||{},F[x][X]=F[x][X]||{};var Se=b.getStableBufferTime();if(j.getCurrentBufferLevel(oe)>Se)return ue;var Be=F[oe][Je.index];if(Be===null||Je.firstByteDate===null||N.hasOwnProperty(Be.id))return ue;if(Be.firstByteTime===void 0&&(_[oe]=[],Be.firstByteTime=Je.firstByteDate.getTime(),Be.segmentDuration=Je.duration,Be.bytesTotal=Je.bytesTotal,Be.id=Je.index),Be.bytesLoaded=Je.bytesLoaded,Be.elapsedTime=new Date().getTime()-Be.firstByteTime,Be.bytesLoaded>0&&Be.elapsedTime>0&&function(rt,qt){_[rt]=_[rt]||[],_[rt].push(qt)}(oe,Math.round(8*Be.bytesLoaded/Be.elapsedTime)),_[oe].length>=Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Be.elapsedTime>Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Be.bytesLoaded<Be.bytesTotal){var ot=_[oe].reduce(function(rt,qt){return rt+qt},0);if(Be.measuredBandwidthInKbps=Math.round(ot/_[oe].length),Be.estimatedTimeOfDownload=+(8*Be.bytesTotal/Be.measuredBandwidthInKbps/1e3).toFixed(2),Be.estimatedTimeOfDownload<Be.segmentDuration*Y.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||W.getRepresentationInfo().quality===0)return ue;if(!N.hasOwnProperty(Be.id)){var st=W.getAbrController(),Ie=Be.bytesTotal-Be.bytesLoaded,Ye=st.getBitrateList(fe),mt=st.getQualityForBitrate(fe,Be.measuredBandwidthInKbps*Y.get().streaming.abr.bandwidthSafetyFactor,Re),Me=st.getMinAllowedIndexFor(oe,Re),We=Me!==void 0?Math.max(Me,mt):mt;Ie>Be.bytesTotal*Ye[We].bitrate/Ye[st.getQualityFor(oe,Re)].bitrate&&(ue.quality=We,ue.reason.throughput=Be.measuredBandwidthInKbps,ue.reason.fragmentID=Be.id,ue.reason.rule=this.getClassName(),N[Be.id]=Be,T.debug("["+oe+"] frag id",Be.id," is asking to abandon and switch to quality to ",We," measured bandwidth was",Be.measuredBandwidthInKbps),delete F[oe][Be.id])}}else Be.bytesLoaded===Be.bytesTotal&&delete F[oe][Be.id]}return ue},reset:$},T=(0,y.Z)(I).getInstance().getLogger(m),$(),m}v.__dashjs_factory_name="AbandonRequestsRule",g.Z=C.Z.getClassFactory(v)},3112:function(R,g,A){var U=A(3860),C=A(2068),y=A(5448),v=A(7855),D=A(5595),m=A(8512),T=A(6398),F=A(8825),N=A(3393),_=10;function I(b){b=b||{};var j,Y,$,W=this.context,ue=b.dashMetrics,x=b.mediaPlayerModel,X=(0,D.Z)(W).getInstance();function fe(We,rt,qt){var kt=qt.reduce(function(Ce,re,je){return re>qt[Ce]?je:Ce},0);if(kt===0)return null;var ft=Math.max(We,_+2*rt.length),At=(qt[kt]-1)/(ft/_-1);return{gp:At,Vp:_/At}}function oe(We){We.placeholderBuffer=0,We.mostAdvancedSegmentStart=NaN,We.lastSegmentWasReplacement=!1,We.lastSegmentStart=NaN,We.lastSegmentDurationS=NaN,We.lastSegmentRequestTimeMs=NaN,We.lastSegmentFinishTimeMs=NaN}function ge(We,rt){var qt=x.getStableBufferTime();if(We.stableBufferTime!==qt){var kt=fe(qt,We.bitrates,We.utilities);if(kt.Vp!==We.Vp||kt.gp!==We.gp){var ft=ue.getCurrentBufferLevel(rt),At=ft+We.placeholderBuffer;At-=_,At*=kt.Vp/We.Vp,At+=_,We.stableBufferTime=qt,We.Vp=kt.Vp,We.gp=kt.gp,We.placeholderBuffer=Math.max(0,At-ft)}}}function Re(We,rt){return We.Vp*(We.utilities[rt]+We.gp)}function Je(We,rt){for(var qt=We.bitrates[rt],kt=We.utilities[rt],ft=0,At=rt-1;At>=0;--At)if(We.utilities[At]<We.utilities[rt]){var Ce=We.bitrates[At],re=We.utilities[At],je=We.Vp*(We.gp+(qt*re-Ce*kt)/(qt-Ce));ft=Math.max(ft,je)}return ft}function Se(We){var rt=We.mediaType===N.Z.AUDIO?[N.Z.AUDIO]:$;for(var qt in rt)$.hasOwnProperty(qt)&&$[qt].state===2&&($[qt].placeholderBuffer=0)}function Be(){for(var We in $)if($.hasOwnProperty(We)){var rt=$[We];rt.state!==0&&(rt.state=1,oe(rt))}}function ot(We){if(We&&We.chunk&&We.chunk.mediaInfo){var rt=$[We.chunk.mediaInfo.type];if(rt&&rt.state!==0){var qt=We.chunk.start;isNaN(rt.mostAdvancedSegmentStart)||qt>rt.mostAdvancedSegmentStart?(rt.mostAdvancedSegmentStart=qt,rt.lastSegmentWasReplacement=!1):rt.lastSegmentWasReplacement=!0,rt.lastSegmentStart=qt,rt.lastSegmentDurationS=We.chunk.duration,rt.lastQuality=We.chunk.quality,Ie(rt,We.chunk.mediaInfo.type)}}}function st(We){if(We&&We.metric===U.Z.HTTP_REQUEST&&We.value&&We.value.type===v.w.MEDIA_SEGMENT_TYPE&&We.value.trace&&We.value.trace.length){var rt=$[We.mediaType];rt&&rt.state!==0&&(rt.lastSegmentRequestTimeMs=We.value.trequest.getTime(),rt.lastSegmentFinishTimeMs=We.value._tfinish.getTime(),Ie(rt,We.mediaType))}}function Ie(We,rt){if(!isNaN(We.lastSegmentStart)&&!isNaN(We.lastSegmentRequestTimeMs)&&!isNaN(We.placeholderBuffer)){if(We.placeholderBuffer*=.99,!isNaN(We.lastSegmentFinishTimeMs)){var qt=ue.getCurrentBufferLevel(rt)+.001*(We.lastSegmentFinishTimeMs-We.lastSegmentRequestTimeMs),kt=Re(We,We.lastQuality),ft=Math.max(0,kt-qt);We.placeholderBuffer=Math.min(ft,We.placeholderBuffer)}We.lastSegmentWasReplacement&&!isNaN(We.lastSegmentDurationS)&&(We.placeholderBuffer+=We.lastSegmentDurationS),We.lastSegmentStart=NaN,We.lastSegmentRequestTimeMs=NaN}}function Ye(We){if(We){var rt=$[We.mediaType];rt&&rt.state!==0&&(rt.abrQuality=We.newQuality)}}function mt(We){if(We){var rt=$[We.mediaType];if(rt&&rt.state!==0){var qt,kt=ue.getCurrentBufferLevel(We.mediaType);qt=rt.abrQuality>0?Je(rt,rt.abrQuality):_;var ft=Math.max(0,qt-kt);rt.placeholderBuffer=Math.min(rt.placeholderBuffer,ft)}}}function Me(){$={}}return j={getMaxIndex:function(We){var rt=(0,C.Z)(W).create();if(!(We&&We.hasOwnProperty("getMediaInfo")&&We.hasOwnProperty("getMediaType")&&We.hasOwnProperty("getScheduleController")&&We.hasOwnProperty("getStreamInfo")&&We.hasOwnProperty("getAbrController")&&We.hasOwnProperty("useBufferOccupancyABR")))return rt;var qt=We.getMediaInfo(),kt=We.getMediaType(),ft=We.getScheduleController(),At=We.getStreamInfo(),Ce=We.getAbrController(),re=Ce.getThroughputHistory(),je=At?At.id:null,O=At&&At.manifestInfo&&At.manifestInfo.isDynamic,M=We.useBufferOccupancyABR();if(rt.reason=rt.reason||{},!M)return rt;ft.setTimeToLoadDelay(0);var q=function(tt){var dt=tt.getMediaType(),Et=$[dt];return Et?Et.state!==0&&ge(Et,dt):(Et=function(Tt){var Rt={},hn=Tt.getMediaInfo().bitrateList.map(function(Un){return Un.bandwidth}),Qt=function(Un){return Un.map(function(gr){return Math.log(gr)})}(hn);Qt=Qt.map(function(Un){return Un-Qt[0]+1});var nn=x.getStableBufferTime(),Ot=fe(nn,hn,Qt);return Ot?(Rt.state=1,Rt.bitrates=hn,Rt.utilities=Qt,Rt.stableBufferTime=nn,Rt.Vp=Ot.Vp,Rt.gp=Ot.gp,Rt.lastQuality=0,oe(Rt)):Rt.state=0,Rt}(tt),$[dt]=Et),Et}(We);if(q.state===0)return rt;var K,_e=ue.getCurrentBufferLevel(kt),de=re.getAverageThroughput(kt,O),Ke=re.getSafeAverageThroughput(kt,O),St=re.getAverageLatency(kt);if(rt.reason.state=q.state,rt.reason.throughput=de,rt.reason.latency=St,isNaN(de))return rt;switch(q.state){case 1:K=Ce.getQualityForBitrate(qt,Ke,je,St),rt.quality=K,rt.reason.throughput=Ke,q.placeholderBuffer=Math.max(0,Je(q,K)-_e),q.lastQuality=K,!isNaN(q.lastSegmentDurationS)&&_e>=q.lastSegmentDurationS&&(q.state=2);break;case 2:(function(tt,dt){var Et=Date.now();if(isNaN(tt.lastSegmentFinishTimeMs)){if(!isNaN(tt.lastCallTimeMs)){var Tt=.001*(Et-tt.lastCallTimeMs);tt.placeholderBuffer+=Math.max(0,Tt)}}else{var Rt=.001*(Et-tt.lastSegmentFinishTimeMs);tt.placeholderBuffer+=Math.max(0,Rt)}tt.lastCallTimeMs=Et,tt.lastSegmentStart=NaN,tt.lastSegmentRequestTimeMs=NaN,tt.lastSegmentFinishTimeMs=NaN,ge(tt,dt)})(q,kt),K=function(tt,dt){for(var Et=tt.bitrates.length,Tt=NaN,Rt=NaN,hn=0;hn<Et;++hn){var Qt=(tt.Vp*(tt.utilities[hn]+tt.gp)-dt)/tt.bitrates[hn];(isNaN(Rt)||Qt>=Rt)&&(Rt=Qt,Tt=hn)}return Tt}(q,_e+q.placeholderBuffer);var ut=Ce.getQualityForBitrate(qt,Ke,je,St);K>q.lastQuality&&K>ut&&(K=Math.max(ut,q.lastQuality));var at=Math.max(0,_e+q.placeholderBuffer-Re(q,K));at<=q.placeholderBuffer?(q.placeholderBuffer-=at,at=0):(at-=q.placeholderBuffer,q.placeholderBuffer=0,K<Ce.getMaxAllowedIndexFor(kt,je)?ft.setTimeToLoadDelay(1e3*at):at=0),rt.quality=K,rt.reason.throughput=de,rt.reason.latency=St,rt.reason.bufferLevel=_e,rt.reason.placeholderBuffer=q.placeholderBuffer,rt.reason.delay=at,q.lastQuality=K;break;default:Y.debug("BOLA ABR rule invoked in bad state."),rt.quality=Ce.getQualityForBitrate(qt,Ke,je,St),rt.reason.state=q.state,rt.reason.throughput=Ke,rt.reason.latency=St,q.state=1,oe(q)}return rt},reset:function(){Me(),X.off(F.Z.BUFFER_EMPTY,Se,j),X.off(F.Z.PLAYBACK_SEEKING,Be,j),X.off(F.Z.METRIC_ADDED,st,j),X.off(F.Z.QUALITY_CHANGE_REQUESTED,Ye,j),X.off(F.Z.FRAGMENT_LOADING_ABANDONED,mt,j),X.off(m.Z.MEDIA_FRAGMENT_LOADED,ot,j)}},Y=(0,T.Z)(W).getInstance().getLogger(j),Me(),X.on(F.Z.BUFFER_EMPTY,Se,j),X.on(F.Z.PLAYBACK_SEEKING,Be,j),X.on(F.Z.METRIC_ADDED,st,j),X.on(F.Z.QUALITY_CHANGE_REQUESTED,Ye,j),X.on(F.Z.FRAGMENT_LOADING_ABANDONED,mt,j),X.on(m.Z.MEDIA_FRAGMENT_LOADED,ot,j),j}I.__dashjs_factory_name="BolaRule",g.Z=y.Z.getClassFactory(I)},895:function(R,g,A){var U=A(5448),C=A(2068),y=A(6398);function v(){var D,m,T=this.context;return D={getMaxIndex:function(F){var N=(0,C.Z)(T).create();if(!F||!F.hasOwnProperty("getDroppedFramesHistory"))return N;var _=F.getDroppedFramesHistory(),I=F.getStreamInfo().id;if(_){var b=_.getFrameHistory(I);if(!b||b.length===0)return N;for(var j=0,Y=0,$=C.Z.NO_CHANGE,W=1;W<b.length;W++)if(b[W]&&(j=b[W].droppedVideoFrames,(Y=b[W].totalVideoFrames)>375&&j/Y>.15)){$=W-1,m.debug("index: "+$+" Dropped Frames: "+j+" Total Frames: "+Y);break}return(0,C.Z)(T).create($,{droppedFrames:j})}return N}},m=(0,y.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="DroppedFramesRule",g.Z=U.Z.getClassFactory(v)},6535:function(R,g,A){var U=A(5595),C=A(8512),y=A(5448),v=A(6398),D=A(2068),m=A(3393),T=A(3860),F=A(8825);function N(_){_=_||{};var I,b,j,Y=this.context,$=(0,U.Z)(Y).getInstance(),W=_.dashMetrics;function ue(){(j={})[m.Z.VIDEO]={ignoreCount:2},j[m.Z.AUDIO]={ignoreCount:2}}function x(){ue()}function X(fe){isNaN(fe.startTime)||fe.mediaType!==m.Z.AUDIO&&fe.mediaType!==m.Z.VIDEO||j[fe.mediaType].ignoreCount>0&&j[fe.mediaType].ignoreCount--}return I={getMaxIndex:function(fe){var oe=(0,D.Z)(Y).create();if(!fe||!fe.hasOwnProperty("getMediaType"))return oe;(function(){if(!W||!W.hasOwnProperty("getCurrentBufferLevel")||!W.hasOwnProperty("getCurrentBufferState"))throw new Error(m.Z.MISSING_CONFIG_ERROR)})();var ge=fe.getMediaType(),Re=W.getCurrentBufferState(ge),Je=fe.getRepresentationInfo().fragmentDuration,Se=fe.getStreamInfo(),Be=Se?Se.id:null,ot=fe.getScheduleController(),st=Se&&Se.manifestInfo&&Se.manifestInfo.isDynamic;if(function(kt,ft){return!kt&&j[ft].ignoreCount>0}(ot.getPlaybackController().getLowLatencyModeEnabled(),ge)||!Je)return oe;if(Re&&Re.state===T.Z.BUFFER_EMPTY)b.debug("["+ge+"] Switch to index 0; buffer is empty."),oe.quality=0,oe.reason="InsufficientBufferRule: Buffer is empty";else{var Ie=fe.getMediaInfo(),Ye=fe.getAbrController(),mt=Ye.getThroughputHistory(),Me=W.getCurrentBufferLevel(ge),We=mt.getAverageThroughput(ge,st),rt=mt.getAverageLatency(ge),qt=We*(Me/Je)*.5;oe.quality=Ye.getQualityForBitrate(Ie,qt,Be,rt),oe.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return oe},reset:function(){ue(),$.off(F.Z.PLAYBACK_SEEKING,x,I),$.off(C.Z.BYTES_APPENDED_END_FRAGMENT,X,I)}},b=(0,v.Z)(Y).getInstance().getLogger(I),ue(),$.on(F.Z.PLAYBACK_SEEKING,x,I),$.on(C.Z.BYTES_APPENDED_END_FRAGMENT,X,I),I}N.__dashjs_factory_name="InsufficientBufferRule",g.Z=y.Z.getClassFactory(N)},1914:function(R,g,A){var U=A(3860),C=A(2068),y=A(5448),v=A(7855),D=A(5595),m=A(8512),T=A(6398),F=A(3393);function N(_){_=_||{};var I,b,j,Y,$=this.context,W=_.dashMetrics,ue=(0,D.Z)($).getInstance();function x(Be){Be.placeholderBuffer=0,Be.mostAdvancedSegmentStart=NaN,Be.lastSegmentWasReplacement=!1,Be.lastSegmentStart=NaN,Be.lastSegmentDurationS=NaN,Be.lastSegmentRequestTimeMs=NaN,Be.lastSegmentFinishTimeMs=NaN,Be.lastSegmentUrl=""}function X(){for(var Be in b)if(b.hasOwnProperty(Be)){var ot=b[Be];ot.state!==0&&(ot.state=1,x(ot))}}function fe(Be){if(Be&&Be.chunk&&Be.chunk.mediaInfo){var ot=b[Be.chunk.mediaInfo.type],st=j[Be.chunk.mediaInfo.type];if(ot&&ot.state!==0){var Ie=Be.chunk.start;isNaN(ot.mostAdvancedSegmentStart)||Ie>ot.mostAdvancedSegmentStart?(ot.mostAdvancedSegmentStart=Ie,ot.lastSegmentWasReplacement=!1):ot.lastSegmentWasReplacement=!0,ot.lastSegmentStart=Ie,ot.lastSegmentDurationS=Be.chunk.duration,ot.lastQuality=Be.chunk.quality,ge(ot,st)}}}function oe(Be){if(Be&&Be.metric===U.Z.HTTP_REQUEST&&Be.value&&Be.value.type===v.w.MEDIA_SEGMENT_TYPE&&Be.value.trace&&Be.value.trace.length){var ot=b[Be.mediaType],st=j[Be.mediaType];ot&&ot.state!==0&&(ot.lastSegmentRequestTimeMs=Be.value.trequest.getTime(),ot.lastSegmentFinishTimeMs=Be.value._tfinish.getTime(),ge(ot,st))}}function ge(Be,ot){isNaN(Be.lastSegmentStart)||isNaN(Be.lastSegmentRequestTimeMs)||(ot.segment_request_start_s=.001*Be.lastSegmentRequestTimeMs,ot.segment_download_finish_s=.001*Be.lastSegmentFinishTimeMs,Be.lastSegmentStart=NaN,Be.lastSegmentRequestTimeMs=NaN)}function Re(Be){if(Be&&Be.mediaType){var ot=b[Be.mediaType];ot&&ot.state!==0&&(ot.abrQuality=Be.newQuality)}}function Je(Be,ot){if(Be.length!==ot.length)return-1;for(var st=0,Ie=0;Ie<Be.length;Ie++)st+=Be[Ie]*ot[Ie];return st}function Se(){b={},j={}}return I={getMaxIndex:function(Be){var ot,st=(0,C.Z)($).create(),Ie=Math.pow(4,.99),Ye=Math.max(Math.pow(4,1),Ie*Math.sqrt(4)),mt=Be.getMediaInfo(),Me=Be.getMediaType(),We=mt.bitrateList.map(function(Ot){return Ot.bandwidth}),rt=We.length,qt=Be.getScheduleController(),kt=Be.getStreamInfo(),ft=Be.getAbrController(),At=ft.getThroughputHistory(),Ce=kt&&kt.manifestInfo&&kt.manifestInfo.isDynamic,re=Be.useL2AABR(),je=W.getCurrentBufferLevel(Me,!0),O=At.getSafeAverageThroughput(Me,Ce),M=At.getAverageThroughput(Me,Ce),q=At.getAverageLatency(Me),K=Be.getVideoModel().getPlaybackRate();if(!(Be&&Be.hasOwnProperty("getMediaInfo")&&Be.hasOwnProperty("getMediaType")&&Be.hasOwnProperty("getScheduleController")&&Be.hasOwnProperty("getStreamInfo")&&Be.hasOwnProperty("getAbrController")&&Be.hasOwnProperty("useL2AABR"))||(st.reason=st.reason||{},!re||Me===F.Z.AUDIO))return st;qt.setTimeToLoadDelay(0);var _e=function(Ot){var Un=Ot.getMediaType(),gr=b[Un];return gr||(gr=function(Or){var dr={},ei=Or.getMediaInfo(),Ji=ei.bitrateList.map(function(Lr){return Lr.bandwidth/1e3});return dr.state=1,dr.bitrates=Ji,dr.lastQuality=0,function(Lr){Lr&&Lr.type&&(j[Lr.type]={},j[Lr.type].w=[],j[Lr.type].prev_w=[],j[Lr.type].Q=0,j[Lr.type].segment_request_start_s=0,j[Lr.type].segment_download_finish_s=0,j[Lr.type].B_target=1.5)}(ei),x(dr),dr}(Ot),b[Un]=gr),gr}(Be);if(_e.state===0)return st;var de=j[Me];if(!de||(st.reason.state=_e.state,st.reason.throughput=M,st.reason.latency=q,isNaN(M)))return st;switch(_e.state){case 1:if(ot=ft.getQualityForBitrate(mt,O,kt.id,q),st.quality=ot,st.reason.throughput=O,_e.lastQuality=ot,!isNaN(_e.lastSegmentDurationS)&&je>=de.B_target){_e.state=2,de.Q=Ie;for(var Ke=0;Ke<rt;++Ke)Ke===_e.lastQuality?de.prev_w[Ke]=1:de.prev_w[Ke]=0}break;case 2:var St=[],ut=W.getCurrentHttpRequest(Me).trace.reduce(function(Ot,Un){return Ot+Un.d},0),at=W.getCurrentHttpRequest(Me).trace.reduce(function(Ot,Un){return Ot+Un.b[0]},0),tt=Math.round(8*at/ut),dt=W.getCurrentHttpRequest(Me);if(tt<1&&(tt=1),dt.url===_e.lastSegmentUrl||dt.type===v.w.INIT_SEGMENT_TYPE)ot=_e.lastQuality;else{for(var Et=_e.lastSegmentDurationS,Tt=1,Rt=0;Rt<rt;++Rt)We[Rt]=We[Rt]/1e3,K*We[Rt]>tt&&(Tt=-1),de.w[Rt]=de.prev_w[Rt]+Tt*(Et/(2*Ye))*((de.Q+Ie)*(K*We[Rt]/tt));de.w=function(Ot){for(var Un=Ot.length,gr=!1,Or=[],dr=0;dr<Un;++dr)Or[dr]=Ot[dr];for(var ei=Ot.sort(function(zi,to){return to-zi}),Ji=0,Lr=0,eo=[],_i=0;_i<Un-1;++_i)if((Lr=((Ji+=ei[_i])-1)/(_i+1))>=ei[_i+1]){gr=!0;break}gr||(Lr=(Ji+ei[Un-1]-1)/Un);for(var Mi=0;Mi<Un;++Mi)eo[Mi]=Math.max(Or[Mi]-Lr,0);return eo}(de.w);for(var hn=0;hn<rt;++hn)St[hn]=de.w[hn]-de.prev_w[hn],de.prev_w[hn]=de.w[hn];de.Q=Math.max(0,de.Q-Et+Et*K*((Je(We,de.prev_w)+Je(We,St))/tt));for(var Qt=[],nn=0;nn<rt;++nn)Qt[nn]=Math.abs(We[nn]-Je(de.w,We));(ot=Qt.indexOf(Math.min.apply(Math,Qt)))>_e.lastQuality&&We[_e.lastQuality+1]<=tt&&(ot=_e.lastQuality+1),We[ot]>=tt&&(de.Q=2*Math.max(Ie,de.Q)),_e.lastSegmentUrl=dt.url}st.quality=ot,st.reason.throughput=M,st.reason.latency=q,st.reason.bufferLevel=je,_e.lastQuality=st.quality;break;default:Y.debug("L2A ABR rule invoked in bad state."),st.quality=ft.getQualityForBitrate(mt,O,kt.id,q),st.reason.state=_e.state,st.reason.throughput=O,st.reason.latency=q,_e.state=1,x(_e)}return st},reset:function(){Se(),ue.off(m.Z.PLAYBACK_SEEKING,X,I),ue.off(m.Z.MEDIA_FRAGMENT_LOADED,fe,I),ue.off(m.Z.METRIC_ADDED,oe,I),ue.off(m.Z.QUALITY_CHANGE_REQUESTED,Re,I)}},Y=(0,T.Z)($).getInstance().getLogger(I),Se(),ue.on(m.Z.PLAYBACK_SEEKING,X,I),ue.on(m.Z.MEDIA_FRAGMENT_LOADED,fe,I),ue.on(m.Z.METRIC_ADDED,oe,I),ue.on(m.Z.QUALITY_CHANGE_REQUESTED,Re,I),I}N.__dashjs_factory_name="L2ARule",g.Z=y.Z.getClassFactory(N)},6070:function(R,g,A){var U=A(5448),C=A(6398),y=A(2068);function v(){var D,m,T=this.context;return D={getMaxIndex:function(F){for(var N=F?F.getSwitchHistory():null,_=N?N.getSwitchRequests():[],I=0,b=0,j=0,Y=(0,y.Z)(T).create(),$=0;$<_.length;$++)if(_[$]!==void 0&&(I+=_[$].drops,b+=_[$].noDrops,j+=_[$].dropSize,I+b>=6&&I/b>.075)){Y.quality=$>0&&_[$].drops>0?$-1:$,Y.reason={index:Y.quality,drops:I,noDrops:b,dropSize:j},m.debug("Switch history rule index: "+Y.quality+" samples: "+(I+b)+" drops: "+I);break}return Y}},m=(0,C.Z)(T).getInstance().getLogger(D),D}v.__dashjs_factory_name="SwitchHistoryRule",g.Z=U.Z.getClassFactory(v)},5628:function(R,g,A){var U=A(5448),C=A(2068),y=A(3393),v=A(3860);function D(m){m=m||{};var T=this.context,F=m.dashMetrics;return{getMaxIndex:function(N){var _=(0,C.Z)(T).create();if(!(N&&N.hasOwnProperty("getMediaInfo")&&N.hasOwnProperty("getMediaType")&&N.hasOwnProperty("useBufferOccupancyABR")&&N.hasOwnProperty("getAbrController")&&N.hasOwnProperty("getScheduleController")))return _;(function(){if(!F||!F.hasOwnProperty("getCurrentBufferState"))throw new Error(y.Z.MISSING_CONFIG_ERROR)})();var I=N.getMediaInfo(),b=N.getMediaType(),j=F.getCurrentBufferState(b),Y=N.getScheduleController(),$=N.getAbrController(),W=N.getStreamInfo(),ue=W?W.id:null,x=W&&W.manifestInfo?W.manifestInfo.isDynamic:null,X=$.getThroughputHistory(),fe=X.getSafeAverageThroughput(b,x),oe=X.getAverageLatency(b),ge=N.useBufferOccupancyABR();return isNaN(fe)||!j||ge||$.getAbandonmentStateFor(ue,b)!==v.Z.ABANDON_LOAD&&(j.state===v.Z.BUFFER_LOADED||x)&&(_.quality=$.getQualityForBitrate(I,fe,ue,oe),Y.setTimeToLoadDelay(0),_.reason={throughput:fe,latency:oe}),_},reset:function(){}}}D.__dashjs_factory_name="ThroughputRule",g.Z=U.Z.getClassFactory(D)},4722:function(R,g,A){var U=A(5448),C=A(6398);function y(){var v,D,m,T,F,N,_,I,b,j=this.context;function Y(){m=null,T=1,F=100,N=0,_=null,I=null,b="dynamic_weight_selection"}function $(){var fe=0;if(m)for(var oe=0;oe<m.length;oe++){var ge=m[oe];ge.state.throughput>fe&&(fe=ge.state.throughput)}return fe}function W(fe,oe,ge){var Re=fe.map(function(Je,Se){return ge[Se]*Math.pow(Je-oe[Se],2)}).reduce(function(Je,Se){return Je+Se});return(Re<0?-1:1)*Math.sqrt(Math.abs(Re))}function ue(fe,oe){return W([fe.state.throughput,fe.state.latency,fe.state.rebuffer,fe.state.switch],[oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[1,1,1,1])}function x(fe,oe,ge){for(var Re=0;Re<oe.length;Re++){var Je=oe[Re],Se=ue(Je,fe);X(Je,ge,Math.exp(-1*Math.pow(Se,2)/(2*Math.pow(.1,2))))}}function X(fe,oe,ge){var Re=fe.state,Je=[.01,.01,.01,.01];Re.throughput=Re.throughput+(oe[0]-Re.throughput)*Je[0]*ge,Re.latency=Re.latency+(oe[1]-Re.latency)*Je[1]*ge,Re.rebuffer=Re.rebuffer+(oe[2]-Re.rebuffer)*Je[2]*ge,Re.switch=Re.switch+(oe[3]-Re.switch)*Je[3]*ge}return v={getNextQuality:function(fe,oe,ge,Re,Je,Se,Be){var ot=ge,st=Re,Ie=oe,Ye=function(de){if(!m){m=[];var Ke=de.bitrateList,St=[];N=Ke[0].bandwidth,Ke.forEach(function(dt){St.push(dt.bandwidth),dt.bandwidth<N&&(N=dt.bandwidth)}),tt=St.map(function(dt){return Math.pow(dt,2)}).reduce(function(dt,Et){return dt+Et}),T=Math.sqrt(tt);for(var ut=0;ut<Ke.length;ut++){var at={qualityIndex:ut,bitrate:Ke[ut].bandwidth,state:{throughput:Ke[ut].bandwidth/T,latency:0,rebuffer:0,switch:0}};m.push(at)}I=function(dt){var Et=[],Tt=function(Pu){for(var tn=[],sn=0;sn<Pu;sn++){var an=[Math.random()*$(),Math.random(),Math.random(),Math.random()];tn.push(an)}return tn}(Math.pow(dt.length,2));Et.push(Tt[0]);for(var Rt=[1,1,1,1],hn=1;hn<dt.length;hn++){for(var Qt=null,nn=null,Ot=0;Ot<Tt.length;Ot++){for(var Un=Tt[Ot],gr=null,Or=0;Or<Et.length;Or++){var dr=W(Un,Et[Or],Rt);(gr===null||dr<gr)&&(gr=dr)}(nn===null||gr>nn)&&(Qt=Un,nn=gr)}Et.push(Qt)}for(var ei=null,Ji=null,Lr=0;Lr<Et.length;Lr++){for(var eo=0,_i=0;_i<Et.length;_i++)Lr!==_i&&(eo+=W(Et[Lr],Et[_i],Rt));(ei===null||eo>ei)&&(ei=eo,Ji=Lr)}var Mi=[];for(Mi.push(Et[Ji]),Et.splice(Ji,1);Et.length>0;){for(var zi=null,to=null,Ti=0;Ti<Et.length;Ti++){var Qn=W(Mi[0],Et[Ti],Rt);(zi===null||Qn<zi)&&(zi=Qn,to=Ti)}Mi.push(Et[to]),Et.splice(to,1)}return Mi}(m)}var tt;return m}(fe),mt=oe/T;mt>1&&(mt=$()),ge/=F,D.debug("getNextQuality called throughput:".concat(mt," latency:").concat(ge," bufferSize:").concat(Re," currentQualityIndex:").concat(Se," playbackRate:").concat(Je));var Me=Ye[Se],We=Me.bitrate*Be.getSegmentDuration()/Ie,rt=Math.max(0,We-st);if(st-We<Be.getMinBuffer())return D.debug("Buffer is low for bitrate= ".concat(Me.bitrate," downloadTime=").concat(We," currentBuffer=").concat(st," rebuffer=").concat(rt)),function(de,Ke){var St=0,ut=de;if(m)for(var at=0;at<m.length;at++){var tt=m[at];tt.bitrate<de.bitrate&&tt.bitrate>St&&Ke>tt.bitrate&&(St=tt.bitrate,ut=tt)}return ut}(Me,Ie).qualityIndex;switch(b){case"manual_weight_selection":_=[.4,.4,.4,.4];break;case"random_weight_selection":(function(de){_=function(Ke,St){for(var ut=[],at=Math.sqrt(2/Ke),tt=0;tt<4;tt++)ut.push(Math.random()*at);return _=ut}(de.length)})(Ye);break;default:(function(de,Ke,St,ut,at,tt,dt){_||(_=I[I.length-1]);var Et=de.findWeightVector(Ke,St,ut,at,tt,dt);Et!==null&&Et!==-1&&(_=Et)})(Be,Ye,ot,st,rt,Ie,Je)}for(var qt=null,kt=null,ft=null,At=0;At<Ye.length;At++){var Ce=Ye[At],re=Ce.state,je=[re.throughput,re.latency,re.rebuffer,re.switch],O=_.slice(),M=Be.getNextBufferWithBitrate(Ce.bitrate,st,Ie),q=M<Be.getMinBuffer();q&&D.debug("Buffer is low for bitrate=".concat(Ce.bitrate," downloadTime=").concat(We," currentBuffer=").concat(st," nextBuffer=").concat(M)),(Ce.bitrate>oe-1e4||q)&&Ce.bitrate!==N&&(O[0]=100);var K=W(je,[mt,0,0,0],O);(qt===null||K<qt)&&(qt=K,kt=Ce.qualityIndex,ft=Ce)}var _e=Math.abs(Me.bitrate-ft.bitrate)/T;return x(Me,Ye,[mt,ge,rt,_e]),x(ft,Ye,[mt,0,0,_e]),kt},reset:function(){Y()}},D=(0,C.Z)(j).getInstance().getLogger(v),Y(),v}y.__dashjs_factory_name="LearningAbrController",g.Z=U.Z.getClassFactory(y)},5317:function(R,g,A){var U=A(5448),C=A(2298);function y(){var v,D,m,T,F;function N(){D=null,m=null,T=null,F=null}function _(b,j,Y,$){var W=new C.Z;return W.type=b,W.weights.bitrateReward=j||1,W.weights.bitrateSwitchPenalty=1,W.weights.rebufferPenalty=Y||1e3,W.weights.latencyPenalty=[],W.weights.latencyPenalty.push({threshold:1.1,penalty:.05*$}),W.weights.latencyPenalty.push({threshold:1e8,penalty:.1*Y}),W.weights.playbackSpeedPenalty=$||200,W}function I(b,j,Y,$,W){W.bitrateWSum+=W.weights.bitrateReward*b,W.lastBitrate&&(W.bitrateSwitchWSum+=W.weights.bitrateSwitchPenalty*Math.abs(b-W.lastBitrate)),W.lastBitrate=b,W.rebufferWSum+=W.weights.rebufferPenalty*j;for(var ue=0;ue<W.weights.latencyPenalty.length;ue++){var x=W.weights.latencyPenalty[ue];if(Y<=x.threshold){W.latencyWSum+=x.penalty*Y;break}}W.playbackSpeedWSum+=W.weights.playbackSpeedPenalty*Math.abs(1-$),W.totalQoe=W.bitrateWSum-W.bitrateSwitchWSum-W.rebufferWSum-W.latencyWSum-W.playbackSpeedWSum}return v={setupPerSegmentQoe:function(b,j,Y){D=_("segment",b,j,Y),m=b,T=j,F=Y},logSegmentMetrics:function(b,j,Y,$){D&&I(b,j,Y,$,D)},getPerSegmentQoe:function(){return D},calculateSingleUseQoe:function(b,j,Y,$){var W=null;return m&&T&&F&&(W=_("segment",m,T,F)),W?(I(b,j,Y,$,W),W.totalQoe):0},reset:function(){N()}},N(),v}y.__dashjs_factory_name="LoLpQoeEvaluator",g.Z=U.Z.getClassFactory(y)},5435:function(R,g,A){var U=A(6398),C=A(5448),y=A(4722),v=A(5317),D=A(2068),m=A(3860),T=A(6523),F=A(3393);function N(_){var I,b,j,Y,$=(_=_||{}).dashMetrics,W=this.context;return b={getMaxIndex:function(ue){try{var x=(0,D.Z)(W).create(),X=ue.getMediaInfo().type,fe=ue.getAbrController(),oe=ue.getStreamInfo(),ge=fe.getQualityFor(X,oe.id),Re=ue.getMediaInfo(),Je=$.getCurrentBufferState(X),Se=ue.getScheduleController(),Be=$.getCurrentBufferLevel(X,!0),ot=oe&&oe.manifestInfo?oe.manifestInfo.isDynamic:null,st=Se.getPlaybackController(),Ie=st.getCurrentLiveLatency();if(!ue.useLoLPABR()||X===F.Z.AUDIO)return x;Ie||(Ie=0);var Ye=st.getPlaybackRate(),mt=fe.getThroughputHistory().getSafeAverageThroughput(X,ot);if(I.debug("Throughput ".concat(Math.round(mt)," kbps")),isNaN(mt)||!Je||fe.getAbandonmentStateFor(oe.id,X)===m.Z.ABANDON_LOAD)return x;for(var Me=Re.bitrateList,We=ue.getRepresentationInfo().fragmentDuration,rt=Me[0].bandwidth/1e3,qt=Me[Me.length-1].bandwidth/1e3,kt=0;kt<Me.length;kt++){var ft=Me[kt].bandwidth/1e3;ft>qt?qt=ft:ft<rt&&(rt=ft)}var At=Me[ge].bandwidth/1e3,Ce=$.getCurrentHttpRequest(X,!0),re=(Ce.tresponse.getTime()-Ce.trequest.getTime())/1e3,je=re>We?re-We:0;Y.setupPerSegmentQoe(We,qt,rt),Y.logSegmentMetrics(At,je,Ie,Ye);var O=(0,T.Z)(W).create({targetLatency:1.5,bufferMin:.3,segmentDuration:We,qoeEvaluator:Y});return x.quality=j.getNextQuality(Re,1e3*mt,Ie,Be,Ye,ge,O),x.reason={throughput:mt,latency:Ie},x.priority=D.Z.PRIORITY.STRONG,Se.setTimeToLoadDelay(0),x.quality!==ge&&I.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",x.quality,"Average throughput",Math.round(mt),"kbps"),x}catch(M){throw M}},reset:function(){j.reset(),Y.reset()}},I=(0,U.Z)(W).getInstance().getLogger(b),j=(0,y.Z)(W).create(),Y=(0,v.Z)(W).create(),b}N.__dashjs_factory_name="LoLPRule",g.Z=C.Z.getClassFactory(N)},6523:function(R,g,A){var U=A(5448);function C(y){var v,D,m,T,F=y.targetLatency,N=y.bufferMin,_=y.segmentDuration,I=y.qoeEvaluator;function b(){return _}function j(Y,$){var W=b();return $>W?Y-W:Y+W-$}return v={getMinBuffer:function(){return N},getSegmentDuration:b,getNextBufferWithBitrate:function(Y,$,W){return j($,Y*_/W)},getNextBuffer:j,findWeightVector:function(Y,$,W,ue,x,X){var fe=null,oe=null,ge=null,Re=Math.abs($-m);return Y.forEach(function(Je){D.forEach(function(Se){Se[0];var Be=Se[1],ot=Se[2],st=(Se[3],Je.bitrate*_/x),Ie=j(W,st),Ye=(ot===0?10:1/ot)*Math.max(1e-5,st-Ie),mt=(Be===0?10:1/Be)*Je.state.latency,Me=I.calculateSingleUseQoe(Je.bitrate,Ye,mt,X);(fe===null||Me>fe)&&function(We,rt,qt){return!(We>F+qt)&&rt>=N}($,Ie,Re)&&(fe=Me,oe=Se,ge=Je.bitrate)})}),oe===null&&ge===null&&(oe=-1),m=$,oe}},D=function Y($,W,ue){if(ue===W)return $;for(var x=$.length,X=0;X<x;X++)for(var fe=$.shift(),oe=0;oe<T.length;oe++)$.push(fe.concat(T[oe]));return Y($,W,ue+1)}((T=[.2,.4,.6,.8,1]).map(function(Y){return[Y]}),4,1),m=0,v}C.__dashjs_factory_name="LoLpWeightSelector",g.Z=U.Z.getClassFactory(C)},2298:function(R,g){g.Z=function A(){(function(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")})(this,A),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(R,g,A){A.d(g,{Y:function(){return I}});var U=A(3393),C=A(1553),y=A(5448),v=A(2128),D=A(2594),m=A(7387),T=A(7417),F=A(9032),N=A(9326),_=A(7802),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function b(j){var Y,$,W,ue,x,X,fe,oe,ge=this.context,Re=j.adapter,Je=j.baseURLController,Se=j.streamInfo,Be=j.timelineConverter,ot=j.debug,st=j.eventBus,Ie=j.events,Ye=j.dashConstants,mt=(0,D.Z)(ge).getInstance();function Me(rt,qt){var kt=new v.Z;kt.id=rt.id,kt.bitrate=rt.bandwidth,kt.width=rt.width,kt.height=rt.height,kt.tilesHor=1,kt.tilesVert=1,rt.essentialProperties&&rt.essentialProperties.forEach(function(ft){if(I.indexOf(ft.schemeIdUri)>=0&&ft.value){var At=ft.value.split("x");At.length!==2||isNaN(At[0])||isNaN(At[1])||(kt.tilesHor=parseInt(At[0],10),kt.tilesVert=parseInt(At[1],10))}}),qt?X.updateSegmentData(rt).then(function(ft){(function(At,Ce,re){var je=[],O=function(M,q){var K,_e,de,Ke,St=[],ut=0;for(K=0,_e=M.segments.length;K<_e;K++)de=M.segments[K],(Ke=(0,m.TJ)(Be,Re.getIsDynamic(),q,de.startTime,de.duration,de.timescale,de.media,de.mediaRange,ut))&&(St.push(Ke),Ke=null,ut++);return St}(re,Ce);Ce.segments=O,At.segmentDuration=Ce.segments[0].duration,At.readThumbnail=function(M,q){var K=null;je.some(function(_e){if(_e.start<=M&&_e.end>M)return K=_e.url,!0}),K?q(K):Ce.segments.some(function(_e){if(_e.mediaStartTime<=M&&_e.mediaStartTime+_e.duration>M){var de=Je.resolve(Ce.path);return fe.load({method:"get",url:de.url,request:{range:_e.mediaRange,responseType:"arraybuffer"},onload:function(Ke){var St=oe.getSamplesInfo(Ke.target.response),ut=new Blob([Ke.target.response.slice(St.sampleList[0].offset,St.sampleList[0].offset+St.sampleList[0].size)],{type:"image/jpeg"}),at=window.URL.createObjectURL(ut);je.push({start:_e.mediaStartTime,end:_e.mediaStartTime+_e.duration,url:at}),q&&q(at)}}),!0}})}})(kt,rt,ft)}):(kt.startNumber=rt.startNumber,kt.segmentDuration=rt.segmentDuration,kt.timescale=rt.timescale,kt.templateUrl=function(ft){var At=mt.isRelative(ft.media)?mt.resolve(ft.media,Je.resolve(ft.path).url):ft.media;return At?(0,m.Aj)(At,ft.id):""}(rt)),kt.tilesHor>0&&kt.tilesVert>0&&(kt.widthPerTile=kt.width/kt.tilesHor,kt.heightPerTile=kt.height/kt.tilesVert,$.push(kt))}function We(){$=[],ue=-1,x=null}return Y={getTracks:function(){return $},addTracks:function(){if(Se&&Re&&(x=Re.getMediaInfoForType(Se,U.Z.IMAGE))){var rt=Re.getVoRepresentations(x);rt&&rt.length>0&&rt.forEach(function(qt){(qt.segmentInfoType===C.Z.SEGMENT_TEMPLATE&&qt.segmentDuration>0&&qt.media||qt.segmentInfoType===C.Z.SEGMENT_TIMELINE)&&Me(qt),qt.segmentInfoType===C.Z.SEGMENT_BASE&&Me(qt,!0)}),$.length>0&&$.sort(function(qt,kt){return qt.bitrate-kt.bitrate})}},reset:We,setTrackByIndex:function(rt){$&&$.length!==0&&(rt>=$.length&&(rt=$.length-1),ue=rt)},getCurrentTrack:function(){return ue<0?null:$[ue]},getCurrentTrackIndex:function(){return ue},getThumbnailRequestForTime:function(rt){for(var qt,kt=Re.getVoRepresentations(x),ft=0;ft<kt.length;ft++)if($[ue].id===kt[ft].id){qt=kt[ft];break}return W.getSegmentRequestForTime(x,qt,rt)}},We(),fe=(0,F.Z)(ge).create({}),oe=(0,T.Z)(ge).getInstance(),X=(0,_.Z)(ge).create({events:Ie,eventBus:st,streamInfo:Se,timelineConverter:Be,dashConstants:Ye,dashMetrics:j.dashMetrics,segmentBaseController:j.segmentBaseController,type:U.Z.IMAGE}),(W=(0,N.Z)(ge).create({streamInfo:Se,type:U.Z.IMAGE,timelineConverter:Be,segmentsController:X,baseURLController:Je,debug:ot,eventBus:st,events:Ie,dashConstants:Ye,urlUtils:mt})).initialize(!!Re&&Re.getIsDynamic()),Y}b.__dashjs_factory_name="ThumbnailTracks",g.Z=y.Z.getClassFactory(b)},7417:function(R,g,A){var U=A(6398),C=A(8260),y=A(5448),v=A(6934),D=A(9597);function m(){var T,F,N=this.context;function _(j){if(!j)return null;j.fileStart===void 0&&(j.fileStart=0);var Y=v.parseBuffer(j),$=(0,C.Z)(N).create();return $.setData(Y),$}function I(j,Y){return j[Y+3]>>>0|j[Y+2]<<8>>>0|j[Y+1]<<16>>>0|j[Y]<<24>>>0}function b(j,Y){return String.fromCharCode(j[Y++])+String.fromCharCode(j[Y++])+String.fromCharCode(j[Y++])+String.fromCharCode(j[Y])}return F={parse:_,findLastTopIsoBoxCompleted:function(j,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new D.Z(0,!1);for(var W,ue=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,x=0;$<ue.byteLength;){var X=I(ue,$),fe=b(ue,$+4);if(X===0)break;$+X<=ue.byteLength&&(j.indexOf(fe)>=0?W=new D.Z($,!0,X):x=$+X),$+=X}return W||new D.Z(x,!1)},getMediaTimescaleFromMoov:function(j){var Y=_(j),$=Y?Y.getBox("mdhd"):void 0;return $?$.timescale:NaN},getSamplesInfo:function(j){if(!j||j.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var Y,$,W,ue,x,X,fe,oe,ge,Re,Je,Se,Be,ot,st,Ie,Ye=_(j),mt=Ye.getBoxes("moof"),Me=Ye.getBoxes("mfhd");st=Ye.getBoxes("moof").length,ot=Me[Me.length-1].sequence_number,$=0,x=[];var We=-1,rt=-1;for(Re=0;Re<mt.length;Re++){var qt=mt[Re],kt=qt.getChildBoxes("traf");for(oe=0;oe<kt.length;oe++){var ft=kt[oe],At=ft.getChildBox("tfhd"),Ce=ft.getChildBox("tfdt");ue=Ce.baseMediaDecodeTime;var re=ft.getChildBoxes("trun"),je=ft.getChildBoxes("subs");for(ge=0;ge<re.length;ge++){var O=re[ge];for($=O.sample_count,Be=(At.base_data_offset||0)+(O.data_offset||0),fe=0;fe<$;fe++){Y=(X=O.samples[fe]).sample_duration!==void 0?X.sample_duration:At.default_sample_duration,W=X.sample_size!==void 0?X.sample_size:At.default_sample_size;var M={dts:ue,cts:ue+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:Y,offset:qt.offset+Be,size:W,subSizes:[W]};if(je)for(Je=0;Je<je.length;Je++){var q=je[Je];if(We<q.entry_count-1&&fe>rt&&(We++,rt+=q.entries[We].sample_delta),fe==rt){M.subSizes=[];var K=q.entries[We];for(Se=0;Se<K.subsample_count;Se++)M.subSizes.push(K.subsamples[Se].subsample_size)}}x.push(M),Be+=W,ue+=Y}}Ie=ue-Ce.baseMediaDecodeTime}}return{sampleList:x,lastSequenceNumber:ot,totalDuration:Ie,numSequences:st}},findInitRange:function(j){var Y=null,$=_(j);if(!$)return Y;var W=$.getBox("ftyp"),ue=$.getBox("moov");return T.debug("Searching for initialization."),ue&&ue.isComplete&&(Y=(W?W.offset:ue.offset)+"-"+(ue.offset+ue.size-1),T.debug("Found the initialization.  Range: "+Y)),Y},parsePayload:function(j,Y,$){if($===void 0&&($=0),!Y||$+8>=Y.byteLength)return new D.Z(0,!1);for(var W,ue=Y instanceof ArrayBuffer?new Uint8Array(Y):Y,x=0;$<ue.byteLength;){var X=I(ue,$),fe=b(ue,$+4);if(X===0)break;$+X<=ue.byteLength&&(j.indexOf(fe)>=0?W=new D.Z($,!0,X,fe):x=$+X),$+=X}return W||new D.Z(x,!1)}},T=(0,U.Z)(N).getInstance().getLogger(F),F}m.__dashjs_factory_name="BoxParser",g.Z=y.Z.getSingletonFactory(m)},1715:function(R,g,A){A.d(g,{B:function(){return D}});var U=A(5448),C=A(7803),y=A(3393),v=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var T="ManagedMediaSource"in window,F="WebKitMediaSource"in window,N="MediaSource"in window;return T||F||N}function m(){var T,F,N;return T={setConfig:function(_){_&&_.settings&&(F=_.settings)},supportsMediaSource:D,supportsEncryptedMedia:function(){return N},supportsCodec:function(_,I){return I!==y.Z.AUDIO&&I!==y.Z.VIDEO?Promise.resolve(!0):function(b,j){return F.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(b.codec&&j===y.Z.AUDIO||j===y.Z.VIDEO&&b.codec&&b.width&&b.height&&b.bitrate&&b.framerate)}(_,I)?function(b,j){return new Promise(function(Y){if(b&&b.codec){var $={type:"media-source"};$[j]={},$[j].contentType=b.codec,$[j].width=b.width,$[j].height=b.height,$[j].bitrate=parseInt(b.bitrate),$[j].framerate=parseFloat(b.framerate),navigator.mediaCapabilities.decodingInfo($).then(function(W){Y(W.supported)}).catch(function(){Y(!1)})}else Y(!1)})}(_,I):function(b){return new Promise(function(j){if(b&&b.codec){var Y=b.codec;b.width&&b.height&&(Y+=';width="'+b.width+'";height="'+b.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(Y)||"MediaSource"in window&&MediaSource.isTypeSupported(Y)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(Y)?j(!0):j(!1)}else j(!1)})}(_)},setEncryptedMediaSupported:function(_){N=_},supportsEssentialProperty:function(_){try{return C.Y.indexOf(_.schemeIdUri)!==-1||y.Z.FONT_DOWNLOAD_DVB_SCHEME===_.schemeIdUri}catch(I){return!0}},codecRootCompatibleWithCodec:function(_,I){for(var b,j=_.split(".")[0],Y=I.indexOf(j)===0,$=0;$<v.length;$++)if(v[$].codec===j){b=v[$];break}return b?Y||b.compatibleCodecs.some(function(W){return I.indexOf(W)===0}):Y}},N=!1,T}m.__dashjs_factory_name="Capabilities",g.Z=U.Z.getSingletonFactory(m)},2295:function(R,g,A){var U=A(5448),C=A(3106);function y(){return{customTimeRangeArray:[],length:0,add:function(v,D){var m;for(m=0;m<this.customTimeRangeArray.length&&v>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:v,end:D}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(v,D){for(var m=0;m<this.customTimeRangeArray.length;m++)if(v<=this.customTimeRangeArray[m].start&&D>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(v>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:D,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=v;break}v>this.customTimeRangeArray[m].start&&v<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=v:D>this.customTimeRangeArray[m].start&&D<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=D)}this.length=this.customTimeRangeArray.length},mergeRanges:function(v,D){var m=this.customTimeRangeArray[v],T=this.customTimeRangeArray[D];return m.start<=T.start&&T.start<=m.end&&m.end<=T.end?(m.end=T.end,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&T.end<=m.end?(m.start=T.start,this.customTimeRangeArray.splice(D,1),!0):T.start<=m.start&&m.start<=T.end&&m.end<=T.end?(this.customTimeRangeArray.splice(v,1),!0):m.start<=T.start&&T.start<=m.end&&T.end<=m.end&&(this.customTimeRangeArray.splice(D,1),!0)},start:function(v){return(0,C.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].start},end:function(v){return(0,C.SE)(v),v>=this.customTimeRangeArray.length||v<0?NaN:this.customTimeRangeArray[v].end}}}y.__dashjs_factory_name="CustomTimeRanges",g.Z=U.Z.getClassFactory(y)},5:function(R,g,A){var U=A(5448);function C(){var y,v=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,m=/^https:\/\//i,T=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,F=function(W,ue){try{return new window.URL(W,ue).toString()}catch(x){return W}},N=function(W,ue){var x=_;if(!ue||!j(W))return W;Y(W)&&(x=I),$(W)&&(x=b);var X=x(ue),fe=X.charAt(X.length-1)!=="/"&&W.charAt(0)!=="/"?"/":"";return[X,W].join(fe)};function _(W){var ue=W.indexOf("/"),x=W.lastIndexOf("/");return ue!==-1?x===ue+1?W:(W.indexOf("?")!==-1&&(W=W.substring(0,W.indexOf("?"))),W.substring(0,x+1)):""}function I(W){var ue=W.match(T);return ue?ue[1]:""}function b(W){var ue=W.match(v);return ue?ue[0]:""}function j(W){return!v.test(W)}function Y(W){return j(W)&&W.charAt(0)==="/"}function $(W){return W.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),y=F}catch(W){}finally{y=y||N}}(),{parseBaseUrl:_,parseOrigin:I,parseScheme:b,isRelative:j,isPathAbsolute:Y,isSchemeRelative:$,isHTTPURL:function(W){return D.test(W)},isHTTPS:function(W){return m.test(W)},removeHostname:function(W){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(W)[2].substring(1)},resolve:function(W,ue){return y(W,ue)}}}C.__dashjs_factory_name="DefaultURLUtils",g.Z=U.Z.getSingletonFactory(C)},8260:function(R,g,A){var U=A(2839),C=A(5448);function y(){var v;function D(T){var F=[];if(!T||!v||typeof v.fetchAll!="function")return F;for(var N,_=v.fetchAll(T),I=0,b=_.length;I<b;I++)(N=m(_[I]))&&F.push(N);return F}function m(T){if(!T)return null;var F=new U.Z(T);return T.hasOwnProperty("_incomplete")&&(F.isComplete=!T._incomplete),F}return{getBox:function(T){return T&&v&&v.boxes&&v.boxes.length!==0&&typeof v.fetch=="function"?m(v.fetch(T)):null},getBoxes:D,setData:function(T){v=T},getLastBox:function(){if(!v||!v.boxes||!v.boxes.length)return null;var T=D(v.boxes[v.boxes.length-1].type);return T.length>0?T[T.length-1]:null}}}y.__dashjs_factory_name="IsoFile",g.Z=C.Z.getClassFactory(y)},7473:function(R,g,A){A.d(g,{k:function(){return C}});var U=A(5448);function C(v,D){var m={url:v.url,method:v.method,headers:Object.assign({},v.headers),credentials:v.withCredentials?"include":void 0,range:v.request.range};return Promise.resolve(D.modifyRequest(m)).then(function(){return Object.assign(v,m,{withCredentials:m.credentials==="include"})})}function y(){return{modifyRequest:null,modifyRequestURL:function(v){return v},modifyRequestHeader:function(v,D){return D.url,v}}}y.__dashjs_factory_name="RequestModifier",g.Z=U.Z.getSingletonFactory(y)},3106:function(R,g,A){A.d(g,{PS:function(){return y},SE:function(){return v}});var U=A(3393);function C(D){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},C(D)}function y(D,m){if(C(D)!==m)throw U.Z.BAD_ARGUMENT_ERROR}function v(D){if(D===null||isNaN(D)||D%1!=0)throw U.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(R,g,A){var U=A(5448),C=A(5);function y(){var D,m=[],T=this.context;function F(N,_,I){var b=function(j){var Y;for(Y=0;Y<m.length;Y++)if(m[Y].regex.test(j))return m[Y].utils;return D}(I||_);return b&&typeof b[N]=="function"?b[N](_,I):D[N](_,I)}return D=(0,C.Z)(T).getInstance(),{registerUrlRegex:function(N,_){m.push({regex:N,utils:_})},parseBaseUrl:function(N){return F("parseBaseUrl",N)},parseOrigin:function(N){return F("parseOrigin",N)},parseScheme:function(N){return F("parseScheme",N)},isRelative:function(N){return F("isRelative",N)},isPathAbsolute:function(N){return F("isPathAbsolute",N)},isSchemeRelative:function(N){return F("isSchemeRelative",N)},isHTTPURL:function(N){return F("isHTTPURL",N)},isHTTPS:function(N){return F("isHTTPS",N)},removeHostname:function(N){return F("removeHostname",N)},resolve:function(N,_){return F("resolve",N,_)}}}y.__dashjs_factory_name="URLUtils";var v=U.Z.getSingletonFactory(y);g.Z=v},5459:function(R,g){g.Z=function A(U,C,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,A),this.code=U||null,this.message=C||null,this.data=y||null}},3186:function(R,g,A){var U=A(7855);function C(v,D){for(var m=0;m<D.length;m++){var T=D[m];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}var y=function(){function v(T){(function(F,N){if(!(F instanceof N))throw new TypeError("Cannot call a class as a function")})(this,v),this.action=v.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=T||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var D,m;return D=v,(m=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===U.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(T){this.type=T&&T.init?U.w.INIT_SEGMENT_TYPE:U.w.MEDIA_SEGMENT_TYPE,this.url=T&&T.url?T.url:null,this.range=T&&T.range?T.range.start+"-"+T.range.end:null,this.mediaType=T&&T.mediaType?T.mediaType:null}}])&&C(D.prototype,m),v}();y.ACTION_DOWNLOAD="download",y.ACTION_COMPLETE="complete",g.Z=y},2839:function(R,g){function A(C,y){for(var v=0;v<y.length;v++){var D=y[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}var U=function(){function C(D){if(function(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}(this,C),this.offset=D._offset,this.type=D.type,this.size=D.size,this.boxes=[],D.boxes)for(var m=0;m<D.boxes.length;m++)this.boxes.push(new C(D.boxes[m]));switch(this.isComplete=!0,D.type){case"sidx":if(this.timescale=D.timescale,this.earliest_presentation_time=D.earliest_presentation_time,this.first_offset=D.first_offset,this.references=D.references,D.references){this.references=[];for(var T=0;T<D.references.length;T++){var F={reference_type:D.references[T].reference_type,referenced_size:D.references[T].referenced_size,subsegment_duration:D.references[T].subsegment_duration};this.references.push(F)}}break;case"emsg":this.id=D.id,this.version=D.version===1?1:0,this.value=D.value,this.timescale=D.timescale,this.scheme_id_uri=D.scheme_id_uri,this.presentation_time_delta=D.version===1?D.presentation_time:D.presentation_time_delta,this.event_duration=D.event_duration,this.message_data=D.message_data;break;case"mdhd":this.timescale=D.timescale;break;case"mfhd":this.sequence_number=D.sequence_number;break;case"subs":this.entry_count=D.entry_count,this.entries=D.entries;break;case"tfhd":this.base_data_offset=D.base_data_offset,this.sample_description_index=D.sample_description_index,this.default_sample_duration=D.default_sample_duration,this.default_sample_size=D.default_sample_size,this.default_sample_flags=D.default_sample_flags,this.flags=D.flags;break;case"tfdt":this.version=D.version,this.baseMediaDecodeTime=D.baseMediaDecodeTime,this.flags=D.flags;break;case"trun":if(this.sample_count=D.sample_count,this.first_sample_flags=D.first_sample_flags,this.data_offset=D.data_offset,this.flags=D.flags,this.samples=D.samples,D.samples){this.samples=[];for(var N=0,_=D.samples.length;N<_;N++){var I={sample_size:D.samples[N].sample_size,sample_duration:D.samples[N].sample_duration,sample_composition_time_offset:D.samples[N].sample_composition_time_offset};this.samples.push(I)}}break;case"prft":this.version=D.version,this.reference_track_ID=D.reference_track_ID,this.ntp_timestamp_sec=D.ntp_timestamp_sec,this.ntp_timestamp_frac=D.ntp_timestamp_frac,this.media_time=D.media_time,this.flags=D.flags}}var y,v;return y=C,(v=[{key:"getChildBox",value:function(D){for(var m=0;m<this.boxes.length;m++)if(this.boxes[m].type===D)return this.boxes[m]}},{key:"getChildBoxes",value:function(D){for(var m=[],T=0;T<this.boxes.length;T++)this.boxes[T].type===D&&m.push(this.boxes[T]);return m}}])&&A(y.prototype,v),C}();g.Z=U},9597:function(R,g){g.Z=function A(U,C,y){(function(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")})(this,A),this.lastCompletedOffset=U,this.found=C,this.size=y}},2128:function(R,g){g.Z=function A(){(function(U,C){if(!(U instanceof C))throw new TypeError("Cannot call a class as a function")})(this,A),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(R,g,A){function U(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}A.d(g,{O:function(){return y},w:function(){return C}});var C=function v(){U(this,v),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},y=function v(){U(this,v),this.s=null,this.d=null,this.b=[]};C.GET="GET",C.HEAD="HEAD",C.MPD_TYPE="MPD",C.XLINK_EXPANSION_TYPE="XLinkExpansion",C.INIT_SEGMENT_TYPE="InitializationSegment",C.INDEX_SEGMENT_TYPE="IndexSegment",C.MEDIA_SEGMENT_TYPE="MediaSegment",C.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",C.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",C.DVB_REPORTING_TYPE="DVBReporting",C.LICENSE="license",C.CONTENT_STEERING_TYPE="ContentSteering",C.OTHER_TYPE="other"},3039:function(R,g){function A(C,y){return function(v,D){for(var m,T,F,N=U(v,"tag"),_=U(D==null?"*":D,"range"),I=[],b=-1;++b<_.length;)if(m=_[b].toLowerCase(),y||m!=="*"){for(T=-1,F=[];++T<N.length;)if(C(N[T].toLowerCase(),m)){if(!y)return N[T];I.push(N[T])}else F.push(N[T]);N=F}return y?I:void 0}}function U(C,y){var v=C&&typeof C=="string"?[C]:C;if(!v||typeof v!="object"||!("length"in v))throw new Error("Invalid "+y+" `"+v+"`, expected non-empty string");return v}g.basicFilter=A(function(C,y){return y==="*"||C===y||C.indexOf(y+"-")>-1},!0),g.extendedFilter=A(function(C,y){var v=C.split("-"),D=y.split("-"),m=0,T=0;if(D[T]!=="*"&&v[m]!==D[T])return!1;for(m++,T++;T<D.length;)if(D[T]!=="*"){if(!v[m])return!1;if(v[m]!==D[T]){if(v[m].length===1)return!1;m++}else m++,T++}else T++;return!0},!0),g.lookup=A(function(C,y){for(var v,D=y;;){if(D==="*"||C===D)return!0;if((v=D.lastIndexOf("-"))<0)return!1;D.charAt(v-2)==="-"&&(v-=2),D=D.slice(0,v)}})},3973:function(R,g,A){R.exports=A(3854)},3854:function(R,g,A){var U=A(2415),C=A(3039),y=A(7778),v=A(5813),D=A(3165),m=A(9460);R.exports=function(Y,$){var W,ue=$||{},x=U.parse(String(Y||"").toLowerCase(),ue),X=U.stringify(x),fe=-1;if(!X)return X;for(;++fe<y.length;)C.extendedFilter(X,y[fe].from).length&&(_(x,y[fe].from,y[fe].to),X=U.stringify(x));for(fe=-1;++fe<v.length;)I(x,v[fe].from.field,v[fe].from.value)&&b(x,v[fe].to.field,v[fe].to.value);for(X=U.stringify(Object.assign({},x,N)),fe=-1;++fe<D.length;)X===D[fe]&&(_(x,D[fe],D[fe].split("-").slice(0,-1).join("-")),X=U.stringify(Object.assign({},x,N)));if(x.extensions.sort(j),ue.warning)for(W in m)T.call(m[W],x[W])&&ue.warning("Deprecated "+W+" `"+x[W]+"`, expected one of `"+m[W][x[W]].join("`, `")+"`",null,7);return x.script&&(x.script=x.script.charAt(0).toUpperCase()+x.script.slice(1)),x.region&&(x.region=x.region.toUpperCase()),U.stringify(x)};var T={}.hasOwnProperty,F=new Intl.Collator,N={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(Y,$,W){var ue,x=U.parse($),X=U.parse(W),fe=[];for(ue in x)x[ue]&&x[ue].length&&I(Y,ue,x[ue])&&fe.push(ue);for(ue in X)X[ue]&&X[ue].length&&(fe.indexOf(ue)>-1||!Y[ue]||!Y[ue].length)&&b(Y,ue,X[ue])}function I(Y,$,W){var ue,x,X,fe,oe=!1;if(W){if(x=ue=Y[$],ue&&typeof ue=="object")for(x=[],X=-1;++X<ue.length;)fe=ue[X],W.indexOf(fe)<0?x.push(fe):oe=!0;else ue===W&&(x=null,oe=!0);Y[$]=x}return oe}function b(Y,$,W){var ue,x,X,fe=Y[$];if(fe&&typeof fe=="object")for(ue=[].concat(W),x=-1;++x<ue.length;)X=ue[x],fe.indexOf(X)<0&&fe.push(X);else Y[$]=W}function j(Y,$){return F.compare(Y.singleton,$.singleton)}},2415:function(R,g,A){g.parse=A(6903),g.stringify=A(6713)},6903:function(R,g,A){var U=A(2219),C=A(3516),y=A(395),v=A(858),D=A(8589);R.exports=function T(F,N){var _,I,b,j=N||{},Y={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},$=String(F),W=$.toLowerCase(),ue=0;if(F==null)throw new Error("Expected string, got `"+F+"`");if(m.call(D,W))return(j.normalize==null||j.normalize)&&D[W]?T(D[W]):(Y[v.indexOf(W)===-1?"irregular":"regular"]=$,Y);for(;C(W.charCodeAt(ue))&&ue<9;)ue++;if(ue>1&&ue<9){if(Y.language=$.slice(0,ue),ue<4)for(I=0;W.charCodeAt(ue)===45&&C(W.charCodeAt(ue+1))&&C(W.charCodeAt(ue+2))&&C(W.charCodeAt(ue+3))&&!C(W.charCodeAt(ue+4));){if(I>2)return x(ue,3,"Too many extended language subtags, expected at most 3 subtags");Y.extendedLanguageSubtags.push($.slice(ue+1,ue+4)),ue+=4,I++}for(W.charCodeAt(ue)===45&&C(W.charCodeAt(ue+1))&&C(W.charCodeAt(ue+2))&&C(W.charCodeAt(ue+3))&&C(W.charCodeAt(ue+4))&&!C(W.charCodeAt(ue+5))&&(Y.script=$.slice(ue+1,ue+5),ue+=5),W.charCodeAt(ue)===45&&(C(W.charCodeAt(ue+1))&&C(W.charCodeAt(ue+2))&&!C(W.charCodeAt(ue+3))?(Y.region=$.slice(ue+1,ue+3),ue+=3):y(W.charCodeAt(ue+1))&&y(W.charCodeAt(ue+2))&&y(W.charCodeAt(ue+3))&&!y(W.charCodeAt(ue+4))&&(Y.region=$.slice(ue+1,ue+4),ue+=4));W.charCodeAt(ue)===45;){for(b=_=ue+1;U(W.charCodeAt(b));){if(b-_>7)return x(b,1,"Too long variant, expected at most 8 characters");b++}if(!(b-_>4||b-_>3&&y(W.charCodeAt(_))))break;Y.variants.push($.slice(_,b)),ue=b}for(;W.charCodeAt(ue)===45&&W.charCodeAt(ue+1)!==120&&U(W.charCodeAt(ue+1))&&W.charCodeAt(ue+2)===45&&U(W.charCodeAt(ue+3));){for(b=ue+2,I=0;W.charCodeAt(b)===45&&U(W.charCodeAt(b+1))&&U(W.charCodeAt(b+2));)for(b=(_=b+1)+2,I++;U(W.charCodeAt(b));){if(b-_>7)return x(b,2,"Too long extension, expected at most 8 characters");b++}if(!I)return x(b,4,"Empty extension, extensions must have at least 2 characters of content");Y.extensions.push({singleton:$.charAt(ue+1),extensions:$.slice(ue+3,b).split("-")}),ue=b}}else ue=0;if(ue===0&&W.charCodeAt(ue)===120||W.charCodeAt(ue)===45&&W.charCodeAt(ue+1)===120)for(b=ue=ue?ue+2:1;W.charCodeAt(b)===45&&U(W.charCodeAt(b+1));){for(b=_=ue+1;U(W.charCodeAt(b));){if(b-_>7)return x(b,5,"Too long private-use area, expected at most 8 characters");b++}Y.privateuse.push($.slice(ue+1,b)),ue=b}return ue!==$.length?x(ue,6,"Found superfluous content after tag"):Y;function x(X,fe,oe){return j.warning&&j.warning(oe,fe,X),j.forgiving?Y:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var m={}.hasOwnProperty},6713:function(R){R.exports=function(g){var A,U,C,y=g||{},v=[];if(y.irregular||y.regular)return y.irregular||y.regular;if(y.language)for(v=v.concat(y.language,y.extendedLanguageSubtags||[],y.script||[],y.region||[],y.variants||[]),A=y.extensions||[],U=-1;++U<A.length;)(C=A[U]).singleton&&C.extensions&&C.extensions.length&&(v=v.concat(C.singleton,C.extensions));return y.privateuse&&y.privateuse.length&&(v=v.concat("x",y.privateuse)),v.join("-")}},1549:function(R,g,A){var U=A(6693),C=A(2165),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=m,g.SlowBuffer=function(O){return+O!=O&&(O=0),m.alloc(+O)},g.INSPECT_MAX_BYTES=50;var v=2147483647;function D(O){if(O>v)throw new RangeError('The value "'+O+'" is invalid for option "size"');var M=new Uint8Array(O);return Object.setPrototypeOf(M,m.prototype),M}function m(O,M,q){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(O)}return T(O,M,q)}function T(O,M,q){if(typeof O=="string")return function(de,Ke){if(typeof Ke=="string"&&Ke!==""||(Ke="utf8"),!m.isEncoding(Ke))throw new TypeError("Unknown encoding: "+Ke);var St=0|j(de,Ke),ut=D(St),at=ut.write(de,Ke);return at!==St&&(ut=ut.slice(0,at)),ut}(O,M);if(ArrayBuffer.isView(O))return function(de){if(Ce(de,Uint8Array)){var Ke=new Uint8Array(de);return I(Ke.buffer,Ke.byteOffset,Ke.byteLength)}return _(de)}(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Ce(O,ArrayBuffer)||O&&Ce(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(O,SharedArrayBuffer)||O&&Ce(O.buffer,SharedArrayBuffer)))return I(O,M,q);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return m.from(K,M,q);var _e=function(de){if(m.isBuffer(de)){var Ke=0|b(de.length),St=D(Ke);return St.length===0||de.copy(St,0,0,Ke),St}return de.length!==void 0?typeof de.length!="number"||re(de.length)?D(0):_(de):de.type==="Buffer"&&Array.isArray(de.data)?_(de.data):void 0}(O);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return m.from(O[Symbol.toPrimitive]("string"),M,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}function F(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function N(O){return F(O),D(O<0?0:0|b(O))}function _(O){for(var M=O.length<0?0:0|b(O.length),q=D(M),K=0;K<M;K+=1)q[K]=255&O[K];return q}function I(O,M,q){if(M<0||O.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<M+(q||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=M===void 0&&q===void 0?new Uint8Array(O):q===void 0?new Uint8Array(O,M):new Uint8Array(O,M,q),Object.setPrototypeOf(K,m.prototype),K}function b(O){if(O>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return 0|O}function j(O,M){if(m.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Ce(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);var q=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&q===0)return 0;for(var _e=!1;;)switch(M){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return kt(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return ft(O).length;default:if(_e)return K?-1:kt(O).length;M=(""+M).toLowerCase(),_e=!0}}function Y(O,M,q){var K=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(M>>>=0))return"";for(O||(O="utf8");;)switch(O){case"hex":return st(this,M,q);case"utf8":case"utf-8":return Je(this,M,q);case"ascii":return Be(this,M,q);case"latin1":case"binary":return ot(this,M,q);case"base64":return Re(this,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,M,q);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}function $(O,M,q){var K=O[M];O[M]=O[q],O[q]=K}function W(O,M,q,K,_e){if(O.length===0)return-1;if(typeof q=="string"?(K=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),re(q=+q)&&(q=_e?0:O.length-1),q<0&&(q=O.length+q),q>=O.length){if(_e)return-1;q=O.length-1}else if(q<0){if(!_e)return-1;q=0}if(typeof M=="string"&&(M=m.from(M,K)),m.isBuffer(M))return M.length===0?-1:ue(O,M,q,K,_e);if(typeof M=="number")return M&=255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(O,M,q):Uint8Array.prototype.lastIndexOf.call(O,M,q):ue(O,[M],q,K,_e);throw new TypeError("val must be string, number or Buffer")}function ue(O,M,q,K,_e){var de,Ke=1,St=O.length,ut=M.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||M.length<2)return-1;Ke=2,St/=2,ut/=2,q/=2}function at(Tt,Rt){return Ke===1?Tt[Rt]:Tt.readUInt16BE(Rt*Ke)}if(_e){var tt=-1;for(de=q;de<St;de++)if(at(O,de)===at(M,tt===-1?0:de-tt)){if(tt===-1&&(tt=de),de-tt+1===ut)return tt*Ke}else tt!==-1&&(de-=de-tt),tt=-1}else for(q+ut>St&&(q=St-ut),de=q;de>=0;de--){for(var dt=!0,Et=0;Et<ut;Et++)if(at(O,de+Et)!==at(M,Et)){dt=!1;break}if(dt)return de}return-1}function x(O,M,q,K){q=Number(q)||0;var _e=O.length-q;K?(K=Number(K))>_e&&(K=_e):K=_e;var de=M.length;K>de/2&&(K=de/2);for(var Ke=0;Ke<K;++Ke){var St=parseInt(M.substr(2*Ke,2),16);if(re(St))return Ke;O[q+Ke]=St}return Ke}function X(O,M,q,K){return At(kt(M,O.length-q),O,q,K)}function fe(O,M,q,K){return At(function(_e){for(var de=[],Ke=0;Ke<_e.length;++Ke)de.push(255&_e.charCodeAt(Ke));return de}(M),O,q,K)}function oe(O,M,q,K){return At(ft(M),O,q,K)}function ge(O,M,q,K){return At(function(_e,de){for(var Ke,St,ut,at=[],tt=0;tt<_e.length&&!((de-=2)<0);++tt)St=(Ke=_e.charCodeAt(tt))>>8,ut=Ke%256,at.push(ut),at.push(St);return at}(M,O.length-q),O,q,K)}function Re(O,M,q){return M===0&&q===O.length?U.fromByteArray(O):U.fromByteArray(O.slice(M,q))}function Je(O,M,q){q=Math.min(O.length,q);for(var K=[],_e=M;_e<q;){var de,Ke,St,ut,at=O[_e],tt=null,dt=at>239?4:at>223?3:at>191?2:1;if(_e+dt<=q)switch(dt){case 1:at<128&&(tt=at);break;case 2:(192&(de=O[_e+1]))==128&&(ut=(31&at)<<6|63&de)>127&&(tt=ut);break;case 3:de=O[_e+1],Ke=O[_e+2],(192&de)==128&&(192&Ke)==128&&(ut=(15&at)<<12|(63&de)<<6|63&Ke)>2047&&(ut<55296||ut>57343)&&(tt=ut);break;case 4:de=O[_e+1],Ke=O[_e+2],St=O[_e+3],(192&de)==128&&(192&Ke)==128&&(192&St)==128&&(ut=(15&at)<<18|(63&de)<<12|(63&Ke)<<6|63&St)>65535&&ut<1114112&&(tt=ut)}tt===null?(tt=65533,dt=1):tt>65535&&(tt-=65536,K.push(tt>>>10&1023|55296),tt=56320|1023&tt),K.push(tt),_e+=dt}return function(Et){var Tt=Et.length;if(Tt<=Se)return String.fromCharCode.apply(String,Et);for(var Rt="",hn=0;hn<Tt;)Rt+=String.fromCharCode.apply(String,Et.slice(hn,hn+=Se));return Rt}(K)}g.kMaxLength=v,m.TYPED_ARRAY_SUPPORT=function(){try{var O=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(O,M),O.foo()===42}catch(q){return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(O,M,q){return T(O,M,q)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(O,M,q){return function(K,_e,de){return F(K),K<=0?D(K):_e!==void 0?typeof de=="string"?D(K).fill(_e,de):D(K).fill(_e):D(K)}(O,M,q)},m.allocUnsafe=function(O){return N(O)},m.allocUnsafeSlow=function(O){return N(O)},m.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==m.prototype},m.compare=function(O,M){if(Ce(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),Ce(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength)),!m.isBuffer(O)||!m.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===M)return 0;for(var q=O.length,K=M.length,_e=0,de=Math.min(q,K);_e<de;++_e)if(O[_e]!==M[_e]){q=O[_e],K=M[_e];break}return q<K?-1:K<q?1:0},m.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(O,M){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return m.alloc(0);var q;if(M===void 0)for(M=0,q=0;q<O.length;++q)M+=O[q].length;var K=m.allocUnsafe(M),_e=0;for(q=0;q<O.length;++q){var de=O[q];if(Ce(de,Uint8Array))_e+de.length>K.length?m.from(de).copy(K,_e):Uint8Array.prototype.set.call(K,de,_e);else{if(!m.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(K,_e)}_e+=de.length}return K},m.byteLength=j,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<O;M+=2)$(this,M,M+1);return this},m.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<O;M+=4)$(this,M,M+3),$(this,M+1,M+2);return this},m.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<O;M+=8)$(this,M,M+7),$(this,M+1,M+6),$(this,M+2,M+5),$(this,M+3,M+4);return this},m.prototype.toString=function(){var O=this.length;return O===0?"":arguments.length===0?Je(this,0,O):Y.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(O){if(!m.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||m.compare(this,O)===0},m.prototype.inspect=function(){var O="",M=g.INSPECT_MAX_BYTES;return O=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(O+=" ... "),"<Buffer "+O+">"},y&&(m.prototype[y]=m.prototype.inspect),m.prototype.compare=function(O,M,q,K,_e){if(Ce(O,Uint8Array)&&(O=m.from(O,O.offset,O.byteLength)),!m.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(M===void 0&&(M=0),q===void 0&&(q=O?O.length:0),K===void 0&&(K=0),_e===void 0&&(_e=this.length),M<0||q>O.length||K<0||_e>this.length)throw new RangeError("out of range index");if(K>=_e&&M>=q)return 0;if(K>=_e)return-1;if(M>=q)return 1;if(this===O)return 0;for(var de=(_e>>>=0)-(K>>>=0),Ke=(q>>>=0)-(M>>>=0),St=Math.min(de,Ke),ut=this.slice(K,_e),at=O.slice(M,q),tt=0;tt<St;++tt)if(ut[tt]!==at[tt]){de=ut[tt],Ke=at[tt];break}return de<Ke?-1:Ke<de?1:0},m.prototype.includes=function(O,M,q){return this.indexOf(O,M,q)!==-1},m.prototype.indexOf=function(O,M,q){return W(this,O,M,q,!0)},m.prototype.lastIndexOf=function(O,M,q){return W(this,O,M,q,!1)},m.prototype.write=function(O,M,q,K){if(M===void 0)K="utf8",q=this.length,M=0;else if(q===void 0&&typeof M=="string")K=M,q=this.length,M=0;else{if(!isFinite(M))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");M>>>=0,isFinite(q)?(q>>>=0,K===void 0&&(K="utf8")):(K=q,q=void 0)}var _e=this.length-M;if((q===void 0||q>_e)&&(q=_e),O.length>0&&(q<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var de=!1;;)switch(K){case"hex":return x(this,O,M,q);case"utf8":case"utf-8":return X(this,O,M,q);case"ascii":case"latin1":case"binary":return fe(this,O,M,q);case"base64":return oe(this,O,M,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,O,M,q);default:if(de)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),de=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Se=4096;function Be(O,M,q){var K="";q=Math.min(O.length,q);for(var _e=M;_e<q;++_e)K+=String.fromCharCode(127&O[_e]);return K}function ot(O,M,q){var K="";q=Math.min(O.length,q);for(var _e=M;_e<q;++_e)K+=String.fromCharCode(O[_e]);return K}function st(O,M,q){var K=O.length;(!M||M<0)&&(M=0),(!q||q<0||q>K)&&(q=K);for(var _e="",de=M;de<q;++de)_e+=je[O[de]];return _e}function Ie(O,M,q){for(var K=O.slice(M,q),_e="",de=0;de<K.length-1;de+=2)_e+=String.fromCharCode(K[de]+256*K[de+1]);return _e}function Ye(O,M,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+M>q)throw new RangeError("Trying to access beyond buffer length")}function mt(O,M,q,K,_e,de){if(!m.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>_e||M<de)throw new RangeError('"value" argument is out of bounds');if(q+K>O.length)throw new RangeError("Index out of range")}function Me(O,M,q,K,_e,de){if(q+K>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function We(O,M,q,K,_e){return M=+M,q>>>=0,_e||Me(O,0,q,4),C.write(O,M,q,K,23,4),q+4}function rt(O,M,q,K,_e){return M=+M,q>>>=0,_e||Me(O,0,q,8),C.write(O,M,q,K,52,8),q+8}m.prototype.slice=function(O,M){var q=this.length;(O=~~O)<0?(O+=q)<0&&(O=0):O>q&&(O=q),(M=M===void 0?q:~~M)<0?(M+=q)<0&&(M=0):M>q&&(M=q),M<O&&(M=O);var K=this.subarray(O,M);return Object.setPrototypeOf(K,m.prototype),K},m.prototype.readUintLE=m.prototype.readUIntLE=function(O,M,q){O>>>=0,M>>>=0,q||Ye(O,M,this.length);for(var K=this[O],_e=1,de=0;++de<M&&(_e*=256);)K+=this[O+de]*_e;return K},m.prototype.readUintBE=m.prototype.readUIntBE=function(O,M,q){O>>>=0,M>>>=0,q||Ye(O,M,this.length);for(var K=this[O+--M],_e=1;M>0&&(_e*=256);)K+=this[O+--M]*_e;return K},m.prototype.readUint8=m.prototype.readUInt8=function(O,M){return O>>>=0,M||Ye(O,1,this.length),this[O]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(O,M){return O>>>=0,M||Ye(O,2,this.length),this[O]|this[O+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(O,M){return O>>>=0,M||Ye(O,2,this.length),this[O]<<8|this[O+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},m.prototype.readIntLE=function(O,M,q){O>>>=0,M>>>=0,q||Ye(O,M,this.length);for(var K=this[O],_e=1,de=0;++de<M&&(_e*=256);)K+=this[O+de]*_e;return K>=(_e*=128)&&(K-=Math.pow(2,8*M)),K},m.prototype.readIntBE=function(O,M,q){O>>>=0,M>>>=0,q||Ye(O,M,this.length);for(var K=M,_e=1,de=this[O+--K];K>0&&(_e*=256);)de+=this[O+--K]*_e;return de>=(_e*=128)&&(de-=Math.pow(2,8*M)),de},m.prototype.readInt8=function(O,M){return O>>>=0,M||Ye(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},m.prototype.readInt16LE=function(O,M){O>>>=0,M||Ye(O,2,this.length);var q=this[O]|this[O+1]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt16BE=function(O,M){O>>>=0,M||Ye(O,2,this.length);var q=this[O+1]|this[O]<<8;return 32768&q?4294901760|q:q},m.prototype.readInt32LE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},m.prototype.readInt32BE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},m.prototype.readFloatLE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),C.read(this,O,!0,23,4)},m.prototype.readFloatBE=function(O,M){return O>>>=0,M||Ye(O,4,this.length),C.read(this,O,!1,23,4)},m.prototype.readDoubleLE=function(O,M){return O>>>=0,M||Ye(O,8,this.length),C.read(this,O,!0,52,8)},m.prototype.readDoubleBE=function(O,M){return O>>>=0,M||Ye(O,8,this.length),C.read(this,O,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||mt(this,O,M,q,Math.pow(2,8*q)-1,0);var _e=1,de=0;for(this[M]=255&O;++de<q&&(_e*=256);)this[M+de]=O/_e&255;return M+q},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(O,M,q,K){O=+O,M>>>=0,q>>>=0,K||mt(this,O,M,q,Math.pow(2,8*q)-1,0);var _e=q-1,de=1;for(this[M+_e]=255&O;--_e>=0&&(de*=256);)this[M+_e]=O/de&255;return M+q},m.prototype.writeUint8=m.prototype.writeUInt8=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,1,255,0),this[M]=255&O,M+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,2,65535,0),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,2,65535,0),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,4,4294967295,0),this[M+3]=O>>>24,this[M+2]=O>>>16,this[M+1]=O>>>8,this[M]=255&O,M+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,4,4294967295,0),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeIntLE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var _e=Math.pow(2,8*q-1);mt(this,O,M,q,_e-1,-_e)}var de=0,Ke=1,St=0;for(this[M]=255&O;++de<q&&(Ke*=256);)O<0&&St===0&&this[M+de-1]!==0&&(St=1),this[M+de]=(O/Ke>>0)-St&255;return M+q},m.prototype.writeIntBE=function(O,M,q,K){if(O=+O,M>>>=0,!K){var _e=Math.pow(2,8*q-1);mt(this,O,M,q,_e-1,-_e)}var de=q-1,Ke=1,St=0;for(this[M+de]=255&O;--de>=0&&(Ke*=256);)O<0&&St===0&&this[M+de+1]!==0&&(St=1),this[M+de]=(O/Ke>>0)-St&255;return M+q},m.prototype.writeInt8=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,1,127,-128),O<0&&(O=255+O+1),this[M]=255&O,M+1},m.prototype.writeInt16LE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,2,32767,-32768),this[M]=255&O,this[M+1]=O>>>8,M+2},m.prototype.writeInt16BE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,2,32767,-32768),this[M]=O>>>8,this[M+1]=255&O,M+2},m.prototype.writeInt32LE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,4,2147483647,-2147483648),this[M]=255&O,this[M+1]=O>>>8,this[M+2]=O>>>16,this[M+3]=O>>>24,M+4},m.prototype.writeInt32BE=function(O,M,q){return O=+O,M>>>=0,q||mt(this,O,M,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[M]=O>>>24,this[M+1]=O>>>16,this[M+2]=O>>>8,this[M+3]=255&O,M+4},m.prototype.writeFloatLE=function(O,M,q){return We(this,O,M,!0,q)},m.prototype.writeFloatBE=function(O,M,q){return We(this,O,M,!1,q)},m.prototype.writeDoubleLE=function(O,M,q){return rt(this,O,M,!0,q)},m.prototype.writeDoubleBE=function(O,M,q){return rt(this,O,M,!1,q)},m.prototype.copy=function(O,M,q,K){if(!m.isBuffer(O))throw new TypeError("argument should be a Buffer");if(q||(q=0),K||K===0||(K=this.length),M>=O.length&&(M=O.length),M||(M=0),K>0&&K<q&&(K=q),K===q||O.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),O.length-M<K-q&&(K=O.length-M+q);var _e=K-q;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,q,K):Uint8Array.prototype.set.call(O,this.subarray(q,K),M),_e},m.prototype.fill=function(O,M,q,K){if(typeof O=="string"){if(typeof M=="string"?(K=M,M=0,q=this.length):typeof q=="string"&&(K=q,q=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!m.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(O.length===1){var _e=O.charCodeAt(0);(K==="utf8"&&_e<128||K==="latin1")&&(O=_e)}}else typeof O=="number"?O&=255:typeof O=="boolean"&&(O=Number(O));if(M<0||this.length<M||this.length<q)throw new RangeError("Out of range index");if(q<=M)return this;var de;if(M>>>=0,q=q===void 0?this.length:q>>>0,O||(O=0),typeof O=="number")for(de=M;de<q;++de)this[de]=O;else{var Ke=m.isBuffer(O)?O:m.from(O,K),St=Ke.length;if(St===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(de=0;de<q-M;++de)this[de+M]=Ke[de%St]}return this};var qt=/[^+/0-9A-Za-z-_]/g;function kt(O,M){var q;M=M||1/0;for(var K=O.length,_e=null,de=[],Ke=0;Ke<K;++Ke){if((q=O.charCodeAt(Ke))>55295&&q<57344){if(!_e){if(q>56319){(M-=3)>-1&&de.push(239,191,189);continue}if(Ke+1===K){(M-=3)>-1&&de.push(239,191,189);continue}_e=q;continue}if(q<56320){(M-=3)>-1&&de.push(239,191,189),_e=q;continue}q=65536+(_e-55296<<10|q-56320)}else _e&&(M-=3)>-1&&de.push(239,191,189);if(_e=null,q<128){if((M-=1)<0)break;de.push(q)}else if(q<2048){if((M-=2)<0)break;de.push(q>>6|192,63&q|128)}else if(q<65536){if((M-=3)<0)break;de.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;de.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return de}function ft(O){return U.toByteArray(function(M){if((M=(M=M.split("=")[0]).trim().replace(qt,"")).length<2)return"";for(;M.length%4!=0;)M+="=";return M}(O))}function At(O,M,q,K){for(var _e=0;_e<K&&!(_e+q>=M.length||_e>=O.length);++_e)M[_e+q]=O[_e];return _e}function Ce(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function re(O){return O!=O}var je=function(){for(var O="0123456789abcdef",M=new Array(256),q=0;q<16;++q)for(var K=16*q,_e=0;_e<16;++_e)M[K+_e]=O[q]+O[_e];return M}()},6693:function(R,g){g.byteLength=function(F){var N=m(F),_=N[0],I=N[1];return 3*(_+I)/4-I},g.toByteArray=function(F){var N,_,I=m(F),b=I[0],j=I[1],Y=new C(function(ue,x,X){return 3*(x+X)/4-X}(0,b,j)),$=0,W=j>0?b-4:b;for(_=0;_<W;_+=4)N=U[F.charCodeAt(_)]<<18|U[F.charCodeAt(_+1)]<<12|U[F.charCodeAt(_+2)]<<6|U[F.charCodeAt(_+3)],Y[$++]=N>>16&255,Y[$++]=N>>8&255,Y[$++]=255&N;return j===2&&(N=U[F.charCodeAt(_)]<<2|U[F.charCodeAt(_+1)]>>4,Y[$++]=255&N),j===1&&(N=U[F.charCodeAt(_)]<<10|U[F.charCodeAt(_+1)]<<4|U[F.charCodeAt(_+2)]>>2,Y[$++]=N>>8&255,Y[$++]=255&N),Y},g.fromByteArray=function(F){for(var N,_=F.length,I=_%3,b=[],j=16383,Y=0,$=_-I;Y<$;Y+=j)b.push(T(F,Y,Y+j>$?$:Y+j));return I===1?(N=F[_-1],b.push(A[N>>2]+A[N<<4&63]+"==")):I===2&&(N=(F[_-2]<<8)+F[_-1],b.push(A[N>>10]+A[N>>4&63]+A[N<<2&63]+"=")),b.join("")};for(var A=[],U=[],C=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,D=y.length;v<D;++v)A[v]=y[v],U[y.charCodeAt(v)]=v;function m(F){var N=F.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=F.indexOf("=");return _===-1&&(_=N),[_,_===N?0:4-_%4]}function T(F,N,_){for(var I,b,j=[],Y=N;Y<_;Y+=3)I=(F[Y]<<16&16711680)+(F[Y+1]<<8&65280)+(255&F[Y+2]),j.push(A[(b=I)>>18&63]+A[b>>12&63]+A[b>>6&63]+A[63&b]);return j.join("")}U[45]=62,U[95]=63},2165:function(R,g){g.read=function(A,U,C,y,v){var D,m,T=8*v-y-1,F=(1<<T)-1,N=F>>1,_=-7,I=C?v-1:0,b=C?-1:1,j=A[U+I];for(I+=b,D=j&(1<<-_)-1,j>>=-_,_+=T;_>0;D=256*D+A[U+I],I+=b,_-=8);for(m=D&(1<<-_)-1,D>>=-_,_+=y;_>0;m=256*m+A[U+I],I+=b,_-=8);if(D===0)D=1-N;else{if(D===F)return m?NaN:1/0*(j?-1:1);m+=Math.pow(2,y),D-=N}return(j?-1:1)*m*Math.pow(2,D-y)},g.write=function(A,U,C,y,v,D){var m,T,F,N=8*D-v-1,_=(1<<N)-1,I=_>>1,b=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=y?0:D-1,Y=y?1:-1,$=U<0||U===0&&1/U<0?1:0;for(U=Math.abs(U),isNaN(U)||U===1/0?(T=isNaN(U)?1:0,m=_):(m=Math.floor(Math.log(U)/Math.LN2),U*(F=Math.pow(2,-m))<1&&(m--,F*=2),(U+=m+I>=1?b/F:b*Math.pow(2,1-I))*F>=2&&(m++,F/=2),m+I>=_?(T=0,m=_):m+I>=1?(T=(U*F-1)*Math.pow(2,v),m+=I):(T=U*Math.pow(2,I-1)*Math.pow(2,v),m=0));v>=8;A[C+j]=255&T,j+=Y,T/=256,v-=8);for(m=m<<v|T,N+=v;N>0;A[C+j]=255&m,j+=Y,m/=256,N-=8);A[C+j-Y]|=128*$}},6934:function(R,g){var A={parseBuffer:function(y){return new U(y).parse()},addBoxProcessor:function(y,v){typeof y=="string"&&typeof v=="function"&&(C.prototype._boxProcessors[y]=v)},createFile:function(){return new U},createBox:function(y,v,D){var m=C.create(y);return v&&v.append(m,D),m},createFullBox:function(y,v,D){var m=A.createBox(y,v,D);return m.version=0,m.flags=0,m},Utils:{}};A.Utils.dataViewToString=function(y,v){var D=v||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(D).decode(y);var m=[],T=0;if(D==="utf-8")for(;T<y.byteLength;){var F=y.getUint8(T++);F<128||(F<224?(F=(31&F)<<6,F|=63&y.getUint8(T++)):F<240?(F=(15&F)<<12,F|=(63&y.getUint8(T++))<<6,F|=63&y.getUint8(T++)):(F=(7&F)<<18,F|=(63&y.getUint8(T++))<<12,F|=(63&y.getUint8(T++))<<6,F|=63&y.getUint8(T++))),m.push(String.fromCharCode(F))}else for(;T<y.byteLength;)m.push(String.fromCharCode(y.getUint8(T++)));return m.join("")},A.Utils.utf8ToByteArray=function(y){var v,D;if(typeof TextEncoder<"u")v=new TextEncoder().encode(y);else for(v=[],D=0;D<y.length;++D){var m=y.charCodeAt(D);m<128?v.push(m):m<2048?(v.push(192|m>>6),v.push(128|63&m)):m<65536?(v.push(224|m>>12),v.push(128|63&m>>6),v.push(128|63&m)):(v.push(240|m>>18),v.push(128|63&m>>12),v.push(128|63&m>>6),v.push(128|63&m))}return v},A.Utils.appendBox=function(y,v,D){if(v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,D!==-1)if(D!=null){var m,T=-1;if(typeof D=="number")T=D;else{if(typeof D=="string")m=D;else{if(typeof D!="object"||!D.type)return void y.boxes.push(v);m=D.type}for(var F=0;F<y.boxes.length;F++)if(m===y.boxes[F].type){T=F+1;break}}y.boxes.splice(T,0,v)}else y.boxes.push(v)},g.parseBuffer=A.parseBuffer,g.addBoxProcessor=A.addBoxProcessor,g.createFile=A.createFile,g.createBox=A.createBox,g.createFullBox=A.createFullBox,g.Utils=A.Utils,A.Cursor=function(y){this.offset=y===void 0?0:y};var U=function(y){this._cursor=new A.Cursor,this.boxes=[],y&&(this._raw=new DataView(y))};U.prototype.fetch=function(y){var v=this.fetchAll(y,!0);return v.length?v[0]:null},U.prototype.fetchAll=function(y,v){var D=[];return U._sweep.call(this,y,D,v),D},U.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var y=C.parse(this);if(y.type===void 0)break;this.boxes.push(y)}return this},U._sweep=function(y,v,D){for(var m in this.type&&this.type==y&&v.push(this),this.boxes){if(v.length&&D)return;U._sweep.call(this.boxes[m],y,v,D)}},U.prototype.write=function(){var y,v=0;for(y=0;y<this.boxes.length;y++)v+=this.boxes[y].getLength(!1);var D=new Uint8Array(v);for(this._rawo=new DataView(D.buffer),this.bytes=D,this._cursor.offset=0,y=0;y<this.boxes.length;y++)this.boxes[y].write();return D.buffer},U.prototype.append=function(y,v){A.Utils.appendBox(this,y,v)};var C=function(){this._cursor=new A.Cursor};C.parse=function(y){var v=new C;return v._offset=y._cursor.offset,v._root=y._root?y._root:y,v._raw=y._raw,v._parent=y,v._parseBox(),y._cursor.offset=v._raw.byteOffset+v._raw.byteLength,v},C.create=function(y){var v=new C;return v.type=y,v.boxes=[],v},C.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],C.prototype._boxProcessors={},C.prototype._procField=function(y,v,D){this._parsing?this[y]=this._readField(v,D):this._writeField(v,D,this[y])},C.prototype._procFieldArray=function(y,v,D,m){var T;if(this._parsing)for(this[y]=[],T=0;T<v;T++)this[y][T]=this._readField(D,m);else for(T=0;T<this[y].length;T++)this._writeField(D,m,this[y][T])},C.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},C.prototype._procEntries=function(y,v,D){var m;if(this._parsing)for(this[y]=[],m=0;m<v;m++)this[y].push({}),D.call(this,this[y][m]);else for(m=0;m<v;m++)D.call(this,this[y][m])},C.prototype._procSubEntries=function(y,v,D,m){var T;if(this._parsing)for(y[v]=[],T=0;T<D;T++)y[v].push({}),m.call(this,y[v][T]);else for(T=0;T<D;T++)m.call(this,y[v][T])},C.prototype._procEntryField=function(y,v,D,m){this._parsing?y[v]=this._readField(D,m):this._writeField(D,m,y[v])},C.prototype._procSubBoxes=function(y,v){var D;if(this._parsing)for(this[y]=[],D=0;D<v;D++)this[y].push(C.parse(this));else for(D=0;D<v;D++)this._rawo?this[y][D].write():this.size+=this[y][D].getLength()},C.prototype._readField=function(y,v){switch(y){case"uint":return this._readUint(v);case"int":return this._readInt(v);case"template":return this._readTemplate(v);case"string":return v===-1?this._readTerminatedString():this._readString(v);case"data":return this._readData(v);case"utf8":return this._readUTF8String();default:return-1}},C.prototype._readInt=function(y){var v=null,D=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:v=this._raw.getInt8(D);break;case 16:v=this._raw.getInt16(D);break;case 32:v=this._raw.getInt32(D);break;case 64:var m=this._raw.getInt32(D),T=this._raw.getInt32(D+4);v=m*Math.pow(2,32)+T}return this._cursor.offset+=y>>3,v},C.prototype._readUint=function(y){var v,D,m=null,T=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:m=this._raw.getUint8(T);break;case 16:m=this._raw.getUint16(T);break;case 24:m=((v=this._raw.getUint16(T))<<8)+(D=this._raw.getUint8(T+2));break;case 32:m=this._raw.getUint32(T);break;case 64:v=this._raw.getUint32(T),D=this._raw.getUint32(T+4),m=v*Math.pow(2,32)+D}return this._cursor.offset+=y>>3,m},C.prototype._readString=function(y){for(var v="",D=0;D<y;D++){var m=this._readUint(8);v+=String.fromCharCode(m)}return v},C.prototype._readTemplate=function(y){return this._readUint(y/2)+this._readUint(y/2)/Math.pow(2,y/2)},C.prototype._readTerminatedString=function(){for(var y="";this._cursor.offset-this._offset<this._raw.byteLength;){var v=this._readUint(8);if(v===0)break;y+=String.fromCharCode(v)}return y},C.prototype._readData=function(y){var v=y>0?y:this._raw.byteLength-(this._cursor.offset-this._offset);if(v>0){var D=new Uint8Array(this._raw.buffer,this._cursor.offset,v);return this._cursor.offset+=v,D}return null},C.prototype._readUTF8String=function(){var y=this._raw.byteLength-(this._cursor.offset-this._offset),v=null;return y>0&&(v=new DataView(this._raw.buffer,this._cursor.offset,y),this._cursor.offset+=y),v&&A.Utils.dataViewToString(v)},C.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},C.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},C.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(C.parse(this))},C.prototype.append=function(y,v){A.Utils.appendBox(this,y,v)},C.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.size+=this.boxes[y].getLength();return this._data&&this._writeData(this._data),this.size},C.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var y=0;y<this.boxes.length;y++)this.boxes[y].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},C.prototype._writeInt=function(y,v){if(this._rawo){var D=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setInt8(D,v);break;case 16:this._rawo.setInt16(D,v);break;case 32:this._rawo.setInt32(D,v);break;case 64:var m=Math.floor(v/Math.pow(2,32)),T=v-m*Math.pow(2,32);this._rawo.setUint32(D,m),this._rawo.setUint32(D+4,T)}this._cursor.offset+=y>>3}else this.size+=y>>3},C.prototype._writeUint=function(y,v){if(this._rawo){var D,m,T=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setUint8(T,v);break;case 16:this._rawo.setUint16(T,v);break;case 24:D=(16776960&v)>>8,m=255&v,this._rawo.setUint16(T,D),this._rawo.setUint8(T+2,m);break;case 32:this._rawo.setUint32(T,v);break;case 64:m=v-(D=Math.floor(v/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(T,D),this._rawo.setUint32(T+4,m)}this._cursor.offset+=y>>3}else this.size+=y>>3},C.prototype._writeString=function(y,v){for(var D=0;D<y;D++)this._writeUint(8,v.charCodeAt(D))},C.prototype._writeTerminatedString=function(y){if(y.length!==0){for(var v=0;v<y.length;v++)this._writeUint(8,y.charCodeAt(v));this._writeUint(8,0)}},C.prototype._writeTemplate=function(y,v){var D=Math.floor(v),m=(v-D)*Math.pow(2,y/2);this._writeUint(y/2,D),this._writeUint(y/2,m)},C.prototype._writeData=function(y){if(y)if(this._rawo){if(y instanceof Array){for(var v=this._cursor.offset-this._rawo.byteOffset,D=0;D<y.length;D++)this._rawo.setInt8(v+D,y[D]);this._cursor.offset+=y.length}y instanceof Uint8Array&&(this._root.bytes.set(y,this._cursor.offset),this._cursor.offset+=y.length)}else this.size+=y.length},C.prototype._writeUTF8String=function(y){var v=A.Utils.utf8ToByteArray(y);if(this._rawo)for(var D=new DataView(this._rawo.buffer,this._cursor.offset,v.length),m=0;m<v.length;m++)D.setUint8(m,v[m]);else this.size+=v.length},C.prototype._writeField=function(y,v,D){switch(y){case"uint":this._writeUint(v,D);break;case"int":this._writeInt(v,D);break;case"template":this._writeTemplate(v,D);break;case"string":v==-1?this._writeTerminatedString(D):this._writeString(v,D);break;case"data":this._writeData(D);break;case"utf8":this._writeUTF8String(D)}},C.prototype._boxProcessors.avc1=C.prototype._boxProcessors.avc2=C.prototype._boxProcessors.avc3=C.prototype._boxProcessors.avc4=C.prototype._boxProcessors.hvc1=C.prototype._boxProcessors.hev1=C.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},C.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"segment_duration","uint",this.version===1?64:32),this._procEntryField(y,"media_time","int",this.version===1?64:32),this._procEntryField(y,"media_rate_integer","int",16),this._procEntryField(y,"media_rate_fraction","int",16)})},C.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},C.prototype._boxProcessors.free=C.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},C.prototype._boxProcessors.ftyp=C.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var y=-1;this._parsing&&(y=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",y,"string",4)},C.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},C.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},C.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},C.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},C.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},C.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},C.prototype._boxProcessors.mp4a=C.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},C.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},C.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},C.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},C.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},C.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},C.prototype._boxProcessors.sdtp=function(){this._procFullBox();var y=-1;this._parsing&&(y=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",y,"uint",8)},C.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(y){this._parsing||(y.reference=(1&y.reference_type)<<31,y.reference|=2147483647&y.referenced_size,y.sap=(1&y.starts_with_SAP)<<31,y.sap|=(3&y.SAP_type)<<28,y.sap|=268435455&y.SAP_delta_time),this._procEntryField(y,"reference","uint",32),this._procEntryField(y,"subsegment_duration","uint",32),this._procEntryField(y,"sap","uint",32),this._parsing&&(y.reference_type=y.reference>>31&1,y.referenced_size=2147483647&y.reference,y.starts_with_SAP=y.sap>>31&1,y.SAP_type=y.sap>>28&7,y.SAP_delta_time=268435455&y.sap)})},C.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},C.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(y){this._procEntryField(y,"ranges_count","uint",32),this._procSubEntries(y,"ranges",y.ranges_count,function(v){this._procEntryField(v,"level","uint",8),this._procEntryField(v,"range_size","uint",24)})})},C.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},C.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},C.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_count","uint",32),this._procEntryField(y,"sample_delta","uint",32)})},C.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_delta","uint",32),this._procEntryField(y,"subsample_count","uint",16),this._procSubEntries(y,"subsamples",y.subsample_count,function(v){this._procEntryField(v,"subsample_size","uint",this.version===1?32:16),this._procEntryField(v,"subsample_priority","uint",8),this._procEntryField(v,"discardable","uint",8),this._procEntryField(v,"codec_specific_parameters","uint",32)})})},C.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},C.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},C.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(y){this._procEntryField(y,"time","uint",this.version===1?64:32),this._procEntryField(y,"moof_offset","uint",this.version===1?64:32),this._procEntryField(y,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(y,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(y,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},C.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},C.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},C.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(y){256&this.flags&&this._procEntryField(y,"sample_duration","uint",32),512&this.flags&&this._procEntryField(y,"sample_size","uint",32),1024&this.flags&&this._procEntryField(y,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(y,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},C.prototype._boxProcessors["url "]=C.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},C.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},C.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},C.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},C.prototype._boxProcessors.vtte=function(){}},5530:function(R,g,A){R.exports=A(6146).polyfill()},6146:function(R,g,A){R.exports=function(){function U(ft){return typeof ft=="function"}var C=Array.isArray?Array.isArray:function(ft){return Object.prototype.toString.call(ft)==="[object Array]"},y=0,v=void 0,D=void 0,m=function(ft,At){j[y]=ft,j[y+1]=At,(y+=2)===2&&(D?D(Y):X())},T=typeof window<"u"?window:void 0,F=T||{},N=F.MutationObserver||F.WebKitMutationObserver,_=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function b(){var ft=setTimeout;return function(){return ft(Y,1)}}var j=new Array(1e3);function Y(){for(var ft=0;ft<y;ft+=2)(0,j[ft])(j[ft+1]),j[ft]=void 0,j[ft+1]=void 0;y=0}var $,W,ue,x,X=void 0;function fe(ft,At){var Ce=this,re=new this.constructor(Re);re[ge]===void 0&&rt(re);var je=Ce._state;if(je){var O=arguments[je-1];m(function(){return Me(je,re,O,Ce._result)})}else Ye(Ce,re,ft,At);return re}function oe(ft){if(ft&&typeof ft=="object"&&ft.constructor===this)return ft;var At=new this(Re);return Be(At,ft),At}X=_?function(){return process.nextTick(Y)}:N?(W=0,ue=new N(Y),x=document.createTextNode(""),ue.observe(x,{characterData:!0}),function(){x.data=W=++W%2}):I?(($=new MessageChannel).port1.onmessage=Y,function(){return $.port2.postMessage(0)}):T===void 0?function(){try{var ft=Function("return this")().require("vertx");return(v=ft.runOnLoop||ft.runOnContext)!==void 0?function(){v(Y)}:b()}catch(At){return b()}}():b();var ge=Math.random().toString(36).substring(2);function Re(){}var Je=void 0;function Se(ft,At,Ce){At.constructor===ft.constructor&&Ce===fe&&At.constructor.resolve===oe?function(re,je){je._state===1?st(re,je._result):je._state===2?Ie(re,je._result):Ye(je,void 0,function(O){return Be(re,O)},function(O){return Ie(re,O)})}(ft,At):Ce===void 0?st(ft,At):U(Ce)?function(re,je,O){m(function(M){var q=!1,K=function(_e,de,Ke,St){try{_e.call(de,Ke,St)}catch(ut){return ut}}(O,je,function(_e){q||(q=!0,je!==_e?Be(M,_e):st(M,_e))},function(_e){q||(q=!0,Ie(M,_e))},M._label);!q&&K&&(q=!0,Ie(M,K))},re)}(ft,At,Ce):st(ft,At)}function Be(ft,At){if(ft===At)Ie(ft,new TypeError("You cannot resolve a promise with itself"));else if(je=typeof(re=At),re===null||je!=="object"&&je!=="function")st(ft,At);else{var Ce=void 0;try{Ce=At.then}catch(O){return void Ie(ft,O)}Se(ft,At,Ce)}var re,je}function ot(ft){ft._onerror&&ft._onerror(ft._result),mt(ft)}function st(ft,At){ft._state===Je&&(ft._result=At,ft._state=1,ft._subscribers.length!==0&&m(mt,ft))}function Ie(ft,At){ft._state===Je&&(ft._state=2,ft._result=At,m(ot,ft))}function Ye(ft,At,Ce,re){var je=ft._subscribers,O=je.length;ft._onerror=null,je[O]=At,je[O+1]=Ce,je[O+2]=re,O===0&&ft._state&&m(mt,ft)}function mt(ft){var At=ft._subscribers,Ce=ft._state;if(At.length!==0){for(var re=void 0,je=void 0,O=ft._result,M=0;M<At.length;M+=3)re=At[M],je=At[M+Ce],re?Me(Ce,re,je,O):je(O);ft._subscribers.length=0}}function Me(ft,At,Ce,re){var je=U(Ce),O=void 0,M=void 0,q=!0;if(je){try{O=Ce(re)}catch(K){q=!1,M=K}if(At===O)return void Ie(At,new TypeError("A promises callback cannot return that same promise."))}else O=re;At._state!==Je||(je&&q?Be(At,O):q===!1?Ie(At,M):ft===1?st(At,O):ft===2&&Ie(At,O))}var We=0;function rt(ft){ft[ge]=We++,ft._state=void 0,ft._result=void 0,ft._subscribers=[]}var qt=function(){function ft(At,Ce){this._instanceConstructor=At,this.promise=new At(Re),this.promise[ge]||rt(this.promise),C(Ce)?(this.length=Ce.length,this._remaining=Ce.length,this._result=new Array(this.length),this.length===0?st(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ce),this._remaining===0&&st(this.promise,this._result))):Ie(this.promise,new Error("Array Methods must be provided an Array"))}return ft.prototype._enumerate=function(At){for(var Ce=0;this._state===Je&&Ce<At.length;Ce++)this._eachEntry(At[Ce],Ce)},ft.prototype._eachEntry=function(At,Ce){var re=this._instanceConstructor,je=re.resolve;if(je===oe){var O=void 0,M=void 0,q=!1;try{O=At.then}catch(_e){q=!0,M=_e}if(O===fe&&At._state!==Je)this._settledAt(At._state,Ce,At._result);else if(typeof O!="function")this._remaining--,this._result[Ce]=At;else if(re===kt){var K=new re(Re);q?Ie(K,M):Se(K,At,O),this._willSettleAt(K,Ce)}else this._willSettleAt(new re(function(_e){return _e(At)}),Ce)}else this._willSettleAt(je(At),Ce)},ft.prototype._settledAt=function(At,Ce,re){var je=this.promise;je._state===Je&&(this._remaining--,At===2?Ie(je,re):this._result[Ce]=re),this._remaining===0&&st(je,this._result)},ft.prototype._willSettleAt=function(At,Ce){var re=this;Ye(At,void 0,function(je){return re._settledAt(1,Ce,je)},function(je){return re._settledAt(2,Ce,je)})},ft}(),kt=function(){function ft(At){this[ge]=We++,this._result=this._state=void 0,this._subscribers=[],Re!==At&&(typeof At!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ft?function(Ce,re){try{re(function(je){Be(Ce,je)},function(je){Ie(Ce,je)})}catch(je){Ie(Ce,je)}}(this,At):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return ft.prototype.catch=function(At){return this.then(null,At)},ft.prototype.finally=function(At){var Ce=this,re=Ce.constructor;return U(At)?Ce.then(function(je){return re.resolve(At()).then(function(){return je})},function(je){return re.resolve(At()).then(function(){throw je})}):Ce.then(At,At)},ft}();return kt.prototype.then=fe,kt.all=function(ft){return new qt(this,ft).promise},kt.race=function(ft){var At=this;return C(ft)?new At(function(Ce,re){for(var je=ft.length,O=0;O<je;O++)At.resolve(ft[O]).then(Ce,re)}):new At(function(Ce,re){return re(new TypeError("You must pass an array to race."))})},kt.resolve=oe,kt.reject=function(ft){var At=new this(Re);return Ie(At,ft),At},kt._setScheduler=function(ft){D=ft},kt._setAsap=function(ft){m=ft},kt._asap=m,kt.polyfill=function(){var ft=void 0;if(A.g!==void 0)ft=A.g;else if(typeof self<"u")ft=self;else try{ft=Function("return this")()}catch(re){throw new Error("polyfill failed because global object is unavailable in this environment")}var At=ft.Promise;if(At){var Ce=null;try{Ce=Object.prototype.toString.call(At.resolve())}catch(re){}if(Ce==="[object Promise]"&&!At.cast)return}ft.Promise=kt},kt.Promise=kt,kt}()},1159:function(R){var g,A=typeof Reflect=="object"?Reflect:null,U=A&&typeof A.apply=="function"?A.apply:function(Y,$,W){return Function.prototype.apply.call(Y,$,W)};g=A&&typeof A.ownKeys=="function"?A.ownKeys:Object.getOwnPropertySymbols?function(Y){return Object.getOwnPropertyNames(Y).concat(Object.getOwnPropertySymbols(Y))}:function(Y){return Object.getOwnPropertyNames(Y)};var C=Number.isNaN||function(Y){return Y!=Y};function y(){y.init.call(this)}R.exports=y,R.exports.once=function(Y,$){return new Promise(function(W,ue){function x(fe){Y.removeListener($,X),ue(fe)}function X(){typeof Y.removeListener=="function"&&Y.removeListener("error",x),W([].slice.call(arguments))}j(Y,$,X,{once:!0}),$!=="error"&&function(fe,oe,ge){typeof fe.on=="function"&&j(fe,"error",oe,{once:!0})}(Y,x)})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var v=10;function D(Y){if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}function m(Y){return Y._maxListeners===void 0?y.defaultMaxListeners:Y._maxListeners}function T(Y,$,W,ue){var x,X,fe,oe;if(D(W),(X=Y._events)===void 0?(X=Y._events=Object.create(null),Y._eventsCount=0):(X.newListener!==void 0&&(Y.emit("newListener",$,W.listener?W.listener:W),X=Y._events),fe=X[$]),fe===void 0)fe=X[$]=W,++Y._eventsCount;else if(typeof fe=="function"?fe=X[$]=ue?[W,fe]:[fe,W]:ue?fe.unshift(W):fe.push(W),(x=m(Y))>0&&fe.length>x&&!fe.warned){fe.warned=!0;var ge=new Error("Possible EventEmitter memory leak detected. "+fe.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");ge.name="MaxListenersExceededWarning",ge.emitter=Y,ge.type=$,ge.count=fe.length,oe=ge,console&&console.warn&&console.warn(oe)}return Y}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(Y,$,W){var ue={fired:!1,wrapFn:void 0,target:Y,type:$,listener:W},x=F.bind(ue);return x.listener=W,ue.wrapFn=x,x}function _(Y,$,W){var ue=Y._events;if(ue===void 0)return[];var x=ue[$];return x===void 0?[]:typeof x=="function"?W?[x.listener||x]:[x]:W?function(X){for(var fe=new Array(X.length),oe=0;oe<fe.length;++oe)fe[oe]=X[oe].listener||X[oe];return fe}(x):b(x,x.length)}function I(Y){var $=this._events;if($!==void 0){var W=$[Y];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}function b(Y,$){for(var W=new Array($),ue=0;ue<$;++ue)W[ue]=Y[ue];return W}function j(Y,$,W,ue){if(typeof Y.on=="function")ue.once?Y.once($,W):Y.on($,W);else{if(typeof Y.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Y);Y.addEventListener($,function x(X){ue.once&&Y.removeEventListener($,x),W(X)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(Y){if(typeof Y!="number"||Y<0||C(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");v=Y}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(Y){if(typeof Y!="number"||Y<0||C(Y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Y+".");return this._maxListeners=Y,this},y.prototype.getMaxListeners=function(){return m(this)},y.prototype.emit=function(Y){for(var $=[],W=1;W<arguments.length;W++)$.push(arguments[W]);var ue=Y==="error",x=this._events;if(x!==void 0)ue=ue&&x.error===void 0;else if(!ue)return!1;if(ue){var X;if($.length>0&&(X=$[0]),X instanceof Error)throw X;var fe=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw fe.context=X,fe}var oe=x[Y];if(oe===void 0)return!1;if(typeof oe=="function")U(oe,this,$);else{var ge=oe.length,Re=b(oe,ge);for(W=0;W<ge;++W)U(Re[W],this,$)}return!0},y.prototype.addListener=function(Y,$){return T(this,Y,$,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(Y,$){return T(this,Y,$,!0)},y.prototype.once=function(Y,$){return D($),this.on(Y,N(this,Y,$)),this},y.prototype.prependOnceListener=function(Y,$){return D($),this.prependListener(Y,N(this,Y,$)),this},y.prototype.removeListener=function(Y,$){var W,ue,x,X,fe;if(D($),(ue=this._events)===void 0)return this;if((W=ue[Y])===void 0)return this;if(W===$||W.listener===$)--this._eventsCount==0?this._events=Object.create(null):(delete ue[Y],ue.removeListener&&this.emit("removeListener",Y,W.listener||$));else if(typeof W!="function"){for(x=-1,X=W.length-1;X>=0;X--)if(W[X]===$||W[X].listener===$){fe=W[X].listener,x=X;break}if(x<0)return this;x===0?W.shift():function(oe,ge){for(;ge+1<oe.length;ge++)oe[ge]=oe[ge+1];oe.pop()}(W,x),W.length===1&&(ue[Y]=W[0]),ue.removeListener!==void 0&&this.emit("removeListener",Y,fe||$)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(Y){var $,W,ue;if((W=this._events)===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[Y]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete W[Y]),this;if(arguments.length===0){var x,X=Object.keys(W);for(ue=0;ue<X.length;++ue)(x=X[ue])!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof($=W[Y])=="function")this.removeListener(Y,$);else if($!==void 0)for(ue=$.length-1;ue>=0;ue--)this.removeListener(Y,$[ue]);return this},y.prototype.listeners=function(Y){return _(this,Y,!0)},y.prototype.rawListeners=function(Y){return _(this,Y,!1)},y.listenerCount=function(Y,$){return typeof Y.listenerCount=="function"?Y.listenerCount($):I.call(Y,$)},y.prototype.listenerCount=I,y.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},3101:function(R){var g=Array.isArray,A=Object.keys,U=Object.prototype.hasOwnProperty;R.exports=function C(y,v){if(y===v)return!0;if(y&&v&&typeof y=="object"&&typeof v=="object"){var D,m,T,F=g(y),N=g(v);if(F&&N){if((m=y.length)!=v.length)return!1;for(D=m;D--!=0;)if(!C(y[D],v[D]))return!1;return!0}if(F!=N)return!1;var _=y instanceof Date,I=v instanceof Date;if(_!=I)return!1;if(_&&I)return y.getTime()==v.getTime();var b=y instanceof RegExp,j=v instanceof RegExp;if(b!=j)return!1;if(b&&j)return y.toString()==v.toString();var Y=A(y);if((m=Y.length)!==A(v).length)return!1;for(D=m;D--!=0;)if(!U.call(v,Y[D]))return!1;for(D=m;D--!=0;)if(!C(y[T=Y[D]],v[T]))return!1;return!0}return y!=y&&v!=v}},3362:function(R,g,A){(function(U,C,y,v,D){function m(M){if("contents"in M)for(var q=("styleAttrs"in M)?M.styleAttrs[v.byName.ruby.qname]:null,K=M.kind==="span"&&(q==="container"||q==="textContainer"||q==="baseContainer"),_e=M.contents.length-1;_e>=0;_e--)!K||"styleAttrs"in M.contents[_e]&&v.byName.ruby.qname in M.contents[_e].styleAttrs?m(M.contents[_e]):delete M.contents[_e]}function T(M,q,K,_e){var de=_e&&_e.timeContainer==="seq",Ke=0;_e&&(Ke=de&&K?K.end:_e.begin),q.begin=q.explicit_begin?q.explicit_begin+Ke:Ke;var St=q.begin,ut=null;if("sets"in q)for(var at=0;at<q.sets.length;at++)T(M,q.sets[at],ut,q),St=q.timeContainer==="seq"?q.sets[at].end:Math.max(St,q.sets[at].end),ut=q.sets[at];if("contents"in q){if("contents"in q)for(var tt=0;tt<q.contents.length;tt++)T(M,q.contents[tt],ut,q),St=q.timeContainer==="seq"?q.contents[tt].end:Math.max(St,q.contents[tt].end),ut=q.contents[tt]}else St=de?q.begin:Number.POSITIVE_INFINITY;q.explicit_end!==null&&q.explicit_dur!==null?q.end=Math.min(q.begin+q.explicit_dur,Ke+q.explicit_end):q.explicit_end===null&&q.explicit_dur!==null?q.end=q.begin+q.explicit_dur:q.explicit_end!==null&&q.explicit_dur===null?q.end=Ke+q.explicit_end:q.end=St,delete q.explicit_begin,delete q.explicit_dur,delete q.explicit_end,M._registerEvent(q)}function F(M){this.node=M}function N(){this.events=[],this.head=new _,this.body=null}function _(){this.styling=new I,this.layout=new Y}function I(){this.styles={},this.initials={}}function b(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function j(){this.styleAttrs=null}function Y(){this.regions={}}function $(M,q){W.call(this,"image"),this.src=M,this.type=q}function W(M){this.kind=M}function ue(M){this.id=M}function x(M){this.regionID=M}function X(M){this.styleAttrs=M}function fe(M){this.sets=M}function oe(M){this.contents=M}function ge(M,q,K){this.explicit_begin=M,this.explicit_end=q,this.explicit_dur=K}function Re(){W.call(this,"body")}function Je(){W.call(this,"div")}function Se(){W.call(this,"p")}function Be(){W.call(this,"span")}function ot(){W.call(this,"span")}function st(){W.call(this,"br")}function Ie(){}function Ye(){}function mt(M){return M&&"xml:id"in M.attributes&&M.attributes["xml:id"].value||null}function Me(M){return M&&"style"in M.attributes?M.attributes.style.value.split(" "):[]}function We(M,q){var K={};if(M!==null)for(var _e in M.attributes){var de=M.attributes[_e].uri+" "+M.attributes[_e].local,Ke=v.byQName[de];if(Ke!==void 0){var St=Ke.parse(M.attributes[_e].value);St!==null?(K[de]=St,Ke===v.byName.zIndex&&Ce(q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):re(q,"Cannot parse styling attribute "+de+" --> "+M.attributes[_e].value)}}return K}function rt(M,q,K){for(var _e in M.attributes)if(M.attributes[_e].uri===q&&M.attributes[_e].local===K)return M.attributes[_e].value;return null}function qt(M,q,K){var _e,de=null;return(_e=/^(\d+(?:\.\d+)?)f$/.exec(K))!==null?q!==null&&(de=parseFloat(_e[1])/q):(_e=/^(\d+(?:\.\d+)?)t$/.exec(K))!==null?M!==null&&(de=parseFloat(_e[1])/M):(_e=/^(\d+(?:\.\d+)?)ms$/.exec(K))!==null?de=parseFloat(_e[1])/1e3:(_e=/^(\d+(?:\.\d+)?)s$/.exec(K))!==null?de=parseFloat(_e[1]):(_e=/^(\d+(?:\.\d+)?)h$/.exec(K))!==null?de=3600*parseFloat(_e[1]):(_e=/^(\d+(?:\.\d+)?)m$/.exec(K))!==null?de=60*parseFloat(_e[1]):(_e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(K))!==null?de=3600*parseInt(_e[1])+60*parseInt(_e[2])+parseFloat(_e[3]):(_e=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(K))!==null&&q!==null&&(de=3600*parseInt(_e[1])+60*parseInt(_e[2])+parseInt(_e[3])+(_e[4]===null?0:parseInt(_e[4])/q)),de}function kt(M,q,K){for(;q.styleRefs.length>0;){var _e=q.styleRefs.pop();_e in M.styles?(kt(M,M.styles[_e],K),At(M.styles[_e].styleAttrs,q.styleAttrs)):re(K,"Non-existant style id referenced")}}function ft(M,q,K,_e){for(var de=q.length-1;de>=0;de--){var Ke=q[de];Ke in M.styles?At(M.styles[Ke].styleAttrs,K):re(_e,"Non-existant style id referenced")}}function At(M,q){for(var K in M)M.hasOwnProperty(K)&&(K in q||(q[K]=M[K]))}function Ce(M,q){if(M&&M.warn&&M.warn(q))throw q}function re(M,q){if(M&&M.error&&M.error(q))throw q}function je(M,q){throw M&&M.fatal&&M.fatal(q),q}function O(M,q){for(var K,_e=0,de=M.length-1;_e<=de;){var Ke=M[K=Math.floor((_e+de)/2)];if(Ke<q)_e=K+1;else{if(!(Ke>q))return{found:!0,index:K};de=K-1}}return{found:!1,index:_e}}U.fromXML=function(M,q,K){var _e=C.parser(!0,{xmlns:!0}),de=[],Ke=[],St=[],ut=0,at=null;_e.onclosetag=function(Rt){if(de[0]instanceof Ie)at.head!==null&&at.head.styling!==null&&ft(at.head.styling,de[0].styleRefs,de[0].styleAttrs,q),delete de[0].styleRefs;else if(de[0]instanceof I)for(var hn in de[0].styles)de[0].styles.hasOwnProperty(hn)&&kt(de[0],de[0].styles[hn],q);else if(de[0]instanceof Se||de[0]instanceof Be){if(de[0].contents.length>1){var Qt,nn=[de[0].contents[0]];for(Qt=1;Qt<de[0].contents.length;Qt++)de[0].contents[Qt]instanceof ot&&nn[nn.length-1]instanceof ot?nn[nn.length-1].text+=de[0].contents[Qt].text:nn.push(de[0].contents[Qt]);de[0].contents=nn}de[0]instanceof Be&&de[0].contents.length===1&&de[0].contents[0]instanceof ot&&(de[0].text=de[0].contents[0].text,delete de[0].contents)}else de[0]instanceof F&&(de[0].node.uri===y.ns_tt&&de[0].node.local==="metadata"?ut--:ut>0&&K&&"onCloseTag"in K&&K.onCloseTag());St.shift(),Ke.shift(),de.shift()},_e.ontext=function(Rt){if(de[0]!==void 0)if(de[0]instanceof Be||de[0]instanceof Se){if(de[0]instanceof Be){var hn=de[0].styleAttrs[v.byName.ruby.qname];if(hn==="container"||hn==="textContainer"||hn==="baseContainer")return}var Qt=new ot;Qt.initFromText(at,de[0],Rt,Ke[0],St[0],q),de[0].contents.push(Qt)}else de[0]instanceof F&&ut>0&&K&&"onText"in K&&K.onText(Rt)},_e.onopentag=function(Rt){var hn=Rt.attributes["xml:space"];hn?St.unshift(hn.value):St.length===0?St.unshift("default"):St.unshift(St[0]);var Qt=Rt.attributes["xml:lang"];if(Qt?Ke.unshift(Qt.value):Ke.length===0?Ke.unshift(""):Ke.unshift(Ke[0]),Rt.uri===y.ns_tt)if(Rt.local==="tt")at!==null&&je(q,"Two <tt> elements at ("+this.line+","+this.column+")"),(at=new N).initFromNode(Rt,Ke[0],q),de.unshift(at);else if(Rt.local==="head")de[0]instanceof N||je(q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),de.unshift(at.head);else if(Rt.local==="styling")de[0]instanceof _||je(q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),de.unshift(at.head.styling);else if(Rt.local==="style"){var nn;de[0]instanceof I?((nn=new b).initFromNode(Rt,q),nn.id?at.head.styling.styles[nn.id]=nn:re(q,"<style> element missing @id attribute"),de.unshift(nn)):de[0]instanceof Ie?((nn=new b).initFromNode(Rt,q),At(nn.styleAttrs,de[0].styleAttrs),de.unshift(nn)):je(q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Rt.local==="initial"){var Ot;if(de[0]instanceof I){for(var Un in(Ot=new j).initFromNode(Rt,q),Ot.styleAttrs)Ot.styleAttrs.hasOwnProperty(Un)&&(at.head.styling.initials[Un]=Ot.styleAttrs[Un]);de.unshift(Ot)}else je(q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Rt.local==="layout")de[0]instanceof _||je(q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),de.unshift(at.head.layout);else if(Rt.local==="region"){de[0]instanceof Y||je(q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var gr=new Ie;gr.initFromNode(at,Rt,Ke[0],q),!gr.id||gr.id in at.head.layout.regions?re(q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):at.head.layout.regions[gr.id]=gr,de.unshift(gr)}else if(Rt.local==="body"){de[0]instanceof N||je(q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),at.body!==null&&je(q,"Second <body> element at "+this.line+","+this.column+")");var Or=new Re;Or.initFromNode(at,Rt,Ke[0],q),at.body=Or,de.unshift(Or)}else if(Rt.local==="div"){de[0]instanceof Je||de[0]instanceof Re||je(q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var dr=new Je;dr.initFromNode(at,de[0],Rt,Ke[0],q);var ei=dr.styleAttrs[v.byName.backgroundImage.qname];ei&&(dr.contents.push(new $(ei)),delete dr.styleAttrs[v.byName.backgroundImage.qname]),de[0].contents.push(dr),de.unshift(dr)}else if(Rt.local==="image"){de[0]instanceof Je||je(q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Ji=new $;Ji.initFromNode(at,de[0],Rt,Ke[0],q),de[0].contents.push(Ji),de.unshift(Ji)}else if(Rt.local==="p"){de[0]instanceof Je||je(q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Lr=new Se;Lr.initFromNode(at,de[0],Rt,Ke[0],q),de[0].contents.push(Lr),de.unshift(Lr)}else if(Rt.local==="span"){de[0]instanceof Be||de[0]instanceof Se||je(q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var eo=new Be;eo.initFromNode(at,de[0],Rt,Ke[0],St[0],q),de[0].contents.push(eo),de.unshift(eo)}else if(Rt.local==="br"){de[0]instanceof Be||de[0]instanceof Se||je(q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var _i=new st;_i.initFromNode(at,de[0],Rt,Ke[0],q),de[0].contents.push(_i),de.unshift(_i)}else if(Rt.local==="set"){de[0]instanceof Be||de[0]instanceof Se||de[0]instanceof Je||de[0]instanceof Re||de[0]instanceof Ie||de[0]instanceof st||je(q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Mi=new Ye;Mi.initFromNode(at,de[0],Rt,q),de[0].sets.push(Mi),de.unshift(Mi)}else de.unshift(new F(Rt));else de.unshift(new F(Rt));if(de[0]instanceof F){if(Rt.uri===y.ns_tt&&Rt.local==="metadata")ut++;else if(ut>0&&K&&"onOpenTag"in K){var zi=[];for(var to in Rt.attributes)zi[Rt.attributes[to].uri+" "+Rt.attributes[to].local]={uri:Rt.attributes[to].uri,local:Rt.attributes[to].local,value:Rt.attributes[to].value};K.onOpenTag(Rt.uri,Rt.local,zi)}}},_e.write(M).close(),delete at.head.styling.styles;var tt=!1;for(var dt in at.head.layout.regions)if(at.head.layout.regions.hasOwnProperty(dt)){tt=!0;break}if(!tt){var Et=Ie.prototype.createDefaultRegion(at.lang);at.head.layout.regions[Et.id]=Et}for(var Tt in at.head.layout.regions)at.head.layout.regions.hasOwnProperty(Tt)&&T(at,at.head.layout.regions[Tt],null,null);return at.body&&T(at,at.body,null,null),at.body&&m(at.body),at},N.prototype.initFromNode=function(M,q,K){var _e=function(ut,at){var tt=rt(ut,y.ns_ttp,"cellResolution"),dt=15,Et=32;if(tt!==null){var Tt=/(\d+) (\d+)/.exec(tt);Tt!==null?(Et=parseInt(Tt[1]),dt=parseInt(Tt[2])):Ce(at,"Malformed cellResolution value (using initial value instead)")}return{w:Et,h:dt}}(M,K);this.cellLength={h:new D.ComputedLength(0,1/_e.h),w:new D.ComputedLength(1/_e.w,0)};var de=function(ut,at){var tt,dt=rt(ut,y.ns_ttp,"frameRate"),Et=30;dt!==null&&((tt=/(\d+)/.exec(dt))!==null?Et=parseInt(tt[1]):Ce(at,"Malformed frame rate attribute (using initial value instead)"));var Tt=rt(ut,y.ns_ttp,"frameRateMultiplier"),Rt=1;Tt!==null&&((tt=/(\d+) (\d+)/.exec(Tt))!==null?Rt=parseInt(tt[1])/parseInt(tt[2]):Ce(at,"Malformed frame rate multiplier attribute (using initial value instead)"));var hn=Rt*Et,Qt=1,nn=rt(ut,y.ns_ttp,"tickRate");return nn===null?dt!==null&&(Qt=hn):(tt=/(\d+)/.exec(nn))!==null?Qt=parseInt(tt[1]):Ce(at,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:hn,tickRate:Qt}}(M,K);this.effectiveFrameRate=de.effectiveFrameRate,this.tickRate=de.tickRate,this.aspectRatio=function(ut,at){var tt=rt(ut,y.ns_ittp,"aspectRatio");tt===null&&(tt=rt(ut,y.ns_ttp,"displayAspectRatio"));var dt=null;if(tt!==null){var Et=/(\d+)\s+(\d+)/.exec(tt);if(Et!==null){var Tt=parseInt(Et[1]),Rt=parseInt(Et[2]);Tt!==0&&Rt!==0?dt=Tt/Rt:re(at,"Illegal aspectRatio values (ignoring)")}else re(at,"Malformed aspectRatio attribute (ignoring)")}return dt}(M,K);var Ke=rt(M,y.ns_ttp,"timeBase");Ke!==null&&Ke!=="media"&&je(K,"Unsupported time base");var St=function(ut,at){var tt=rt(ut,y.ns_tts,"extent");if(tt===null)return null;var dt=tt.split(" ");if(dt.length!==2)return Ce(at,"Malformed extent (ignoring)"),null;var Et=D.parseLength(dt[0]),Tt=D.parseLength(dt[1]);return Tt&&Et?{h:Tt,w:Et}:(Ce(at,"Malformed extent values (ignoring)"),null)}(M,K);St===null?this.pxLength={h:null,w:null}:(St.h.unit==="px"&&St.w.unit==="px"||je(K,"Extent on TT must be in px or absent"),this.pxLength={h:new D.ComputedLength(0,1/St.h.value),w:new D.ComputedLength(1/St.w.value,0)}),this.dimensions={h:new D.ComputedLength(0,1),w:new D.ComputedLength(1,0)},this.lang=q},N.prototype._registerEvent=function(M){if(!(M.end<=M.begin)){var q=O(this.events,M.begin);if(q.found||this.events.splice(q.index,0,M.begin),M.end!==Number.POSITIVE_INFINITY){var K=O(this.events,M.end);K.found||this.events.splice(K.index,0,M.end)}}},N.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},N.prototype.getMediaTimeEvents=function(){return this.events},b.prototype.initFromNode=function(M,q){this.id=mt(M),this.styleAttrs=We(M,q),this.styleRefs=Me(M)},j.prototype.initFromNode=function(M,q){for(var K in this.styleAttrs={},M.attributes)if(M.attributes[K].uri===y.ns_itts||M.attributes[K].uri===y.ns_ebutts||M.attributes[K].uri===y.ns_tts){var _e=M.attributes[K].uri+" "+M.attributes[K].local;this.styleAttrs[_e]=M.attributes[K].value}},$.prototype.initFromNode=function(M,q,K,_e,de){this.src="src"in K.attributes?K.attributes.src.value:null,this.src||re(de,"Invalid image@src attribute"),this.type="type"in K.attributes?K.attributes.type.value:null,this.type||re(de,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,M,q,K,de),ge.prototype.initFromNode.call(this,M,q,K,de),fe.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},ue.prototype.initFromNode=function(M,q,K,_e){this.id=mt(K)},x.prototype.initFromNode=function(M,q,K,_e){this.regionID=function(de){return de&&"region"in de.attributes?de.attributes.region.value:""}(K)},X.prototype.initFromNode=function(M,q,K,_e){this.styleAttrs=We(K,_e),M.head!==null&&M.head.styling!==null&&ft(M.head.styling,Me(K),this.styleAttrs,_e)},fe.prototype.initFromNode=function(M,q,K,_e){this.sets=[]},oe.prototype.initFromNode=function(M,q,K,_e){this.contents=[]},ge.prototype.initFromNode=function(M,q,K,_e){var de=function(Ke,St,ut,at){var tt=null;ut&&"begin"in ut.attributes&&(tt=qt(Ke.tickRate,Ke.effectiveFrameRate,ut.attributes.begin.value))===null&&Ce(at,"Malformed begin value "+ut.attributes.begin.value+" (using 0)");var dt=null;ut&&"dur"in ut.attributes&&(dt=qt(Ke.tickRate,Ke.effectiveFrameRate,ut.attributes.dur.value))===null&&Ce(at,"Malformed dur value "+ut.attributes.dur.value+" (ignoring)");var Et=null;return ut&&"end"in ut.attributes&&(Et=qt(Ke.tickRate,Ke.effectiveFrameRate,ut.attributes.end.value))===null&&Ce(at,"Malformed end value (ignoring)"),{explicit_begin:tt,explicit_end:Et,explicit_dur:dt}}(M,0,K,_e);this.explicit_begin=de.explicit_begin,this.explicit_end=de.explicit_end,this.explicit_dur=de.explicit_dur,this.timeContainer=function(Ke,St){var ut=Ke&&"timeContainer"in Ke.attributes?Ke.attributes.timeContainer.value:null;return ut&&ut!=="par"?ut==="seq"?"seq":(re(St,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(K,_e)},Re.prototype.initFromNode=function(M,q,K,_e){X.prototype.initFromNode.call(this,M,null,q,_e),ge.prototype.initFromNode.call(this,M,null,q,_e),fe.prototype.initFromNode.call(this,M,null,q,_e),x.prototype.initFromNode.call(this,M,null,q,_e),oe.prototype.initFromNode.call(this,M,null,q,_e),this.lang=K},Je.prototype.initFromNode=function(M,q,K,_e,de){X.prototype.initFromNode.call(this,M,q,K,de),ge.prototype.initFromNode.call(this,M,q,K,de),fe.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},Se.prototype.initFromNode=function(M,q,K,_e,de){X.prototype.initFromNode.call(this,M,q,K,de),ge.prototype.initFromNode.call(this,M,q,K,de),fe.prototype.initFromNode.call(this,M,q,K,de),x.prototype.initFromNode.call(this,M,q,K,de),oe.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},Be.prototype.initFromNode=function(M,q,K,_e,de,Ke){X.prototype.initFromNode.call(this,M,q,K,Ke),ge.prototype.initFromNode.call(this,M,q,K,Ke),fe.prototype.initFromNode.call(this,M,q,K,Ke),x.prototype.initFromNode.call(this,M,q,K,Ke),oe.prototype.initFromNode.call(this,M,q,K,Ke),this.space=de,this.lang=_e},ot.prototype.initFromText=function(M,q,K,_e,de,Ke){ge.prototype.initFromNode.call(this,M,q,null,Ke),this.text=K,this.space=de,this.lang=_e},st.prototype.initFromNode=function(M,q,K,_e,de){x.prototype.initFromNode.call(this,M,q,K,de),ge.prototype.initFromNode.call(this,M,q,K,de),this.lang=_e},Ie.prototype.createDefaultRegion=function(M){var q=new Ie;return ue.call(q,""),X.call(q,{}),fe.call(q,[]),ge.call(q,0,Number.POSITIVE_INFINITY,null),this.lang=M,q},Ie.prototype.initFromNode=function(M,q,K,_e){ue.prototype.initFromNode.call(this,M,null,q,_e),ge.prototype.initFromNode.call(this,M,null,q,_e),fe.prototype.initFromNode.call(this,M,null,q,_e),this.styleAttrs=We(q,_e),this.styleRefs=Me(q),this.lang=K},Ye.prototype.initFromNode=function(M,q,K,_e){ge.prototype.initFromNode.call(this,M,q,K,_e);var de=We(K,_e);for(var Ke in this.qname=null,this.value=null,de)if(de.hasOwnProperty(Ke)){if(this.qname){re(_e,"More than one style specified on set");break}this.qname=Ke,this.value=de[Ke]}}})(g,typeof sax>"u"?A(5378):sax,typeof imscNames>"u"?A(210):imscNames,typeof imscStyles>"u"?A(6811):imscStyles,typeof imscUtils>"u"?A(5926):imscUtils)},506:function(R,g,A){var U=/firefox/i.test(navigator.userAgent);(function(C,y,v){function D(oe,ge,Re,Je){var Se;if(Re.kind==="region")(Se=document.createElement("div")).style.position="absolute";else if(Re.kind==="body")Se=document.createElement("div");else if(Re.kind==="div")Se=document.createElement("div");else if(Re.kind==="image"){if(Se=document.createElement("img"),oe.imgResolver!==null&&Re.src!==null){var Be=oe.imgResolver(Re.src,Se);Be&&(Se.src=Be),Se.height=oe.regionH,Se.width=oe.regionW}}else if(Re.kind==="p")Se=document.createElement("p");else if(Re.kind==="span")if(Re.styleAttrs[v.byName.ruby.qname]==="container")Se=document.createElement("ruby"),oe.ruby=!0;else if(Re.styleAttrs[v.byName.ruby.qname]==="base")Se=document.createElement("span");else if(Re.styleAttrs[v.byName.ruby.qname]==="text")Se=document.createElement("rt");else if(Re.styleAttrs[v.byName.ruby.qname]==="baseContainer")Se=document.createElement("rbc");else if(Re.styleAttrs[v.byName.ruby.qname]==="textContainer")Se=document.createElement("rtc");else{if(Re.styleAttrs[v.byName.ruby.qname]==="delimiter")return;Se=document.createElement("span")}else Re.kind==="br"&&(Se=document.createElement("br"));if(Se){if(Re.lang&&(Re.kind!=="region"&&Re.lang===Je.lang||(Se.lang=Re.lang)),ge.appendChild(Se),Se.style.margin="0",Re.kind==="region"){var ot=Re.styleAttrs[v.byName.writingMode.qname];ot==="lrtb"||ot==="lr"?(oe.ipd="lr",oe.bpd="tb"):ot==="rltb"||ot==="rl"?(oe.ipd="rl",oe.bpd="tb"):ot==="tblr"?(oe.ipd="tb",oe.bpd="lr"):ot!=="tbrl"&&ot!=="tb"||(oe.ipd="tb",oe.bpd="rl")}else if(Re.kind==="p"&&oe.bpd==="tb"){var st=Re.styleAttrs[v.byName.direction.qname];oe.ipd=st==="ltr"?"lr":"rl"}for(var Ie=0;Ie<j.length;Ie++){var Ye=j[Ie],mt=Re.styleAttrs[Ye.qname];mt!==void 0&&Ye.map!==null&&Ye.map(oe,Se,Re,mt)}var Me=Se,We=Re.styleAttrs[v.byName.linePadding.qname];if(We&&!We.isZero()){var rt=We.toUsedLength(oe.w,oe.h);if(rt>0){var qt=Math.ceil(rt)+"px";oe.bpd==="tb"?(Me.style.paddingLeft=qt,Me.style.paddingRight=qt):(Me.style.paddingTop=qt,Me.style.paddingBottom=qt),oe.lp=We}}var kt=Re.styleAttrs[v.byName.multiRowAlign.qname];if(kt&&kt!=="auto"){var ft=document.createElement("span");ft.style.display="inline-block",ft.style.textAlign=kt,Se.appendChild(ft),Me=ft,oe.mra=kt}var At=Re.styleAttrs[v.byName.rubyReserve.qname];if(At&&At[0]!=="none"&&(oe.rubyReserve=At),Re.styleAttrs[v.byName.fillLineGap.qname]&&(oe.flg=!0),Re.kind==="span"&&Re.text){var Ce=Re.styleAttrs[v.byName.textEmphasis.qname];if(Ce&&Ce.style!=="none"&&(oe.textEmphasis=!0),v.byName.textCombine.qname in Re.styleAttrs&&Re.styleAttrs[v.byName.textCombine.qname]==="all")Se.textContent=Re.text,Se._isd_element=Re,Ce&&I(oe,Se,0,Ce);else for(var re="",je=0;je<Re.text.length;je++){re+=Re.text.charAt(je);var O=Re.text.charCodeAt(je);if(O<55296||O>56319||je===Re.text.length-1){var M=document.createElement("span");M.textContent=re,Ce&&I(oe,M,0,Ce),Se.appendChild(M),re="",M._isd_element=Re}}}if("contents"in Re)for(var q=0;q<Re.contents.length;q++)D(oe,Me,Re.contents[q],Re);var K=[];if(Re.kind==="p"&&(_(oe,Me,K,null),oe.rubyReserve&&(function(ut,at){for(var tt=0;tt<ut.length;tt++){var dt,Et,Tt=document.createElement("ruby"),Rt=document.createElement("span");Rt.textContent="​",Tt.appendChild(Rt);var hn,Qt=at.rubyReserve[1].toUsedLength(at.w,at.h)+"px";at.rubyReserve[0]==="both"||at.rubyReserve[0]==="outside"&&ut.length==1?((dt=document.createElement("rtc")).style[ue]=W?"after":"under",dt.textContent="​",dt.style.fontSize=Qt,(Et=document.createElement("rtc")).style[ue]=W?"before":"over",Et.textContent="​",Et.style.fontSize=Qt,Tt.appendChild(dt),Tt.appendChild(Et)):((dt=document.createElement("rtc")).textContent="​",dt.style.fontSize=Qt,hn=at.rubyReserve[0]==="after"||at.rubyReserve[0]==="outside"&&tt>0?W?"after":at.bpd==="tb"||at.bpd==="rl"?"under":"over":W?"before":at.bpd==="tb"||at.bpd==="rl"?"over":"under",dt.style[ue]=hn,Tt.appendChild(dt));for(var nn=null,Ot=0;Ot<ut[tt].rbc.length;Ot++)if(ut[tt].rbc[Ot].localName==="ruby"){nn=ut[tt].rbc[Ot];for(var Un=0;Un<nn.style.length;Un++)Tt.style.setProperty(nn.style.item(Un),nn.style.getPropertyValue(nn.style.item(Un)));break}(nn=nn||ut[tt].elements[0].node).parentElement.insertBefore(Tt,nn)}}(K,oe),oe.rubyReserve=null),(oe.ruby||oe.rubyReserve)&&(function(ut,at){for(var tt=0;tt<ut.length;tt++)for(var dt=0;dt<ut[tt].rbc.length;dt++){var Et;ut[tt].rbc[dt].style[ue]||(Et=W?tt===0?"before":"after":at.bpd==="tb"||at.bpd==="rl"?tt===0?"over":"under":tt===0?"under":"over",ut[tt].rbc[dt].style[ue]=Et)}}(K,oe),oe.ruby=null),oe.textEmphasis&&(function(ut,at){for(var tt=0;tt<ut.length;tt++)for(var dt=0;dt<ut[tt].te.length;dt++){var Et;ut[tt].te[dt].style[X]&&ut[tt].te[dt].style[X]!=="none"||(Et=at.bpd==="tb"?tt===0?"left over":"left under":at.bpd==="rl"?tt===0?"right under":"left under":tt===0?"left under":"right under",ut[tt].te[dt].style[X]=Et)}}(K,oe),oe.textEmphasis=null),oe.mra&&(function(ut){for(var at=0;at<ut.length-1;at++){var tt=ut[at].elements.length;if(tt!==0&&ut[at].br===!1){var dt=document.createElement("br"),Et=ut[at].elements[tt-1].node;Et.parentElement.insertBefore(dt,Et.nextSibling)}}}(K),oe.mra=null),oe.lp&&(function(ut,at,tt){if(ut!==null)for(var dt=0;dt<ut.length;dt++){var Et=ut[dt].elements.length,Tt=Math.ceil(at)+"px",Rt="-"+Math.ceil(at)+"px";if(Et!==0){var hn=ut[dt].elements[ut[dt].start_elem],Qt=ut[dt].elements[ut[dt].end_elem];if(hn===Qt){var nn=hn.node.getBoundingClientRect();if(nn.width==0||nn.height==0)continue}tt.ipd==="lr"?(hn.node.style.marginLeft=Rt,hn.node.style.paddingLeft=Tt):tt.ipd==="rl"?(hn.node.style.paddingRight=Tt,hn.node.style.marginRight=Rt):tt.ipd==="tb"&&(hn.node.style.paddingTop=Tt,hn.node.style.marginTop=Rt),tt.ipd==="lr"?(U||(Qt.node.style.marginRight=Rt),Qt.node.style.paddingRight=Tt):tt.ipd==="rl"?(Qt.node.style.paddingLeft=Tt,U||(Qt.node.style.marginLeft=Rt)):tt.ipd==="tb"&&(Qt.node.style.paddingBottom=Tt,Qt.node.style.marginBottom=Rt)}}}(K,oe.lp.toUsedLength(oe.w,oe.h),oe),oe.lp=null),function(ut,at){for(var tt=0;tt<ut.length;tt++)for(var dt=ut[tt],Et=1;Et<dt.elements.length;){var Tt=dt.elements[Et-1],Rt=dt.elements[Et];T(Tt.node,Rt.node,at)?dt.elements.splice(Et,1):Et++}for(var hn,Qt,nn=[],Ot=0;Ot<ut.length;Ot++)for(var Un=0;Un<ut[Ot].elements.length;Un++)(Qt=m(hn=ut[Ot].elements[Un].node,nn,!1))&&(hn.style.backgroundColor=Qt);for(var gr=0;gr<nn.length;gr++)nn[gr].style.backgroundColor=""}(K,oe),oe.flg)){var _e=N(Me.getBoundingClientRect(),oe);(function(ut,at,tt,dt,Et){for(var Tt=Math.sign(tt-at),Rt=0;Rt<=ut.length;Rt++){var hn,Qt,nn,Ot;if(hn=Rt===0?Math.round(at):Rt===ut.length?Math.round(tt):Math.round((ut[Rt-1].after+ut[Rt].before)/2),Rt>0&&ut[Rt-1])for(nn=0;nn<ut[Rt-1].elements.length;nn++)Qt=Tt*(hn-(Ot=ut[Rt-1].elements[nn]).after)+"px",dt.bpd==="lr"?Ot.node.style.paddingRight=Qt:dt.bpd==="rl"?Ot.node.style.paddingLeft=Qt:dt.bpd==="tb"&&(Ot.node.style.paddingBottom=Qt);if(Rt<ut.length)for(nn=0;nn<ut[Rt].elements.length;nn++)Qt=Tt*((Ot=ut[Rt].elements[nn]).before-hn)+"px",dt.bpd==="lr"?Ot.node.style.paddingLeft=Qt:dt.bpd==="rl"?Ot.node.style.paddingRight=Qt:dt.bpd==="tb"&&(Ot.node.style.paddingTop=Qt)}})(K,_e.before,_e.after,oe),oe.flg=null}if(Re.kind==="region"&&oe.bpd==="tb"&&oe.enableRollUp&&Re.contents.length>0&&Re.styleAttrs[v.byName.displayAlign.qname]==="after"){_(oe,Me,K,null);var de=new F(Re.id===""?"_":Re.id,K);if(oe.currentISDState[de.id]=de,oe.previousISDState&&de.id in oe.previousISDState&&oe.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===oe.previousISDState[de.id].plist[oe.previousISDState[de.id].plist.length-1].text){var Ke=Se.firstElementChild,St=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;Ke.style.bottom="-"+St+"px",Ke.style.transition="transform 0.4s",Ke.style.position="relative",Ke.style.transform="translateY(-"+St+"px)"}}}else fe(oe.errorHandler,"Error processing ISD element kind: "+Re.kind)}function m(oe,ge,Re){return oe.style.backgroundColor?(Re&&!ge.includes(oe)&&ge.push(oe),oe.style.backgroundColor):oe.parentElement.nodeName==="SPAN"||oe.parentElement.nodeName==="RUBY"||oe.parentElement.nodeName==="RBC"||oe.parentElement.nodeName==="RTC"||oe.parentElement.nodeName==="RT"?m(oe.parentElement,ge,!0):void 0}function T(oe,ge,Re){if(oe.tagName==="SPAN"&&ge.tagName==="SPAN"&&oe._isd_element===ge._isd_element){if(!oe._isd_element)return fe(Re.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;oe.textContent+=ge.textContent;for(var Je=0;Je<ge.style.length;Je++){var Se=ge.style[Je];(Se.indexOf("border")>=0||Se.indexOf("padding")>=0||Se.indexOf("margin")>=0)&&(oe.style[Se]=ge.style[Se])}return ge.parentElement.removeChild(ge),!0}return!1}function F(oe,ge){this.id=oe,this.plist=ge}function N(oe,ge){var Re={before:null,after:null,start:null,end:null};return ge.bpd==="tb"?(Re.before=oe.top,Re.after=oe.bottom,ge.ipd==="lr"?(Re.start=oe.left,Re.end=oe.right):(Re.start=oe.right,Re.end=oe.left)):ge.bpd==="lr"?(Re.before=oe.left,Re.after=oe.right,Re.start=oe.top,Re.end=oe.bottom):ge.bpd==="rl"&&(Re.before=oe.right,Re.after=oe.left,Re.start=oe.top,Re.end=oe.bottom),Re}function _(oe,ge,Re,Je){if(ge.localName!=="rt"&&ge.localName!=="rtc"){var Se,Be,ot,st,Ie=ge.style.backgroundColor||Je;if(ge.childElementCount===0)if(ge.localName==="span"||ge.localName==="rb"){var Ye=N(ge.getBoundingClientRect(),oe);if(Re.length!==0&&(Se=Ye.before,Be=Ye.after,ot=Re[Re.length-1].before,Be<(st=Re[Re.length-1].after)&&Se>ot||st<=Be&&ot>=Se)){var mt=Math.sign(Ye.after-Ye.before),Me=Math.sign(Ye.end-Ye.start);mt*(Ye.before-Re[Re.length-1].before)<0&&(Re[Re.length-1].before=Ye.before),mt*(Ye.after-Re[Re.length-1].after)>0&&(Re[Re.length-1].after=Ye.after),Me*(Ye.start-Re[Re.length-1].start)<0&&(Re[Re.length-1].start=Ye.start,Re[Re.length-1].start_elem=Re[Re.length-1].elements.length),Me*(Ye.end-Re[Re.length-1].end)>0&&(Re[Re.length-1].end=Ye.end,Re[Re.length-1].end_elem=Re[Re.length-1].elements.length)}else Re.push({before:Ye.before,after:Ye.after,start:Ye.start,end:Ye.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Re[Re.length-1].text+=ge.textContent,Re[Re.length-1].elements.push({node:ge,bgcolor:Ie,before:Ye.before,after:Ye.after})}else ge.localName==="br"&&Re.length!==0&&(Re[Re.length-1].br=!0);else for(var We=ge.firstChild;We;)We.nodeType===Node.ELEMENT_NODE&&(_(oe,We,Re,Ie),We.localName==="ruby"||We.localName==="rtc"?Re.length>0&&Re[Re.length-1].rbc.push(We):We.localName==="span"&&We.style[x]&&We.style[x]!=="none"&&Re.length>0&&Re[Re.length-1].te.push(We)),We=We.nextSibling}}function I(oe,ge,Re,Je){var Se;Je.style!=="none"&&(Je.style==="auto"?ge.style[x]="filled":ge.style[x]=Je.style+" "+Je.symbol,(Je.position==="before"||Je.position==="after")&&(Se=oe.bpd==="tb"?Je.position==="before"?"left over":"left under":oe.bpd==="rl"?Je.position==="before"?"right under":"left under":Je.position==="before"?"left under":"right under",ge.style[X]=Se))}function b(oe,ge){this.qname=oe,this.map=ge}C.render=function(oe,ge,Re,Je,Se,Be,ot,st,Ie){var Ye=Je||ge.clientHeight,mt=Se||ge.clientWidth;if(oe.aspectRatio!==null){var Me=Ye*oe.aspectRatio;Me>mt?Ye=Math.round(mt/oe.aspectRatio):mt=Me}var We=document.createElement("div");We.style.position="relative",We.style.width=mt+"px",We.style.height=Ye+"px",We.style.margin="auto",We.style.top=0,We.style.bottom=0,We.style.left=0,We.style.right=0,We.style.zIndex=0;var rt={h:Ye,w:mt,regionH:null,regionW:null,imgResolver:Re,displayForcedOnlyMode:Be||!1,isd:oe,errorHandler:ot,previousISDState:st,enableRollUp:Ie||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ge.appendChild(We),"contents"in oe)for(var qt=0;qt<oe.contents.length;qt++)D(rt,We,oe.contents[qt],oe);return rt.currentISDState};for(var j=[new b("http://www.w3.org/ns/ttml#styling backgroundColor",function(oe,ge,Re,Je){Je[3]!==0&&(ge.style.backgroundColor="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")")}),new b("http://www.w3.org/ns/ttml#styling color",function(oe,ge,Re,Je){ge.style.color="rgba("+Je[0].toString()+","+Je[1].toString()+","+Je[2].toString()+","+(Je[3]/255).toString()+")"}),new b("http://www.w3.org/ns/ttml#styling direction",function(oe,ge,Re,Je){ge.style.direction=Je}),new b("http://www.w3.org/ns/ttml#styling display",function(oe,ge,Re,Je){}),new b("http://www.w3.org/ns/ttml#styling displayAlign",function(oe,ge,Re,Je){ge.style.display="flex",ge.style.flexDirection="column",Je==="before"?ge.style.justifyContent="flex-start":Je==="center"?ge.style.justifyContent="center":Je==="after"&&(ge.style.justifyContent="flex-end")}),new b("http://www.w3.org/ns/ttml#styling extent",function(oe,ge,Re,Je){oe.regionH=Je.h.toUsedLength(oe.w,oe.h),oe.regionW=Je.w.toUsedLength(oe.w,oe.h);var Se=0,Be=0,ot=Re.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];ot&&(Se=ot[0].toUsedLength(oe.w,oe.h)+ot[2].toUsedLength(oe.w,oe.h),Be=ot[1].toUsedLength(oe.w,oe.h)+ot[3].toUsedLength(oe.w,oe.h)),ge.style.height=oe.regionH-Se+"px",ge.style.width=oe.regionW-Be+"px"}),new b("http://www.w3.org/ns/ttml#styling fontFamily",function(oe,ge,Re,Je){for(var Se=[],Be=0;Be<Je.length;Be++)Je[Be]=Je[Be].trim(),Je[Be]==="monospaceSerif"?(Se.push("Courier New"),Se.push('"Liberation Mono"'),Se.push("Courier"),Se.push("monospace")):Je[Be]==="proportionalSansSerif"?(Se.push("Arial"),Se.push("Helvetica"),Se.push('"Liberation Sans"'),Se.push("sans-serif")):Je[Be]==="monospace"?Se.push("monospace"):Je[Be]==="sansSerif"?Se.push("sans-serif"):Je[Be]==="serif"?Se.push("serif"):Je[Be]==="monospaceSansSerif"?(Se.push("Consolas"),Se.push("monospace")):Je[Be]==="proportionalSerif"?Se.push("serif"):Se.push(Je[Be]);if(Se.length>0){for(var ot=[Se[0]],st=1;st<Se.length;st++)ot.indexOf(Se[st])==-1&&ot.push(Se[st]);Se=ot}ge.style.fontFamily=Se.join(",")}),new b("http://www.w3.org/ns/ttml#styling shear",function(oe,ge,Re,Je){if(Je!==0){var Se=-.9*Je;oe.bpd==="tb"?ge.style.transform="skewX("+Se+"deg)":ge.style.transform="skewY("+Se+"deg)"}}),new b("http://www.w3.org/ns/ttml#styling fontSize",function(oe,ge,Re,Je){ge.style.fontSize=Je.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling fontStyle",function(oe,ge,Re,Je){ge.style.fontStyle=Je}),new b("http://www.w3.org/ns/ttml#styling fontWeight",function(oe,ge,Re,Je){ge.style.fontWeight=Je}),new b("http://www.w3.org/ns/ttml#styling lineHeight",function(oe,ge,Re,Je){ge.style.lineHeight=Je==="normal"?"normal":Je.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling opacity",function(oe,ge,Re,Je){ge.style.opacity=Je}),new b("http://www.w3.org/ns/ttml#styling origin",function(oe,ge,Re,Je){ge.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",ge.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling overflow",function(oe,ge,Re,Je){ge.style.overflow=Je}),new b("http://www.w3.org/ns/ttml#styling padding",function(oe,ge,Re,Je){var Se=[];Se[0]=Je[0].toUsedLength(oe.w,oe.h)+"px",Se[1]=Je[3].toUsedLength(oe.w,oe.h)+"px",Se[2]=Je[2].toUsedLength(oe.w,oe.h)+"px",Se[3]=Je[1].toUsedLength(oe.w,oe.h)+"px",ge.style.padding=Se.join(" ")}),new b("http://www.w3.org/ns/ttml#styling position",function(oe,ge,Re,Je){ge.style.top=Je.h.toUsedLength(oe.w,oe.h)+"px",ge.style.left=Je.w.toUsedLength(oe.w,oe.h)+"px"}),new b("http://www.w3.org/ns/ttml#styling rubyAlign",function(oe,ge,Re,Je){ge.style.rubyAlign=Je==="spaceAround"?"space-around":"center"}),new b("http://www.w3.org/ns/ttml#styling rubyPosition",function(oe,ge,Re,Je){var Se;Je!=="before"&&Je!=="after"||(Se=W?Je:oe.bpd==="tb"||oe.bpd==="rl"?Je==="before"?"over":"under":Je==="before"?"under":"over",ge.parentElement.style[ue]=Se)}),new b("http://www.w3.org/ns/ttml#styling showBackground",null),new b("http://www.w3.org/ns/ttml#styling textAlign",function(oe,ge,Re,Je){var Se;Se=Je==="start"?oe.ipd==="rl"?"right":"left":Je==="end"?oe.ipd==="rl"?"left":"right":Je,ge.style.textAlign=Se}),new b("http://www.w3.org/ns/ttml#styling textDecoration",function(oe,ge,Re,Je){ge.style.textDecoration=Je.join(" ").replace("lineThrough","line-through")}),new b("http://www.w3.org/ns/ttml#styling textOutline",function(oe,ge,Re,Je){}),new b("http://www.w3.org/ns/ttml#styling textShadow",function(oe,ge,Re,Je){var Se=Re.styleAttrs[v.byName.textOutline.qname];if(Je==="none"&&Se==="none")ge.style.textShadow="";else{var Be=[];if(Se!=="none"){var ot="rgba("+Se.color[0].toString()+","+Se.color[1].toString()+","+Se.color[2].toString()+","+(Se.color[3]/255).toString()+")";Be.push("1px 1px 1px "+ot),Be.push("-1px 1px 1px "+ot),Be.push("1px -1px 1px "+ot),Be.push("-1px -1px 1px "+ot)}if(Je!=="none")for(var st=0;st<Je.length;st++)Be.push(Je[st].x_off.toUsedLength(oe.w,oe.h)+"px "+Je[st].y_off.toUsedLength(oe.w,oe.h)+"px "+Je[st].b_radius.toUsedLength(oe.w,oe.h)+"px rgba("+Je[st].color[0].toString()+","+Je[st].color[1].toString()+","+Je[st].color[2].toString()+","+(Je[st].color[3]/255).toString()+")");ge.style.textShadow=Be.join(",")}}),new b("http://www.w3.org/ns/ttml#styling textCombine",function(oe,ge,Re,Je){ge.style.textCombineUpright=Je}),new b("http://www.w3.org/ns/ttml#styling textEmphasis",function(oe,ge,Re,Je){}),new b("http://www.w3.org/ns/ttml#styling unicodeBidi",function(oe,ge,Re,Je){var Se;Se=Je==="bidiOverride"?"bidi-override":Je,ge.style.unicodeBidi=Se}),new b("http://www.w3.org/ns/ttml#styling visibility",function(oe,ge,Re,Je){ge.style.visibility=Je}),new b("http://www.w3.org/ns/ttml#styling wrapOption",function(oe,ge,Re,Je){Je==="wrap"?Re.space==="preserve"?ge.style.whiteSpace="pre-wrap":ge.style.whiteSpace="normal":Re.space==="preserve"?ge.style.whiteSpace="pre":ge.style.whiteSpace="noWrap"}),new b("http://www.w3.org/ns/ttml#styling writingMode",function(oe,ge,Re,Je){Je==="lrtb"||Je==="lr"||Je==="rltb"||Je==="rl"?ge.style.writingMode="horizontal-tb":Je==="tblr"?ge.style.writingMode="vertical-lr":Je!=="tbrl"&&Je!=="tb"||(ge.style.writingMode="vertical-rl")}),new b("http://www.w3.org/ns/ttml#styling zIndex",function(oe,ge,Re,Je){ge.style.zIndex=Je}),new b("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(oe,ge,Re,Je){oe.displayForcedOnlyMode&&Je===!1&&(ge.style.visibility="hidden")})],Y={},$=0;$<j.length;$++)Y[j[$].qname]=j[$];var W="webkitRubyPosition"in window.getComputedStyle(document.documentElement),ue=W?"webkitRubyPosition":"rubyPosition",x="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function fe(oe,ge){if(oe&&oe.error&&oe.error(ge))throw ge}})(g,typeof imscNames>"u"?A(210):imscNames,typeof imscStyles>"u"?A(6811):imscStyles,typeof imscUtils>"u"?A(5926):imscUtils)},4080:function(R,g,A){(function(U,C,y,v){U.generateISD=function(b,j,Y){var $,W=new N(b),ue={},x={},X=b.head.styling.initials[y.byName.showBackground.qname],fe=b.head.styling.initials[y.byName.backgroundColor.qname];for(var oe in b.head.layout.regions)if(b.head.layout.regions.hasOwnProperty(oe)){var ge=b.head.layout.regions[oe],Re=ge.styleAttrs[y.byName.showBackground.qname]||X,Je=ge.styleAttrs[y.byName.backgroundColor.qname]||fe;x[ge.id]=(Re==="always"||Re===void 0)&&Je!==void 0&&!(j<ge.begin||j>=ge.end)}for(var Se in b.body&&b.body.regionID&&(x[b.body.regionID]=!0),$=b.body!==null?function ot(st,Ie){if(Ie.contents){var Ye={};for(var mt in Ie)Ie.hasOwnProperty(mt)&&(Ye[mt]=Ie[mt]);return Ye.contents=[],Ie.contents.filter(function(Me){return!(st<Me.begin||st>=Me.end)}).forEach(function(Me){var We=ot(st,Me);We.regionID&&(x[We.regionID]=!0),We!==null&&Ye.contents.push(We)}),Ye}return Ie}(j,b.body):null,x[""]!==void 0&&(x[""]=!0),x)if(x[Se]){var Be=m(b,j,b.head.layout.regions[Se],$,null,"",b.head.layout.regions[Se],Y,ue);Be!==null&&W.contents.push(Be.element)}return W};var D=[y.byName.color.qname,y.byName.textCombine.qname,y.byName.textDecoration.qname,y.byName.textEmphasis.qname,y.byName.textOutline.qname,y.byName.textShadow.qname];function m(b,j,Y,$,W,ue,x,X,fe){if(j<x.begin||j>=x.end)return null;var oe="regionID"in x&&x.regionID!==""?x.regionID:ue;if(W!==null&&oe!==Y.id&&(!("contents"in x)||"contents"in x&&x.contents.length===0||oe!==""))return null;var ge=new _(x);if("sets"in x)for(var Re=0;Re<x.sets.length;Re++)j<x.sets[Re].begin||j>=x.sets[Re].end||(ge.styleAttrs[x.sets[Re].qname]=x.sets[Re].value);var Je={};for(var Se in ge.styleAttrs)if(ge.styleAttrs.hasOwnProperty(Se)&&(Je[Se]=!0,ge.kind==="region"&&Se===y.byName.writingMode.qname&&!(y.byName.direction.qname in ge.styleAttrs))){var Be=ge.styleAttrs[Se];Be==="lrtb"||Be==="lr"?ge.styleAttrs[y.byName.direction.qname]="ltr":Be!=="rltb"&&Be!=="rl"||(ge.styleAttrs[y.byName.direction.qname]="rtl")}if(W!==null)for(var ot=0;ot<y.all.length;ot++){var st=y.all[ot];if(st.qname===y.byName.textDecoration.qname){var Ie=W.styleAttrs[st.qname],Ye=ge.styleAttrs[st.qname],mt=[];Ye===void 0?mt=Ie:Ye.indexOf("none")===-1?((Ye.indexOf("noUnderline")===-1&&Ie.indexOf("underline")!==-1||Ye.indexOf("underline")!==-1)&&mt.push("underline"),(Ye.indexOf("noLineThrough")===-1&&Ie.indexOf("lineThrough")!==-1||Ye.indexOf("lineThrough")!==-1)&&mt.push("lineThrough"),(Ye.indexOf("noOverline")===-1&&Ie.indexOf("overline")!==-1||Ye.indexOf("overline")!==-1)&&mt.push("overline")):mt.push("none"),ge.styleAttrs[st.qname]=mt}else if(st.qname!==y.byName.fontSize.qname||st.qname in ge.styleAttrs||ge.kind!=="span"||ge.styleAttrs[y.byName.ruby.qname]!=="textContainer")if(st.qname!==y.byName.fontSize.qname||st.qname in ge.styleAttrs||ge.kind!=="span"||ge.styleAttrs[y.byName.ruby.qname]!=="text")st.inherit&&st.qname in W.styleAttrs&&!(st.qname in ge.styleAttrs)&&(ge.styleAttrs[st.qname]=W.styleAttrs[st.qname]);else{var Me=W.styleAttrs[y.byName.fontSize.qname];W.styleAttrs[y.byName.ruby.qname]==="textContainer"?ge.styleAttrs[st.qname]=Me:ge.styleAttrs[st.qname]=new v.ComputedLength(.5*Me.rw,.5*Me.rh)}else{var We=W.styleAttrs[y.byName.fontSize.qname];ge.styleAttrs[st.qname]=new v.ComputedLength(.5*We.rw,.5*We.rh)}}for(var rt=0;rt<y.all.length;rt++){var qt=y.all[rt];if(!(qt.qname in ge.styleAttrs)&&!(qt.qname===y.byName.position.qname&&y.byName.origin.qname in ge.styleAttrs||qt.qname===y.byName.origin.qname&&y.byName.position.qname in ge.styleAttrs)){var kt=b.head.styling.initials[qt.qname]||qt.initial;if(kt!==null&&(ge.kind==="region"||qt.inherit===!1&&kt!==null)){var ft=qt.parse(kt);ft!==null?(ge.styleAttrs[qt.qname]=ft,Je[qt.qname]=!0):I(X,"Invalid initial value for '"+qt.qname+"' on element '"+ge.kind)}}}for(var At=0;At<y.all.length;At++){var Ce=y.all[At];if(Ce.qname in Je&&Ce.compute!==null){var re=Ce.compute(b,W,ge,ge.styleAttrs[Ce.qname],fe);re!==null?ge.styleAttrs[Ce.qname]=re:(ge.styleAttrs[Ce.qname]=Ce.compute(b,W,ge,Ce.parse(Ce.initial),fe),I(X,"Style '"+Ce.qname+"' on element '"+ge.kind+"' cannot be computed"))}}if(ge.styleAttrs[y.byName.display.qname]==="none")return null;var je=null;W===null?je=$===null?[]:[$]:"contents"in x&&(je=x.contents);for(var O=0;je!==null&&O<je.length;O++){var M=m(b,j,Y,$,ge,oe,je[O],X,fe);M!==null&&ge.contents.push(M.element)}for(var q in ge.styleAttrs)if(ge.styleAttrs.hasOwnProperty(q)){var K=!1;if(ge.kind==="span"){var _e=ge.styleAttrs[y.byName.ruby.qname];(K=(_e==="container"||_e==="textContainer"||_e==="baseContainer")&&D.indexOf(q)!==-1)||(K=_e!=="container"&&q===y.byName.rubyAlign.qname),K||(K=!(_e==="textContainer"||_e==="text")&&q===y.byName.rubyPosition.qname)}if(!K){var de=y.byQName[q];"applies"in de&&(K=de.applies.indexOf(ge.kind)===-1)}K&&delete ge.styleAttrs[q]}var Ke=ge.styleAttrs[y.byName.ruby.qname];if(ge.kind==="p"||ge.kind==="span"&&(Ke==="textContainer"||Ke==="text")){var St=[];T(ge,St),function(ut){for(var at,tt=0;tt<ut.length;)if((at=ut[tt]).kind!=="br"&&at.space!=="preserve"){var dt=at.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(dt)&&(tt===0||(Et=ut[tt-1]).kind==="br"||/[\r\n\t ]$/.test(Et.text))&&(dt=dt.substring(1)),at.text=dt,dt.length===0?ut.splice(tt,1):tt++}else tt++;var Et,Tt;for(tt=0;tt<ut.length;tt++)(at=ut[tt]).kind!=="br"&&at.space!=="preserve"?/[ ]$/.test(at.text)&&(tt===ut.length-1||(Tt=ut[tt+1]).kind==="br"||Tt.space==="preserve"&&/^[\r\n]/.test(Tt.text))&&(at.text=at.text.slice(0,-1)):tt++}(St),F(ge)}return ge.kind==="div"&&y.byName.backgroundImage.qname in ge.styleAttrs||ge.kind==="br"||ge.kind==="image"||"contents"in ge&&ge.contents.length>0||ge.kind==="span"&&ge.text!==null||ge.kind==="region"&&ge.styleAttrs[y.byName.showBackground.qname]==="always"?{region_id:oe,element:ge}:null}function T(b,j){if("contents"in b)for(var Y=0;Y<b.contents.length;Y++){var $=b.contents[Y],W=$.styleAttrs[y.byName.ruby.qname];($.kind!=="span"||W!=="textContainer"&&W!=="text")&&("contents"in $?T($,j):($.kind==="span"&&$.text.length!==0||$.kind==="br")&&j.push($))}}function F(b){if(b.kind==="br")return!1;if("text"in b)return b.text.length===0;if("contents"in b){for(var j=b.contents.length;j--;)F(b.contents[j])&&b.contents.splice(j,1);return b.contents.length===0}}function N(b){this.contents=[],this.aspectRatio=b.aspectRatio,this.lang=b.lang}function _(b){for(var j in this.kind=b.kind||"region",this.lang=b.lang,b.id&&(this.id=b.id),this.styleAttrs={},b.styleAttrs)b.styleAttrs.hasOwnProperty(j)&&(this.styleAttrs[j]=b.styleAttrs[j]);"src"in b&&(this.src=b.src),"type"in b&&(this.type=b.type),"text"in b?this.text=b.text:(this.kind==="region"||"contents"in b)&&(this.contents=[]),"space"in b&&(this.space=b.space)}function I(b,j){if(b&&b.error&&b.error(j))throw j}})(g,typeof imscNames>"u"?A(210):imscNames,typeof imscStyles>"u"?A(6811):imscStyles,typeof imscUtils>"u"?A(5926):imscUtils)},4403:function(R,g,A){g.generateISD=A(4080).generateISD,g.fromXML=A(3362).fromXML,g.renderHTML=A(506).render},210:function(R,g){(function(A){A.ns_tt="http://www.w3.org/ns/ttml",A.ns_tts="http://www.w3.org/ns/ttml#styling",A.ns_ttp="http://www.w3.org/ns/ttml#parameter",A.ns_xml="http://www.w3.org/XML/1998/namespace",A.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",A.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",A.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",A.ns_ebutts="urn:ebu:tt:style"})(g)},6811:function(R,g,A){(function(U,C,y){function v(T,F,N,_,I,b,j,Y){this.name=F,this.ns=T,this.qname=T+" "+F,this.inherit=I,this.animatable=b,this.initial=N,this.applies=_,this.parse=j,this.compute=Y}for(var D in U.all=[new v(C.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,y.parseColor,null),new v(C.ns_tts,"color","white",["span"],!0,!0,y.parseColor,null),new v(C.ns_tts,"direction","ltr",["p","span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(T){return T},null),new v(C.ns_tts,"displayAlign","before",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"extent","auto",["tt","region"],!1,!0,function(T){if(T==="auto")return T;var F=T.split(" ");if(F.length!==2)return null;var N=y.parseLength(F[0]),_=y.parseLength(F[1]);return _&&N?{h:_,w:N}:null},function(T,F,N,_,I){var b,j;if(_==="auto")b=new y.ComputedLength(0,1);else if((b=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(1,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:b,w:j}}),new v(C.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(T){for(var F=T.split(","),N=[],_=0;_<F.length;_++)F[_]=F[_].trim(),F[_].charAt(0)!=="'"&&F[_].charAt(0)!=='"'&&F[_]==="default"?N.push("monospaceSerif"):N.push(F[_]);return N},null),new v(C.ns_tts,"shear","0%",["p"],!0,!0,y.parseLength,function(T,F,N,_){return _.unit!=="%"?null:Math.abs(_.value)>100?100*Math.sign(_.value):_.value}),new v(C.ns_tts,"fontSize","1c",["span","p"],!0,!0,y.parseLength,function(T,F,N,_,I){return y.toComputedLength(_.value,_.unit,F!==null?F.styleAttrs[U.byName.fontSize.qname]:T.cellLength.h,F!==null?F.styleAttrs[U.byName.fontSize.qname]:T.cellLength.h,T.cellLength.h,T.pxLength.h)}),new v(C.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(T){return T},null),new v(C.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(T){return T},null),new v(C.ns_tts,"lineHeight","normal",["p"],!0,!0,function(T){return T==="normal"?T:y.parseLength(T)},function(T,F,N,_,I){var b;if(_==="normal")b=_;else if((b=y.toComputedLength(_.value,_.unit,N.styleAttrs[U.byName.fontSize.qname],N.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null)return null;return b}),new v(C.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new v(C.ns_tts,"origin","auto",["region"],!1,!0,function(T){if(T==="auto")return T;var F=T.split(" ");if(F.length!==2)return null;var N=y.parseLength(F[0]),_=y.parseLength(F[1]);return _&&N?{h:_,w:N}:null},function(T,F,N,_,I){var b,j;if(_==="auto")b=new y.ComputedLength(0,0);else if((b=y.toComputedLength(_.h.value,_.h.unit,null,T.dimensions.h,null,T.pxLength.h))===null)return null;if(_==="auto")j=new y.ComputedLength(0,0);else if((j=y.toComputedLength(_.w.value,_.w.unit,null,T.dimensions.w,null,T.pxLength.w))===null)return null;return{h:b,w:j}}),new v(C.ns_tts,"overflow","hidden",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"padding","0px",["region"],!1,!0,function(T){var F=T.split(" ");if(F.length>4)return null;for(var N=[],_=0;_<F.length;_++){var I=y.parseLength(F[_]);if(!I)return null;N.push(I)}return N},function(T,F,N,_,I){var b;if(_.length===1)b=[_[0],_[0],_[0],_[0]];else if(_.length===2)b=[_[0],_[1],_[0],_[1]];else if(_.length===3)b=[_[0],_[1],_[2],_[1]];else{if(_.length!==4)return null;b=[_[0],_[1],_[2],_[3]]}var j=N.styleAttrs[U.byName.writingMode.qname];if(j==="lrtb"||j==="lr")b=[b[0],b[3],b[2],b[1]];else if(j==="rltb"||j==="rl")b=[b[0],b[1],b[2],b[3]];else if(j==="tblr")b=[b[3],b[0],b[1],b[2]];else{if(j!=="tbrl"&&j!=="tb")return null;b=[b[3],b[2],b[1],b[0]]}for(var Y=[],$=0;$<b.length;$++)if(b[$].value===0)Y[$]=new y.ComputedLength(0,0);else if(Y[$]=y.toComputedLength(b[$].value,b[$].unit,N.styleAttrs[U.byName.fontSize.qname],$===0||$===2?N.styleAttrs[U.byName.extent.qname].h:N.styleAttrs[U.byName.extent.qname].w,$===0||$===2?T.cellLength.h:T.cellLength.w,$===0||$===2?T.pxLength.h:T.pxLength.w),Y[$]===null)return null;return Y}),new v(C.ns_tts,"position","top left",["region"],!1,!0,function(T){return y.parsePosition(T)},function(T,F,N,_){var I,b;return(I=y.toComputedLength(_.v.offset.value,_.v.offset.unit,null,new y.ComputedLength(-N.styleAttrs[U.byName.extent.qname].h.rw,T.dimensions.h.rh-N.styleAttrs[U.byName.extent.qname].h.rh),null,T.pxLength.h))===null?null:(_.v.edge==="bottom"&&(I=new y.ComputedLength(-I.rw-N.styleAttrs[U.byName.extent.qname].h.rw,T.dimensions.h.rh-I.rh-N.styleAttrs[U.byName.extent.qname].h.rh)),b=y.toComputedLength(_.h.offset.value,_.h.offset.unit,null,new y.ComputedLength(T.dimensions.w.rw-N.styleAttrs[U.byName.extent.qname].w.rw,-N.styleAttrs[U.byName.extent.qname].w.rh),null,T.pxLength.w),I===null?null:(_.h.edge==="right"&&(b=new y.ComputedLength(T.dimensions.w.rw-b.rw-N.styleAttrs[U.byName.extent.qname].w.rw,-b.rh-N.styleAttrs[U.byName.extent.qname].w.rh)),{h:I,w:b}))}),new v(C.ns_tts,"ruby","none",["span"],!1,!0,function(T){return T},null),new v(C.ns_tts,"rubyAlign","center",["span"],!0,!0,function(T){return T!=="center"&&T!=="spaceAround"?null:T},null),new v(C.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"rubyReserve","none",["p"],!0,!0,function(T){var F=T.split(" "),N=[null,null];if(F.length===0||F.length>2||F[0]!=="none"&&F[0]!=="both"&&F[0]!=="after"&&F[0]!=="before"&&F[0]!=="outside")return null;if(N[0]=F[0],F.length===2&&F[0]!=="none"){var _=y.parseLength(F[1]);if(!_)return null;N[1]=_}return N},function(T,F,N,_,I){if(_[0]==="none")return _;var b;return(b=_[1]===null?new y.ComputedLength(.5*N.styleAttrs[U.byName.fontSize.qname].rw,.5*N.styleAttrs[U.byName.fontSize.qname].rh):y.toComputedLength(_[1].value,_[1].unit,N.styleAttrs[U.byName.fontSize.qname],N.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h))===null?null:[_[0],b]}),new v(C.ns_tts,"showBackground","always",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"textAlign","start",["p"],!0,!0,function(T){return T},function(T,F,N,_,I){return _==="left"?"start":_==="right"?"end":_}),new v(C.ns_tts,"textCombine","none",["span"],!0,!0,function(T){return T==="none"||T==="all"?T:null},null),new v(C.ns_tts,"textDecoration","none",["span"],!0,!0,function(T){return T.split(" ")},null),new v(C.ns_tts,"textEmphasis","none",["span"],!0,!0,function(T){for(var F=T.split(" "),N={style:null,symbol:null,color:null,position:null},_=0;_<F.length;_++)if(F[_]==="none"||F[_]==="auto")N.style=F[_];else if(F[_]==="filled"||F[_]==="open")N.style=F[_];else if(F[_]==="circle"||F[_]==="dot"||F[_]==="sesame")N.symbol=F[_];else if(F[_]==="current")N.color=F[_];else if(F[_]==="outside"||F[_]==="before"||F[_]==="after")N.position=F[_];else if(N.color=y.parseColor(F[_]),N.color===null)return null;return N.style==null&&N.symbol==null?N.style="auto":(N.symbol=N.symbol||"circle",N.style=N.style||"filled"),N.position=N.position||"outside",N.color=N.color||"current",N},null),new v(C.ns_tts,"textOutline","none",["span"],!0,!0,function(T){if(T==="none")return T;var F={},N=T.split(" ");if(N.length===0||N.length>2)return null;var _=y.parseColor(N[0]);if(F.color=_,_!==null&&N.shift(),N.length!==1)return null;var I=y.parseLength(N[0]);return I?(F.thickness=I,F):null},function(T,F,N,_,I){if(_==="none")return _;var b={};return _.color===null?b.color=N.styleAttrs[U.byName.color.qname]:b.color=_.color,b.thickness=y.toComputedLength(_.thickness.value,_.thickness.unit,N.styleAttrs[U.byName.fontSize.qname],N.styleAttrs[U.byName.fontSize.qname],T.cellLength.h,T.pxLength.h),b.thickness===null?null:b}),new v(C.ns_tts,"textShadow","none",["span"],!0,!0,y.parseTextShadow,function(T,F,N,_){if(_==="none")return _;for(var I=[],b=0;b<_.length;b++){var j={};if(j.x_off=y.toComputedLength(_[b][0].value,_[b][0].unit,null,N.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.w),j.x_off===null||(j.y_off=y.toComputedLength(_[b][1].value,_[b][1].unit,null,N.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.h),j.y_off===null))return null;if(_[b][2]===null)j.b_radius=0;else if(j.b_radius=y.toComputedLength(_[b][2].value,_[b][2].unit,null,N.styleAttrs[U.byName.fontSize.qname],null,T.pxLength.h),j.b_radius===null)return null;_[b][3]===null?j.color=N.styleAttrs[U.byName.color.qname]:j.color=_[b][3],I.push(j)}return I}),new v(C.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(T){return T},null),new v(C.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(T){return T},null),new v(C.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(T){return T},null),new v(C.ns_tts,"zIndex","auto",["region"],!1,!0,function(T){var F;return T==="auto"?F=T:(F=parseInt(T),isNaN(F)&&(F=null)),F},null),new v(C.ns_ebutts,"linePadding","0c",["p"],!0,!1,y.parseLength,function(T,F,N,_,I){return y.toComputedLength(_.value,_.unit,null,null,T.cellLength.w,null)}),new v(C.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(T){return T},null),new v(C.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(T){return T},null),new v(C.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(T){return T==="true"},null),new v(C.ns_itts,"fillLineGap","false",["p"],!0,!0,function(T){return T==="true"},null)],U.byQName={},U.all)U.byQName[U.all[D].qname]=U.all[D];for(var m in U.byName={},U.all)U.byName[U.all[m].name]=U.all[m]})(g,typeof imscNames>"u"?A(210):imscNames,typeof imscUtils>"u"?A(5926):imscUtils)},5926:function(R,g){(function(A){var U=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,C=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,v={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};A.parseColor=function(m){var T,F=null,N=v[m.toLowerCase()];return N!==void 0?F=N:(T=U.exec(m))!==null?F=[parseInt(T[1],16),parseInt(T[2],16),parseInt(T[3],16),T[4]!==void 0?parseInt(T[4],16):255]:(T=C.exec(m))!==null?F=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),255]:(T=y.exec(m))!==null&&(F=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3]),parseInt(T[4])]),F};var D=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;A.parseLength=function(m){var T,F=null;return(T=D.exec(m))!==null&&(F={value:parseFloat(T[1]),unit:T[2]}),F},A.parseTextShadow=function(m){for(var T=m.match(/([^\(,\)]|\([^\)]+\))+/g),F=[],N=0;N<T.length;N++){var _=T[N].split(" ");if(_.length===1&&_[0]==="none")return"none";if(_.length>1&&_.length<5){var I=[null,null,null,null],b=A.parseLength(_.shift());if(b===null||(I[0]=b,(b=A.parseLength(_.shift()))===null))return null;if(I[1]=b,_.length===0){F.push(I);continue}if((b=A.parseLength(_[0]))!==null&&(I[2]=b,_.shift()),_.length===0){F.push(I);continue}var j=A.parseColor(_[0]);if(j===null)return null;I[3]=j,F.push(I)}}return F},A.parsePosition=function(m){var T=m.split(" "),F=function($){return $==="center"||$==="left"||$==="top"||$==="bottom"||$==="right"};if(T.length>4)return null;for(var N=0;N<T.length;N++)if(!F(T[N])){var _=A.parseLength(T[N]);if(_===null)return null;T[N]=_}for(var I={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},b=0;b<T.length;){var j=T[b++];if(F(j)){var Y={value:0,unit:"%"};T.length!==2&&b<T.length&&!F(T[b])&&(Y=T[b++]),j==="right"?(I.h.edge=j,I.h.offset=Y):j==="bottom"?(I.v.edge=j,I.v.offset=Y):j==="left"?I.h.offset=Y:j==="top"&&(I.v.offset=Y)}else{if(T.length!==1&&T.length!==2)return null;b===1?I.h.offset=j:I.v.offset=j}}return I},A.ComputedLength=function(m,T){this.rw=m,this.rh=T},A.ComputedLength.prototype.toUsedLength=function(m,T){return m*this.rw+T*this.rh},A.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},A.toComputedLength=function(m,T,F,N,_,I){return T==="%"&&N?new A.ComputedLength(N.rw*m/100,N.rh*m/100):T==="em"&&F?new A.ComputedLength(F.rw*m,F.rh*m):T==="c"&&_?new A.ComputedLength(m*_.rw,m*_.rh):T==="px"&&I?new A.ComputedLength(m*I.rw,m*I.rh):T==="rh"?new A.ComputedLength(0,m/100):T==="rw"?new A.ComputedLength(m/100,0):null}})(g)},3516:function(R){R.exports=function(g){var A=typeof g=="string"?g.charCodeAt(0):g;return A>=97&&A<=122||A>=65&&A<=90}},2219:function(R,g,A){var U=A(3516),C=A(395);R.exports=function(y){return U(y)||C(y)}},395:function(R){R.exports=function(g){var A=typeof g=="string"?g.charCodeAt(0):g;return A>=48&&A<=57}},3875:function(R){function g(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function A(C,y){for(var v,D="",m=0,T=-1,F=0,N=0;N<=C.length;++N){if(N<C.length)v=C.charCodeAt(N);else{if(v===47)break;v=47}if(v===47){if(!(T===N-1||F===1))if(T!==N-1&&F===2){if(D.length<2||m!==2||D.charCodeAt(D.length-1)!==46||D.charCodeAt(D.length-2)!==46){if(D.length>2){var _=D.lastIndexOf("/");if(_!==D.length-1){_===-1?(D="",m=0):m=(D=D.slice(0,_)).length-1-D.lastIndexOf("/"),T=N,F=0;continue}}else if(D.length===2||D.length===1){D="",m=0,T=N,F=0;continue}}y&&(D.length>0?D+="/..":D="..",m=2)}else D.length>0?D+="/"+C.slice(T+1,N):D=C.slice(T+1,N),m=N-T-1;T=N,F=0}else v===46&&F!==-1?++F:F=-1}return D}var U={resolve:function(){for(var C,y="",v=!1,D=arguments.length-1;D>=-1&&!v;D--){var m;D>=0?m=arguments[D]:(C===void 0&&(C=process.cwd()),m=C),g(m),m.length!==0&&(y=m+"/"+y,v=m.charCodeAt(0)===47)}return y=A(y,!v),v?y.length>0?"/"+y:"/":y.length>0?y:"."},normalize:function(C){if(g(C),C.length===0)return".";var y=C.charCodeAt(0)===47,v=C.charCodeAt(C.length-1)===47;return(C=A(C,!y)).length!==0||y||(C="."),C.length>0&&v&&(C+="/"),y?"/"+C:C},isAbsolute:function(C){return g(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,y=0;y<arguments.length;++y){var v=arguments[y];g(v),v.length>0&&(C===void 0?C=v:C+="/"+v)}return C===void 0?".":U.normalize(C)},relative:function(C,y){if(g(C),g(y),C===y||(C=U.resolve(C))===(y=U.resolve(y)))return"";for(var v=1;v<C.length&&C.charCodeAt(v)===47;++v);for(var D=C.length,m=D-v,T=1;T<y.length&&y.charCodeAt(T)===47;++T);for(var F=y.length-T,N=m<F?m:F,_=-1,I=0;I<=N;++I){if(I===N){if(F>N){if(y.charCodeAt(T+I)===47)return y.slice(T+I+1);if(I===0)return y.slice(T+I)}else m>N&&(C.charCodeAt(v+I)===47?_=I:I===0&&(_=0));break}var b=C.charCodeAt(v+I);if(b!==y.charCodeAt(T+I))break;b===47&&(_=I)}var j="";for(I=v+_+1;I<=D;++I)I!==D&&C.charCodeAt(I)!==47||(j.length===0?j+="..":j+="/..");return j.length>0?j+y.slice(T+_):(T+=_,y.charCodeAt(T)===47&&++T,y.slice(T))},_makeLong:function(C){return C},dirname:function(C){if(g(C),C.length===0)return".";for(var y=C.charCodeAt(0),v=y===47,D=-1,m=!0,T=C.length-1;T>=1;--T)if((y=C.charCodeAt(T))===47){if(!m){D=T;break}}else m=!1;return D===-1?v?"/":".":v&&D===1?"//":C.slice(0,D)},basename:function(C,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');g(C);var v,D=0,m=-1,T=!0;if(y!==void 0&&y.length>0&&y.length<=C.length){if(y.length===C.length&&y===C)return"";var F=y.length-1,N=-1;for(v=C.length-1;v>=0;--v){var _=C.charCodeAt(v);if(_===47){if(!T){D=v+1;break}}else N===-1&&(T=!1,N=v+1),F>=0&&(_===y.charCodeAt(F)?--F==-1&&(m=v):(F=-1,m=N))}return D===m?m=N:m===-1&&(m=C.length),C.slice(D,m)}for(v=C.length-1;v>=0;--v)if(C.charCodeAt(v)===47){if(!T){D=v+1;break}}else m===-1&&(T=!1,m=v+1);return m===-1?"":C.slice(D,m)},extname:function(C){g(C);for(var y=-1,v=0,D=-1,m=!0,T=0,F=C.length-1;F>=0;--F){var N=C.charCodeAt(F);if(N!==47)D===-1&&(m=!1,D=F+1),N===46?y===-1?y=F:T!==1&&(T=1):y!==-1&&(T=-1);else if(!m){v=F+1;break}}return y===-1||D===-1||T===0||T===1&&y===D-1&&y===v+1?"":C.slice(y,D)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(y,v){var D=v.dir||v.root,m=v.base||(v.name||"")+(v.ext||"");return D?D===v.root?D+m:D+"/"+m:m}(0,C)},parse:function(C){g(C);var y={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return y;var v,D=C.charCodeAt(0),m=D===47;m?(y.root="/",v=1):v=0;for(var T=-1,F=0,N=-1,_=!0,I=C.length-1,b=0;I>=v;--I)if((D=C.charCodeAt(I))!==47)N===-1&&(_=!1,N=I+1),D===46?T===-1?T=I:b!==1&&(b=1):T!==-1&&(b=-1);else if(!_){F=I+1;break}return T===-1||N===-1||b===0||b===1&&T===N-1&&T===F+1?N!==-1&&(y.base=y.name=F===0&&m?C.slice(1,N):C.slice(F,N)):(F===0&&m?(y.name=C.slice(1,T),y.base=C.slice(1,N)):(y.name=C.slice(F,T),y.base=C.slice(F,N)),y.ext=C.slice(T,N)),F>0?y.dir=C.slice(0,F-1):m&&(y.dir="/"),y},sep:"/",delimiter:":",win32:null,posix:null};U.posix=U,R.exports=U},8387:function(R,g,A){var U=A(1549),C=U.Buffer;function y(D,m){for(var T in D)m[T]=D[T]}function v(D,m,T){return C(D,m,T)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?R.exports=U:(y(U,g),g.Buffer=v),y(C,v),v.from=function(D,m,T){if(typeof D=="number")throw new TypeError("Argument must not be a number");return C(D,m,T)},v.alloc=function(D,m,T){if(typeof D!="number")throw new TypeError("Argument must be a number");var F=C(D);return m!==void 0?typeof T=="string"?F.fill(m,T):F.fill(m):F.fill(0),F},v.allocUnsafe=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return C(D)},v.allocUnsafeSlow=function(D){if(typeof D!="number")throw new TypeError("Argument must be a number");return U.SlowBuffer(D)}},5378:function(R,g,A){(function(U){U.parser=function(O,M){return new v(O,M)},U.SAXParser=v,U.SAXStream=m,U.createStream=function(O,M){return new m(O,M)},U.MAX_BUFFER_LENGTH=65536;var C,y=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function v(O,M){if(!(this instanceof v))return new v(O,M);var q=this;(function(K){for(var _e=0,de=y.length;_e<de;_e++)K[y[_e]]=""})(q),q.q=q.c="",q.bufferCheckPosition=U.MAX_BUFFER_LENGTH,q.opt=M||{},q.opt.lowercase=q.opt.lowercase||q.opt.lowercasetags,q.looseCase=q.opt.lowercase?"toLowerCase":"toUpperCase",q.tags=[],q.closed=q.closedRoot=q.sawRoot=!1,q.tag=q.error=null,q.strict=!!O,q.noscript=!(!O&&!q.opt.noscript),q.state=Se.BEGIN,q.strictEntities=q.opt.strictEntities,q.ENTITIES=q.strictEntities?Object.create(U.XML_ENTITIES):Object.create(U.ENTITIES),q.attribList=[],q.opt.xmlns&&(q.ns=Object.create(Y)),q.trackPosition=q.opt.position!==!1,q.trackPosition&&(q.position=q.line=q.column=0),ot(q,"onready")}U.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(O){function M(){}return M.prototype=O,new M}),Object.keys||(Object.keys=function(O){var M=[];for(var q in O)O.hasOwnProperty(q)&&M.push(q);return M}),v.prototype={end:function(){Me(this)},write:function(O){var M=this;if(this.error)throw this.error;if(M.closed)return mt(M,"Cannot write after close. Assign an onready handler.");if(O===null)return Me(M);typeof O=="object"&&(O=O.toString());for(var q=0,K="";K=je(O,q++),M.c=K,K;)switch(M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++),M.state){case Se.BEGIN:if(M.state=Se.BEGIN_WHITESPACE,K==="\uFEFF")continue;re(M,K);continue;case Se.BEGIN_WHITESPACE:re(M,K);continue;case Se.TEXT:if(M.sawRoot&&!M.closedRoot){for(var _e=q-1;K&&K!=="<"&&K!=="&";)(K=je(O,q++))&&M.trackPosition&&(M.position++,K==="\n"?(M.line++,M.column=0):M.column++);M.textNode+=O.substring(_e,q-1)}K!=="<"||M.sawRoot&&M.closedRoot&&!M.strict?(!oe(T,K)||M.sawRoot&&!M.closedRoot||We(M,"Text data outside of root node."),K==="&"?M.state=Se.TEXT_ENTITY:M.textNode+=K):(M.state=Se.OPEN_WAKA,M.startTagPosition=M.position);continue;case Se.SCRIPT:K==="<"?M.state=Se.SCRIPT_ENDING:M.script+=K;continue;case Se.SCRIPT_ENDING:K==="/"?M.state=Se.CLOSE_TAG:(M.script+="<"+K,M.state=Se.SCRIPT);continue;case Se.OPEN_WAKA:if(K==="!")M.state=Se.SGML_DECL,M.sgmlDecl="";else if(!fe(T,K))if(fe($,K))M.state=Se.OPEN_TAG,M.tagName=K;else if(K==="/")M.state=Se.CLOSE_TAG,M.tagName="";else if(K==="?")M.state=Se.PROC_INST,M.procInstName=M.procInstBody="";else{if(We(M,"Unencoded <"),M.startTagPosition+1<M.position){var de=M.position-M.startTagPosition;K=new Array(de).join(" ")+K}M.textNode+="<"+K,M.state=Se.TEXT}continue;case Se.SGML_DECL:(M.sgmlDecl+K).toUpperCase()==="[CDATA["?(st(M,"onopencdata"),M.state=Se.CDATA,M.sgmlDecl="",M.cdata=""):M.sgmlDecl+K==="--"?(M.state=Se.COMMENT,M.comment="",M.sgmlDecl=""):(M.sgmlDecl+K).toUpperCase()==="DOCTYPE"?(M.state=Se.DOCTYPE,(M.doctype||M.sawRoot)&&We(M,"Inappropriately located doctype declaration"),M.doctype="",M.sgmlDecl=""):K===">"?(st(M,"onsgmldeclaration",M.sgmlDecl),M.sgmlDecl="",M.state=Se.TEXT):(fe(_,K)&&(M.state=Se.SGML_DECL_QUOTED),M.sgmlDecl+=K);continue;case Se.SGML_DECL_QUOTED:K===M.q&&(M.state=Se.SGML_DECL,M.q=""),M.sgmlDecl+=K;continue;case Se.DOCTYPE:K===">"?(M.state=Se.TEXT,st(M,"ondoctype",M.doctype),M.doctype=!0):(M.doctype+=K,K==="["?M.state=Se.DOCTYPE_DTD:fe(_,K)&&(M.state=Se.DOCTYPE_QUOTED,M.q=K));continue;case Se.DOCTYPE_QUOTED:M.doctype+=K,K===M.q&&(M.q="",M.state=Se.DOCTYPE);continue;case Se.DOCTYPE_DTD:M.doctype+=K,K==="]"?M.state=Se.DOCTYPE:fe(_,K)&&(M.state=Se.DOCTYPE_DTD_QUOTED,M.q=K);continue;case Se.DOCTYPE_DTD_QUOTED:M.doctype+=K,K===M.q&&(M.state=Se.DOCTYPE_DTD,M.q="");continue;case Se.COMMENT:K==="-"?M.state=Se.COMMENT_ENDING:M.comment+=K;continue;case Se.COMMENT_ENDING:K==="-"?(M.state=Se.COMMENT_ENDED,M.comment=Ye(M.opt,M.comment),M.comment&&st(M,"oncomment",M.comment),M.comment=""):(M.comment+="-"+K,M.state=Se.COMMENT);continue;case Se.COMMENT_ENDED:K!==">"?(We(M,"Malformed comment"),M.comment+="--"+K,M.state=Se.COMMENT):M.state=Se.TEXT;continue;case Se.CDATA:K==="]"?M.state=Se.CDATA_ENDING:M.cdata+=K;continue;case Se.CDATA_ENDING:K==="]"?M.state=Se.CDATA_ENDING_2:(M.cdata+="]"+K,M.state=Se.CDATA);continue;case Se.CDATA_ENDING_2:K===">"?(M.cdata&&st(M,"oncdata",M.cdata),st(M,"onclosecdata"),M.cdata="",M.state=Se.TEXT):K==="]"?M.cdata+="]":(M.cdata+="]]"+K,M.state=Se.CDATA);continue;case Se.PROC_INST:K==="?"?M.state=Se.PROC_INST_ENDING:fe(T,K)?M.state=Se.PROC_INST_BODY:M.procInstName+=K;continue;case Se.PROC_INST_BODY:if(!M.procInstBody&&fe(T,K))continue;K==="?"?M.state=Se.PROC_INST_ENDING:M.procInstBody+=K;continue;case Se.PROC_INST_ENDING:K===">"?(st(M,"onprocessinginstruction",{name:M.procInstName,body:M.procInstBody}),M.procInstName=M.procInstBody="",M.state=Se.TEXT):(M.procInstBody+="?"+K,M.state=Se.PROC_INST_BODY);continue;case Se.OPEN_TAG:fe(W,K)?M.tagName+=K:(rt(M),K===">"?ft(M):K==="/"?M.state=Se.OPEN_TAG_SLASH:(oe(T,K)&&We(M,"Invalid character in tag name"),M.state=Se.ATTRIB));continue;case Se.OPEN_TAG_SLASH:K===">"?(ft(M,!0),At(M)):(We(M,"Forward-slash in opening tag not followed by >"),M.state=Se.ATTRIB);continue;case Se.ATTRIB:if(fe(T,K))continue;K===">"?ft(M):K==="/"?M.state=Se.OPEN_TAG_SLASH:fe($,K)?(M.attribName=K,M.attribValue="",M.state=Se.ATTRIB_NAME):We(M,"Invalid attribute name");continue;case Se.ATTRIB_NAME:K==="="?M.state=Se.ATTRIB_VALUE:K===">"?(We(M,"Attribute without value"),M.attribValue=M.attribName,kt(M),ft(M)):fe(T,K)?M.state=Se.ATTRIB_NAME_SAW_WHITE:fe(W,K)?M.attribName+=K:We(M,"Invalid attribute name");continue;case Se.ATTRIB_NAME_SAW_WHITE:if(K==="=")M.state=Se.ATTRIB_VALUE;else{if(fe(T,K))continue;We(M,"Attribute without value"),M.tag.attributes[M.attribName]="",M.attribValue="",st(M,"onattribute",{name:M.attribName,value:""}),M.attribName="",K===">"?ft(M):fe($,K)?(M.attribName=K,M.state=Se.ATTRIB_NAME):(We(M,"Invalid attribute name"),M.state=Se.ATTRIB)}continue;case Se.ATTRIB_VALUE:if(fe(T,K))continue;fe(_,K)?(M.q=K,M.state=Se.ATTRIB_VALUE_QUOTED):(We(M,"Unquoted attribute value"),M.state=Se.ATTRIB_VALUE_UNQUOTED,M.attribValue=K);continue;case Se.ATTRIB_VALUE_QUOTED:if(K!==M.q){K==="&"?M.state=Se.ATTRIB_VALUE_ENTITY_Q:M.attribValue+=K;continue}kt(M),M.q="",M.state=Se.ATTRIB_VALUE_CLOSED;continue;case Se.ATTRIB_VALUE_CLOSED:fe(T,K)?M.state=Se.ATTRIB:K===">"?ft(M):K==="/"?M.state=Se.OPEN_TAG_SLASH:fe($,K)?(We(M,"No whitespace between attributes"),M.attribName=K,M.attribValue="",M.state=Se.ATTRIB_NAME):We(M,"Invalid attribute name");continue;case Se.ATTRIB_VALUE_UNQUOTED:if(oe(I,K)){K==="&"?M.state=Se.ATTRIB_VALUE_ENTITY_U:M.attribValue+=K;continue}kt(M),K===">"?ft(M):M.state=Se.ATTRIB;continue;case Se.CLOSE_TAG:if(M.tagName)K===">"?At(M):fe(W,K)?M.tagName+=K:M.script?(M.script+="</"+M.tagName,M.tagName="",M.state=Se.SCRIPT):(oe(T,K)&&We(M,"Invalid tagname in closing tag"),M.state=Se.CLOSE_TAG_SAW_WHITE);else{if(fe(T,K))continue;oe($,K)?M.script?(M.script+="</"+K,M.state=Se.SCRIPT):We(M,"Invalid tagname in closing tag."):M.tagName=K}continue;case Se.CLOSE_TAG_SAW_WHITE:if(fe(T,K))continue;K===">"?At(M):We(M,"Invalid characters in closing tag");continue;case Se.TEXT_ENTITY:case Se.ATTRIB_VALUE_ENTITY_Q:case Se.ATTRIB_VALUE_ENTITY_U:var Ke,St;switch(M.state){case Se.TEXT_ENTITY:Ke=Se.TEXT,St="textNode";break;case Se.ATTRIB_VALUE_ENTITY_Q:Ke=Se.ATTRIB_VALUE_QUOTED,St="attribValue";break;case Se.ATTRIB_VALUE_ENTITY_U:Ke=Se.ATTRIB_VALUE_UNQUOTED,St="attribValue"}K===";"?(M[St]+=Ce(M),M.entity="",M.state=Ke):fe(M.entity.length?x:ue,K)?M.entity+=K:(We(M,"Invalid character in entity name"),M[St]+="&"+M.entity+K,M.entity="",M.state=Ke);continue;default:throw new Error(M,"Unknown state: "+M.state)}return M.position>=M.bufferCheckPosition&&function(ut){for(var at=Math.max(U.MAX_BUFFER_LENGTH,10),tt=0,dt=0,Et=y.length;dt<Et;dt++){var Tt=ut[y[dt]].length;if(Tt>at)switch(y[dt]){case"textNode":Ie(ut);break;case"cdata":st(ut,"oncdata",ut.cdata),ut.cdata="";break;case"script":st(ut,"onscript",ut.script),ut.script="";break;default:mt(ut,"Max buffer length exceeded: "+y[dt])}tt=Math.max(tt,Tt)}var Rt=U.MAX_BUFFER_LENGTH-tt;ut.bufferCheckPosition=Rt+ut.position}(M),M},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var O;Ie(O=this),O.cdata!==""&&(st(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(st(O,"onscript",O.script),O.script="")}};try{C=A(182).Stream}catch(O){C=function(){}}var D=U.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function m(O,M){if(!(this instanceof m))return new m(O,M);C.apply(this),this._parser=new v(O,M),this.writable=!0,this.readable=!0;var q=this;this._parser.onend=function(){q.emit("end")},this._parser.onerror=function(K){q.emit("error",K),q._parser.error=null},this._decoder=null,D.forEach(function(K){Object.defineProperty(q,"on"+K,{get:function(){return q._parser["on"+K]},set:function(_e){if(!_e)return q.removeAllListeners(K),q._parser["on"+K]=_e,_e;q.on(K,_e)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(C.prototype,{constructor:{value:m}}),m.prototype.write=function(O){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(O)){if(!this._decoder){var M=A(7503).s;this._decoder=new M("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},m.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},m.prototype.on=function(O,M){var q=this;return q._parser["on"+O]||D.indexOf(O)===-1||(q._parser["on"+O]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,O),q.emit.apply(q,K)}),C.prototype.on.call(q,O,M)};var T="\r\n	 ",F="0124356789",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",_="'\"",I=T+">",b="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",Y={xml:b,xmlns:j};T=X(T),F=X(F),N=X(N);var $=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ue=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(O){return O.split("").reduce(function(M,q){return M[q]=!0,M},{})}function fe(O,M){return function(q){return Object.prototype.toString.call(q)==="[object RegExp]"}(O)?!!M.match(O):O[M]}function oe(O,M){return!fe(O,M)}_=X(_),I=X(I);var ge,Re,Je,Se=0;for(var Be in U.STATE={BEGIN:Se++,BEGIN_WHITESPACE:Se++,TEXT:Se++,TEXT_ENTITY:Se++,OPEN_WAKA:Se++,SGML_DECL:Se++,SGML_DECL_QUOTED:Se++,DOCTYPE:Se++,DOCTYPE_QUOTED:Se++,DOCTYPE_DTD:Se++,DOCTYPE_DTD_QUOTED:Se++,COMMENT_STARTING:Se++,COMMENT:Se++,COMMENT_ENDING:Se++,COMMENT_ENDED:Se++,CDATA:Se++,CDATA_ENDING:Se++,CDATA_ENDING_2:Se++,PROC_INST:Se++,PROC_INST_BODY:Se++,PROC_INST_ENDING:Se++,OPEN_TAG:Se++,OPEN_TAG_SLASH:Se++,ATTRIB:Se++,ATTRIB_NAME:Se++,ATTRIB_NAME_SAW_WHITE:Se++,ATTRIB_VALUE:Se++,ATTRIB_VALUE_QUOTED:Se++,ATTRIB_VALUE_CLOSED:Se++,ATTRIB_VALUE_UNQUOTED:Se++,ATTRIB_VALUE_ENTITY_Q:Se++,ATTRIB_VALUE_ENTITY_U:Se++,CLOSE_TAG:Se++,CLOSE_TAG_SAW_WHITE:Se++,SCRIPT:Se++,SCRIPT_ENDING:Se++},U.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},U.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(U.ENTITIES).forEach(function(O){var M=U.ENTITIES[O],q=typeof M=="number"?String.fromCharCode(M):M;U.ENTITIES[O]=q}),U.STATE)U.STATE[U.STATE[Be]]=Be;function ot(O,M,q){O[M]&&O[M](q)}function st(O,M,q){O.textNode&&Ie(O),ot(O,M,q)}function Ie(O){O.textNode=Ye(O.opt,O.textNode),O.textNode&&ot(O,"ontext",O.textNode),O.textNode=""}function Ye(O,M){return O.trim&&(M=M.trim()),O.normalize&&(M=M.replace(/\s+/g," ")),M}function mt(O,M){return Ie(O),O.trackPosition&&(M+="\nLine: "+O.line+"\nColumn: "+O.column+"\nChar: "+O.c),M=new Error(M),O.error=M,ot(O,"onerror",M),O}function Me(O){return O.sawRoot&&!O.closedRoot&&We(O,"Unclosed root tag"),O.state!==Se.BEGIN&&O.state!==Se.BEGIN_WHITESPACE&&O.state!==Se.TEXT&&mt(O,"Unexpected end"),Ie(O),O.c="",O.closed=!0,ot(O,"onend"),v.call(O,O.strict,O.opt),O}function We(O,M){if(typeof O!="object"||!(O instanceof v))throw new Error("bad call to strictFail");O.strict&&mt(O,M)}function rt(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var M=O.tags[O.tags.length-1]||O,q=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(q.ns=M.ns),O.attribList.length=0,st(O,"onopentagstart",q)}function qt(O,M){var q=O.indexOf(":")<0?["",O]:O.split(":"),K=q[0],_e=q[1];return M&&O==="xmlns"&&(K="xmlns",_e=""),{prefix:K,local:_e}}function kt(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName))O.attribName=O.attribValue="";else{if(O.opt.xmlns){var M=qt(O.attribName,!0),q=M.prefix,K=M.local;if(q==="xmlns")if(K==="xml"&&O.attribValue!==b)We(O,"xml: prefix must be bound to "+b+"\nActual: "+O.attribValue);else if(K==="xmlns"&&O.attribValue!==j)We(O,"xmlns: prefix must be bound to "+j+"\nActual: "+O.attribValue);else{var _e=O.tag,de=O.tags[O.tags.length-1]||O;_e.ns===de.ns&&(_e.ns=Object.create(de.ns)),_e.ns[K]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,st(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}}function ft(O,M){if(O.opt.xmlns){var q=O.tag,K=qt(O.tagName);q.prefix=K.prefix,q.local=K.local,q.uri=q.ns[K.prefix]||"",q.prefix&&!q.uri&&(We(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),q.uri=K.prefix);var _e=O.tags[O.tags.length-1]||O;q.ns&&_e.ns!==q.ns&&Object.keys(q.ns).forEach(function(hn){st(O,"onopennamespace",{prefix:hn,uri:q.ns[hn]})});for(var de=0,Ke=O.attribList.length;de<Ke;de++){var St=O.attribList[de],ut=St[0],at=St[1],tt=qt(ut,!0),dt=tt.prefix,Et=tt.local,Tt=dt===""?"":q.ns[dt]||"",Rt={name:ut,value:at,prefix:dt,local:Et,uri:Tt};dt&&dt!=="xmlns"&&!Tt&&(We(O,"Unbound namespace prefix: "+JSON.stringify(dt)),Rt.uri=dt),O.tag.attributes[ut]=Rt,st(O,"onattribute",Rt)}O.attribList.length=0}O.tag.isSelfClosing=!!M,O.sawRoot=!0,O.tags.push(O.tag),st(O,"onopentag",O.tag),M||(O.noscript||O.tagName.toLowerCase()!=="script"?O.state=Se.TEXT:O.state=Se.SCRIPT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function At(O){if(!O.tagName)return We(O,"Weird empty close tag."),O.textNode+="</>",void(O.state=Se.TEXT);if(O.script){if(O.tagName!=="script")return O.script+="</"+O.tagName+">",O.tagName="",void(O.state=Se.SCRIPT);st(O,"onscript",O.script),O.script=""}var M=O.tags.length,q=O.tagName;O.strict||(q=q[O.looseCase]());for(var K=q;M--&&O.tags[M].name!==K;)We(O,"Unexpected close tag");if(M<0)return We(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",void(O.state=Se.TEXT);O.tagName=q;for(var _e=O.tags.length;_e-- >M;){var de=O.tag=O.tags.pop();O.tagName=O.tag.name,st(O,"onclosetag",O.tagName);var Ke={};for(var St in de.ns)Ke[St]=de.ns[St];var ut=O.tags[O.tags.length-1]||O;O.opt.xmlns&&de.ns!==ut.ns&&Object.keys(de.ns).forEach(function(at){var tt=de.ns[at];st(O,"onclosenamespace",{prefix:at,uri:tt})})}M===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=Se.TEXT}function Ce(O){var M,q=O.entity,K=q.toLowerCase(),_e="";return O.ENTITIES[q]?O.ENTITIES[q]:O.ENTITIES[K]?O.ENTITIES[K]:((q=K).charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),_e=(M=parseInt(q,16)).toString(16)):(q=q.slice(1),_e=(M=parseInt(q,10)).toString(10))),q=q.replace(/^0+/,""),_e.toLowerCase()!==q?(We(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(M))}function re(O,M){M==="<"?(O.state=Se.OPEN_WAKA,O.startTagPosition=O.position):oe(T,M)&&(We(O,"Non-whitespace before first tag."),O.textNode=M,O.state=Se.TEXT)}function je(O,M){var q="";return M<O.length&&(q=O.charAt(M)),q}Se=U.STATE,String.fromCodePoint||(ge=String.fromCharCode,Re=Math.floor,Je=function(){var O,M,q=16384,K=[],_e=-1,de=arguments.length;if(!de)return"";for(var Ke="";++_e<de;){var St=Number(arguments[_e]);if(!isFinite(St)||St<0||St>1114111||Re(St)!==St)throw RangeError("Invalid code point: "+St);St<=65535?K.push(St):(O=55296+((St-=65536)>>10),M=St%1024+56320,K.push(O,M)),(_e+1===de||K.length>q)&&(Ke+=ge.apply(null,K),K.length=0)}return Ke},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Je,configurable:!0,writable:!0}):String.fromCodePoint=Je)})(g)},182:function(R,g,A){R.exports=C;var U=A(1159).EventEmitter;function C(){U.call(this)}A(1765)(C,U),C.Readable=A(2846),C.Writable=A(8318),C.Duplex=A(6138),C.Transform=A(9798),C.PassThrough=A(5472),C.finished=A(8800),C.pipeline=A(7295),C.Stream=C,C.prototype.pipe=function(y,v){var D=this;function m(j){y.writable&&y.write(j)===!1&&D.pause&&D.pause()}function T(){D.readable&&D.resume&&D.resume()}D.on("data",m),y.on("drain",T),y._isStdio||v&&v.end===!1||(D.on("end",N),D.on("close",_));var F=!1;function N(){F||(F=!0,y.end())}function _(){F||(F=!0,typeof y.destroy=="function"&&y.destroy())}function I(j){if(b(),U.listenerCount(this,"error")===0)throw j}function b(){D.removeListener("data",m),y.removeListener("drain",T),D.removeListener("end",N),D.removeListener("close",_),D.removeListener("error",I),y.removeListener("error",I),D.removeListener("end",b),D.removeListener("close",b),y.removeListener("close",b)}return D.on("error",I),y.on("error",I),D.on("end",b),D.on("close",b),y.on("close",b),y.emit("pipe",D),y}},1765:function(R){typeof Object.create=="function"?R.exports=function(g,A){A&&(g.super_=A,g.prototype=Object.create(A.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:R.exports=function(g,A){if(A){g.super_=A;var U=function(){};U.prototype=A.prototype,g.prototype=new U,g.prototype.constructor=g}}},3690:function(R){var g={};function A(C,y,v){v||(v=Error);var D=function(m){var T,F;function N(_,I,b){return m.call(this,function(j,Y,$){return typeof y=="string"?y:y(j,Y,$)}(_,I,b))||this}return F=m,(T=N).prototype=Object.create(F.prototype),T.prototype.constructor=T,T.__proto__=F,N}(v);D.prototype.name=v.name,D.prototype.code=C,g[C]=D}function U(C,y){if(Array.isArray(C)){var v=C.length;return C=C.map(function(D){return String(D)}),v>2?"one of ".concat(y," ").concat(C.slice(0,v-1).join(", "),", or ")+C[v-1]:v===2?"one of ".concat(y," ").concat(C[0]," or ").concat(C[1]):"of ".concat(y," ").concat(C[0])}return"of ".concat(y," ").concat(String(C))}A("ERR_INVALID_OPT_VALUE",function(C,y){return'The value "'+y+'" is invalid for option "'+C+'"'},TypeError),A("ERR_INVALID_ARG_TYPE",function(C,y,v){var D,m,T,F,N;if(typeof y=="string"&&(m="not ",y.substr(0,m.length)===m)?(D="must not be",y=y.replace(/^not /,"")):D="must be",function(I,b,j){return(j===void 0||j>I.length)&&(j=I.length),I.substring(j-b.length,j)===b}(C," argument"))T="The ".concat(C," ").concat(D," ").concat(U(y,"type"));else{var _=(typeof N!="number"&&(N=0),N+1>(F=C).length||F.indexOf(".",N)===-1?"argument":"property");T='The "'.concat(C,'" ').concat(_," ").concat(D," ").concat(U(y,"type"))}return T+". Received type ".concat(typeof v)},TypeError),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),A("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),A("ERR_STREAM_PREMATURE_CLOSE","Premature close"),A("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),A("ERR_STREAM_WRITE_AFTER_END","write after end"),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),R.exports.q=g},6138:function(R,g,A){var U=Object.keys||function(_){var I=[];for(var b in _)I.push(b);return I};R.exports=T;var C=A(2846),y=A(8318);A(1765)(T,C);for(var v=U(y.prototype),D=0;D<v.length;D++){var m=v[D];T.prototype[m]||(T.prototype[m]=y.prototype[m])}function T(_){if(!(this instanceof T))return new T(_);C.call(this,_),y.call(this,_),this.allowHalfOpen=!0,_&&(_.readable===!1&&(this.readable=!1),_.writable===!1&&(this.writable=!1),_.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",F)))}function F(){this._writableState.ended||process.nextTick(N,this)}function N(_){_.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=_,this._writableState.destroyed=_)}})},5472:function(R,g,A){R.exports=C;var U=A(9798);function C(y){if(!(this instanceof C))return new C(y);U.call(this,y)}A(1765)(C,U),C.prototype._transform=function(y,v,D){D(null,y)}},2846:function(R,g,A){var U;R.exports=ge,ge.ReadableState=oe,A(1159).EventEmitter;var C,y=function(Ce,re){return Ce.listeners(re).length},v=A(9299),D=A(1549).Buffer,m=A.g.Uint8Array||function(){},T=A(964);C=T&&T.debuglog?T.debuglog("stream"):function(){};var F,N,_,I=A(8393),b=A(6163),j=A(7269).getHighWaterMark,Y=A(3690).q,$=Y.ERR_INVALID_ARG_TYPE,W=Y.ERR_STREAM_PUSH_AFTER_EOF,ue=Y.ERR_METHOD_NOT_IMPLEMENTED,x=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;A(1765)(ge,v);var X=b.errorOrDestroy,fe=["error","close","destroy","pause","resume"];function oe(Ce,re,je){U=U||A(6138),Ce=Ce||{},typeof je!="boolean"&&(je=re instanceof U),this.objectMode=!!Ce.objectMode,je&&(this.objectMode=this.objectMode||!!Ce.readableObjectMode),this.highWaterMark=j(this,Ce,"readableHighWaterMark",je),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ce.emitClose!==!1,this.autoDestroy=!!Ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ce.encoding&&(F||(F=A(7503).s),this.decoder=new F(Ce.encoding),this.encoding=Ce.encoding)}function ge(Ce){if(U=U||A(6138),!(this instanceof ge))return new ge(Ce);var re=this instanceof U;this._readableState=new oe(Ce,this,re),this.readable=!0,Ce&&(typeof Ce.read=="function"&&(this._read=Ce.read),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy)),v.call(this)}function Re(Ce,re,je,O,M){C("readableAddChunk",re);var q,K=Ce._readableState;if(re===null)K.reading=!1,function(_e,de){if(C("onEofChunk"),!de.ended){if(de.decoder){var Ke=de.decoder.end();Ke&&Ke.length&&(de.buffer.push(Ke),de.length+=de.objectMode?1:Ke.length)}de.ended=!0,de.sync?ot(_e):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,st(_e)))}}(Ce,K);else if(M||(q=function(_e,de){var Ke,St;return St=de,D.isBuffer(St)||St instanceof m||typeof de=="string"||de===void 0||_e.objectMode||(Ke=new $("chunk",["string","Buffer","Uint8Array"],de)),Ke}(K,re)),q)X(Ce,q);else if(K.objectMode||re&&re.length>0)if(typeof re=="string"||K.objectMode||Object.getPrototypeOf(re)===D.prototype||(re=function(_e){return D.from(_e)}(re)),O)K.endEmitted?X(Ce,new x):Je(Ce,K,re,!0);else if(K.ended)X(Ce,new W);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!je?(re=K.decoder.write(re),K.objectMode||re.length!==0?Je(Ce,K,re,!1):Ie(Ce,K)):Je(Ce,K,re,!1)}else O||(K.reading=!1,Ie(Ce,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function Je(Ce,re,je,O){re.flowing&&re.length===0&&!re.sync?(re.awaitDrain=0,Ce.emit("data",je)):(re.length+=re.objectMode?1:je.length,O?re.buffer.unshift(je):re.buffer.push(je),re.needReadable&&ot(Ce)),Ie(Ce,re)}Object.defineProperty(ge.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ce){this._readableState&&(this._readableState.destroyed=Ce)}}),ge.prototype.destroy=b.destroy,ge.prototype._undestroy=b.undestroy,ge.prototype._destroy=function(Ce,re){re(Ce)},ge.prototype.push=function(Ce,re){var je,O=this._readableState;return O.objectMode?je=!0:typeof Ce=="string"&&((re=re||O.defaultEncoding)!==O.encoding&&(Ce=D.from(Ce,re),re=""),je=!0),Re(this,Ce,re,!1,je)},ge.prototype.unshift=function(Ce){return Re(this,Ce,null,!0,!1)},ge.prototype.isPaused=function(){return this._readableState.flowing===!1},ge.prototype.setEncoding=function(Ce){F||(F=A(7503).s);var re=new F(Ce);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;for(var je=this._readableState.buffer.head,O="";je!==null;)O+=re.write(je.data),je=je.next;return this._readableState.buffer.clear(),O!==""&&this._readableState.buffer.push(O),this._readableState.length=O.length,this};var Se=1073741824;function Be(Ce,re){return Ce<=0||re.length===0&&re.ended?0:re.objectMode?1:Ce!=Ce?re.flowing&&re.length?re.buffer.head.data.length:re.length:(Ce>re.highWaterMark&&(re.highWaterMark=function(je){return je>=Se?je=Se:(je--,je|=je>>>1,je|=je>>>2,je|=je>>>4,je|=je>>>8,je|=je>>>16,je++),je}(Ce)),Ce<=re.length?Ce:re.ended?re.length:(re.needReadable=!0,0))}function ot(Ce){var re=Ce._readableState;C("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(C("emitReadable",re.flowing),re.emittedReadable=!0,process.nextTick(st,Ce))}function st(Ce){var re=Ce._readableState;C("emitReadable_",re.destroyed,re.length,re.ended),re.destroyed||!re.length&&!re.ended||(Ce.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,rt(Ce)}function Ie(Ce,re){re.readingMore||(re.readingMore=!0,process.nextTick(Ye,Ce,re))}function Ye(Ce,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&re.length===0);){var je=re.length;if(C("maybeReadMore read 0"),Ce.read(0),je===re.length)break}re.readingMore=!1}function mt(Ce){var re=Ce._readableState;re.readableListening=Ce.listenerCount("readable")>0,re.resumeScheduled&&!re.paused?re.flowing=!0:Ce.listenerCount("data")>0&&Ce.resume()}function Me(Ce){C("readable nexttick read 0"),Ce.read(0)}function We(Ce,re){C("resume",re.reading),re.reading||Ce.read(0),re.resumeScheduled=!1,Ce.emit("resume"),rt(Ce),re.flowing&&!re.reading&&Ce.read(0)}function rt(Ce){var re=Ce._readableState;for(C("flow",re.flowing);re.flowing&&Ce.read()!==null;);}function qt(Ce,re){return re.length===0?null:(re.objectMode?je=re.buffer.shift():!Ce||Ce>=re.length?(je=re.decoder?re.buffer.join(""):re.buffer.length===1?re.buffer.first():re.buffer.concat(re.length),re.buffer.clear()):je=re.buffer.consume(Ce,re.decoder),je);var je}function kt(Ce){var re=Ce._readableState;C("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,process.nextTick(ft,re,Ce))}function ft(Ce,re){if(C("endReadableNT",Ce.endEmitted,Ce.length),!Ce.endEmitted&&Ce.length===0&&(Ce.endEmitted=!0,re.readable=!1,re.emit("end"),Ce.autoDestroy)){var je=re._writableState;(!je||je.autoDestroy&&je.finished)&&re.destroy()}}function At(Ce,re){for(var je=0,O=Ce.length;je<O;je++)if(Ce[je]===re)return je;return-1}ge.prototype.read=function(Ce){C("read",Ce),Ce=parseInt(Ce,10);var re=this._readableState,je=Ce;if(Ce!==0&&(re.emittedReadable=!1),Ce===0&&re.needReadable&&((re.highWaterMark!==0?re.length>=re.highWaterMark:re.length>0)||re.ended))return C("read: emitReadable",re.length,re.ended),re.length===0&&re.ended?kt(this):ot(this),null;if((Ce=Be(Ce,re))===0&&re.ended)return re.length===0&&kt(this),null;var O,M=re.needReadable;return C("need readable",M),(re.length===0||re.length-Ce<re.highWaterMark)&&C("length less than watermark",M=!0),re.ended||re.reading?C("reading or ended",M=!1):M&&(C("do read"),re.reading=!0,re.sync=!0,re.length===0&&(re.needReadable=!0),this._read(re.highWaterMark),re.sync=!1,re.reading||(Ce=Be(je,re))),(O=Ce>0?qt(Ce,re):null)===null?(re.needReadable=re.length<=re.highWaterMark,Ce=0):(re.length-=Ce,re.awaitDrain=0),re.length===0&&(re.ended||(re.needReadable=!0),je!==Ce&&re.ended&&kt(this)),O!==null&&this.emit("data",O),O},ge.prototype._read=function(Ce){X(this,new ue("_read()"))},ge.prototype.pipe=function(Ce,re){var je=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=Ce;break;case 1:O.pipes=[O.pipes,Ce];break;default:O.pipes.push(Ce)}O.pipesCount+=1,C("pipe count=%d opts=%j",O.pipesCount,re);var M=re&&re.end===!1||Ce===process.stdout||Ce===process.stderr?at:q;function q(){C("onend"),Ce.end()}O.endEmitted?process.nextTick(M):je.once("end",M),Ce.on("unpipe",function tt(dt,Et){C("onunpipe"),dt===je&&Et&&Et.hasUnpiped===!1&&(Et.hasUnpiped=!0,C("cleanup"),Ce.removeListener("close",St),Ce.removeListener("finish",ut),Ce.removeListener("drain",K),Ce.removeListener("error",Ke),Ce.removeListener("unpipe",tt),je.removeListener("end",q),je.removeListener("end",at),je.removeListener("data",de),_e=!0,!O.awaitDrain||Ce._writableState&&!Ce._writableState.needDrain||K())});var K=function(tt){return function(){var dt=tt._readableState;C("pipeOnDrain",dt.awaitDrain),dt.awaitDrain&&dt.awaitDrain--,dt.awaitDrain===0&&y(tt,"data")&&(dt.flowing=!0,rt(tt))}}(je);Ce.on("drain",K);var _e=!1;function de(tt){C("ondata");var dt=Ce.write(tt);C("dest.write",dt),dt===!1&&((O.pipesCount===1&&O.pipes===Ce||O.pipesCount>1&&At(O.pipes,Ce)!==-1)&&!_e&&(C("false write response, pause",O.awaitDrain),O.awaitDrain++),je.pause())}function Ke(tt){C("onerror",tt),at(),Ce.removeListener("error",Ke),y(Ce,"error")===0&&X(Ce,tt)}function St(){Ce.removeListener("finish",ut),at()}function ut(){C("onfinish"),Ce.removeListener("close",St),at()}function at(){C("unpipe"),je.unpipe(Ce)}return je.on("data",de),function(tt,dt,Et){if(typeof tt.prependListener=="function")return tt.prependListener(dt,Et);tt._events&&tt._events[dt]?Array.isArray(tt._events[dt])?tt._events[dt].unshift(Et):tt._events[dt]=[Et,tt._events[dt]]:tt.on(dt,Et)}(Ce,"error",Ke),Ce.once("close",St),Ce.once("finish",ut),Ce.emit("pipe",je),O.flowing||(C("pipe resume"),je.resume()),Ce},ge.prototype.unpipe=function(Ce){var re=this._readableState,je={hasUnpiped:!1};if(re.pipesCount===0)return this;if(re.pipesCount===1)return Ce&&Ce!==re.pipes||(Ce||(Ce=re.pipes),re.pipes=null,re.pipesCount=0,re.flowing=!1,Ce&&Ce.emit("unpipe",this,je)),this;if(!Ce){var O=re.pipes,M=re.pipesCount;re.pipes=null,re.pipesCount=0,re.flowing=!1;for(var q=0;q<M;q++)O[q].emit("unpipe",this,{hasUnpiped:!1});return this}var K=At(re.pipes,Ce);return K===-1||(re.pipes.splice(K,1),re.pipesCount-=1,re.pipesCount===1&&(re.pipes=re.pipes[0]),Ce.emit("unpipe",this,je)),this},ge.prototype.on=function(Ce,re){var je=v.prototype.on.call(this,Ce,re),O=this._readableState;return Ce==="data"?(O.readableListening=this.listenerCount("readable")>0,O.flowing!==!1&&this.resume()):Ce==="readable"&&(O.endEmitted||O.readableListening||(O.readableListening=O.needReadable=!0,O.flowing=!1,O.emittedReadable=!1,C("on readable",O.length,O.reading),O.length?ot(this):O.reading||process.nextTick(Me,this))),je},ge.prototype.addListener=ge.prototype.on,ge.prototype.removeListener=function(Ce,re){var je=v.prototype.removeListener.call(this,Ce,re);return Ce==="readable"&&process.nextTick(mt,this),je},ge.prototype.removeAllListeners=function(Ce){var re=v.prototype.removeAllListeners.apply(this,arguments);return Ce!=="readable"&&Ce!==void 0||process.nextTick(mt,this),re},ge.prototype.resume=function(){var Ce=this._readableState;return Ce.flowing||(C("resume"),Ce.flowing=!Ce.readableListening,function(re,je){je.resumeScheduled||(je.resumeScheduled=!0,process.nextTick(We,re,je))}(this,Ce)),Ce.paused=!1,this},ge.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ge.prototype.wrap=function(Ce){var re=this,je=this._readableState,O=!1;for(var M in Ce.on("end",function(){if(C("wrapped end"),je.decoder&&!je.ended){var K=je.decoder.end();K&&K.length&&re.push(K)}re.push(null)}),Ce.on("data",function(K){C("wrapped data"),je.decoder&&(K=je.decoder.write(K)),je.objectMode&&K==null||(je.objectMode||K&&K.length)&&(re.push(K)||(O=!0,Ce.pause()))}),Ce)this[M]===void 0&&typeof Ce[M]=="function"&&(this[M]=function(K){return function(){return Ce[K].apply(Ce,arguments)}}(M));for(var q=0;q<fe.length;q++)Ce.on(fe[q],this.emit.bind(this,fe[q]));return this._read=function(K){C("wrapped _read",K),O&&(O=!1,Ce.resume())},this},typeof Symbol=="function"&&(ge.prototype[Symbol.asyncIterator]=function(){return N===void 0&&(N=A(7299)),N(this)}),Object.defineProperty(ge.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ge.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ge.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ce){this._readableState&&(this._readableState.flowing=Ce)}}),ge._fromList=qt,Object.defineProperty(ge.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ge.from=function(Ce,re){return _===void 0&&(_=A(6233)),_(ge,Ce,re)})},9798:function(R,g,A){R.exports=F;var U=A(3690).q,C=U.ERR_METHOD_NOT_IMPLEMENTED,y=U.ERR_MULTIPLE_CALLBACK,v=U.ERR_TRANSFORM_ALREADY_TRANSFORMING,D=U.ERR_TRANSFORM_WITH_LENGTH_0,m=A(6138);function T(I,b){var j=this._transformState;j.transforming=!1;var Y=j.writecb;if(Y===null)return this.emit("error",new y);j.writechunk=null,j.writecb=null,b!=null&&this.push(b),Y(I);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function F(I){if(!(this instanceof F))return new F(I);m.call(this,I),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",N)}function N(){var I=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(b,j){_(I,b,j)})}function _(I,b,j){if(b)return I.emit("error",b);if(j!=null&&I.push(j),I._writableState.length)throw new D;if(I._transformState.transforming)throw new v;return I.push(null)}A(1765)(F,m),F.prototype.push=function(I,b){return this._transformState.needTransform=!1,m.prototype.push.call(this,I,b)},F.prototype._transform=function(I,b,j){j(new C("_transform()"))},F.prototype._write=function(I,b,j){var Y=this._transformState;if(Y.writecb=j,Y.writechunk=I,Y.writeencoding=b,!Y.transforming){var $=this._readableState;(Y.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}},F.prototype._read=function(I){var b=this._transformState;b.writechunk===null||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},F.prototype._destroy=function(I,b){m.prototype._destroy.call(this,I,function(j){b(j)})}},8318:function(R,g,A){function U(Ie){var Ye=this;this.next=null,this.entry=null,this.finish=function(){(function(mt,Me,We){var rt=mt.entry;for(mt.entry=null;rt;){var qt=rt.callback;Me.pendingcb--,qt(void 0),rt=rt.next}Me.corkedRequestsFree.next=mt})(Ye,Ie)}}var C;R.exports=ge,ge.WritableState=oe;var y,v={deprecate:A(7839)},D=A(9299),m=A(1549).Buffer,T=A.g.Uint8Array||function(){},F=A(6163),N=A(7269).getHighWaterMark,_=A(3690).q,I=_.ERR_INVALID_ARG_TYPE,b=_.ERR_METHOD_NOT_IMPLEMENTED,j=_.ERR_MULTIPLE_CALLBACK,Y=_.ERR_STREAM_CANNOT_PIPE,$=_.ERR_STREAM_DESTROYED,W=_.ERR_STREAM_NULL_VALUES,ue=_.ERR_STREAM_WRITE_AFTER_END,x=_.ERR_UNKNOWN_ENCODING,X=F.errorOrDestroy;function fe(){}function oe(Ie,Ye,mt){C=C||A(6138),Ie=Ie||{},typeof mt!="boolean"&&(mt=Ye instanceof C),this.objectMode=!!Ie.objectMode,mt&&(this.objectMode=this.objectMode||!!Ie.writableObjectMode),this.highWaterMark=N(this,Ie,"writableHighWaterMark",mt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Me=Ie.decodeStrings===!1;this.decodeStrings=!Me,this.defaultEncoding=Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(We){(function(rt,qt){var kt=rt._writableState,ft=kt.sync,At=kt.writecb;if(typeof At!="function")throw new j;if(function(re){re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0}(kt),qt)(function(re,je,O,M,q){--je.pendingcb,O?(process.nextTick(q,M),process.nextTick(st,re,je),re._writableState.errorEmitted=!0,X(re,M)):(q(M),re._writableState.errorEmitted=!0,X(re,M),st(re,je))})(rt,kt,ft,qt,At);else{var Ce=Be(kt)||rt.destroyed;Ce||kt.corked||kt.bufferProcessing||!kt.bufferedRequest||Se(rt,kt),ft?process.nextTick(Je,rt,kt,Ce,At):Je(rt,kt,Ce,At)}})(Ye,We)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ie.emitClose!==!1,this.autoDestroy=!!Ie.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new U(this)}function ge(Ie){var Ye=this instanceof(C=C||A(6138));if(!Ye&&!y.call(ge,this))return new ge(Ie);this._writableState=new oe(Ie,this,Ye),this.writable=!0,Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final)),D.call(this)}function Re(Ie,Ye,mt,Me,We,rt,qt){Ye.writelen=Me,Ye.writecb=qt,Ye.writing=!0,Ye.sync=!0,Ye.destroyed?Ye.onwrite(new $("write")):mt?Ie._writev(We,Ye.onwrite):Ie._write(We,rt,Ye.onwrite),Ye.sync=!1}function Je(Ie,Ye,mt,Me){mt||function(We,rt){rt.length===0&&rt.needDrain&&(rt.needDrain=!1,We.emit("drain"))}(Ie,Ye),Ye.pendingcb--,Me(),st(Ie,Ye)}function Se(Ie,Ye){Ye.bufferProcessing=!0;var mt=Ye.bufferedRequest;if(Ie._writev&&mt&&mt.next){var Me=Ye.bufferedRequestCount,We=new Array(Me),rt=Ye.corkedRequestsFree;rt.entry=mt;for(var qt=0,kt=!0;mt;)We[qt]=mt,mt.isBuf||(kt=!1),mt=mt.next,qt+=1;We.allBuffers=kt,Re(Ie,Ye,!0,Ye.length,We,"",rt.finish),Ye.pendingcb++,Ye.lastBufferedRequest=null,rt.next?(Ye.corkedRequestsFree=rt.next,rt.next=null):Ye.corkedRequestsFree=new U(Ye),Ye.bufferedRequestCount=0}else{for(;mt;){var ft=mt.chunk,At=mt.encoding,Ce=mt.callback;if(Re(Ie,Ye,!1,Ye.objectMode?1:ft.length,ft,At,Ce),mt=mt.next,Ye.bufferedRequestCount--,Ye.writing)break}mt===null&&(Ye.lastBufferedRequest=null)}Ye.bufferedRequest=mt,Ye.bufferProcessing=!1}function Be(Ie){return Ie.ending&&Ie.length===0&&Ie.bufferedRequest===null&&!Ie.finished&&!Ie.writing}function ot(Ie,Ye){Ie._final(function(mt){Ye.pendingcb--,mt&&X(Ie,mt),Ye.prefinished=!0,Ie.emit("prefinish"),st(Ie,Ye)})}function st(Ie,Ye){var mt=Be(Ye);if(mt&&(function(We,rt){rt.prefinished||rt.finalCalled||(typeof We._final!="function"||rt.destroyed?(rt.prefinished=!0,We.emit("prefinish")):(rt.pendingcb++,rt.finalCalled=!0,process.nextTick(ot,We,rt)))}(Ie,Ye),Ye.pendingcb===0&&(Ye.finished=!0,Ie.emit("finish"),Ye.autoDestroy))){var Me=Ie._readableState;(!Me||Me.autoDestroy&&Me.endEmitted)&&Ie.destroy()}return mt}A(1765)(ge,D),oe.prototype.getBuffer=function(){for(var Ie=this.bufferedRequest,Ye=[];Ie;)Ye.push(Ie),Ie=Ie.next;return Ye},function(){try{Object.defineProperty(oe.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Ie){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(ge,Symbol.hasInstance,{value:function(Ie){return!!y.call(this,Ie)||this===ge&&Ie&&Ie._writableState instanceof oe}})):y=function(Ie){return Ie instanceof this},ge.prototype.pipe=function(){X(this,new Y)},ge.prototype.write=function(Ie,Ye,mt){var Me,We=this._writableState,rt=!1,qt=!We.objectMode&&(Me=Ie,m.isBuffer(Me)||Me instanceof T);return qt&&!m.isBuffer(Ie)&&(Ie=function(kt){return m.from(kt)}(Ie)),typeof Ye=="function"&&(mt=Ye,Ye=null),qt?Ye="buffer":Ye||(Ye=We.defaultEncoding),typeof mt!="function"&&(mt=fe),We.ending?function(kt,ft){var At=new ue;X(kt,At),process.nextTick(ft,At)}(this,mt):(qt||function(kt,ft,At,Ce){var re;return At===null?re=new W:typeof At=="string"||ft.objectMode||(re=new I("chunk",["string","Buffer"],At)),!re||(X(kt,re),process.nextTick(Ce,re),!1)}(this,We,Ie,mt))&&(We.pendingcb++,rt=function(kt,ft,At,Ce,re,je){if(!At){var O=function(_e,de,Ke){return _e.objectMode||_e.decodeStrings===!1||typeof de!="string"||(de=m.from(de,Ke)),de}(ft,Ce,re);Ce!==O&&(At=!0,re="buffer",Ce=O)}var M=ft.objectMode?1:Ce.length;ft.length+=M;var q=ft.length<ft.highWaterMark;if(q||(ft.needDrain=!0),ft.writing||ft.corked){var K=ft.lastBufferedRequest;ft.lastBufferedRequest={chunk:Ce,encoding:re,isBuf:At,callback:je,next:null},K?K.next=ft.lastBufferedRequest:ft.bufferedRequest=ft.lastBufferedRequest,ft.bufferedRequestCount+=1}else Re(kt,ft,!1,M,Ce,re,je);return q}(this,We,qt,Ie,Ye,mt)),rt},ge.prototype.cork=function(){this._writableState.corked++},ge.prototype.uncork=function(){var Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||Ie.corked||Ie.bufferProcessing||!Ie.bufferedRequest||Se(this,Ie))},ge.prototype.setDefaultEncoding=function(Ie){if(typeof Ie=="string"&&(Ie=Ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ie+"").toLowerCase())>-1))throw new x(Ie);return this._writableState.defaultEncoding=Ie,this},Object.defineProperty(ge.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ge.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ge.prototype._write=function(Ie,Ye,mt){mt(new b("_write()"))},ge.prototype._writev=null,ge.prototype.end=function(Ie,Ye,mt){var Me=this._writableState;return typeof Ie=="function"?(mt=Ie,Ie=null,Ye=null):typeof Ye=="function"&&(mt=Ye,Ye=null),Ie!=null&&this.write(Ie,Ye),Me.corked&&(Me.corked=1,this.uncork()),Me.ending||function(We,rt,qt){rt.ending=!0,st(We,rt),qt&&(rt.finished?process.nextTick(qt):We.once("finish",qt)),rt.ended=!0,We.writable=!1}(this,Me,mt),this},Object.defineProperty(ge.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ge.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Ie){this._writableState&&(this._writableState.destroyed=Ie)}}),ge.prototype.destroy=F.destroy,ge.prototype._undestroy=F.undestroy,ge.prototype._destroy=function(Ie,Ye){Ye(Ie)}},7299:function(R,g,A){var U;function C(W,ue,x){return ue in W?Object.defineProperty(W,ue,{value:x,enumerable:!0,configurable:!0,writable:!0}):W[ue]=x,W}var y=A(8800),v=Symbol("lastResolve"),D=Symbol("lastReject"),m=Symbol("error"),T=Symbol("ended"),F=Symbol("lastPromise"),N=Symbol("handlePromise"),_=Symbol("stream");function I(W,ue){return{value:W,done:ue}}function b(W){var ue=W[v];if(ue!==null){var x=W[_].read();x!==null&&(W[F]=null,W[v]=null,W[D]=null,ue(I(x,!1)))}}function j(W){process.nextTick(b,W)}var Y=Object.getPrototypeOf(function(){}),$=Object.setPrototypeOf((C(U={get stream(){return this[_]},next:function(){var W=this,ue=this[m];if(ue!==null)return Promise.reject(ue);if(this[T])return Promise.resolve(I(void 0,!0));if(this[_].destroyed)return new Promise(function(oe,ge){process.nextTick(function(){W[m]?ge(W[m]):oe(I(void 0,!0))})});var x,X=this[F];if(X)x=new Promise(function(oe,ge){return function(Re,Je){oe.then(function(){ge[T]?Re(I(void 0,!0)):ge[N](Re,Je)},Je)}}(X,this));else{var fe=this[_].read();if(fe!==null)return Promise.resolve(I(fe,!1));x=new Promise(this[N])}return this[F]=x,x}},Symbol.asyncIterator,function(){return this}),C(U,"return",function(){var W=this;return new Promise(function(ue,x){W[_].destroy(null,function(X){X?x(X):ue(I(void 0,!0))})})}),U),Y);R.exports=function(W){var ue,x=Object.create($,(C(ue={},_,{value:W,writable:!0}),C(ue,v,{value:null,writable:!0}),C(ue,D,{value:null,writable:!0}),C(ue,m,{value:null,writable:!0}),C(ue,T,{value:W._readableState.endEmitted,writable:!0}),C(ue,N,{value:function(X,fe){var oe=x[_].read();oe?(x[F]=null,x[v]=null,x[D]=null,X(I(oe,!1))):(x[v]=X,x[D]=fe)},writable:!0}),ue));return x[F]=null,y(W,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var fe=x[D];return fe!==null&&(x[F]=null,x[v]=null,x[D]=null,fe(X)),void(x[m]=X)}var oe=x[v];oe!==null&&(x[F]=null,x[v]=null,x[D]=null,oe(I(void 0,!0))),x[T]=!0}),W.on("readable",j.bind(null,x)),x}},8393:function(R,g,A){function U(T,F){var N=Object.keys(T);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(T);F&&(_=_.filter(function(I){return Object.getOwnPropertyDescriptor(T,I).enumerable})),N.push.apply(N,_)}return N}function C(T,F,N){return F in T?Object.defineProperty(T,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):T[F]=N,T}function y(T,F){for(var N=0;N<F.length;N++){var _=F[N];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(T,_.key,_)}}var v=A(1549).Buffer,D=A(9862).inspect,m=D&&D.custom||"inspect";R.exports=function(){function T(){(function(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")})(this,T),this.head=null,this.tail=null,this.length=0}var F,N;return F=T,N=[{key:"push",value:function(_){var I={data:_,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(_){var I={data:_,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var I=this.head,b=""+I.data;I=I.next;)b+=_+I.data;return b}},{key:"concat",value:function(_){if(this.length===0)return v.alloc(0);for(var I,b,j,Y=v.allocUnsafe(_>>>0),$=this.head,W=0;$;)I=$.data,b=Y,j=W,v.prototype.copy.call(I,b,j),W+=$.data.length,$=$.next;return Y}},{key:"consume",value:function(_,I){var b;return _<this.head.data.length?(b=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):b=_===this.head.data.length?this.shift():I?this._getString(_):this._getBuffer(_),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var I=this.head,b=1,j=I.data;for(_-=j.length;I=I.next;){var Y=I.data,$=_>Y.length?Y.length:_;if($===Y.length?j+=Y:j+=Y.slice(0,_),(_-=$)==0){$===Y.length?(++b,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=Y.slice($));break}++b}return this.length-=b,j}},{key:"_getBuffer",value:function(_){var I=v.allocUnsafe(_),b=this.head,j=1;for(b.data.copy(I),_-=b.data.length;b=b.next;){var Y=b.data,$=_>Y.length?Y.length:_;if(Y.copy(I,I.length-_,0,$),(_-=$)==0){$===Y.length?(++j,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=Y.slice($));break}++j}return this.length-=j,I}},{key:m,value:function(_,I){return D(this,function(b){for(var j=1;j<arguments.length;j++){var Y=arguments[j]!=null?arguments[j]:{};j%2?U(Object(Y),!0).forEach(function($){C(b,$,Y[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(Y)):U(Object(Y)).forEach(function($){Object.defineProperty(b,$,Object.getOwnPropertyDescriptor(Y,$))})}return b}({},I,{depth:0,customInspect:!1}))}}],N&&y(F.prototype,N),T}()},6163:function(R){function g(C,y){U(C,y),A(C)}function A(C){C._writableState&&!C._writableState.emitClose||C._readableState&&!C._readableState.emitClose||C.emit("close")}function U(C,y){C.emit("error",y)}R.exports={destroy:function(C,y){var v=this,D=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return D||m?(y?y(C):C&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(U,this,C)):process.nextTick(U,this,C)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(C||null,function(T){!y&&T?v._writableState?v._writableState.errorEmitted?process.nextTick(A,v):(v._writableState.errorEmitted=!0,process.nextTick(g,v,T)):process.nextTick(g,v,T):y?(process.nextTick(A,v),y(T)):process.nextTick(A,v)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(C,y){var v=C._readableState,D=C._writableState;v&&v.autoDestroy||D&&D.autoDestroy?C.destroy(y):C.emit("error",y)}}},8800:function(R,g,A){var U=A(3690).q.ERR_STREAM_PREMATURE_CLOSE;function C(){}R.exports=function y(v,D,m){if(typeof D=="function")return y(v,null,D);D||(D={}),m=function(ue){var x=!1;return function(){if(!x){x=!0;for(var X=arguments.length,fe=new Array(X),oe=0;oe<X;oe++)fe[oe]=arguments[oe];ue.apply(this,fe)}}}(m||C);var T=D.readable||D.readable!==!1&&v.readable,F=D.writable||D.writable!==!1&&v.writable,N=function(){v.writable||I()},_=v._writableState&&v._writableState.finished,I=function(){F=!1,_=!0,T||m.call(v)},b=v._readableState&&v._readableState.endEmitted,j=function(){T=!1,b=!0,F||m.call(v)},Y=function(ue){m.call(v,ue)},$=function(){var ue;return T&&!b?(v._readableState&&v._readableState.ended||(ue=new U),m.call(v,ue)):F&&!_?(v._writableState&&v._writableState.ended||(ue=new U),m.call(v,ue)):void 0},W=function(){v.req.on("finish",I)};return function(ue){return ue.setHeader&&typeof ue.abort=="function"}(v)?(v.on("complete",I),v.on("abort",$),v.req?W():v.on("request",W)):F&&!v._writableState&&(v.on("end",N),v.on("close",N)),v.on("end",j),v.on("finish",I),D.error!==!1&&v.on("error",Y),v.on("close",$),function(){v.removeListener("complete",I),v.removeListener("abort",$),v.removeListener("request",W),v.req&&v.req.removeListener("finish",I),v.removeListener("end",N),v.removeListener("close",N),v.removeListener("finish",I),v.removeListener("end",j),v.removeListener("error",Y),v.removeListener("close",$)}}},6233:function(R){R.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(R,g,A){var U,C=A(3690).q,y=C.ERR_MISSING_ARGS,v=C.ERR_STREAM_DESTROYED;function D(_){if(_)throw _}function m(_,I,b,j){j=function(W){var ue=!1;return function(){ue||(ue=!0,W.apply(void 0,arguments))}}(j);var Y=!1;_.on("close",function(){Y=!0}),U===void 0&&(U=A(8800)),U(_,{readable:I,writable:b},function(W){if(W)return j(W);Y=!0,j()});var $=!1;return function(W){if(!Y&&!$)return $=!0,function(ue){return ue.setHeader&&typeof ue.abort=="function"}(_)?_.abort():typeof _.destroy=="function"?_.destroy():void j(W||new v("pipe"))}}function T(_){_()}function F(_,I){return _.pipe(I)}function N(_){return _.length?typeof _[_.length-1]!="function"?D:_.pop():D}R.exports=function(){for(var _=arguments.length,I=new Array(_),b=0;b<_;b++)I[b]=arguments[b];var j,Y=N(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new y("streams");var $=I.map(function(W,ue){var x=ue<I.length-1;return m(W,x,ue>0,function(X){j||(j=X),X&&$.forEach(T),x||($.forEach(T),Y(j))})});return I.reduce(F)}},7269:function(R,g,A){var U=A(3690).q.ERR_INVALID_OPT_VALUE;R.exports={getHighWaterMark:function(C,y,v,D){var m=function(T,F,N){return T.highWaterMark!=null?T.highWaterMark:F?T[N]:null}(y,D,v);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new U(D?v:"highWaterMark",m);return Math.floor(m)}return C.objectMode?16:16384}}},9299:function(R,g,A){R.exports=A(1159).EventEmitter},7503:function(R,g,A){var U=A(8387).Buffer,C=U.isEncoding||function(b){switch((b=""+b)&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(b){var j;switch(this.encoding=function(Y){var $=function(W){if(!W)return"utf8";for(var ue;;)switch(W){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return W;default:if(ue)return;W=(""+W).toLowerCase(),ue=!0}}(Y);if(typeof $!="string"&&(U.isEncoding===C||!C(Y)))throw new Error("Unknown encoding: "+Y);return $||Y}(b),this.encoding){case"utf16le":this.text=m,this.end=T,j=4;break;case"utf8":this.fillLast=D,j=4;break;case"base64":this.text=F,this.end=N,j=3;break;default:return this.write=_,void(this.end=I)}this.lastNeed=0,this.lastTotal=0,this.lastChar=U.allocUnsafe(j)}function v(b){return b<=127?0:b>>5==6?2:b>>4==14?3:b>>3==30?4:b>>6==2?-1:-2}function D(b){var j=this.lastTotal-this.lastNeed,Y=function($,W,ue){if((192&W[0])!=128)return $.lastNeed=0,"�";if($.lastNeed>1&&W.length>1){if((192&W[1])!=128)return $.lastNeed=1,"�";if($.lastNeed>2&&W.length>2&&(192&W[2])!=128)return $.lastNeed=2,"�"}}(this,b);return Y!==void 0?Y:this.lastNeed<=b.length?(b.copy(this.lastChar,j,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(b.copy(this.lastChar,j,0,b.length),void(this.lastNeed-=b.length))}function m(b,j){if((b.length-j)%2==0){var Y=b.toString("utf16le",j);if(Y){var $=Y.charCodeAt(Y.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],Y.slice(0,-1)}return Y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",j,b.length-1)}function T(b){var j=b&&b.length?this.write(b):"";if(this.lastNeed){var Y=this.lastTotal-this.lastNeed;return j+this.lastChar.toString("utf16le",0,Y)}return j}function F(b,j){var Y=(b.length-j)%3;return Y===0?b.toString("base64",j):(this.lastNeed=3-Y,this.lastTotal=3,Y===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",j,b.length-Y))}function N(b){var j=b&&b.length?this.write(b):"";return this.lastNeed?j+this.lastChar.toString("base64",0,3-this.lastNeed):j}function _(b){return b.toString(this.encoding)}function I(b){return b&&b.length?this.write(b):""}g.s=y,y.prototype.write=function(b){if(b.length===0)return"";var j,Y;if(this.lastNeed){if((j=this.fillLast(b))===void 0)return"";Y=this.lastNeed,this.lastNeed=0}else Y=0;return Y<b.length?j?j+this.text(b,Y):this.text(b,Y):j||""},y.prototype.end=function(b){var j=b&&b.length?this.write(b):"";return this.lastNeed?j+"�":j},y.prototype.text=function(b,j){var Y=function(W,ue,x){var X=ue.length-1;if(X<x)return 0;var fe=v(ue[X]);return fe>=0?(fe>0&&(W.lastNeed=fe-1),fe):--X<x||fe===-2?0:(fe=v(ue[X]))>=0?(fe>0&&(W.lastNeed=fe-2),fe):--X<x||fe===-2?0:(fe=v(ue[X]))>=0?(fe>0&&(fe===2?fe=0:W.lastNeed=fe-3),fe):0}(this,b,j);if(!this.lastNeed)return b.toString("utf8",j);this.lastTotal=Y;var $=b.length-(Y-this.lastNeed);return b.copy(this.lastChar,0,$),b.toString("utf8",j,$)},y.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length}},1067:function(R,g,A){var U;(function(C,y){var v="function",D="undefined",m="object",T="string",F="major",N="model",_="name",I="type",b="vendor",j="version",Y="architecture",$="console",W="mobile",ue="tablet",x="smarttv",X="wearable",fe="embedded",oe="Amazon",ge="Apple",Re="ASUS",Je="BlackBerry",Se="Browser",Be="Chrome",ot="Firefox",st="Google",Ie="Huawei",Ye="LG",mt="Microsoft",Me="Motorola",We="Opera",rt="Samsung",qt="Sharp",kt="Sony",ft="Xiaomi",At="Zebra",Ce="Facebook",re="Chromium OS",je="Mac OS",O=function(dt){for(var Et={},Tt=0;Tt<dt.length;Tt++)Et[dt[Tt].toUpperCase()]=dt[Tt];return Et},M=function(dt,Et){return typeof dt===T&&q(Et).indexOf(q(dt))!==-1},q=function(dt){return dt.toLowerCase()},K=function(dt,Et){if(typeof dt===T)return dt=dt.replace(/^\s\s*/,""),typeof Et===D?dt:dt.substring(0,500)},_e=function(dt,Et){for(var Tt,Rt,hn,Qt,nn,Ot,Un=0;Un<Et.length&&!nn;){var gr=Et[Un],Or=Et[Un+1];for(Tt=Rt=0;Tt<gr.length&&!nn&&gr[Tt];)if(nn=gr[Tt++].exec(dt))for(hn=0;hn<Or.length;hn++)Ot=nn[++Rt],typeof(Qt=Or[hn])===m&&Qt.length>0?Qt.length===2?typeof Qt[1]==v?this[Qt[0]]=Qt[1].call(this,Ot):this[Qt[0]]=Qt[1]:Qt.length===3?typeof Qt[1]!==v||Qt[1].exec&&Qt[1].test?this[Qt[0]]=Ot?Ot.replace(Qt[1],Qt[2]):y:this[Qt[0]]=Ot?Qt[1].call(this,Ot,Qt[2]):y:Qt.length===4&&(this[Qt[0]]=Ot?Qt[3].call(this,Ot.replace(Qt[1],Qt[2])):y):this[Qt]=Ot||y;Un+=2}},de=function(dt,Et){for(var Tt in Et)if(typeof Et[Tt]===m&&Et[Tt].length>0){for(var Rt=0;Rt<Et[Tt].length;Rt++)if(M(Et[Tt][Rt],dt))return Tt==="?"?y:Tt}else if(M(Et[Tt],dt))return Tt==="?"?y:Tt;return dt},Ke={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},St={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[j,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[j,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,j],[/opios[\/ ]+([\w\.]+)/i],[j,[_,We+" Mini"]],[/\bopr\/([\w\.]+)/i],[j,[_,We]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[j,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,j],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[j,[_,"UC"+Se]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[j,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[j,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[j,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[j,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[j,[_,"Smart Lenovo "+Se]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Se],j],[/\bfocus\/([\w\.]+)/i],[j,[_,ot+" Focus"]],[/\bopt\/([\w\.]+)/i],[j,[_,We+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[j,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[j,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[j,[_,We+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[j,[_,"MIUI "+Se]],[/fxios\/([-\w\.]+)/i],[j,[_,ot]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Se]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Se],j],[/samsungbrowser\/([\w\.]+)/i],[j,[_,rt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],j],[/metasr[\/ ]?([\d\.]+)/i],[j,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],j],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,j],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Ce],j],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,j],[/\bgsa\/([\w\.]+) .*safari\//i],[j,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[j,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[j,[_,Be+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,Be+" WebView"],j],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[j,[_,"Android "+Se]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,j],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[j,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[j,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[j,de,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[_,j],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],j],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[j,[_,ot+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,j],[/(cobalt)\/([\w\.]+)/i],[_,[j,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Y,"amd64"]],[/(ia32(?=;))/i],[[Y,q]],[/((?:i[346]|x)86)[;\)]/i],[[Y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Y,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[Y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Y,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[N,[b,rt],[I,ue]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[N,[b,rt],[I,W]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[N,[b,ge],[I,W]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[N,[b,ge],[I,ue]],[/(macintosh);/i],[N,[b,ge]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[N,[b,qt],[I,W]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[N,[b,Ie],[I,ue]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[N,[b,Ie],[I,W]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[N,/_/g," "],[b,ft],[I,W]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[N,/_/g," "],[b,ft],[I,ue]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[N,[b,"OPPO"],[I,W]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[N,[b,"Vivo"],[I,W]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[N,[b,"Realme"],[I,W]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[N,[b,Me],[I,W]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[N,[b,Me],[I,ue]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[N,[b,Ye],[I,ue]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[N,[b,Ye],[I,W]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[N,[b,"Lenovo"],[I,ue]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[N,/_/g," "],[b,"Nokia"],[I,W]],[/(pixel c)\b/i],[N,[b,st],[I,ue]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[N,[b,st],[I,W]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[N,[b,kt],[I,W]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[N,"Xperia Tablet"],[b,kt],[I,ue]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[N,[b,"OnePlus"],[I,W]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[N,[b,oe],[I,ue]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[N,/(.+)/g,"Fire Phone $1"],[b,oe],[I,W]],[/(playbook);[-\w\),; ]+(rim)/i],[N,b,[I,ue]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[N,[b,Je],[I,W]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[N,[b,Re],[I,ue]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[N,[b,Re],[I,W]],[/(nexus 9)/i],[N,[b,"HTC"],[I,ue]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[b,[N,/_/g," "],[I,W]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[N,[b,"Acer"],[I,ue]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[N,[b,"Meizu"],[I,W]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[N,[b,"Ulefone"],[I,W]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[b,N,[I,W]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[b,N,[I,ue]],[/(surface duo)/i],[N,[b,mt],[I,ue]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[N,[b,"Fairphone"],[I,W]],[/(u304aa)/i],[N,[b,"AT&T"],[I,W]],[/\bsie-(\w*)/i],[N,[b,"Siemens"],[I,W]],[/\b(rct\w+) b/i],[N,[b,"RCA"],[I,ue]],[/\b(venue[\d ]{2,7}) b/i],[N,[b,"Dell"],[I,ue]],[/\b(q(?:mv|ta)\w+) b/i],[N,[b,"Verizon"],[I,ue]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[N,[b,"Barnes & Noble"],[I,ue]],[/\b(tm\d{3}\w+) b/i],[N,[b,"NuVision"],[I,ue]],[/\b(k88) b/i],[N,[b,"ZTE"],[I,ue]],[/\b(nx\d{3}j) b/i],[N,[b,"ZTE"],[I,W]],[/\b(gen\d{3}) b.+49h/i],[N,[b,"Swiss"],[I,W]],[/\b(zur\d{3}) b/i],[N,[b,"Swiss"],[I,ue]],[/\b((zeki)?tb.*\b) b/i],[N,[b,"Zeki"],[I,ue]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[b,"Dragon Touch"],N,[I,ue]],[/\b(ns-?\w{0,9}) b/i],[N,[b,"Insignia"],[I,ue]],[/\b((nxa|next)-?\w{0,9}) b/i],[N,[b,"NextBook"],[I,ue]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[b,"Voice"],N,[I,W]],[/\b(lvtel\-)?(v1[12]) b/i],[[b,"LvTel"],N,[I,W]],[/\b(ph-1) /i],[N,[b,"Essential"],[I,W]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[N,[b,"Envizen"],[I,ue]],[/\b(trio[-\w\. ]+) b/i],[N,[b,"MachSpeed"],[I,ue]],[/\btu_(1491) b/i],[N,[b,"Rotor"],[I,ue]],[/(shield[\w ]+) b/i],[N,[b,"Nvidia"],[I,ue]],[/(sprint) (\w+)/i],[b,N,[I,W]],[/(kin\.[onetw]{3})/i],[[N,/\./g," "],[b,mt],[I,W]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[N,[b,At],[I,ue]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[N,[b,At],[I,W]],[/smart-tv.+(samsung)/i],[b,[I,x]],[/hbbtv.+maple;(\d+)/i],[[N,/^/,"SmartTV"],[b,rt],[I,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[b,Ye],[I,x]],[/(apple) ?tv/i],[b,[N,ge+" TV"],[I,x]],[/crkey/i],[[N,Be+"cast"],[b,st],[I,x]],[/droid.+aft(\w+)( bui|\))/i],[N,[b,oe],[I,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[N,[b,qt],[I,x]],[/(bravia[\w ]+)( bui|\))/i],[N,[b,kt],[I,x]],[/(mitv-\w{5}) bui/i],[N,[b,ft],[I,x]],[/Hbbtv.*(technisat) (.*);/i],[b,N,[I,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[b,K],[N,K],[I,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[I,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[b,N,[I,$]],[/droid.+; (shield) bui/i],[N,[b,"Nvidia"],[I,$]],[/(playstation [345portablevi]+)/i],[N,[b,kt],[I,$]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[N,[b,mt],[I,$]],[/((pebble))app/i],[b,N,[I,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[N,[b,ge],[I,X]],[/droid.+; (glass) \d/i],[N,[b,st],[I,X]],[/droid.+; (wt63?0{2,3})\)/i],[N,[b,At],[I,X]],[/(quest( 2| pro)?)/i],[N,[b,Ce],[I,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[b,[I,fe]],[/(aeobc)\b/i],[N,[b,oe],[I,fe]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[N,[I,W]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[N,[I,ue]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[I,ue]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[I,W]],[/(android[-\w\. ]{0,9});.+buil/i],[N,[b,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[j,[_,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[j,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,j],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[j,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,j],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[j,de,Ke]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[j,de,Ke],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[j,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,je],[j,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[j,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,j],[/\(bb(10);/i],[j,[_,Je]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[j,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[j,[_,ot+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[j,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[j,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[j,[_,Be+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,re],j],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,j],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],j],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,j]]},ut=function(dt,Et){if(typeof dt===m&&(Et=dt,dt=y),!(this instanceof ut))return new ut(dt,Et).getResult();var Tt=typeof C!==D&&C.navigator?C.navigator:y,Rt=dt||(Tt&&Tt.userAgent?Tt.userAgent:""),hn=Tt&&Tt.userAgentData?Tt.userAgentData:y,Qt=Et?function(Ot,Un){var gr={};for(var Or in Ot)Un[Or]&&Un[Or].length%2==0?gr[Or]=Un[Or].concat(Ot[Or]):gr[Or]=Ot[Or];return gr}(St,Et):St,nn=Tt&&Tt.userAgent==Rt;return this.getBrowser=function(){var Ot,Un={};return Un[_]=y,Un[j]=y,_e.call(Un,Rt,Qt.browser),Un[F]=typeof(Ot=Un[j])===T?Ot.replace(/[^\d\.]/g,"").split(".")[0]:y,nn&&Tt&&Tt.brave&&typeof Tt.brave.isBrave==v&&(Un[_]="Brave"),Un},this.getCPU=function(){var Ot={};return Ot[Y]=y,_e.call(Ot,Rt,Qt.cpu),Ot},this.getDevice=function(){var Ot={};return Ot[b]=y,Ot[N]=y,Ot[I]=y,_e.call(Ot,Rt,Qt.device),nn&&!Ot[I]&&hn&&hn.mobile&&(Ot[I]=W),nn&&Ot[N]=="Macintosh"&&Tt&&typeof Tt.standalone!==D&&Tt.maxTouchPoints&&Tt.maxTouchPoints>2&&(Ot[N]="iPad",Ot[I]=ue),Ot},this.getEngine=function(){var Ot={};return Ot[_]=y,Ot[j]=y,_e.call(Ot,Rt,Qt.engine),Ot},this.getOS=function(){var Ot={};return Ot[_]=y,Ot[j]=y,_e.call(Ot,Rt,Qt.os),nn&&!Ot[_]&&hn&&hn.platform!="Unknown"&&(Ot[_]=hn.platform.replace(/chrome os/i,re).replace(/macos/i,je)),Ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Rt},this.setUA=function(Ot){return Rt=typeof Ot===T&&Ot.length>500?K(Ot,500):Ot,this},this.setUA(Rt),this};ut.VERSION="1.0.37",ut.BROWSER=O([_,j,F]),ut.CPU=O([Y]),ut.DEVICE=O([N,b,I,$,W,x,ue,X,fe]),ut.ENGINE=ut.OS=O([_,j]),typeof g!==D?(R.exports&&(g=R.exports=ut),g.UAParser=ut):A.amdO?(U=(function(){return ut}).call(g,A,g,R))===y||(R.exports=U):typeof C!==D&&(C.UAParser=ut);var at=typeof C!==D&&(C.jQuery||C.Zepto);if(at&&!at.ua){var tt=new ut;at.ua=tt.getResult(),at.ua.get=function(){return tt.getUA()},at.ua.set=function(dt){tt.setUA(dt);var Et=tt.getResult();for(var Tt in Et)at.ua[Tt]=Et[Tt]}}})(typeof window=="object"?window:this)},7839:function(R,g,A){function U(C){try{if(!A.g.localStorage)return!1}catch(v){return!1}var y=A.g.localStorage[C];return y!=null&&String(y).toLowerCase()==="true"}R.exports=function(C,y){if(U("noDeprecation"))return C;var v=!1;return function(){if(!v){if(U("throwDeprecation"))throw new Error(y);U("traceDeprecation")?console.trace(y):console.warn(y),v=!0}return C.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(R){R.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(R){R.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(R){R.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(R){R.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(R){R.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(R){R.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},d={};function p(R){var g=d[R];if(g!==void 0)return g.exports;var A=d[R]={exports:{}};return l[R].call(A.exports,A,A.exports,p),A.exports}p.amdO={},p.n=function(R){var g=R&&R.__esModule?function(){return R.default}:function(){return R};return p.d(g,{a:g}),g},p.d=function(R,g){for(var A in g)p.o(g,A)&&!p.o(R,A)&&Object.defineProperty(R,A,{enumerable:!0,get:g[A]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(R){if(typeof window=="object")return window}}(),p.o=function(R,g){return Object.prototype.hasOwnProperty.call(R,g)};var w={};return function(){p.d(w,{default:function(){return m}}),p(8416);var R,g=p(1715),A=p(8080),U=p(1737),C=p(1139),y=function(){var T,F="application/dash+xml";function N(I,b,j){if(!I||!/^VIDEO$/i.test(I.nodeName))return null;if(I._dashjs_player)return I._dashjs_player;var Y,$=I.id||I.name||"video element";if(!(b=b||[].slice.call(I.querySelectorAll("source")).filter(function(W){return W.type==F})[0])&&I.src)(b=document.createElement("source")).src=I.src;else if(!b&&!I.src)return null;return j=j||{},(Y=(0,C.Z)(j).create()).initialize(I,b.src,I.autoplay),T||(T=Y.getDebug().getLogger()),T.debug("Converted "+$+" to dash.js player and added content: "+b.src),I._dashjs_player=Y,Y}function _(I){return/^VIDEO$/i.test(I.nodeName)?I:_(I.parentNode)}return{create:N,createAll:function(I,b){var j=[];I=I||"[data-dashjs-player]";for(var Y=(b=b||document).querySelectorAll(I),$=0;$<Y.length;$++){var W=N(Y[$],null);j.push(W)}for(var ue=b.querySelectorAll('source[type="'+F+'"]'),x=0;x<ue.length;x++){var X=N(_(ue[x]),null);j.push(X)}return j}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?y.createAll():R=window.setInterval(function(){window.dashjs&&(window.clearInterval(R),y.createAll())},500):window.addEventListener("load",function T(){window.removeEventListener("load",T),y.createAll()}));var v=y,D=p(6398);dashjs.Protection=U.default,dashjs.MetricsReporting=A.default,dashjs.MediaPlayerFactory=v,dashjs.Debug=D.Z,dashjs.supportsMediaSource=g.B;var m=dashjs}(),w.default}()})})(AU);var KV=AU.exports;const VV=pb(KV);var Iu,Gi,CA,RA,hg={};hg.d=(o,i)=>{for(var l in i)hg.o(i,l)&&!hg.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:i[l]})},hg.o=(o,i)=>Object.prototype.hasOwnProperty.call(o,i);var lE={};function Qk(o,i){(i==null||i>o.length)&&(i=o.length);for(var l=0,d=Array(i);l<i;l++)d[l]=o[l];return d}function Xi(o){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{},d=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(l).filter(function(p){return Object.getOwnPropertyDescriptor(l,p).enumerable}))),d.forEach(function(p){var w;w=l[p],p in o?Object.defineProperty(o,p,{value:w,enumerable:!0,configurable:!0,writable:!0}):o[p]=w})}return o}function so(o,i){return i=i!=null?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(l,d){var p=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);p.push.apply(p,w)}return p}(Object(i)).forEach(function(l){Object.defineProperty(o,l,Object.getOwnPropertyDescriptor(i,l))}),o}function Jk(o,i){return function(l){if(Array.isArray(l))return l}(o)||function(l,d){var p,w,R=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(R!=null){var g=[],A=!0,U=!1;try{for(R=R.call(l);!(A=(p=R.next()).done)&&(g.push(p.value),!d||g.length!==d);A=!0);}catch(C){U=!0,w=C}finally{try{A||R.return==null||R.return()}finally{if(U)throw w}}return g}}(o,i)||function(l,d){if(l){if(typeof l=="string")return Qk(l,d);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(p);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Qk(l,d)}}(o,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}hg.d(lE,{GP:()=>CA,fZ:()=>YV,vn:()=>RA}),(Iu=CA||(CA={})).LOADED="loaded",Iu.SEEKING="seeking",Iu.SEEKED="seeked",Iu.BUFFERING="buffering",Iu.BUFFERED="buffered",Iu.PLAY="play",Iu.PLAYING="playing",Iu.PAUSE="pause",Iu.ENDED="ended",Iu.TIME_UPDATE="timeupdate",(Gi=RA||(RA={})).loadstart="loadstart",Gi.progress="progress",Gi.suspend="suspend",Gi.abort="abort",Gi.error="error",Gi.emptied="emptied",Gi.stalled="stalled",Gi.loadedmetadata="loadedmetadata",Gi.loadeddata="loadeddata",Gi.canplay="canplay",Gi.canplaythrough="canplaythrough",Gi.playing="playing",Gi.waiting="waiting",Gi.seeking="seeking",Gi.seeked="seeked",Gi.ended="ended",Gi.durationchange="durationchange",Gi.timeupdate="timeupdate",Gi.play="play",Gi.pause="pause",Gi.ratechange="ratechange",Gi.resize="resize",Gi.volumechange="volumechange";var zV={paused:!1,ended:!1,loading:!0,buffering:!1,seeking:!1,initialPlayFired:!1,deferLoadedEvent:!1,deferPlayingEvent:!1,deferSeekedEvent:!1,playRequested:!1},YV=function(o){var i=o.mediaElement,l=o.callback,d=o.allowResumeAfterEnded,p=d!==void 0&&d,w=null,R=function(){typeof w=="number"&&clearTimeout(w)},g=Xi({},zV),A=function(){return p?g.loading:g.loading||g.ended},U=function(){!g.loading&&g.buffering&&i.playbackRate>0&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),g.loading&&(i.playbackRate===0?g=so(Xi({},g),{deferLoadedEvent:!0}):(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded")))},C=function(){A()||(g.ended&&(g.ended=!1),g.buffering&&l("buffered"),g=so(Xi({},g),{seeking:!0,buffering:!1}),l("seeking"))},y=function(){if(!A()&&g.seeking){if(i.playbackRate===0){g=so(Xi({},g),{deferSeekedEvent:!0});return}g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")}},v=function(){if(R(),!A()&&!g.seeking){if(i.seeking){C();return}g.buffering||(g=so(Xi({},g),{buffering:!0}),l("buffering"))}},D=function(){if(R(),i.playbackRate===0){g=so(Xi({},g),{deferPlayingEvent:!0});return}(g=so(Xi({},g),{deferPlayingEvent:!1})).loading&&U(),g.initialPlayFired?g.buffering?(g=so(Xi({},g),{buffering:!1}),l("buffered")):g.seeking&&(g=so(Xi({},g),{seeking:!1,deferSeekedEvent:!1}),l("seeked")):(g=so(Xi({},g),{initialPlayFired:!0,paused:!1,playRequested:!1}),l("playing")),g.paused&&g.playRequested&&(g=so(Xi({},g),{paused:!1,playRequested:!1}),l("playing"))},m=function(){return!g.seeking&&!g.buffering&&i.playbackRate===0&&!i.seeking},T=[["canplaythrough",U],["playing",D],["waiting",v],["seeking",C],["seeked",y],["ended",function(){g=so(Xi({},g),{ended:!0,buffering:!1,seeking:!1,loading:!1,paused:!0}),R(),l("ended")}],["timeupdate",function(){A()||(g.buffering&&!i.paused&&(g=so(Xi({},g),{buffering:!1}),l("buffered")),l("timeupdate"))}],["play",function(){!A()&&g.paused&&g.initialPlayFired&&(g=so(Xi({},g),{playRequested:!0}),l("play"))}],["pause",function(){!i.ended&&(g.playRequested||!g.paused)&&((g=so(Xi({},g),{playRequested:!1})).deferLoadedEvent?(g=so(Xi({},g),{loading:!1,deferLoadedEvent:!1}),l("loaded"),i.paused&&(g=so(Xi({},g),{paused:!0}),l("pause"))):(g=so(Xi({},g),{paused:!0}),l("pause")))}],["ratechange",function(){R();var F=i.playbackRate>0;g.deferLoadedEvent&&F&&U(),g.deferSeekedEvent&&F&&y(),g.deferPlayingEvent&&F&&D(),!A()&&(m()?w=window.setTimeout(function(){m()&&v()},50):g.buffering&&F&&(g=so(Xi({},g),{buffering:!1}),l("buffered")))}]];return T.forEach(function(F){var N=Jk(F,2),_=N[0],I=N[1];return i.addEventListener(_,I)}),{teardown:function(){R(),T.forEach(function(F){var N=Jk(F,2),_=N[0],I=N[1];return i.removeEventListener(_,I)})}}},bu=lE.GP;lE.vn;var WV=lE.fZ;const $V={NEAR_END:"nearend"};class IU extends wf{constructor(i){var l;super(),this.options=i,this.hasEmittedNearEnd=!1,this.video=this.options.element,this.video.muted=!!this.options.muted,this.nearEndThreshold=(l=this.options.nearEndThreshold)!=null?l:10,this.setupMediaEventFilter()}createBaseEventPayload(i){return{currentTime:i.currentTime,timeStamp:Date.now()}}setupMediaEventFilter(){this.eventFilter&&(this.eventFilter.teardown(),this.eventFilter=void 0),this.eventFilter=WV({mediaElement:this.options.element,allowResumeAfterEnded:!0,callback:i=>{const l=this.createBaseEventPayload(this.video);switch(i){case bu.LOADED:{this.emit("loaded",l);break}case bu.SEEKING:{this.emit("seeking",l);break}case bu.SEEKED:{this.emit("seeked",l);break}case bu.BUFFERING:{this.emit("buffering",l);break}case bu.BUFFERED:{this.emit("buffered",l);break}case bu.PLAY:{this.emit("play",l);break}case bu.PLAYING:{this.emit("playing",l);break}case bu.PAUSE:{this.emit("pause",l);break}case bu.ENDED:{this.emit("ended",l);break}case bu.TIME_UPDATE:{const d=this.video.duration-this.video.currentTime;this.hasEmittedNearEnd&&d>this.nearEndThreshold&&(this.hasEmittedNearEnd=!1),!this.hasEmittedNearEnd&&d<=this.nearEndThreshold&&(this.hasEmittedNearEnd=!0,this.emit($V.NEAR_END,{...l,remainingTime:d})),this.emit("timeupdate",l);break}}}})}destroy(){var i;(i=this.eventFilter)==null||i.teardown()}getStats(){const i=this.options.element.getVideoPlaybackQuality();return{droppedVideoFrames:i.droppedVideoFrames,totalVideoFrames:i.totalVideoFrames}}}class XV extends Error{constructor(i,l){super(i),this.rawError=l}}class QV extends IU{constructor(i){var d,p;super(i),this.name="DashJSEngine",this.player=VV.MediaPlayer().create(),this.options.policyQuery&&this.options.policyQuery.startsWith("?")&&this.player.extend("RequestModifier",function(){return{modifyRequestURL:function(w){return w+i.policyQuery}}},!0);const l={"com.widevine.alpha":{serverURL:(d=this.options)==null?void 0:d.widevineLicenseUrl,httpRequestHeaders:i.customLicenceRequestHeaders,priority:0,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}};this.player.updateSettings({streaming:{cacheInitSegments:!0,abr:{initialBitrate:{video:4e7},minBitrate:{video:4e6}},protection:{keepProtectionMediaKeys:this.options.keepProtectionData!==!1},buffer:{stableBufferTime:12,bufferToKeep:6}}}),this.player.initialize(this.options.element,void 0,(p=this.options.autoPlay)!=null?p:!1,void 0),this.options.widevineLicenseUrl&&this.player.setProtectionData(l)}destroy(){this.player.destroy(),super.destroy()}async load(i,l){this.setupMediaEventFilter(),await new Promise((d,p)=>{var w;this.once("loaded",()=>{d()});try{this.player.attachSource(i,Math.max((w=l==null?void 0:l.startTimeSeconds)!=null?w:0,0))}catch(R){p(new XV("UnknownError",R))}})}}var bU={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(o){(function(){var i=typeof window<"u"?window:tu,l={};(function(p,w,R){var g;function A(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var U=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof p=="object"&&p,typeof self=="object"&&self,typeof w=="object"&&w];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=C(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var u=e[r];if(!(u in n))break e;n=n[u]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&U(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(c){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(c||"")+"_"+u++,c)}function n(c,f){this.g=c,U(this,"description",{configurable:!0,writable:!0,value:f})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&U(r.prototype,e,{configurable:!0,writable:!0,value:function(){return D(A(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:A(e)}}function T(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var F=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},N;if(typeof Object.setPrototypeOf=="function")N=Object.setPrototypeOf;else{var _;e:{var I={a:!0},b={};try{b.__proto__=I,_=b.a;break e}catch(e){}_=!1}N=_?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var j=N;function Y(e,t){if(e.prototype=F(t.prototype),e.prototype.constructor=e,j)j(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Ij=t.prototype}function $(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function W(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}$.prototype.s=function(e){this.h=e};function ue(e,t){e.i={Yf:t,jg:!0},e.g=e.m||e.j}$.prototype.return=function(e){this.i={return:e},this.g=this.j};function x(e,t,n){return e.g=n,{value:t}}$.prototype.u=function(e){this.g=e};function X(e){e.g=0}function fe(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function ge(e,t,n){e.g=t,e.m=n||0}function Re(e,t){return e.m=t||0,t=e.i.Yf,e.i=null,t}function Je(e){e.A=[e.i],e.m=0,e.j=0}function Se(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.jg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function Be(e){this.g=new $,this.h=e}function ot(e,t){W(e.g);var n=e.g.l;return n?st(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),Ie(e))}function st(e,t,n,r){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var c=u.value}catch(f){return e.g.l=null,ue(e.g,f),Ie(e)}return e.g.l=null,r.call(e.g,c),Ie(e)}function Ie(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,ue(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.jg)throw t.Yf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Ye(e){this.next=function(t){return W(e.g),e.g.l?t=st(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Ie(e)),t},this.throw=function(t){return W(e.g),e.g.l?t=st(e,e.g.l.throw,t,e.g.s):(ue(e.g,t),t=Ie(e)),t},this.return=function(t){return ot(e,t)},this[Symbol.iterator]=function(){return this}}function mt(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,u){function c(f){f.done?r(f.value):Promise.resolve(f.value).then(t,n).then(c,u)}c(e.next())})}function Me(e){return mt(new Ye(new Be(e)))}function We(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(f){this.h=0,this.i=void 0,this.g=[],this.o=!1;var h=this.j();try{f(h.resolve,h.reject)}catch(E){h.reject(E)}}function n(){this.g=null}function r(f){return f instanceof t?f:new t(function(h){h(f)})}if(e)return e;n.prototype.h=function(f){if(this.g==null){this.g=[];var h=this;this.i(function(){h.l()})}this.g.push(f)};var u=y.setTimeout;n.prototype.i=function(f){u(f,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var h=0;h<f.length;++h){var E=f[h];f[h]=null;try{E()}catch(S){this.j(S)}}}this.g=null},n.prototype.j=function(f){this.i(function(){throw f})},t.prototype.j=function(){function f(S){return function(k){E||(E=!0,S.call(h,k))}}var h=this,E=!1;return{resolve:f(this.F),reject:f(this.l)}},t.prototype.F=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof t)this.H(f);else{e:switch(typeof f){case"object":var h=f!=null;break e;case"function":h=!0;break e;default:h=!1}h?this.C(f):this.m(f)}},t.prototype.C=function(f){var h=void 0;try{h=f.then}catch(E){this.l(E);return}typeof h=="function"?this.I(h,f):this.m(f)},t.prototype.l=function(f){this.s(2,f)},t.prototype.m=function(f){this.s(1,f)},t.prototype.s=function(f,h){if(this.h!=0)throw Error("Cannot settle("+f+", "+h+"): Promise already settled in state"+this.h);this.h=f,this.i=h,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var f=this;u(function(){if(f.B()){var h=y.console;typeof h<"u"&&h.error(f.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var f=y.CustomEvent,h=y.Event,E=y.dispatchEvent;return typeof E>"u"?!0:(typeof f=="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof h=="function"?f=new h("unhandledrejection",{cancelable:!0}):(f=y.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f)),f.promise=this,f.reason=this.i,E(f))},t.prototype.A=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)c.h(this.g[f]);this.g=null}};var c=new n;return t.prototype.H=function(f){var h=this.j();f.Fd(h.resolve,h.reject)},t.prototype.I=function(f,h){var E=this.j();try{f.call(h,E.resolve,E.reject)}catch(S){E.reject(S)}},t.prototype.then=function(f,h){function E(te,z){return typeof te=="function"?function(ve){try{S(te(ve))}catch(Le){k(Le)}}:z}var S,k,G=new t(function(te,z){S=te,k=z});return this.Fd(E(f,S),E(h,k)),G},t.prototype.catch=function(f){return this.then(void 0,f)},t.prototype.Fd=function(f,h){function E(){switch(S.h){case 1:f(S.i);break;case 2:h(S.i);break;default:throw Error("Unexpected state: "+S.h)}}var S=this;this.g==null?c.h(E):this.g.push(E),this.o=!0},t.resolve=r,t.reject=function(f){return new t(function(h,E){E(f)})},t.race=function(f){return new t(function(h,E){for(var S=m(f),k=S.next();!k.done;k=S.next())r(k.value).Fd(h,E)})},t.all=function(f){var h=m(f),E=h.next();return E.done?r([]):new t(function(S,k){function G(ve){return function(Le){te[ve]=Le,z--,z==0&&S(te)}}var te=[],z=0;do te.push(void 0),z++,r(E.value).Fd(G(te.length-1),k),E=h.next();while(!E.done)})},t});function rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(E){if(this.g=(h+=Math.random()+1).toString(),E){E=m(E);for(var S;!(S=E.next()).done;)S=S.value,this.set(S[0],S[1])}}function n(){}function r(E){var S=typeof E;return S==="object"&&E!==null||S==="function"}function u(E){if(!rt(E,f)){var S=new n;U(E,f,{value:S})}}function c(E){var S=Object[E];S&&(Object[E]=function(k){return k instanceof n?k:(Object.isExtensible(k)&&u(k),S(k))})}if(function(){if(!e||!Object.seal)return!1;try{var E=Object.seal({}),S=Object.seal({}),k=new e([[E,2],[S,3]]);return k.get(E)!=2||k.get(S)!=3?!1:(k.delete(E),k.set(S,4),!k.has(E)&&k.get(S)==4)}catch(G){return!1}}())return e;var f="$jscomp_hidden_"+Math.random();c("freeze"),c("preventExtensions"),c("seal");var h=0;return t.prototype.set=function(E,S){if(!r(E))throw Error("Invalid WeakMap key");if(u(E),!rt(E,f))throw Error("WeakMap key fail: "+E);return E[f][this.g]=S,this},t.prototype.get=function(E){return r(E)&&rt(E,f)?E[f][this.g]:void 0},t.prototype.has=function(E){return r(E)&&rt(E,f)&&rt(E[f],this.g)},t.prototype.delete=function(E){return r(E)&&rt(E,f)&&rt(E[f],this.g)?delete E[f][this.g]:!1},t}),v("Map",function(e){function t(){var h={};return h.Ab=h.next=h.head=h}function n(h,E){var S=h.g;return D(function(){if(S){for(;S.head!=h.g;)S=S.Ab;for(;S.next!=S.head;)return S=S.next,{done:!1,value:E(S)};S=null}return{done:!0,value:void 0}})}function r(h,E){var S=E&&typeof E;S=="object"||S=="function"?c.has(E)?S=c.get(E):(S=""+ ++f,c.set(E,S)):S="p_"+E;var k=h.h[S];if(k&&rt(h.h,S))for(h=0;h<k.length;h++){var G=k[h];if(E!==E&&G.key!==G.key||E===G.key)return{id:S,list:k,index:h,entry:G}}return{id:S,list:k,index:-1,entry:void 0}}function u(h){if(this.h={},this.g=t(),this.size=0,h){h=m(h);for(var E;!(E=h.next()).done;)E=E.value,this.set(E[0],E[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var h=Object.seal({x:4}),E=new e(m([[h,"s"]]));if(E.get(h)!="s"||E.size!=1||E.get({x:4})||E.set({x:4},"t")!=E||E.size!=2)return!1;var S=E.entries(),k=S.next();return k.done||k.value[0]!=h||k.value[1]!="s"?!1:(k=S.next(),!(k.done||k.value[0].x!=4||k.value[1]!="t"||!S.next().done))}catch(G){return!1}}())return e;var c=new WeakMap;u.prototype.set=function(h,E){h=h===0?0:h;var S=r(this,h);return S.list||(S.list=this.h[S.id]=[]),S.entry?S.entry.value=E:(S.entry={next:this.g,Ab:this.g.Ab,head:this.g,key:h,value:E},S.list.push(S.entry),this.g.Ab.next=S.entry,this.g.Ab=S.entry,this.size++),this},u.prototype.delete=function(h){return h=r(this,h),h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.h[h.id],h.entry.Ab.next=h.entry.next,h.entry.next.Ab=h.entry.Ab,h.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this.h={},this.g=this.g.Ab=t(),this.size=0},u.prototype.has=function(h){return!!r(this,h).entry},u.prototype.get=function(h){return(h=r(this,h).entry)&&h.value},u.prototype.entries=function(){return n(this,function(h){return[h.key,h.value]})},u.prototype.keys=function(){return n(this,function(h){return h.key})},u.prototype.values=function(){return n(this,function(h){return h.value})},u.prototype.forEach=function(h,E){for(var S=this.entries(),k;!(k=S.next()).done;)k=k.value,h.call(E,k[1],k[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var f=0;return u}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(m([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var u=r.entries(),c=u.next();return c.done||c.value[0]!=n||c.value[1]!=n?!1:(c=u.next(),c.done||c.value[0]==n||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:u.next().done)}catch(f){return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var u=this;this.g.forEach(function(c){return n.call(r,c,c,u)})},t)});function qt(e,t){e instanceof String&&(e+="");var n=0,r=!1,u={next:function(){if(!r&&n<e.length){var c=n++;return{value:t(c,e[c]),done:!1}}return r=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}v("Array.prototype.keys",function(e){return e||function(){return qt(this,function(t){return t})}});function kt(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,u=0;u<r;u++){var c=e[u];if(t.call(n,c,u,e))return{gg:u,v:c}}return{gg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return kt(this,t,n).gg}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var u=r.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var c=r[n];if(c===t||Object.is(c,t))return!0}return!1}});function ft(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return ft(this,t,"includes").indexOf(t,n||0)!==-1}}),v("Array.prototype.find",function(e){return e||function(t,n){return kt(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var r=ft(this,t,"startsWith"),u=r.length,c=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var f=0;f<c&&n<u;)if(r[n++]!=t[f++])return!1;return f>=c}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(r)?!1:(u.delete(n),u.add(r),!u.has(n)&&u.has(r))}catch(c){return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),v("Array.from",function(e){return e||function(t,n,r){n=n!=null?n:function(h){return h};var u=[],c=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof c=="function"){t=c.call(t);for(var f=0;!(c=t.next()).done;)u.push(n.call(r,c.value,f++))}else for(c=t.length,f=0;f<c;f++)u.push(n.call(r,t[f],f));return u}});var At=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var u in r)rt(r,u)&&(e[u]=r[u])}return e};v("Object.assign",function(e){return e||At}),v("Array.prototype.values",function(e){return e||function(){return qt(this,function(t,n){return n})}}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return qt(this,function(t,n){return[t,n]})}}),v("String.prototype.repeat",function(e){return e||function(t){var n=ft(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)rt(t,r)&&n.push(t[r]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)rt(t,r)&&n.push([r,t[r]]);return n}});var Ce=this||self;function re(e,t){e=e.split(".");var n=Ce;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function je(){}function O(){}function M(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}M.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function q(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new M(2),this.j=new M(5),this.g=0,this.i=128e3,this.l=16e3}K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};function _e(){}function de(){}function Ke(){}function St(e){var t=We.apply(1,arguments);dt.has(e)||(dt.add(e),Ke.apply(_e,T(t)))}function ut(){}function at(){}function tt(){}var dt=new Set;p.console&&(Ke=function(){return console.warn.apply(console,T(We.apply(0,arguments)))},de=function(){console.error.apply(console,T(We.apply(0,arguments)))});function Et(){this.g={}}g=Et.prototype,g.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},g.get=function(e){return(e=this.g[e])?e.slice():null},g.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},g.forEach=function(e){for(var t in this.g)e(t,this.g[t])},g.size=function(){return Object.keys(this.g).length},g.keys=function(){return Object.keys(this.g)};function Tt(){this.g=new Et}g=Tt.prototype,g.release=function(){this.ib(),this.g=null},g.D=function(e,t,n,r){this.g&&(e=new Rt(e,t,n,r),this.g.push(t,e))},g.na=function(e,t,n,r){function u(f){c.Kb(e,t,u),n(f)}var c=this;this.D(e,t,u,r)},g.Kb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Kb(),this.g.remove(t,u))}},g.ib=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,T(e.g[n]));for(e=m(t),t=e.next();!t.done;t=e.next())t.value.Kb();this.g.g={}}},re("shaka.util.EventManager",Tt),Tt.prototype.removeAll=Tt.prototype.ib,Tt.prototype.unlisten=Tt.prototype.Kb,Tt.prototype.listenOnce=Tt.prototype.na,Tt.prototype.listen=Tt.prototype.D,Tt.prototype.release=Tt.prototype.release;function Rt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=hn(e,r),this.target.addEventListener(t,n,this.g)}Rt.prototype.Kb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function hn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Qt(e)?t:t.capture||!1}function Qt(e){var t=nn;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(u){t=!1}nn=t}return t||!1}var nn=void 0;function Ot(e){if(gr.has(e))return gr.get(e);if(p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return gr.set(e,t),t}return p.MediaSource?(t=MediaSource.isTypeSupported(e),gr.set(e,t),t):!1}function Un(){return!!p.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var gr=new Map;function Or(e,t){this.g=e,this.h=t}Or.prototype.toString=function(){return"v"+this.g+"."+this.h};function dr(e,t){var n=new Or(5,0),r=Lr,u=r.g,c=n.h-u.h;(0<(n.g-u.g||c)?r.i:r.h)(r.g,n,e,t)}function ei(e,t,n,r){Ke([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Ji(e,t,n,r){de([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Lr=null;function eo(){}eo.prototype.extract=function(){},eo.prototype.decode=function(){return[]},eo.prototype.clear=function(){},eo.prototype.getStreams=function(){return[]};function _i(){}_i.prototype.init=function(){},_i.prototype.parse=function(){return[]};function Mi(){}function zi(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(to(e)==to(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Qn(e);t=Qn(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function to(e){return e instanceof ArrayBuffer?e:e.buffer}function Ti(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Qn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint8Array)}function Pu(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,Uint16Array)}function tn(e,t,n){return n=n===void 0?1/0:n,sn(e,t===void 0?0:t,n,DataView)}function sn(e,t,n,r){var u=to(e),c=1;"BYTES_PER_ELEMENT"in r&&(c=r.BYTES_PER_ELEMENT);var f=((e.byteOffset||0)+e.byteLength)/c;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/c,f))),new r(u,e,Math.floor(Math.min(e+Math.max(n,0),f))-e)}re("shaka.util.BufferUtils",Mi),Mi.toDataView=tn,Mi.toUint16=Pu,Mi.toUint8=Qn,Mi.toArrayBuffer=Ti,Mi.equal=zi;function an(){}an.prototype.init=function(){},an.prototype.i=function(){},an.prototype.h=function(){},an.prototype.j=function(){},re("shaka.media.IClosedCaptionParser",an);function wt(e){this.l=new _i,(e=Yt[e.toLowerCase()])&&(this.l=e()),this.g=new eo,(e=Mt)&&(this.g=e())}wt.prototype.init=function(e){this.l.init(e)},wt.prototype.i=function(e){e=this.l.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Qn(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},wt.prototype.h=function(){this.g.clear()},wt.prototype.j=function(){return this.g.getStreams()},re("shaka.media.ClosedCaptionParser",wt),wt.findDecoder=function(){return Mt},wt.unregisterDecoder=function(){Mt=null},wt.registerDecoder=function(e){Mt=e},wt.findParser=function(e){return Yt[e]},wt.unregisterParser=function(e){delete Yt[e]},wt.registerParser=function(e,t){Yt[e]=t};var Yt={},Mt=null;function zt(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function mn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function In(e,t,n){if(n||(n=zt),e.length!=t.length)return!1;t=t.slice();var r={};e=m(e);for(var u=e.next();!u.done;r={ne:r.ne},u=e.next()){if(r.ne=u.value,u=t.findIndex(function(c){return function(f){return n(c.ne,f)}}(r)),u==-1)return!1;t[u]=t[t.length-1],t.pop()}return t.length==0}function Zn(e,t,n){if(n||(n=zt),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Cn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Br,this.position=null,this.positionAlign=Bn,this.size=0,this.textAlign=kn,this.direction=Vn,this.writingMode=rn,this.lineInterpretation=cn,this.line=null,this.lineHeight="",this.lineAlign=bn,this.displayAlign=Er,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=kr,this.fontStyle=Yi,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Sb:32,rows:15}}function Rn(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}Cn.prototype.clone=function(){var e=new Cn(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function on(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Zn(e.nestedCues,t.nestedCues,on))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Zn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}re("shaka.text.Cue",Cn),Cn.equal=on,Cn.prototype.clone=Cn.prototype.clone;var Bn="auto";Cn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Bn};var kn="center",er={LEFT:"left",RIGHT:"right",CENTER:kn,START:"start",END:"end"};Cn.textAlign=er;var Er="after",Ur={BEFORE:"before",CENTER:"center",AFTER:Er};Cn.displayAlign=Ur;var Vn="ltr";Cn.direction={HORIZONTAL_LEFT_TO_RIGHT:Vn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rn="horizontal-tb";Cn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var cn=0;Cn.lineInterpretation={LINE_NUMBER:cn,PERCENTAGE:1};var bn="start",Jn={CENTER:"center",START:bn,END:"end"};Cn.lineAlign=Jn;var ar={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Cn.defaultTextColor=ar;var br={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Cn.defaultTextBackgroundColor=br;var kr=400;Cn.fontWeight={NORMAL:kr,BOLD:700};var Yi="normal",no={NORMAL:Yi,ITALIC:"italic",OBLIQUE:"oblique"};Cn.fontStyle=no,Cn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Br(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qr,this.scroll=hi}re("shaka.text.CueRegion",Br);var qr=1;Br.units={PX:0,PERCENTAGE:qr,LINES:2};var hi="";Br.scrollMode={NONE:hi,UP:"up"};function vi(){}vi.prototype.destroy=function(){};function wo(e,t,n){ta[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ge:t}}function ro(e,t){for(var n=e.toLowerCase().split(";")[0],r=m([vc,uu,wl,bi]),u=r.next();!u.done;u=r.next())if(u=ta[n+"-"+u.value]){var c=u.ge(),f=c.isSupported(e,t);if(c.destroy(),f)return u.ge}return null}re("shaka.transmuxer.TransmuxerEngine",vi),vi.findTransmuxer=ro,vi.unregisterTransmuxer=function(e,t){delete ta[e.toLowerCase().split(";")[0]+"-"+t]},vi.registerTransmuxer=wo,vi.prototype.destroy=vi.prototype.destroy;var ta={},bi=1,wl=2,uu=3,vc=4;vi.PluginPriority={FALLBACK:bi,PREFERRED_SECONDARY:wl,PREFERRED:uu,APPLICATION:vc};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Rf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function si(e){var t;e instanceof si?(Ms(this,e.kb),this.mc=e.mc,_n(this,e.wb),Xn(this,e.Bc),this.Pa=e.Pa,hr(this,e.g.clone()),this.Wb=e.Wb):e&&(t=String(e).match(Rf))?(Ms(this,t[1]||"",!0),this.mc=ti(t[2]||""),_n(this,t[3]||"",!0),Xn(this,t[4]),this.Pa=ti(t[5]||"",!0),hr(this,t[6]||"",!0),this.Wb=ti(t[7]||"")):this.g=new Wi(null)}g=si.prototype,g.kb="",g.mc="",g.wb="",g.Bc=null,g.Pa="",g.Wb="",g.toString=function(){var e=[],t=this.kb;if(t&&e.push(Mr(t,Xr,!0),":"),t=this.wb){e.push("//");var n=this.mc;n&&e.push(Mr(n,Xr,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Bc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.wb&&t.charAt(0)!="/"&&e.push("/"),e.push(Mr(t,t.charAt(0)=="/"?Di:na,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Wb)&&e.push("#",Mr(t,Ao)),e.join("")},g.resolve=function(e){var t=this.clone();t.kb==="data"&&(t=new si);var n=!!e.kb;n?Ms(t,e.kb):n=!!e.mc,n?t.mc=e.mc:n=!!e.wb,n?_n(t,e.wb):n=e.Bc!=null;var r=e.Pa;if(n)Xn(t,e.Bc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.wb&&!this.Pa)r="/"+r;else{var u=t.Pa.lastIndexOf("/");u!=-1&&(r=t.Pa.substr(0,u+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){u=r.lastIndexOf("/",0)==0,r=r.split("/");for(var c=[],f=0;f<r.length;){var h=r[f++];h=="."?u&&f==r.length&&c.push(""):h==".."?((1<c.length||c.length==1&&c[0]!="")&&c.pop(),u&&f==r.length&&c.push("")):(c.push(h),u=!0)}r=c.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?hr(t,e.g.clone()):n=!!e.Wb,n&&(t.Wb=e.Wb),t},g.clone=function(){return new si(this)};function Ms(e,t,n){e.kb=n?ti(t,!0):t,e.kb&&(e.kb=e.kb.replace(/:$/,""))}function _n(e,t,n){e.wb=n?ti(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Bc=t}else e.Bc=null}function hr(e,t,n){t instanceof Wi?e.g=t:(n||(t=Mr(t,ui)),e.g=new Wi(t))}function ti(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Mr(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Bi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bi(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Xr=/[#\/\?@]/g,na=/[#\?:]/g,Di=/[#\?]/g,ui=/[#\?@]/g,Ao=/#/g;function Wi(e){this.g=e||null}function qo(e){if(!e.Ca&&(e.Ca={},e.Zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),u=null;if(0<=r){var c=t[n].substring(0,r);u=t[n].substring(r+1)}else c=t[n];c=decodeURIComponent(c.replace(/\+/g," ")),u=u||"",e.add(c,decodeURIComponent(u.replace(/\+/g," ")))}}g=Wi.prototype,g.Ca=null,g.Zc=null;function ra(e){return qo(e),e.Zc}g.add=function(e,t){qo(this),this.g=null;var n=this.Ca.hasOwnProperty(e)?this.Ca[e]:null;return n||(this.Ca[e]=n=[]),n.push(t),this.Zc++,this},g.set=function(e,t){return qo(this),this.g=null,this.Ca.hasOwnProperty(e)?this.Ca[e]=[t]:this.add(e,t),this},g.get=function(e){return qo(this),this.Ca[e]||[]},g.toString=function(){if(this.g)return this.g;if(!this.Ca)return"";var e=[],t;for(t in this.Ca)for(var n=encodeURIComponent(t),r=this.Ca[t],u=0;u<r.length;u++){var c=n;r[u]!==""&&(c+="="+encodeURIComponent(r[u])),e.push(c)}return this.g=e.join("&")},g.clone=function(){var e=new Wi;if(e.g=this.g,this.Ca){var t={},n;for(n in this.Ca)t[n]=this.Ca[n].concat();e.Ca=t,e.Zc=this.Zc}return e};function gt(e,t,n){var r=We.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}gt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},re("shaka.util.Error",gt),gt.Severity={RECOVERABLE:1,CRITICAL:2},gt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},gt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function ia(e){this.h=e,this.g=void 0}ia.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ds(e){this.h=e,this.g=null}Ds.prototype.X=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){p.clearTimeout(r),n=!1},r=p.setTimeout(function(){n&&t.h()},1e3*e),this},Ds.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function pr(e){this.h=e,this.g=null}pr.prototype.kc=function(){return this.stop(),this.h(),this},pr.prototype.X=function(e){var t=this;return this.stop(),this.g=new Ds(function(){t.h()}).X(e),this},pr.prototype.$a=function(e){var t=this;return this.stop(),this.g=new Ds(function(){t.g.X(e),t.h()}).X(e),this},pr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},re("shaka.util.Timer",pr),pr.prototype.stop=pr.prototype.stop,pr.prototype.tickEvery=pr.prototype.$a,pr.prototype.tickAfter=pr.prototype.X,pr.prototype.tickNow=pr.prototype.kc;function Io(){var e=p.ManagedMediaSource||p.MediaSource;return!!(e&&e.isTypeSupported)}function lu(e){return Ec().canPlayType(e)!=""}function Al(){return!!navigator.userAgent.match(/Edge?\//)}function gs(){return Yr("Xbox One")}function qa(){return Yr("Tizen")}function Ou(){return Yr("Tizen 3")}function Lu(){return Yr("Tizen 2")}function oa(){return Yr("Web0S")}function aa(){return Yr("CrKey")}function cu(){if(!Yr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function ms(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!qa()&&!Yr("PC=EOS")&&!Yr("PC=APL")&&!Yr("VirginMedia")&&!Yr("SOPOpenBrowser")&&!xr()&&!Yr("AFT")&&!Yr("WPE")}function yc(){return Yr("PlayStation 5")}function xr(){return Yr("PlayStation 4")}function vs(){return Yr("Hisense")||Yr("VIDAA")}function ys(){if(!ms())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Yr(e){return(navigator.userAgent||"").includes(e)}function Ec(){return sa||(Il||(Il=new pr(function(){sa=null})),(sa=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(sa=document.createElement("video")),Il.X(1),sa)}function Aa(){var e,t,n,r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:if(e={width:1/0,height:1/0},aa()){p.cast&&cast.__platform__&&cast.__platform__.canDisplayType&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(qa()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch(G){Ke("Tizen: Error detecting screen size, default screen size 1920x1080.")}k.u(2);break}if(gs()){n=new Windows.Media.Protection.ProtectionCapabilities,r=Windows.Media.Protection.ProtectionCapabilityResult,u=null;try{do u=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===r.maybe)}catch(G){u=r.notSupported}u===r.probably?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(oa()){try{c=JSON.parse(p.PalmSystem.deviceInfo),e.width=Math.max(1920,c.Hj),e.height=Math.max(1080,c.Gj)}catch(G){Ke("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}k.u(2);break}if(vs()){p.Hisense_Get4KSupportState&&p.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),k.u(2);break}if(!xr()&&!yc()){k.u(2);break}return f=!1,fe(k,8),x(k,p.msdk.device.getDisplayInfo(),10);case 10:h=k.h,f=h.resolution==="4K",ge(k,9);break;case 8:return Re(k),fe(k,11),x(k,p.msdk.device.getDisplayInfoImmediate(),13);case 13:E=k.h,f=E.resolution==="4K",ge(k,9);break;case 11:S=Re(k),Ke("PlayStation: Failed to get the display info:",S);case 9:f?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080);case 2:return k.return(e)}})}var Il=null,sa=null;function Es(){}function Vr(e){if(!e)return"";if(e=Qn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),p.TextDecoder&&!xr())return e=new TextDecoder().decode(e),e.includes("�")&&de('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var u=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+u)}}return t}function Ha(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new gt(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=tn(e);for(var u=0;u<n;u++)r[u]=e.getUint16(2*u,t);return Ah(r)}function Ka(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Qn(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Vr(n);if(n[0]==254&&n[1]==255)return Ha(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ha(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ha(e,!1);if(n[1]==0&&n[3]==0)return Ha(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Vr(e);throw new gt(2,2,2003)}function Va(e){if(p.TextEncoder&&!xr()){var t=new TextEncoder;return Ti(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ti(t)}function xf(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),u=0;u<e.length;++u)r.setUint16(2*u,e.charCodeAt(u),t);return n}function Ah(e){return om.value()(e)}function bo(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|#(0+)?39|nbsp|lrm|rlm);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||"'"}):e||""}re("shaka.util.StringUtils",Es),Es.resetFromCharCode=function(){om.g=void 0},Es.toUTF16=xf,Es.toUTF8=Va,Es.fromBytesAutoDetect=Ka,Es.fromUTF16=Ha,Es.fromUTF8=Vr;var om=new ia(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch(u){return!1}}for(var t={Db:65536};0<t.Db;t={Db:t.Db},t.Db/=2)if(e(t.Db))return function(n){return function(r){for(var u="",c=0;c<r.length;c+=n.Db)u+=String.fromCharCode.apply(null,r.subarray(c,c+n.Db));return u}}(t);return null});function Pi(){}function Nf(e){return e=Ah(Qn(e)),btoa(e)}function fu(e,t){return t=t==null?!0:t,e=Nf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ho(e){e=p.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function du(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=p.parseInt(e.substr(2*r,2),16);return n}function Ps(e){var t=Qn(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function li(){for(var e=We.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var u=e[r];u instanceof Uint8Array?t.set(u,n):t.set(Qn(u),n),n+=u.byteLength}return t}re("shaka.util.Uint8ArrayUtils",Pi),Pi.concat=li,Pi.toHex=Ps,Pi.fromHex=du,Pi.fromBase64=Ho,Pi.toBase64=fu,Pi.toStandardBase64=Nf;function co(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new si(e[0]);return t=new si(t[0]),[n.resolve(t).toString()]}t=t.map(function(f){return new si(f)}),n=[],e=m(e);for(var r=e.next();!r.done;r=e.next()){r=new si(r.value);for(var u=m(t),c=u.next();!c.done;c=u.next())n.push(r.resolve(c.value).toString())}return n}function ku(e,t,n){return{keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set}}function Ih(e,t){t=t===void 0?"cenc":t;var n=[],r=[],u=[];e.forEach(function(f,h){var E=h;E.length!=22&&(E=fu(du(h),!1));var S=f;S.length!=22&&(S=fu(du(f),!1)),f={kty:"oct",kid:E,k:S},n.push(f),r.push(f.kid),u.push(h)}),e=JSON.stringify({keys:n});var c=JSON.stringify({kids:r});return c=[{initData:Qn(Va(c)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+p.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:c,keyIds:new Set(u)}}function Fu(e,t){if(t.length==1)return t[0];if(e=Co(e,t),e!=null)return e;throw new gt(2,4,4025,t)}function Co(e,t){for(var n=m(Ch[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.test(c.trim()))return c.trim()}return e==vr?"":null}function bh(e,t){var n=[];e=m(Ch[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())c=c.value,r.test(c.trim())&&n.push(c.trim())}return n}var vr="text",yi={fa:"video",S:"audio",ma:vr,ue:"image",Gi:"application"},Ch={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/,/^iamf/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function _c(){}function Si(e,t){var n=e;return t&&!hu.includes(e)&&(n+='; codecs="'+t+'"'),n}function Uu(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Os(e,t,n){var r=Si(e,t);return t=Uu(e,t),ro(t)?(e=ro(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function am(e,t,n){var r=[t];return vE.forEach(function(u,c){var f=e[c];c=="codecs"?hu.includes(e.mimeType)||r.push('codecs="'+n+'"'):f&&r.push(u+'="'+f+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function Mf(e){return e.split(";")[0].split("/")[1]}function Ia(e){var t=Rh(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function za(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Rh(n.value),t.push(n[0]);return t.sort().join(",")}function ba(e){return e.split(";")[0]}function Do(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function sm(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Rh(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}re("shaka.util.MimeUtils",_c),_c.getFullTypeWithAllCodecs=Uu,_c.getFullType=Si;var vE=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),hu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ls(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function bl(e){return ji[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!Mt:!1}Ls.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function yE(e,t,n,r,u){var c,f,h,E,S,k,G;return Me(function(te){if(te.g==1)return x(te,Promise.resolve(),2);if(!e.i||!e.j)return te.return();if(n==null||r==null)return e.i.parseInit(Qn(t)),te.return();for(c=e.B?n:e.s,f={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:c},h=e.i.parseMedia(Qn(t),f,u),E=m(h),S=E.next();!S.done;S=E.next())k=S.value,e.A(k,u||null,f);G=h.filter(function(z){return z.startTime>=e.l&&z.startTime<e.m}),e.j.append(G),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),X(te)})}Ls.prototype.remove=function(e,t){var n=this;return Me(function(r){if(r.g==1)return x(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),X(r)})};function xh(e,t,n){e.l=t,e.m=n}function Df(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=m(t.keys()),u=r.next();!u.done;u=r.next())(u=t.get(u.value).filter(function(c){return c.endTime<=n}))&&e.j.append(u)}function um(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var r=t.next();!r.done;r=t.next())um(e,r.value,n)}function Pf(e,t,n,r,u){var c=n+" "+r,f=new Map;t=m(t);for(var h=t.next();!h.done;h=t.next()){var E=h.value;h=E.stream,E=E.cue,f.has(h)||f.set(h,new Map),f.get(h).has(c)||f.get(h).set(c,[]),um(e,E,u),E.startTime>=e.l&&E.startTime<e.m&&(f.get(h).get(c).push(E),h==e.C&&e.j.append([E]))}for(u=m(f.keys()),c=u.next();!c.done;c=u.next())for(c=c.value,e.o.has(c)||e.o.set(c,new Map),t=m(f.get(c).keys()),h=t.next();!h.done;h=t.next())h=h.value,E=f.get(c).get(h),e.o.get(c).set(h,E);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}re("shaka.text.TextEngine",Ls),Ls.prototype.destroy=Ls.prototype.destroy,Ls.findParser=function(e){return ji[e]},Ls.unregisterParser=function(e){delete ji[e]},Ls.registerParser=function(e,t){ji[e]=t};var ji={};function lm(e,t){return e.concat(t)}function cm(){}function Bu(e){return e!=null}function mo(){}function ju(e,t){return e=Cr(e),t=Cr(t),e.split("-")[0]==t.split("-")[0]}function Tc(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Zu(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Cr(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=ni.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Gu(e,t){return e=Cr(e),t=Cr(t),t==e?4:Tc(t,e)?3:Zu(t,e)?2:Tc(e,t)?1:0}function Nh(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=ni.get(e)||e}function qu(e){return e.language?Cr(e.language):e.audio&&e.audio.language?Cr(e.audio.language):e.video&&e.video.language?Cr(e.video.language):"und"}function Cl(e,t){e=Cr(e);var n=new Set,r=m(t);for(t=r.next();!t.done;t=r.next())n.add(Cr(t.value));for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,t==e)return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Tc(t,e))return t;for(r=m(n),t=r.next();!t.done;t=r.next())if(t=t.value,Zu(t,e))return t;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,Tc(e,t))return t;return null}re("shaka.util.LanguageUtils",mo),mo.findClosestLocale=Cl,mo.getLocaleForVariant=qu,mo.getLocaleForText=function(e){return Cr(e.language||"und")},mo.getBase=Nh,mo.relatedness=Gu,mo.areSiblings=function(e,t){var n=Nh(e),r=Nh(t);return e!=n&&t!=r&&n==r},mo.normalize=Cr,mo.isSiblingOf=Zu,mo.isParentOf=Tc,mo.areLanguageCompatible=ju,mo.areLocaleCompatible=function(e,t){return e=Cr(e),t=Cr(t),e==t};var ni=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Ya(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer&&r.buffer.constructor==ArrayBuffer)return r;if(n.has(r))return null;var u=r.constructor==Array;if(r.constructor!=Object&&!u)return null;n.add(r);var c=u?[]:{},f;for(f in r)c[f]=t(r[f]);return u&&(c.length=r.length),c}}var n=new WeakSet;return t(e)}function fm(e){var t={},n;for(n in e)t[n]=e[n];return t}function Sc(){}function dm(e,t,n,r){var u=e.variants;if((t.length||n.length)&&(u=Mh(u,t,n)),r.length){for(t=new Et,n=m(u),u=n.next();!u.done;u=n.next())u=u.value,t.push(String(u.video.width||0),u);var c=[];t.forEach(function(ve,Le){ve=0;var De=[],qe={};Le=m(Le);for(var Te=Le.next();!Te.done;qe={Uc:qe.Uc},Te=Le.next())qe.Uc=Te.value,Te=r.filter(function(Qe){return function(Ue){return Qe.Uc.decodingInfos[0][Ue]}}(qe)).length,Te>ve?(ve=Te,De=[qe.Uc]):Te==ve&&De.push(qe.Uc);c.push.apply(c,T(De))}),u=c}n=new Set,t=new Set;var f=m(u);for(u=f.next();!u.done;u=f.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(ve,Le){return ve.bandwidth-Le.bandwidth});var h=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){f=f.value;var E=f.language+(f.channelsCount||0)+(f.audioSamplingRate||0)+f.roles.join(",")+f.label+f.groupId+f.fastSwitching,S=u.get(E)||[];if(S.length){var k=S[S.length-1],G=Ia(k.codecs),te=Ia(f.codecs);G==te&&f.bandwidth>k.bandwidth&&(S.push(f),h.push(f.id))}else S.push(f),h.push(f.id);u.set(E,S)}n=Array.from(t).sort(function(ve,Le){return ve.bandwidth&&Le.bandwidth?ve.bandwidth-Le.bandwidth:ve.width-Le.width}),t=Un();var z=[];for(u=new Map,n=m(n),f=n.next();!f.done;f=n.next()){if(f=f.value,E=Math.round(f.frameRate||0)+(f.hdr||"")+f.fastSwitching,S=u.get(E)||[],S.length){if(k=S[S.length-1],!t&&(G=Ia(k.codecs),te=Ia(f.codecs),G!==te))continue;f.width>k.width||f.height>k.height?(S.push(f),z.push(f.id)):f.width==k.width&&f.height==k.height&&(G=Ia(k.codecs),te=Ia(f.codecs),G==te&&f.bandwidth>k.bandwidth&&(S.push(f),z.push(f.id)))}else S.push(f),z.push(f.id);u.set(E,S)}e.variants=e.variants.filter(function(ve){var Le=ve.audio;return ve=ve.video,!(Le&&!h.includes(Le.id)||ve&&!z.includes(ve.id))})}function Mh(e,t,n){var r={};t=m(t);for(var u=t.next();!u.done;r={te:r.te},u=t.next())if(r.te=u.value,u=e.filter(function(c){return function(f){return f.video&&f.video.codecs.startsWith(c.te)}}(r)),u.length){e=u;break}for(r={},n=m(n),t=n.next();!t.done;r={me:r.me},t=n.next())if(r.me=t.value,t=e.filter(function(c){return function(f){return f.audio&&f.audio.codecs.startsWith(c.me)}}(r)),t.length){e=t;break}return e}function Dh(e,t,n){e.variants=e.variants.filter(function(r){return Of(r,t,n)})}function Of(e,t,n){function r(h,E,S){return h>=E&&h<=S}var u=e.video;if(u&&u.width&&u.height){var c=u.width,f=u.height;if(f>c&&(f=m([f,c]),c=f.next().value,f=f.next().value),!r(c,t.minWidth,Math.min(t.maxWidth,n.width))||!r(f,t.minHeight,Math.min(t.maxHeight,n.height))||!r(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function wc(e,t,n){var r=!1;e=m(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=u.allowedByApplication;u.allowedByApplication=Of(u,t,n),c!=u.allowedByApplication&&(r=!0)}return r}function hm(e,t,n){return n=n===void 0?[]:n,Me(function(r){return r.g==1?x(r,pm(e,t,0<t.offlineSessionIds.length,n),2):(EE(t),x(r,Ff(t),0))})}function pm(e,t,n,r){var u,c;return Me(function(f){if(f.g==1)return x(f,Oh(t.variants,n,!1,r),2);u=null,e&&(c=e.g)&&(u=c.keySystem),t.variants=t.variants.filter(function(h){var E=Ph(h,u);if(!E){var S=[];h.audio&&S.push(jf(h.audio)),h.video&&S.push(jf(h.video))}return E}),X(f)})}function Ph(e,t){var n=gs(),r=Yr("Firefox")&&Yr("Android"),u=e.video,c=u&&u.width||0,f=u&&u.height||0;if(n&&u&&(1920<c||1080<f)&&(u.codecs.includes("avc1.")||u.codecs.includes("avc3.")))return!1;if(u){if(n=Rl(u.codecs),u.codecs.includes(",")){if(c=u.codecs.split(","),n=Fu("video",c),n=Rl(n),c=Fu("audio",c),c=Hu(c),f=Os(u.mimeType,c,"audio"),!Ot(f))return!1;n=[n,c].join()}if(c=Os(u.mimeType,n,"video"),!Ot(c))return!1;u.codecs=n}if(u=e.audio,r&&u&&u.encrypted&&u.codecs.toLowerCase().includes("opus"))return!1;if(u){if(r=Hu(u.codecs),n=Os(u.mimeType,r,"audio"),!Ot(n))return!1;u.codecs=r}return e.decodingInfos.some(function(h){return!(!h.supported||t&&(h=h.keySystemAccess)&&h.keySystem!=t)})}function Lf(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=JSON.stringify(u),u=e[u],u instanceof Object?(u=Lf(u),n.push(r+":"+u)):(u=JSON.stringify(u),n.push(r+":"+u))}return"{"+n.join(",")+"}"}function gm(e,t){var n,r,u,c,f,h,E;return Me(function(S){if(S.g==1){for(n=function(k,G){if(k){var te=Ya(k);return te.supported=k.supported&&G.supported,te.powerEfficient=k.powerEfficient&&G.powerEfficient,te.smooth=k.smooth&&G.smooth,G.keySystemAccess&&!te.keySystemAccess&&(te.keySystemAccess=G.keySystemAccess),te}return G},r=null,u=[],c={},f=m(t),h=f.next();!h.done;c={Gc:c.Gc,Hc:c.Hc},h=f.next())E=h.value,c.Hc=Lf(E),c.Gc=Lh,c.Gc[c.Hc]?r=n(r,c.Gc[c.Hc]):u.push(kf(E).then(function(k){return function(G){var te=null;G=m(G||[]);for(var z=G.next();!z.done;z=G.next())te=n(te,z.value);te&&(k.Gc[k.Hc]=te,r=n(r,te))}}(c)));return x(S,Promise.all(u),2)}r&&e.decodingInfos.push(r),X(S)})}function kf(e){var t=[""];e.video&&(t=Do(e.video.contentType).split(","));var n=[""];e.audio&&(n=Do(e.audio.contentType).split(","));var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var c={},f=m(n),h=f.next();!h.done;c={Mb:c.Mb},h=f.next())h=h.value,c.Mb=Ya(e),e.video&&(c.Mb.video.contentType=Si(ba(c.Mb.video.contentType),u)),e.audio&&(c.Mb.audio.contentType=Si(ba(c.Mb.audio.contentType),h)),r.push(new Promise(function(E){return function(S,k){navigator.mediaCapabilities.decodingInfo(E.Mb).then(function(G){S(G)}).catch(k)}}(c)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Oh(e,t,n,r){var u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe;return Me(function(Ue){switch(Ue.g){case 1:if(e.some(function(vt){return vt.decodingInfos.length}))return Ue.return();u={},c=m(r),f=c.next();case 2:if(f.done){Ue.u(4);break}u.oe=f.value,h=!1,E=m(e),S=E.next();case 5:if(S.done){Ue.u(7);break}k=S.value,G=mm(k,t,n).filter(function(vt){return function(xt){return xt=xt[0],(xt.keySystemConfiguration&&xt.keySystemConfiguration.keySystem)===vt.oe}}(u)),te=m(G),z=te.next();case 8:if(z.done){Ue.u(10);break}return ve=z.value,x(Ue,gm(k,ve),9);case 9:z=te.next(),Ue.u(8);break;case 10:k.decodingInfos.length&&(h=!0),S=E.next(),Ue.u(5);break;case 7:if(h)return Ue.return();u={oe:u.oe},f=c.next(),Ue.u(2);break;case 4:Le=m(e),S=Le.next();case 12:if(S.done){Ue.u(0);break}De=S.value,qe=mm(De,t,n).filter(function(vt){return vt=vt[0],vt=vt.keySystemConfiguration&&vt.keySystemConfiguration.keySystem,!vt||!r.includes(vt)}),Te=m(qe),z=Te.next();case 15:if(z.done){S=Le.next(),Ue.u(12);break}return Qe=z.value,x(Ue,gm(De,Qe),16);case 16:z=Te.next(),Ue.u(15)}})}function mm(e,t,n){var r=e.audio,u=e.video,c=[],f=[];if(u)for(var h=m(u.fullMimeTypes),E=h.next();!E.done;E=h.next()){E=E.value;var S=Do(E);if(S.includes(",")&&!r){var k=S.split(",");S=Fu("video",k),k=Fu("audio",k),k=Hu(k),k=Os(ba(E),k,"audio"),f.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(S=Rl(S),E={contentType:Os(ba(E),S,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||1},u.hdr)switch(u.hdr){case"SDR":E.transferFunction="srgb";break;case"PQ":E.transferFunction="pq";break;case"HLG":E.transferFunction="hlg"}c.push(E)}if(r)for(h=m(r.fullMimeTypes),E=h.next();!E.done;E=h.next())E=E.value,S=Hu(Do(E)),E=Os(ba(E),S,"audio"),f.push({contentType:E,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(h=[],c.length==0&&c.push(null),f.length==0&&f.push(null),c=m(c),E=c.next();!E.done;E=c.next())for(E=E.value,S=m(f),k=S.next();!k.done;k=S.next()){k=k.value;var G={type:n?"file":"media-source"};E&&(G.video=E),k&&(G.audio=k),h.push(G)}if(f=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!f.length)return[h];e=[],n=new Map,f=m(f);for(var te=f.next();!te.done;te=f.next())c=te.value,n.get(c.keySystem)||n.set(c.keySystem,[]),n.get(c.keySystem).push(c);for(f=t?"required":"optional",t=t?["persistent-license"]:["temporary"],c=m(n.keys()),E=c.next();!E.done;E=c.next()){for(E=E.value,S=[],k=m(h),G=k.next();!G.done;G=k.next()){G=Object.assign({},G.value);var z=n.get(E),ve={keySystem:E,initDataType:"cenc",persistentState:f,distinctiveIdentifier:"optional",sessionTypes:t};for(z=m(z),te=z.next();!te.done;te=z.next()){if(te=te.value,te.initData&&te.initData.length){for(var Le=new Set,De=m(te.initData),qe=De.next();!qe.done;qe=De.next())Le.add(qe.value.initDataType);ve.initDataType=te.initData[0].initDataType}te.distinctiveIdentifierRequired&&(ve.distinctiveIdentifier="required"),te.persistentStateRequired&&(ve.persistentState="required"),te.sessionType&&(ve.sessionTypes=[te.sessionType]),r&&(te.audioRobustness!=""?ve.audio?ve.audio.robustness=ve.audio.robustness||te.audioRobustness:ve.audio={robustness:te.audioRobustness}:ve.audio||(ve.audio={})),u&&(te.videoRobustness!=""?ve.video?ve.video.robustness=ve.video.robustness||te.videoRobustness:ve.video={robustness:te.videoRobustness}:ve.video||(ve.video={}))}G.keySystemConfiguration=ve,S.push(G)}e.push(S)}return e}function Hu(e){return e.toLowerCase()=="flac"?ys()?"fLaC":"flac":e==="Opus"?"opus":e}function Rl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function EE(e){e.textStreams=e.textStreams.filter(function(t){return t=Si(t.mimeType,t.codecs),bl(t)})}function Ff(e){var t,n,r,u,c,f,h;return Me(function(E){switch(E.g){case 1:t=[],n=m(e.imageStreams),r=n.next();case 2:if(r.done){E.u(4);break}if(u=r.value,c=u.mimeType,c=="application/mp4"&&u.codecs=="mjpg"&&(c="image/jpg"),zu.has(c)){E.u(5);break}if(f=SE.get(c),!f){zu.set(c,!1),E.u(5);break}return x(E,_E(f),7);case 7:h=E.h,zu.set(c,h);case 5:zu.get(c)&&t.push(u),r=n.next(),E.u(2);break;case 4:e.imageStreams=t,X(E)}})}function _E(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function xl(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,u=n?n.mimeType:null,c=t?t.codecs:null,f=n?n.codecs:null,h=[];f&&h.push(f),c&&h.push(c);var E=[];n&&E.push(n.mimeType),t&&E.push(t.mimeType),E=E[0]||null;var S=[];t&&S.push(t.kind),n&&S.push(n.kind),S=S[0]||null;var k=new Set;if(t)for(var G=m(t.roles),te=G.next();!te.done;te=G.next())k.add(te.value);if(n)for(G=m(n.roles),te=G.next();!te.done;te=G.next())k.add(te.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:S,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:E,audioMimeType:r,videoMimeType:u,codecs:h.join(", "),audioCodec:c,videoCodec:f,primary:e.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function Nl(e){return{id:e.id,active:!1,type:vr,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Ku(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var u=e.tilesLayout;return r&&(u=r.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:u||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Ac(e){return e.__shaka_id||(e.__shaka_id=TE++),e.__shaka_id}function vm(e){var t=ym(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Ml(e){var t=ym(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function ym(e){var t=e.language;return{id:Ac(e),active:!1,type:"",bandwidth:0,language:Cr(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Uf(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Bf(e){return e.filter(function(t){return Uf(t)})}function Ic(e,t,n,r){var u=e,c=e.filter(function(E){return E.primary});c.length&&(u=c);var f=u.length?u[0].language:"";if(u=u.filter(function(E){return E.language==f}),t){var h=Cl(Cr(t),e.map(function(E){return E.language}));h&&(u=e.filter(function(E){return Cr(E.language)==h}))}if(u=u.filter(function(E){return E.forced==r}),n){if(e=Vu(u,n),e.length)return e}else if(e=u.filter(function(E){return E.roles.length==0}),e.length)return e;return e=u.map(function(E){return E.roles}).reduce(lm,[]),e.length?Vu(u,e[0]):u}function Vu(e,t){return e.filter(function(n){return n.roles.includes(t)})}function jf(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}re("shaka.util.StreamUtils",Sc),Sc.meetsRestrictions=Of;var Lh={},TE=0,zu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),SE=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Hr(){var e=this;this.s=null,this.o=!1,this.i=new K,this.F=new Tt,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=[],this.B=1,this.G=!1,this.h=this.l=this.g=this.A=null,this.C=new pr(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}g=Hr.prototype,g.stop=function(){this.s=null,this.o=!1,this.m=[],this.B=1,this.l=this.A=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.j=null},g.release=function(){this.F.release(),this.C=null},g.init=function(e){this.s=e},g.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio,t=p.screen.height*n,n*=p.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:p.devicePixelRatio;t=Math.min(t,this.l.clientHeight*r),n=Math.min(n,this.l.clientWidth*r)}var u=this.m.filter(function(S){return!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)});if(u.length||(u=this.m),r=u,e&&u.length!=this.m.length&&(r=this.m.filter(function(S){return!!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)})),e=kh(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=Gf(e),e=m(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=kh(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=kh(this,null,r,1/0,1/0),e=[e[0]]),n=e[0]||null,r=0;r<e.length;r++){u=e[r];for(var c=isNaN(this.B)?1:Math.abs(this.B),f=c*u.bandwidth/this.g.bandwidthDowngradeTarget,h={bandwidth:1/0},E=r+1;E<e.length;E++)if(u.bandwidth!=e[E].bandwidth){h=e[E];break}c=c*h.bandwidth/this.g.bandwidthUpgradeTarget,t>=f&&t<=c&&n.bandwidth!=u.bandwidth&&(n=u)}return this.A=Date.now(),n},g.enable=function(){this.o=!0},g.disable=function(){this.o=!1},g.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.A!=null&&this.o&&Zf(this)},g.trySuggestStreams=function(){this.A!=null&&this.o&&Zf(this)},g.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},g.setVariants=function(e){this.m=e},g.playbackRateChanged=function(e){this.B=e},g.setMediaElement=function(e){var t=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in p&&(this.h=new ResizeObserver(function(){t.C.X(wE)}),this.h.observe(this.l))},g.setCmsdManager=function(e){this.j=e},g.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Zf(e){if(e.G){if(Date.now()-e.A<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.G=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.s(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function kh(e,t,n,r,u){if(e.j){var c=e.j.dg();c&&(n=n.filter(function(f){return f.bandwidth&&c?f.bandwidth<=c:!0}))}return t&&(n=n.filter(function(f){return Of(f,t,{width:u,height:r})})),n.sort(function(f,h){return f.bandwidth-h.bandwidth})}function Gf(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,u){return r.width-u.width})}re("shaka.abr.SimpleAbrManager",Hr),Hr.prototype.configure=Hr.prototype.configure,Hr.prototype.setCmsdManager=Hr.prototype.setCmsdManager,Hr.prototype.setMediaElement=Hr.prototype.setMediaElement,Hr.prototype.playbackRateChanged=Hr.prototype.playbackRateChanged,Hr.prototype.setVariants=Hr.prototype.setVariants,Hr.prototype.getBandwidthEstimate=Hr.prototype.getBandwidthEstimate,Hr.prototype.trySuggestStreams=Hr.prototype.trySuggestStreams,Hr.prototype.segmentDownloaded=Hr.prototype.segmentDownloaded,Hr.prototype.disable=Hr.prototype.disable,Hr.prototype.enable=Hr.prototype.enable,Hr.prototype.chooseVariant=Hr.prototype.chooseVariant,Hr.prototype.init=Hr.prototype.init,Hr.prototype.release=Hr.prototype.release,Hr.prototype.stop=Hr.prototype.stop;var wE=1;re("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),re("shaka.config.CodecSwitchingStrategy",{hj:"reload",Og:"smooth"});function bc(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}bc.prototype.add=function(e,t,n){return Em(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function Em(e,t,n,r){var u;if(!(u=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(u=e.audio&&t.audio)){u=e.audio;var c=t.audio;u=!!((!u.channelsCount||!c.channelsCount||2<u.channelsCount||2<c.channelsCount)&&u.channelsCount!=c.channelsCount||n&&!Fh(u,c)||!_m(u.roles,c.roles)||r&&u.groupId!==c.groupId)}return!(r=u)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||Fh(e,t))&&_m(e.roles,t.roles))),!r}bc.prototype.values=function(){return this.g.values()};function Fh(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return za(r)}),t=t.codecs.split(",").map(function(r){return za(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function _m(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Uh(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Dl(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}Uh.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Un(),r=e.filter(function(u){return Em(t.i,u,!n,t.g)});return r.length?new bc(r[0],r,!n,this.g):this.j.create(e)};function Dl(e,t,n,r,u,c,f,h,E,S){this.s=e,this.A=t,this.h=n,this.i=r,this.B=u,this.l=c,this.g=f===void 0?"":f,this.j=h===void 0?"":h,this.m=E===void 0?"reload":E,this.o=S===void 0?!1:S}Dl.prototype.create=function(e){var t=[];t=Tm(e,this.s);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=Sm(t,this.A),e.length&&(t=e),this.l&&(e=Am(t,this.l),e.length&&(t=e)),this.i&&(e=bE(t,this.i),e.length&&(t=e)),this.h&&(e=wm(t,this.h),e.length&&(t=e)),this.g&&(e=AE(t,this.g),e.length&&(t=e)),this.j&&(e=IE(t,this.j),e.length&&(t=e)),e=CE(t,this.B),e.length&&(t=e),new bc(t[0],t,!(this.m=="smooth"&&Un()),this.o)};function Tm(e,t){t=Cr(t);var n=Cl(t,e.map(function(r){return qu(r)}));return n?e.filter(function(r){return n==qu(r)}):[]}function Sm(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function AE(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function IE(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function wm(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function bE(e,t){return t=="AUTO"&&(t=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function Am(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function CE(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Bh(){this.g=Cc,this.i=new Map().set(Cc,2).set(Pl,1),this.h=0}function jh(e,t,n){e.i.set(Cc,n).set(Pl,t)}var Pl=0,Cc=1;function Zh(e,t){var n=ua();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Gh(e){var t,n;return Me(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new gt(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),x(r,new Promise(function(u){new pr(u).X(n/1e3)}),2))}e.h*=e.m,X(r)})}function ua(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Rr(){var e,t,n=new Promise(function(r,u){e=r,t=u});return n.resolve=e,n.reject=t,n}Rr.prototype.resolve=function(){},Rr.prototype.reject=function(){};function pi(e,t){this.promise=e,this.i=t,this.g=!1}function pu(e){return new pi(Promise.reject(e),function(){return Promise.resolve()})}function qh(){var e=Promise.reject(new gt(2,7,7001));return e.catch(function(){}),new pi(e,function(){return Promise.resolve()})}function Yu(e){return new pi(Promise.resolve(e),function(){return Promise.resolve()})}function Im(e){return new pi(e,function(){return e.catch(function(){})})}pi.prototype.abort=function(){return this.g=!0,this.i()};function qf(e){return new pi(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}pi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},pi.prototype.va=function(e,t){function n(h){return function(E){if(u.g&&h)c.reject(f);else{var S=h?e:t;S?r=Hh(S,E,c):(h?c.resolve:c.reject)(E)}}}function r(){return c.reject(f),u.abort()}var u=this,c=new Rr,f=new gt(2,7,7001);return this.promise.then(n(!0),n(!1)),new pi(c,function(){return r()})};function Hh(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}re("shaka.util.AbortableOperation",pi),pi.prototype.chain=pi.prototype.va,pi.prototype.finally=pi.prototype.finally,pi.all=qf,pi.prototype.abort=pi.prototype.abort,pi.notAbortable=Im,pi.completed=Yu,pi.aborted=qh,pi.failed=pu;function Wn(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=p.performance&&p.performance.now?p.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function bm(e){var t=new Wn(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Wn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Wn.prototype.stopImmediatePropagation=function(){this.g=!0},Wn.prototype.stopPropagation=function(){},re("shaka.util.FakeEvent",Wn);var Rc={Ii:"abrstatuschanged",Ji:"adaptation",Ki:"buffering",Li:"complete",Mi:"downloadfailed",Ni:"downloadheadersreceived",Oi:"drmsessionupdate",Qi:"emsg",gj:"prft",Error:"error",Ri:"expirationupdated",Si:"firstquartile",Ti:"gapjumped",Wi:"keystatuschanged",Yi:"loaded",Zi:"loading",aj:"manifestparsed",bj:"manifestupdated",cj:"mediaqualitychanged",Metadata:"metadata",dj:"midpoint",ej:"nospatialvideoinfo",fj:"onstatechange",ij:"ratechange",jj:"segmentappended",kj:"sessiondata",lj:"spatialvideoinfo",mj:"stalldetected",nj:"started",oj:"statechanged",pj:"streaming",qj:"textchanged",rj:"texttrackvisibility",sj:"thirdquartile",tj:"timelineregionadded",uj:"timelineregionenter",vj:"timelineregionexit",wj:"trackschanged",yj:"unloading",Aj:"variantchanged"};function Sr(){this.ia=new Et,this.Ud=this}Sr.prototype.addEventListener=function(e,t){this.ia&&this.ia.push(e,t)},Sr.prototype.removeEventListener=function(e,t){this.ia&&this.ia.remove(e,t)},Sr.prototype.dispatchEvent=function(e){if(!this.ia)return!0;var t=this.ia.get(e.type)||[],n=this.ia.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ud,e.currentTarget=this.Ud;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Sr.prototype.release=function(){this.ia=null};function Ol(){this.g=[]}function gu(e,t){e.g.push(t.finally(function(){mn(e.g,t)}))}Ol.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Kr(e,t,n,r,u,c){Sr.call(this),this.i=!1,this.m=new Ol,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.A=r||null,this.C=u||null,this.B=c||null,this.o=!1}Y(Kr,Sr),g=Kr.prototype,g.Cf=function(e){this.o=e};function Ko(e,t,n,r){n=n||zh;var u=Nc[e];(!u||n>=u.priority)&&(Nc[e]={priority:n,ge:t,bi:r===void 0?!1:r})}g.ei=function(e){this.g.add(e)},g.Bi=function(e){this.g.delete(e)},g.$g=function(){this.g.clear()},g.fi=function(e){this.h.add(e)},g.Ci=function(e){this.h.delete(e)},g.ah=function(){this.h.clear()};function Oi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}g.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Sr.prototype.release.call(this),this.m.destroy()},g.request=function(e,t,n){var r=this,u=new Vh;if(this.i){var c=Promise.reject(new gt(2,7,7001));return c.catch(function(){}),new xc(c,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ya(t.retryParameters):ua(),t.uris=Ya(t.uris),c=Cm(this,e,t,n);var f=c.va(function(){return Kh(r,e,t,n,new Zh(t.retryParameters,!1),0,null,u)}),h=f.va(function(te){return RE(r,e,te,n)}),E=Date.now(),S=0;c.promise.then(function(){S=Date.now()-E},function(){});var k=0;f.promise.then(function(){k=Date.now()},function(){});var G=h.va(function(te){var z=Date.now()-k,ve=te.response;return ve.timeMs+=S,ve.timeMs+=z,te.Ih||!r.l||ve.fromCache||t.method=="HEAD"||e!=Wa||r.l(ve.timeMs,ve.data.byteLength,Rm(n)),r.B&&r.B(e,ve,n),ve},function(te){throw te&&(te.severity=2),te});return c=new xc(G.promise,function(){return G.abort()},u),gu(this.m,c),c};function Cm(e,t,n,r){function u(h){c=c.va(function(){return n.body&&(n.body=Ti(n.body)),h(t,n,r)})}var c=Yu(void 0);e.A&&u(e.A),e=m(e.g);for(var f=e.next();!f.done;f=e.next())u(f.value);return c.va(void 0,function(h){throw h instanceof gt&&h.code==7001?h:new gt(2,1,1006,h)})}function Kh(e,t,n,r,u,c,f,h){e.o&&(n.uris[c]=n.uris[c].replace("http://","https://")),0<c&&e.C&&e.C(t,r,n.uris[c],n.uris[c-1]);var E=new si(n.uris[c]),S=E.kb,k=!1;S||(S=location.protocol,S=S.slice(0,-1),Ms(E,S),n.uris[c]=E.toString()),S=S.toLowerCase();var G=(S=Nc[S])?S.ge:null;if(!G)return pu(new gt(2,1,1e3,E));var te=S.bi,z=null,ve=null,Le=!1,De=!1,qe;return Im(Gh(u)).va(function(){if(e.i)return qh();qe=Date.now();var Te=0;n.requestStartTime=Date.now();var Qe=G(n.uris[c],n,t,function(xt,Vt,Bt){z&&z.stop(),ve&&ve.X(vt/1e3),e.l&&t==Wa&&(Te++,n.packetNumber=Te,e.l(xt,Vt,Rm(r),n),k=!0,h.g=Bt)},function(xt){e.j&&e.j(xt,n,t),De=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!te)return Qe;var Ue=n.retryParameters.connectionTimeout;Ue&&(z=new pr(function(){Le=!0,Qe.abort()}),z.X(Ue/1e3));var vt=n.retryParameters.stallTimeout;return vt&&(ve=new pr(function(){Le=!0,Qe.abort()})),Qe}).va(function(Te){z&&z.stop(),ve&&ve.stop(),Te.timeMs==null&&(Te.timeMs=Date.now()-qe);var Qe={response:Te,Ih:k};return!De&&e.j&&e.j(Te.headers,n,t),Qe},function(Te){if(z&&z.stop(),ve&&ve.stop(),e.s){var Qe=null,Ue=0;Te instanceof gt&&(Qe=Te,Te.code==1001&&(Ue=Te.data[1])),e.s(n,Qe,Ue,Le)}if(e.i)return qh();if(Le&&(Te=new gt(1,1,1003,n.uris[c],t)),Te instanceof gt){if(Te.code==7001)throw Te;if(Te.code==1010)throw f;if(Te.severity==1)return Qe=new Map().set("error",Te),Qe=new Wn("retry",Qe),e.dispatchEvent(Qe),c=(c+1)%n.uris.length,Kh(e,t,n,r,u,c,Te,h)}throw Te})}function RE(e,t,n,r){var u=Yu(void 0),c={};e=m(e.h);for(var f=e.next();!f.done;c={qe:c.qe},f=e.next())c.qe=f.value,u=u.va(function(h){return function(){var E=n.response;return E.data&&(E.data=Ti(E.data)),h.qe(t,E,r)}}(c));return u.va(function(){return n},function(h){var E=2;if(h instanceof gt){if(h.code==7001)throw h;E=h.severity}throw new gt(E,1,1007,h)})}function Rm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.md)return!1}return!0}re("shaka.net.NetworkingEngine",Kr),Kr.prototype.request=Kr.prototype.request,Kr.prototype.destroy=Kr.prototype.destroy,Kr.makeRequest=Oi,Kr.defaultRetryParameters=function(){return ua()},Kr.prototype.clearAllResponseFilters=Kr.prototype.ah,Kr.prototype.unregisterResponseFilter=Kr.prototype.Ci,Kr.prototype.registerResponseFilter=Kr.prototype.fi,Kr.prototype.clearAllRequestFilters=Kr.prototype.$g,Kr.prototype.unregisterRequestFilter=Kr.prototype.Bi,Kr.prototype.registerRequestFilter=Kr.prototype.ei,Kr.unregisterScheme=function(e){delete Nc[e]},Kr.registerScheme=Ko,Kr.prototype.setForceHTTPS=Kr.prototype.Cf;function Vh(){this.g=0}Kr.NumBytesRemainingClass=Vh;function xc(e,t,n){pi.call(this,e,t),this.h=n}Y(xc,pi),Kr.PendingRequest=xc;var Wa=1;Kr.RequestType={MANIFEST:0,SEGMENT:Wa,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Kr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var zh=3;Kr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:zh};var Nc={};function Wu(e){this.g=!1,this.h=new Rr,this.i=e}Wu.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function jr(e,t){if(e.g)throw t instanceof gt&&t.code==7003?t:new gt(2,7,7003,t)}function Hf(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function xE(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Ll(e){for(var t=new Map,n=m(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Mc(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function Dr(e,t){this.h=tn(e),this.i=t==xm,this.g=0}g=Dr.prototype,g.ka=function(){return this.g<this.h.byteLength},g.wa=function(){return this.g},g.getLength=function(){return this.h.byteLength},g.P=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw ks()}},g.ra=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw ks()}},g.M=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw ks()}},g.sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw ks()}},g.Cc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw ks()}if(2097151<t)throw new gt(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},g.sb=function(e){if(this.g+e>this.h.byteLength)throw ks();var t=Qn(this.h,this.g,e);return this.g+=e,t},g.skip=function(e){if(this.g+e>this.h.byteLength)throw ks();this.g+=e},g.mi=function(e){if(this.g<e)throw ks();this.g-=e},g.seek=function(e){if(0>e||e>this.h.byteLength)throw ks();this.g=e},g.hc=function(){for(var e=this.g;this.ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Qn(this.h,e,this.g-e),this.g+=1,Vr(e)};function ks(){return new gt(2,3,3e3)}re("shaka.util.DataViewReader",Dr),Dr.prototype.readTerminatedString=Dr.prototype.hc,Dr.prototype.seek=Dr.prototype.seek,Dr.prototype.rewind=Dr.prototype.mi,Dr.prototype.skip=Dr.prototype.skip,Dr.prototype.readBytes=Dr.prototype.sb,Dr.prototype.readUint64=Dr.prototype.Cc,Dr.prototype.readInt32=Dr.prototype.sg,Dr.prototype.readUint32=Dr.prototype.M,Dr.prototype.readUint16=Dr.prototype.ra,Dr.prototype.readUint8=Dr.prototype.P,Dr.prototype.getLength=Dr.prototype.getLength,Dr.prototype.getPosition=Dr.prototype.wa,Dr.prototype.hasMoreData=Dr.prototype.ka;var xm=1;Dr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:xm};function Fr(){this.i=[],this.h=[],this.g=!1}g=Fr.prototype,g.box=function(e,t){return e=Nm(e),this.i[e]=NE,this.h[e]=t,this},g.O=function(e,t){return e=Nm(e),this.i[e]=Mm,this.h[e]=t,this},g.stop=function(){this.g=!0},g.parse=function(e,t,n){for(e=new Dr(e,0),this.g=!1;e.ka()&&!this.g;)this.Ac(0,e,t,n)},g.Ac=function(e,t,n,r){var u=t.wa();if(r&&u+8>t.getLength())this.g=!0;else{var c=t.M(),f=t.M(),h=Kf(f),E=!1;switch(c){case 0:c=t.getLength()-u;break;case 1:if(r&&t.wa()+8>t.getLength()){this.g=!0;return}c=t.Cc(),E=!0}var S=this.h[f];if(S){var k=null,G=null;if(this.i[f]==Mm){if(r&&t.wa()+4>t.getLength()){this.g=!0;return}G=t.M(),k=G>>>24,G&=16777215}f=u+c,n&&f>t.getLength()&&(f=t.getLength()),r&&f>t.getLength()?this.g=!0:(r=f-t.wa(),t=0<r?t.sb(r):new Uint8Array(0),t=new Dr(t,0),S({name:h,parser:this,partialOkay:n||!1,version:k,flags:G,reader:t,size:c,start:u+e,has64BitSize:E}))}else t.skip(Math.min(u+c-t.wa(),t.getLength()-t.wa()))}};function yr(e){for(var t=kl(e);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function mu(e){for(var t=kl(e),n=e.reader.M(),r=0;r<n&&(e.parser.Ac(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function wi(e){var t=kl(e);for(e.reader.skip(78);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function Yh(e){var t=kl(e);e.reader.skip(8);var n=e.reader.ra();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.ka()&&!e.parser.g;)e.parser.Ac(e.start+t,e.reader,e.partialOkay)}function $u(e){return function(t){e(t.reader.sb(t.reader.getLength()-t.reader.wa()))}}function Nm(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Kf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function kl(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}re("shaka.util.Mp4Parser",Fr),Fr.headerSize=kl,Fr.typeToString=Kf,Fr.allData=$u,Fr.audioSampleEntry=Yh,Fr.visualSampleEntry=wi,Fr.sampleDescription=mu,Fr.children=yr,Fr.prototype.parseNext=Fr.prototype.Ac,Fr.prototype.parse=Fr.prototype.parse,Fr.prototype.stop=Fr.prototype.stop,Fr.prototype.fullBox=Fr.prototype.O,Fr.prototype.box=Fr.prototype.box;var NE=0,Mm=1;function Dm(e){var t=this;this.g=[],this.h=[],this.data=[],new Fr().box("moov",yr).box("moof",yr).O("pssh",function(n){if(!(1<n.version)){var r=Qn(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Ps(n.reader.sb(16))),0<n.version){r=n.reader.M();for(var u=0;u<r;u++){var c=Ps(n.reader.sb(16));t.h.push(c)}}}}).parse(e)}function Vf(e,t,n,r){var u=e.length,c=t.length+16+u;0<r&&(c+=4+16*n.size);var f=new Uint8Array(c),h=tn(f),E=0;if(h.setUint32(E,c),E+=4,h.setUint32(E,1886614376),E+=4,1>r?h.setUint32(E,0):h.setUint32(E,16777216),E+=4,f.set(t,E),E+=t.length,0<r)for(h.setUint32(E,n.size),E+=4,t=m(n),n=t.next();!n.done;n=t.next())n=du(n.value),f.set(n,E),E+=n.length;return h.setUint32(E,u),f.set(e,E+4),f}function Wh(e,t){return e=Ka(e),Fl(e,t)}function Fl(e,t){return e=ME(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Dc(e){return Oc.has(e)?Oc.get(e):""}function ME(e){function t(u,c){c=c===void 0?!1:c;for(var f=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){c=r+2,r=e.indexOf(">",r),c=e.substring(c,r);var h=c.indexOf(u);if(h==-1){var E=u.indexOf(".");0<E&&(h=c.indexOf(u.substring(0,E)))}if(h==-1)throw u=e.substring(0,r).split("\n"),Error("Unexpected close tag\nLine: "+(u.length-1)+"\nColumn: "+(u[u.length-1].length+1)+"\nChar: "+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){h=e.indexOf("]]>",r),h==-1?(f.push(e.substr(r+9)),r=e.length):(f.push(e.substring(r+9,h)),r=h+3);continue}r++;continue}e:{E=c,r++;var S=n(),k={};for(h=[];e.charCodeAt(r)!==62&&e[r];){var G=e.charCodeAt(r);if(64<G&&91>G||96<G&&123>G){G=n();for(var te=e.charCodeAt(r);te&&te!==39&&te!==34&&!(64<te&&91>te||96<te&&123>te)&&te!==62;)r++,te=e.charCodeAt(r);var z=r+1;if(r=e.indexOf(e[r],z),z=e.slice(z,r),te===39||te===34){if(r===-1){for(E={tagName:S,attributes:k,children:h,parent:null},S=0;S<h.length;S++)typeof h[S]!="string"&&(h[S].parent=E);h=E;break e}}else z=null,r--;G.startsWith("xmlns:")&&Oc.set(z,G.split(":")[1]),S==="tt"&&G==="xml:space"&&z==="preserve"&&(E=!0),k[G]=z}r++}for(e.charCodeAt(r-1)!==47?(r++,h=t(S,E)):r++,E={tagName:S,attributes:k,children:h,parent:null},S=h.length,k=0;k<S;k++)G=h[k],typeof G!="string"?G.parent=E:k==S-1&&G=="\n"&&h.pop();h=E}if(f.push(h),typeof h=="string")break;h.tagName[0]==="?"&&h.children&&(f.push.apply(f,T(h.children)),h.children=[])}else h=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),h=e.slice(h,r+1),c?0<h.length&&f.push(h):(f.length&&h.length==1&&h[0]=="\n"||0<h.trim().length)&&f.push(h),r++;return f}function n(){for(var u=r;"\r\n	>/= ".indexOf(e[r])===-1&&e[r];)r++;return e.slice(u,r)}var r=0;return t("")}function zf(e){return typeof e=="string"}function DE(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Wr(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function Ci(e){return typeof e=="string"?bo(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:bo(e))}function vu(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Ci(e))&&(e=e.trim()),e):null}function Ca(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var r=e.next();!r.done;r=e.next())Ca(r.value,t,n)}return n}function la(e,t){return e=Wr(e,t),e.length!=1?null:e[0]}function Fs(e,t,n){return e=Yf(e,t,n),e.length!=1?null:e[0]}function _r(e,t,n,r){r=r===void 0?null:r;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u==null?r:u}function yu(e,t,n){return t=Dc(t),e.attributes[t+":"+n]||null}function Yf(e,t,n){t=Dc(t);var r=[];if(e.children){e=m(e.children);for(var u=e.next();!u.done;u=e.next())(u=u.value)&&u.tagName===t+":"+n&&r.push(u)}return r}function ca(e,t,n){t=m(t);for(var r=t.next();!r.done;r=t.next())if(r=yu(e,r.value,n))return r;return null}function Wf(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function $a(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function $f(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Xu(e){return e=Number(e),e%1===0?e:null}function Us(e){return e=Number(e),e%1===0&&0<e?e:null}function Ro(e){return e=Number(e),e%1===0&&0<=e?e:null}function Pc(e){return e=Number(e),isNaN(e)?null:e}function $h(e){return e?e.toLowerCase()==="true":!1}function Pm(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Xh(e,t,n){t=t===void 0?!0:t,n=n===void 0?!0:n;var r=document.createElement(e.tagName),u;for(u in e.attributes)r.setAttribute(u,e.attributes[u]);if(t&&e.parent&&e.parent.tagName!="?xml"&&Xh(e.parent,!0,!1).appendChild(r),n)for(e=m(e.children),t=e.next();!t.done;t=e.next())t=t.value,n=void 0,typeof t=="string"?n=new Text(t):n=Xh(t,!1,!0),r.appendChild(n);return r}var Oc=new Map([]);function Lc(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.ia=this.da=!1,this.I=0,this.g=null,this.B=new Tt,this.i=new Map,this.A=new Map,this.l=new Rr,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.aa=new Map,this.ea=new Map,this.L=new pr(function(){return V(t)}),this.T=!1,this.N=[],this.Y=!1,this.K=new pr(function(){ye(t)}),this.l.catch(function(){}),this.j=new Wu(function(){return PE(t)}),this.ba=!1,this.F=this.G=null}g=Lc.prototype,g.destroy=function(){return this.j.destroy()};function PE(e){return Me(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,x(t,H(e),2);case 2:if(!e.m){t.u(3);break}return fe(t,4),x(t,e.m.setMediaKeys(null),6);case 6:ge(t,5);break;case 4:Re(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,X(t)}})}g.configure=function(e){this.h=e,this.K&&this.K.$a(this.h.updateExpirationTime)};function Om(e,t,n){return e.ia=!0,e.A=new Map,e.T=n,Fm(e,t)}function Lm(e,t,n){e.A=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.T=0<e.A.size,Fm(e,t)}function km(e,t,n,r,u,c){var f=new Map;return u={audioCapabilities:u,videoCapabilities:c,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},u.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],f.set(t,u),tp(e,f,[])}function Fm(e,t){var n,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te;return Me(function(Qe){if(Qe.g==1){if(n=FE(e))for(r=m(t),u=r.next();!u.done;u=r.next())c=u.value,c.video&&(c.video.drmInfos=[n]),c.audio&&(c.audio.drmInfos=[n]);for(f=t.some(function(Ue){return!!(Ue.video&&Ue.video.drmInfos.length||Ue.audio&&Ue.audio.drmInfos.length)}),f||(h=Ll(e.h.servers),pe(t,h)),E=new Set,S=m(t),u=S.next();!u.done;u=S.next())for(k=u.value,G=we(k),te=m(G),z=te.next();!z.done;z=te.next())ve=z.value,E.add(ve);for(Le=m(E),z=Le.next();!z.done;z=Le.next())De=z.value,Oe(De,Ll(e.h.servers),Ll(e.h.advanced||{}),e.h.keySystemsMapping);return x(Qe,Oh(t,e.T,e.ba,e.h.preferredKeySystems),2)}return qe=f||Object.keys(e.h.servers).length,qe?(Te=tp(e,void 0,t),Qe.return(f?Te:Te.catch(function(){}))):(e.da=!0,Qe.return(Promise.resolve()))})}function Qh(e){var t;return Me(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return x(n,e.G,3);case 3:return jr(e.j),n.return();case 2:return fe(n,4),e.G=e.m.setMediaKeys(e.s),x(n,e.G,6);case 6:ge(n,5);break;case 4:t=Re(n),e.o(new gt(2,6,6003,t.message));case 5:jr(e.j),X(n)}})}function OE(e,t){return Me(function(n){if(n.g==1)return x(n,Qh(e),2);Ul(e,t.initDataType,Qn(t.initData)),X(n)})}g.Vc=function(e){var t=this;return Me(function(n){if(n.g==1)return t.s?(t.m=e,t.B.na(t.m,"play",function(){for(var r=m(t.N),u=r.next();!u.done;u=r.next())P(t,u.value);t.Y=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return H(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?x(n,Qh(t),2):n.u(2)):(t.B.na(e,"encrypted",function(){t.o(new gt(2,6,6010))}),n.return());Jh(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return OE(t,r)}),X(n)})};function Um(e){var t,n,r,u,c;return Me(function(f){switch(f.g){case 1:if(!e.s||!e.g)return f.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){f.u(2);break}return t=Oi([e.g.serverCertificateUri],e.h.retryParameters),fe(f,3),n=e.C.zb.request(5,t),x(f,n.promise,5);case 5:r=f.h,e.g.serverCertificate=Qn(r.data),ge(f,4);break;case 3:throw u=Re(f),new gt(2,6,6017,u);case 4:if(e.j.g)return f.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?f.return():(fe(f,6),x(f,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:ge(f,0);break;case 6:throw c=Re(f),new gt(2,6,6004,c.message)}})}function LE(e,t){var n,r,u;return Me(function(c){if(c.g==1)return x(c,Zm(e,t,{initData:null,initDataType:null}),2);if(c.g!=3)return n=c.h,n?(r=[],(u=e.i.get(n))&&(u.ab=new Rr,r.push(u.ab)),r.push(n.remove()),x(c,Promise.all(r),3)):c.return();e.i.delete(n),X(c)})}function Jh(e){var t,n,r,u,c;return Me(function(f){if(f.g==1)return e.A.size?(e.A.forEach(function(h,E){Zm(e,E,h)}),x(f,e.l,3)):f.u(2);if(f.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&me(e))return f.return(e.l);e.l=new Rr,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=m(n),u=r.next();!u.done;u=r.next())c=u.value,Ul(e,c.initDataType,c.initData);return ie(e)&&e.l.resolve(),f.return(e.l)})}function Ul(e,t,n){if(n.length){var r=e.i.values();r=m(r);for(var u=r.next();!u.done;u=r.next())if(zi(n,u.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&ie(e)&&(e.l.resolve(),e.l=new Rr,e.l.catch(function(){})),L(e,t,n,e.g.sessionType)}}function Bm(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function ep(e){return e=e.i.keys(),e=Hf(e,function(t){return t.sessionId}),Array.from(e)}g.Se=function(){var e=this,t=this.i.keys();return t=Hf(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},g.cd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},g.Kd=function(){return Mc(this.ea)};function tp(e,t,n){var r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe;return Me(function(Te){switch(Te.g){case 1:if(r=new Map,n.length){u=kE(e,n,r),Te.u(2);break}return x(Te,jm(e,t),3);case 3:u=Te.h;case 2:if(c=u,!c)throw new gt(2,6,6001);for(jr(e.j),fe(Te,4),e.H.clear(),f=c.getConfiguration(),h=f.audioCapabilities||[],E=f.videoCapabilities||[],S=m(h),k=S.next();!k.done;k=S.next())G=k.value,e.H.add(G.contentType.toLowerCase());for(te=m(E),k=te.next();!k.done;k=te.next())z=k.value,e.H.add(z.contentType.toLowerCase());if(n.length){var Qe=c.keySystem,Ue=r.get(c.keySystem),vt=[],xt=[],Vt=[],Bt=[],_t=[],Zt=new Set;He(Ue,vt,xt,Bt,Vt,_t,Zt);var ln=e.T?"persistent-license":"temporary";for(Qe={keySystem:Qe,encryptionScheme:vt[0],licenseServerUri:xt[0],distinctiveIdentifierRequired:Ue[0].distinctiveIdentifierRequired,persistentStateRequired:Ue[0].persistentStateRequired,sessionType:Ue[0].sessionType||ln,audioRobustness:Ue[0].audioRobustness||"",videoRobustness:Ue[0].videoRobustness||"",serverCertificate:Bt[0],serverCertificateUri:Vt[0],initData:_t,keyIds:Zt},Ue=m(Ue),vt=Ue.next();!vt.done;vt=Ue.next())vt=vt.value,vt.distinctiveIdentifierRequired&&(Qe.distinctiveIdentifierRequired=vt.distinctiveIdentifierRequired),vt.persistentStateRequired&&(Qe.persistentStateRequired=vt.persistentStateRequired);Ue=Qe}else Ue=c.keySystem,Qe=t.get(c.keySystem),vt=[],xt=[],Vt=[],Bt=[],_t=[],Zt=new Set,He(Qe.drmInfos,vt,xt,Bt,Vt,_t,Zt),Ue={keySystem:Ue,encryptionScheme:vt[0],licenseServerUri:xt[0],distinctiveIdentifierRequired:Qe.distinctiveIdentifier=="required",persistentStateRequired:Qe.persistentState=="required",sessionType:Qe.sessionTypes[0]||"temporary",audioRobustness:(Qe.audioCapabilities?Qe.audioCapabilities[0].robustness:"")||"",videoRobustness:(Qe.videoCapabilities?Qe.videoCapabilities[0].robustness:"")||"",serverCertificate:Bt[0],serverCertificateUri:Vt[0],initData:_t,keyIds:Zt};if(e.g=Ue,!e.g.licenseServerUri)throw new gt(2,6,6012,e.g.keySystem);return x(Te,c.createMediaKeys(),6);case 6:if(ve=Te.h,jr(e.j),e.s=ve,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){Te.u(7);break}return fe(Te,8),x(Te,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(Le=Te.h,Le!="usable")throw new gt(2,6,6018);jr(e.j),ge(Te,7,4);break;case 8:throw De=Re(Te,4),De instanceof gt?De:new gt(2,6,6019,De.message);case 7:return e.da=!0,x(Te,Um(e),11);case 11:jr(e.j),ge(Te,0);break;case 4:throw qe=Re(Te),jr(e.j,qe),e.g=null,e.H.clear(),qe instanceof gt?qe:new gt(2,6,6002,qe.message)}})}function kE(e,t,n){for(var r=m(t),u=r.next();!u.done;u=r.next()){var c=m(we(u.value));for(u=c.next();!u.done;u=c.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new gt(2,6,6e3);for(r={},e=m(e.h.preferredKeySystems),u=e.next();!u.done;r={pe:r.pe},u=e.next())for(r.pe=u.value,c=m(t),u=c.next();!u.done;u=c.next())if(u=u.value.decodingInfos.find(function(S){return function(k){return k.supported&&k.keySystemAccess!=null&&k.keySystemAccess.keySystem==S.pe}}(r)))return u.keySystemAccess;for(e=m([!0,!1]),u=e.next();!u.done;u=e.next())for(r=u.value,c=m(t),u=c.next();!u.done;u=c.next()){var f=m(u.value.decodingInfos);for(u=f.next();!u.done;u=f.next()){var h=u.value;if(h.supported&&h.keySystemAccess){u=n.get(h.keySystemAccess.keySystem);var E=m(u);for(u=E.next();!u.done;u=E.next())if(!!u.value.licenseServerUri==r)return h.keySystemAccess}}}return null}function jm(e,t){var n,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De;return Me(function(qe){switch(qe.g){case 1:if(t.size==1&&t.has(""))throw new gt(2,6,6e3);for(r=m(t.values()),u=r.next();!u.done;u=r.next())c=u.value,c.audioCapabilities.length==0&&delete c.audioCapabilities,c.videoCapabilities.length==0&&delete c.videoCapabilities;f=m(e.h.preferredKeySystems),h=f.next();case 2:if(h.done){qe.u(4);break}if(E=h.value,!t.has(E)){qe.u(3);break}return S=t.get(E),fe(qe,6),x(qe,navigator.requestMediaKeySystemAccess(E,[S]),8);case 8:return n=qe.h,qe.return(n);case 6:Re(qe);case 7:jr(e.j);case 3:h=f.next(),qe.u(2);break;case 4:k=m([!0,!1]),G=k.next();case 9:if(G.done){qe.u(11);break}te=G.value,z=m(t.keys()),h=z.next();case 12:if(h.done){G=k.next(),qe.u(9);break}if(ve=h.value,Le=t.get(ve),De=Le.drmInfos.some(function(Te){return!!Te.licenseServerUri}),De!=te){qe.u(13);break}return fe(qe,15),x(qe,navigator.requestMediaKeySystemAccess(ve,[Le]),17);case 17:return n=qe.h,qe.return(n);case 15:Re(qe);case 16:jr(e.j);case 13:h=z.next(),qe.u(12);break;case 11:return qe.return(n)}})}function FE(e){return e=Ll(e.h.clearKeys),e.size==0?null:Ih(e)}function kc(e){ie(e)&&e.l.resolve()}function Fc(e,t){new pr(function(){t.loaded=!0,kc(e)}).X($e)}function Zm(e,t,n){var r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:try{r=e.s.createSession("persistent-license")}catch(G){return u=new gt(2,6,6005,G.message),e.o(u),k.return(Promise.reject(u))}return e.B.D(r,"message",function(G){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(G):P(e,G)}),e.B.D(r,"keystatuseschange",function(G){return B(e,G)}),c={initData:n.initData,initDataType:n.initDataType,loaded:!1,lf:1/0,ab:null,type:"persistent-license"},e.i.set(r,c),fe(k,2),x(k,r.load(t),4);case 4:return f=k.h,jr(e.j),f||(e.i.delete(r),h=e.h.persistentSessionOnlinePlayback?1:2,e.o(new gt(h,6,6013)),c.loaded=!0),Fc(e,c),kc(e),k.return(r);case 2:E=Re(k),jr(e.j,E),e.i.delete(r),S=e.h.persistentSessionOnlinePlayback?1:2,e.o(new gt(S,6,6005,E.message)),c.loaded=!0,kc(e);case 3:return k.return(Promise.resolve())}})}function L(e,t,n,r){try{var u=e.s.createSession(r)}catch(c){e.o(new gt(2,6,6005,c.message));return}e.B.D(u,"message",function(c){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.Y?e.N.push(c):P(e,c)}),e.B.D(u,"keystatuseschange",function(c){return B(e,c)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,lf:1/0,ab:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(c){t=c,c instanceof gt||(t=new gt(2,6,6016,c)),e.o(t);return}e.h.logLicenseExchange&&fu(n),u.generateRequest(t,n).catch(function(c){if(!e.j.g){e.i.delete(u);var f=c.errorCode;if(f&&f.systemCode){var h=f.systemCode;0>h&&(h+=Math.pow(2,32)),h="0x"+h.toString(16)}e.o(new gt(2,6,6006,c.message,c,h))}})}function P(e,t){var n,r,u,c,f,h,E,S,k,G,te,z,ve;Me(function(Le){switch(Le.g){case 1:if(n=t.target,e.h.logLicenseExchange&&fu(t.message),r=e.i.get(n),u=e.g.licenseServerUri,c=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&c&&c.individualizationServer&&(u=c.individualizationServer),f=Oi([u],e.h.retryParameters),f.body=t.message,f.method="POST",f.licenseRequestType=t.messageType,f.sessionId=n.sessionId,f.drmInfo=e.g,r&&(f.initData=r.initData,f.initDataType=r.initDataType),Bm(e.g.keySystem)){var De=Ha(f.body,!0,!0);if(De.includes("PlayReadyKeyMessage")){De=Fl(De,"PlayReadyKeyMessage");var qe=Ca(De,"HttpHeader");qe=m(qe);for(var Te=qe.next();!Te.done;Te=qe.next()){var Qe=Te.value;Te=Ca(Qe,"name")[0],Qe=Ca(Qe,"value")[0],f.headers[Ci(Te)]=Ci(Qe)}De=Ca(De,"Challenge")[0],f.body=Ho(Ci(De))}else f.headers["Content-Type"]="text/xml; charset=utf-8"}return h=Date.now(),fe(Le,2),S=e.C.zb.request(2,f),x(Le,S.promise,4);case 4:E=Le.h,ge(Le,3);break;case 2:return k=Re(Le),e.j.g||(G=new gt(2,6,6007,k),e.i.size==1?(e.o(G),r&&r.ab&&r.ab.reject(G)):(r&&r.ab&&r.ab.reject(G),e.i.delete(n),ie(e)&&(e.l.resolve(),e.L.X(.1)))),Le.return();case 3:return e.j.g?Le.return():(e.I+=(Date.now()-h)/1e3,e.h.logLicenseExchange&&fu(E.data),fe(Le,5),x(Le,n.update(E.data),7));case 7:ge(Le,6);break;case 5:return te=Re(Le),z=new gt(2,6,6008,te.message),e.o(z),r&&r.ab&&r.ab.reject(z),Le.return();case 6:if(e.j.g)return Le.return();ve=new Wn("drmsessionupdate"),e.C.onEvent(ve),r&&(r.ab&&r.ab.resolve(),Fc(e,r)),X(Le)}})}function B(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(c,f){if(typeof f=="string"){var h=f;f=c,c=h}if(Bm(e.g.keySystem)&&f.byteLength==16&&(Al()||xr())){h=tn(f);var E=h.getUint32(0,!0),S=h.getUint16(4,!0),k=h.getUint16(6,!0);h.setUint32(0,E,!1),h.setUint16(4,S,!1),h.setUint16(6,k,!1)}c!="status-pending"&&(n.loaded=!0),c=="expired"&&(r=!0),f=Ps(f).slice(0,32),e.aa.set(f,c)});var u=t.expiration-Date.now();(0>u||r&&1e3>u)&&n&&!n.ab&&(e.i.delete(t),t.close().catch(function(){})),ie(e)&&(e.l.resolve(),e.L.X(Ee))}function V(e){var t=e.aa,n=e.ea;n.clear(),t.forEach(function(r,u){return n.set(u,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new gt(2,6,6014)),e.C.ee(Mc(n))}function ee(){var e,t,n,r,u,c,f,h;return Me(function(E){return E.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},r={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},u=[r,n],c=new Map,f=function(S){var k,G,te;return Me(function(z){switch(z.g){case 1:if(fe(z,2),S==="org.w3.clearkey"&&ys())throw Error("Unsupported keySystem");return x(z,navigator.requestMediaKeySystemAccess(S,u),4);case 4:return k=z.h,te=(G=k.getConfiguration().sessionTypes)?G.includes("persistent-license"):!1,Ou()&&(te=!1),c.set(S,{persistentState:te}),x(z,k.createMediaKeys(),5);case 5:ge(z,0);break;case 2:Re(z),c.set(S,null),X(z)}})},h=e.map(function(S){return f(S)}),x(E,Promise.all(h),2)):E.return(Mc(c))})}function J(e){var t;return Me(function(n){if(n.g==1)return t=new Promise(function(r,u){new pr(u).X(Ze)}),fe(n,2),x(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return ge(n,0);Re(n),X(n)})}function H(e){var t;return Me(function(n){return t=Array.from(e.i.entries()),e.i.clear(),x(n,Promise.all(t.map(function(r){r=m(r);var u=r.next().value,c=r.next().value;return Me(function(f){if(f.g==1)return fe(f,2),e.ia||e.A.has(u.sessionId)||c.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?x(f,J(u),5):x(f,u.remove(),5);if(f.g!=2)return ge(f,0);Re(f),X(f)})})),0)})}function ne(e,t){return e.length&&t.length&&e!==t?0<ce(e,t).length:!0}function ce(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var u=m(t),c=u.next();!c.done;c=u.next())if(c=c.value,r.keySystem==c.keySystem){u=new Map;for(var f=m((r.initData||[]).concat(c.initData||[])),h=f.next();!h.done;h=f.next())h=h.value,u.set(h.keyId,h);u=Array.from(u.values()),f=r.keyIds&&c.keyIds?new Set([].concat(T(r.keyIds),T(c.keyIds))):r.keyIds||c.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||c.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||c.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||c.persistentStateRequired,videoRobustness:r.videoRobustness||c.videoRobustness,audioRobustness:r.audioRobustness||c.audioRobustness,serverCertificate:r.serverCertificate||c.serverCertificate,serverCertificateUri:r.serverCertificateUri||c.serverCertificateUri,initData:u,keyIds:f});break}}return n}function we(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function ye(e){e.i.forEach(function(t,n){var r=t.lf,u=n.expiration;isNaN(u)&&(u=1/0),u!=r&&(e.C.onExpirationUpdated(n.sessionId,u),t.lf=u)})}function ie(e){return e=e.i.values(),xE(e,function(t){return t.loaded})}function me(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.aa.get(n.value)!=="usable")return!1;return!0}function pe(e,t){var n=[];for(t.forEach(function(r,u){n.push({keySystem:u,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function He(e,t,n,r,u,c,f){var h=[],E={};e=m(e);for(var S=e.next();!S.done;E={la:E.la},S=e.next()){if(E.la=S.value,t.includes(E.la.encryptionScheme)||t.push(E.la.encryptionScheme),E.la.keySystem=="org.w3.clearkey"&&E.la.licenseServerUri.startsWith("data:application/json;base64,")?h.includes(E.la.licenseServerUri)||h.push(E.la.licenseServerUri):n.includes(E.la.licenseServerUri)||n.push(E.la.licenseServerUri),u.includes(E.la.serverCertificateUri)||u.push(E.la.serverCertificateUri),E.la.serverCertificate&&(r.some(function(te){return function(z){return zi(z,te.la.serverCertificate)}}(E))||r.push(E.la.serverCertificate)),E.la.initData){S={};for(var k=m(E.la.initData),G=k.next();!G.done;S={vd:S.vd},G=k.next())S.vd=G.value,c.some(function(te){return function(z){var ve=te.vd;return z.keyId&&z.keyId==ve.keyId?!0:z.initDataType==ve.initDataType&&zi(z.initData,ve.initData)}}(S))||c.push(S.vd)}if(E.la.keyIds)for(S=m(E.la.keyIds),k=S.next();!k.done;k=S.next())f.add(k.value)}if(h.length==1)n.push(h[0]);else if(0<h.length){for(t=[],h=m(h),r=h.next();!r.done;r=h.next())r=p.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,T(r.keys));h=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+p.btoa(h))}}function Oe(e,t,n,r){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(u)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[u]&&(e.keySystem=r[u]),p.cast&&p.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var Ze=1,$e=5,Ee=.5,ke=new ia(function(){return Ti(new Uint8Array([0]))});/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Ae(e,t,n){this.h=e,this.i=t,this.g=n}function Ge(e,t){return Me(function(n){return n.g==1?x(n,Z(e,t),2):n.return(le(e,t))})}function Z(e,t){return Me(function(n){if(n.g==1)return x(n,hm(e.g,t,e.h.drm.preferredKeySystems),2);if(!t.variants.some(Uf))throw new gt(2,4,4032);X(n)})}function le(e,t){var n=wc(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var u=m(t.variants),c=u.next();!c.done;c=u.next())c=c.value,ae(e,r.keySystem,c.video),ae(e,r.keySystem,c.audio);se(e,t)}return n}function ae(e,t,n){if(n){n=m(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=m(r.initData||[]);for(var u=r.next();!u.done;u=r.next())u=u.value,Ul(e.g,u.initDataType,u.initData)}}}function se(e,t){e=e.g?e.g.Kd():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,u=!1,c=new Set,f=new Set;t=m(t.variants);for(var h=t.next();!h.done;h=t.next()){h=h.value;var E=[];h.audio&&E.push(h.audio),h.video&&E.push(h.video),E=m(E);for(var S=E.next();!S.done;S=E.next())if(S=S.value,S.keyIds.size){S=m(S.keyIds);for(var k=S.next();!k.done;k=S.next()){k=k.value;var G=e[n?"00":k];G?Q.includes(G)&&f.add(G):c.add(k)}}h.allowedByApplication?h.allowedByKeySystem&&(r=!0):u=!0}if(!r)throw e={hasAppRestrictions:u,missingKeys:Array.from(c),restrictedKeyStatuses:Array.from(f)},new gt(2,4,4012,e)}var Q=["output-restricted","internal-error"];function Pe(){}function be(e,t){if(t){var n=Fe[t.toLowerCase()];if(n)return n}throw new gt(2,4,4e3,e,t)}re("shaka.media.ManifestParser",Pe),Pe.unregisterParserByMime=function(e){delete Fe[e]},Pe.registerParserByMime=function(e,t){Fe[e]=t},Pe.registerParserByExtension=function(){dr("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Pe.AccessibilityPurpose={zj:"visually impaired",Ui:"hard of hearing"};var Fe={};function xe(e){function t(){r=!0}function n(S){c.push(S),yr(S)}e=Qn(e);var r=!1,u,c=[],f=[];if(new Fr().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).O("stsd",function(S){u=S,c.push(S),mu(S)}).O("encv",t).O("enca",t).O("dvav",function(S){f.push({box:S,Xa:1701733238})}).O("dva1",function(S){f.push({box:S,Xa:1701733238})}).O("dvh1",function(S){f.push({box:S,Xa:1701733238})}).O("dvhe",function(S){f.push({box:S,Xa:1701733238})}).O("hev1",function(S){f.push({box:S,Xa:1701733238})}).O("hvc1",function(S){f.push({box:S,Xa:1701733238})}).O("avc1",function(S){f.push({box:S,Xa:1701733238})}).O("avc3",function(S){f.push({box:S,Xa:1701733238})}).O("ac-3",function(S){f.push({box:S,Xa:1701733217})}).O("ec-3",function(S){f.push({box:S,Xa:1701733217})}).O("ac-4",function(S){f.push({box:S,Xa:1701733217})}).O("mp4a",function(S){f.push({box:S,Xa:1701733217})}).parse(e),r)return e;if(f.length==0||!u)throw Ps(e),new gt(2,3,3019);f.reverse();for(var h=m(f),E=h.next();!E.done;E=h.next())E=E.value,e=he(e,u,E.box,c,E.Xa);return e}function he(e,t,n,r,u){var c=Xe.value(),f=e.subarray(n.start,n.start+n.size),h=tn(f),E=new Uint8Array(n.size+c.byteLength);for(E.set(f,0),f=tn(E),f.setUint32(4,u),E.set(c,n.size),u=h.getUint32(4),f.setUint32(n.size+16,u),Ne(E,0,E.byteLength),u=new Uint8Array(e.byteLength+E.byteLength),n=gs()?n.start:n.start+n.size,c=e.subarray(n),u.set(e.subarray(0,n)),u.set(E,n),u.set(c,n+E.byteLength),e=m(r),r=e.next();!r.done;r=e.next())r=r.value,Ne(u,r.start,r.size+E.byteLength);return E=tn(u,t.start),t=kl(t),e=E.getUint32(t),E.setUint32(t,e+1),u}function Ne(e,t,n){e=tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var Xe=new ia(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function ht(e,t,n,r,u,c,f){this.$=e,this.Aa=t,this.ja=n,this.ff=r===void 0?null:r,this.timescale=u===void 0?null:u,this.g=c===void 0?null:c,this.aesKey=f===void 0?null:f,this.mimeType=this.codecs=null}ht.prototype.ac=function(){return this.Aa},ht.prototype.Yb=function(){return this.ja},ht.prototype.ed=function(){return this.g};function lt(e,t){return e===t?!0:e&&t?e.ac()==t.ac()&&e.Yb()==t.Yb()&&Zn(e.$().sort(),t.$().sort())&&zi(e.ed(),t.ed()):e==t}re("shaka.media.InitSegmentReference",ht),ht.prototype.getEndByte=ht.prototype.Yb,ht.prototype.getStartByte=ht.prototype.ac;function et(e,t,n,r,u,c,f,h,E,S,k,G,te,z,ve,Le){for(S=S===void 0?[]:S,z=z===void 0?jt:z,this.startTime=e,this.i=this.endTime=t,this.C=n,this.Aa=r,this.ja=u,this.ca=c,this.timestampOffset=f,this.appendWindowStart=h,this.appendWindowEnd=E,this.g=S,this.tilesLayout=k===void 0?"":k,this.A=G===void 0?null:G,this.h=te===void 0?null:te,this.status=z,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=ve===void 0?null:ve,this.s=null,this.j=0,this.o=Le===void 0?!1:Le,this.Wd=this.md=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ng();this.o&&this.g.length&&this.g[this.g.length-1].mg(),this.B=this.mimeType=this.codecs=null}g=et.prototype,g.$=function(){return this.C()},g.getStartTime=function(){return this.startTime},g.mh=function(){return this.endTime},g.ac=function(){return this.Aa},g.Yb=function(){return this.ja},g.Dh=function(){return this.tilesLayout},g.Ch=function(){return this.A},g.bc=function(){return this.status},g.Vh=function(){this.status=Ht},g.ef=function(){this.preload=!0},g.Ph=function(){return this.preload},g.Zd=function(){this.l=!1},g.Mh=function(){return this.l},g.ng=function(){this.md=!0},g.Oh=function(){return this.md},g.mg=function(){this.Wd=!0},g.Nh=function(){return this.Wd},g.lg=function(){this.m=!0},g.Jh=function(){return this.m},g.Eg=function(e){this.s=e},g.Bh=function(){return this.s},g.offset=function(e){this.startTime+=e,this.endTime+=e,this.i+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.i+=e},g.Ff=function(e){this.h==null?de("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},g.yi=function(e){this.B=e},g.ed=function(){return this.B};function pt(e,t){e.ca=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())pt(n.value,t)}re("shaka.media.SegmentReference",et),et.prototype.getSegmentData=et.prototype.ed,et.prototype.setSegmentData=et.prototype.yi,et.prototype.syncAgainst=et.prototype.Ff,et.prototype.offset=et.prototype.offset,et.prototype.getThumbnailSprite=et.prototype.Bh,et.prototype.setThumbnailSprite=et.prototype.Eg,et.prototype.hasByterangeOptimization=et.prototype.Jh,et.prototype.markAsByterangeOptimization=et.prototype.lg,et.prototype.isLastPartial=et.prototype.Nh,et.prototype.markAsLastPartial=et.prototype.mg,et.prototype.isPartial=et.prototype.Oh,et.prototype.markAsPartial=et.prototype.ng,et.prototype.isIndependent=et.prototype.Mh,et.prototype.markAsNonIndependent=et.prototype.Zd,et.prototype.isPreload=et.prototype.Ph,et.prototype.markAsPreload=et.prototype.ef,et.prototype.markAsUnavailable=et.prototype.Vh,et.prototype.getStatus=et.prototype.bc,et.prototype.getTileDuration=et.prototype.Ch,et.prototype.getTilesLayout=et.prototype.Dh,et.prototype.getEndByte=et.prototype.Yb,et.prototype.getStartByte=et.prototype.ac,et.prototype.getEndTime=et.prototype.mh,et.prototype.getStartTime=et.prototype.getStartTime,et.prototype.getUris=et.prototype.$;var jt=0,Ht=1;et.Status={Hi:jt,xj:Ht,$i:2};function Ft(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ut(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function An(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=m(yt(e));for(var r=e.next();!r.done;r=e.next()){var u=r.value;r=u.start,u=u.end,u>t&&(n+=u-Math.max(r,t))}return n}function it(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=yt(e).findIndex(function(r,u,c){return r.start>t&&(u==0||c[u-1].end-t<=n)}),0<=e?e:null)}function yt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function $t(){}function Nt(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function en(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Jt(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Wt(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=Vr(Qn(e.data,1,n)),u=e.data[2+n],c=e.data.subarray(3+n).indexOf(0);if(c===-1)return null;var f=Vr(Qn(e.data,3+n,c)),h;return r==="-->"?h=Vr(Qn(e.data,4+n+c)):h=Ti(e.data.subarray(4+n+c)),t.mimeType=r,t.pictureType=u,t.description=f,t.data=h,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=Vr(Qn(e.data,1,r)),e=Vr(Qn(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Vr(Qn(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ti(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Vr(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Vr(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ti(e.data),t):null}function Dn(e){for(var t=0,n=[];Nt(e,t);){var r=Jt(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var u=e.subarray(t),c=Jt(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:c,data:u.subarray(10,10+c)},(c=Wt(u))&&n.push(c),t+=u.size+10}en(e,t)&&(t+=10)}return n}function xn(e,t){for(var n=t=t===void 0?0:t,r=0;Nt(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Jt(e,t+6),en(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}re("shaka.util.Id3Utils",$t),$t.getID3Data=xn,$t.getID3Frames=Dn;function rr(e,t){var n=null,r=null,u=null,c=e.M();return t&1&&(u=e.Cc()),t&2&&e.skip(4),t&8&&(n=e.M()),t&16&&(r=e.M()),{trackId:c,Wf:n,fh:r,Bj:u}}function ir(e,t){return t==1?(t=e.M(),e=e.M(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.M()}}function bt(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.M(),e.skip(4),e=e.ra(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Xt(e,t,n){var r=e.M(),u=[],c=null;n&1&&(c=e.M()),n&4&&e.skip(4);for(var f=0;f<r;f++){var h={wf:null,sampleSize:null,he:null};n&256&&(h.wf=e.M()),n&512&&(h.sampleSize=e.M()),n&1024&&e.skip(4),n&2048&&(h.he=t==0?e.M():e.sg()),u.push(h)}return{Fj:r,vg:u,eh:c}}function Gt(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.M();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.ra()+e.ra()/16,e=e.ra()+e.ra()/16,{trackId:n,width:t,height:e}}function un(e){return e=e.M(),{Ea:Kf(e)}}function vn(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Pn(e){return(10>e?"0":"")+e}function Nn(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Qn(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Fn(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new Dr(n,0).M(),e.g=8*r,e.i-=r)}function Gn(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Fn(e)}e.h<<=t,e.g-=t}function Ct(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Fn(e),n=t-n,0<n?r<<n|Ct(e,n):r}function Sn(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Fn(e),t+Sn(e)}function En(e){Gn(e,1+Sn(e))}function Lt(e){var t=Sn(e);return Ct(e,t+1)-1}function On(e){return e=Lt(e),1&e?1+e>>>1:-1*(e>>>1)}function ct(e){return Ct(e,1)===1}function nt(e){return Ct(e,8)}function Kt(e,t){for(var n=8,r=8,u=0;u<t;u++)r!==0&&(r=On(e),r=(n+r+256)%256),n=r===0?n:r}function ze(e){return nt(e),Lt(e),Lt(e)}re("shaka.util.ExpGolomb",Nn);function Ve(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}g=Ve.prototype,g.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},g.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Ai(e)),n=e.length-(e.length+t)%188,r=!1,u=t;u<n;u+=188)if(e[u]==71){var c=!!(e[u+1]&64),f=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var h=u+5+e[u+4];if(h==u+188)continue}else h=u+4;switch(f){case 0:c&&(h+=e[h]+1),this.G=(e[h+10]&31)<<8|e[h+11];break;case 17:case 8191:break;case this.G:c&&(h+=e[h]+1),c=e,f={audio:-1,video:-1,Sd:-1,audioCodec:"",videoCodec:""};var E=h+3+((c[h+1]&15)<<8|c[h+2])-4;for(h+=12+((c[h+10]&15)<<8|c[h+11]);h<E;){var S=(c[h+1]&31)<<8|c[h+2],k=(c[h+3]&15)<<8|c[h+4];switch(c[h]){case 6:if(0<k)for(var G=h+5,te=k;2<te;){var z=c[G+1]+2;switch(c[G]){case 5:var ve=Ah(c.subarray(G+2,G+z));f.audio==-1&&ve==="Opus"?(f.audio=S,f.audioCodec="opus"):f.video==-1&&ve==="AV01"&&(f.video=S,f.videoCodec="av1");break;case 106:f.audio==-1&&(f.audio=S,f.audioCodec="ac3");break;case 122:f.audio==-1&&(f.audio=S,f.audioCodec="ec3");break;case 124:f.audio==-1&&(f.audio=S,f.audioCodec="aac");break;case 127:f.audioCodec=="opus"&&(ve=null,c[G+2]===128&&(ve=c[G+3]),ve!=null&&(this.F={channelCount:ve&15?ve&15:2,Zg:ve,sampleRate:48e3}))}G+=z,te-=z}break;case 15:f.audio==-1&&(f.audio=S,f.audioCodec="aac");break;case 17:f.audio==-1&&(f.audio=S,f.audioCodec="aac-loas");break;case 21:f.Sd==-1&&(f.Sd=S);break;case 27:f.video==-1&&(f.video=S,f.videoCodec="avc");break;case 3:case 4:f.audio==-1&&(f.audio=S,f.audioCodec="mp3");break;case 36:f.video==-1&&(f.video=S,f.videoCodec="hvc");break;case 129:f.audio==-1&&(f.audio=S,f.audioCodec="ac3");break;case 132:case 135:f.audio==-1&&(f.audio=S,f.audioCodec="ec3")}h+=k+5}c=f,c.video!=-1&&(this.I=c.video,this.m=c.videoCodec),c.audio!=-1&&(this.B=c.audio,this.A=c.audioCodec),c.Sd!=-1&&(this.C=c.Sd),r&&!this.H&&(r=!1,u=t-188),this.H=!0;break;case this.I:h=e.subarray(h,u+188),c?this.j.push([h]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(h);break;case this.B:h=e.subarray(h,u+188),c?this.i.push([h]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(h);break;case this.C:h=e.subarray(h,u+188),c?this.l.push([h]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(h);break;default:r=!0}}return this};function Dt(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=sr(u,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=sr(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}g.ai=function(e){return dr("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.qf(e)},g.qf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var u=e.byteLength,c=1;this.m=="hvc"&&(c=2);for(var f=n||0,h=[],E=-1,S=0,k,G=0;G<u;++G){var te=e[G];if(te){if(2<=f&&te==1){if(t&&!h.length&&E==-1&&(te=G-(3<f?3:f),n&&te!=0&&(te=e.subarray(0,te),t.data=li(t.data,te),t.fullData=li(t.fullData,te))),0<=E?(f=G-((3<f?3:f)+1),h.push({data:e.subarray(E+c,f+1),fullData:e.subarray(E,f+1),type:S,time:r})):t&&!h.length&&(E=G-f,0<E&&(E=e.subarray(0,E),t.data=li(t.data,E),t.fullData=li(t.fullData,E))),G>=u-c)return h;G++,E=G,S=this.m=="hvc"?e[G]>>1&63:e[G]&31}f=0}else f++;G>=u-1&&0<=E&&0<=f&&(k={data:e.subarray(E+c,u),fullData:e.subarray(E,u),type:S,time:r})}return k&&h.push(k),!h.length&&t&&(t.data=li(t.data,e),t.fullData=li(t.fullData,e)),h},g.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=li.apply(Pi,T(n.value)),(n=Dt(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Dn(n.data),dts:n.dts,pts:n.pts});return e},g.Fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=m(this.i),n=t.next();!n.done;n=t.next()){var r=li.apply(Pi,T(n.value)),u=Dt(this,r);n=this.h.length?this.h[this.h.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?(this.h.length&&u.dts<(n.dts||0)&&(e=!0),this.h.push(u)):this.h.length&&(r=u?u.data:r)&&(n=this.h.pop(),n.data=li(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(c,f){var h=(c.pts||0)-(f.pts||0);return(c.dts||0)-(f.dts||0)||h}))}return this.h},g.xc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=m(this.j),r=n.next();!r.done;r=n.next()){var u=li.apply(Pi,T(r.value)),c=Dt(this,u);r=this.g.length?this.g[this.g.length-1]:null,c&&c.pts!=null&&c.dts!=null&&(!r||r.pts!=c.pts&&r.dts!=c.dts)?(this.g.length&&c.dts<(r.dts||0)&&(t=!0),this.g.push(c)):this.g.length&&(u=c?c.data:u)&&(r=this.g.pop(),r.data=li(r.data,u),this.g.push(r))}if(e){var f;for(n=m(this.g),r=n.next();!r.done;r=n.next())r=r.value,r.nalus=this.qf(r,f,void 0),r.nalus.length&&(f=r.nalus[r.nalus.length-1]);this.g=this.g.filter(function(h){return h.nalus.length})}t&&(this.g=this.g.sort(function(h,E){var S=(h.pts||0)-(E.pts||0);return(h.dts||0)-(E.dts||0)||S}))}return e?this.g:(e=this.g,this.g=[],e)},g.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Fb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.xc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},g.bd=function(){return{audio:this.A,video:this.m}},g.Od=function(){for(var e=[],t=m(this.xc()),n=t.next();!n.done;n=t.next())e.push.apply(e,T(n.value.nalus));return e},g.Gh=function(){dr("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.We();return{height:e.height,width:e.width}},g.We=function(){return this.m=="hvc"?Tn(this):fn(this)};function fn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(te){return te.type==7}),!e))return t;e=new Nn(e.data);var n=nt(e),r=nt(e),u=nt(e);if(En(e),zr.includes(n)){var c=Lt(e);if(c===3&&Gn(e,1),En(e),En(e),Gn(e,1),ct(e)){c=c!==3?8:12;for(var f=0;f<c;f++)ct(e)&&(6>f?Kt(e,16):Kt(e,64))}}if(En(e),c=Lt(e),c===0)Lt(e);else if(c===1)for(Gn(e,1),En(e),En(e),c=Lt(e),f=0;f<c;f++)En(e);En(e),Gn(e,1),c=Lt(e),f=Lt(e);var h=Ct(e,1);h===0&&Gn(e,1),Gn(e,1);var E=0,S=0,k=0,G=0;return ct(e)&&(E=Lt(e),S=Lt(e),k=Lt(e),G=Lt(e)),t.height=String((2-h)*(f+1)*16-2*k-2*G),t.width=String(16*(c+1)-2*E-2*S),t.Ea="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2),t}function Tn(e){var t={height:null,width:null,Ea:null};if(e=e.Od(),!e.length||(e=e.find(function(Ue){return Ue.type==33}),!e))return t;var n=new Nn(e.fullData,!0);nt(n),nt(n),Ct(n,4);var r=Ct(n,3);ct(n);var u=Ct(n,2),c=Ct(n,1),f=Ct(n,5),h=Ct(n,32);e=nt(n);for(var E=nt(n),S=nt(n),k=nt(n),G=nt(n),te=nt(n),z=nt(n),ve=[],Le=[],De=0;De<r;De++)ve.push(ct(n)),Le.push(ct(n));if(0<r)for(De=r;8>De;De++)Ct(n,2);for(De=0;De<r;De++)ve[De]&&Ct(n,88),Le[De]&&nt(n);Lt(n),r=Lt(n),r==3&&Ct(n,1),ve=Lt(n),Le=Lt(n);var qe=De=0,Te=0,Qe=0;return ct(n)&&(De+=Lt(n),qe+=Lt(n),Te+=Lt(n),Qe+=Lt(n)),t.width=String(ve-(De+qe)*(r===1||r===2?2:1)),t.height=String(Le-(Te+Qe)*(r===1?2:1)),n=function(Ue){for(var vt=0,xt=0;32>xt;xt++)vt|=(Ue>>xt&1)<<31-xt;return vt>>>0}(h),c=c==1?"H":"L",u="hvc1"+("."+["","A","B","C"][u]+f),u+="."+n.toString(16).toUpperCase(),u+="."+c+z,te&&(u+="."+te.toString(16).toUpperCase()),G&&(u+="."+G.toString(16).toUpperCase()),k&&(u+="."+k.toString(16).toUpperCase()),S&&(u+="."+S.toString(16).toUpperCase()),E&&(u+="."+E.toString(16).toUpperCase()),e&&(u+="."+e.toString(16).toUpperCase()),t.Ea=u,t}function sr(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Zr(e){return!(0>Ai(e))}function Ai(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}re("shaka.util.TsParser",Ve),Ve.syncOffset=Ai,Ve.probe=Zr,Ve.prototype.getVideoInfo=Ve.prototype.We,Ve.prototype.getVideoResolution=Ve.prototype.Gh,Ve.prototype.getVideoNalus=Ve.prototype.Od,Ve.prototype.getCodecs=Ve.prototype.bd,Ve.prototype.getStartTime=Ve.prototype.getStartTime,Ve.prototype.getVideoData=Ve.prototype.xc,Ve.prototype.getAudioData=Ve.prototype.Fb,Ve.prototype.getMetadata=Ve.prototype.getMetadata,Ve.prototype.parseNalus=Ve.prototype.qf,Ve.prototype.parseAvcNalus=Ve.prototype.ai,Ve.prototype.parse=Ve.prototype.parse,Ve.prototype.clearData=Ve.prototype.clearData,Ve.Timescale=9e4;var zr=[100,110,122,244,44,83,86,118,128,138,139,134];function io(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ke("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dr("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ke("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ke("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ke(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Zi(e){e.g&&e.i.classList.add("shaka-hidden")}io.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Bs(e,t,n){var r=Qu,u=Eu;switch(t.mimeType){case"video/webm":r=Ju;break;case"video/mp4":r=Xa}switch(n){case"DASH":u=Po;break;case"HLS":u=js}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(u))}re("shaka.lcevc.Dec",io),io.prototype.release=io.prototype.release;var Qu=0,Ju=1,Xa=2,js=0,Po=1,Eu=-1;function _u(e,t,n,r){var u=this;this.i=e,this.A=null,this.F=t,this.h={},this.G={},this.qa={},this.g=null,this.ba=!1,this.ta=n||function(){},this.T=r||null,this.j={},this.o=new Tt,this.m={},this.H=null,this.L=new Rr,this.N="",this.da=!1,this.l=fa(this,this.L),this.C=!1,this.I=new Wu(function(){return Xf(u)}),this.B=!1,this.aa="UNKNOWN",this.pa=this.sa=!1,this.ia=new Rr,this.s=!1,this.ea=!0,this.K=this.Y=null}function fa(e,t){if(p.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.o.D(n,"startstreaming",function(){e.ea=!0}),e.o.D(n,"endstreaming",function(){e.ea=!1}),e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Gm(n),e.i.src=e.N,n}return n=new MediaSource,e.o.na(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.o.na(e.i,"playing",function(){e.da=!0}),e.N=Gm(n),e.i.src=e.N,n}function Uc(e,t){var n,r,u,c,f,h,E,S,k,G,te;return Me(function(z){if(z.g==1)return e.createSegmentIndex?x(z,e.createSegmentIndex(),2):z.u(2);if(!e.segmentIndex)return z.return(!1);if(e.segmentIndex.getNumReferences()==0)return z.return(!0);for(n=yi,r=new Set,u=m(e.segmentIndex),c=u.next();!c.done;c=u.next())if(f=c.value,h=f.mimeType||e.mimeType||"",E=f.codecs||e.codecs||"",S=h+":"+E,!r.has(S)){if(r.add(S),t==n.ma){if(k=Si(h,E),!bl(k))return z.return(!1)}else if(t==n.fa?E=Rl(E):t==n.S&&(E=Hu(E)),G=am(e,h,E),te=Uu(h,E),!Ot(G)&&!ro(te))return z.return(!1)}return z.return(!0)})}g=_u.prototype,g.destroy=function(){return this.I.destroy()};function Xf(e){var t,n,r,u,c,f,h,E;return Me(function(S){if(S.g==1){t=[];for(n in e.j)for(r=e.j[n],u=r[0],e.j[n]=r.slice(0,1),u&&t.push(u.p.catch(cm)),c=m(r.slice(1)),f=c.next();!f.done;f=c.next())h=f.value,h.p.reject(new gt(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(E in e.m)t.push(e.m[E].destroy());return x(S,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.l=null,e.g=null,e.F=null,e.h={},e.m={},e.H=null,e.j={},e.T=null,e.K=null,X(S)})}g.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var u=this,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:return c=yi,x(k,u.L,2);case 2:u.B=t,u.aa=n,u.sa=r,u.pa=!u.B&&u.aa=="HLS"&&!u.sa,u.K=null,f=m(e.keys()),h=f.next();case 3:if(h.done){k.u(0);break}return E=h.value,S=e.get(E),x(k,el(u,E,S,S.codecs),6);case 6:u.s?(u.j[c.S]=[],u.j[c.fa]=[]):u.j[E]=[],h=f.next(),k.u(3)}})};function el(e,t,n,r){var u,c,f,h,E,S,k,G,te,z,ve,Le;return Me(function(De){switch(De.g){case 1:return u=yi,c=je,f=O,x(De,Uc(n,t),2);case 2:if(f.call(c,De.h,"Type negotiation should happen before MediaSourceEngine.init!"),h=Si(n.mimeType,r),t==u.ma){Qa(e,h,e.B,n.external),De.u(0);break}if(E=e.A.forceTransmux,(!Ot(h)||!e.B&&hu.includes(h))&&(E=!0),S=Uu(n.mimeType,r),!E){De.u(4);break}if(k=Co(u.S,(r||"").split(",")),G=Co(u.fa,(r||"").split(",")),!k||!G){De.u(5);break}return e.s=!0,x(De,el(e,u.S,n,k),6);case 6:return x(De,el(e,u.fa,n,G),7);case 7:return De.return();case 5:(te=ro(S))&&(z=te(),e.m[t]=z,h=z.convertCodecs(t,S));case 4:ve=h+e.A.addExtraFeaturesToSourceBuffer(h),jr(e.I);try{Le=e.l.addSourceBuffer(ve)}catch(qe){throw new gt(2,3,3015,qe,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.B&&(Le.mode=DB),e.o.D(Le,"error",function(){e.j[t][0].p.reject(new gt(2,3,3014,e.i.error?e.i.error.code:0))}),e.o.D(Le,"updateend",function(){return tl(e,t)}),e.h[t]=Le,e.G[t]=h,e.qa[t]=!!n.drmInfos.length,X(De)}})}g.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Qa(e,t,n,r){e.g||(e.g=new Ls(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var u=e.g;r=r||e.ba,e=e.aa,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=(0,ji[t])(),u.i.setSequenceMode?u.i.setSequenceMode(n):dr("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):dr("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=r)}function Bc(e){return e.C?!1:e.l?e.l.readyState=="ended":!0}function Zs(e,t){return e.C||!Object.keys(e.h).length?e=null:t==vr?e=e.g.g:(e=Hn(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Pt(e,t){return e.C?null:t==vr?e.g.h:Ft(Hn(e,t))}function yn(e,t,n){return e.C?0:t==vr?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hn(e,t),An(e,n))}g.ob=function(){var e={total:this.C?[]:yt(this.i.buffered),audio:this.C?[]:yt(Hn(this,"audio")),video:this.C?[]:yt(Hn(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hn(e,t){try{return e.h[t].buffered}catch(n){return null}}function ur(e,t,n,r,u,c){var f=null,h=Qn(n);if(hu.includes(u))c=Dn(h),c.length&&r&&((t=c.find(function(G){return G.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(f=Math.round(t.data)/1e3),e.ta([{cueTime:r.startTime,data:h,frames:c,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(u.includes("/mp4")&&r&&r.timestampOffset==0&&r.ca&&r.ca.timescale){var E=r.ca.timescale;if(!isNaN(E)){var S=0,k=!1;new Fr().box("moof",yr).box("traf",yr).O("tfdt",function(G){S=ir(G.reader,G.version).baseMediaDecodeTime/E,k=!0,G.parser.stop()}).parse(n,!0),k&&(f=S)}}else u.includes("/mp4")||u.includes("/webm")||!Zr(h)||(e.K?e.K.clearData():e.K=new Ve,h=e.K.parse(h),t=h.getStartTime(t),t!=null&&(f=t),h=h.getMetadata(),h.length&&e.ta(h,c,r?r.endTime:null));return f}function Tr(e,t,n,r,u,c,f,h,E,S){f=f===void 0?!1:f,h=h===void 0?!1:h,E=E===void 0?!1:E,S=S===void 0?!1:S;var k,G,te,z,ve,Le,De,qe,Te,Qe,Ue;return Me(function(vt){switch(vt.g){case 1:if(k=yi,t!=k.ma){vt.u(2);break}if(!e.B){vt.u(3);break}return x(vt,e.ia,4);case 4:G=vt.h,e.g.s=G;case 3:return x(vt,yE(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.$()[0]:null),5);case 5:return vt.return();case 2:if(S||!e.s){vt.u(6);break}return x(vt,Tr(e,k.S,n,r,u,c,f,h,E,!0),7);case 7:return x(vt,Tr(e,k.fa,n,r,u,c,f,h,E,!0),8);case 8:return vt.return();case 6:if(!e.h[t])return vt.return();if(te=e.h[t].timestampOffset,z=e.G[t],e.m[t]&&(z=e.m[t].getOriginalMimeType()),r&&(ve=ur(e,t,n,r,z,te),ve!=null&&(Le=r.startTime-ve,De=Math.abs(te-Le),(.001<=De||f||h)&&(!E||0<Le||!te)&&(te=Le,e.pa&&($i(e,t,function(){return Qf(e,t)}),$i(e,t,function(){return Jf(e,t,te)}))),qe=t==k.fa||!(k.fa in e.h),e.B&&qe&&e.ia.resolve(te))),c&&t==k.fa&&(e.g||Qa(e,"application/cea-608",e.B,!1),e.H||(Te=z.split(";",1)[0],e.H=new wt(Te)),r?(Qe=e.H.i(n),Qe.length&&Pf(e.g,Qe,r.startTime,r.endTime,te)):e.H.init(n)),!e.m[t]){vt.u(9);break}return x(vt,e.m[t].transmux(n,u,r,e.l.duration,t),10);case 10:n=vt.h;case 9:return n=CB(e,n,r?r.startTime:null,t),r&&e.B&&t!=k.ma&&(f||h)&&(Ue=r.startTime,$i(e,t,function(){return Qf(e,t)}),$i(e,t,function(){return Jf(e,t,Ue)})),x(vt,$i(e,t,function(){var xt=n;if(t=="video"&&e.T){var Vt=e.T;Vt.g&&Vt.g.appendBuffer(xt,"video",Vt.o,-te)}e.h[t].appendBuffer(xt)}),11);case 11:X(vt)}})}function Ir(e,t){var n=Pt(e,"video")||0;Df(e.g,t,n)}function fr(e){e.g&&Df(e.g,"",0)}g.remove=function(e,t,n){var r=this,u;return Me(function(c){return c.g==1?(u=yi,e==u.ma?x(c,r.g.remove(t,n),0):x(c,$i(r,e,function(){return qs(r,e,t,n)}),4)):r.s?x(c,$i(r,u.S,function(){return qs(r,u.S,t,n)}),0):c.u(0)})};function ri(e,t){var n;return Me(function(r){return r.g==1?(n=yi,t==n.ma?e.g?x(r,e.g.remove(0,1/0),0):r.return():x(r,$i(e,t,function(){return qs(e,t,0,e.l.duration)}),4)):e.s?x(r,$i(e,n.S,function(){return qs(e,n.S,0,e.l.duration)}),0):r.u(0)})}g.flush=function(e){var t=this,n;return Me(function(r){return r.g==1?(n=yi,e==n.ma?r.return():x(r,$i(t,e,function(){t.i.currentTime-=.001,tl(t,e)}),2)):t.s?x(r,$i(t,n.S,function(){var u=n.S;t.i.currentTime-=.001,tl(t,u)}),0):r.u(0)})};function Qr(e,t,n,r,u,c,f,h,E){var S,k,G;return Me(function(te){return te.g==1?(S=yi,t==S.ma?(c||(e.g.s=n),xh(e.g,r,u),te.return()):(k=[],x(te,NB(e,t,f,h,E),2))):(G=te.h,G||(k.push($i(e,t,function(){return Qf(e,t)})),e.s&&k.push($i(e,S.S,function(){return Qf(e,S.S)}))),c||(k.push($i(e,t,function(){return Jf(e,t,n)})),e.s&&k.push($i(e,S.S,function(){return Jf(e,S.S,n)}))),k.push($i(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=u,e.h[t].appendWindowStart=r,tl(e,t)})),e.s&&k.push($i(e,S.S,function(){var z=S.S;e.h[z].appendWindowStart=0,e.h[z].appendWindowEnd=u,e.h[z].appendWindowStart=r,tl(e,z)})),x(te,Promise.all(k),0))})}function Gs(e,t,n){var r;return Me(function(u){return u.g==1?(r=yi,t==r.ma?u.return():(t==r.fa&&(e.ia=new Rr),$i(e,t,function(){return Qf(e,t)}),e.s&&$i(e,r.S,function(){return Qf(e,r.S)}),x(u,$i(e,t,function(){return Jf(e,t,n)}),2))):e.s?x(u,$i(e,r.S,function(){return Jf(e,r.S,n)}),0):u.u(0)})}g.endOfStream=function(e){var t=this;return Me(function(n){return x(n,UE(t,function(){Bc(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},g.Za=function(e){var t=this;return Me(function(n){return x(n,UE(t,function(){if(e<t.l.duration)for(var r in t.h){var u={start:function(){},p:new Rr};t.j[r].unshift(u)}t.l.duration=e,t.Y=e}),0)})},g.getDuration=function(){return this.l.duration};function qs(e,t,n,r){r<=n?tl(e,t):e.h[t].remove(n,r)}function Qf(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,tl(e,t)}function Jf(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,tl(e,t)}function tl(e,t){if(!e.C){var n=e.j[t][0];n&&(n.p.resolve(),BE(e,t))}}function $i(e,t,n){return jr(e.I),n={start:n,p:new Rr},e.j[t].push(n),e.j[t].length==1&&XC(e,t),n.p}function UE(e,t){var n,r,u,c,f,h,E;return Me(function(S){switch(S.g){case 1:jr(e.I),n=[],r={};for(u in e.h)r.Mc=new Rr,c={start:function(k){return function(){return k.Mc.resolve()}}(r),p:r.Mc},e.j[u].push(c),n.push(r.Mc),e.j[u].length==1&&c.start(),r={Mc:r.Mc};return fe(S,2),x(S,Promise.all(n),4);case 4:ge(S,3);break;case 2:throw f=Re(S),f;case 3:return fe(S,5,6),x(S,t(),6);case 6:Je(S);for(h in e.h)BE(e,h);Se(S,0);break;case 5:throw E=Re(S),new gt(2,3,3015,E,e.i.error||"No error in the media element")}})}function BE(e,t){e.j[t].shift(),XC(e,t)}function XC(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new gt(2,3,3017,t)):n.p.reject(new gt(2,3,3015,r,e.i.error||"No error in the media element")),BE(e,t)}}function CB(e,t,n,r){var u=e.qa[r];return e.A.insertFakeEncryptionInInit&&n==null&&u&&(qa()||gs()||Yr("SOPOpenBrowser"))&&Mf(e.G[r])=="mp4"&&(t=xe(t)),t}function RB(e,t,n,r){return $i(e,t,function(){t!==vr&&(Un()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),r&&(e.m[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),tl(e,t))})}function xB(e,t){var n,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t;return Me(function(Zt){switch(Zt.g){case 1:n=yi,e.C=!0,e.s=!1,r=e.i.currentTime,u=e.i.autoplay,c=e.i.paused,e.da&&(e.i.autoplay=!1),oe(Zt,2),e.o.ib(),f=[];for(h in e.m)f.push(e.m[h].destroy());for(E in e.j)for(S=e.j[E],k=S[0],e.j[E]=S.slice(0,1),k&&f.push(k.p.catch(cm)),G=m(S.slice(1)),te=G.next();!te.done;te=G.next())z=te.value,z.p.reject(new gt(2,7,7003,void 0));for(ve in e.h){Le=e.h[ve];try{e.l.removeSourceBuffer(Le)}catch(ln){}}return x(Zt,Promise.all(f),4);case 4:return e.m={},e.h={},De=e.l.duration,e.L=new Rr,e.l=fa(e,e.L),x(Zt,e.L,5);case 5:!isNaN(De)&&De?e.l.duration=De:!isNaN(e.Y)&&e.Y&&(e.l.duration=e.Y),qe=new Rr,Te=e.l.sourceBuffers,Qe=t.size,Ue=0,vt=function(){Ue++,Ue===Qe&&(qe.resolve(),e.o.Kb(Te,"addsourcebuffer",vt))},e.o.D(Te,"addsourcebuffer",vt),xt=m(t.keys()),Vt=xt.next();case 6:return Vt.done?(e.i.currentTime=r,x(Zt,qe,2)):(Bt=Vt.value,_t=t.get(Bt),x(Zt,el(e,Bt,_t,_t.codecs),9));case 9:e.s?(e.j[n.S]=[],e.j[n.fa]=[]):e.j[Bt]=[],Vt=xt.next(),Zt.u(6);break;case 2:Je(Zt),e.C=!1,jr(e.I),e.o.na(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=u,c||e.i.play())}),Se(Zt,0)}})}function QC(e,t){return UE(e,function(){return xB(e,t)})}function NB(e,t,n,r,u){var c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe;return Me(function(Ue){return Ue.g==1?(c=yi,t==c.ma||(f=za(Do(e.G[t])),h=ba(e.G[t]),S=!1,k=Si(n,r),G=e.A.forceTransmux,(!Ot(k)||!e.B&&hu.includes(k))&&(G=!0),G&&(te=Uu(n,r),z=ro(te))&&(E=z(),ve=Co(c.S,(r||"").split(",")),Le=Co(c.fa,(r||"").split(",")),ve&&Le?(S=!0,De=Le,t==c.S&&(De=ve),k=E.convertCodecs(t,Uu(n,De))):k=E.convertCodecs(t,te)),qe=za(Do(k)),Te=ba(k),f===qe&&h===Te)?Ue.return(!1):(Qe=!0,(e.s||S&&E&&!e.m[t])&&(Qe=!1),Qe&&e.A.codecSwitchingStrategy==="smooth"&&Un()?x(Ue,RB(e,t,k,E),3):(E&&E.destroy(),x(Ue,QC(e,u),3)))):Ue.return(!0)})}function MB(e,t,n,r){if(t==vr)var u=!1;else{u=za(Do(e.G[t]));var c=ba(e.G[t]),f=Si(n,r),h=e.A.forceTransmux;(!Ot(f)||!e.B&&hu.includes(f))&&(h=!0),n=Uu(n,r),h&&(h=ro(n))&&(h=h(),f=h.convertCodecs(t,n),h.destroy()),t=za(Do(f)),f=ba(f),u=u!==t||c!==f}return u?e.A.codecSwitchingStrategy!=="smooth"||!Un()||e.s:!1}var Gm=p.URL.createObjectURL,DB="sequence";function tr(e,t,n){this.i=e,this.s=t,this.m=this.j=1/0,this.g=1,this.h=this.l=null,this.A=0,this.F=!0,this.G=0,this.C=n===void 0?!0:n,this.H=0,this.o=!1,this.B=null}g=tr.prototype,g.getDuration=function(){return this.j},g.sh=function(){return this.g},g.Cg=function(e){this.i=e},g.Za=function(e){this.j=e},g.wh=function(){return this.i},g.Ag=function(e){this.A=e},g.Ec=function(e){this.F=e},g.je=function(e){this.m=e},g.Nd=function(){return this.m},g.Bf=function(e){this.s=e},g.lh=function(){return this.s},g.qg=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(r,u){return Math.max(r,u.end-u.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=(Date.now()+this.A)/1e3-this.h-this.g)}},g.ld=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,r<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.g=Math.max(this.g,u.endTime-u.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.o&&(this.i=r-this.h-this.g)}},g.Xd=function(){this.o=!0},g.Qh=function(){return this.o},g.Bg=function(e){this.B=e},g.ph=function(){return this.B},g.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},g.hf=function(e){this.g=Math.max(this.g,e)},g.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},g.R=function(){return this.j==1/0&&!this.F},g.dc=function(){return this.j!=1/0&&!this.F},g.qb=function(){return Math.max(this.G,this.Gb()-this.m)},g.Gg=function(e){this.G=e},g.Gb=function(){return this.R()||this.dc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},g.dd=function(e){var t=Math.max(this.l,this.G);return this.m==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Gb()-this.m+e,this.pb()))},g.$b=function(){return this.dd(0)},g.pb=function(){return Math.max(0,this.Gb()-(this.R()||this.dc()?this.s:0))},g.Kg=function(){return!(this.i==null||this.h!=null&&this.C)},g.zg=function(e){this.H=e},re("shaka.media.PresentationTimeline",tr),tr.prototype.setAvailabilityTimeOffset=tr.prototype.zg,tr.prototype.usingPresentationStartTime=tr.prototype.Kg,tr.prototype.getSeekRangeEnd=tr.prototype.pb,tr.prototype.getSeekRangeStart=tr.prototype.$b,tr.prototype.getSafeSeekRangeStart=tr.prototype.dd,tr.prototype.getSegmentAvailabilityEnd=tr.prototype.Gb,tr.prototype.setUserSeekStart=tr.prototype.Gg,tr.prototype.getSegmentAvailabilityStart=tr.prototype.qb,tr.prototype.isInProgress=tr.prototype.dc,tr.prototype.isLive=tr.prototype.R,tr.prototype.offset=tr.prototype.offset,tr.prototype.notifyMaxSegmentDuration=tr.prototype.hf,tr.prototype.notifyMinSegmentStartTime=tr.prototype.ce,tr.prototype.getInitialProgramDateTime=tr.prototype.ph,tr.prototype.setInitialProgramDateTime=tr.prototype.Bg,tr.prototype.isStartTimeLocked=tr.prototype.Qh,tr.prototype.lockStartTime=tr.prototype.Xd,tr.prototype.notifySegments=tr.prototype.ld,tr.prototype.notifyTimeRange=tr.prototype.qg,tr.prototype.getDelay=tr.prototype.lh,tr.prototype.setDelay=tr.prototype.Bf,tr.prototype.getSegmentAvailabilityDuration=tr.prototype.Nd,tr.prototype.setSegmentAvailabilityDuration=tr.prototype.je,tr.prototype.setStatic=tr.prototype.Ec,tr.prototype.setClockOffset=tr.prototype.Ag,tr.prototype.getPresentationStartTime=tr.prototype.wh,tr.prototype.setDuration=tr.prototype.Za,tr.prototype.setPresentationStartTime=tr.prototype.Cg,tr.prototype.getMaxSegmentDuration=tr.prototype.sh,tr.prototype.getDuration=tr.prototype.getDuration;function JC(e,t,n){this.j=n,this.l=e,this.s=eR(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}JC.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function PB(e,t){e.i=t}function OB(e){this.g=e}function eR(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(yt(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function jE(e,t,n,r,u){var c=this;this.A=u,this.g=e,this.B=t,this.s=n,this.l=new Tt,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return ZE(c)}),this.m=new pr(function(){ZE(c)}).$a(this.s.gapJumpTimerTime)}jE.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},jE.prototype.mf=function(){this.o=!0,ZE(this)};function ZE(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=eR(n),u=n.g.currentTime,c=Date.now()/1e3;(t.g!=u||t.s!=r)&&(t.m=c,t.g=u,t.s=r,t.h=!1),u=c-t.m,(r=u>=t.A&&r&&!t.h)&&(t.i(t.g,u),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Wn("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=it(n,t,e.s.gapDetectionThreshold),r==null||r==0&&!e.o||(u=n.start(r),u>=e.B.pb()||.001>u-t||(r!=0&&n.end(r-1),e.g.currentTime=u,t==e.i&&(e.i=u),e.C++,e.A(new Wn("gapjumped")))))}}}function ed(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=LB.value().get(t),n.na(e,t,r))}var LB=new ia(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function tR(e,t,n,r){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=r()),u.l},this.o=!1,this.h=new Tt,this.i=new oR(e),ed(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){rR(u,u.j())})}tR.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function GE(e){return e.o?e.g.currentTime:e.j()}function nR(e,t){0<e.g.readyState?aR(e.i,t):ed(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){rR(e,e.j())})}function rR(e,t){.001>Math.abs(e.g.currentTime-t)?iR(e):(e.h.na(e.g,"seeking",function(){iR(e)}),aR(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function iR(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function oR(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pr(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}oR.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function aR(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.$a(.1)}function sR(e){this.g=e,this.j=!1,this.h=null,this.i=new Tt}g=sR.prototype,g.ve=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;ed(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},g.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},g.we=function(e){this.h=this.j?this.h:e},g.Dd=function(){return(this.j?this.g.currentTime:this.h)||0},g.Nf=function(){return 0},g.Mf=function(){return 0},g.pg=function(){};function uR(e,t,n,r,u,c){var f=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=u,this.s=null,this.o=kB(e,n,c),this.j=new jE(e,t.presentationTimeline,n,this.o,c),this.h=new tR(e,function(){e:{var h=f.j;h.j=!0,h.o=!1;var E=GE(f.h);if(h=cR(f,E),.001<Math.abs(h-E)&&(E=Date.now()/1e3,!f.s||f.s<E-1)){f.s=E,nR(f.h,h),h=void 0;break e}f.A(),h=void 0}return h},function(h){var E=f.j;E.g.seeking&&!E.j&&(E.j=!0,E.i=h)},function(){var h=r;return h==null?h=1/0>f.g.getDuration()?f.g.$b():f.g.pb():0>h&&(h=f.g.pb()+h),lR(f,fR(f,h))}),this.m=new pr(function(){if(f.i.readyState!=0&&!f.i.paused){var h=GE(f.h),E=f.g.$b(),S=f.g.pb();3>S-E&&(E=S-3),h<E&&(h=cR(f,h),f.i.currentTime=h)}})}g=uR.prototype,g.ve=function(){this.m.$a(.25)},g.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},g.we=function(e){nR(this.h,e)},g.Dd=function(){var e=GE(this.h);return 0<this.i.readyState&&!this.i.paused?fR(this,e):e},g.Nf=function(){return this.o?this.o.o:0},g.Mf=function(){return this.j.C},g.pg=function(){this.j.mf()};function lR(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function cR(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,u=e.g.$b(),c=e.g.pb(),f=e.g.getDuration();3>c-u&&(u=c-3);var h=e.g.dd(n),E=e.g.dd(r);return n=e.g.dd(n+r),t>=f?lR(e,t):t>c?c:t<u?Ut(e.i.buffered,E)?E:n:t>=h||Ut(e.i.buffered,t)?t:n}function fR(e,t){var n=e.g.$b();return t<n?n:(e=e.g.pb(),t>e?e:t)}function kB(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new JC(new OB(e),t.stallThreshold,n),PB(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function wr(e){this.g=e,this.m=null,this.j=0,this.o=!1}g=wr.prototype,g.getNumReferences=function(){return this.g.length},g.getNumEvicted=function(){return this.j},g.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},g.Wh=function(){this.o=!0},g.tc=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)},g.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],u=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<u)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},g.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},g.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},g.ae=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,T(e))}},g.kd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.g.length==0||r.endTime>n.g[0].startTime)}),this.ae(e),this.La(t)},g.La=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},g.sc=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new et(e.startTime,t,e.C,e.Aa,e.ja,e.ca,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.A,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.j=e.j,this.g[this.g.length-1]=t)}},g.ke=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new pr(function(){var r=t();r?n.g.push.apply(n.g,T(r)):(n.m.stop(),n.m=null)}),this.m.$a(e))},wr.prototype[Symbol.iterator]=function(){return this.xb(0)},wr.prototype.xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;r--;var u=this.get(r+1),c=-1;if(u&&0<u.g.length)for(var f=u.g.length-1;0<=f;--f){var h=u.g[f];if(e>=h.startTime&&e<h.endTime){if(!t){for(;f&&!h.l;)f--,h=u.g[f];if(!h.l)return de("No independent partial segment found!"),null}r++,c=f-1;break}}return new Ra(this,r,c,n)};function qE(e,t,n){return e=new et(e,e+t,function(){return n},0,null,null,e,e,e+t),new wr([e])}re("shaka.media.SegmentIndex",wr),wr.forSingleSegment=qE,wr.prototype.getIteratorForTime=wr.prototype.xb,wr.prototype.updateEvery=wr.prototype.ke,wr.prototype.fit=wr.prototype.sc,wr.prototype.evict=wr.prototype.La,wr.prototype.mergeAndEvict=wr.prototype.kd,wr.prototype.offset=wr.prototype.offset,wr.prototype.get=wr.prototype.get,wr.prototype.find=wr.prototype.find,wr.prototype.markImmutable=wr.prototype.Wh,wr.prototype.release=wr.prototype.release,wr.prototype.getNumEvicted=wr.prototype.getNumEvicted,wr.prototype.getNumReferences=wr.prototype.getNumReferences;function Ra(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Ra.prototype.ie=function(e){this.reverse=e},Ra.prototype.dh=function(){return this.h},Ra.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Ra.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},re("shaka.media.SegmentIterator",Ra),Ra.prototype.next=Ra.prototype.next,Ra.prototype.current=Ra.prototype.current,Ra.prototype.currentPosition=Ra.prototype.dh,Ra.prototype.setReverse=Ra.prototype.ie;function Ei(){wr.call(this,[]),this.h=[]}Y(Ei,wr),g=Ei.prototype,g.clone=function(){var e=new Ei;return e.h=this.h.slice(),e},g.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},g.tc=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.tc(e)},g.find=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.find(e);if(u!=null)return u+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},g.get=function(e){for(var t=0,n=m(this.h),r=n.next();!r.done;r=n.next()){r=r.value;var u=r.get(e-t);if(u)return u;u=r.getNumReferences(),t+=r.getNumEvicted()+u}return null},g.offset=function(){},g.ae=function(){},g.La=function(){},g.kd=function(){},g.sc=function(){},g.ke=function(){},re("shaka.media.MetaSegmentIndex",Ei),Ei.prototype.updateEvery=Ei.prototype.ke,Ei.prototype.fit=Ei.prototype.sc,Ei.prototype.mergeAndEvict=Ei.prototype.kd,Ei.prototype.evict=Ei.prototype.La,Ei.prototype.merge=Ei.prototype.ae,Ei.prototype.offset=Ei.prototype.offset,Ei.prototype.get=Ei.prototype.get,Ei.prototype.find=Ei.prototype.find,Ei.prototype.forEachTopLevelReference=Ei.prototype.tc,Ei.prototype.release=Ei.prototype.release;function np(e){var t=this;this.g=e,this.h=this.g.Md(),this.i=new pr(function(){t.g.og(.25*t.h)})}np.prototype.release=function(){this.set(this.Xb()),this.i&&(this.i.stop(),this.i=null),this.g=null},np.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.Md()!=t&&this.g.Df(t);break e}catch(n){}this.i.$a(.25),this.g.Md()!=0&&this.g.Df(0)}},np.prototype.Xb=function(){return this.g.Xb()};function dR(e){var t=this;this.h=e,this.g=new Set,this.i=new pr(function(){hR(t,!1)}).$a(.25)}dR.prototype.release=function(){this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function hR(e,t){for(var n=m(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function FB(){this.g=null,this.h=[]}function HE(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function UB(e){function t(c){return{timestamp:c.timestamp,state:c.state,duration:c.duration}}for(var n=[],r=m(e.h),u=r.next();!u.done;u=r.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function BB(){this.i=this.h=null,this.g=[]}function KE(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function qm(){this.Ed=this.A=this.B=this.G=this.C=this.s=this.j=this.F=this.m=this.i=this.L=this.N=this.H=this.I=this.K=this.l=this.o=NaN,this.g=new FB,this.h=new BB}function VE(e,t,n){this.m=e,this.h=t,this.l=0,this.j=n,this.g=new Map,this.i=new Map}function jB(e,t){e.j=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function rp(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex&&(t=e.h.segmentIndex.xb(Math.max(t,e.l),!0))){var r=t.next().value;if(n&&(r=t.next().value),r){for(;e.g.size<e.m&&r!=null&&(n=!0,r.preload&&r.ja!=null&&(n=!1),r.bc()==2&&(n=!1),n&&r.ca&&pR(e,r.ca),n&&!e.g.has(r)&&(n=new YE(e.j),vR(n,r,e.h),e.g.set(r,n)),e.l=r.startTime,!(e.h.fastSwitching&&r.md&&r.Wd));)r=t.next().value;zE(e)}}}function pR(e,t){if(e.h.segmentIndex&&!Array.from(e.i.keys()).some(function(r){return lt(r,t)})){var n=new YE(e.j);vR(n,t,e.h),e.i.set(t,n)}}function gR(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&ip(e,n)}function nl(e){gR(e,e.g),gR(e,e.i),e.l=0}VE.prototype.La=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&ip(this,r);t&&zE(this)};function zE(e){for(var t=Array.from(e.g.keys()),n={},r=m(e.i.keys()),u=r.next();!u.done;n={wd:n.wd},u=r.next())n.wd=u.value,t.some(function(c){return function(f){return lt(f.ca,c.wd)}}(n))||ip(e,n.wd)}function mR(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&ip(e,r)}zE(e)}function ZB(e,t){t&&t!==e.h&&(nl(e),e.h=t)}function ip(e,t){var n=e.g;t instanceof ht&&(n=e.i),e=n.get(t),n.delete(t),e&&e.abort()}function YE(e){this.g=e,this.fe=this.Ef=null}function vR(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(u){return Me(function(c){if(c.g==1)return 0<r.byteLength?r=li(r,u):r=u,e.Ef?x(c,e.Ef(r),3):c.u(0);r=new Uint8Array(0),X(c)})})}YE.prototype.abort=function(){this.fe&&this.fe.abort()};function WE(e){Sr.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pr(function(){for(var n=t.i(),r=m(t.g),u=r.next();!u.done;u=r.next())u=u.value,u.endTime<n.start&&(t.g.delete(u),u=new Wn("regionremove",new Map([["region",u]])),t.dispatchEvent(u))}).$a(2)}Y(WE,Sr),WE.prototype.release=function(){this.g.clear(),this.h.stop(),Sr.prototype.release.call(this)};function Hm(e){Sr.call(this),this.g=new Map,this.h=e}Y(Hm,Sr),Hm.prototype.release=function(){this.g.clear(),Sr.prototype.release.call(this)};function GB(e,t){var n=e.g.get(t);return n||(n={nd:[],Uf:null,contentType:t},e.g.set(t,n)),n}function qB(e,t,n){var r=GB(e,t.contentType);HB(e,r),e={ff:t,position:n},r=r.nd,t=r.findIndex(function(u){return u.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Hm.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var r=n.nd,u=r.length-1;0<=u;u--){var c=r[u];if(c.position<=e){r=c.ff;break e}}r=null}if((u=r)&&(u=n.Uf,u=!(u===r||u&&r&&u.bandwidth==r.bandwidth&&u.audioSamplingRate==r.audioSamplingRate&&u.codecs==r.codecs&&u.contentType==r.contentType&&u.frameRate==r.frameRate&&u.height==r.height&&u.mimeType==r.mimeType&&u.channelsCount==r.channelsCount&&u.pixelAspectRatio==r.pixelAspectRatio&&u.width==r.width)),u)e:{if(u=e,c=r.contentType,(c=this.h()[c])&&0<c.length){var f=c[c.length-1].end;if(u>=c[0].start&&u<f){u=!0;break e}}u=!1}u&&(n.Uf=r,JSON.stringify(r),n=new Wn("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function HB(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,u=t.nd;t.nd=u.filter(function(c,f){return!(c.position<=n&&f+1<u.length&&u[f+1].position<=n||c.position>=r)})}else t.nd=[]}function op(e,t,n,r,u){return e=Oi(e,r,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function yR(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.l=new Wu(function(){return KB(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null}}g=yR.prototype,g.destroy=function(){return this.l.destroy()};function KB(e){var t,n,r,u,c,f,h;return Me(function(E){if(E.g==1){for(t=[],n=m(e.i.values()),r=n.next();!r.done;r=n.next())u=r.value,ap(u),t.push(sp(u));for(c=m(e.o.values()),f=c.next();!f.done;f=c.next())h=f.value,nl(h);return x(E,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.m=null,e.h=null,X(E)})}g.configure=function(e){if(this.h=e,this.I=new Zh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(nl(t.W),t.W=null),t=m(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,nl(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(vr))&&t.W&&(nl(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(nl(t.W),t.W=null),t=m(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(mR(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(n.W=null)):0<e.segmentPrefetchLimit&&(n.W=$E(this,n.stream));e.disableAudioPrefetch||$B(this)},g.start=function(e){var t=this;return Me(function(n){if(n.g==1)return x(n,WB(t,e||new Map),2);jr(t.l),t.C=!0,X(n)})};function VB(e,t){var n,r,u,c,f,h;Me(function(E){switch(E.g){case 1:return n=yi,e.H++,r=e.H,fe(E,2),x(E,ri(e.g.V,n.ma),4);case 4:ge(E,3);break;case 2:u=Re(E),e.g&&e.g.onError(u);case 3:c=Si(t.mimeType,t.codecs),Qa(e.g.V,c,e.m.sequenceMode,t.external),f=e.g.V.F,(f.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(h=TR(e,t),e.i.set(n.ma,h),_s(e,h,0)),X(E)}})}function zB(e){var t=e.i.get(vr);t&&(ap(t),sp(t).catch(function(){}),e.i.delete(vr)),e.s=null}function ER(e,t){var n=0>e.g.eb(),r=e.i.get("video");r&&r.Z&&r.Z.ie(n),(r=e.i.get("audio"))&&r.Z&&r.Z.ie(n),(r=e.i.get(vr))&&r.Z&&r.Z.ie(n),(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.jc&&(td(e,t,!1,0,!1),n.jc=r):(t=n.jc)&&(n.jc=null,td(e,t,!0,0,!1)))}function _R(e,t,n,r,u,c){n=n===void 0?!1:n,r=r===void 0?0:r,u=u===void 0?!1:u,c=c===void 0?!1:c,e.j=t,e.C&&(t.video&&td(e,t.video,n,r,u,c),t.audio&&td(e,t.audio,n,r,u,c))}function Km(e,t){Me(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):x(n,t.createSegmentIndex(),2):n.return();td(e,t,!0,0,!1),X(n)})}function td(e,t,n,r,u,c){var f=e.i.get(t.type);f||t.type!=vr?f&&(f.jc&&(t.trickModeVideo?(f.jc=t,t=t.trickModeVideo):f.jc=null),f.stream!=t||u)&&(e.o.has(t)?f.W=e.o.get(t):f.W&&ZB(f.W,t),t.type==vr&&(u=Si(t.mimeType,t.codecs),Qa(e.g.V,u,e.m.sequenceMode,t.external)),e.o.has(f.stream)||f.stream.closeSegmentIndex&&f.stream.closeSegmentIndex(),f.stream=t,f.Z=null,f.Of=!!c,n&&(f.Xc?f.le=!0:f.Qa?(f.Lb=!0,f.Id=r,f.le=!0):(ap(f),e_(e,f,!0,r).catch(function(h){e.g&&e.g.onError(h)}))),YB(e,f).catch(function(h){e.g&&e.g.onError(h)})):VB(e,t)}function YB(e,t){var n,r;return Me(function(u){if(u.g==1)return t.Ya?(n=t.stream,r=t.Ya,n.segmentIndex?u.u(2):x(u,n.createSegmentIndex(),2)):u.return();if(t.Ya!=r||t.stream!=n)return u.return();var c=e.g.Ld(),f=Pt(e.g.V,t.type),h=t.stream.segmentIndex.find(t.Oa?t.Oa.endTime:c),E=h==null?null:t.stream.segmentIndex.get(h);h=E&&E.ja?E.ja-E.Aa:null,E&&!h&&(h=(E.endTime-E.getStartTime())*(t.stream.bandwidth||0)/8),h?((E=E.ca)&&(h+=(E.ja?E.ja-E.Aa:null)||0),E=e.g.getBandwidthEstimate(),c=8*h/E<(f||0)-c-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.Ya.h.g>h):c=!1,c&&t.Ya.abort(),X(u)})}g.od=function(){if(this.g)for(var e=this.g.Ld(),t=m(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var u=null;n.Z&&(u=n.Z.current()),(!u||u.startTime>e||u.endTime<e)&&(n.Z=null),u=this.g.V,u.C?u=!1:r==vr?(u=u.g,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hn(u,r),u=Ut(u,e)),u||((Pt(this.g.V,r)!=null||n.Qa)&&Vm(this,n),n.Ya&&(n.Ya.abort(),n.Ya=null),r===vr&&(r=this.g.V,r.H&&r.H.h()),n.od=!0)}};function Vm(e,t){t.Xc||t.Lb||(t.Qa?(t.Lb=!0,t.Id=0):Zs(e.g.V,t.type)==null?t.ub==null&&_s(e,t,0):(ap(t),e_(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function WB(e,t){var n,r,u,c,f,h,E,S,k,G;return Me(function(te){if(te.g==1){if(n=yi,!e.j)throw new gt(2,5,5006);return r=new Map,u=new Set,e.j.audio&&(r.set(n.S,e.j.audio),u.add(e.j.audio)),e.j.video&&(r.set(n.fa,e.j.video),u.add(e.j.video)),e.s&&(r.set(n.ma,e.s),u.add(e.s)),c=e.g.V,x(te,c.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(jr(e.l),e.updateDuration(),f=m(r.keys()),h=f.next();!h.done;h=f.next())E=h.value,S=r.get(E),e.i.has(E)||(k=TR(e,S),t.has(S.id)&&(G=t.get(S.id),jB(G,function(z,ve,Le){return zm(z,ve,Le||null,e.h.retryParameters,e.g.zb)}),k.W=G),e.i.set(E,k),_s(e,k,0));X(te)})}function TR(e,t){return{stream:t,type:t.type,Z:null,W:$E(e,t),Oa:null,ec:null,cf:null,af:null,$e:null,jc:null,endOfStream:!1,Qa:!1,ub:null,Lb:!1,Id:0,le:!1,Xc:!1,od:!0,uf:!1,gd:!1,Ya:null}}function $E(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===vr&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===vr&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.h?n:0<e.h.segmentPrefetchLimit?new VE(e.h.segmentPrefetchLimit,t,function(r,u,c){return zm(r,u,c||null,e.h.retryParameters,e.g.zb)}):null}function $B(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r={},u=m(e.m.variants),c=u.next();!c.done;r={Fa:r.Fa},c=u.next())if(r.Fa=c.value,r.Fa.audio)if(e.o.has(r.Fa.audio)){if(c=e.o.get(r.Fa.audio),mR(c,t),!(0<t&&n.some(function(h){return function(E){return ju(h.Fa.audio.language,E)}}(r)))){var f=e.i.get(r.Fa.audio.type);c!==(f&&f.W)&&nl(c),e.o.delete(r.Fa.audio)}}else 0>=t||!n.some(function(h){return function(E){return ju(h.Fa.audio.language,E)}}(r))||!(c=$E(e,r.Fa.audio))||(r.Fa.audio.segmentIndex||r.Fa.audio.createSegmentIndex(),e.o.set(r.Fa.audio,c))}g.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.V.Za(e):this.g.V.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function XB(e,t){var n,r,u,c,f;return Me(function(h){switch(h.g){case 1:if(jr(e.l),t.Qa||t.ub==null||t.Xc)return h.return();if(t.ub=null,!t.Lb){h.u(2);break}return x(h,e_(e,t,t.le,t.Id),3);case 3:return h.return();case 2:if(t.stream.segmentIndex){h.u(4);break}return n=t.stream,x(h,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.ub||_s(e,t,0),h.return();case 4:fe(h,6),r=QB(e,t),r!=null&&(_s(e,t,r),t.gd=!1),ge(h,7);break;case 6:return u=Re(h),x(h,SR(e,t,u),8);case 8:return h.return();case 7:if(c=Array.from(e.i.values()),!e.C||!c.every(function(E){return E.endOfStream})){h.u(0);break}return x(h,e.g.V.endOfStream(),10);case 10:jr(e.l),f=e.g.V.getDuration(),f!=0&&f<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Za(f),X(h)}})}function QB(e,t){if(QE(t))return Ir(e.g.V,t.stream.originalId||""),null;if(t.type==vr&&fr(e.g.V),!e.g.V.ea&&t.type!=vr)return e.h.updateIntervalSeconds/2;var n=e.g.Ld();if(t.type==="audio")for(var r=m(e.o.keys()),u=r.next();!u.done;u=r.next())u=e.o.get(u.value),u.La(n,!0),rp(u,n);r=t.Oa?t.Oa.endTime:n,u=yn(e.g.V,t.type,n);var c=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),f=e.m.presentationTimeline.getDuration()-r,h=Pt(e.g.V,t.type);if(1e-6>f&&h)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(vr))&&QE(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(u=JB(e,t,n,h),!u)return e.h.updateIntervalSeconds;for(c=1/0,f=Array.from(e.i.values()),f=m(f),h=f.next();!h.done;h=f.next())h=h.value,QE(h)||h.Z&&!h.Z.current()||(c=Math.min(c,h.Oa?h.Oa.endTime:n));return r>=c+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.Z&&!e.o.has(t.stream)&&(t.W.La(n),rp(t.W,u.startTime)),e8(e,t,n,u).catch(function(){}),null)}function JB(e,t,n,r){if(t.Z)return t.Z.current();if(t.Oa||r)return t.Z=t.stream.segmentIndex.xb(t.Oa?t.Oa.endTime:r,!1,0>e.g.eb()),t.Z&&t.Z.next().value;r=e.h.inaccurateManifestTolerance;var u=Math.max(n-r,0);e=0>e.g.eb();var c=null;return r&&(t.Z=t.stream.segmentIndex.xb(u,!1,e),c=t.Z&&t.Z.next().value),c||(t.Z=t.stream.segmentIndex.xb(n,!1,e),c=t.Z&&t.Z.next().value),c}function e8(e,t,n,r){var u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe;return Me(function(Ue){switch(Ue.g){case 1:if(u=yi,c=t.stream,f=t.Z,t.Qa=!0,fe(Ue,2),r.bc()==2)throw new gt(1,1,1011);return x(Ue,i8(e,t,r),4);case 4:return jr(e.l),e.A?Ue.return():(h=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",E=p.ReadableStream,e.h.lowLatencyMode&&E&&h&&(e.m.type!="HLS"||r.m)?(G=new Uint8Array(0),z=te=!1,Le=function(vt){var xt,Vt,Bt;return Me(function(_t){switch(_t.g){case 1:if(te||(z=!0,jr(e.l),e.A))return _t.return();if(fe(_t,2),G=n8(G,vt),xt=!1,Vt=0,new Fr().box("mdat",function(Zt){Vt=Zt.size+Zt.start,xt=!0}).parse(G,!1,!0),!xt){_t.u(4);break}return Bt=G.subarray(0,Vt),G=G.subarray(Vt),x(_t,XE(e,t,n,c,r,Bt,!0),5);case 5:t.W&&t.Z&&rp(t.W,r.startTime,!0);case 4:ge(_t,0);break;case 2:ve=Re(_t),X(_t)}})},x(Ue,JE(e,t,r,Le),9)):(S=JE(e,t,r),x(Ue,S,7)));case 7:return k=Ue.h,jr(e.l),e.A?Ue.return():(jr(e.l),t.Lb?(t.Qa=!1,_s(e,t,0),Ue.return()):x(Ue,XE(e,t,n,c,r,k),6));case 9:if(De=Ue.h,ve)throw ve;if(z){Ue.u(10);break}return te=!0,jr(e.l),e.A?Ue.return():t.Lb?(t.Qa=!1,_s(e,t,0),Ue.return()):x(Ue,XE(e,t,n,c,r,De),10);case 10:t.W&&t.Z&&rp(t.W,r.startTime,!0);case 6:if(jr(e.l),e.A)return Ue.return();t.Oa=r,f.next(),t.Qa=!1,t.uf=!1,qe=e.g.V.ob(),Te=qe[t.type],JSON.stringify(Te),t.Lb||e.g.mf(r,t.stream),_s(e,t,0),ge(Ue,0);break;case 2:if(Qe=Re(Ue),jr(e.l,Qe),e.A)return Ue.return();if(t.Qa=!1,Qe.code==7001)t.Qa=!1,ap(t),_s(e,t,0),Ue.u(0);else if(t.type==u.ma&&e.h.ignoreTextStreamFailures)e.i.delete(u.ma),Ue.u(0);else if(Qe.code==3017)r8(e,t,Qe),Ue.u(0);else return t.gd=!0,Qe.category==1&&t.W&&ip(t.W,r),Qe.severity=2,x(Ue,SR(e,t,Qe),0)}})}function t8(e,t,n){var r,u,c,f,h;return Me(function(E){if(E.g==1)return r=t,r.cryptoKey?E.u(2):x(E,r.fetchKey(),3);if(u=r.iv,!u)for(u=Qn(new ArrayBuffer(16)),c=r.firstMediaSequenceNumber+n,f=u.byteLength-1;0<=f;f--)u[f]=c&255,c>>=8;return t.blockCipherMode=="CBC"?h={name:"AES-CBC",iv:u}:h={name:"AES-CTR",counter:u,length:64},E.return(p.crypto.subtle.decrypt(h,r.cryptoKey,e))})}function n8(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function r8(e,t,n){if(!Array.from(e.i.values()).some(function(u){return u!=t&&u.uf})){if(0<e.h.maxDisabledTime&&e.g.Jd(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.gd=!0,e.A=!0,e.g.onError(n);return}t.uf=!0}_s(e,t,4)}function i8(e,t,n){var r,u,c,f,h,E,S,k,G,te,z,ve,Le;return Me(function(De){switch(De.g){case 1:if(r=yi,u=[],c=Math.max(0,n.appendWindowStart-.1),f=n.appendWindowEnd+.01,h=za(t.stream.codecs),E=ba(t.stream.mimeType),S=n.timestampOffset,S==t.cf&&c==t.af&&f==t.$e&&h==t.bf&&E==t.kg){De.u(2);break}if(k=t.bf&&t.kg&&MB(e.g.V,t.type,E,h),!k){De.u(3);break}if(G=null,t.type===r.fa?G=e.i.get(r.S):t.type===r.S&&(G=e.i.get(r.fa)),!G){De.u(3);break}return x(De,sp(G).catch(function(){}),5);case 5:G.ec=null,Vm(e,G);case 3:return te=function(){var qe,Te,Qe;return Me(function(Ue){if(Ue.g==1)return qe=new Map,e.j.audio&&qe.set(r.S,e.j.audio),e.j.video&&qe.set(r.fa,e.j.video),fe(Ue,2),t.af=c,t.$e=f,t.bf=h,t.kg=E,t.cf=S,Te=e.m.sequenceMode||e.m.type=="HLS",x(Ue,Qr(e.g.V,t.type,S,c,f,Te,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,qe),4);if(Ue.g!=2)return ge(Ue,0);throw Qe=Re(Ue),t.af=null,t.$e=null,t.bf=null,t.cf=null,Qe})},x(De,te(),2);case 2:return lt(n.ca,t.ec)||(t.ec=n.ca,n.l&&n.ca&&(z=JE(e,t,n.ca),ve=function(){var qe,Te,Qe,Ue,vt,xt,Vt;return Me(function(Bt){switch(Bt.g){case 1:return fe(Bt,2),x(Bt,z,4);case 4:return qe=Bt.h,jr(e.l),Te=null,Qe=new Map,Ue={projection:null,hfov:null},vt=new Fr,vt.box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(_t){Te=bt(_t.reader,_t.version).timescale}).box("hdlr",function(_t){switch(_t=_t.reader,_t.skip(8),_t.hc()){case"soun":Qe.set(r.S,Te);break;case"vide":Qe.set(r.fa,Te)}Te=null}).box("minf",yr).box("stbl",yr).O("stsd",mu).box("encv",wi).box("avc1",wi).box("avc3",wi).box("hev1",wi).box("hvc1",wi).box("dvav",wi).box("dva1",wi).box("dvh1",wi).box("dvhe",wi).box("vexu",yr).box("proj",yr).O("prji",function(_t){_t=_t.reader.hc(),Ue.projection=_t}).box("hfov",function(_t){_t=_t.reader.M()/1e3,Ue.hfov=_t}).parse(qe),s8(e,Ue),Qe.has(t.type)?n.ca.timescale=Qe.get(t.type):Te!=null&&(n.ca.timescale=Te),xt=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,x(Bt,e.g.Qf(t.type,qe),5);case 5:return x(Bt,Tr(e.g.V,t.type,qe,null,t.stream,xt),6);case 6:ge(Bt,0);break;case 2:throw Vt=Re(Bt),t.ec=null,Vt}})},e.g.Yh(n.startTime,n.ca),u.push(ve()))),e.m.sequenceMode&&(Le=t.Oa?t.Oa.j:null,n.j!=Le&&u.push(Gs(e.g.V,t.type,n.startTime))),x(De,Promise.all(u),0)}})}function XE(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h,E,S,k,G,te;return Me(function(z){switch(z.g){case 1:return h=r.closedCaptions&&0<r.closedCaptions.size,S=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,(S||k)&&(E=new Fr),S&&E.O("emsg",function(ve){var Le=r.emsgSchemeIdUris;if(ve.version===0)var De=ve.reader.hc(),qe=ve.reader.hc(),Te=ve.reader.M(),Qe=ve.reader.M(),Ue=ve.reader.M(),vt=ve.reader.M(),xt=u.startTime+Qe/Te;else Te=ve.reader.M(),xt=ve.reader.Cc()/Te+u.timestampOffset,Qe=xt-u.startTime,Ue=ve.reader.M(),vt=ve.reader.M(),De=ve.reader.hc(),qe=ve.reader.hc();ve=ve.reader.sb(ve.reader.getLength()-ve.reader.wa()),(Le&&Le.includes(De)||e.h.dispatchAllEmsgBoxes)&&(De=="urn:mpeg:dash:event:2012"?e.g.Zh():(Le=new Map().set("detail",{startTime:xt,endTime:xt+Ue/Te,schemeIdUri:De,value:qe,timescale:Te,presentationTimeDelta:Qe,eventDuration:Ue,id:vt,messageData:ve}),Le=new Wn("emsg",Le),Le.cancelable=!0,e.g.onEvent(Le),Le.defaultPrevented||De!="https://aomedia.org/emsg/ID3"&&De!="https://developer.apple.com/streaming/emsg-id3"||(De=Dn(ve),De.length&&u&&e.g.$h([{cueTime:u.startTime,data:ve,frames:De,dts:u.startTime,pts:u.startTime}],0,u.endTime))))}),k&&E.O("prft",function(ve){if(!e.F&&u.ca.timescale){var Le=ve.reader,De=ve.version;Le.M(),ve=Le.M();var qe=Le.M();ve=1e3*ve+qe/Math.pow(2,32)*1e3,De===0?Le=Le.M():(De=Le.M(),Le=Le.M(),Le=De*Math.pow(2,32)+Le),ve=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ve).getTime(),Le=new Map().set("detail",{wallClockTime:ve,programStartDate:new Date(ve-Le/u.ca.timescale*1e3)}),Le=new Wn("prft",Le),e.g.onEvent(Le),e.F=!0}}),(S||k)&&E.parse(c),x(z,o8(e,t,n),2);case 2:return jr(e.l),G=t.od,t.od=!1,te=t.Of,t.Of=!1,x(z,e.g.Qf(t.type,c),3);case 3:return x(z,Tr(e.g.V,t.type,c,u,r,h,G,te,f),4);case 4:jr(e.l),X(z)}})}function o8(e,t,n){var r,u,c,f;return Me(function(h){if(h.g==1)return r=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),u=Zs(e.g.V,t.type),u==null?h.return():(c=n-u,f=c-r,f<=e.h.evictionGoal?h.return():x(h,e.g.V.remove(t.type,u,u+f),2));jr(e.l),X(h)})}function QE(e){return e&&e.type==vr&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function JE(e,t,n,r){var u,c,f,h,E;return Me(function(S){switch(S.g){case 1:if(u=n.ed())return S.return(u);if(c=null,t.W){var k=t.W,G=k.g;n instanceof ht&&(G=k.i),G.has(n)?(k=G.get(n),r&&(k.Ef=r),c=k.fe):c=null}return c||(c=zm(n,t.stream,r||null,e.h.retryParameters,e.g.zb)),f=0,t.Z&&(f=t.Z.h),t.Ya=c,x(S,c.promise,2);case 2:if(h=S.h,t.Ya=null,E=h.data,!n.aesKey){S.u(3);break}return x(S,t8(E,n.aesKey,f),4);case 4:E=S.h;case 3:return S.return(E)}})}function zm(e,t,n,r,u){var c=e instanceof et?e:void 0,f=c?1:0;return e=op(e.$(),e.Aa,e.ja,r,n),e.contentType=t.type,u.request(Wa,e,{type:f,stream:t,segment:c})}function e_(e,t,n,r){var u,c;return Me(function(f){if(f.g==1)return t.Lb=!1,t.le=!1,t.Id=0,t.Xc=!0,t.Oa=null,t.ec=null,t.Z=null,t.W&&!e.o.has(t.stream)&&nl(t.W),r?(u=e.g.Ld(),c=e.g.V.getDuration(),x(f,e.g.V.remove(t.type,u+r,c),3)):x(f,ri(e.g.V,t.type),4);if(f.g!=3)return jr(e.l),n?x(f,e.g.V.flush(t.type),3):f.u(3);jr(e.l),t.Xc=!1,t.endOfStream=!1,t.Qa||t.ub||_s(e,t,0),X(f)})}function _s(e,t,n){var r=t.type;(r!=vr||e.i.has(r))&&(t.ub=new Ds(function(){var u;return Me(function(c){if(c.g==1)return fe(c,2),x(c,XB(e,t),4);if(c.g!=2)return ge(c,0);u=Re(c),e.g&&e.g.onError(u),X(c)})}).X(n))}function ap(e){e.ub!=null&&(e.ub.stop(),e.ub=null)}function sp(e){return Me(function(t){return e.Ya?x(t,e.Ya.abort(),0):t.u(0)})}function SR(e,t,n){var r;return Me(function(u){if(u.g==1)return x(u,Gh(e.I),2);jr(e.l),r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<r&&(n.handled=e.g.Jd(t.stream,r),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),X(u)})}function a8(e){var t,n,r,u,c,f;return Me(function(h){return h.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?h.return(!1):(e.K=t,r=yi,(u=e.i.get(r.S))&&(u.ec=null,Vm(e,u),sp(u).catch(function(){})),(c=e.i.get(r.fa))&&(c.ec=null,Vm(e,c),sp(c).catch(function(){})),f=new Map,e.j.audio&&f.set(r.S,e.j.audio),e.j.video&&f.set(r.fa,e.j.video),x(h,QC(e.g.V,f),2))):h.return(!0)})}function s8(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Wn("spatialvideoinfo",n)}else n=new Wn("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function t_(){}function n_(e,t,n,r,u){var c=u in r,f=!0,h;for(h in t){var E=u+"."+h,S=c?r[u]:n[h];c||h in n?t[h]===void 0?S===void 0||c?delete e[h]:e[h]=Ya(S):S.constructor==Object&&t[h]&&t[h].constructor==Object?(e[h]||(e[h]=Ya(S)),E=n_(e[h],t[h],S,r,E),f=f&&E):typeof t[h]!=typeof S||t[h]==null||typeof t[h]!="function"&&t[h].constructor!=S.constructor?(de("Invalid config, wrong type for "+E),f=!1):(typeof n[h]=="function"&&n[h].length!=t[h].length&&Ke("Unexpected number of arguments for "+E),e[h]=t[h]):(de("Invalid config, unrecognized key "+E),f=!1)}return f}function Ym(e,t){for(var n={},r=n,u=0,c=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(c=e.substring(c,u).replace(/\\\./g,"."),r[c]={},r=r[c],c=u+1),u+=1;return r[e.substring(c).replace(/\\\./g,".")]=t,n}function nd(e,t){return e&&t}re("shaka.util.ConfigUtils",t_),t_.convertToConfigObject=Ym,t_.mergeConfigObjects=n_;function Ja(){}function wR(e){return e=Ka(e),new si(e).wb}function up(e,t,n){function r(h){tn(c).setUint32(f,h.byteLength,!0),f+=4,c.set(Qn(h),f),f+=h.byteLength}if(!n||!n.byteLength)throw new gt(2,6,6015);var u;typeof t=="string"?u=xf(t,!0):u=t,e=Ka(e),e=xf(e,!0);var c=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),f=0;return r(e),r(u),r(n),c}function AR(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ka(e).split("skd://").pop(),up(e,n,t))}function r_(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}re("shaka.util.FairPlayUtils",Ja),Ja.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Vr(t.data)}catch(u){return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(u){}e&&(t.data=Ti(Ho(n)))}},Ja.expressplayFairPlayRequest=function(e,t){r_(e,t)},Ja.conaxFairPlayRequest=function(e,t){r_(e,t)},Ja.ezdrmFairPlayRequest=function(e,t){r_(e,t)},Ja.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Qn(t.body),e=fu(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Va("spc="+e))},Ja.expressplayInitDataTransform=function(e,t,n){return AR(e,t,n)},Ja.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Ka(e).split("skd://").pop().split("?").shift(),n=p.atob(n);var r=new ArrayBuffer(2*n.length);r=Pu(r);for(var u=0,c=n.length;u<c;u++)r[u]=n.charCodeAt(u);return up(e,r,t)},Ja.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ka(e).split(";").pop(),up(e,n,t))},Ja.verimatrixInitDataTransform=function(e,t,n){return AR(e,t,n)},Ja.initDataTransform=up,Ja.defaultGetContentId=wR,Ja.isFairPlaySupported=function(){var e;return Me(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},fe(t,2),x(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Re(t),t.return(!1))})};function i_(){}function rd(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:ua(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(E,S,k){return p.shakaMediaKeysPolyfill&&S=="skd"&&(S=k.serverCertificate,k=wR(E),E=up(E,k,S)),E},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:gs(),minHdcpVersion:"",ignoreDuplicateInitData:!Lu()};(gs()||xr())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;Lu()||Ou()||Yr("Tizen 4")||oa()&&cu()===38||oa()&&cu()===53||oa()&&cu()===68||aa()&&(!aa()||!Yr("Android"))||(navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform&&navigator.platform.toLowerCase().includes("windows"))&&Al()||(n="smooth",r=!0),r={retryParameters:ua(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Wm,manifestPreprocessorTXml:$m,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(Ou()||Lu()||oa()&&cu()===38||xr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Wm,manifestPreprocessorTXml:$m,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var u={retryParameters:ua(),failureCallback:function(E){return nd([E])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,liveSyncPanicMode:!1,liveSyncPanicThreshold:60,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1};(oa()||qa()||aa()||vs())&&(u.stallSkip=0);var c={trackSelectionCallback:function(E){return Me(function(S){return S.return(E)})},downloadSizeCallback:function(E){var S;return Me(function(k){return k.g==1?navigator.storage&&navigator.storage.estimate?x(k,navigator.storage.estimate(),3):k.return(!0):(S=k.h,k.return(S.usage+E<.95*S.quota))})},progressCallback:function(E,S){return nd([E,S])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(E){return nd([E],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(E,S){return nd([E,S])}};var f=!1;(oa()||qa()||aa()||vs()||yc()||xr()||gs())&&(f=!0);var h={drm:t,manifest:r,streaming:u,mediaSource:n,offline:c,abrFactory:function(){return new Hr},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1,skipPlayDetection:f}};return c.trackSelectionCallback=function(E){return Me(function(S){return S.return(u8(E,h.preferredAudioLanguage,h.preferredVideoHdrLevel))})},h}function jc(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return n_(e,t,n||rd(),r,"")}function u8(e,t,n){var r=n;r=="AUTO"&&(r=p.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var u=e.filter(function(h){return!(h.type!="variant"||h.hdr&&h.hdr!=r)});n=[];var c=Cl(t,u.map(function(h){return h.language}));c&&(n=u.filter(function(h){return Cr(h.language)==c})),n.length==0&&(n=u.filter(function(h){return h.primary})),n.length==0&&(u.map(function(h){return h.language}),n=u);var f=n.filter(function(h){return h.height&&480>=h.height});for(f.length&&(f.sort(function(h,E){return E.height-h.height}),n=f.filter(function(h){return h.height==f[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(h,E){return h.bandwidth-E.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=vr&&n.type!="image"||t.push(n);return t}function Wm(e){return nd([e],e)}function $m(e){return nd([e],e)}re("shaka.util.PlayerConfiguration",i_),i_.mergeConfigObjects=jc,i_.createDefault=rd;function rl(e,t,n,r,u){Sr.call(this),this.K=e,this.Y=t,this.bb=u.networkingEngine,this.aa=r,this.m=null,this.Vb=n,this.Ia=0,this.Tb=u.rc,this.A=u.Th,this.Ub=u.Uh,this.g=u.config,this.j=this.B=this.h=null,this.sa=!1,this.C=u.di,this.Ga=!1,this.l=null,this.ea=!1,this.i=this.s=null,this.da=!1,this.I=new Map,this.Ha=!1,this.lb=u.ci,this.ba=new qm,this.qa=new Rr,this.pa=new Rr,this.L=new Rr,this.F=new Rr,this.F.catch(function(){}),this.N=null,this.o=!1,this.Rb=u.Vg,this.ta=null,this.mb=u.Ug,this.T=!1,this.H=[],this.G=[]}Y(rl,Sr);function Xm(e,t,n){(e=t?e.G:e.H)?e.push(n):n()}function l8(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n=n.value,n();e.G=null}function IR(e,t){if(e.N=t,e.T=!0,e.H){t=m(e.H);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.H=null}g=rl.prototype,g.getStartTime=function(){return this.aa},g.ad=function(){return this.K},g.Te=function(){return this.h};function c8(e){return e.da=!0,e.i}function f8(e){return e.sa=!0,e.j}function d8(e){return e.Ga=!0,e.C}g.getStats=function(){return this.ba};function h8(e){return e.ea=!0,e.l}function p8(e){return e.Ha=!0,e.I}g.start=function(){var e=this,t;return Me(function(n){switch(n.g){case 1:return x(n,Promise.resolve(),2);case 2:return fe(n,3),x(n,g8(e),5);case 5:return e.o?n.return():(e.qa.resolve(),x(n,m8(e),6));case 6:if(e.o)return n.return();if(e.pa.resolve(),e.m||(e.m=new Dl(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),dm(e.h,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes)),e.mb){var r=e.g.abrFactory;e.s=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Rb){r=e.h.presentationTimeline.R();var u=Bf(e.h.variants);u=e.m.create(u),e.i.configure(e.g.abr),e.i.setVariants(Array.from(u.values())),(u=e.i.chooseVariant(!0))&&(e.ta=u,u.video&&bR(e,u.video,r),u.audio&&bR(e,u.audio,r))}return x(n,void 0,7);case 7:if(e.o)return n.return();e.L.resolve(),ge(n,0);break;case 3:throw t=Re(n),e.F.reject(t),t}})},g.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Sr.prototype.dispatchEvent.call(this,e)},g.onError=function(e){e.severity===2&&(this.F.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Wn("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function o_(e,t){e.dispatchEvent(new Wn("onstatechange",new Map().set("state",t)))}function g8(e){var t,n,r,u,c;return Me(function(f){if(f.g==1)return o_(e,"manifest-parser"),e.j||(e.B=be(e.K,e.Y),e.j=e.B(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,o_(e,"manifest"),e.h?f.u(2):(n=e,x(f,e.j.start(e.K,e.Ub),3));if(f.g!=2&&(n.h=f.h),r=new Wn("manifestparsed",void 0),e.dispatchEvent(r),e.h.variants.length==0)throw new gt(2,4,4036);v8(e.h),u=Date.now()/1e3,c=u-t,e.ba.F=c,X(f)})}function m8(e){var t,n,r,u,c;return Me(function(f){switch(f.g){case 1:o_(e,"drm-engine"),e.Ia=Date.now()/1e3,e.l=e.Tb(),e.A.g=e.l,e.l.configure(e.g.drm);var h=e.A;if(t=wc(e.h.variants,h.h.restrictions,h.i),!t){f.u(2);break}return n=new Wn("trackschanged",void 0),x(f,Promise.resolve(),3);case 3:e.dispatchEvent(n);case 2:return r=Bf(e.h.variants),x(f,Lm(e.l,r,e.h.offlineSessionIds),4);case 4:return x(f,Ge(e.A,e.h),5);case 5:if(u=f.h,!u){f.u(0);break}return c=new Wn("trackschanged",void 0),x(f,Promise.resolve(),7);case 7:e.dispatchEvent(c),X(f)}})}g.configure=function(e,t){e=Ym(e,t),jc(this.g,e)},g.getConfiguration=function(){return Ya(this.g)};function bR(e,t,n){var r,u,c,f,h;Me(function(E){if(E.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,u=new VE(r,t,function(S,k,G){return zm(S,k,G||null,e.g.streaming.retryParameters,e.bb)}),e.I.set(t.id,u),x(E,t.createSegmentIndex(),2);c=e.aa||0,(h=(f=t.segmentIndex.xb(c))?f.current():null)||(h=t.segmentIndex.get(0)),h&&(n?h.ca&&pR(u,h.ca):rp(u,h.startTime)),X(E)})}g.Fi=function(){return Promise.race([this.L,this.F])},g.destroy=function(){var e=this,t,n,r;return Me(function(u){switch(u.g){case 1:if(e.o=!0,!e.j||e.sa){u.u(2);break}return x(u,e.j.stop(),2);case 2:if(!e.i||e.da){u.u(4);break}return x(u,e.i.stop(),4);case 4:if(e.C&&!e.Ga&&e.C.release(),!e.l||e.ea){u.u(6);break}return x(u,e.l.destroy(),6);case 6:if(0<e.I.size&&!e.Ha)for(t=m(e.I.values()),n=t.next();!n.done;n=t.next())r=n.value,nl(r);X(u)}})};function v8(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}re("shaka.media.PreloadManager",rl),rl.prototype.destroy=rl.prototype.destroy,rl.prototype.waitForFinish=rl.prototype.Fi;function Qm(e,t){Sr.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{oc:null,nc:id,cc:function(r,u){return Zc(n,"enter",r,u)}},{oc:lp,nc:id,cc:function(r,u){return Zc(n,"enter",r,u)}},{oc:cp,nc:id,cc:function(r,u){return Zc(n,"enter",r,u)}},{oc:id,nc:lp,cc:function(r,u){return Zc(n,"exit",r,u)}},{oc:id,nc:cp,cc:function(r,u){return Zc(n,"exit",r,u)}},{oc:lp,nc:cp,cc:function(r,u){return Zc(n,"skip",r,u)}},{oc:cp,nc:lp,cc:function(r,u){return Zc(n,"skip",r,u)}}],this.h=new Tt,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}Y(Qm,Sr),Qm.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Sr.prototype.release.call(this)},Qm.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var u=this.g.get(r),c=e<r.startTime?lp:e>r.endTime?cp:id;this.g.set(r,c);for(var f=m(this.m),h=f.next();!h.done;h=f.next())h=h.value,h.oc==u&&h.nc==c&&h.cc(r,t)}}};function Zc(e,t,n,r){t=new Wn(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var lp=1,id=2,cp=3;function a_(e,t,n){var r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:var G=new si(e).Pa.split("/").pop().split(".");return r=G.length==1?"":G.pop().toLowerCase(),(u=y8[r])?k.return(u):(c=0,f=Oi([e],n),fe(k,2),f.method="HEAD",x(k,t.request(c,f).promise,4));case 4:h=k.h,u=h.headers["content-type"],ge(k,3);break;case 2:if(E=Re(k),!E||E.code!=1002&&E.code!=1001){k.u(3);break}return f.method="GET",x(k,t.request(c,f).promise,6);case 6:S=k.h,u=S.headers["content-type"];case 3:return k.return(u?u.toLowerCase().split(";").shift():"")}})}var y8={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function CR(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(f){return CR(f,e)}).join("");var n=[],r=700<=e.fontWeight,u=e.fontStyle=="italic",c=e.textDecoration.includes("underline");return r&&n.push(["b"]),u&&n.push(["i"]),c&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),r="",(u=RR(u))&&(r+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=RR(u))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(f,h){var E=m(h);return h=E.next().value,E=E.next().value,"<"+h+(E===void 0?"":E)+">"+f+"</"+h+">"},e.payload)}function RR(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function s_(e,t){var n=[];e=m(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,T(s_(r.nestedCues,r)));else{var u=r.clone();u.nestedCues=[],u.payload=CR(r,t),n.push(u)}return n}function da(e,t){this.g=null;for(var n=m(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.mode="disabled",r.label==t&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}g=da.prototype,g.configure=function(){},g.remove=function(e,t){return this.g?(xR(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},g.append=function(e){var t=s_(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};t=m(t);for(var u=t.next();!u.done;r={qc:r.qc},u=t.next())r.qc=u.value,e.some(function(c){return function(f){return f.startTime==c.qc.startTime&&f.endTime==c.qc.endTime&&f.text==c.qc.payload}}(r))||(u=E8(r.qc))&&n.push(u);for(e=n.slice().sort(function(c,f){return c.startTime!=f.startTime?c.startTime-f.startTime:c.endTime!=f.endTime?c.endTime-f.startTime:"line"in VTTCue.prototype?n.indexOf(f)-n.indexOf(c):n.indexOf(c)-n.indexOf(f)}),e=m(e),r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},g.destroy=function(){return this.g&&(xR(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},g.isTextVisible=function(){return this.g.mode=="showing"},g.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function E8(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function xR(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=m(Array.from(e.cues)),u=r.next();!u.done;u=r.next())(u=u.value)&&t(u)&&e.removeCue(u);e.mode=n}re("shaka.text.SimpleTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,da.prototype.configure=da.prototype.configure;function ha(){}g=ha.prototype,g.configure=function(){},g.remove=function(){},g.append=function(){},g.destroy=function(){},g.isTextVisible=function(){return!1},g.setTextVisibility=function(){},re("shaka.text.StubTextDisplayer",ha),ha.prototype.setTextVisibility=ha.prototype.setTextVisibility,ha.prototype.isTextVisible=ha.prototype.isTextVisible,ha.prototype.destroy=ha.prototype.destroy,ha.prototype.append=ha.prototype.append,ha.prototype.remove=ha.prototype.remove,ha.prototype.configure=ha.prototype.configure;function NR(){}function fp(e){for(;e.firstChild;)e.removeChild(e.firstChild)}re("shaka.util.Dom",NR),NR.removeAllChildren=fp;function pa(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||dr("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new pr(function(){r.A.paused||od(r)}).$a(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Tt,this.j.D(document,"fullscreenchange",function(){od(r,!0)}),this.j.D(this.A,"seeking",function(){od(r,!0)}),this.j.D(this.A,"resize",function(){var u=r.A,c=u.videoWidth;u=u.videoHeight,c&&u?r.l=c/u:r.l=null}),this.o=null,"ResizeObserver"in p&&(this.o=new ResizeObserver(function(){od(r,!0)}),this.o.observe(this.g)),this.B=new Map}g=pa.prototype,g.configure=function(e){this.C&&this.C.$a(e.captionsUpdatePeriod)},g.append=function(e){var t=[].concat(T(this.h)),n={};e=m(e);for(var r=e.next();!r.done;n={ud:n.ud},r=e.next())n.ud=r.value,t.some(function(u){return function(c){return on(c,u.ud)}}(n))||this.h.push(n.ud);od(this)},g.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},g.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),od(this,n>this.h.length),!0},g.isTextVisible=function(){return this.m},g.setTextVisibility=function(e){this.m=e};function _8(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function MR(e,t,n,r,u){var c=!1,f=[],h=[];t=m(t);for(var E=t.next();!E.done;E=t.next()){E=E.value,u.push(E);var S=e.i.get(E),k=E.startTime<=r&&E.endTime>r,G=S?S.Mg:null;S&&(f.push(S.Ce),S.ic&&f.push(S.ic),k||(c=!0,e.i.delete(E),S=null)),k&&(h.push(E),S?_8(e,G)||(c=!0):(T8(e,E,u),S=e.i.get(E),G=S.Mg,c=!0)),0<E.nestedCues.length&&G&&MR(e,E.nestedCues,G,r,u),u.pop()}if(c){for(r=m(f),u=r.next();!u.done;u=r.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(h.sort(function(te,z){return te.startTime!=z.startTime?te.startTime-z.startTime:te.endTime-z.endTime}),h=m(h),E=h.next();!E.done;E=h.next())r=e.i.get(E.value),r.ic?(r.ic.contains(n)&&r.ic.removeChild(n),n.appendChild(r.ic),r.ic.appendChild(r.Ce)):n.appendChild(r.Ce)}}function od(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=m(e.B.values());for(var r=t.next();!r.done;r=t.next())fp(r.value);fp(e.g),e.i.clear(),e.B.clear()}e.m&&MR(e,e.h,e.g,n,[])}}function T8(e,t,n){var r=1<n.length,u=r?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),r=!r&&0<t.nestedCues.length;var c=document.createElement(u);if(u!="br"&&w8(e,c,t,n,r),n=null,t.region&&t.region.id){n=t.region,u=e.l===4/3?2.5:1.9;var f=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==qr?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==qr?"%":"px");if(e.B.has(f))n=e.B.get(f);else{var h=document.createElement("span"),E=n.heightUnits==qr?"%":"px",S=n.widthUnits==qr?"%":"px",k=n.viewportAnchorUnits==qr?"%":"px";h.id="shaka-text-region---"+f,h.classList.add("shaka-text-region"),h.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(h.style.height=5.33*n.height+"%",h.style.width=n.width*u+"%"):(h.style.height=n.height+E,h.style.width=n.width+S),n.viewportAnchorUnits===2?(E=n.viewportAnchorY/75*100,S=n.viewportAnchorX/(e.l===4/3?160:210)*100,E-=n.regionAnchorY*n.height*5.33/100,S-=n.regionAnchorX*n.width*u/100,h.style.top=E+"%",h.style.left=S+"%"):(h.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+k,h.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+k),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(f,h),n=h}}u=c,r&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",c.appendChild(u)),e.i.set(t,{Ce:c,Mg:u,ic:n})}function S8(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Bn?n:e==="left"||e==="start"&&t===Vn||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Vn?"line-right":"center"}function w8(e,t,n,r,u){var c=t.style,f=n.nestedCues.length==0,h=1<r.length;c.whiteSpace="pre-wrap";var E=n.payload.replace(/\s+$/g,function(k){return" ".repeat(k.length)});if(c.webkitTextStrokeColor=n.textStrokeColor,c.webkitTextStrokeWidth=n.textStrokeWidth,c.color=n.color,c.direction=n.direction,c.opacity=n.opacity,c.paddingLeft=u_(n.linePadding,n,e.s),c.paddingRight=u_(n.linePadding,n,e.s),c.textCombineUpright=n.textCombineUpright,c.textShadow=n.textShadow,n.backgroundImage)c.backgroundImage="url('"+n.backgroundImage+"')",c.backgroundRepeat="no-repeat",c.backgroundSize="contain",c.backgroundPosition="center",c.width="100%",c.height="100%";else{if(n.nestedCues.length)var S=t;else S=document.createElement("span"),t.appendChild(S);n.border&&(S.style.border=n.border),!u&&((t=DR(r,function(k){return k.backgroundColor}))?S.style.backgroundColor=t:E&&(S.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=DR(r,function(k){return k.fontFamily}))&&(S.style.fontFamily=t),E&&(S.textContent=E)}h&&!r[r.length-1].isContainer?c.display="inline":(c.display="flex",c.flexDirection="column",c.alignItems="center",c.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),f||(c.margin="0"),c.fontFamily=n.fontFamily,c.fontWeight=n.fontWeight.toString(),c.fontStyle=n.fontStyle,c.letterSpacing=n.letterSpacing,c.fontSize=u_(n.fontSize,n,e.s),r=n.line,r!=null&&(f=n.lineInterpretation,f==cn&&(f=1,h=16,e.l&&1>e.l&&(h=32),r=0>r?100+r/h*100:r/h*100),f==1&&(c.position="absolute",n.writingMode==rn?(c.width="100%",n.lineAlign==bn?c.top=r+"%":n.lineAlign=="end"&&(c.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(c.height="100%",n.lineAlign==bn?c.left=r+"%":n.lineAlign=="end"&&(c.right=100-r+"%")):(c.height="100%",n.lineAlign==bn?c.right=r+"%":n.lineAlign=="end"&&(c.left=100-r+"%")))),c.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==rn?c.paddingLeft=n.position:c.paddingTop=n.position),e=S8(n),e=="line-left"?c.cssFloat="left":e=="line-right"&&(c.cssFloat="right"),c.textAlign=n.textAlign,c.textDecoration=n.textDecoration.join(" "),c.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&c.writingMode==n.writingMode||(c.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rn?c.width=n.size+"%":c.height=n.size+"%")}function u_(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var u=r.value;switch(r.unit){case"%":return u/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*u/t.cellResolution.rows+"px";default:return e}}function DR(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}re("shaka.text.UITextDisplayer",pa),pa.prototype.setTextVisibility=pa.prototype.setTextVisibility,pa.prototype.isTextVisible=pa.prototype.isTextVisible,pa.prototype.remove=pa.prototype.remove,pa.prototype.destroy=pa.prototype.destroy,pa.prototype.append=pa.prototype.append,pa.prototype.configure=pa.prototype.configure;function A8(e,t){function n(c){for(var f=c,h=m(t),E=h.next();!E.done;E=h.next())E=E.value,E.end&&E.start<c&&(f+=E.end-E.start);return c=Math.floor(f/3600),h=Math.floor(f/60%60),E=Math.floor(f%60),f=Math.floor(1e3*f%1e3),(10>c?"0":"")+c+":"+(10>h?"0":"")+h+":"+(10>E?"0":"")+E+"."+(100>f?10>f?"00":"0":"")+f}var r=s_(e);e="WEBVTT\n\n",r=m(r);for(var u=r.next();!u.done;u=r.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(c){var f=[];switch(c.textAlign){case"left":f.push("align:left");break;case"right":f.push("align:right");break;case kn:f.push("align:middle");break;case"start":f.push("align:start");break;case"end":f.push("align:end")}switch(c.writingMode){case"vertical-lr":f.push("vertical:lr");break;case"vertical-rl":f.push("vertical:rl")}return f.length?" "+f.join(" "):""}(u)+"\n",e+=u.payload+"\n\n";return e}re("shaka.text.WebVttGenerator",function(){});function PR(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}PR.prototype.configure=function(e){this.g=e};function I8(e,t,n){try{if(!e.g.enabled)return t;var r=l_(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=ev;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=nv;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=LR;break e}u=void 0}r.ot=u,r.su=!0;var c=Jm(r);return c_(t,c)}catch(f){return St("CMCD_SRC_ERROR","Could not generate src CMCD data.",f),t}}function l_(e){return e.g.sessionId||(e.g.sessionId=p.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function ad(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,l_(e)),n.pr=e.h.eb();var u=n.ot===tv||n.ot===nv;if(e.j&&u&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=b8(e,n),r)r=N8(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var c=Jm(e);c&&(t.uris=t.uris.map(function(f){return c_(f,c)}))}}}function b8(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,u){return n.includes(u)&&(r[u]=t[u]),r},{}):t}function C8(e){if(e.type===0)return M8;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?nv:tv;if(t=="audio")return ev;if(t=="text")return e.mimeType==="application/mp4"?rv:f_}}function R8(e,t){if(t=e.h.ob()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function OR(e,t){if(t=e.h.ob()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function x8(e,t){var n=e.h.Hb();if(!n.length)return NaN;e=n[0],n=m(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case tv:return e.videoBandwidth||NaN;case ev:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Jm(e){function t(G){return 100*n(G/100)}function n(G){return Math.round(G)}function r(G){return!Number.isNaN(G)&&G!=null&&G!==""&&G!==!1}var u=[],c={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(G){return encodeURIComponent(G)},rtp:t,tb:n},f=Object.keys(e||{}).sort();f=m(f);for(var h=f.next();!h.done;h=f.next()){h=h.value;var E=e[h];if(r(E)&&(h!=="v"||E!==1)&&(h!="pr"||E!==1)){var S=c[h];S&&(E=S(E)),S=typeof E;var k=void 0;k=S==="string"&&h!=="ot"&&h!=="sf"&&h!=="st"?h+"="+JSON.stringify(E):S==="boolean"?h:S==="symbol"?h+"="+E.description:h+"="+E,u.push(k)}}return u.join(",")}function N8(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],u=[{},{},{},{}],c={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=m(t);for(var f=t.next();!f.done;f=t.next())f=f.value,u[c[f]!=null?c[f]:1][f]=e[f];for(e=0;e<u.length;e++)(c=Jm(u[e]))&&(n["CMCD-"+r[e]]=c);return n}function c_(e,t){return!t||e.includes("offline:")?e:(e=new si(e),e.g.set("CMCD",t),e.toString())}var LR="m",ev="a",tv="v",nv="av",M8="i",f_="c",rv="tt";re("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Og:"s",OTHER:"o"});function es(e){this.h=e,this.g=null}g=es.prototype,g.configure=function(e){this.h=e},g.dg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(UR)?1e3*this.g.get(UR):null},g.cg=function(){return this.h.enabled&&this.g&&this.g.has(FR)?1e3*this.g.get(FR):null},g.xh=function(){return this.h.enabled&&this.g&&this.g.has(BR)?this.g.get(BR):null},g.yh=function(){return this.h.enabled&&this.g&&this.g.has(jR)?this.g.get(jR):null},g.getBandwidthEstimate=function(e){var t=this.cg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function kR(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}re("shaka.util.CmsdManager",es),es.prototype.getBandwidthEstimate=es.prototype.getBandwidthEstimate,es.prototype.getRoundTripTime=es.prototype.yh,es.prototype.getResponseDelay=es.prototype.xh,es.prototype.getEstimatedThroughput=es.prototype.cg,es.prototype.getMaxBitrate=es.prototype.dg;var FR="etp",UR="mb",BR="rd",jR="rtt";function ZR(){this.g=null,this.h=[]}function d_(e,t){return Me(function(n){if(n.g==1)return e.g?x(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,X(n)})}ZR.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function dn(e,t){Sr.call(this);var n=this;this.l=T_,this.Rd=this.g=null,this.da=!1,this.Vd=new Tt,this.Rb=new Tt,this.m=new Tt,this.ta=new Tt,this.C=this.F=this.B=this.G=null,this.Yd=0,this.Y=new ZR,this.ea=this.gf=this.qa=this.i=this.Ga=this.I=this.j=this.lb=this.K=this.rg=this.aa=this.T=this.mb=this.L=this.H=this.bb=null,this.Ia=!1,this.pa=this.o=null,this.nf=1e9,this.$c=[],this.N=NaN,this.h=ld(this),this.ba={width:1/0,height:1/0},this.Pd=new Ae(this.h,this.ba,null),this.s=null,this.sa=new Dl(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount,this.h.preferredVideoHdrLevel,this.h.preferSpatialAudio,this.h.preferredVideoLayout,this.h.preferredAudioLabel,this.h.preferredVideoLabel,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),this.Ha=this.h.preferredTextLanguage,this.Vb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Tb=[],t&&t(this),this.T=H8(this),this.aa=new es(this.h.cmsd),this.G=YR(this),this.G.Cf(this.h.streaming.forceHTTPS),this.A=null,lv&&(this.A=lv(),this.A.configure(this.h.ads)),this.Vd.D(p,"online",function(){y_(n),n.vf()}),this.Td=new pr(function(){return W8(n)}),e&&(dr("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vc(e,!0))}Y(dn,Sr);function iv(e){e.K!=null&&(Zi(e.K),e.K.release(),e.K=null)}function D8(e,t){if(t.lcevc.enabled){var n=e.Hb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(Al()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Ke("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),iv(e),e.K==null&&(e.K=new io(e.g,e.rg,t.lcevc),e.F&&(e.F.T=e.K))}else iv(e)}function Jr(e,t){return new Wn(e,t)}g=dn.prototype,g.destroy=function(){var e=this,t;return Me(function(n){switch(n.g){case 1:return e.l==Hs?n.return():(iv(e),t=e.detach(),e.l=Hs,x(n,t,2));case 2:if(e.Vd&&(e.Vd.release(),e.Vd=null),e.Rb&&(e.Rb.release(),e.Rb=null),e.m&&(e.m.release(),e.m=null),e.ta&&(e.ta.release(),e.ta=null),e.pa=null,e.h=null,e.s=null,e.Rd=null,e.T=null,e.aa=null,!e.G){n.u(3);break}return x(n,e.G.destroy(),4);case 4:e.G=null;case 3:e.o&&(e.o.release(),e.o=null),Sr.prototype.release.call(e),X(n)}})};function sd(e,t){e.dispatchEvent(Jr("onstatechange",new Map().set("state",t)))}g.Vc=function(e,t){t=t===void 0?!0:t;var n=this,r,u,c;return Me(function(f){switch(f.g){case 1:if(n.l==Hs)throw new gt(2,7,7e3);if(r=n.g&&n.g==e,!n.g||n.g==e){f.u(2);break}return x(f,n.detach(),2);case 2:return x(f,h_(n,"attach"),4);case 4:if(f.h)return f.return();if(fe(f,5,6),r||(sd(n,"attach"),u=function(){var h=E_(n);h&&dd(n,h)},n.Rb.D(e,"error",u),n.g=e),!t||!Io()||n.F){f.u(6);break}return x(f,p_(n),6);case 6:Je(f),n.Y.release(),Se(f,0);break;case 5:return c=Re(f),x(f,n.detach(),10);case 10:throw c}})},g.Wg=function(e){this.rg=e},g.detach=function(e){e=e===void 0?!1:e;var t=this;return Me(function(n){if(n.g==1){if(t.l==Hs)throw new gt(2,7,7e3);return x(n,t.lc(!1,e),2)}if(n.g!=3)return x(n,h_(t,"detach"),3);if(n.h)return n.return();try{t.g&&(t.Rb.ib(),t.g=null),sd(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Y.release()}X(n)})};function h_(e,t){var n;return Me(function(r){return r.g==1?(n=++e.Yd,x(r,d_(e.Y,t),2)):n!=e.Yd?(e.Y.release(),r.return(!0)):r.return(!1)})}g.lc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c,f,h,E,S,k,G;return Me(function(te){switch(te.g){case 1:return n.l!=Hs&&(n.l=T_),x(te,h_(n,"unload"),2);case 2:return te.h?te.return():(oe(te,3),n.Ia=!1,sd(n,"unload"),e&&!Io()&&(e=!1),iv(n),r=n.Tb.map(function(z){return z()}),n.Tb=[],x(te,Promise.all(r),5));case 5:if(n.dispatchEvent(Jr("unloading")),n.mb&&(n.mb.release(),n.mb=null),n.g&&(n.m.ib(),n.ta.ib()),n.Td.stop(),n.bb&&(n.bb.release(),n.bb=null),!n.I){te.u(6);break}return x(te,n.I.stop(),7);case 7:n.I=null,n.Ga=null;case 6:if(!n.o){te.u(8);break}return x(te,n.o.stop(),8);case 8:if(!n.j){te.u(10);break}return x(te,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.H&&(n.H.release(),n.H=null),n.C&&(n.C.release(),n.C=null),!n.F){te.u(12);break}return x(te,n.F.destroy(),13);case 13:n.F=null;case 12:if(n.A&&!t&&n.A.onAssetUnload(),n.aa&&(n.aa.g=null),n.g&&fp(n.g),!n.g||!n.g.src){te.u(14);break}return x(te,new Promise(function(z){return new pr(z).X(.1)}),15);case 15:n.g.removeAttribute("src"),n.g.load();case 14:if(!n.B){te.u(16);break}return x(te,n.B.destroy(),17);case 17:n.B=null;case 16:if(n.qa=null,n.gf=null,n.L=null,n.i){for(u=m(n.i.variants),c=u.next();!c.done;c=u.next())for(f=c.value,h=m([f.audio,f.video]),E=h.next();!E.done;E=h.next())(S=E.value)&&S.segmentIndex&&S.segmentIndex.release();for(k=m(n.i.textStreams),E=k.next();!E.done;E=k.next())G=E.value,G.segmentIndex&&G.segmentIndex.release()}n.i=null,n.s=new qm,n.kf=null,n.$c=[],n.N=NaN,v_(n);case 3:Je(te),n.Y.release(),Se(te,4);break;case 4:if(e&&Io()&&!n.F)return x(te,p_(n),0);te.u(0)}})},g.Ei=function(e){this.ea=e},g.load=function(e,t,n){t=t===void 0?null:t;var r=this,u,c,f,h,E,S,k,G,te,z,ve,Le,De;return Me(function(qe){switch(qe.g){case 1:if(r.l==Hs)throw new gt(2,7,7e3);return u=null,c="",e instanceof rl?(u=e,c=u.ad()||""):c=e||"",x(qe,d_(r.Y,"load"),2);case 2:if(r.Y.release(),!r.g)throw new gt(2,7,7002);if(!r.qa){qe.u(3);break}return x(qe,r.lc(!1),3);case 3:if(f=++r.Yd,h=function(){return Me(function(Te){if(Te.g==1)return r.Yd==f?Te.u(0):u?x(Te,u.destroy(),3):Te.u(3);throw new gt(2,7,7e3)})},E=function(Te,Qe){return Me(function(Ue){switch(Ue.g){case 1:return oe(Ue,2),x(Ue,d_(r.Y,Qe),4);case 4:return x(Ue,h(),5);case 5:return x(Ue,Te(),6);case 6:return x(Ue,h(),7);case 7:u&&r.h&&(u.g=r.h);case 2:Je(Ue),r.Y.release(),Se(Ue,0)}})},fe(qe,5,6),t==null&&u&&(t=u.getStartTime()),r.ea=t,r.Ia=!1,r.dispatchEvent(Jr("loading")),u){n=u.Y,qe.u(8);break}if(n){qe.u(8);break}return x(qe,E(function(){return Me(function(Te){if(Te.g==1)return x(Te,HR(r,c),2);n=Te.h,X(Te)})},"guessMimeType_"),8);case 8:if(S=!!u,u){IR(u,r),r.s=u.getStats(),qe.u(11);break}return x(qe,GR(r,c,t,n,!0),12);case 12:if(u=qe.h,!u){r.s=new qm,qe.u(11);break}return IR(u,r),r.s=u.getStats(),x(qe,E(function(){return u.start()},"preload"),11);case 11:if(k=!u,G=u?u.Vb:Date.now()/1e3,r.s=u?u.getStats():new qm,r.qa=c,r.gf=n||null,k)return x(qe,E(function(){return Me(function(Te){return x(Te,k8(r,n),0)})},"initializeSrcEqualsDrmInner_"),24);if(r.F){qe.u(17);break}return x(qe,E(function(){return Me(function(Te){return x(Te,p_(r),0)})},"initializeMediaSourceEngineInner_"),17);case 17:return x(qe,E(function(){return u.qa},"waitForManifest"),19);case 19:return r.h=u.getConfiguration(),r.Pd=u.A,r.Ga=u.B,r.I=f8(u),r.mb=d8(u),r.lb=u.lb,r.i=u.Te(),(te=u.m)&&(r.sa=te),S&&r.g&&r.g.nodeName==="AUDIO"&&(P8(r),r.configure("manifest.disableVideo",!0)),x(qe,E(function(){return u.pa},"waitForDrm"),20);case 20:return r.B=h8(u),x(qe,E(function(){return Me(function(Te){return x(Te,r.B.Vc(r.g),0)})},"drmEngine_.attach"),21);case 21:return x(qe,E(function(){return u.L},"waitForChooseInitialVariant"),22);case 22:return!(z=u.s)||r.pa&&r.pa==z||(r.o=c8(u),r.pa=u.s,typeof r.o.setMediaElement!="function"&&(dr("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(dr("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(dr("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),ve=p8(u),Le=u.ta,x(qe,E(function(){return Me(function(Te){return x(Te,L8(r,G,Le,ve),0)})},"loadInner_"),23);case 23:l8(u),qe.u(16);break;case 24:return x(qe,E(function(){return Me(function(Te){return x(Te,F8(r,G,n),0)})},"srcEqualsInner_"),16);case 16:r.dispatchEvent(Jr("loaded"));case 6:if(Je(qe),!u){qe.u(26);break}return x(qe,u.destroy(),26);case 26:Se(qe,0);break;case 5:if(De=Re(qe),De.code==7e3){qe.u(28);break}return x(qe,r.lc(!1),28);case 28:throw De}})};function P8(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}g.Ai=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,u,c;return Me(function(f){switch(f.g){case 1:if(r=null,!(n.i&&n.I&&n.Ga&&n.qa)){f.u(2);break}return u=n.g.currentTime,n.R()&&(u=null),c=Date.now()/1e3,x(f,qR(n,n.qa,u,n.gf,c,!0,!1,!1),3);case 3:var h=r=f.h,E=n.I,S=n.Ga;h.h=n.i,h.j=E,h.B=S,h=r,E=n.pa,h.i=n.o,h.s=E,r.m=n.sa,r.start(),n.i=null,n.I=null,n.Ga=null,n.o=null,n.pa=null;case 2:return x(f,n.lc(e,t),4);case 4:return f.return(r)}})},g.preload=function(e,t,n){t=t===void 0?null:t;var r=this,u;return Me(function(c){return c.g==1?x(c,GR(r,e,t,n),2):((u=c.h)?u.start().catch(function(){}):dd(r,new gt(2,7,7005)),c.return(u))})};function GR(e,t,n,r,u){u=u===void 0?!1:u;var c,f,h;return Me(function(E){return E.g==1?(c=Date.now()/1e3,r?E.u(2):x(E,HR(e,t),3)):(E.g!=2&&(r=E.h),O8(e,r)?E.return(null):(f=!1,h=!0,u&&(e.o&&e.pa==e.h.abrFactory&&(h=!1),e.g&&e.g.nodeName==="AUDIO"&&(f=!0)),E.return(qR(e,t,n,r||null,c,!u,f,h))))})}function qR(e,t,n,r,u,c,f,h){c=c===void 0?!0:c,f=f===void 0?!1:f,h=h===void 0?!0:h;var E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt;return Me(function(Vt){return Vt.g==1?(E=null,S=Ya(e.h),f&&(S.manifest.disableVideo=!0),k=function(){return E.T&&E.o?null:E},G=function(){return k()?k().getConfiguration():e.h},te=function(Bt,_t){k()?E.configure(Bt,_t):e.configure(Bt,_t)},e.ba.width!=1/0||e.ba.height!=1/0?Vt.u(2):x(Vt,Aa(),3)):(Vt.g!=2&&(z=Vt.h,e.ba.width=z.width,e.ba.height=z.height),ve=new Ae(S,e.ba,null),Le={networkingEngine:e.G,filter:function(Bt){var _t,Zt;return Me(function(ln){if(ln.g==1)return x(ln,Ge(ve,Bt),2);if(ln.g!=4)return _t=ln.h,_t?(Zt=Jr("trackschanged"),x(ln,Promise.resolve(),4)):ln.u(0);E.dispatchEvent(Zt),X(ln)})},makeTextStreamsForClosedCaptions:function(Bt){return z8(e,Bt)},onTimelineRegionAdded:function(Bt){var _t=E.C;e:{for(var Zt=m(_t.g),ln=Zt.next();!ln.done;ln=Zt.next())if(ln=ln.value,ln.schemeIdUri==Bt.schemeIdUri&&ln.id==Bt.id&&ln.startTime==Bt.startTime&&ln.endTime==Bt.endTime){Zt=ln;break e}Zt=null}Zt==null&&(_t.g.add(Bt),Bt=new Wn("regionadd",new Map([["region",Bt]])),_t.dispatchEvent(Bt))},onEvent:function(Bt){return E.dispatchEvent(Bt)},onError:function(Bt){return E.onError(Bt)},isLowLatencyMode:function(){return G().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return G().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){te("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(Bt){var _t=E.l,Zt=_t?_t.g:null;Zt&&_t.s&&ae(ve,Zt.keySystem,Bt)},onManifestUpdated:function(){var Bt=new Map().set("isLive",e.R());E.dispatchEvent(Jr("manifestupdated",Bt)),Xm(E,!1,function(){e.A&&e.A.onManifestUpdated(e.R())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()}},De=new WE(function(){return e.Ib()}),De.addEventListener("regionadd",function(Bt){var _t=Bt.region;hp(e,"timelineregionadded",_t,E),Xm(E,!1,function(){e.A&&e.A.onDashTimedMetadata(_t)})}),qe=null,S.streaming.observeQualityChanges&&(qe=new Hm(function(){return e.ob()}),qe.addEventListener("qualitychange",function(Bt){var _t=Bt.quality;Bt=Bt.position,_t=new Map().set("mediaQuality",{bandwidth:_t.bandwidth,audioSamplingRate:_t.audioSamplingRate,codecs:_t.codecs,contentType:_t.contentType,frameRate:_t.frameRate,height:_t.height,mimeType:_t.mimeType,channelsCount:_t.channelsCount,pixelAspectRatio:_t.pixelAspectRatio,width:_t.width}).set("position",Bt),e.dispatchEvent(Jr("mediaqualitychanged",_t))})),Te=!0,Qe={zb:e.G,onError:function(Bt){return E.onError(Bt)},ee:function(Bt){Xm(E,!0,function(){e:{var _t=Jr("keystatuschanged");e.dispatchEvent(_t);var Zt=Object.keys(Bt);_t=Zt.length==1&&Zt[0]=="00";var ln=!1;if(Zt.length){Zt=m(e.i.variants);for(var pn=Zt.next();!pn.done;pn=Zt.next()){pn=pn.value;var Ln=[];pn.audio&&Ln.push(pn.audio),pn.video&&Ln.push(pn.video),Ln=m(Ln);for(var Mn=Ln.next();!Mn.done;Mn=Ln.next()){var qn=Mn.value;if(Mn=pn.allowedByKeySystem,qn.keyIds.size){pn.allowedByKeySystem=!0,qn=m(qn.keyIds);for(var Yn=qn.next();!Yn.done;Yn=qn.next())Yn=Yn.value,((Yn=Bt[_t?"00":Yn])||e.B.F)&&(pn.allowedByKeySystem=pn.allowedByKeySystem&&!!Yn&&!Q.includes(Yn))}Mn!=pn.allowedByKeySystem&&(ln=!0)}}}if(ln&&(ts(e),!cd(e)))break e;(_t=e.j.j)&&!_t.allowedByKeySystem&&fd(e)}})},onExpirationUpdated:function(Bt,_t){var Zt=Jr("expirationupdated");E.dispatchEvent(Zt),(Zt=E.j)&&Zt.onExpirationUpdated&&Zt.onExpirationUpdated(Bt,_t)},onEvent:function(Bt){E.dispatchEvent(Bt),Bt.type=="drmsessionupdate"&&Te&&(Te=!1,Bt=Date.now()/1e3-E.Ia,(e.s||E.getStats()).j=Bt,e.K&&Zi(e.K))}},Ue=YR(e,k),vt=function(){return e.rc(Qe)},xt={config:S,Uh:Le,di:De,ci:qe,rc:vt,Th:ve,networkingEngine:Ue,Vg:c,Ug:h},E=new rl(t,r,u,n,xt),Vt.return(E))})}function HR(e,t){var n,r;return Me(function(u){return u.g==1?(n=e.h.manifest.retryParameters,x(u,a_(t,e.G,n),2)):(r=u.h,r=="application/x-mpegurl"&&ms()&&(r="application/vnd.apple.mpegurl"),u.return(r))})}function O8(e,t){if(!Io())return!0;if(t){if((e.g||Ec()).canPlayType(t)=="")return!1;if(!(Io()&&t in Fe))return!0;if(sm(t)){if(e.h.streaming.preferNativeHls)return!0;if(ms()&&(e.h.drm.servers["com.apple.fps"]||e.h.drm.servers["com.apple.fps.1_0"]))return e.h.streaming.useNativeHlsForFairPlay;if(ms())return e.h.streaming.useNativeHlsOnSafari}}return!1}function p_(e){var t,n,r,u,c;return Me(function(f){if(f.g==1)return sd(e,"media-source"),t=e.h.textDisplayFactory,n=t(),n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.kf=t,r=q8(e.g,n,function(h,E,S){KR(e,h,E,S)},e.K),r.configure(e.h.mediaSource),u=e.h.manifest,c=u.segmentRelativeVttTiming,r.ba=c,x(f,r.L,2);e.F=r,X(f)})}function L8(e,t,n,r){var u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt;return Me(function(_t){switch(_t.g){case 1:for(sd(e,"load"),u=e.g,e.H=new np({Md:function(){return u.playbackRate},Xb:function(){return u.defaultPlaybackRate},Df:function(Zt){u.playbackRate=Zt},og:function(Zt){u.currentTime+=Zt}}),c=function(){return ov(e)},f=function(){return tx(e)},e.m.D(u,"playing",c),e.m.D(u,"pause",c),e.m.D(u,"ended",c),e.m.D(u,"ratechange",f),D8(e,e.h),e.Ha=e.h.preferredTextLanguage,e.Vb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,__(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.o.init(function(Zt,ln,pn){e.j&&Zt!=e.j.j&&sv(e,Zt,!0,ln===void 0?!1:ln,pn===void 0?0:pn)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.aa),e.j=K8(e),e.j.configure(e.h.streaming),e.l=Oo,u.textTracks&&e.m.D(u.textTracks,"addtrack",function(Zt){if(Zt.track)switch(Zt=Zt.track,Zt.kind){case"chapters":zR(e,Zt)}}),e.dispatchEvent(Jr("streaming")),h=n,(E=e.j.j)||h||(h=rx(e,!0)),S=[],k=E||h,G=m([k.video,k.audio]),te=G.next();!te.done;te=G.next())(z=te.value)&&!z.segmentIndex&&S.push(z.createSegmentIndex());if(!(0<S.length)){_t.u(2);break}return x(_t,Promise.all(S),2);case 2:if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(k),__(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),ve=function(Zt){e.C=Z8(e,Zt),e.bb=G8(e,t),WR(e,u,Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal))},e.h.streaming.startAtSegmentBoundary||ve(e.ea),E){_t.u(4);break}if(!e.h.streaming.startAtSegmentBoundary){_t.u(5);break}return Le=e.i.presentationTimeline,De=e.ea||e.g.currentTime,qe=Le.$b(),Te=Le.pb(),De<qe?De=qe:De>Te&&(De=Te),x(_t,Y8(h,De),6);case 6:Qe=_t.h,ve(Qe);case 5:sv(e,h,!0,!1,0);case 4:return e.C.ve(),Ue=e.wc().find(function(Zt){return Zt.active}),Ue||((vt=Ic(e.i.textStreams,e.Ha,e.Vb,e.Ub)[0]||null)&&KE(e.s.h,vt,!0),h&&(vt?(h.audio&&$8(e,h.audio,vt)&&(e.da=!0),e.da&&e.F.F.setTextVisibility(!0),ax(e)):e.da=!1),vt&&(e.h.streaming.alwaysStreamText||e.Ze())&&Km(e.j,vt)),x(_t,e.j.start(r),7);case 7:e.h.abr.enabled&&(e.o.enable(),sx(e)),ts(e),cd(e),e.i.variants.some(function(Zt){return Zt.primary}),(xt=e.R())&&(e.h.streaming.liveSync||e.i.serviceDescription||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(Vt=function(){return nx(e)},e.m.D(u,"timeupdate",Vt)):xt||(Bt=function(){return av(e)},e.m.D(u,"timeupdate",Bt),av(e)),e.A&&e.A.onManifestUpdated(xt),e.Ia=!0,e.m.na(u,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),X(_t)}})}function k8(e,t){var n,r,u,c;return Me(function(f){return f.g==1?(n=yi,r=Date.now()/1e3,u=!0,e.B=e.rc({zb:e.G,onError:function(h){dd(e,h)},ee:function(){},onExpirationUpdated:function(){var h=Jr("expirationupdated");e.dispatchEvent(h)},onEvent:function(h){e.dispatchEvent(h),h.type=="drmsessionupdate"&&u&&(u=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.h.drm),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?ba(t):"",codecs:t?Do(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.fa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c.video.fullMimeTypes.add(Si(c.video.mimeType,c.video.codecs)),e.B.ba=!0,x(f,Lm(e.B,[c],[]),2)):x(f,e.B.Vc(e.g),0)})}function F8(e,t,n){var r,u,c,f,h,E,S,k,G,te;return Me(function(z){if(z.g==1)return sd(e,"src-equals"),r=e.g,e.C=new sR(r),u=!1,e.Tb.push(function(){u=!0}),e.ea!=null&&e.C.we(e.ea),e.H=new np({Md:function(){return r.playbackRate},Xb:function(){return r.defaultPlaybackRate},Df:function(ve){r.playbackRate=ve},og:function(ve){r.currentTime+=ve}}),c=e.h.streaming.rebufferingGoal,WR(e,r,c),f=function(){return ov(e)},h=function(){return tx(e)},e.m.D(r,"playing",f),e.m.D(r,"pause",f),e.m.D(r,"ended",f),e.m.D(r,"ratechange",h),r.preload!="none"&&e.m.na(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return ts(e)}),e.m.D(r.audioTracks,"removetrack",function(){return ts(e)}),e.m.D(r.audioTracks,"change",function(){return ts(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(ve){if(ve.track)switch(ve=ve.track,ve.kind){case"metadata":j8(e,ve);break;case"chapters":zR(e,ve);break;default:ts(e)}}),e.m.D(r.textTracks,"removetrack",function(){return ts(e)}),e.m.D(r.textTracks,"change",function(){return ts(e)})),r.src=I8(e.T,e.qa,n),(qa()||oa())&&r.load(),r.preload!="none"&&!r.autoplay&&sm(n)&&ys()&&r.load(),e.l=ga,e.dispatchEvent(Jr("streaming")),E=new Rr,ed(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ve(),E.resolve()}),ed(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var ve;return Me(function(Le){if(Le.g==1)return U8(e),ve=dp(e),ve.find(function(De){return De.mode!="disabled"})?(0<ve.length&&(e.da=!0),Le.u(2)):x(Le,new Promise(function(De){e.m.na(r.textTracks,"change",De),new pr(De).X(1)}),2);if(u)return Le.return();B8(e),X(Le)})}),r.error?E.reject(E_(e)):r.preload=="none"&&(Ke('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),E.resolve()),e.m.na(r,"error",function(){E.reject(E_(e))}),x(z,E,2);(S=e.R())&&(e.h.streaming.liveSync||e.h.streaming.liveSyncPanicMode)||e.h.streaming.vodDynamicPlaybackRate?(k=function(){return nx(e)},e.m.D(r,"timeupdate",k)):S||(G=function(){return av(e)},e.m.D(r,"timeupdate",G),av(e)),e.A&&(e.A.onManifestUpdated(S),S&&(te=e.Ib().end,e.m.D(r,"progress",function(){var ve=e.Ib().end;te!=ve&&(e.A.onManifestUpdated(e.R()),te=ve)}))),e.Ia=!0,X(z)})}function U8(e){var t=e.h.preferredAudioLanguage;t!=""&&e.wg(t,e.h.preferredVariantRole)}function B8(e){var t=e.h.preferredTextLanguage;t!=""&&e.yf(t,e.h.preferredTextRole,e.h.preferForcedSubs)}function j8(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues)for(var r=m(t.activeCues),u=r.next();!u.done;u=r.next())u=u.value,VR(e,u.startTime,u.endTime,u.type,u.value),e.A&&e.A.onCueMetadataChange(u.value)});var n=new pr(function(){var r=V8(e);r=m(r);for(var u=r.next();!u.done;u=r.next())u.value.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}function KR(e,t,n,r){t=m(t);for(var u=t.next();!u.done;u=t.next())if(u=u.value,u.data&&u.cueTime&&u.frames){var c=u.cueTime+n,f=r;f&&c>f&&(f=c);for(var h=m(u.frames),E=h.next();!E.done;E=h.next())VR(e,c,f,"org.id3",E.value);e.A&&e.A.onHlsTimedMetadata(u,c)}}function VR(e,t,n,r,u){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",u),e.dispatchEvent(Jr("metadata",t))}function zR(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new pr(function(){t.mode="hidden"}).kc().X(.5);e.Tb.push(function(){n.stop()})}}g.hi=function(){for(var e=this.Y;e.g;)e.release()},g.rc=function(e){return new Lc(e)};function YR(e,t){function n(u){t()?t().dispatchEvent(u):e.dispatchEvent(u)}function r(u){t()?Xm(t(),!0,u):u()}return t||(t=function(){return null}),new Kr(function(u,c,f,h){var E=t()?t().i:e.o;E&&E.segmentDownloaded(u,c,f,h)},function(u,c,f){c=new Map().set("headers",u).set("request",c).set("requestType",f),n(Jr("downloadheadersreceived",c)),r(function(){if(e.aa){var h=e.aa;if(h.h.enabled){var E=u["cmsd-static"];if(E)try{var S=new Map,k=E.split(",");for(E=0;E<k.length;E++){var G=k[E].split("=");S.set(G[0],kR(G[1]))}}catch(De){}if(S=u["cmsd-dynamic"]){try{var te=new Map,z=S.split(";");for(S=1;S<z.length;S++){var ve=z[S].split("=");te.set(ve[0],kR(ve[1]))}var Le=te}catch(De){Le=null}Le&&(h.g=Le)}}}})},function(u,c,f,h){u=new Map().set("request",u).set("error",c).set("httpResponseCode",f).set("aborted",h),n(Jr("downloadfailed",u))},function(u,c,f){r(function(){var h=e.T,E=f;if(E=E===void 0?{}:E,h.g.enabled)if(c.method==="HEAD")ad(h,c);else switch(u){case 0:try{if(h.g.enabled){if(E.type){e:{switch(E.type){case 4:var S="d";break e;case 3:case 2:S="h";break e;case 5:S="s";break e}S=void 0}h.m=S}ad(h,c,{ot:LR,su:!h.i})}}catch(Mn){St("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Mn)}break;case Wa:try{if(h.g.enabled){var k=E.segment;S=0,k&&(S=k.endTime-k.startTime);var G={d:1e3*S,st:h.h.R()?"l":"v"};G.ot=C8(E);var te=G.ot===tv||G.ot===ev||G.ot===nv||G.ot===rv,z=E.stream;if(z){var ve=h.h.eb();if(te&&(G.bl=R8(h,z.type),G.ot!==rv)){var Le=OR(h,z.type);G.dl=ve?Le/Math.abs(ve):Le}if(z.bandwidth&&(G.br=z.bandwidth/1e3),z.segmentIndex&&k){var De=z.segmentIndex.xb(k.endTime,!0,0>ve);if(De){var qe=De.next().value;if(qe&&qe!=k){if(!Zn(k.$(),qe.$())){var Te=qe.$()[0],Qe=c.uris[0],Ue=new URL(Te),vt=new URL(Qe);if(Ue.origin!==vt.origin)var xt=Te;else{for(var Vt=Ue.pathname.split("/").slice(1),Bt=vt.pathname.split("/").slice(1,-1);Vt[0]===Bt[0];)Vt.shift(),Bt.shift();for(;Bt.length;)Bt.shift(),Vt.unshift("..");xt=Vt.join("/")}G.nor=xt}if((qe.Aa||qe.ja)&&(k.Aa!=qe.Aa||k.ja!=qe.ja)){var _t=qe.Aa+"-";qe.ja&&(_t+=qe.ja),G.nrr=_t}}}var Zt=h.h.eb()||1,ln=OR(h,z.type)||500,pn=z.bandwidth,Ln=pn?pn*(k.endTime-k.startTime)/1e3/(ln/Zt/1e3)*h.g.rtpSafetyFactor:NaN;isNaN(Ln)||(G.rtp=Ln)}}te&&G.ot!==rv&&(G.tb=x8(h,G.ot)/1e3),ad(h,c,G)}}catch(Mn){St("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Mn)}break;case 2:case 5:case 6:ad(h,c,{ot:"k"});break;case 4:ad(h,c,{ot:"o"})}})},function(u,c,f,h){(u=t()?t().j:e.I)&&u.banLocation&&u.banLocation(h)},function(u,c){u=c.data.byteLength,(c=t()?t().getStats():e.s)&&(c.Ed=isNaN(c.Ed)?u:c.Ed+u)})}function Z8(e,t){return new uR(e.g,e.i,e.h.streaming,t,function(){e.bb&&hR(e.bb,!0),e.j&&e.j.od(),e.L&&ud(e)},function(n){return e.dispatchEvent(n)})}function G8(e,t){t=new Qm(e.mb,e.R()||0<t),t.addEventListener("enter",function(r){hp(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){hp(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var u=r.region;r.seeking||(hp(e,"timelineregionenter",u),hp(e,"timelineregionexit",u))});var n=new dR(e.g);return n.g.add(t),e.lb&&n.g.add(e.lb),n}function WR(e,t,n){e.L=new Bh,e.L.g=Pl,jh(e.L,n,Math.min(.5,n/2)),v_(e),e.m.D(t,"waiting",function(){return ud(e)}),e.m.D(t,"stalled",function(){return ud(e)}),e.m.D(t,"canplaythrough",function(){return ud(e)}),e.m.D(t,"progress",function(){return ud(e)})}function ud(e){switch(e.l){case ga:if(e.g.ended)var t=!0;else{var n=Ft(e.g.buffered);t=n!=null&&n>=e.g.duration-1}break;case Oo:e:if(e.g.ended||Bc(e.F))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.Gb();var r=Ft(e.g.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=An(e.g.buffered,e.g.currentTime),n=e.L;var u=t,c=n.i.get(n.g);t=n.g,r=u||r>=c?Cc:Pl,n.g=r,(t=t!=r)&&r===Cc&&(n.h=Date.now()),t&&v_(e)}function q8(e,t,n,r){return new _u(e,t,n,r)}function H8(e){return new PR({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},ob:function(){return e.ob()},getCurrentTime:function(){return e.g?e.g.currentTime:0},eb:function(){return e.eb()},Zb:function(){return e.Zb()},Hb:function(){return e.Hb()},R:function(){return e.R()}},e.h.cmcd)}function K8(e){return new yR(e.i,{Ld:function(){return e.C?e.C.Dd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},V:e.F,zb:e.G,onError:function(t){return dd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Zh:function(){e.I&&e.I.update&&e.I.update()},mf:function(t,n){var r=t.startTime,u=t.endTime,c=n.type;if(e.C){e.C.pg();var f=Zs(e.F,c);!e.R()&&e.g.paused&&f!=null&&0<f&&e.C.Dd()<f&&e.C.we(f)}ud(e),r=new Map().set("start",r).set("end",u).set("contentType",c),e.dispatchEvent(Jr("segmentappended",r)),e.o&&n.fastSwitching&&t.md&&t.Wd&&e.o.trySuggestStreams()},Yh:function(t,n){(n=n.ff)&&e.lb&&qB(e.lb,n,t)},Qf:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){n=new Dm(Qn(n));var u=0,c=m(n.data);for(t=c.next();!t.done;t=c.next())u+=t.value.length;if(u==0)r=Promise.resolve();else{for(u=new Uint8Array(u),c=0,n=m(n.data),t=n.next();!t.done;t=n.next())t=t.value,u.set(t,c),c+=t.length;Ul(r,"cenc",u),r=r.l}}else r=Promise.resolve();return r},$h:function(t,n,r){KR(e,t,n,r)},Jd:function(t,n){return e.Jd(t,n)}})}g.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Ym(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dr("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dr("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&dr("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dr("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var n=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return n},delete e.mediaSource.sourceBufferExtraFeatures}e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var r=jc(this.h,e,ld(this));return $R(this),r};function $R(e){if(e.Pd=new Ae(e.h,e.ba,e.B),e.I){var t=Ya(e.h.manifest);e.g&&e.g.nodeName==="AUDIO"&&(t.disableVideo=!0),e.I.configure(t)}if(e.B&&e.B.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.l!=Hs&&le(e.Pd,e.i)&&ts(e)}catch(c){dd(e,c)}e.o&&cd(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||fd(e)}if(e.G&&e.G.Cf(e.h.streaming.forceHTTPS),e.F)if(e.F.configure(e.h.mediaSource),e.F.ba=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.kf!=t){var n=t();n.configure?n.configure(e.h.textDisplayer):dr("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.F,u=r.F;r.F=n,u&&(n.setTextVisibility(u.isTextVisible()),u.destroy()),r.g&&(r.g.j=n),e.kf=t,e.j&&(t=e.j,(n=t.i.get(vr))&&td(t,n.stream,!0,0,!0))}else t=e.F.F,t.configure&&t.configure(e.h.textDisplayer);e.o&&(e.o.configure(e.h.abr),e.h.abr.enabled?e.o.enable():e.o.disable(),sx(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),jh(e.L,t,Math.min(.5,t/2))),e.i&&__(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.A&&e.A.configure(e.h.ads),e.T&&e.T.configure(e.h.cmcd),e.aa&&e.aa.configure(e.h.cmsd)}g.getConfiguration=function(){var e=ld(this);return jc(e,this.h,ld(this)),e},g.ag=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ib().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},g.li=function(){for(var e in this.h)delete this.h[e];jc(this.h,ld(this),ld(this)),$R(this)},g.qh=function(){return this.l},g.Ue=function(){return this.i?this.i.type:null},g.th=function(){return this.g},g.Zb=function(){return this.G},g.ad=function(){return this.qa},g.$f=function(){return this.A?this.A:null},g.R=function(){return this.i?this.i.presentationTimeline.R():this.g&&this.g.src?this.g.duration==1/0:!1},g.dc=function(){return this.i?this.i.presentationTimeline.dc():!1},g.Kh=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},g.Ib=function(){if(this.i){if(!this.Ia&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.pb()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},g.Hh=function(){this.R()&&(this.g.currentTime=this.Ib().end)},g.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},g.drmInfo=function(){return this.B?this.B.g:null},g.cd=function(){return this.B?this.B.cd():1/0},g.Se=function(){return this.B?this.B.Se():[]},g.Kd=function(){return this.B?this.B.Kd():{}},g.Xe=function(){return this.L?this.L.g==Pl:!1},g.eb=function(){return this.g?this.H?this.H.h:1:0},g.sd=function(e){var t=this;e==0?Ke("A trick play rate of 0 is unsupported!"):(this.ta.ib(),this.g.paused&&this.g.play(),this.H.set(e),this.l==Oo&&(this.o.playbackRateChanged(e),ER(this.j,1<Math.abs(e))),this.R()&&this.ta.D(this.g,"timeupdate",function(){var n=t.g.currentTime,r=t.Ib(),u=t.h.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Wc():Math.floor(n)<=Math.floor(r.start+u)&&t.Wc()}))},g.Wc=function(){var e=this.H.Xb();this.l==ga&&this.H.set(e),this.l==Oo&&(this.H.set(e),this.o.playbackRateChanged(e),ER(this.j,!1)),this.ta.ib()},g.Hb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=m(this.i.variants),u=r.next();!u.done;u=r.next())if(u=u.value,Uf(u)){var c=xl(u);c.active=u==e,c.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(c.active=!0),c.active&&n++,t.push(c)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(f){return Ml(f)}):[]},g.wc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=m(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var u=Nl(r);u.active=r==e,t.push(u)}return t}return this.g&&this.g.src&&this.g.textTracks?dp(this).map(function(c){return vm(c)}):[]},g.oh=function(){var e=this.$c;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Ku(t)})},g.gh=function(e){var t=this,n,r,u,c;return Me(function(f){return f.g==1?t.l!=Oo&&t.l!=ga?f.return(null):(n=t.$c,t.i&&(n=t.i.imageStreams),(r=n.find(function(h){return h.id==e}))?r.segmentIndex?f.u(2):x(f,r.createSegmentIndex(),2):f.return(null)):f.g!=4?(u=[],r.segmentIndex.tc(function(h){var E=XR(h.tilesLayout||r.tilesLayout);if(E){E=E.rows*E.Sb;for(var S=h.i-h.startTime,k=0;k<E;k++)u.push(t.fg(e,h.startTime+S*k/E))}}),x(f,Promise.all(u),4)):(c=f.h,f.return(c.filter(function(h){return h})))})};function XR(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Sb:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}g.fg=function(e,t){var n=this,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue;return Me(function(vt){return vt.g==1?n.l!=Oo&&n.l!=ga?vt.return(null):(r=n.$c,n.i&&(r=n.i.imageStreams),(u=r.find(function(xt){return xt.id==e}))?u.segmentIndex?vt.u(2):x(vt,u.createSegmentIndex(),2):vt.return(null)):(c=u.segmentIndex.find(t),c==null||(f=u.segmentIndex.get(c),h=XR(f.tilesLayout||u.tilesLayout),!h)?vt.return(null):(E=u.width||0,S=u.height||0,k=E/h.Sb,G=S/h.rows,te=h.Sb*h.rows,z=f.i-f.startTime,ve=f.A||z/te,Le=f.startTime,qe=De=0,1<te&&(Te=Math.floor((t-f.startTime)/ve),Le=f.startTime+Te*ve,De=Te%h.Sb*k,qe=Math.floor(Te/h.Sb)*G),Qe=!1,(Ue=f.s)&&(Qe=!0,G=Ue.height,De=Ue.positionX,qe=Ue.positionY,k=Ue.width),vt.return({segment:f,imageHeight:S,imageWidth:E,height:G,positionX:De,positionY:qe,startTime:Le,duration:ve,uris:f.$(),width:k,sprite:Qe})))})},g.xg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(KE(this.s.h,t,!1),Km(this.j,t),uv(this),this.Ha=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=dp(this),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Ac(n)==e.id?n.mode=this.da?"showing":"hidden":n.mode="disabled";uv(this)}},g.zf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.h.abr.enabled&&Ke("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.i.variants.find(function(u){return u.id==e.id});r&&Uf(r)&&(sv(this,r,!1,t,n),this.sa=new Uh(r,this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),cd(this))}else if(this.g&&this.g.audioTracks){for(t=Array.from(this.g.audioTracks),t=m(t),n=t.next();!n.done;n=t.next())if(n=n.value,Ac(n)==e.id){ix(this,n);break}}},g.ih=function(){return lx(this.Hb())},g.Ah=function(){return lx(this.wc())},g.hh=function(){return Array.from(ux(this.Hb()))},g.zh=function(){return Array.from(ux(this.wc()))},g.wg=function(e,t,n,r){if(n=n===void 0?0:n,r=r===void 0?0:r,this.i&&this.C){this.sa=new Dl(e,t||"",n,"",!1,"","","",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),e=function(f,h){return f.video||h.video?f.video&&h.video?Math.abs((f.video.height||0)-(h.video.height||0))+Math.abs((f.video.width||0)-(h.video.width||0)):1/0:0},t=this.j.j;var u=this.sa.create(this.i.variants);n=null,u=m(u.values());for(var c=u.next();!c.done;c=u.next())c=c.value,(!n||e(n,t)>e(c,t))&&(n=c);n?(e=xl(n),this.zf(e,!0,r)):fd(this)}else this.g&&this.g.audioTracks&&(r=Ic(this.Hb(),e,t||"",!1)[0])&&this.zf(r)},g.yf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Ha=e,this.Vb=t||"",this.Ub=n,(e=Ic(this.i.textStreams,this.Ha,this.Vb,this.Ub)[0]||null)&&e!=this.j.s&&(KE(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.Ze())&&(Km(this.j,e),uv(this))):(e=Ic(this.wc(),e,t||"",n)[0])&&this.xg(e)},g.si=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,u=m(this.i.variants),c=u.next();!c.done;c=u.next())if(c=c.value,c.audio.label==e){r=c;break}r!=null&&(this.sa=new Dl(r.language,"",0,"",!1,"",e,"",this.h.mediaSource.codecSwitchingStrategy,this.h.manifest.dash.enableAudioGroups),fd(this,t,n))}else if(this.g&&this.g.audioTracks){for(n=Array.from(this.g.audioTracks),t=null,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&ix(this,t)}},g.Ze=function(){var e=this.da;return this.F&&this.l==Oo?this.F.F.isTextVisible():this.g&&this.g.src&&this.g.textTracks?dp(this).some(function(t){return t.mode=="showing"}):e},g.bg=function(){return this.g&&this.g.src&&this.g.textTracks?QR(this).map(function(e){return vm(e)}):[]},g.jh=function(e){if(!this.g||!this.g.src||!this.g.textTracks)return[];var t=Cr(e),n=QR(this).filter(function(h){return Cr(h.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=m(n);for(var u=n.next();!u.done;u=n.next())if((u=u.value)&&u.cues){u=m(u.cues);for(var c=u.next();!c.done;c=u.next()){var f=c.value;(c=f.id)&&c!=""||(c=f.startTime+"-"+f.endTime+"-"+f.text),f={id:c,title:f.text,startTime:f.startTime,endTime:f.endTime},r.has(c)||(e.push(f),r.add(c))}}return e};function dp(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function V8(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="metadata"})}function QR(e){return Array.from(e.g.textTracks).filter(function(t){return t.kind=="chapters"})}g.Dg=function(e){if(e=!!e,this.da!=e){if(this.da=e,this.l==Oo)this.F.F.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.s||(e=Ic(this.i.textStreams,this.Ha,this.Vb,this.Ub),0<e.length&&(Km(this.j,e[0]),uv(this))):zB(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var t=dp(this);t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}ax(this)}},g.vh=function(){if(this.C)var e=this.C.Dd();else{if(this.ea==null)return new Date;e=this.ea}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.B||t.i)+e))}return this.g&&this.g.getStartDate?(t=this.g.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},g.eg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.B||e.i))}return this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:e):null},g.Nd=function(){return this.R()&&this.i?this.i.presentationTimeline.Nd():null},g.ob=function(){if(this.l==Oo)return this.F.ob();var e={total:[],audio:[],video:[],text:[]};return this.l==ga&&(e.total=yt(this.g.buffered)),e},g.getStats=function(){if(this.l!=Oo&&this.l!=ga)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,bytesDownloaded:NaN,switchHistory:[],stateHistory:[]};ov(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.L=this.C.Mf(),this.s.N=this.C.Nf()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.K=Number(n.droppedVideoFrames),t.I=r,this.s.H=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Oo){if(n=this.j.j,t=this.j.s,n){r=this.H?this.H.h:1;var u=r*n.bandwidth;t&&t.bandwidth&&(u+=r*t.bandwidth),this.s.B=u}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.R()&&(n=this.eg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==ga&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var c=this.s;e=c.o,n=c.l,t=c.B,r=c.I,u=c.K;var f=c.H,h=c.N,E=c.L,S=c.A,k=c.i,G=c.m,te=c.F,z=c.j,ve=HE(c.g,"playing"),Le=HE(c.g,"paused"),De=HE(c.g,"buffering"),qe=c.s,Te=c.C,Qe=c.G,Ue=c.Ed,vt=UB(c.g),xt=[];c=m(c.h.g);for(var Vt=c.next();!Vt.done;Vt=c.next())Vt=Vt.value,xt.push({timestamp:Vt.timestamp,id:Vt.id,type:Vt.type,fromAdaptation:Vt.fromAdaptation,bandwidth:Vt.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:u,corruptedFrames:f,stallsDetected:h,gapsJumped:E,estimatedBandwidth:S,completionPercent:k,loadLatency:G,manifestTimeSeconds:te,drmTimeSeconds:z,playTime:ve,pauseTime:Le,bufferingTime:De,licenseTime:qe,liveLatency:Te,maxSegmentDuration:Qe,bytesDownloaded:Ue,stateHistory:vt,switchHistory:xt}},g.Rg=function(e,t,n,r,u,c,f){f=f===void 0?!1:f;var h=this,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe;return Me(function(Ue){switch(Ue.g){case 1:if(h.l!=Oo&&h.l!=ga)throw new gt(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ke("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){Ue.u(2);break}return x(Ue,g_(h,e),3);case 3:r=Ue.h;case 2:if(E=[],h.A&&(E=h.A.getCuePoints()),h.l!=ga){Ue.u(4);break}return f&&(n="forced"),x(Ue,JR(h,e,t,n,r,c||"",E),5);case 5:if(S=Cr(t),k=h.wc(),G=k.find(function(vt){return Cr(vt.language)==S&&vt.label==(c||"")&&vt.kind==n}))return ts(h),Ue.return(G);throw new gt(1,2,2012);case 4:if(te=yi,z=h.g.duration,h.i&&(z=h.i.presentationTimeline.getDuration()),z==1/0)throw new gt(1,4,4033);if(!E.length){Ue.u(6);break}return x(Ue,m_(h,e,h.G,h.h.streaming.retryParameters),7);case 7:ve=Ue.h,Le=ex(h,ve,r,E),De=new Blob([Le],{type:"text/vtt"}),e=Gm(De),r="text/vtt";case 6:if(qe={id:h.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:qE(0,z,[e]),mimeType:r||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:c||null,type:te.ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!f,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(r||"",u||"")])},Te=Si(qe.mimeType,qe.codecs),Qe=bl(Te),!Qe)throw new gt(2,2,2014,r);return h.i.textStreams.push(qe),ts(h),Ue.return(Nl(qe))}})},g.Sg=function(e,t){var n=this,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te;return Me(function(Qe){switch(Qe.g){case 1:if(n.l!=Oo&&n.l!=ga)throw new gt(1,7,7004);if(t){Qe.u(2);break}return x(Qe,g_(n,e),3);case 3:t=Qe.h;case 2:if(t!="text/vtt")throw new gt(1,2,2017,e);if(r=yi,u=n.g.duration,n.i&&(u=n.i.presentationTimeline.getDuration()),u==1/0)throw new gt(1,4,4045);return x(Qe,m_(n,e,n.G,n.h.streaming.retryParameters),4);case 4:if(c=Qe.h,f=ji[t],!f)throw new gt(2,2,2014,t);for(h=f(),E={periodStart:0,segmentStart:0,segmentEnd:u,vttOffset:0},S=Qn(c),k=h.parseMedia(S,E,e),G=[],te={},z=m(k),ve=z.next();!ve.done;te={Rc:te.Rc,Nb:te.Nb},ve=z.next())te.Nb=ve.value,te.Rc=null,Le=function(Ue){return function(){return Ue.Rc==null&&(Ue.Rc=co([e],[Ue.Nb.payload])),Ue.Rc||[]}}(te),De=new et(te.Nb.startTime,te.Nb.endTime,Le,0,null,null,0,0,1/0),te.Nb.payload.includes("#xywh")&&(qe=te.Nb.payload.split("#xywh=")[1].split(","),qe.length===4&&De.Eg({height:parseInt(qe[3],10),positionX:parseInt(qe[0],10),positionY:parseInt(qe[1],10),width:parseInt(qe[2],10)})),G.push(De);return Te={id:n.nf++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(G),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.ue,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Si(t||"","")])},n.l==ga?n.$c.push(Te):n.i.imageStreams.push(Te),ts(n),Qe.return(Ku(Te))}})},g.Qg=function(e,t,n){var r=this,u,c,f,h;return Me(function(E){switch(E.g){case 1:if(r.l!=Oo&&r.l!=ga)throw new gt(1,7,7004);if(n){E.u(2);break}return x(E,g_(r,e),3);case 3:n=E.h;case 2:return u=[],r.A&&(u=r.A.getCuePoints()),x(E,JR(r,e,t,"chapters",n,"",u),4);case 4:if(c=E.h,f=r.bg(),h=f.find(function(S){return S.language==t}),!h){E.u(5);break}return x(E,new Promise(function(S,k){r.m.na(c,"load",S),r.m.na(c,"error",function(){k(new gt(1,2,2015))})}),6);case 6:return ts(r),E.return(h);case 5:throw new gt(1,2,2012)}})};function g_(e,t){var n;return Me(function(r){switch(r.g){case 1:return fe(r,2),x(r,a_(t,e.G,e.h.streaming.retryParameters),4);case 4:n=r.h,ge(r,3);break;case 2:Re(r);case 3:if(n)return r.return(n);throw new gt(1,2,2011,t)}})}function JR(e,t,n,r,u,c,f){var h,E,S,k;return Me(function(G){if(G.g==1)return u!="text/vtt"||f.length?x(G,m_(e,t,e.G,e.h.streaming.retryParameters),3):G.u(2);G.g!=2&&(h=G.h,E=ex(e,h,u,f),S=new Blob([E],{type:"text/vtt"}),t=Gm(S),u="text/vtt"),k=document.createElement("track");var te=e.T,z=t;try{if(te.g.enabled){var ve=l_(te);ve.ot=f_,ve.su=!0;var Le=Jm(ve),De=c_(z,Le)}else De=z}catch(qe){St("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",qe),De=z}return k.src=De,k.label=c,k.kind=r,k.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(k),G.return(k)})}function m_(e,t,n,r){var u,c,f;return Me(function(h){if(h.g==1){u=Wa,c=Oi([t],r),c.method="GET";var E=e.T;try{E.g.enabled&&ad(E,c,{ot:f_,su:!0})}catch(S){St("CMCD_TEXT_ERROR","Could not generate text CMCD data.",S)}return x(h,n.request(u,c).promise,2)}return f=h.h,h.return(f.data)})}function ex(e,t,n,r){var u=ji[n];if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Qn(t),t=n.parseMedia(t,e,null),A8(t,r);throw new gt(2,2,2014,n)}g.xi=function(e,t){this.ba.width=e,this.ba.height=t},g.vf=function(e){if(this.l==Oo){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.A)t=!1;else{for(var n=m(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.gd||r.Qa||r.ub||(r.gd=!1,_s(t,r,e));t=!0}}else t=!1;return t},g.Te=function(){return Ke("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},g.rh=function(){return this.Ga};function ld(e){var t=rd();return t.streaming.failureCallback=function(n){if(e.R()){var r=null;n.code==1001||n.code==1002?r=1:n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.vf(r))}},t.textDisplayFactory=function(){if(e.Rd){var n=e.getConfiguration();return new pa(e.g,e.Rd,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new da(e.g,"Shaka Player TextTrack"):new ha},t}g.Hg=function(e){this.Rd=e};function z8(e,t){for(var n=new Set,r=m(t.textStreams),u=r.next();!u.done;u=r.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(r=m(t.variants),u=r.next();!u.done;u=r.next())if((u=u.value.video)&&u.closedCaptions){for(var c=m(u.closedCaptions.keys()),f=c.next();!f.done;f=c.next())if(f=f.value,!n.has(f)){var h=f.startsWith("CC")?"application/cea-608":"application/cea-708",E=new Ei,S=u.closedCaptions.get(f);h={id:e.nf++,originalId:f,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:E,mimeType:h,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:S,originalLanguage:S,label:null,type:vr,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(h,"")])},t.textStreams.push(h),n.add(f)}}}function Y8(e,t){var n,r,u,c,f;return Me(function(h){return h.g==1?(n=e.audio,r=e.video,u=function(E,S){var k,G,te;return Me(function(z){return z.g==1?E?x(z,E.createSegmentIndex(),2):z.return(null):(G=(k=E.segmentIndex.xb(S))?k.next().value:null,G?(te=G.startTime,z.return(te)):z.return(null))})},x(h,u(n,t),2)):h.g!=3?(c=h.h,x(h,u(r,t),3)):(f=h.h,f!=null&&c!=null?h.return(Math.max(f,c)):f!=null?h.return(f):c!=null?h.return(c):h.return(t))})}function v_(e){var t=e.Xe();if(e.s&&e.L&&e.C){if(e.T){var n=e.T;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}ov(e)}t=new Map().set("buffering",t),e.dispatchEvent(Jr("buffering",t))}function tx(e){var t=e.g.playbackRate;t!=0&&(e.H&&e.H.set(t),t=Jr("ratechange"),e.dispatchEvent(t))}function ov(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Pl?n="buffering":e.g.paused?n="paused":e.g.ended&&(n="ended");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Jr("statechanged",n)))}}function nx(e){var t=e.g.playbackRate,n=e.R();if(e.h.streaming.vodDynamicPlaybackRate&&!n){var r=e.h.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.ag();u<=e.h.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.sd(r):u==1&&t!==e.H.Xb()&&e.Wc()}if(n&&(u=e.Ib(),Number.isFinite(u.end)&&!(e.g.currentTime<u.start))){if(e.h.streaming.liveSync)var c=e.h.streaming.liveSyncMaxLatency,f=e.h.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.maxLatency||e.h.streaming.liveSyncMaxLatency,f=e.i.serviceDescription.maxPlaybackRate||e.h.streaming.liveSyncPlaybackRate);if(e.h.streaming.liveSync)var h=e.h.streaming.liveSyncMinLatency,E=e.h.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(h=e.i.serviceDescription.minLatency||e.h.streaming.liveSyncMinLatency,E=e.i.serviceDescription.minPlaybackRate||e.h.streaming.liveSyncMinPlaybackRate);if(n=u.end-e.g.currentTime,r=0,e.l==ga){var S=e.g.buffered;0<S.length&&(r=S.end(S.length-1),r=Math.max(f,r-u.end))}u=e.h.streaming.liveSyncPanicMode,S=1e3*e.h.streaming.liveSyncPanicThreshold;var k=Date.now()-e.L.h;u&&!E&&(E=e.h.streaming.liveSyncMinPlaybackRate),u&&E&&k<=S?t!=E&&e.sd(E):c&&f&&n-r>c?t!=f&&e.sd(f):h&&E&&n-r<h?t!=E&&e.sd(E):t!==e.H.Xb()&&e.Wc()}}function av(e){if(e.g){var t=!1,n=e.g.currentTime/e.g.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var r;e.N==0?r=Jr("started"):e.N==25?r=Jr("firstquartile"):e.N==50?r=Jr("midpoint"):e.N==75?r=Jr("thirdquartile"):e.N==100&&(r=Jr("complete")),r&&e.dispatchEvent(r)}}}function cd(e){try{se(e.Pd,e.i)}catch(n){return dd(e,n),!1}var t=Bf(e.i.variants);return t=e.sa.create(t),e.o.setVariants(Array.from(t.values())),!0}function rx(e,t){return t=t===void 0?!1:t,cd(e)?e.o.chooseVariant(t):null}function W8(e){function t(f){var h="";return f.video&&(h+="video:"+f.video.id),f.audio&&(h=h+(h?"&":"")+("audio:"+f.audio.id)),h}for(var n=Date.now()/1e3,r=!1,u=m(e.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=n&&(c.disabledUntilTime=0,r=!0,""+t(c),void 0);e.i.variants.every(function(f){return f.disabledUntilTime===0})&&e.Td.stop(),r&&fd(e,!0,void 0,!1,!1)}function fd(e,t,n,r,u){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,u=u===void 0?!0:u;var c=rx(e);c&&sv(e,c,u,t,n,r)}function sv(e,t,n,r,u,c){c=c===void 0?!1:c;var f=e.j.j;if(t==f)r&&_R(e.j,t,r,u,!0);else{var h=e.s.h;h.h!=t&&(h.h=t,h.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),_R(e.j,t,r,u,c,n),r=null,f&&(r=xl(f)),t=xl(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&Bs(e.K,t,e.Ue()),n=Jr("adaptation",n),hd(e,n)):ox(e,r,t)}}function ix(e,t){var n=Array.from(e.g.audioTracks).find(function(r){return r.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Ml(n),t=Ml(t),ox(e,n,t)}function $8(e,t,n){if(e.h.autoShowText==0)return!1;if(e.h.autoShowText==1)return!0;var r=Cr(e.h.preferredTextLanguage);return n=Cr(n.language),e.h.autoShowText==2?ju(n,r):e.h.autoShowText==3?(e=Cr(t.language),ju(n,r)&&!ju(e,n)):(Ke("Invalid autoShowText setting!"),!1)}function ts(e){var t=Jr("trackschanged");hd(e,t)}function ox(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&Bs(e.K,n,e.Ue()),n=Jr("variantchanged",t),hd(e,n)}function uv(e){var t=Jr("textchanged");hd(e,t)}function ax(e){var t=Jr("texttrackvisibility");hd(e,t)}function sx(e){e.h.abr.enabled||y_(e);var t=new Map().set("newStatus",e.h.abr.enabled);hd(e,Jr("abrstatuschanged",t))}function y_(e,t){if(t=t===void 0?!0:t,e.l==Oo){e.Td.stop();for(var n=m(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&cd(e)}}g.Jd=function(e,t){if(!this.h.abr.enabled||this.l===Hs||!navigator.onLine)return!1;if(this.i.variants.some(function(c){return(c=c[e.type])&&c.id!==e.id?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=m(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var u=r[e.type];u&&u.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.Td.$a(1),t=this.ob().video.reduce(function(c,f){return c+f.end-f.start},0),fd(this,!0,t,!0,!1),!0}return!1};function dd(e,t){var n,r,u;return Me(function(c){switch(c.g){case 1:if(e.l==Hs)return c.return();if(n=!0,!(e.Ia&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){c.u(2);break}return fe(c,3),x(c,a8(e.j),5);case 5:r=c.h,n=!r,ge(c,2);break;case 3:Re(c),n=!0;case 2:if(!n)return c.return();t.severity===2&&y_(e,!1),u=Jr("error",new Map().set("detail",t)),e.dispatchEvent(u),u.defaultPrevented&&(t.handled=!0),X(c)}})}function hp(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(Jr(t,e))}function E_(e){if(!e.g.error)return null;var t=e.g.error.code;if(t==1)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new gt(2,3,3016,t,n,e.g.error.message)}function __(e,t,n){0<t&&(e.R()||e.Gg(t)),t=e.getDuration(),n<t&&(e.R()||e.Za(n))}function hd(e,t){Me(function(n){if(n.g==1)return x(n,Promise.resolve(),2);e.l!=Hs&&e.dispatchEvent(t),X(n)})}function ux(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Cr(n.language)):t.add("und");return t}function lx(e){var t=new Map,n=new Map;e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u="und",c=[];r.language&&(u=Cr(r.language)),r.type=="variant"?c=r.audioRoles:c=r.roles,c&&c.length||(c=[""]),t.has(u)||t.set(u,new Set),c=m(c);for(var f=c.next();!f.done;f=c.next())f=f.value,t.get(u).add(f),r.label&&(n.has(u)||n.set(u,new Map),n.get(u).set(f,r.label))}var h=[];return t.forEach(function(E,S){E=m(E);for(var k=E.next();!k.done;k=E.next()){k=k.value;var G=null;n.has(S)&&n.get(S).has(k)&&(G=n.get(S).get(k)),h.push({language:S,role:k,label:G})}}),h}re("shaka.Player",dn),dn.prototype.setVideoContainer=dn.prototype.Hg,dn.prototype.getManifestParserFactory=dn.prototype.rh,dn.prototype.getManifest=dn.prototype.Te,dn.prototype.retryStreaming=dn.prototype.vf,dn.prototype.setMaxHardwareResolution=dn.prototype.xi,dn.prototype.addChaptersTrack=dn.prototype.Qg,dn.prototype.addThumbnailsTrack=dn.prototype.Sg,dn.prototype.addTextTrackAsync=dn.prototype.Rg,dn.prototype.getStats=dn.prototype.getStats,dn.prototype.getBufferedInfo=dn.prototype.ob,dn.prototype.getSegmentAvailabilityDuration=dn.prototype.Nd,dn.prototype.getPresentationStartTimeAsDate=dn.prototype.eg,dn.prototype.getPlayheadTimeAsDate=dn.prototype.vh,dn.prototype.setTextTrackVisibility=dn.prototype.Dg,dn.prototype.getChapters=dn.prototype.jh,dn.prototype.getChaptersTracks=dn.prototype.bg,dn.prototype.isTextTrackVisible=dn.prototype.Ze,dn.prototype.selectVariantsByLabel=dn.prototype.si,dn.prototype.selectTextLanguage=dn.prototype.yf,dn.prototype.selectAudioLanguage=dn.prototype.wg,dn.prototype.getTextLanguages=dn.prototype.zh,dn.prototype.getAudioLanguages=dn.prototype.hh,dn.prototype.getTextLanguagesAndRoles=dn.prototype.Ah,dn.prototype.getAudioLanguagesAndRoles=dn.prototype.ih,dn.prototype.selectVariantTrack=dn.prototype.zf,dn.prototype.selectTextTrack=dn.prototype.xg,dn.prototype.getThumbnails=dn.prototype.fg,dn.prototype.getAllThumbnails=dn.prototype.gh,dn.prototype.getImageTracks=dn.prototype.oh,dn.prototype.getTextTracks=dn.prototype.wc,dn.prototype.getVariantTracks=dn.prototype.Hb,dn.prototype.cancelTrickPlay=dn.prototype.Wc,dn.prototype.trickPlay=dn.prototype.sd,dn.prototype.getPlaybackRate=dn.prototype.eb,dn.prototype.isBuffering=dn.prototype.Xe,dn.prototype.getKeyStatuses=dn.prototype.Kd,dn.prototype.getActiveSessionsMetadata=dn.prototype.Se,dn.prototype.getExpiration=dn.prototype.cd,dn.prototype.drmInfo=dn.prototype.drmInfo,dn.prototype.keySystem=dn.prototype.keySystem,dn.prototype.goToLive=dn.prototype.Hh,dn.prototype.seekRange=dn.prototype.Ib,dn.prototype.isAudioOnly=dn.prototype.Kh,dn.prototype.isInProgress=dn.prototype.dc,dn.prototype.isLive=dn.prototype.R,dn.prototype.getAdManager=dn.prototype.$f,dn.prototype.getAssetUri=dn.prototype.ad,dn.prototype.getNetworkingEngine=dn.prototype.Zb,dn.prototype.getMediaElement=dn.prototype.th,dn.prototype.getManifestType=dn.prototype.Ue,dn.prototype.getLoadMode=dn.prototype.qh,dn.prototype.resetConfiguration=dn.prototype.li,dn.prototype.getBufferFullness=dn.prototype.ag,dn.prototype.getConfiguration=dn.prototype.getConfiguration,dn.prototype.configure=dn.prototype.configure,dn.prototype.releaseAllMutexes=dn.prototype.hi,dn.prototype.preload=dn.prototype.preload,dn.prototype.unloadAndSavePreload=dn.prototype.Ai,dn.prototype.load=dn.prototype.load,dn.prototype.updateStartTime=dn.prototype.Ei,dn.prototype.unload=dn.prototype.lc,dn.prototype.detach=dn.prototype.detach,dn.prototype.attachCanvas=dn.prototype.Wg,dn.prototype.attach=dn.prototype.Vc,dn.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,u,c,f;return Me(function(h){if(h.g==1)return t={},e?x(h,ee(),3):h.u(2);h.g!=2&&(t=h.h);var E={};if(Io())for(var S in Fe)E[S]=!0;S=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=S.next();!k.done;k=S.next())k=k.value,E[k]=Io()?!!Fe[k]:lu(k);for(n=E,S='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(T(hu)),E={},S=m(S),k=S.next();!k.done;k=S.next()){k=k.value,E[k]=Io()?bl(k)?!0:Ot(k)||!!ro(k):lu(k);var G=k.split(";")[0];E[G]=E[G]||E[k]}r=E,u={manifest:n,media:r,drm:t},c=S_;for(f in c)u[f]=c[f]();return h.return(u)})},dn.isBrowserSupported=function(){if(p.Promise||Ke("A Promise implementation or polyfill is required"),!(p.Promise&&p.Uint8Array&&Array.prototype.forEach)||Yr("Trident/"))return!1;var e=ys();return e&&9>e||!(p.MediaKeys&&p.navigator&&p.navigator.requestMediaKeySystemAccess&&p.MediaKeySystemAccess&&p.MediaKeySystemAccess.prototype.getConfiguration)?!1:Io()?!0:lu("application/x-mpegurl")},dn.setAdManagerFactory=function(e){lv=e},dn.registerSupportPlugin=function(e,t){S_[e]=t},dn.prototype.destroy=dn.prototype.destroy;var Hs=0,T_=1,Oo=2,ga=3;dn.LoadMode={DESTROYED:Hs,NOT_LOADED:T_,MEDIA_SOURCE:Oo,SRC_EQUALS:ga},dn.version="v4.8.2";var cx=["4","8"];Lr=new function(e){this.g=e,this.i=ei,this.h=Ji}(new Or(Number(cx[0]),Number(cx[1])));var S_={},lv=null;function fx(){this.h=[],this.j=this.i=this.g=0}function lr(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Tt,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}g=lr.prototype,g.getDuration=function(){return this.g.getDuration()},g.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},g.getRemainingTime=function(){return this.h.getRemainingTime()},g.isPaused=function(){return this.i},g.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.h.getAdSkippableState()},g.skip=function(){return this.h.skip()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.resume()},g.getVolume=function(){return this.h.getVolume()},g.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},g.isMuted=function(){return this.h.getVolume()==0},g.isLinear=function(){return this.g.isLinear()},g.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},g.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return this.g.getMediaUrl()},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.g=null},re("shaka.ads.ClientSideAd",lr),lr.prototype.release=lr.prototype.release,lr.prototype.getPodIndex=lr.prototype.getPodIndex,lr.prototype.getTimeOffset=lr.prototype.getTimeOffset,lr.prototype.getMediaUrl=lr.prototype.getMediaUrl,lr.prototype.getAdvertiserName=lr.prototype.getAdvertiserName,lr.prototype.getCreativeAdId=lr.prototype.getCreativeAdId,lr.prototype.getAdId=lr.prototype.getAdId,lr.prototype.getVastMediaWidth=lr.prototype.getVastMediaWidth,lr.prototype.getVastMediaHeight=lr.prototype.getVastMediaHeight,lr.prototype.getVastMediaBitrate=lr.prototype.getVastMediaBitrate,lr.prototype.getDescription=lr.prototype.getDescription,lr.prototype.getTitle=lr.prototype.getTitle,lr.prototype.getPositionInSequence=lr.prototype.getPositionInSequence,lr.prototype.getSequenceLength=lr.prototype.getSequenceLength,lr.prototype.setMuted=lr.prototype.setMuted,lr.prototype.resize=lr.prototype.resize,lr.prototype.isLinear=lr.prototype.isLinear,lr.prototype.isMuted=lr.prototype.isMuted,lr.prototype.setVolume=lr.prototype.setVolume,lr.prototype.getVolume=lr.prototype.getVolume,lr.prototype.play=lr.prototype.play,lr.prototype.pause=lr.prototype.pause,lr.prototype.skip=lr.prototype.skip,lr.prototype.canSkipNow=lr.prototype.canSkipNow,lr.prototype.getTimeUntilSkippable=lr.prototype.getTimeUntilSkippable,lr.prototype.isSkippable=lr.prototype.isSkippable,lr.prototype.isPaused=lr.prototype.isPaused,lr.prototype.getRemainingTime=lr.prototype.getRemainingTime,lr.prototype.getMinSuggestedDuration=lr.prototype.getMinSuggestedDuration,lr.prototype.getDuration=lr.prototype.getDuration;function cv(e,t,n,r,u){var c=this;this.o=e,this.i=t,this.C=!1,this.A=this.s=null,this.F=NaN,this.m=u,this.j=null,this.h=new Tt,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.o,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.8.2"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){X8(c,f)}),this.h.D(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){dx(c,f)}),this.h.D(this.i,"ended",function(){c.l.contentComplete()}),this.h.na(this.i,"play",function(){c.C=!0})}cv.prototype.configure=function(e){this.s=e},cv.prototype.stop=function(){this.g&&this.g.stop(),this.o&&fp(this.o)},cv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function dx(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new Wn("ad-error",t)),dv(e,null),e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function X8(e,t){if(e.m(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),e.s.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.m(new Wn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=m(r);for(var u=r.next();!u.done;u=r.next())t.push({start:u.value,end:null});e.m(new Wn("ad-cue-points-changed",new Map().set("cuepoints",t)))}Q8(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,fv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,fv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in p?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,fv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,fv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.C||e.s.skipPlayDetection?e.g.start():e.h.na(e.i,"play",function(){e.C=!0,e.g.start()})}catch(c){dv(e,null)}}function fv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function Q8(e){function t(n,r){n=new Map().set("originalEvent",n),e.m(new Wn(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){dx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){hx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){hx(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){dv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){dv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function hx(e,t){var n=t.getAd();n?(e.j=new lr(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new Wn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ke("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function dv(e,t){e.m(new Wn("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function or(e,t,n,r,u){this.h=e,this.g=u,this.i=t,this.j=n,this.l=r}g=or.prototype,g.getDuration=function(){return this.h.durationInSeconds},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},g.isPaused=function(){return this.g.paused},g.isSkippable=function(){return!!this.h.skipOffset},g.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.g.currentTime+=this.getRemainingTime()},g.pause=function(){return this.g.pause()},g.play=function(){return this.g.play()},g.getVolume=function(){return this.g.volume},g.setVolume=function(e){this.g.volume=e},g.isMuted=function(){return this.g.muted},g.isLinear=function(){return this.l},g.resize=function(){},g.setMuted=function(e){this.g.muted=e},g.getSequenceLength=function(){return this.j?this.j:1},g.getPositionInSequence=function(){return this.i?this.i:1},g.getTitle=function(){return this.h.adTitle},g.getDescription=function(){return""},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return 0},g.getVastMediaWidth=function(){return 0},g.getAdId=function(){return this.h.adId},g.getCreativeAdId=function(){return this.h.creativeId},g.getAdvertiserName=function(){return""},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){return 0},g.getPodIndex=function(){return 0},g.release=function(){this.j=this.i=this.g=this.h=null},re("shaka.ads.MediaTailorAd",or),or.prototype.release=or.prototype.release,or.prototype.getPodIndex=or.prototype.getPodIndex,or.prototype.getTimeOffset=or.prototype.getTimeOffset,or.prototype.getMediaUrl=or.prototype.getMediaUrl,or.prototype.getAdvertiserName=or.prototype.getAdvertiserName,or.prototype.getCreativeAdId=or.prototype.getCreativeAdId,or.prototype.getAdId=or.prototype.getAdId,or.prototype.getVastMediaWidth=or.prototype.getVastMediaWidth,or.prototype.getVastMediaHeight=or.prototype.getVastMediaHeight,or.prototype.getVastMediaBitrate=or.prototype.getVastMediaBitrate,or.prototype.getDescription=or.prototype.getDescription,or.prototype.getTitle=or.prototype.getTitle,or.prototype.getPositionInSequence=or.prototype.getPositionInSequence,or.prototype.getSequenceLength=or.prototype.getSequenceLength,or.prototype.setMuted=or.prototype.setMuted,or.prototype.resize=or.prototype.resize,or.prototype.isLinear=or.prototype.isLinear,or.prototype.isMuted=or.prototype.isMuted,or.prototype.setVolume=or.prototype.setVolume,or.prototype.getVolume=or.prototype.getVolume,or.prototype.play=or.prototype.play,or.prototype.pause=or.prototype.pause,or.prototype.skip=or.prototype.skip,or.prototype.canSkipNow=or.prototype.canSkipNow,or.prototype.getTimeUntilSkippable=or.prototype.getTimeUntilSkippable,or.prototype.isSkippable=or.prototype.isSkippable,or.prototype.isPaused=or.prototype.isPaused,or.prototype.getRemainingTime=or.prototype.getRemainingTime,or.prototype.getMinSuggestedDuration=or.prototype.getMinSuggestedDuration,or.prototype.getDuration=or.prototype.getDuration;function pp(e,t,n,r){this.B=e,this.K=t,this.g=n,this.l=null,this.Y=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.h=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.o=new Tt}pp.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Kb(t.target,t.type,t.listener);pd(this),this.m=[],this.s=[],this.G="",this.T=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},pp.prototype.release=function(){this.stop(),this.o&&this.o.release()},pp.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(e6(this,this.G,this.T),this.T=!1)},pp.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function J8(e,t,n){var r,u,c,f,h,E,S,k,G,te,z;Me(function(ve){if(ve.g==1)return r=Oi([t],ua()),r.method="POST",n&&(u=JSON.stringify(n),r.body=Va(u)),c=e.K.request(7,r),fe(ve,2),x(ve,c.promise,4);if(ve.g!=2){if(f=ve.h,h=Vr(f.data),E=JSON.parse(h),E.manifestUrl&&E.trackingUrl)S=new si(t),k=new si(E.trackingUrl),e.G=S.resolve(k).toString(),G=Date.now()/1e3,te=G-e.Y,e.i(new Wn("ads-loaded",new Map().set("loadTime",te))),z=new si(E.manifestUrl),e.l.resolve(S.resolve(z).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return ge(ve,0)}if(Re(ve),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,ve.return();e.l.resolve(e.H),e.l=null,X(ve)})}function e6(e,t,n){var r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe;Me(function(Te){if(Te.g==1)return r=Oi([t],ua()),u=e.K.request(7,r),fe(Te,2),x(Te,u.promise,4);if(Te.g!=2){if(c=Te.h,f=[],h=Vr(c.data),E=JSON.parse(h),0<E.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(E.avails)){for(e.j=E.avails,S=m(e.j),k=S.next();!k.done;k=S.next())for(G=k.value,te=m(G.nonLinearAdsList),z=te.next();!z.done;z=te.next())for(ve=z.value,Le=m(ve.nonLinearAdList),De=Le.next();!De.done;De=Le.next())qe=De.value,t6(e,qe);f=e.getCuePoints(),e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",f)))}}else e.j.length&&e.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",f))),pd(e),e.j=[];return n&&(e.I||0<f.length)&&n6(e),ge(Te,0)}Re(Te),X(Te)})}function t6(e,t){var n,r,u,c,f,h,E;Me(function(S){if(S.g==1)return!t.staticResource||(n=px(t),e.F.get(n))?S.return():(r=Oi([t.staticResource],ua()),u=e.K.request(7,r),fe(S,2),e.F.set(n,[]),x(S,u.promise,4));if(S.g!=2)return c=S.h,f=Vr(c.data),h=JSON.parse(f),E=h.apps,e.F.set(n,E),ge(S,0);Re(S),e.F.delete(n),X(S)})}function px(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function n6(e){mx(e),e.I||(gx(e),e.o.D(e.g,"seeked",function(){gx(e)}),e.o.D(e.g,"ended",function(){pd(e)})),e.o.D(e.g,"timeupdate",function(){mx(e)})}function gx(e){var t=e.g.currentTime;if(t!=0&&e.A==null){for(var n,r,u=m(e.j),c=u.next();!c.done;c=u.next()){c=c.value;for(var f=m(c.ads),h=f.next();!h.done;h=f.next())if(h=h.value,!r)h.startTimeInSeconds<t&&(r=h,n=c);else if(h.startTimeInSeconds<t&&h.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=h,n=c;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.g.currentTime=n.startTimeInSeconds)}}function mx(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var r=e.C,u=r.startTimeInSeconds+.5*r.durationInSeconds,c=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),ma(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),ma(e,"midpoint")):t>=c&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),ma(e,"thirdQuartile")),r=e.h.getRemainingTime(),u=e.h.getDuration(),0<u&&(0>=r||r>u)&&pd(e)}if(!e.h||!e.h.isLinear()){e:for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!(e.h&&e.h.isLinear()));u=r.next())for(c=0;c<u.ads.length;c++){var f=u.ads[c],h=f.startTimeInSeconds+f.durationInSeconds;if(f.startTimeInSeconds<=t&&h>t){if(e.N.includes(f.adId)){if(e.g.ended)continue;e.g.currentTime=h;break e}pd(e),e.L=u,e.h=new or(f,c+1,u.ads.length,!0,e.g),e.C=f,c===0&&ma(e,"breakStart"),vx(e);break}}if(!e.h){for(r=m(e.j),u=r.next();!u.done&&(u=u.value,!e.h);u=r.next())for(c=0;c<u.nonLinearAdsList.length;c++)if(f=u.nonLinearAdsList[c],f.nonLinearAdList.length){h=u.startTimeInSeconds;var E=e.F.get(px(f.nonLinearAdList[0]));if(h<=t&&E&&E.length){pd(e),h=e,E=m(E);for(var S=E.next();!S.done;S=E.next())if(S=S.value,S.data.source.length){var k=document.createElement("img");k.src=S.data.source[0].url,k.style.top=(S.placeholder.top||0)+"%",k.style.height=100-(S.placeholder.top||0)+"%",k.style.left=(S.placeholder.left||0)+"%",k.style.maxWidth=100-(S.placeholder.left||0)+"%",k.style.objectFit="contain",k.style.position="absolute",h.B.appendChild(k)}e.L=u,e.h=new or(f,c+1,u.ads.length,!1,e.g),e.C=f,c===0&&ma(e,"breakStart"),vx(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.A&&e.A>t&&(e.g.currentTime=e.A),e.A=null)}}}function pd(e){if(e.h){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId),ma(e,"complete");for(var t=m(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.o.Kb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&ma(e,"breakEnd"),e.h=null,e.C=null,e.L=null}}function vx(e){var t=!1;e.g.paused?t=!0:(ma(e,"impression"),ma(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&ma(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||ma(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(ma(e,"impression"),ma(e,"start"),t=!1):ma(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){ma(e,"pause")}});for(var n=m(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function ma(e,t){var n=e.C.trackingEvents.find(function(u){return u.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(u){return u.eventType==t})),n){n=m(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Oi([r],ua()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new Wn("ad-impression"));break;case"start":e.i(new Wn("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new Wn("ad-muted"));break;case"unmute":e.i(new Wn("ad-volume-changed"));break;case"resume":e.i(new Wn("ad-resumed"));break;case"pause":e.i(new Wn("ad-paused"));break;case"firstQuartile":e.i(new Wn("ad-first-quartile"));break;case"midpoint":e.i(new Wn("ad-midpoint"));break;case"thirdQuartile":e.i(new Wn("ad-third-quartile"));break;case"complete":e.i(new Wn("ad-complete")),e.i(new Wn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active")}}function cr(e,t){this.g=e,this.i=null,this.h=t}g=cr.prototype,g.getDuration=function(){return this.i?this.i.duration:-1},g.getMinSuggestedDuration=function(){return this.getDuration()},g.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},g.isPaused=function(){return this.h.paused},g.isSkippable=function(){return this.g.isSkippable()},g.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},g.canSkipNow=function(){return this.getTimeUntilSkippable()==0},g.skip=function(){this.h.currentTime+=this.getRemainingTime()},g.pause=function(){return this.h.pause()},g.play=function(){return this.h.play()},g.getVolume=function(){return this.h.volume},g.setVolume=function(e){this.h.volume=e},g.isMuted=function(){return this.h.muted},g.isLinear=function(){return!0},g.resize=function(){},g.setMuted=function(e){this.h.muted=e},g.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},g.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},g.getTitle=function(){return this.g.getTitle()},g.getDescription=function(){return this.g.getDescription()},g.getVastMediaBitrate=function(){return 0},g.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},g.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},g.getAdId=function(){return this.g.getAdId()},g.getCreativeAdId=function(){return this.g.getCreativeAdId()},g.getAdvertiserName=function(){return this.g.getAdvertiserName()},g.getMediaUrl=function(){return null},g.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},g.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},g.release=function(){this.h=this.i=this.g=null},re("shaka.ads.ServerSideAd",cr),cr.prototype.release=cr.prototype.release,cr.prototype.getPodIndex=cr.prototype.getPodIndex,cr.prototype.getTimeOffset=cr.prototype.getTimeOffset,cr.prototype.getMediaUrl=cr.prototype.getMediaUrl,cr.prototype.getAdvertiserName=cr.prototype.getAdvertiserName,cr.prototype.getCreativeAdId=cr.prototype.getCreativeAdId,cr.prototype.getAdId=cr.prototype.getAdId,cr.prototype.getVastMediaWidth=cr.prototype.getVastMediaWidth,cr.prototype.getVastMediaHeight=cr.prototype.getVastMediaHeight,cr.prototype.getVastMediaBitrate=cr.prototype.getVastMediaBitrate,cr.prototype.getDescription=cr.prototype.getDescription,cr.prototype.getTitle=cr.prototype.getTitle,cr.prototype.getPositionInSequence=cr.prototype.getPositionInSequence,cr.prototype.getSequenceLength=cr.prototype.getSequenceLength,cr.prototype.setMuted=cr.prototype.setMuted,cr.prototype.resize=cr.prototype.resize,cr.prototype.isLinear=cr.prototype.isLinear,cr.prototype.isMuted=cr.prototype.isMuted,cr.prototype.setVolume=cr.prototype.setVolume,cr.prototype.getVolume=cr.prototype.getVolume,cr.prototype.play=cr.prototype.play,cr.prototype.pause=cr.prototype.pause,cr.prototype.skip=cr.prototype.skip,cr.prototype.canSkipNow=cr.prototype.canSkipNow,cr.prototype.getTimeUntilSkippable=cr.prototype.getTimeUntilSkippable,cr.prototype.isSkippable=cr.prototype.isSkippable,cr.prototype.isPaused=cr.prototype.isPaused,cr.prototype.getRemainingTime=cr.prototype.getRemainingTime,cr.prototype.getMinSuggestedDuration=cr.prototype.getMinSuggestedDuration,cr.prototype.getDuration=cr.prototype.getDuration;function yx(e,t,n,r){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Tt,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Wn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(c){r6(u,c)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(c){c=c.getAd(),u.m=new cr(c,u.l),u.A&&(u.m.i=u.A),u.i(new Wn("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var c=u.l.currentTime;u.o&&u.o>c&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(c){u.A=c.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Wn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Wn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Wn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Wn("ad-complete")),u.i(new Wn("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Wn("ad-skipped")),u.i(new Wn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(c){var f=c.getStreamData();c=[],f=m(f.cuepoints);for(var h=f.next();!h.done;h=f.next())h=h.value,c.push({start:h.start,end:h.end});u.C=c,u.i(new Wn("ad-cue-points-changed",new Map().set("cuepoints",c)))})}g=yx.prototype,g.configure=function(){},g.stop=function(){this.B="",this.o=null,this.C=[]},g.release=function(){this.stop(),this.h&&this.h.release()},g.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g.getCuePoints=function(){return this.C};function r6(e,t){e.i(new Wn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function $n(){Sr.call(this),this.g=this.h=this.i=null,this.j=new fx,this.m=navigator.language,this.l=null}Y($n,Sr),g=$n.prototype,g.setLocale=function(e){this.m=e},g.configure=function(e){this.l=e,this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},g.initClientSide=function(e,t,n){var r=this;if(!p.google||!google.ima||!google.ima.AdsLoader)throw new gt(2,10,1e4);this.i&&this.i.release(),this.i=new cv(e,t,this.m,n,function(u){return w_(r,u)}),this.i.configure(this.l)},g.release=function(){this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Sr.prototype.release.call(this)},g.onAssetUnload=function(){this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Wn("ad-stopped")),this.j=new fx},g.requestClientSideAds=function(e){if(!this.i)throw new gt(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.F=Date.now()/1e3,t.l.requestAds(e)},g.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new gt(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},g.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new pp(e,t,n,function(u){return w_(r,u)})},g.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new gt(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new gt(1,10,10004)):(r.l=new Rr,J8(r,e,t),r.H=n||"",r.Y=Date.now()/1e3,e=r.l),e},g.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new gt(1,10,10005);var t=this.h;t.G=e,t.i(new Wn("ads-loaded",new Map().set("loadTime",0)))},g.initServerSide=function(e,t){var n=this;if(!p.google||!google.ima||!google.ima.dai)throw new gt(2,10,10002);this.g&&this.g.release(),this.g=new yx(e,t,this.m,function(r){return w_(n,r)}),this.g.configure(this.l)},g.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new gt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.8.2",n=this.g,n.j?e=Promise.reject(new gt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Rr,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},g.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new gt(1,10,10003);(e.mpt||e.mpv)&&Ke('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.8.2",this.g.g.replaceAdTagParameters(e)},g.getServerSideCuePoints=function(){return dr("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},g.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},g.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},g.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},g.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},g.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},g.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function w_(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}re("shaka.ads.AdManager",$n),$n.prototype.onCueMetadataChange=$n.prototype.onCueMetadataChange,$n.prototype.onHlsTimedMetadata=$n.prototype.onHlsTimedMetadata,$n.prototype.onDashTimedMetadata=$n.prototype.onDashTimedMetadata,$n.prototype.onManifestUpdated=$n.prototype.onManifestUpdated,$n.prototype.getStats=$n.prototype.getStats,$n.prototype.getCuePoints=$n.prototype.getCuePoints,$n.prototype.getServerSideCuePoints=$n.prototype.getServerSideCuePoints,$n.prototype.replaceServerSideAdTagParameters=$n.prototype.replaceServerSideAdTagParameters,$n.prototype.requestServerSideStream=$n.prototype.requestServerSideStream,$n.prototype.initServerSide=$n.prototype.initServerSide,$n.prototype.addMediaTailorTrackingUrl=$n.prototype.addMediaTailorTrackingUrl,$n.prototype.requestMediaTailorStream=$n.prototype.requestMediaTailorStream,$n.prototype.initMediaTailor=$n.prototype.initMediaTailor,$n.prototype.updateClientSideAdsRenderingSettings=$n.prototype.updateClientSideAdsRenderingSettings,$n.prototype.requestClientSideAds=$n.prototype.requestClientSideAds,$n.prototype.onAssetUnload=$n.prototype.onAssetUnload,$n.prototype.release=$n.prototype.release,$n.prototype.initClientSide=$n.prototype.initClientSide,$n.prototype.configure=$n.prototype.configure,$n.prototype.setLocale=$n.prototype.setLocale,$n.ADS_LOADED="ads-loaded",$n.AD_STARTED="ad-started",$n.AD_FIRST_QUARTILE="ad-first-quartile",$n.AD_MIDPOINT="ad-midpoint",$n.AD_THIRD_QUARTILE="ad-third-quartile",$n.AD_COMPLETE="ad-complete",$n.AD_STOPPED="ad-stopped",$n.AD_SKIPPED="ad-skipped",$n.AD_VOLUME_CHANGED="ad-volume-changed",$n.AD_MUTED="ad-muted",$n.AD_PAUSED="ad-paused",$n.AD_RESUMED="ad-resumed",$n.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$n.CUEPOINTS_CHANGED="ad-cue-points-changed",$n.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$n.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$n.AD_CLICKED="ad-clicked",$n.AD_PROGRESS="ad-progress",$n.AD_BUFFERING="ad-buffering",$n.AD_IMPRESSION="ad-impression",$n.AD_DURATION_CHANGED="ad-duration-changed",$n.AD_CLOSED="ad-closed",$n.AD_LOADED="ad-loaded",$n.ALL_ADS_COMPLETED="all-ads-completed",$n.AD_LINEAR_CHANGED="ad-linear-changed",$n.AD_METADATA="ad-metadata",$n.AD_RECOVERABLE_ERROR="ad-recoverable-error",$n.AD_ERROR="ad-error",$n.AD_BREAK_READY="ad-break-ready",$n.AD_INTERACTION="ad-interaction",lv=function(){return new $n};function Ex(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Wn){var r={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(r[u]=t):u in Event||(r[u]=t);return r}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(r in n)u.add(r);for(t=m(Object.getOwnPropertyNames(n)),r=t.next();!r.done;r=t.next())u.add(r.value);for(t={},u=m(u),r=u.next();!r.done;r=u.next())r=r.value,t[r]=n[r];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(yt(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,u.start.push(r.start),u.end.push(t);n=u}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function A_(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=i6(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function i6(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var _x="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),o6="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),I_=["loop","playbackRate"],a6=["pause","play"],hv={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},pv={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},b_={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},Tx=[["getConfiguration","configure"]],Sx=[["isTextTrackVisible","setTextTrackVisibility"]],s6="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),u6=["attach","attachCanvas","detach","load","unload"];function C_(e,t,n,r,u,c,f){var h=this;this.G=e,this.K=f,this.l=new pr(t),this.L=n,this.s=!1,this.A=r,this.F=u,this.N=c,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return R_(h)},this.C=function(E,S){switch(E=A_(S),E.type){case"event":var k=E.targetName,G=bm(E.event);h.A(k,G);break;case"update":k=E.update;for(G in k){E=h.g[G]||{};for(var te in k[G])E[te]=k[G][te]}h.s&&(h.L(),h.s=!1);break;case"asyncComplete":if(G=E.id,te=E.error,E=h.i[G],delete h.i[G],E)if(te){G=new gt(te.severity,te.category,te.code);for(k in te)G[k]=te[k];E.reject(G)}else E.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,mp.add(this)}g=C_.prototype,g.destroy=function(){return mp.delete(this),x_(this),Ts&&Ax(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},g.Ua=function(){return this.h},g.tf=function(){return this.I},g.init=function(){if(this.G.length)if(p.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.kc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(mp),r=n.next();!r.done;r=n.next()){r=r.value;var u=t;r.j=new Rr,r.s=!0,gv(r,u)}},function(t){for(var n=m(mp),r=n.next();!r.done;r=n.next())r=r.value,mv=t=="available",r.l.kc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),mv&&this.l.X(c6),(e=Ts)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Rr,this.s=!0,gv(this,e)):Ts=null}else p.__onGCastApiAvailable!==Ix&&(vv=p.__onGCastApiAvailable||null,p.__onGCastApiAvailable=Ix)},g.Af=function(e){this.o=e,this.h&&gp(this,{type:"appData",appData:this.o})},g.cast=function(){var e=this;return Me(function(t){if(!e.m)throw new gt(1,8,8e3);if(!mv)throw new gt(1,8,8001);if(e.h)throw new gt(1,8,8002);return e.j=new Rr,chrome.cast.requestSession(function(n){return gv(e,n)},function(n){return wx(e,n)}),x(t,e.j,0)})};function l6(e){e.h&&chrome.cast.requestSession(function(t){return gv(e,t)},function(t){return wx(e,t)})}g.uc=function(){if(this.h){if(x_(this),Ts){Ax(this);try{Ts.stop(function(){},function(){})}catch(e){}Ts=null}R_(this)}},g.get=function(e,t){var n=this;if(e=="video"){if(a6.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(We.apply(0,arguments))))}}else if(e=="player"){if(b_[t]&&!this.get("player","isLive")())return function(){};if(s6.includes(t))return function(){return n.ug.apply(n,[e,t].concat(T(We.apply(0,arguments))))};if(u6.includes(t))return function(){return n.ii.apply(n,[e,t].concat(T(We.apply(0,arguments))))};if(hv[t]||pv[t])return function(){return n.g[e][t]}}return this.g[e][t]},g.set=function(e,t,n){this.g[e][t]=n,gp(this,{type:"set",targetName:e,property:t,value:n})};function gv(e,t){var n=e.N();Ts=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),R_(e),gp(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function wx(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new gt(2,8,n,t))}g.ug=function(e,t){gp(this,{type:"call",targetName:e,methodName:t,args:We.apply(2,arguments)})},g.ii=function(e,t){var n=We.apply(2,arguments),r=new Rr,u=this.H.toString();this.H++,this.i[u]=r;try{gp(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(c){r.reject(c)}return r};function Ax(e){var t=Ts;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function R_(e){var t=Ts?Ts.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};x_(e)}e.h=t,e.I=t?Ts.receiver.friendlyName:"",e.l.kc()}function x_(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new gt(1,7,7e3))}}function gp(e,t){t=Ex(t);var n=Ts;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},ut)}catch(r){throw t=new gt(2,8,8005,r),n=new Wn("error",new Map().set("detail",t)),e.A("player",n),e.uc(),t}}var c6=.02,mv=!1,Ts=null,vv=null,mp=new Set;function Ix(e){if(vv?p.__onGCastApiAvailable=vv:delete p.__onGCastApiAvailable,vv=null,e)for(var t=m(mp),n=t.next();!n.done;n=t.next())n.value.init();typeof p.__onGCastApiAvailable=="function"&&p.__onGCastApiAvailable(e)}function Ri(e,t,n,r){r=r===void 0?!1:r,Sr.call(this);var u=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new C_(n,function(){return Rx(u)},function(){return xx(u)},function(c,f){return Mx(u,c,f)},function(){return Nx(u)},function(){return Cx(u)},r),f6(this)}Y(Ri,Sr),g=Ri.prototype,g.destroy=function(e){return e&&this.g.uc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Sr.prototype.release.call(this),Promise.all(e)},g.Fh=function(){return this.l},g.uh=function(){return this.s},g.Xg=function(){return this.g.m&&mv},g.Ua=function(){return this.g.Ua()},g.tf=function(){return this.g.tf()},g.cast=function(){var e=this;return Me(function(t){return t.g==1?x(t,e.g.cast(),2):e.h?x(t,e.h.lc(),0):t.return()})},g.Af=function(e){this.g.Af(e)},g.zi=function(){l6(this.g)},g.uc=function(){this.g.uc()},g.Yg=function(e,t){t=t===void 0?!1:t;var n=this;return Me(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.uc(),x(r,n.g.destroy(),2));n.g=null,n.g=new C_(e,function(){return Rx(n)},function(){return xx(n)},function(u,c){return Mx(n,u,c)},function(){return Nx(n)},function(){return Cx(n)},t),n.g.init(),X(r)})};function f6(e){e.g.init(),e.m=new Tt;for(var t=m(_x),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(c){e.g.Ua()||(c=bm(c),e.j.dispatchEvent(c))});for(var r in Rc)e.m.D(e.h,Rc[r],function(c){e.g.Ua()||e.o.dispatchEvent(c)});e.l={},t={};for(var u in e.i)t.Kc=u,Object.defineProperty(e.l,t.Kc,{configurable:!1,enumerable:!0,get:function(c){return function(){return h6(e,c.Kc)}}(t),set:function(c){return function(f){var h=c.Kc;e.g.Ua()?e.g.set("video",h,f):e.i[h]=f}}(t)}),t={Kc:t.Kc};e.s={},bx(e,function(c){Object.defineProperty(e.s,c,{configurable:!1,enumerable:!0,get:function(){return p6(e,c)}})}),d6(e),e.j=new Sr,e.j.Ud=e.l,e.o=new Sr,e.o.Ud=e.s}function d6(e){var t=new Map;bx(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function bx(e,t){function n(E){return E=="constructor"||typeof r[E]!="function"?!1:!u.has(E)}var r=e.h,u=new Set,c;for(c in r)n(c)&&(u.add(c),t(c,r[c]));for(e=Object.getPrototypeOf(r),c=Object.getPrototypeOf({});e&&e!=c;){for(var f=m(Object.getOwnPropertyNames(e)),h=f.next();!h.done;h=f.next())h=h.value,n(h)&&(u.add(h),t(h,r[h]));e=Object.getPrototypeOf(e)}}function Cx(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.ad(),startTime:null};e.i.pause();for(var n=m(I_),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(Tx),r=n.next();!r.done;r=n.next()){var u=r.value;r=u[1],u=e.h[u[0]](),t.player[r]=u}for(n=m(Sx),r=n.next();!r.done;r=n.next())u=r.value,r=u[1],u=e.h[u[0]](),t.playerAfterLoad[r]=u;return t}function Rx(e){var t=new Wn("caststatuschanged");e.dispatchEvent(t)}function xx(e){var t=new Wn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Nx(e){for(var t=m(Tx),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var u=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var c=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var f;(r=e.g.get("player","getTextTracks")())&&r.length&&(f=r.find(function(S){return S.active}));var h=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var E={};for(n=m(I_),r=n.next();!r.done;r=n.next())r=r.value,E[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var S=m(I_),k=S.next();!k.done;k=S.next())k=k.value,e.i[k]=E[k];for(S=m(Sx),k=S.next();!k.done;k=S.next()){var G=k.value;k=G[1],G=e.g.get("player",G[0])(),e.h[k](G)}e.h.Dg(h),f&&e.h.yf(f.language,f.roles,f.forced),e.i.autoplay=c,u&&e.i.play()}},function(S){S=new Map().set("detail",S),S=new Wn("error",S),e.h.dispatchEvent(S)})}function h6(e,t){if(t=="addEventListener")return function(r,u,c){return e.j.addEventListener(r,u,c)};if(t=="removeEventListener")return function(r,u,c){return e.j.removeEventListener(r,u,c)};if(e.g.Ua()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ua()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function p6(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,u){return e.o.addEventListener(n,r,u)};if(t=="removeEventListener")return function(n,r,u){return e.o.removeEventListener(n,r,u)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.$f()};if(t=="setVideoContainer")return function(n){return e.h.Hg(n)};if(e.g.Ua()){if(t=="getManifest"||t=="drmInfo")return function(){return Ke(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ke(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ua()&&Object.keys(e.g.g.video).length==0&&(hv[t]||pv[t])||!e.g.Ua()?e.h[t].bind(e.h):e.g.get("player",t)}function Mx(e,t,n){e.g.Ua()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}re("shaka.cast.CastProxy",Ri),Ri.prototype.changeReceiverId=Ri.prototype.Yg,Ri.prototype.forceDisconnect=Ri.prototype.uc,Ri.prototype.suggestDisconnect=Ri.prototype.zi,Ri.prototype.setAppData=Ri.prototype.Af,Ri.prototype.cast=Ri.prototype.cast,Ri.prototype.receiverName=Ri.prototype.tf,Ri.prototype.isCasting=Ri.prototype.Ua,Ri.prototype.canCast=Ri.prototype.Xg,Ri.prototype.getPlayer=Ri.prototype.uh,Ri.prototype.getVideo=Ri.prototype.Fh,Ri.prototype.destroy=Ri.prototype.destroy;function vo(e,t,n,r){Sr.call(this);var u=this;this.g=e,this.h=t,this.j=new Tt,this.H={video:e,player:t},this.C=n||function(){},this.I=r||function(c){return c},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.G=new pr(function(){N_(u)}),g6(this)}Y(vo,Sr),g=vo.prototype,g.isConnected=function(){return this.F},g.Lh=function(){return this.o},g.vi=function(e){this.i=e},g.bh=function(){this.i=null},g.wi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},g.ui=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},g.ti=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},g.destroy=function(){var e=this,t,n;return Me(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.C=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Sr.prototype.release.call(e),x(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),X(r)})};function g6(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Dx(e)},t.onSenderDisconnected=function(){return Dx(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&il(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),il(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return y6(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return v6(e,u)},t.start(),t=m(_x);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(u){return Px(e,"video",u)});for(var r in Rc)e.j.D(e.h,Rc[r],function(u){return Px(e,"player",u)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,gd(e)}),e.j.D(e.g,"playing",function(){e.o=!1,gd(e)}),e.j.D(e.g,"pause",function(){gd(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,gd(e)}),e.j.D(e.g,"ended",function(){new pr(function(){e.g&&e.g.ended&&(e.o=!0,gd(e))}).X(_6)})}function Dx(e){e.m=0,e.A=!0,e.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,gd(e)}function gd(e){var t;Me(function(n){if(n.g==1)return x(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Wn("caststatuschanged"),e.dispatchEvent(t),Ox(e)||ol(e),X(n)})}function m6(e,t,n){var r,u,c,f,h,E,S,k,G,te;Me(function(z){switch(z.g){case 1:for(r in t.player)u=t.player[r],e.h[r](u);return e.C(n),c=e.g.autoplay,t.manifest?(e.g.autoplay=!1,fe(z,5),x(z,e.h.load(t.manifest,t.startTime),7)):x(z,Promise.resolve(),3);case 7:ge(z,3);break;case 5:return f=Re(z),h=new Map().set("detail",f),E=new Wn("error",h),e.h&&e.h.dispatchEvent(E),z.return();case 3:if(!e.h)return z.return();for(S in t.video)k=t.video[S],e.g[S]=k;for(G in t.playerAfterLoad)te=t.playerAfterLoad[G],e.h[G](te);e.g.autoplay=c,t.manifest&&(e.g.play(),ol(e)),X(z)}})}function Px(e,t,n){e.h&&(N_(e),il(e,{type:"event",targetName:t,event:n},e.l))}function N_(e){e.G.X(E6);for(var t={video:{},player:{}},n=m(o6),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.R())for(var u in b_)e.m%b_[u]==0&&(t.player[u]=e.h[u]());for(var c in hv)e.m%hv[c]==0&&(t.player[c]=e.h[c]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),il(e,{type:"update",update:t},e.l);for(var f in pv)e.m%pv[f]==0&&(t={player:{}},t.player[f]=e.h[f](),il(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),Ox(e)}function Ox(e){return e.A&&(e.g.duration||e.h.R())?(M_(e),e.A=!1,!0):!1}function M_(e,t){var n={contentId:e.h.ad(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),ol(e,t===void 0?0:t,n)}function v6(e,t){var n=A_(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,m6(e,n.initState,n.appData),N_(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,u=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][u]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,u=n.methodName,r=="player"&&u=="load"&&(e.m=0,e.B=!1);var c=n.id,f=t.senderId;t=e.H[r],n=t[u].apply(t,n.args),r=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return Lx(e,f,c,null)},function(h){return Lx(e,f,c,h)})}}function y6(e,t){var n=A_(t.data);switch(n.type){case"PLAY":e.g.play(),ol(e);break;case"PAUSE":e.g.pause(),ol(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),ol(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),ol(e));break;case"STOP":e.h.lc().then(function(){e.h&&ol(e)});break;case"GET_STATUS":M_(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var u=e.g.volume,c=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),u==e.g.volume&&c==e.g.muted||ol(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,u=e.I(t.contentId),c=n.autoplay||!0,e.C(t.customData),c&&(e.g.autoplay=!0),e.h.load(u,r).then(function(){e.h&&M_(e)}).catch(function(f){var h="LOAD_FAILED";f.category==7&&f.code==7e3&&(h="LOAD_CANCELLED"),il(e,{requestId:Number(n.requestId),type:h},e.s)});break;default:il(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Lx(e,t,n,r){e.h&&il(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function il(e,t,n,r){e.F&&(e=Ex(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function ol(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?T6:e.h.Xe()?w6:e.g.paused?A6:S6,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),il(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}re("shaka.cast.CastReceiver",vo),vo.prototype.destroy=vo.prototype.destroy,vo.prototype.setContentArtist=vo.prototype.ti,vo.prototype.setContentImage=vo.prototype.ui,vo.prototype.setContentTitle=vo.prototype.wi,vo.prototype.clearContentMetadata=vo.prototype.bh,vo.prototype.setContentMetadata=vo.prototype.vi,vo.prototype.isIdle=vo.prototype.Lh,vo.prototype.isConnected=vo.prototype.isConnected;var E6=.5,_6=5,T6="IDLE",S6="PLAYING",w6="BUFFERING",A6="PAUSED";function kx(e,t,n,r,u){if(r>=u)return null;for(var c=-1,f=-1,h=0;h<n.length;h++)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){c=h;break}for(h=n.length-1;0<=h;h--)if(n[h].some(function(Ue){return Ue!=null&&Ue.g.trim()!=""})){f=h;break}if(c===-1||f===-1)return null;for(var E=h=!1,S="white",k="black",G=D_(r,u,h,E,S,k);c<=f;c++){for(var te=n[c],z=-1,ve=-1,Le=0;Le<te.length;Le++)if(te[Le]!=null&&te[Le].g.trim()!==""){z=Le;break}for(Le=te.length-1;0<=Le;Le--)if(te[Le]!=null&&te[Le].g.trim()!==""){ve=Le;break}if(z===-1||ve===-1)te=Fx(r,u),e.nestedCues.push(te);else{for(;z<=ve;z++)if(Le=te[z]){var De=Le.l,qe=Le.i,Te=Le.j,Qe=Le.h;(De!=h||qe!=E||Te!=S||Qe!=k)&&(G.payload&&e.nestedCues.push(G),G=D_(r,u,De,qe,Te,Qe),h=De,E=qe,S=Te,k=Qe),G.payload+=Le.g}else G.payload+=" ";G.payload&&e.nestedCues.push(G),c!==f&&(G=Fx(r,u),e.nestedCues.push(G)),G=D_(r,u,h,E,S,k)}}return e.nestedCues.length?{cue:e,stream:t}:null}function D_(e,t,n,r,u,c){return e=new Cn(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=u,e.backgroundColor=c,e}function Fx(e,t){return e=new Cn(e,t,""),e.lineBreak=!0,e}function Ux(e,t,n,r,u){this.g=e,this.l=t,this.i=n,this.h=r,this.j=u}function P_(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",vp(this)}function yv(e,t,n){var r="CC"+((e.A<<1|e.s)+1),u=new Cn(t,n,"");u.lineInterpretation=1;var c=R6.get(e.g);return c&&(u.line=c),kx(u,r,e.i,t,n)}function vp(e){al(e,0,15),e.g=1}function md(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case yp:r=qx.has(n)?qx.get(n):String.fromCharCode(n);break;case jx:r=I6.get(n);break;case Zx:e.i[e.g].pop(),r=b6.get(n);break;case Gx:e.i[e.g].pop(),r=C6.get(n)}r&&e.i[e.g].push(new Ux(r,e.m,e.j,e.o,e.l))}}function Bx(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(c){return c});else for(var u=0;u<r;u++)e.i[t+u]=e.i[n+u].map(function(c){return c})}function al(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var yp=0,jx=1,Zx=2,Gx=3,qx=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),I6=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),b6=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),C6=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),R6=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Ev(e,t){this.h=Vx,this.o=new P_(e,t),this.i=new P_(e,t),this.g=this.j=new P_(e,t),this.l=0,this.m=null}function O_(e,t,n){e.g=e.i;var r=e.g,u=null;return e.h!==_v&&e.h!==Ep&&(u=yv(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,al(n,0,15),n=e.j,n.g=0<n.h?n.h:0,al(n,0,15),r.g=15),e.h=_v,r.h=t,u}function Hx(e){e.h=x6,e.g=e.j,e.g.h=0}function Kx(e){St("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Ep}var Vx=0,x6=1,_v=3,Ep=4,N6="black green blue cyan red yellow magenta black".split(" "),zx="white green blue cyan red yellow magenta white_italics".split(" ");function Yx(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=P6,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",L_(this)}function L_(e){e.i=[];for(var t=0;16>t;t++)e.i.push(k_())}function k_(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Gc(e,t){Wx(e)&&(e.i[e.h][e.g]=new Ux(t,e.C,e.A,e.s,e.B),e.g++)}function Wx(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}Yx.prototype.isVisible=function(){return this.l};function qc(e,t,n){var r=new Cn(e.j,t,"");r.textAlign=e.F===M6?"left":e.F===D6?"right":kn;var u=r.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?qr:2,e.G){case O6:u.regionAnchorX=0,u.regionAnchorY=0;break;case L6:u.regionAnchorX=50,u.regionAnchorY=0;break;case k6:u.regionAnchorX=100,u.regionAnchorY=0;break;case F6:u.regionAnchorX=0,u.regionAnchorY=50;break;case U6:u.regionAnchorX=50,u.regionAnchorY=50;break;case B6:u.regionAnchorX=100,u.regionAnchorY=50;break;case j6:u.regionAnchorX=0,u.regionAnchorY=100;break;case Z6:u.regionAnchorX=50,u.regionAnchorY=100;break;case G6:u.regionAnchorX=100,u.regionAnchorY=100}return(n=kx(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var M6=0,D6=1,P6=2,O6=0,L6=1,k6=2,F6=3,U6=4,B6=5,j6=6,Z6=7,G6=8;function q6(){this.i=[],this.h=null,this.g=0}function H6(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Tv(e.h)),e.h=null,e.g=0))}function Tv(e){this.g=0,this.h=e}Tv.prototype.ka=function(){return this.g<this.h.length},Tv.prototype.wa=function(){return this.g};function oo(e){if(!e.ka())throw new gt(2,2,3e3);return e.h[e.g++]}Tv.prototype.skip=function(e){if(this.g+e>this.h.length)throw new gt(2,2,3e3);this.g+=e};function K6(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function V6(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=oo(t).value,t=null,n=m(_p(e,n));for(var u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=qc(u,r,e.i)),L_(u);return t}if(n===137)for(t=oo(t).value,t=m(_p(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=oo(t).value,t=null,n=m(_p(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=qc(u,r,e.i)),u.l=!1;return t}if(n===139){for(n=oo(t).value,t=null,n=m(_p(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=qc(u,r,e.i):u.j=r,u.l=!u.l;return t}if(n===140)return t=oo(t).value,$x(e,t,r);if(n===143)return r=$x(e,255,r),Xx(e),r;if(n===144)t.skip(1),r=oo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=oo(t).value,n=oo(t).value,t.skip(1),e.g&&(t=Qx((n&48)>>4,(n&12)>>2,n&3),e.g.B=Qx((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=oo(t).value,t=oo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=oo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,u=e.h[n]!==null,!u){var c=new Yx(n,e.i);c.j=r,e.h[n]=c}r=oo(t).value,c=oo(t).value;var f=oo(t).value,h=oo(t).value,E=oo(t).value;t=oo(t).value,u&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=c&127,t.H=f,t.G=(h&240)>>4,t.K=0<(c&128),t.o=(h&15)+1,t.m=(E&63)+1,e.g=e.h[n]}}}return null}function _p(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function $x(e,t,n){var r=null;t=m(_p(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=e.h[u];c.isVisible()&&(r=qc(c,n,e.i)),e.h[u]=null}return r}function Xx(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Qx(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],z6[e<<2|t<<1|n]}var Jx=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),z6="black blue green cyan red magenta yellow white".split(" ");function vd(){this.h=[],this.g=[],this.i=new q6,this.l=0,this.m=new Map([["CC1",new Ev(0,0)],["CC2",new Ev(0,1)],["CC3",new Ev(1,0)],["CC4",new Ev(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,F_(this)}vd.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,F_(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())Xx(t.value)};function F_(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=Vx,n.g=n.j,n.m=null,vp(n.i),vp(n.j),vp(n.o);e.B=!0}vd.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new Dr(e,0),!(8>e.getLength())&&e.P()===181&&e.ra()===49&&e.M()===1195456820&&e.P()===3&&(n=e.P(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var u=e.P(),c=(u&4)>>2,f=e.P(),h=e.P();c&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,cb:f,vb:h,order:this.h.length}):(this.g.push({pts:t,type:u,value:f,order:this.g.length}),this.g.push({pts:t,type:2,value:h,order:this.g.length})))}},vd.prototype.decode=function(){function e(u,c){return u.pts-c.pts||u.order-c.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),r=n.next();!r.done;r=n.next())(r=Y6(this,r.value))&&t.push(r);for(n=m(this.g),r=n.next();!r.done;r=n.next())H6(this.i,r.value);for(n=m(this.i.i),r=n.next();!r.done;r=n.next())r=W6(this,r.value),t.push.apply(t,T(r));return this.i.i=[],this.h=[],this.g=[],t};function Y6(e,t){var n=t.type;if((t.cb&112)===16){var r=t.cb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.cb===255&&t.vb===255||!t.cb&&!t.vb||!eN(t.cb)||!eN(t.vb))return 45<=++e.l&&F_(e),null;if(e.l=0,t.cb&=127,t.vb&=127,!t.cb&&!t.vb)return null;if(e.A.add(r),e=null,(t.cb&112)===16)e:{if(r=t.cb,e=t.vb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var u=(e&30)>>1;r="white";var c=!1;7>u?r=zx[u]:u===7&&(c=!0),e=(e&1)===1,n.h!==Ep&&(u=n.g,n.h===_v&&t!==u.g&&(n=1+t-u.h,Bx(u,n,1+u.g-u.h,u.h),al(u,0,n-1),al(u,t+1,15-t)),u.g=t,u.m=e,u.j=c,u.l=r,u.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",md(n.g,yp,32),r=!1,t=zx[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=N6[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)md(n.g,jx,e);else if((r&246)===18&&(e&224)===32)md(n.g,r&1?Gx:Zx,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.vb){case 32:Hx(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=O_(n,2,e);break;case 38:r=O_(n,3,e);break;case 39:r=O_(n,4,e);break;case 40:md(n.g,yp,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:vp(n.o),Kx(n);break;case 43:Kx(n);break;case 44:t=n.i,r=null,n.h!==Ep&&(r=yv(t,n.l,e)),al(t,0,15);break;case 45:t=n.g,n.h!==_v?r=null:(r=yv(t,n.l,e),c=t.g-t.h+1,Bx(t,c-1,c,t.h),al(t,0,c-1),al(t,t.g,15-t.g),n.l=e);break;case 46:al(n.j,0,15);break;case 47:t=null,n.h!==Ep&&(t=yv(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,Hx(n),n.l=e,r=t}e=r;break e}e=null}else r=t.vb,md(n.g,yp,t.cb),md(n.g,yp,r);return e}function W6(e,t){var n=[];try{for(;t.ka();){var r=oo(t).value,u=(r&224)>>5,c=r&31;if(u===7&&c!=0&&(u=oo(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new K6(u));for(var f=e.j.get(u),h=t.wa();t.wa()-h<c;){u=t;var E=oo(u),S=E.value,k=E.pts;if(S===16){var G=oo(u);S=S<<16|G.value}if(0<=S&&31>=S){var te=k;if(f.g){var z=f.g;switch(u=null,S){case 8:!Wx(z)||0>=z.g&&0>=z.h||(0>=z.g?(z.g=z.m-1,z.h--):z.g--,z.i[z.h][z.g]=null);break;case 13:if(z.isVisible()&&(u=qc(z,te,f.i)),z.h+1>=z.o){te=z;for(var ve=0,Le=1;16>Le;Le++,ve++)te.i[ve]=te.i[Le];for(Le=0;1>Le;Le++,ve++)te.i[ve]=k_()}else z.h++;z.g=0;break;case 14:z.isVisible()&&(u=qc(z,te,f.i)),z.i[z.h]=k_(),z.g=0;break;case 12:z.isVisible()&&(u=qc(z,te,f.i)),L_(z),te=z,te.h=0,te.g=0}var De=u}else De=null}else if(128<=S&&159>=S)De=V6(f,u,S,k);else{if(4096<=S&&4127>=S)te=S&255,8<=te&&15>=te?u.skip(1):16<=te&&23>=te?u.skip(2):24<=te&&31>=te&&u.skip(3);else if(4224<=S&&4255>=S)te=S&255,128<=te&&135>=te?u.skip(4):136<=te&&143>=te&&u.skip(5);else if(32<=S&&127>=S)u=S,f.g&&(u===127?Gc(f.g,"♪"):Gc(f.g,String.fromCharCode(u)));else if(160<=S&&255>=S)f.g&&Gc(f.g,String.fromCharCode(S));else if(4128<=S&&4223>=S){if(u=S&255,f.g)if(Jx.has(u)){var qe=Jx.get(u);Gc(f.g,qe)}else Gc(f.g,"_")}else 4256<=S&&4351>=S&&f.g&&((S&255)!=160?Gc(f.g,"_"):Gc(f.g,"[CC]"));De=null}(u=De)&&n.push(u)}}}}catch(Te){if(Te instanceof gt&&Te.code===3e3)St("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Te}return n}function eN(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}vd.prototype.getStreams=function(){return Array.from(this.A)},re("shaka.cea.CeaDecoder",vd),Mt=function(){return new vd};function tN(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(T(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var u=0;e[r]==255;)u+=255,r++;u+=e[r++],n==4&&t.push(e.subarray(r,r+u)),r+=u}return t}function Sv(){this.j=new Map,this.i=this.h=0,this.g=U_}Sv.prototype.init=function(e){function t(c){c=c.name,c in wv&&(n.g=wv[c])}var n=this,r=[],u=[];if(new Fr().box("moov",yr).box("mvex",yr).O("trex",function(c){var f=c.reader;f.skip(4),f.skip(4),c=f.M(),f=f.M(),n.h=c,n.i=f}).box("trak",yr).O("tkhd",function(c){c=Gt(c.reader,c.version),r.push(c.trackId)}).box("mdia",yr).O("mdhd",function(c){c=bt(c.reader,c.version),u.push(c.timescale)}).box("minf",yr).box("stbl",yr).O("stsd",mu).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvav",t).box("dva1",t).box("dvh1",t).box("dvhe",t).box("encv",wi).box("sinf",yr).box("frma",function(c){c=un(c.reader).Ea,c in wv&&(n.g=wv[c])}).parse(e,!0),!r.length||!u.length||r.length!=u.length)throw new gt(2,2,2010);this.g==U_&&Ke("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(c,f){n.j.set(c,u[f])})},Sv.prototype.parse=function(e){var t=this;if(this.g==U_)return[];var n=[],r=this.h,u=this.i,c=0,f=[],h=null,E=9e4;return new Fr().box("moof",function(S){c=S.start,f=[],yr(S)}).box("traf",yr).O("trun",function(S){S=Xt(S.reader,S.version,S.flags),f.push(S)}).O("tfhd",function(S){S=rr(S.reader,S.flags),r=S.Wf||t.h,u=S.fh||t.i,S=S.trackId,t.j.has(S)&&(E=t.j.get(S))}).O("tfdt",function(S){h=ir(S.reader,S.version).baseMediaDecodeTime}).box("mdat",function(S){if(h===null)throw Ke("Unable to find base media decode time for CEA captions!"),new gt(2,2,2010);$6(t,S.reader,h,E,r,u,c-S.start-8,f,n)}).parse(e,!1),n};function $6(e,t,n,r,u,c,f,h,E){var S=0,k=c,G=h.map(function(ve){return ve.vg});for(G=[].concat.apply([],T(G)),G.length&&(k=G[0].sampleSize||c),t.skip(f+h[0].eh);t.ka();){f=t.M();var te=t.P(),z=null;switch(z=!1,h=1,e.g){case Tp:z=te&31,z=z==6;break;case Sp:h=2,t.skip(1),z=te>>1&63,z=z==39||z==40;break;default:return}if(z)for(te=0,S<G.length&&(te=G[S].he||0),te=(n+te)/r,h=m(tN(t.sb(f-h))),z=h.next();!z.done;z=h.next())E.push({packet:z.value,pts:te});else try{t.skip(f-h)}catch(ve){break}k-=f+4,k==0&&(n=S<G.length?n+(G[S].wf||u):n+u,S++,S<G.length?k=G[S].sampleSize||c:k=c)}}re("shaka.cea.Mp4CeaParser",Sv);var U_=0,Tp=1,Sp=2,wv={avc1:Tp,avc3:Tp,hev1:Sp,hvc1:Sp,dvav:Tp,dva1:Tp,dvh1:Sp,dvhe:Sp};Yt["video/mp4"]=function(){return new Sv};function Av(){this.g=null}Av.prototype.init=function(){},Av.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ve;var t=[];if(e=Qn(e),!Zr(e))return t;e=this.g.parse(e);var n=e.bd(),r=e.Od();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var u=m(tN(r.data)),c=u.next();!c.done;c=u.next())t.push({packet:c.value,pts:r.time});return t},re("shaka.cea.TsCeaParser",Av),Yt["video/mp2t"]=function(){return new Av};function nN(e,t,n){var r=tj(e),u=null;e=[];var c=[],f=null,h=new Set(r.map(function(S){return S.keyId}));h.delete(null);var E="cenc";if(1<h.size)throw new gt(2,4,4010);if(!t){if(c=r.filter(function(S){return S.Dc=="urn:mpeg:dash:sea:2012"}),1<c.length)throw new gt(2,4,4050);c.length&&(f=rj(c[0])),(c=r.find(function(S){return S.Dc=="urn:mpeg:dash:mp4protection:2011"}))&&c.encryptionScheme&&(E=c.encryptionScheme),c=r.filter(function(S){return S.Dc=="urn:mpeg:dash:mp4protection:2011"?(u=S.init||u,!1):S.Dc!="urn:mpeg:dash:sea:2012"}),c.length&&(e=ej(u,E,c,n,h),e.length==0&&(e=[ku("",E,u)]))}if(r.length&&!f&&(t||!c.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(ku(n,E,u));if(h=Array.from(h)[0]||null)for(E=m(e),t=E.next();!t.done;t=E.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=h;return{Vf:h,Cj:u,drmInfos:e,xe:f,Zf:!0}}function X6(e,t,n,r){var u=nN(e,n,r);if(t.Zf)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Zf=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(c){return u.drmInfos.some(function(f){return f.keySystem==c.keySystem})}),t.drmInfos.length==0))throw new gt(2,4,4008);return u.Vf||t.Vf}function Q6(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function J6(e){e=m(Ca(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=m(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Ci(n)}return""}function Iv(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Fs(e.node,"urn:microsoft:playready","pro"),!e||!Ci(e)||(e=Ci(e),e=Ho(e),e=Q6(e).filter(function(n){return n.type===ij})[0],!e)?"":(e=Ha(e.value,!0),(e=Fl(e,"WRMHEADER"))?J6(e):""))}function ej(e,t,n,r,u){var c=[];n=m(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var h=r[f.Dc];if(h){var E;if((E=Fs(f.node,"urn:microsoft:playready","pro"))&&Ci(E)){E=Ci(E),E=Ho(E);var S=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);E=[{initData:Vf(E,S,new Set,0),initDataType:"cenc",keyId:f.keyId}]}else E=null;if(S=null,f.Dc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(S=u,S.size==0)S=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),G=new Uint8Array([]);S=[{initData:Vf(G,k,S,1),initDataType:"cenc",keyId:f.keyId}]}E=ku(h,t,f.init||e||E||S),(h=oj.get(h))&&(E.licenseServerUri=h(f)),c.push(E)}}return c}function tj(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=nj(n.value))&&t.push(n);return t}function nj(e){var t=e.attributes.schemeIdUri,n=yu(e,"urn:mpeg:cenc:2013","default_KID"),r=Yf(e,"urn:mpeg:cenc:2013","pssh").map(vu),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new gt(2,4,4009);var c=[];try{c=r.map(function(f){return{initDataType:"cenc",initData:Ho(f),keyId:null}})}catch(f){throw new gt(2,4,4007)}return{node:e,Dc:t,keyId:n,init:0<c.length?c:null,encryptionScheme:u}}function rj(e){if(!p.crypto||!p.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new gt(2,4,4042);var t=Fs(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new gt(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new gt(2,4,4051);if(t=Fs(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new gt(2,4,4051);if(e=t.attributes.IV,t=bo(t.attributes.keyUriTemplate),!e||!t)throw new gt(2,4,4051);if(e=du(e.substr(2)),e.byteLength!=16)throw new gt(2,4,4048);return{Rh:t,iv:e}}var ij=1,oj=new Map().set("com.widevine.alpha",function(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Fs(e.node,"urn:microsoft","laurl"))&&bo(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Iv).set("com.microsoft.playready.recommendation",Iv).set("com.microsoft.playready.software",Iv).set("com.microsoft.playready.hardware",Iv).set("org.w3.clearkey",function(e){var t=Fs(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Ci(t))?t:(e=Fs(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Ci(e))?e:""});function bv(e,t,n,r,u,c){var f={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:u,Time:c};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(h,E,S,k){if(h=="$$")return"$";var G=f[E];if(G==null)return h;switch(E=="RepresentationID"&&S&&(S=void 0),E=="Time"&&typeof G!="bigint"&&(.2<=Math.abs(G-Math.round(G))&&Ke("Calculated $Time$ values must be close to integers"),G=Math.round(G)),k){case void 0:case"d":case"i":case"u":h=G.toString();break;case"o":h=G.toString(8);break;case"x":h=G.toString(16);break;case"X":h=G.toString(16).toUpperCase();break;default:h=G.toString()}return S=p.parseInt(S,10)||1,Array(Math.max(0,S-h.length)+1).join("0")+h})}function rN(e,t){var n=Tu(e,t,"timescale"),r=1;n&&(r=Us(n)||1),n=Tu(e,t,"duration"),(n=Us(n||""))&&(n/=r);var u=Tu(e,t,"startNumber"),c=Number(Tu(e,t,"presentationTimeOffset"))||0,f=Ro(u||"");(u==null||f==null)&&(f=1);var h=Cv(e,t,"SegmentTimeline");if(t=null,h){t=r,e=e.ha.duration||1/0,u=f,h=Wr(h,"S");for(var E=[],S=-c,k=0;k<h.length;++k){var G=h[k],te=h[k+1],z=_r(G,"t",Ro),ve=_r(G,"d",Ro),Le=_r(G,"r",Xu);if(G=_r(G,"k",Xu)||0,z!=null&&(z-=c),!ve)break;if(z=z!=null?z:S,Le=Le||0,0>Le)if(te){if(te=_r(te,"t",Ro),te==null)break;if(z>=te)break;Le=Math.ceil((te-z)/ve)-1}else{if(e==1/0)break;if(z/t>=e)break;Le=Math.ceil((e*t-z)/ve)-1}for(0<E.length&&z!=S&&(E[E.length-1].end=z/t),te=0;te<=Le;++te)S=z+ve,E.push({start:z/t,end:S/t,Kf:z,rb:G,ri:E.length+u}),z=S}t=E}return{timescale:r,Da:n,rd:f,Bb:c/r||0,Jf:c,timeline:t}}function iN(e,t){return[t(e.J),t(e.ua),t(e.za)].filter(Bu)}function Tu(e,t,n){t=iN(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Cv(e,t,n){t=iN(e,t),e=null,t=m(t);for(var r=t.next();!r.done&&!(e=la(r.value,n));r=t.next());return e}function aj(e,t,n,r,u,c){for(var f=yu(e,"http://www.w3.org/1999/xlink","href"),h=yu(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",E=m(Object.keys(e.attributes)),S=E.next();!S.done;S=E.next()){S=S.value;var k=S.split(":"),G=Dc("http://www.w3.org/1999/xlink");k[0]==G&&delete e.attributes[S]}if(5<=c)return pu(new gt(2,4,4028));if(h!="onLoad")return pu(new gt(2,4,4027));var te=co([r],[f]);return u.request(0,Oi(te,t)).va(function(z){if(z=Wh(z.data,e.tagName),!z)return pu(new gt(2,4,4001,f));for(e.children=[];z.children.length;){var ve=z.children.shift();ve.tagName&&(ve.parent=e),e.children.push(ve)}ve=m(Object.keys(z.attributes));for(var Le=ve.next();!Le.done;Le=ve.next())Le=Le.value,e.attributes[Le]=z.attributes[Le];return Rv(e,t,n,te[0],u,c+1)})}function Rv(e,t,n,r,u,c){if(c=c===void 0?0:c,yu(e,"http://www.w3.org/1999/xlink","href")){var f=aj(e,t,n,r,u,c);return n&&(f=f.va(void 0,function(){return Rv(e,t,n,r,u,c)})),f}f=[];for(var h={},E=m(DE(e)),S=E.next();!S.done;h={pc:h.pc},S=E.next())h.pc=S.value,yu(h.pc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(k){return function(G){return G!==k.pc}}(h)):h.pc.tagName!="SegmentTimeline"&&f.push(Rv(h.pc,t,n,r,u,c));return qf(f).va(function(){return e})}function sj(e,t,n,r,u,c,f){var h,E=new Fr().O("sidx",function(S){h=uj(t,r,u,c,f,n,S)});if(e&&E.parse(e),h)return h;throw new gt(2,3,3004)}function uj(e,t,n,r,u,c,f){var h=[];f.reader.skip(4);var E=f.reader.M();if(E==0)throw new gt(2,3,3005);if(f.version==0)var S=f.reader.M(),k=f.reader.M();else S=f.reader.Cc(),k=f.reader.Cc();f.reader.skip(2);var G=f.reader.ra();for(e=e+f.size+k,k=0;k<G;k++){var te=f.reader.M(),z=(te&2147483648)>>>31;te&=2147483647;var ve=f.reader.M();if(f.reader.skip(4),z==1)throw new gt(2,3,3006);h.push(new et(S/E+n,(S+ve)/E+n,function(){return c},e,e+te-1,t,n,r,u)),S+=ve,e+=te}return f.parser.stop(),h}function Bl(e){this.h=tn(e),this.g=new Dr(this.h,0)}Bl.prototype.ka=function(){return this.g.ka()};function sl(e){var t=oN(e);if(7<t.length)throw new gt(2,3,3002);var n=0;t=m(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=oN(e);e:{r=m(lj);for(var u=r.next();!u.done;u=r.next())if(zi(t,new Uint8Array(u.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.wa();else{if(t.length==8&&t[1]&224)throw new gt(2,3,3001);for(u=r=0;u<t.length;u++){var c=t[u];r=u==0?c&(1<<8-t.length)-1:256*r+c}t=r}return t=e.g.wa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.wa(),r=tn(e.h,e.g.wa(),t),e.g.skip(t),new cj(n,r)}function oN(e){var t=e.g.wa(),n=e.g.P();if(n==0)throw new gt(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Qn(e.h,t,n)}var lj=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function cj(e,t){this.id=e,this.g=t}function B_(e){if(8<e.g.byteLength)throw new gt(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new gt(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function fj(e,t,n,r,u,c,f,h,E){function S(){return u}var k=[];e=new Bl(e.g);for(var G=null,te=null;e.ka();){var z=sl(e);if(z.id==187){var ve=dj(z);ve&&(z=n*ve.Di,ve=t+ve.gi,G!=null&&k.push(new et(G+f,z+f,S,te,ve-1,c,f,h,E)),G=z,te=ve)}}return G!=null&&k.push(new et(G+f,r+f,S,te,null,c,f,h,E)),k}function dj(e){var t=new Bl(e.g);if(e=sl(t),e.id!=179)throw new gt(2,3,3013);if(e=B_(e),t=sl(t),t.id!=183)throw new gt(2,3,3012);t=new Bl(t.g);for(var n=0;t.ka();){var r=sl(t);if(r.id==241){n=B_(r);break}}return{Di:e,gi:n}}function aN(e,t,n){if(t=Cv(e,t,"Initialization"),!t)return null;var r=e.J.nb(),u=t.attributes.sourceURL;u&&(r=co(r,[bo(u)])),u=0;var c=null;return(t=_r(t,"range",$f))&&(u=t.start,c=t.end),n=new ht(function(){return r},u,c,cN(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function hj(e,t,n){var r=Number(Tu(e,yd,"presentationTimeOffset"))||0,u=Tu(e,yd,"timescale"),c=1;u&&(c=Us(u)||1);var f=r/c||0,h=aN(e,yd,n);pj(e,h);var E=fm(e);return{vc:function(){var S=Cv(E,yd,"RepresentationIndex"),k=E.J.nb();return S&&(S=bo(S.attributes.sourceURL))&&(k=co(k,[S])),S=uN(E),sN(E,t,h,k,S.start,S.end,f)}}}function sN(e,t,n,r,u,c,f){var h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt;return Me(function(_t){if(_t.g==1)return h=e.presentationTimeline,E=!e.Eb||!e.ha.Ye,S=e.ha.start,k=e.ha.duration,G=e.J.mimeType.split("/")[1],te=t,z=null,ve=[te(r,u,c,!1),G=="webm"?te(n.$(),n.Aa,n.ja,!0):null],te=null,x(_t,Promise.all(ve),2);if(Le=_t.h,De=Le[0],qe=Le[1]||null,Te=null,Qe=S-f,Ue=S,vt=k?S+k:1/0,G=="mp4")var Zt=sj(De,u,r,n,Qe,Ue,vt);else{if(Zt=new Bl(qe),sl(Zt).id!=440786851)throw new gt(2,3,3008);var ln=sl(Zt);if(ln.id!=408125543)throw new gt(2,3,3009);Zt=ln.g.byteOffset,ln=new Bl(ln.g);for(var pn=null;ln.ka();){var Ln=sl(ln);if(Ln.id==357149030){pn=Ln;break}}if(!pn)throw new gt(2,3,3010);for(pn=new Bl(pn.g),Ln=1e6,ln=null;pn.ka();){var Mn=sl(pn);if(Mn.id==2807729)Ln=B_(Mn);else if(Mn.id==17545)if(Mn.g.byteLength==4)ln=Mn.g.getFloat32(0);else if(Mn.g.byteLength==8)ln=Mn.g.getFloat64(0);else throw new gt(2,3,3003)}if(ln==null)throw new gt(2,3,3011);if(pn=Ln/1e9,ln*=pn,Ln=sl(new Bl(De)),Ln.id!=475249515)throw new gt(2,3,3007);Zt=fj(Ln,Zt,pn,ln,r,n,Qe,Ue,vt)}for(Te=Zt,xt=m(Te),Vt=xt.next();!Vt.done;Vt=xt.next())Bt=Vt.value,Bt.codecs=e.J.codecs,Bt.mimeType=e.J.mimeType;return h.ld(Te),z=new wr(Te),E&&z.sc(Ue,vt,!0),_t.return(z)})}function yd(e){return e.pd}function uN(e){var t=Cv(e,yd,"RepresentationIndex");return e=Tu(e,yd,"indexRange"),e=$f(e||""),t&&(e=_r(t,"range",$f,e)),e}function pj(e,t){if(lN(e,t),!uN(e))throw new gt(2,4,4002)}function lN(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=vr&&n!="mp4"&&n!="webm")throw new gt(2,4,4006);if(n=="webm"&&!t)throw new gt(2,4,4005)}function cN(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.de,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function gj(e,t,n){var r=aN(e,fN,n),u=mj(e);if(!u.Da&&!u.timeline&&1<u.yc.length)throw new gt(2,4,4002);if(!u.Da&&!e.ha.duration&&!u.timeline&&u.yc.length==1)throw new gt(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new gt(2,4,4002);var c=null,f=null;e.za.id&&e.J.id&&(f=t[e.za.id+","+e.J.id])&&(c=f.segmentIndex);var h=vj(e.ha.start,e.ha.duration,e.J.nb,u,r,n,e.J.mimeType,e.J.codecs);return t=!c,c?c.kd(h,e.presentationTimeline.qb()):c=new wr(h),e.presentationTimeline.ld(h),e.Eb&&e.ha.Ye||c.sc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,t),f&&(f.segmentIndex=c),{vc:function(){return c&&c.getNumReferences()!=0||c.ae(h),Promise.resolve(c)}}}function fN(e){return e.Jb}function mj(e){var t=yj(e);e=rN(e,fN);var n=e.rd;n==0&&(n=1);var r=0;return e.Da?r=e.Da*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Da:e.Da,startTime:r,rd:n,Bb:e.Bb,timeline:e.timeline,yc:t}}function vj(e,t,n,r,u,c,f,h){var E=r.yc.length;r.timeline&&r.timeline.length!=r.yc.length&&(E=Math.min(r.timeline.length,r.yc.length));for(var S=e-r.Bb,k=t?e+t:1/0,G=[],te=r.startTime,z={},ve=0;ve<E;z={Sc:z.Sc,Oc:z.Oc},ve++){z.Oc=r.yc[ve];var Le=te;te=void 0,te=r.Da!=null?Le+r.Da:r.timeline?r.timeline[ve].end:Le+t,z.Sc=null,Le=new et(e+Le,e+te,function(De){return function(){return De.Sc==null&&(De.Sc=co(n(),[De.Oc.Xh])),De.Sc}}(z),z.Oc.start,z.Oc.end,u,S,e,k,[],"",null,null,jt,c),Le.codecs=h,Le.mimeType=f,G.push(Le)}return G}function yj(e){return[e.J.Jb,e.ua.Jb,e.za.Jb].filter(Bu).map(function(t){return Wr(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.ig&&(e.ig=!0);var n=bo(t.attributes.media);return t=_r(t,"mediaRange",$f,{start:0,end:null}),{Xh:n,start:t.start,end:t.end}})}function Ej(e,t,n,r,u,c,f,h){var E=wj(e,f),S=_j(e);Tj(S);var k=fm(e);if(S.hd)return lN(e,E),{vc:function(){var Le=bv(S.hd,k.J.id,null,null,k.bandwidth||null,null);return Le=co(k.J.nb(),[Le]),sN(k,t,E,Le,0,null,S.Bb)}};if(S.Da)return r||e.ua.contentType==="image"||(e.presentationTimeline.hf(S.Da),e.presentationTimeline.ce(e.ha.start)),{vc:function(){return Sj(k,S,u,E,c,f,h)}};var G=null;r=r=null,e.za.id&&e.J.id&&(r=e.za.id+","+e.J.id,r=n[r])&&(G=r.segmentIndex);var te=e.ha.start,z=e.ha.duration?te+e.ha.duration:1/0,ve=!(e.Eb&&e.ha.Ye);return G?(n=G,dN(n,S,te,z,ve,E),n.La(e.presentationTimeline.qb())):G=new Nv(S,e.J.id,e.bandwidth,e.J.nb,te,z,E,ve,f,e.J.xf),S.timeline&&e.ua.contentType!=="image"&&e.presentationTimeline.qg(S.timeline,te),r&&e.Eb&&(r.segmentIndex=G),{vc:function(){return G instanceof Nv&&G.getNumReferences()==0&&dN(G,S,te,z,ve,E),Promise.resolve(G)}}}function xv(e){return e.qd}function _j(e){var t=rN(e,xv),n=Tu(e,xv,"media"),r=Tu(e,xv,"index");return{Da:t.Da,timescale:t.timescale,rd:t.rd,Bb:t.Bb,Jf:t.Jf,timeline:t.timeline,zc:n&&bo(n),hd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function Tj(e){var t=e.hd?1:0;if(t+=e.timeline?1:0,t+=e.Da?1:0,t==0)throw new gt(2,4,4002);if(t!=1&&(e.hd&&(e.timeline=null),e.Da=null),!e.hd&&!e.zc)throw new gt(2,4,4002)}function Sj(e,t,n,r,u,c,f){function h(ln){var pn=(ln-Le)*ve,Ln=pn+t.Bb,Mn=pn+G;pn=Mn+ve;var qn=Math.min(pn,S());return Mn=new et(Mn,qn,function(){var Yn=Ln*De;return"BigInt"in p&&Yn>Number.MAX_SAFE_INTEGER&&(Yn=BigInt(Ln)*BigInt(De)),Yn=bv(qe,Qe,ln,null,Te,Yn),co(Ue(),[Yn])},0,null,r,vt,G,S(),[],"",null,null,jt,c),Mn.codecs=e.J.codecs,Mn.mimeType=e.J.mimeType,Mn.i=pn,Mn}function E(){var ln=[Math.max(k.qb(),G),Math.min(k.Gb(),S())].map(function(pn){return pn-G});return ln=[Math.ceil(ln[0]/ve),Math.ceil(ln[1]/ve)-1],e.J.Qb&&ln[1]++,ln.map(function(pn){return pn+Le})}function S(){var ln=te!=null&&u[te]||z;return ln?G+ln:1/0}var k=e.presentationTimeline,G=e.ha.start,te=e.za.id,z=e.ha.duration,ve=t.Da,Le=t.rd,De=t.timescale,qe=t.zc,Te=e.bandwidth||null,Qe=e.J.id,Ue=e.J.nb,vt=G-t.Bb,xt=E();n=e.Eb?Math.max(xt[0],xt[1]-n+1):xt[0],f=f||xt[1],xt=[];for(var Vt=n;Vt<=f;++Vt){var Bt=h(Vt);xt.push(Bt)}var _t=new wr(xt);if(xt=k.Gb()<S(),Vt=k.R(),xt||Vt){var Zt=Math.max(n,f+1);_t.ke(ve,function(){var ln=k.qb();_t.La(ln);var pn=m(E());pn.next(),pn=pn.next().value;for(var Ln=[];Zt<=pn;){var Mn=h(Zt);Ln.push(Mn),Zt++}return ln>S()&&!Ln.length?null:Ln})}return Promise.resolve(_t)}function wj(e,t){var n=Tu(e,xv,"initialization");if(!n)return null;n=bo(n);var r=e.J.id,u=e.bandwidth||null,c=e.J.nb;return t=new ht(function(){var f=bv(n,r,null,null,u,null);return co(c(),[f])},0,null,cN(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Nv(e,t,n,r,u,c,f,h,E,S){wr.call(this,[]),this.h=e,this.F=t,this.B=n,this.C=r,this.i=u,this.l=c,this.s=f,this.A=E,this.G=S,h&&hN(this)}Y(Nv,wr),g=Nv.prototype,g.getNumReferences=function(){return this.h?this.h.timeline.length:0},g.release=function(){wr.prototype.release.call(this),this.h=null},g.La=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.i<=e;r+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.getNumReferences()===0&&this.release())}};function dN(e,t,n,r,u,c){if(Aj(e,c),e.h){n=e.h.timeline,e.h.zc=t.zc;var f=n[n.length-1];t=t.timeline.filter(function(h){return h.start>=f.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,T(t)),e.l!==r&&(e.l=r)}else e.h=t,e.i=n,e.l=r;u&&hN(e)}function Aj(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&pt(n,t)}}function hN(e){if(!e.o){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.La(e.i)}}g.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var u=t[r],c=u.start+this.i;if(u=r<n?t[r+1].start+this.i:this.l===1/0?u.end+this.i:this.l,e>=c&&e<u)return r+this.j}return null},g.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=this.h.zc,u=this.h.timeline[e],c=u.ri,f=this.h.Jf+u.Kf;n=this.i-this.h.Bb;var h=this.i+u.end,E=h;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var S=this.h.codecs,k=this.h.mimeType,G=[],te=(u.end-u.start)/u.rb,z={},ve=0;ve<u.rb;z={Tc:z.Tc,se:z.se},ve++){var Le=u.start+te*ve,De=Le+te;z.se=ve+1,z.Tc=null,Le=new et(this.i+Le,this.i+De,function(qe){return function(){return t.h?(qe.Tc==null&&(qe.Tc=pN(t.h.zc,t.F,c,t.B,f,qe.se,t.C)),qe.Tc):[]}}(z),0,null,this.s,n,this.i,this.l,[],"",null,null,jt,this.A),Le.codecs=S,Le.mimeType=k,this.G==0?0<ve&&Le.Zd():ve%this.G!=0&&Le.Zd(),G.push(Le)}n=new et(this.i+u.start,E,function(){return 0<u.rb?[]:pN(r,t.F,c,t.B,f,null,t.C)},0,null,this.s,n,this.i,this.l,G,"",null,null,jt,this.A,0<u.rb),n.codecs=S,n.mimeType=k,n.i=h,this.g[e]=n}return n};function pN(e,t,n,r,u,c,f){return e=bv(e,t,n,c,r||null,u),co(f(),[e]).map(function(h){return h.toString()})}function Ed(e){this.o=null,this.A=e,this.G=new Ol,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}Ed.prototype.configure=function(e){this.o=e},Ed.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},Ed.prototype.setManifestType=function(e){this.s=e};function wp(e,t){var n,r,u,c,f,h,E;return Me(function(S){if(S.g==1)return n=co(e.i,[Ij(e,t)]),r=Oi(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,r),gu(e.G,u),fe(S,2),x(S,u.promise,4);if(S.g!=2)return c=S.h,f=Vr(c.data),h=JSON.parse(f),h.VERSION==1&&bj(e,h,c.uri),ge(S,0);if((E=Re(S))&&E.code==7001)return S.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new pr(function(){wp(e,t)}),e.g.X(e.C),X(S)})}function Ij(e,t){if(!e.m.length)return t;t=new si(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(r))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(r))),ra(u)&&hr(t,u),t.toString()}function bj(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new pr(function(){wp(e,r)}),(n=t.TTL)&&(e.C=n),e.g.X(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function _d(e,t,n,r){var u=e.l.get(t);u||(u=new Map),u.set(n,r),e.l.set(t,u)}Ed.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Ap(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],u={},c=m(e.m),f=c.next();!f.done;u={Pb:u.Pb},f=c.next())if(u.Pb=f.value,f=t.get(u.Pb))r.push({rf:u.Pb,location:f});else if(f=e.F.find(function(E){return function(S){return S.Vi==E.Pb}}(u))){var h=t.get(f["BASE-ID"]);h&&(f["URI-REPLACEMENT"].Ng?(h=new si(h),_n(h,f["URI-REPLACEMENT"].Ng),r.push({rf:u.Pb,location:h.toString()})):r.push({rf:u.Pb,location:h}))}for(u=Date.now(),c=m(e.j.keys()),f=c.next();!f.done;f=c.next())f=f.value,h=e.j.get(f),u>h&&e.j.delete(f);if(r=r.filter(function(E){for(var S=m(e.j.keys()),k=S.next();!k.done;k=S.next())if(k.value.includes(new si(E.location).wb))return!1;return!0}),r.length&&(e.B=r[0].rf),r=r.map(function(E){return E.location}),!r.length&&e.h)for(u=m(e.h.split(",")),f=u.next();!f.done;f=u.next())(c=t.get(f.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())r.push(u.value);return n?r:co(e.i,r)}function Vo(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.o=this.m=!1,this.s=new Set}g=Vo.prototype,g.release=function(){for(var e=m(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},g.Eh=function(){return this.j},g.Ve=function(){return this.l.slice()},g.nh=function(){return this.i};function gN(e,t){var n=[],r=[],u=[],c=[];e=m(e);for(var f=e.next();!f.done;f=e.next()){var h=f.value;f=new Map(h.audioStreams.map(function(G){return[q_(G),G]}));var E=new Map(h.videoStreams.map(function(G){return[G_(G),G]})),S=new Map(h.textStreams.map(function(G){return[Rp(G),G]}));if(h=new Map(h.imageStreams.map(function(G){return[xp(G),G]})),t){var k=TN(vr);S.set(Rp(k),k),k=TN("image"),h.set(xp(k),k)}n.push(f),r.push(E),u.push(S),c.push(h)}return{Pf:n,Lg:r,Ig:u,hg:c}}g.Sf=function(e,t){var n=this,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn;return Me(function(Yn){if(Yn.g==1){if(r=yi,!t&&e.length==1)return u=gN(e,!1),c=u.Pf,f=u.Lg,h=u.Ig,E=u.hg,n.h=Array.from(c[0].values()),n.g=Array.from(f[0].values()),n.l=Array.from(h[0].values()),n.i=Array.from(E[0].values()),Yn.u(2);for(S=-1,k=0;k<e.length;k++)G=e[k],n.s.has(G.id)||(n.s.add(G.id),S==-1&&(S=k));return S==-1?Yn.return():(te=gN(e,!0),z=te.Pf,ve=te.Lg,Le=te.Ig,De=te.hg,x(Yn,Promise.all([jl(n,n.h,z,S,Ip,Td),jl(n,n.g,ve,S,Ip,Td),jl(n,n.l,Le,S,Ip,Td),jl(n,n.i,De,S,Ip,Td)]),2))}if(qe=0,Te=[],n.g.length&&n.h.length)for(Bt=m(n.h),_t=Bt.next();!_t.done;_t=Bt.next())for(Zt=_t.value,ln=m(n.g),pn=ln.next();!pn.done;pn=ln.next())Ln=pn.value,Mn=ce(Zt.drmInfos,Ln.drmInfos),Zt.drmInfos.length&&Ln.drmInfos.length&&!Mn.length||(qn=qe++,Te.push({id:qn,language:Zt.language,disabledUntilTime:0,primary:Zt.primary,audio:Zt,video:Ln,bandwidth:(Zt.bandwidth||0)+(Ln.bandwidth||0),drmInfos:Mn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(Qe=n.g.length?n.g:n.h,Ue=m(Qe),vt=Ue.next();!vt.done;vt=Ue.next())xt=vt.value,Vt=qe++,Te.push({id:Vt,language:xt.language,disabledUntilTime:0,primary:xt.primary,audio:xt.type==r.S?xt:null,video:xt.type==r.fa?xt:null,bandwidth:xt.bandwidth||0,drmInfos:xt.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=Te,X(Yn)})};function mN(e){var t,n,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return Me(function(qn){switch(qn.g){case 1:if(t=yi,e.length==1)return qn.return(e[0]);for(n=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.S}).map(function(Kn){return[q_(Kn),Kn]}))}),r=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.fa}).map(function(Kn){return[G_(Kn),Kn]}))}),u=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ma}).map(function(Kn){return[Rp(Kn),Kn]}))}),c=e.map(function(Yn){return new Map(Yn.filter(function(Kn){return Kn.type===t.ue}).map(function(Kn){return[xp(Kn),Kn]}))}),f=m(u),h=f.next();!h.done;h=f.next())E=h.value,S=_N(t.ma),E.set(Rp(S),S);for(k=m(c),G=k.next();!G.done;G=k.next())te=G.value,z=_N(t.ue),te.set(xp(z),z);return ve=new Vo,x(qn,jl(ve,[],n,0,Mv,Dv),2);case 2:return Le=qn.h,x(qn,jl(ve,[],r,0,Mv,Dv),3);case 3:return De=qn.h,x(qn,jl(ve,[],u,0,Mv,Dv),4);case 4:return qe=qn.h,x(qn,jl(ve,[],c,0,Mv,Dv),5);case 5:if(Te=qn.h,Qe=0,De.length&&Le.length)for(Bt=m(Le),_t=Bt.next();!_t.done;_t=Bt.next())for(Zt=_t.value,ln=m(De),pn=ln.next();!pn.done;pn=ln.next())Ln=pn.value,Mn=Qe++,Ln.variantIds.push(Mn),Zt.variantIds.push(Mn);else for(Ue=De.concat(Le),vt=m(Ue),xt=vt.next();!xt.done;xt=vt.next())Vt=xt.value,Vt.variantIds=[Qe++];return qn.return(De.concat(Le).concat(qe).concat(Te))}})}function jl(e,t,n,r,u,c){var f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt;return Me(function(Bt){switch(Bt.g){case 1:for(f=[],h=0;h<r;h++)f.push(new Set);for(E=r;E<n.length;E++)f.push(new Set(n[E].values()));S=m(t),k=S.next();case 2:if(k.done){Bt.u(4);break}return G=k.value,x(Bt,Cj(e,G,n,r,c,f),5);case 5:if(te=Bt.h,!te)throw new gt(2,4,4037);k=S.next(),Bt.u(2);break;case 4:for(z=m(f),ve=z.next();!ve.done;ve=z.next())for(Le=ve.value,De=m(Le),qe=De.next();!qe.done;qe=De.next())Te=qe.value,(Qe=Rj(e,Te,n,u,c,f))&&t.push(Qe);for(Ue=m(f),ve=Ue.next();!ve.done;ve=Ue.next())for(vt=ve.value,xt={},Vt=m(vt),qe=Vt.next();!qe.done;xt={Bd:xt.Bd},qe=Vt.next())if(xt.Bd=qe.value,!Z_(xt.Bd)&&t.some(function(_t){return function(Zt){return j_(e,_t.Bd,Zt)}}(xt)))throw new gt(2,4,4037);return Bt.return(t)}})}function Cj(e,t,n,r,u,c){return Me(function(f){return f.g==1?(EN(e,n,t),t.matchedStreams?t.segmentIndex?x(f,vN(t,r),2):f.u(2):f.return(!1)):(yN(t,r,u,c),f.return(!0))})}function vN(e,t){var n,r,u,c,f,h,E;return Me(function(S){if(S.g==1){for(n=[],r=e.matchedStreams,u=m(r),c=u.next();!c.done;c=u.next())f=c.value,n.push(f.createSegmentIndex()),f.trickModeVideo&&!f.trickModeVideo.segmentIndex&&n.push(f.trickModeVideo.createSegmentIndex());return x(S,Promise.all(n),2)}if(e.segmentIndex instanceof Ei)for(h=t;h<r.length;h++)E=r[h],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);X(S)})}function Rj(e,t,n,r,u,c){if(Z_(t))return null;var f=r(t);return EN(e,n,f),f.createSegmentIndex&&(f.createSegmentIndex=function(){return Me(function(h){return f.segmentIndex?h.u(0):(f.segmentIndex=new Ei,x(h,vN(f,0),0))})}),!f.matchedStreams||!f.matchedStreams.length?null:(yN(f,0,u,c),f)}function yN(e,t,n,r){for(var u=e.matchedStreams;t<u.length;t++){var c=u[t];n(e,c);var f=!0;if(e.type=="audio"&&Gu(e.language,c.language)==0&&(f=!1),f&&(r[t].delete(c),c.fullMimeTypes))for(c=m(c.fullMimeTypes.values()),f=c.next();!f.done;f=c.next())e.fullMimeTypes.add(f.value)}}function Ip(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Mv(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Td(e,t){function n(f,h){f||(f=[]),h=m(h);for(var E=h.next();!E.done;E=h.next())E=E.value,f.includes(E)||f.push(E);return f}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=m(t.keyIds),u=r.next();!u.done;u=r.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=ce(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new gt(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=m(t.closedCaptions),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.closedCaptions.set(u,c)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Ip(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Td(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Td(e.trickModeVideo,t)}function Dv(e,t){var n=e.roles;n||(n=[]);for(var r=m(t.roles),u=r.next();!u.done;u=r.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,T(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function EN(e,t,n){var r=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=xj(e,u.value,n),!u)return;r.push(u)}n.matchedStreams=r}function xj(e,t,n){var r={audio:q_,video:G_,text:Rp,image:xp}[n.type],u=null,c=r(n);if(t.has(c))u=t.get(c);else{c={audio:function(S,k){return j_(e,S,k)},video:function(S,k){return j_(e,S,k)},text:Nj,image:Mj}[n.type];for(var f={audio:Dj,video:Pj,text:Oj,image:Lj}[n.type],h=m(t.values()),E=h.next();!E.done;E=h.next())E=E.value,!c(n,E)||n.fastSwitching!=E.fastSwitching||u&&!f(n,u,E)||(u=E)}return e.o&&!Z_(u)&&t.delete(r(u)),u}function bp(e,t){function n(r){if(!H_.has(r)){var u=Ia(r);H_.set(r,u)}return H_.get(r)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}g.yg=function(e){this.m=e},g.Fg=function(e){this.o=e};function j_(e,t,n){return!(!bp(t,n)&&!e.m||t.drmInfos&&!ne(t.drmInfos,n.drmInfos))}function Nj(e,t){return t.language?!(e.forced!==t.forced||Gu(e.language,t.language)==0||t.kind!=e.kind):!0}function Mj(){return!0}function Dj(e,t,n){var r=bp(e,t),u=bp(e,n);if(r&&!u)return!1;if(!r&&u||(r=Gu(e.language,t.language),u=Gu(e.language,n.language),u>r))return!0;if(u<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length?!0:u.length<r.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=Cp(e.channelsCount,t.channelsCount,n.channelsCount),r==Ks?!0:r==ul?!1:(r=Cp(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Ks?!0:r==ul?!1:!!(e.bandwidth&&SN(e.bandwidth,t.bandwidth,n.bandwidth)==Ks)))}function Pj(e,t,n){var r=bp(e,t),u=bp(e,n);if(r&&!u)return!1;if(!r&&u||(r=Cp(e.width*e.height,t.width*t.height,n.width*n.height),r==Ks))return!0;if(r==ul)return!1;if(e.frameRate){if(r=Cp(e.frameRate,t.frameRate,n.frameRate),r==Ks)return!0;if(r==ul)return!1}return!!(e.bandwidth&&SN(e.bandwidth,t.bandwidth,n.bandwidth)==Ks)}function Oj(e,t,n){var r=Gu(e.language,t.language),u=Gu(e.language,n.language);if(u>r)return!0;if(u<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(c){return e.roles.includes(c)}),u=n.roles.filter(function(c){return e.roles.includes(c)}),u.length>r.length)return!0;if(u.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function Lj(e,t,n){return Cp(e.width*e.height,t.width*t.height,n.width*n.height)==Ks}function _N(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function TN(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Cp(e,t,n){if(t==e&&e!=n)return ul;if(n==e&&e!=t)return Ks;if(t>e){if(n<=e||n-e<t-e)return Ks;if(n-e>t-e)return ul}else{if(n>e)return ul;if(e-n<e-t)return Ks;if(e-n>e-t)return ul}return wN}function SN(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Ks:t<e?ul:wN}function Z_(e){switch(e.type){case vr:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function G_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function q_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Rp(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function xp(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}re("shaka.util.PeriodCombiner",Vo),Vo.prototype.setUseStreamOnce=Vo.prototype.Fg,Vo.prototype.setAllowMultiTypeVariants=Vo.prototype.yg,Vo.prototype.combinePeriods=Vo.prototype.Sf,Vo.prototype.getImageStreams=Vo.prototype.nh,Vo.prototype.getTextStreams=Vo.prototype.Ve,Vo.prototype.getVariants=Vo.prototype.Eh;var Ks=1,wN=0,ul=-1,H_=new Map;function kj(e,t){var n=new DOMParser,r=Fj.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(u){return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function AN(e,t){try{var n=Ka(e);return kj(n,t)}catch(r){return null}}var Fj=new ia(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Pv(){var e=this;this.i=this.g=null,this.o=[],this.j=null,this.I=1,this.m={},this.L={},this.l=new Vo,this.G=0,this.H=new M(5),this.A=new pr(function(){Hj(e)}),this.F=new Ol,this.B=null,this.K=[],this.C=1/0,this.s=!1,this.h=null}g=Pv.prototype,g.configure=function(e){var t=this.i&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.j&&this.j.presentationTimeline.R()&&this.A.kc(),this.h&&this.h.configure(this.g),this.l&&(this.l.yg(this.g.dash.multiTypeVariantsAllowed&&Un()),this.l.Fg(this.g.dash.useStreamOnceInPeriodFlattening))},g.start=function(e,t){var n=this,r;return Me(function(u){if(u.g==1)return n.s=t.isLowLatencyMode(),n.o=[e],n.i=t,x(u,K_(n),2);if(r=u.h,n.i&&V_(n,r),!n.i)throw new gt(2,7,7001);return u.return(n.j)})},g.stop=function(){for(var e=m(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.g=this.i=null,this.o=[],this.j=null,this.m={},this.l=null,this.A!=null&&(this.A.stop(),this.A=null),this.h&&this.h.destroy(),this.F.destroy()},g.update=function(){var e=this,t;return Me(function(n){if(n.g==1)return fe(n,2),x(n,K_(e),4);if(n.g!=2)return ge(n,0);if(t=Re(n),!e.i||!t)return n.return();e.i.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.Gb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.G=t.endTime-e,V_(this,0))}}},g.banLocation=function(e){this.h&&this.h.banLocation(e)};function K_(e){var t,n,r,u,c,f,h;return Me(function(E){return E.g==1?(t=e.o,1<e.o.length&&e.h&&(n=Ap(e.h,"Location",!0),n.length&&(t=n)),r=Oi(t,e.g.retryParameters),u=Date.now(),x(E,Y_(e,r,0,{type:4}),2)):E.g!=3?(c=E.h,e.i?(c.uri&&c.uri!=c.originalUri&&!e.o.includes(c.uri)&&e.o.unshift(c.uri),x(E,Uj(e,c.data,c.uri),3)):E.return(0)):(f=Date.now(),h=(f-u)/1e3,e.H.sample(1,h),E.return(h))})}function Uj(e,t,n){var r,u,c,f,h,E,S,k,G,te;return Me(function(z){if(z.g==1){if(r=t,u=e.g.dash.manifestPreprocessor,c=Wm,u!=c){if(dr("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),f=AN(r,"MPD"),!f)throw new gt(2,4,4001,n);u(f),r=Va(f.outerHTML)}if(h=Wh(r,"MPD"),!h)throw new gt(2,4,4001,n);return E=e.g.dash.manifestPreprocessorTXml,S=$m,E!=S&&E(h),e.g.dash.disableXlinkProcessing?z.return(IN(e,h,n)):(k=e.g.dash.xlinkFailGracefully,G=Rv(h,e.g.retryParameters,k,n,e.i.networkingEngine),gu(e.F,G),x(z,G.promise,2))}return te=z.h,z.return(IN(e,te,n))})}function IN(e,t,n){var r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi,Gr,fo,Fo,ai,zs,Yc,Wc,Nd,ll,Ys,cl,Kl,Md,Dd,gy,Pd,Kp,my;return Me(function(Ss){switch(Ss.g){case 1:for(e.h&&e.h.l.clear(),r=[n],u=[],c=new Map,f=Wr(t,"Location"),h=m(f),E=h.next();!E.done;E=h.next())S=E.value,k=S.attributes.serviceLocation,(G=vu(S))&&(te=co(r,[G])[0],k&&(e.h?_d(e.h,"Location",k,te):c.set(k,te)),u.push(te));if(e.h?(z=Ap(e.h,"Location",!0),0<z.length&&(r=e.o=z)):u.length&&(r=e.o=u),ve=Promise.resolve(),(Le=la(t,"ContentSteering"))&&e.i)for(De=Le.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=De):(e.h=new Ed(e.i),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=De,(qe=vu(Le))&&(_r(Le,"queryBeforeStart",$h,!1)?ve=wp(e.h,qe):wp(e.h,qe))),Te=m(c.keys()),Qe=Te.next();!Qe.done;Qe=Te.next())Ue=Qe.value,vt=c.get(Ue),_d(e.h,"Location",Ue,vt);if(xt=Wr(t,"BaseURL"),Bt=!1,e.h)for(_t=m(xt),Zt=_t.next();!Zt.done;Zt=_t.next())ln=Zt.value,pn=ln.attributes.serviceLocation,Ln=vu(ln),pn&&Ln&&(_d(e.h,"BaseURL",pn,Ln),Bt=!0);if(Bt&&e.h||(Mn=xt.map(vu),Vt=co(r,Mn)),qn=function(){return e.h&&Bt?Ap(e.h,"BaseURL"):Vt||[]},Yn=0,xt&&xt.length&&(Yn=_r(xt[0],"availabilityTimeOffset",Pc)||0),Kn=e.g.dash.ignoreMinBufferTime,Nr=0,Kn||(Nr=_r(t,"minBufferTime",$a)||0),e.G=_r(t,"minimumUpdatePeriod",$a,-1),fi=_r(t,"availabilityStartTime",Wf),Li=_r(t,"timeShiftBufferDepth",$a),ci=e.g.dash.ignoreSuggestedPresentationDelay,gi=null,ci||(gi=_r(t,"suggestedPresentationDelay",$a)),Gr=e.g.dash.ignoreMaxSegmentDuration,fo=null,Gr||(fo=_r(t,"maxSegmentDuration",$a)),Fo=t.attributes.type||"static",e.j)for(ai=e.j.presentationTimeline,zs=m(Object.values(e.m)),Yc=zs.next();!Yc.done;Yc=zs.next())Wc=Yc.value,Wc.segmentIndex&&Wc.segmentIndex.La(ai.qb());else Nd=e.g.defaultPresentationDelay||1.5*Nr,ll=gi!=null?gi:Nd,ai=new tr(fi,ll,e.g.dash.autoCorrectDrift);return ai.Ec(Fo=="static"),ai.R()&&!isNaN(e.g.availabilityWindowOverride)&&(Li=e.g.availabilityWindowOverride),Li==null&&(Li=1/0),ai.je(Li),Ys=t.attributes.profiles||"",cl={Eb:Fo!="static",presentationTimeline:ai,za:null,ha:null,ua:null,J:null,bandwidth:0,ig:!1,Qb:Yn,profiles:Ys.split(",")},Kl=jj(e,cl,qn,t),Md=Kl.duration,Dd=Kl.periods,Fo!="static"&&Kl.Xf||ai.Za(Md||1/0),e.C&&!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode()),e.s?ai.zg(e.C):e.C&&Ke("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),ai.hf(fo||1),x(Ss,e.l.Sf(Dd,cl.Eb),2);case 2:return x(Ss,ve,3);case 3:if(e.s&&(Nr=0,gy=gi!=null?gi:e.g.defaultPresentationDelay,ai.Bf(gy)),e.j){e.j.variants=e.l.j,Pd=e.l.Ve(),0<Pd.length&&(e.j.textStreams=Pd),e.j.imageStreams=e.l.i,e.i.filter(e.j),Ss.u(4);break}if(e.j={presentationTimeline:ai,variants:e.l.j,textStreams:e.l.Ve(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:Nr||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Bj(t)},!ai.Kg()){Ss.u(5);break}return Kp=Wr(t,"UTCTiming"),x(Ss,Yj(e,qn,Kp),6);case 6:if(my=Ss.h,!e.i)return Ss.return();ai.Ag(my);case 5:ai.Xd();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),X(Ss)}})}function Bj(e){var t=la(e,"ServiceDescription");return t?(e=la(t,"Latency"),t=la(t,"PlaybackRate"),e&&e.attributes.max||t?{maxLatency:e&&e.attributes.max?parseInt(e.attributes.max,10)/1e3:null,maxPlaybackRate:t?parseFloat(t.attributes.max):null,minLatency:e&&e.attributes.min?parseInt(e.attributes.min,10)/1e3:null,minPlaybackRate:t?parseFloat(t.attributes.min):null}:null):null}function jj(e,t,n,r){var u=_r(r,"mediaPresentationDuration",$a),c=[],f=0;r=Wr(r,"Period");for(var h=0;h<r.length;h++){var E=r[h],S=r[h+1],k=_r(E,"start",$a,f),G=E.attributes.id,te=_r(E,"duration",$a),z=null;if(S){var ve=_r(S,"start",$a);ve!=null&&(z=ve-k)}else u!=null&&(z=u-k);if(z==null&&(z=te),!(e.B!==null&&G!==null&&k!==null&&k<e.B)||e.K.includes(G)||h+1==r.length){if(k!==null&&(e.B===null||k>e.B)&&(e.B=k),f=Zj(e,t,n,{start:k,duration:z,node:E,Ye:z==null||!S}),c.push(f),t.za.id&&z&&(e.L[t.za.id]=z),z==null){f=null;break}f=k+z}}return e.K=c.map(function(Le){return Le.id}),u!=null?{periods:c,duration:u,Xf:!1}:{periods:c,duration:f,Xf:!0}}function Zj(e,t,n,r){t.za=z_(e,r.node,null,n),t.ha=r,t.za.Qb=t.Qb,t.za.id||(t.za.id="__shaka_period_"+r.start);var u=Wr(r.node,"EventStream");n=t.presentationTimeline.qb(),u=m(u);for(var c=u.next();!c.done;c=u.next())Wj(e,r.start,r.duration,c.value,n);if(n=Wr(r.node,"AdaptationSet").map(function(k){return Gj(e,t,k)}).filter(Bu),t.Eb){for(r=[],u=m(n),c=u.next();!c.done;c=u.next()){c=m(c.value.ki);for(var f=c.next();!f.done;f=c.next())r.push(f.value)}if(r.length!=new Set(r).size)throw new gt(2,4,4018)}for(r=n.filter(function(k){return!k.If}),n=n.filter(function(k){return k.If}),n=m(n),u=n.next();!u.done;u=n.next()){u=u.value,c=u.If.split(" "),f=m(r);for(var h=f.next();!h.done;h=f.next()){var E=h.value;if(c.includes(E.id)){h={},E=m(E.streams);for(var S=E.next();!S.done;h={Cd:h.Cd},S=E.next())h.Cd=S.value,h.Cd.trickModeVideo=u.streams.find(function(k){return function(G){return Ia(k.Cd.codecs)==Ia(G.codecs)}}(h))}}}if(n=Ov(e.g.disableAudio,r,"audio"),u=Ov(e.g.disableVideo,r,"video"),c=Ov(e.g.disableText,r,vr),r=Ov(e.g.disableThumbnails,r,"image"),u.length===0&&n.length===0)throw new gt(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:u,textStreams:c,imageStreams:r}}function Ov(e,t,n){return e||!t.length?[]:t.reduce(function(r,u){return u.contentType!=n||r.push.apply(r,T(u.streams)),r},[])}function Gj(e,t,n){function r(_t){switch(_t){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ua=z_(e,n,t.za,null);var u=!1,c=Wr(n,"Role"),f=c.map(function(_t){return _t.attributes.value}).filter(Bu),h=void 0,E=t.ua.contentType==vr;E&&(h="subtitle"),c=m(c);for(var S=c.next();!S.done;S=c.next()){S=S.value;var k=S.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(S=S.attributes.value,S){case"main":u=!0;break;case"caption":case"subtitle":h=S}}var G;k=Wr(n,"EssentialProperty"),c=null;var te=!1;S=!1,k=m(k);for(var z=k.next();!z.done;z=k.next()){z=z.value;var ve=z.attributes.schemeIdUri;ve=="http://dashif.org/guidelines/trickmode"?c=z.attributes.value:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?G=r(parseInt(z.attributes.value,10)):ve!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&ve!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(ve=="urn:mpeg:dash:ssr:2023"?te=!0:S=!0)}var Le=null;for(k=Wr(n,"SupplementalProperty"),k=m(k),z=k.next();!z.done;z=k.next())z=z.value,ve=z.attributes.schemeIdUri,ve=="http://dashif.org/guidelines/last-segment-number"?Le=parseInt(z.attributes.value,10)-1:ve=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(G=r(parseInt(z.attributes.value,10)));k=Wr(n,"Accessibility");var De=new Map,qe;for(k=m(k),z=k.next();!z.done;z=k.next())if(ve=z.value,z=ve.attributes.schemeIdUri,ve=ve.attributes.value,z=="urn:scte:dash:cc:cea-608:2015")if(z=1,ve!=null){ve=ve.split(";");for(var Te=m(ve),Qe=Te.next();!Qe.done;Qe=Te.next()){var Ue=Qe.value,vt=Qe=void 0;Ue.includes("=")?(Ue=Ue.split("="),Qe=Ue[0].startsWith("CC")?Ue[0]:"CC"+Ue[0],vt=Ue[1]||"und"):(Qe="CC"+z,ve.length==2?z+=2:z++,vt=Ue),De.set(Qe,Cr(vt))}}else De.set("CC1","und");else if(z=="urn:scte:dash:cc:cea-708:2015")if(z=1,ve!=null)for(ve=m(ve.split(";")),Qe=ve.next();!Qe.done;Qe=ve.next())Qe=Qe.value,Ue=Te=void 0,Qe.includes("=")?(Qe=Qe.split("="),Te="svc"+Qe[0],Ue=Qe[1].split(",")[0].split(":").pop()):(Te="svc"+z,z++,Ue=Qe),De.set(Te,Cr(Ue));else De.set("svc1","und");else z=="urn:mpeg:dash:role:2011"?ve!=null&&(f.push(ve),ve=="captions"&&(h="caption")):z=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(ve=="1"?qe="visually impaired":ve=="2"&&(qe="hard of hearing"));if(S)return null;S=Wr(n,"ContentProtection");var xt=nN(S,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),Vt=Cr(t.ua.language||"und"),Bt=n.attributes.label;if((S=Wr(n,"Label"))&&S.length&&(S=Ci(S[0]))&&(Bt=S),S=Wr(n,"Representation"),n=S.map(function(_t){return(_t=qj(e,t,xt,h,Vt,Bt,u,f,De,_t,qe,Le))&&(_t.hdr=_t.hdr||G,_t.fastSwitching=te),_t}).filter(function(_t){return!!_t}),n.length==0){if(c=t.ua.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||E||c)return null;throw new gt(2,4,4003)}if(!t.ua.contentType||t.ua.contentType=="application")for(t.ua.contentType=CN(n[0].mimeType,n[0].codecs),E=m(n),z=E.next();!z.done;z=E.next())z.value.type=t.ua.contentType;for(E=t.ua.id||"__fake__"+e.I++,k=m(n),z=k.next();!z.done;z=k.next()){for(z=z.value,ve=m(xt.drmInfos),Te=ve.next();!Te.done;Te=ve.next())Te=Te.value,Te.keyIds=Te.keyIds&&z.keyIds?new Set([].concat(T(Te.keyIds),T(z.keyIds))):Te.keyIds||z.keyIds;e.g.dash.enableAudioGroups&&(z.groupId=E)}return S=S.map(function(_t){return _t.attributes.id}).filter(Bu),{id:E,contentType:t.ua.contentType,language:Vt,Dj:u,streams:n,drmInfos:xt.drmInfos,If:c,ki:S}}function qj(e,t,n,r,u,c,f,h,E,S,k,G){if(t.J=z_(e,S,t.ua,null),e.C=Math.min(e.C,t.J.Qb),!zj(t.J))return null;var te=t.ha.start;t.bandwidth=_r(S,"bandwidth",Us)||0;var z=t.J.contentType,ve=z==vr||z=="application";z=z=="image";try{var Le=void 0;if(n.xe){var De=t.J.nb,qe=co(De(),[n.xe.Rh]),Te=Oi(qe,e.g.retryParameters);Le={bitsKey:128,blockCipherMode:"CBC",iv:n.xe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var _t,Zt,ln;return Me(function(pn){if(pn.g==1)return x(pn,Y_(e,Te,6),2);if(pn.g!=3){if(_t=pn.h,!_t.data||_t.data.byteLength!=16)throw new gt(2,4,4049);return Zt={name:"AES-CBC"},ln=Le,x(pn,p.crypto.subtle.importKey("raw",_t.data,Zt,!0,["decrypt"]),3)}ln.cryptoKey=pn.h,Le.fetchKey=void 0,X(pn)})}}}if(De=function(_t,Zt,ln,pn){return $j(e,_t,Zt,ln,pn)},t.J.pd)var Qe=hj(t,De,Le);else if(t.J.Jb)Qe=gj(t,e.m,Le);else if(t.J.qd)Qe=Ej(t,De,e.m,!!e.j,e.g.dash.initialSegmentLimit,e.L,Le,G);else{var Ue=t.ha.duration||0,vt=t.J.nb;Qe={vc:function(){var _t=qE(te,Ue,vt());return _t.tc(function(Zt){Zt.mimeType=t.J.mimeType,Zt.codecs=t.J.codecs}),Promise.resolve(_t)}}}}catch(_t){if((ve||z)&&_t.code==4002)return null;throw _t}G=Wr(S,"ContentProtection"),G=X6(G,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),G=new Set(G?[G]:[]),De=!1,Wr(S,"SupplementalProperty").some(function(_t){return _t.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&_t.attributes.value=="JOC"})&&(De=!0),qe=!1,ve&&(qe=h.includes("forced_subtitle")||h.includes("forced-subtitle"));var xt;if(z&&((S=Wr(S,"EssentialProperty").find(function(_t){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(_t.attributes.schemeIdUri)}))&&(xt=S.attributes.value),!xt))return null;var Vt;S=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(S.includes("hvc1.2.4.L153.B0")||S.includes("hev1.2.4.L153.B0"))&&(Vt="PQ"),ve=t.J.id?t.za.id+","+t.J.id:"";var Bt=ve&&e.m[ve]?e.m[ve]:{id:e.I++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Bt.segmentIndex&&(Bt.segmentIndex.release(),Bt.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:S,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:G,language:u,originalLanguage:t.ua.language,label:c,type:t.ua.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:h,forced:qe,channelsCount:t.J.de,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:De,closedCaptions:E,hdr:Vt,videoLayout:void 0,tilesLayout:xt,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Si(t.J.mimeType,t.J.codecs)])};return Bt.createSegmentIndex=function(){var _t;return Me(function(Zt){if(Zt.g==1)return Bt.segmentIndex?Zt.u(0):(_t=Bt,x(Zt,Qe.vc(),3));_t.segmentIndex=Zt.h,X(Zt)})},ve&&t.Eb&&!e.m[ve]&&(e.m[ve]=Bt),Bt}function Hj(e){var t,n;Me(function(r){switch(r.g){case 1:return t=0,fe(r,2),x(r,K_(e),4);case 4:t=r.h,ge(r,3);break;case 2:if(n=Re(r),e.i){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),r.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return r.return();e.i.onManifestUpdated(),V_(e,t),X(r)}})}function V_(e,t){if(!(0>e.G)){var n=e.G;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.A.X(Math.max(n-t,q(e.H)))}}function z_(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,de:null,audioSamplingRate:null,Qb:0,xf:0},r=r||n.nb;var u=t.attributes.id,c=Wr(t,"BaseURL"),f,h=!1;if(e.h)for(var E=m(c),S=E.next();!S.done;S=E.next()){var k=S.value;S=k.attributes.serviceLocation,k=vu(k),S&&k&&(_d(e.h,u,S,k),h=!0)}h&&e.h||(f=c.map(vu)),E=t.attributes.contentType||n.contentType,S=t.attributes.mimeType||n.mimeType,k=t.attributes.codecs||n.codecs;var G=_r(t,"frameRate",Pm)||n.frameRate,te=t.attributes.sar||n.pixelAspectRatio,z=Kj(Wr(t,"InbandEventStream"),n.emsgSchemeIdUris),ve=Wr(t,"AudioChannelConfiguration");ve=Vj(ve)||n.de;var Le=_r(t,"audioSamplingRate",Ro)||n.audioSamplingRate;E||(E=CN(S,k));var De=la(t,"SegmentBase"),qe=la(t,"SegmentTemplate"),Te=De&&_r(De,"availabilityTimeOffset",Pc)||0,Qe=qe&&_r(qe,"availabilityTimeOffset",Pc)||0,Ue=c&&c.length&&_r(c[0],"availabilityTimeOffset",Pc)||0;return Te=n.Qb+Ue+Te+Qe,Qe=null,(Ue=la(t,"SegmentSequenceProperties"))&&(Ue=la(Ue,"SAP"))&&(Qe=_r(Ue,"cadence",Xu)),{nb:function(){return co(r(),c.length?e.h&&h?Ap(e.h,u):f||[]:[])},pd:De||n.pd,Jb:la(t,"SegmentList")||n.Jb,qd:qe||n.qd,width:_r(t,"width",Ro)||n.width,height:_r(t,"height",Ro)||n.height,contentType:E,mimeType:S,codecs:k,frameRate:G,pixelAspectRatio:te,emsgSchemeIdUris:z,id:u,language:t.attributes.lang,de:ve,audioSamplingRate:Le,Qb:Te,xf:Qe||n.xf}}function Kj(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function Vj(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function zj(e){var t=e.pd?1:0;return t+=e.Jb?1:0,t+=e.qd?1:0,t==0?e.contentType==vr||e.contentType=="application":(t!=1&&(e.pd&&(e.Jb=null),e.qd=null),!0)}function bN(e,t,n,r){var u,c,f,h,E,S,k;return Me(function(G){if(G.g==1)return u=[bo(n)],c=co(t(),u),f=Oi(c,e.g.retryParameters),f.method=r,h=e.i.networkingEngine.request(4,f),gu(e.F,h),x(G,h.promise,2);if(E=G.h,r=="HEAD"){if(!E.headers||!E.headers.date)return G.return(0);S=E.headers.date}else S=Vr(E.data);return k=Date.parse(S),isNaN(k)?G.return(0):G.return(k-Date.now())})}function Yj(e,t,n){var r,u,c,f,h,E,S,k;return Me(function(G){switch(G.g){case 1:r=n.map(function(te){return{scheme:te.attributes.schemeIdUri,value:te.attributes.value}}),u=e.g.dash.clockSyncUri,!r.length&&u&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),c=m(r),f=c.next();case 2:if(f.done){G.u(4);break}switch(h=f.value,fe(G,5),E=h.scheme,S=h.value,E){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return G.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return G.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return k=Date.parse(S),G.return(isNaN(k)?0:k-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ke("NTP UTCTiming scheme is not supported");break;default:Ke("Unrecognized scheme in UTCTiming element",E)}G.u(9);break;case 7:return x(G,bN(e,t,S,"HEAD"),10);case 10:return G.return(G.h);case 8:return x(G,bN(e,t,S,"GET"),11);case 11:return G.return(G.h);case 9:ge(G,3);break;case 5:Re(G);case 3:f=c.next(),G.u(2);break;case 4:return Ke("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),G.return(0)}})}function Wj(e,t,n,r,u){var c=r.attributes.schemeIdUri||"",f=r.attributes.value||"",h=_r(r,"timescale",Ro)||1;r=m(Wr(r,"Event"));for(var E=r.next();!E.done;E=r.next()){E=E.value;var S=_r(E,"presentationTime",Ro)||0,k=_r(E,"duration",Ro)||0;S=S/h+t,k=S+k/h,n!=null&&(S=Math.min(S,t+n),k=Math.min(k,t+n)),k<u||(E={schemeIdUri:c,value:f,startTime:S,endTime:k,id:E.attributes.id||"",eventElement:Xh(E),eventNode:E},e.i.onTimelineRegionAdded(E))}}function $j(e,t,n,r,u){var c,f,h,E;return Me(function(S){return S.g==1?(c=Wa,f=u?0:1,h=op(t,n,r,e.g.retryParameters),x(S,Y_(e,h,c,{type:f}),2)):(E=S.h,S.return(E.data))})}function CN(e,t){return t=Si(e,t),bl(t)?vr:e.split("/")[0]}function Y_(e,t,n,r){return t=e.i.networkingEngine.request(n,t,r),gu(e.F,t),t.promise}re("shaka.dash.DashParser",Pv),Fe["application/dash+xml"]=function(){return new Pv},Fe["video/vnd.mpeg.dash.mpd"]=function(){return new Pv};function Lv(){}re("shaka.dependencies",Lv),Lv.has=function(e){return W_.has(e)},Lv.add=function(e,t){if(!xN[e])throw Error(e+" is not supported");e==RN?dr("mux.js","mux.js is no longer used in Shaka Player."):W_.set(e,function(){return t})};var RN="muxjs",xN={Ej:RN,ISOBoxer:"ISOBoxer"};Lv.Allowed=xN;var W_=new Map([["ISOBoxer",function(){return p.ISOBoxer}]]);function NN(e,t,n){this.type=e,this.g=t,this.segments=n||null}function MN(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}MN.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function DN(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}function Np(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function zn(e,t,n){return(e=Np(e,t))?e.value:n||null}function ii(e,t){if(e=Np(e,t),!e)throw new gt(2,4,4023,t);return e.value}function PN(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.rb=n}function ON(e,t){this.name=e,this.value=t}function Vs(e,t){return e.filter(function(n){return n.name==t})}function LN(e,t){return e.filter(function(n){return ii(n,"TYPE")==t})}function xo(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Sd(e,t,n){return n=n===void 0?0:n,(e=xo(e,t))?Number(e.value):n}function Zl(e,t,n){return t?kN(e,[t],n):[]}function kN(e,t,n){if(!t.length)return[];t=co(e,t),e=[],t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=e,c=u.push,f=r.value;if((r=n)&&r.size){f=String(f).replace(/%7B/g,"{").replace(/%7D/g,"}");var h=f.match(/{\$\w*}/g);if(h){h=m(h);for(var E=h.next();!E.done;E=h.next()){E=E.value;var S=E.slice(2,E.length-1),k=r.get(S);if(k)f=f.replace(E,k);else throw new gt(2,4,4039,S)}}r=f}else r=f;c.call(u,r)}return e}function Hc(e){this.h=e||"",this.g=0}function wd(e){Gl(e,/[ \t]+/gm)}function Gl(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Kc(e){return e.g==e.h.length?null:(e=Gl(e,/[^ \t\n]*/gm))?e[0]:null}function Xj(){this.g=0}function $_(e,t){t=Vr(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new gt(2,4,4015);t=0;for(var r=!0,u=m(n),c=u.next();!c.done;c=u.next())if(c=c.value,/^#(?!EXT)/m.test(c)||r)r=!1;else if(c=X_(e,c),--e.g,FN.includes(c.name)){t=1;break}else c.name=="EXT-X-STREAM-INF"&&(r=!0);for(u=[],r=!0,c=0;c<n.length;c++){var f=n[c],h=n[c+1];if(/^#(?!EXT)/m.test(f)||r)r=!1;else{if(f=X_(e,f),Qj.includes(f.name)){if(t!=1)throw new gt(2,4,4017);f=n.splice(c,n.length-c),n=[],r=[],c=[],h=null,f=m(f);for(var E=f.next();!E.done;E=f.next())E=E.value,/^(#EXT)/.test(E)?(E=X_(e,E),FN.includes(E.name)?u.push(E):E.name=="EXT-X-MAP"?h=E:E.name=="EXT-X-PART"?c.push(E):E.name=="EXT-X-PRELOAD-HINT"?zn(E,"TYPE")=="PART"?c.push(E):zn(E,"TYPE")=="MAP"&&(E.name="EXT-X-MAP",h=E):r.push(E)):/^#(?!EXT)/m.test(E)||(E=E.trim(),h&&r.push(h),n.push(new PN(E,r,c)),r=[],c=[]);return c.length&&(h&&r.push(h),n.push(new PN("",r,c))),new NN(t,u,n)}u.push(f),f.name=="EXT-X-STREAM-INF"&&(f.attributes.push(new ON("URI",h)),r=!0)}}return new NN(t,u)}function X_(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new gt(2,4,4016,t);t=n[1];var r=n[2];n=[];var u;if(r){r=new Hc(r);var c;(c=Gl(r,/^([^,=]+)(?:,|$)/g))&&(u=c[1]);for(var f=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;c=Gl(r,f);)n.push(new ON(c[1],c[2]||c[3])),wd(r)}return new MN(e,t,n,u)}var FN="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),Qj="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function UN(){}function BN(e){try{var t=Q_(e);return Yu({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return pu(n)}}function Q_(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new gt(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new gt(2,1,1004,e);var n=t[0];e=p.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var u;return r?u=Ho(e):u=Va(e),{data:u,contentType:n}}re("shaka.net.DataUriPlugin",UN),UN.parse=BN,Ko("data",BN);function jN(e){var t=ba(e),n=t.split("/")[0];return e=Do(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Lf:null}}function Jj(e,t){function n(Te){return r(Te.name)}function r(Te){switch(Te=Te.toLowerCase(),Te){case"avc1":case"avc3":c.push(Te+".42E01E"),h=!0;break;case"hev1":case"hvc1":c.push(Te+".1.6.L93.90"),h=!0;break;case"dvh1":case"dvhe":c.push(Te+".05.04"),h=!0;break;case"vp09":c.push(Te+".00.10.08"),h=!0;break;case"av01":c.push(Te+".0.01M.08"),h=!0;break;case"mp4a":u.push("mp4a.40.2"),f=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":u.push(Te),f=!0}}var u=[],c=[],f=!1,h=!1,E=null,S=null,k=null,G=null,te=null,z=null,ve;if(new Fr().box("moov",yr).box("trak",yr).O("tkhd",function(Te){Te=Gt(Te.reader,Te.version),S=String(Te.height),k=String(Te.width)}).box("mdia",yr).O("mdhd",function(Te){E=bt(Te.reader,Te.version).language}).box("minf",yr).box("stbl",yr).O("stsd",mu).box("mp4a",function(Te){var Qe=Te.reader;Qe.skip(6),Qe.skip(2),Qe.skip(8);var Ue=Qe.ra();Qe.skip(2),Qe.skip(2),Qe.skip(2),Qe=Qe.ra()+Qe.ra()/65536,G=Ue,te=Qe,Te.reader.ka()?yr(Te):n(Te)}).box("esds",function(Te){Te=Te.reader;for(var Qe="mp4a",Ue,vt;Te.ka();){Ue=Te.P();for(var xt=Te.P();xt&128;)xt=Te.P();if(Ue==3)Te.ra(),xt=Te.P(),xt&128&&Te.ra(),xt&64&&Te.skip(Te.P()),xt&32&&Te.ra();else if(Ue==4)vt=Te.P(),Te.skip(12);else if(Ue==5)break}vt&&(Qe+="."+vn(vt),Ue==5&&Te.ka()&&(Ue=Te.P(),vt=(Ue&248)>>3,vt===31&&Te.ka()&&(vt=32+((Ue&7)<<3)+((Te.P()&224)>>5)),Qe+="."+vt)),u.push(Qe),f=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(Te){ve=Te.name,wi(Te)}).box("avc3",function(Te){ve=Te.name,wi(Te)}).box("hev1",function(Te){ve=Te.name,wi(Te)}).box("hvc1",function(Te){ve=Te.name,wi(Te)}).box("dva1",function(Te){ve=Te.name,wi(Te)}).box("dvav",function(Te){ve=Te.name,wi(Te)}).box("dvh1",function(Te){ve=Te.name,wi(Te)}).box("dvhe",function(Te){ve=Te.name,wi(Te)}).box("vp09",function(Te){ve=Te.name,wi(Te)}).box("av01",function(Te){ve=Te.name,wi(Te)}).box("avcC",function(Te){var Qe=ve||"";switch(ve){case"dvav":Qe="avc3";break;case"dva1":Qe="avc1"}Te=Te.reader,Te.skip(1),Te=Qe+"."+vn(Te.P())+vn(Te.P())+vn(Te.P()),c.push(Te),h=!0}).box("hvcC",function(Te){var Qe=ve||"";switch(ve){case"dvh1":Qe="hvc1";break;case"dvhe":Qe="hev1"}var Ue=Te.reader;Ue.skip(1),Te=Ue.P();var vt=["","A","B","C"][Te>>6],xt=Te&31,Vt=Ue.M(),Bt=(Te&32)>>5?"H":"L";Te=[Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P(),Ue.P()],Ue=Ue.P();for(var _t=0,Zt=0;32>Zt&&(_t|=Vt&1,Zt!=31);Zt++)_t<<=1,Vt>>=1;for(Qe=Qe+("."+vt+xt)+("."+vn(_t,!0)),Qe+="."+Bt+Ue,vt="",xt=Te.length;xt--;)((Bt=Te[xt])||vt)&&(vt="."+Bt.toString(16).toUpperCase()+vt);Qe+=vt,c.push(Qe),h=!0}).box("dvcC",function(Te){var Qe=ve||"";switch(ve){case"hvc1":Qe="dvh1";break;case"hev1":Qe="dvhe";break;case"avc1":Qe="dva1";break;case"avc3":Qe="dvav"}var Ue=Te.reader;Ue.skip(2),Te=Ue.P(),Ue=Ue.P(),c.push(Qe+"."+Pn(Te>>1&127)+"."+Pn(Te<<5&32|Ue>>3&31)),h=!0}).O("vpcC",function(Te){var Qe=ve||"",Ue=Te.reader;Te=Ue.P();var vt=Ue.P();Ue=Ue.P()>>4&15,c.push(Qe+"."+Pn(Te)+"."+Pn(vt)+"."+Pn(Ue)),h=!0}).box("av1C",function(Te){var Qe=ve||"",Ue=Te.reader;Ue.skip(1),Te=Ue.P(),Ue=Ue.P();var vt=Te>>>5,xt=(Ue&64)>>6;c.push(Qe+"."+vt+"."+Pn(Te&31)+(Ue>>>7?"H":"M")+"."+Pn(vt===2&&xt?(Ue&32)>>5?12:10:xt?10:8)+"."+((Ue&16)>>4)+"."+((Ue&8)>>3)+((Ue&4)>>2)+(Ue&3)+"."+Pn(1)+"."+Pn(1)+"."+Pn(1)+".0"),h=!0}).box("enca",Yh).box("encv",wi).box("sinf",yr).box("frma",function(Te){Te=un(Te.reader).Ea,r(Te)}).box("colr",function(Te){Te=Te.reader;var Qe=null,Ue=Te.sb(4),vt=String.fromCharCode(Ue[0]);if(vt+=String.fromCharCode(Ue[1]),vt+=String.fromCharCode(Ue[2]),vt+=String.fromCharCode(Ue[3]),vt==="nclx")switch(Te.ra(),Ue=Te.ra(),Te.ra(),Ue){case 1:case 6:case 13:case 14:case 15:Qe="SDR";break;case 16:Qe="PQ";break;case 18:Qe="HLG"}z=Qe}).parse(e||t,!0),!u.length&&!c.length)return null;var Le=f&&!h,De=new Map;if(h){var qe=new wt("video/mp4");for(e&&qe.init(e),qe.i(t),e=m(qe.j()),t=e.next();!t.done;t=e.next())t=t.value,De.set(t,t);qe.h()}return{type:Le?"audio":"video",mimeType:Le?"audio/mp4":"video/mp4",codecs:ZN(u.concat(c)).join(", "),language:E,height:S,width:k,channelCount:G,sampleRate:te,closedCaptions:De,Lf:z}}function ZN(e){var t=new Set,n=[];e=m(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var u=za(r);t.has(u)||(n.push(r),t.add(u))}return t=bh("audio",n),r=bh("video",n),e=bh(vr,n),r=e5(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function e5(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvh1.")||n.startsWith("dvhe.")});return t?Ot('video/mp4; codecs="'+t+"\"'")?[t]:e.filter(function(n){return n!=t}):e}function t5(e){var t=null;return new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",mu).box("encv",wi).box("enca",Yh).box("sinf",yr).box("schi",yr).O("tenc",function(n){n=n.reader,n.P(),n.P(),n.P(),n.P(),t=Ps(n.sb(16))}).parse(e,!0),t}function kv(){var e=this;this.g=this.i=null,this.A=1,this.o=new Map,this.H=new Map,this.K=new Map,this.K.set("video",new Map),this.K.set("audio",new Map),this.K.set(vr,new Map),this.K.set("image",new Map),this.Ia=new Set,this.h=new Map,this.l=null,this.aa="",this.Ga=new Xj,this.I=-1,this.T=1/0,this.ea=this.mb=!1,this.s=new pr(function(){S5(e)}),this.qa=Zv,this.C=null,this.Ha=0,this.m=1/0,this.ta=this.sa=this.L=0,this.N=new Ol,this.F=new Map,this.G=new Map,this.Y=new Map,this.ba=new Map,this.da=new Map,this.ia=new Map,this.pa=new Map,this.lb=this.B=!1,this.bb=new M(5),this.j=null}g=kv.prototype,g.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},g.start=function(e,t){var n=this,r;return Me(function(u){return u.g==1?(n.i=t,n.B=t.isLowLatencyMode(),x(u,a1(n,[e]),2)):u.g!=3?(r=u.h,n.aa=r.uri,x(u,i5(n,r.data,e),3)):u.return(n.C)})},g.stop=function(){this.s&&(this.s.stop(),this.s=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.Ia.clear(),this.C=null,this.h.clear(),this.H.clear(),this.G.clear(),this.o.clear(),this.Y.clear(),this.ba.clear(),this.da.clear(),this.ia.clear(),this.pa.clear(),this.j&&this.j.destroy(),Promise.all(e)},g.update=function(){var e=this,t,n,r,u,c,f,h,E,S;return Me(function(k){if(k.g==1){if(!xa(e))return k.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,r=n.filter(function(G){return G.stream.segmentIndex}),u=m(r),c=u.next();!c.done;c=u.next())f=c.value,t.push(n5(e,f));return x(k,Promise.all(t),2)}QN(e,r.map(function(G){return G.stream})),h=r.some(function(G){return G.fd==0}),r.length&&!h&&(E=w5,Bv(e,E.Pg),S=r.map(function(G){return G.yb}),e.l.Za(Math.min.apply(Math,T(S))),e.i.updateDuration()),h&&e1(e),X(k)})};function J_(e,t){return xa(e)?e.K.get(t.type):t.$d}function n5(e,t){var n,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return Me(function(qn){if(qn.g==1){for(n=[],r=m(t.$()),u=r.next();!u.done;u=r.next())c=u.value,f=new si(c),h=f.g,t.Gd&&(0<=t.gb&&h.add("_HLS_msn",String(t.gb)),0<=t.hb&&h.add("_HLS_part",String(t.hb))),t.Hd&&h.add("_HLS_skip","YES"),ra(h)&&hr(f,h),n.push(f.toString());return x(qn,a1(e,n,!0),2)}if(qn.g!=3){if(E=qn.h,!t.stream.segmentIndex)return qn.return();if(S=$_(e.Ga,E.data),S.type!=1)throw new gt(2,4,4017);return k=E.uri,k==E.originalUri||t.$().includes(k)||t.tg.push(k),G=Vs(S.g,"EXT-X-DEFINE"),te=KN(e,G,k),z=t.stream,ve=J_(e,t),x(qn,nM(e,S,z.mimeType,t.$,te),3)}Le=qn.h,De=Le.keyIds,qe=Le.drmInfos,Te=function(Yn,Kn){return Yn.size===Kn.size&&[].concat(T(Yn)).every(function(Nr){return Kn.has(Nr)})},Te(z.keyIds,De)||(z.keyIds=De,z.drmInfos=qe,e.i.newDrmInfo(z)),Qe=aM(e,S,z,ve,te,t.$,t.type),Ue=Qe.segments,(vt=Qe.bandwidth)&&(z.bandwidth=vt),z.segmentIndex.kd(Ue,e.l.qb()),Ue.length&&(xt=Sd(S.g,"EXT-X-MEDIA-SEQUENCE",0),Bt=(Vt=xo(S.g,"EXT-X-SKIP"))?Number(zn(Vt,"SKIPPED-SEGMENTS")):0,_t=eM(xt,Ue),Zt=_t.gb,ln=_t.hb,t.gb=Zt+Bt,t.hb=ln,pn=ve.get(xt),z.segmentIndex.La(pn)),Ln=Ue[0],t.fc=Ln.startTime,Mn=Ue[Ue.length-1],t.yb=Mn.endTime,xo(S.g,"EXT-X-ENDLIST")&&(t.fd=!0),n1(e,S),X(qn)})}g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(e){this.j&&this.j.banLocation(e)};function GN(e,t){for(var n=e.I==-1,r=m(t),u=r.next();!u.done;u=r.next()){u=u.value;var c=u.stream.segmentIndex,f=J_(e,u);if(c=c.g[0]||null){f=m(f);for(var h=f.next();!h.done;h=f.next()){h=m(h.value);var E=h.next().value;if(h.next().value==c.startTime){n&&(e.I=Math.max(e.I,E)),u.De=E;break}}}}if(!(0>e.I))for(t=m(t),u=t.next();!u.done;u=t.next())n=u.value,Uv(e,n.type)&&(r=n.stream.segmentIndex)&&(u=e.I-n.De,0<u&&(r.g.splice(0,u),r=r.g[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),qN(e,n,r)))}function r5(e,t){if(e.T==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value.stream.segmentIndex.g[0]||null;r!=null&&r.h!=null&&(e.T=Math.min(e.T,r.h))}}if(t=e.T,t!=1/0){for(r=m(e.h.values()),n=r.next();!n.done;n=r.next())if(n=n.value,!Uv(e,n.type)){var u=n.stream.segmentIndex;if(u!=null){var c=u.g[0]||null;if(c.h==null)de("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.$(),"Expect AV sync issues!");else for(qN(e,n,c.h-t-c.startTime),n=m(u),u=n.next();!u.done;u=n.next())u.value.Ff(t)}}}}function qN(e,t,n){t.fc+=n,t.yb+=n,e=J_(e,t);for(var r=m(e),u=r.next();!u.done;u=r.next()){var c=m(u.value);u=c.next().value,c=c.next().value,e.set(u,c+n)}t.$()}function i5(e,t,n){var r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi;return Me(function(Gr){switch(Gr.g){case 1:return r=$_(e.Ga,t),u=Vs(r.g,"EXT-X-DEFINE"),c=[],f=[],h=[],E=function(){return[n]},r.type==1?x(Gr,HN(e,r,E),7):(o5(e,u),S=Vs(r.g,"EXT-X-MEDIA"),k=Vs(r.g,"EXT-X-STREAM-INF"),G=Vs(r.g,"EXT-X-IMAGE-STREAM-INF"),te=Vs(r.g,"EXT-X-I-FRAME-STREAM-INF"),z=Vs(r.g,"EXT-X-SESSION-KEY"),ve=Vs(r.g,"EXT-X-SESSION-DATA"),Le=Vs(r.g,"EXT-X-CONTENT-STEERING"),s5(e,ve),x(Gr,u5(e,Le),4));case 4:return a5(e,k),g5(e,S),x(Gr,d5(e,k,z,S,E,e.o),5);case 5:return c=Gr.h,f=l5(e,S),x(Gr,c5(e,G,te),6);case 6:h=Gr.h,Gr.u(3);break;case 7:return De=Gr.h,qe=De.type,Te=De.mimeType,Qe=De.codecs,Ue=De.language,vt=De.height,xt=De.width,Vt=De.channelCount,Bt=De.sampleRate,_t=De.closedCaptions,Zt=De.Lf,x(Gr,JN(e,e.A++,r,E,n,Qe,qe,Ue,!0,"Media Playlist",Vt,_t,null,!1,Bt,!1,Te),8);case 8:ln=Gr.h,e.h.set(n,ln),qe=="video"&&sM(ln.stream,xt,vt,null,Zt,null),c.push({id:0,language:Cr(Ue||"und"),disabledUntilTime:0,primary:!0,audio:qe=="audio"?ln.stream:null,video:qe=="video"?ln.stream:null,bandwidth:ln.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new gt(2,7,7001);if(e.l=new tr(null,0),e.l.Ec(!0),r.type==1&&(xa(e)&&(iM(e,r),pn=e.m,e.s.X(pn)),Ln=Array.from(e.h.values()),t1(e,Ln),e1(e)),e.C={presentationTimeline:e.l,variants:c,textStreams:f,imageStreams:h,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.ea||!e.g.hls.disableCodecGuessing){Gr.u(9);break}for(Mn=[],qn=m(e.C.variants),Yn=qn.next();!Yn.done;Yn=qn.next())Kn=Yn.value,Kn.audio&&Kn.audio.codecs===""&&Mn.push(Kn.audio.createSegmentIndex()),Kn.video&&Kn.video.codecs===""&&Mn.push(Kn.video.createSegmentIndex());return x(Gr,Promise.all(Mn),9);case 9:if(e.i.makeTextStreamsForClosedCaptions(e.C),c.length==1){for(Nr=[],fi=c[0],Li=m([fi.video,fi.audio]),ci=Li.next();!ci.done;ci=Li.next())(gi=ci.value)&&!gi.segmentIndex&&Nr.push(gi.createSegmentIndex());if(0<Nr.length)return x(Gr,Promise.all(Nr),0)}Gr.u(0)}})}function HN(e,t,n){var r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue;return Me(function(vt){switch(vt.g){case 1:if(r=jN(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return vt.return(r);if(u=Math.trunc((t.segments.length-1)/2),c=t.segments[u],f=Zl(n(),t.segments[0].h),h=f[0],E=new si(h),S=E.Pa.split(".").pop(),k=lM[S])return vt.return(jN(k));if(G=Wa,te=null,z=r1(e,t,c.g,n),e.Y.clear(),!z){vt.u(2);break}return ve=op(z.$(),z.ac(),z.Yb(),e.g.retryParameters),x(vt,ql(e,ve,G,{type:0}),3);case 3:Le=vt.h,te=Le.data;case 2:return De=Oi(f,e.g.retryParameters),x(vt,ql(e,De,G,{type:1}),4);case 4:if(qe=vt.h,(Te=qe.headers["content-type"])&&(Te=Te.split(";")[0].toLowerCase()),S=="ts"||Te=="video/mp2t"){var xt=qe.data,Vt=Qn(xt);Vt=new Ve().parse(Vt);var Bt=Vt.bd();Vt=Vt.We();var _t=[],Zt=!1,ln=!1;switch(Bt.audio){case"aac":case"aac-loas":_t.push("mp4a.40.2"),Zt=!0;break;case"mp3":_t.push("mp4a.40.34"),Zt=!0;break;case"ac3":_t.push("ac-3"),Zt=!0;break;case"ec3":_t.push("ec-3"),Zt=!0;break;case"opus":_t.push("opus"),Zt=!0}switch(Bt.video){case"avc":Vt.Ea?_t.push(Vt.Ea):_t.push("avc1.42E01E"),ln=!0;break;case"hvc":Vt.Ea?_t.push(Vt.Ea):_t.push("hvc1.1.6.L93.90"),ln=!0;break;case"av1":_t.push("av01.0.01M.08"),ln=!0}if(_t.length){if(Bt=Zt&&!ln,Zt=new Map,ln){ln=new wt("video/mp2t"),ln.i(xt),xt=m(ln.j());for(var pn=xt.next();!pn.done;pn=xt.next())pn=pn.value,Zt.set(pn,pn);ln.h()}Vt={type:Bt?"audio":"video",mimeType:"video/mp2t",codecs:_t.join(", "),language:null,height:Vt.height,width:Vt.width,channelCount:null,sampleRate:null,closedCaptions:Zt,Lf:null}}else Vt=null;if(Qe=Vt)return vt.return(Qe)}else if((S=="mp4"||S=="cmfv"||S=="m4s"||Te=="video/mp4"||Te=="audio/mp4"||Te=="video/iso.segment")&&(Ue=Jj(te,qe.data)))return vt.return(Ue);return vt.return(r)}})}function e1(e){if(xa(e)){if(e.qa==Gv){for(var t,n=t=1/0,r=m(e.h.values()),u=r.next();!u.done;u=r.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&(t=Math.min(t,u.yb),n=Math.min(n,u.fc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.je(t)}}else e.l.Za(XN(e));if(!e.l.o)for(t=m(e.h.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.Bg(n.h);e.l.Xd()}function o5(e,t){var n=new si(e.aa).g;t=m(t);for(var r=t.next();!r.done;r=t.next()){var u=r.value;r=zn(u,"NAME");var c=zn(u,"VALUE");u=zn(u,"QUERYPARAM"),r&&c&&(e.o.has(r)||e.o.set(r,c)),u&&(r=n.get(u)[0])&&!e.o.has(r)&&e.o.set(u,r)}}function KN(e,t,n){n=new si(n).g;var r=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var c=u.value,f=zn(c,"NAME"),h=zn(c,"VALUE");u=zn(c,"QUERYPARAM"),c=zn(c,"IMPORT"),f&&h&&(r.has(f)||r.set(f,h)),u&&(f=n.get(u)[0])&&!r.has(f)&&r.set(u,f),c&&(u=e.o.get(c))&&r.set(c,u)}return r}function a5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"AUDIO");n=zn(r,"VIDEO");var c=zn(r,"SUBTITLES");if(r=VN(e,r),c){var f=Co(vr,r);e.G.set(c,f),mn(r,f)}u&&(c=Co("audio",r),c||(c=e.g.hls.defaultAudioCodec),e.G.set(u,c)),n&&(u=Co("video",r),u||(u=e.g.hls.defaultVideoCodec),e.G.set(n,u))}}function s5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"DATA-ID");n=zn(r,"URI");var c=zn(r,"LANGUAGE");r=zn(r,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",Zl([e.aa],n,e.o)[0]),c&&u.set("language",c),r&&u.set("value",r),n=new Wn("sessiondata",u),e.i&&e.i.onEvent(n)}}function u5(e,t){var n,r,u,c,f,h;return Me(function(E){if(!e.i||!e.g)return E.return();for(r=m(t),u=r.next();!u.done;u=r.next())if(c=u.value,f=zn(c,"PATHWAY-ID"),h=zn(c,"SERVER-URI"),f&&h){e.j=new Ed(e.i),e.j.configure(e.g),e.j.i=[e.aa],e.j.setManifestType("HLS"),e.j.h=f,n=wp(e.j,h);break}return x(E,n,0)})}function l5(e,t){var n=LN(t,"SUBTITLES");t=n.map(function(f){if(e.g.disableText)return null;try{return $N(e,[f],new Map).stream}catch(h){if(e.g.hls.ignoreTextStreamFailures)return null;throw h}}),n=m(n);for(var r=n.next();!r.done;r=n.next()){var u=ii(r.value,"GROUP-ID");if((r=e.G.get(u))&&(u=e.H.get(u))){u=m(u);for(var c=u.next();!c.done;c=u.next())c=c.value,c.stream.codecs=r,c.stream.mimeType=i1(vr,r)||o1(vr),Ad(c.stream)}}return t.filter(function(f){return f})}function Ad(e){e.fullMimeTypes=new Set([Si(e.mimeType,e.codecs)])}function c5(e,t,n){var r,u;return Me(function(c){return c.g==1?(r=t.map(function(f){var h,E;return Me(function(S){if(S.g==1)return e.g.disableThumbnails?S.return(null):(fe(S,2),x(S,m5(e,f),4));if(S.g!=2)return h=S.h,S.return(h.stream);if(E=Re(S),e.g.hls.ignoreImageStreamFailures)return S.return(null);throw E})}).concat(n.map(function(f){if(e.g.disableThumbnails)return null;try{var h=ii(f,"URI"),E=zn(f,"CODECS")||"";if(e.h.has(h))var S=e.h.get(h);else{var k=zn(f,"LANGUAGE"),G=zn(f,"NAME"),te=zn(f,"CHARACTERISTICS"),z=Fv(e,e.A++,[h],E,"image",k,!1,G,null,null,te,!1,null,!1),ve=zn(f,"RESOLUTION"),Le=m(ve?ve.split("x"):[null,null]),De=Le.next().value,qe=Le.next().value;z.stream.width=Number(De)||void 0,z.stream.height=Number(qe)||void 0;var Te=zn(f,"BANDWIDTH");Te&&(z.stream.bandwidth=Number(Te)),e.h.set(h,z),S=z}return f=S,f.stream.codecs!=="mjpg"?null:f.stream}catch(Qe){if(e.g.hls.ignoreImageStreamFailures)return null;throw Qe}})),x(c,Promise.all(r),2)):(u=c.h,c.return(u.filter(function(f){return f})))})}function f5(e,t,n){t=t.filter(function(h){var E=zn(h,"URI")||"";return zn(h,"TYPE")!="SUBTITLES"&&E!=""});var r={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c=DN(u);r[c]?r[c].push(u):r[c]=[u]}for(var f in r)$N(e,r[f],n)}function d5(e,t,n,r,u,c){var f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li;return Me(function(ci){switch(ci.g){case 1:if(f=[],h=new Set,!(0<n.length)){ci.u(2);break}E=m(n),S=E.next();case 3:if(S.done){ci.u(2);break}if(k=S.value,G=ii(k,"METHOD"),te=zn(k,"KEYFORMAT")||"identity",z=null,G=="NONE"||jv(G)){ci.u(4);break}if(te!="identity"){z=(ve=fM[te])?ve(k,""):null,ci.u(6);break}return x(ci,uM(e,k,"",u,null,c),8);case 8:z=ci.h;case 6:if(z){if(z.keyIds)for(Le=m(z.keyIds),De=Le.next();!De.done;De=Le.next())qe=De.value,h.add(qe);f.push(z)}case 4:S=E.next(),ci.u(3);break;case 2:for(Te={},Qe=m(t),Ue=Qe.next();!Ue.done;Ue=Qe.next())vt=Ue.value,xt=DN(vt),Te[xt]?Te[xt].push(vt):Te[xt]=[vt];Vt=[];for(Bt in Te)_t=Te[Bt],Zt=_t[0],ln=zn(Zt,"FRAME-RATE"),pn=Number(zn(Zt,"AVERAGE-BANDWIDTH"))||Number(ii(Zt,"BANDWIDTH")),Ln=zn(Zt,"RESOLUTION"),Mn=m(Ln?Ln.split("x"):[null,null]),qn=Mn.next().value,Yn=Mn.next().value,Kn=zn(Zt,"VIDEO-RANGE"),(Nr=zn(Zt,"REQ-VIDEO-LAYOUT"))&&Nr.includes(",")&&(fi=Nr.split(",").filter(function(gi){return gi=="CH-STEREO"||gi=="CH-MONO"}),Nr=fi[0]),Nr=Nr||"CH-MONO",Li=h5(e,_t,r,pn),Vt.push.apply(Vt,T(p5(e,Li.audio,Li.video,pn,qn,Yn,ln,Kn,Nr,f,h)));return ci.return(Vt.filter(function(gi){return gi!=null}))}})}function h5(e,t,n,r){for(var u={audio:[],video:[]},c=new Map,f=[],h=!1,E=!1,S=m(t),k=S.next();!k.done;k=S.next()){var G=k.value;k=zn(G,"AUDIO");var te=zn(G,"VIDEO"),z=k||te;z&&(f.includes(z)||f.push(z),(G=zn(G,"PATHWAY-ID"))&&c.set(z,G),k?h=!0:te&&(E=!0))}f.length&&n.length&&(S=n.filter(function(De){return f.includes(ii(De,"GROUP-ID"))}),f5(e,S,c)),S=(c=f.sort().join(","))&&e.H.has(c)?e.H.get(c):[],h?u.audio.push.apply(u.audio,T(S)):E&&u.video.push.apply(u.video,T(S)),k=!1;var ve=t.map(function(De){return ii(De,"URI")});if(E=u.audio.find(function(De){return De&&De.$().find(function(qe){return ve.includes(qe)})}),h=VN(e,t[0]),te=Co("video",h),(z=Co("audio",h))&&!te?(E="audio",k=0<u.audio.length):!u.audio.length&&!u.video.length&&z&&te?(E="video",h=[[te,z].join()]):u.audio.length&&E?(E="audio",k=!0):E=u.video.length&&!u.audio.length?"audio":"video",!k){var Le=G=z=te=k=null;!S.length&&(n=n.find(function(De){var qe=zn(De,"URI")||"",Te=zn(De,"TYPE");return De=ii(De,"GROUP-ID"),Te!="SUBTITLES"&&qe==""&&f.includes(De)}))&&(k=zn(n,"LANGUAGE"),te=zn(n,"NAME"),z=zN(n),WN(n),G=zn(n,"CHARACTERISTICS"),Le=YN(n)),e=v5(e,t,h,E,k,te,z,G,Le),c&&(e.stream.groupId=c),S.length||(e.stream.bandwidth=r),u[e.stream.type]=[e]}return u}function VN(e,t){var n=zn(t,"CODECS")||"";return t=zn(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,T(t))),ZN(e)}function zN(e){return(e=zn(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function YN(e){return(e=zn(e,"SAMPLE-RATE"))?parseInt(e,10):null}function WN(e){return(e=zn(e,"CHANNELS"))?e.includes("/JOC"):!1}function p5(e,t,n,r,u,c,f,h,E,S,k){for(var G=m(n),te=G.next();!te.done;te=G.next())sM(te.value.stream,u,c,f,h,E);for(u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u=[],t=m(t),c=t.next();!c.done;c=t.next())for(c=c.value,f=m(n),h=f.next();!h.done;h=f.next()){var z=h.value;(h=c?c.stream:null)&&(h.drmInfos=S,h.keyIds=k),(E=z?z.stream:null)&&(E.drmInfos=S,E.keyIds=k),G=c?c.stream.drmInfos:null,te=z?z.stream.drmInfos:null,z=z?z.$().sort().join(","):"";var ve=c?c.$().sort().join(","):"";z=z+" - "+ve,h&&E&&!ne(G,te)||e.Ia.has(z)||(h={id:e.A++,language:h?h.language:"und",disabledUntilTime:0,primary:!!h&&h.primary||!!E&&E.primary,audio:h,video:E,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(h),e.Ia.add(z))}return u}function g5(e,t){t=LN(t,"CLOSED-CAPTIONS"),t=m(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,u=zn(r,"LANGUAGE");n=Cr(u||"und"),u||(u=zn(r,"NAME"))&&(n=u),u=ii(r,"GROUP-ID"),r=ii(r,"INSTREAM-ID").replace("SERVICE","svc"),e.F.get(u)||e.F.set(u,new Map),e.F.get(u).set(r,n)}}function $N(e,t,n){for(var r=[],u=[],c=new Map,f=m(t),h=f.next();!h.done;h=f.next()){var E=h.value;h=ii(E,"URI"),E=ii(E,"GROUP-ID"),r.push(h),u.push(E),c.set(E,h)}if(f=u.sort().join(","),h=t[0],t="",E=ii(h,"TYPE").toLowerCase(),E=="subtitles"&&(E=vr),E==vr)t=zn(h,"CODECS")||"";else{u=m(u);for(var S=u.next();!S.done;S=u.next())if(S=S.value,e.G.has(S)){t=e.G.get(S);break}}if(u=r.sort().join(","),e.h.has(u))return e.h.get(u);if(S=e.A++,e.j){c=m(c);for(var k=c.next();!k.done;k=c.next()){var G=m(k.value);k=G.next().value,G=G.next().value,(k=n.get(k))&&_d(e.j,S,k,G)}}n=zn(h,"LANGUAGE"),c=zn(h,"NAME"),k=zn(h,"DEFAULT")=="YES",G=E=="audio"?zN(h):null;var te=E=="audio"?WN(h):!1,z=zn(h,"CHARACTERISTICS"),ve=zn(h,"FORCED")=="YES";return h=E=="audio"?YN(h):null,r=Fv(e,S,r,t,E,n,k,c,G,null,z,ve,h,te),r.stream&&(r.stream.groupId=f),e.H.has(f)?e.H.get(f).push(r):e.H.set(f,[r]),e.h.set(u,r),r}function m5(e,t){var n,r,u,c,f,h,E,S,k,G;return Me(function(te){return te.g==1?(n=ii(t,"URI"),r=zn(t,"CODECS","jpeg")||"",e.h.has(n)?te.return(e.h.get(n)):(u=zn(t,"LANGUAGE"),c=zn(t,"NAME"),f=zn(t,"CHARACTERISTICS"),h=Fv(e,e.A++,[n],r,"image",u,!1,c,null,null,f,!1,null,!1),(E=zn(t,"RESOLUTION"))?x(te,h.stream.createSegmentIndex(),3):te.u(2))):(te.g!=2&&(S=h.stream.segmentIndex.get(0),k=S.tilesLayout)&&(h.stream.width=Number(E.split("x")[0])*Number(k.split("x")[0]),h.stream.height=Number(E.split("x")[1])*Number(k.split("x")[1])),(G=zn(t,"BANDWIDTH"))&&(h.stream.bandwidth=Number(G)),e.h.set(n,h),te.return(h))})}function v5(e,t,n,r,u,c,f,h,E){for(var S=e.A++,k=[],G=m(t),te=G.next();!te.done;te=G.next()){var z=te.value;te=ii(z,"URI"),z=zn(z,"PATHWAY-ID"),e.j&&z&&_d(e.j,S,z,te),k.push(te)}if(G=k.sort().join(","),e.h.has(G))return e.h.get(G);e:{if(t=zn(t[0],"CLOSED-CAPTIONS"),r=="video"){if(t&&t!="NONE"){t=e.F.get(t);break e}if(!t&&e.F.size)for(t=m(e.F.keys()).next();!t.done;){t=e.F.get(t.value);break e}}t=null}return n=Fu(r,n),r=Fv(e,S,k,n,r,u,!1,c,f,t,h,!1,E,!1),e.h.set(G,r),r}function Fv(e,t,n,r,u,c,f,h,E,S,k,G,te,z){function ve(vt){var xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi;return Me(function(Gr){switch(Gr.g){case 1:return xt=Te.$(),x(Gr,a1(e,Te.$(),!0),2);case 2:if(Vt=Gr.h,vt.aborted)return Gr.return();if(Bt=Vt.uri,Bt==Vt.originalUri||xt.includes(Bt)||qe.push(Bt),_t=$_(e.Ga,Vt.data),Zt=void 0,e.ea||!e.g.hls.disableCodecGuessing){Gr.u(3);break}return x(Gr,HN(e,_t,Le),4);case 4:ln=Gr.h,Zt=ln.mimeType,r=ln.codecs;case 3:return pn=xa(e),x(Gr,JN(e,0,_t,Le,Bt,r,u,c,f,h,E,S,k,G,te,z,Zt),5);case 5:if(Ln=Gr.h,vt.aborted)return Gr.return();if(Mn=Ln.stream,xa(e)&&!pn&&iM(e,_t),Te.fc=Ln.fc,Te.yb=Ln.yb,Te.Hd=Ln.Hd,Te.Gd=Ln.Gd,Te.fd=Ln.fd,Te.$d=Ln.$d,Te.gb=Ln.gb,Te.hb=Ln.hb,Te.df=!0,De.segmentIndex=Mn.segmentIndex,De.encrypted=Mn.encrypted,De.drmInfos=Mn.drmInfos,De.keyIds=Mn.keyIds,De.mimeType=Mn.mimeType,De.bandwidth=De.bandwidth||Mn.bandwidth,De.codecs=De.codecs||Mn.codecs,Ad(De),De.drmInfos.length&&e.i.newDrmInfo(De),qn=yi,u==qn.fa||u==qn.S)for(Yn=m(e.h.values()),Kn=Yn.next();!Kn.done;Kn=Yn.next())Nr=Kn.value,Nr.df||Nr.type!=u||(Nr.stream.mimeType=Mn.mimeType,Ad(Nr.stream));u==qn.ma&&(fi=Mn.segmentIndex.get(0))&&fi.ca&&(De.mimeType="application/mp4",Ad(De)),y5(e)&&(e.mb?t1(e,[Te]):(e.mb=!0,Li=Array.from(e.h.values()),ci=Li.filter(function(fo){return fo.stream.segmentIndex}),t1(e,ci),e1(e),gi=e.m,0<gi&&e.s.X(gi))),X(Gr)}})}function Le(){return e.j&&1<n.length?Ap(e.j,t):qe.concat(kN([e.aa],n,e.o))}var De=tM(e,r,u,c,f,h,E,S,k,G,te,z),qe=[],Te={stream:De,type:u,tg:qe,$:Le,fc:0,yb:0,$d:new Map,Hd:!1,Gd:!1,fd:!1,De:-1,gb:-1,hb:-1,df:!1},Qe=null,Ue=new AbortController;return De.createSegmentIndex=function(){return Qe||(Ue=new AbortController,Qe=new Promise(function(vt){vt(ve(Ue.signal))}))},De.closeSegmentIndex=function(){Qe&&!De.segmentIndex&&Ue.abort(),De.segmentIndex&&(De.segmentIndex.release(),De.segmentIndex=null),Qe=null},Te}function XN(e){var t=1/0;e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.yb));return t}function QN(e,t){var n=[];t=m(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.tc(function(u){n.push(u)});e.l.ld(n)}function t1(e,t){if(!xa(e))for(var n=XN(e),r=m(t),u=r.next();!u.done;u=r.next())u.value.stream.segmentIndex.sc(0,n);QN(e,t.map(function(c){return c.stream})),e.g.hls.ignoreManifestProgramDateTime?GN(e,t):(r5(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&GN(e,t))}function Uv(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function y5(e){if(!e.C)return!1;var t=[],n=[];e=m(e.C.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function JN(e,t,n,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De){var qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn,Kn,Nr,fi,Li,ci,gi,Gr;return Me(function(fo){switch(fo.g){case 1:if(n.type!=1)throw new gt(2,4,4017);qe=Vs(n.g,"EXT-X-DEFINE"),Te=KN(e,qe,u);var Fo=xo(n.g,"EXT-X-PLAYLIST-TYPE"),ai=xo(n.g,"EXT-X-ENDLIST");if(ai=Fo&&Fo.value=="VOD"||ai,Fo=Fo&&Fo.value=="EVENT"&&!ai,Fo=!ai&&!Fo,ai?Bv(e,Zv):Fo?Bv(e,Gv):Bv(e,dM),xa(e)&&n1(e,n),De){fo.u(2);break}return x(fo,T5(e,f,c,n,Te,r),3);case 3:De=fo.h;case 2:return x(fo,nM(e,n,De,r,Te),4);case 4:if(Qe=fo.h,Ue=Qe.drmInfos,vt=Qe.keyIds,xt=Qe.encrypted,Vt=Qe.Tg,xt&&!Ue.length&&!Vt)throw new gt(2,4,4026);return Bt=tM(e,c,f,h,E,S,k,G,te,z,ve,Le),Bt.encrypted=xt,Bt.drmInfos=Ue,Bt.keyIds=vt,Bt.mimeType=De,Ad(Bt),_t=xa(e)?e.K.get(f):new Map,Zt=aM(e,n,Bt,_t,Te,r,f),ln=Zt.segments,(pn=Zt.bandwidth)&&(Bt.bandwidth=pn),xa(e)&&n1(e,n),Ln=ln[0].startTime,Mn=ln[ln.length-1],qn=Mn.endTime,Yn=new wr(ln),Bt.segmentIndex=Yn,Nr=(Kn=xo(n.g,"EXT-X-SERVER-CONTROL"))?Np(Kn,"CAN-SKIP-UNTIL")!=null:!1,fi=Kn?Np(Kn,"CAN-BLOCK-RELOAD")!=null:!1,Li=Sd(n.g,"EXT-X-MEDIA-SEQUENCE",0),ci=eM(Li,ln),gi=ci.gb,Gr=ci.hb,fo.return({stream:Bt,type:f,tg:[],$:r,fc:Ln,yb:qn,Hd:Nr,Gd:fi,fd:!1,De:-1,gb:gi,hb:Gr,$d:_t,df:!1})}})}function eM(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{gb:e,hb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{gb:e,hb:n}):(e++,t.m&&(n=0),{gb:e,hb:n})}function tM(e,t,n,r,u,c,f,h,E,S,k,G){var te=i1(n,t)||o1(n),z=[];if(E){E=m(E.split(","));for(var ve=E.next();!ve.done;ve=E.next())z.push(ve.value)}return E=void 0,ve=null,n==vr?E=z.includes("public.accessibility.transcribes-spoken-dialog")&&z.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":z.includes("public.accessibility.describes-video")&&(ve="visually impaired"),z.length||E!=="subtitle"||z.push("subtitle"),e={id:e.A++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:te,codecs:t,kind:n==vr?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Cr(r||"und"),originalLanguage:r,label:c,type:n,primary:u,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:z,forced:S,channelsCount:f,audioSamplingRate:k,spatialAudio:G,closedCaptions:h,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:ve,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Ad(e),e}function nM(e,t,n,r,u){var c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn,qn,Yn;return Me(function(Kn){switch(Kn.g){case 1:if(c=new Map,t.segments){for(f=m(t.segments),h=f.next();!h.done;h=f.next())if(E=h.value,S=Vs(E.g,"EXT-X-KEY"),k=null,S.length)for(k=r1(e,t,E.g,r,u),G=m(S),te=G.next();!te.done;te=G.next())z=te.value,c.set(z,k)}Le=ve=!1,De=[],qe=new Set,Te=m(c),Qe=Te.next();case 2:if(Qe.done){Kn.u(4);break}if(Ue=Qe.value,vt=m(Ue),xt=vt.next().value,Vt=vt.next().value,Bt=xt,_t=Vt,Zt=ii(Bt,"METHOD"),Zt=="NONE"){Kn.u(3);break}if(ve=!0,ln=zn(Bt,"KEYFORMAT")||"identity",pn=null,jv(Zt)){Le=!0,Kn.u(3);break}if(ln!="identity"){pn=(Ln=fM[ln])?Ln(Bt,n):null,Kn.u(6);break}return x(Kn,uM(e,Bt,n,r,_t,u),8);case 8:pn=Kn.h;case 6:if(pn){if(pn.keyIds)for(Mn=m(pn.keyIds),qn=Mn.next();!qn.done;qn=Mn.next())Yn=qn.value,qe.add(Yn);De.push(pn)}case 3:Qe=Te.next(),Kn.u(2);break;case 4:return Kn.return({drmInfos:De,keyIds:qe,encrypted:ve,Tg:Le})}})}function rM(e,t,n,r,u){if(!p.crypto||!p.crypto.subtle)throw Ke("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new gt(2,4,4042);var c=0,f=zn(t,"IV","");if(f){var h=du(f.substr(2));if(h.byteLength!=16)throw new gt(2,4,4048)}else c=Sd(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+c,!e.ba.has(n)){var E={bitsKey:128,blockCipherMode:"CBC",iv:h,firstMediaSequenceNumber:c};switch(ii(t,"METHOD")){case"AES-256":E.bitsKey=256;break;case"AES-256-CTR":E.bitsKey=256,E.blockCipherMode="CTR"}E.fetchKey=function(){var S,k,G,te,z,ve,Le;return Me(function(De){if(De.g==1)return S=Zl(r(),ii(t,"URI"),u),k=S.sort().join(""),e.da.has(k)||(G=Oi(S,e.g.retryParameters),te=ql(e,G,6),e.da.set(k,te)),x(De,e.da.get(k),2);if(De.g!=3){if(z=De.h,!z.data||z.data.byteLength!=E.bitsKey/8)throw new gt(2,4,4049);return ve={name:E.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:E.bitsKey},Le=E,x(De,p.crypto.subtle.importKey("raw",z.data,ve,!0,["decrypt"]),3)}Le.cryptoKey=De.h,E.fetchKey=void 0,X(De)})},e.ba.set(n,E)}return e.ba.get(n)}function n1(e,t){var n=1/0,r=t.segments;if(r.length)for(var u=r.length-1;0<=u;){var c=xo(r[u].g,"EXTINF");if(c){n=Number(c.value.split(",")[0]);break}u--}if(r=xo(t.g,"EXT-X-TARGETDURATION"),!r)throw new gt(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(u=xo(t.g,"EXT-X-PART-INF"))&&(e.L=Number(ii(u,"PART-TARGET"))),t=xo(t.g,"EXT-X-SERVER-CONTROL"),e.B&&e.L?(e.m=e.lb?5*e.L<=n?Math.min(e.L,e.m):Math.min(n,e.m):Math.min(e.L,e.m),e.ta=t?Number(ii(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?Np(t,"HOLD-BACK"):null,e.sa=n?Number(n.value):0),e.Ha=Math.max(r,e.Ha)}function iM(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ta)t=e.ta;else if(e.sa)t=e.sa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.Ha*n}e.l.Cg(0),e.l.Bf(t),e.l.Ec(!1)}function r1(e,t,n,r,u){var c=xo(n,"EXT-X-MAP");if(!c)return null;var f=ii(c,"URI"),h=Zl(r(),f,u);if(f=[h.toString(),zn(c,"BYTERANGE","")].join("-"),!e.Y.has(f)){var E=void 0,S=null;n=m(n);for(var k=n.next();!k.done;k=n.next())k=k.value,k.name=="EXT-X-KEY"?jv(ii(k,"METHOD"))&&k.id<c.id&&(E=rM(e,k,t,r,u)):k.name=="EXT-X-BYTERANGE"&&k.id<c.id&&(S=k);t=E5(h,c,S,E),e.Y.set(f,t)}return e.Y.get(f)}function E5(e,t,n,r){var u=0,c=null;return t=zn(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(u=t.split("@"),c=Number(u[0]),u=Number(u[1]),c=u+c-1,r&&(n=c+1-u,n%16&&(c+=16-n%16))),new ht(function(){return e},u,c,null,null,null,r)}function _5(e,t,n,r,u,c,f,h,E){var S=r.g,k=xo(S,"EXTINF"),G=0,te=0,z=null;r.rb.length&&!e.B&&Ke("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var ve=null;if(!e.g.hls.ignoreManifestProgramDateTime){var Le=xo(S,"EXT-X-PROGRAM-DATE-TIME");Le&&Le.value&&(ve=Wf(Le.value))}var De=jt;if(xo(S,"EXT-X-GAP")&&(De=2),!k){if(r.rb.length==0)throw new gt(2,4,4024,"EXTINF");if(!e.B)return null}var qe=[];Le=!1;var Te=null,Qe=!1,Ue=!1;if(e.B&&r.rb.length){G=(f.mimeType=="video/mp4"||f.mimeType=="audio/mp4")&&p.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var vt=ve,xt={},Vt=0;Vt<r.rb.length;xt={Qc:xt.Qc,yd:xt.yd},Vt++){var Bt=r.rb[Vt],_t=Vt==0?n:qe[qe.length-1],Zt=Vt==0?u:_t.endTime,ln=Number(zn(Bt,"DURATION"))||e.L;if(ln){var pn=Zt+ln,Ln=0,Mn=null;if(Bt.name=="EXT-X-PRELOAD-HINT"?(Ln=(Ln=zn(Bt,"BYTERANGE-START"))?Number(Ln):0,(_t=zn(Bt,"BYTERANGE-LENGTH"))?Mn=Ln+Number(_t)-1:Ln&&(Mn=Number.MAX_SAFE_INTEGER)):(Ln=zn(Bt,"BYTERANGE"),Mn=m(oM(_t,Ln)),Ln=Mn.next().value,Mn=Mn.next().value),xt.yd=zn(Bt,"URI"),xt.yd){_t=jt,zn(Bt,"GAP")=="YES"&&(_t=2,Qe=!0),xt.Qc=null;var qn=function(Kn){return function(){return Kn.Qc==null&&(Kn.Qc=Zl(h(),Kn.yd,c)),Kn.Qc}}(xt);G&&0<=Ln&&Mn!=null&&(Te=qn,Le=!0),Zt=new et(Zt,pn,qn,Ln,Mn,t,0,0,1/0,[],"",null,vt,_t,E),Bt.name=="EXT-X-PRELOAD-HINT"&&(Zt.ef(),Ue=!0),zn(Bt,"INDEPENDENT")!="YES"&&0<Vt&&Zt.Zd(),qe.push(Zt),vt&&(vt+=ln)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;G=u+k}else if(qe.length)G=qe[qe.length-1].endTime;else return null;Le&&(Qe||qe[0].Aa!=0?(Le=!1,Te=null):qe=[]),(k=xo(S,"EXT-X-BYTERANGE"))?(z=m(oM(n,k.value)),te=z.next().value,z=z.next().value):qe.length&&(te=qe[0].Aa,z=qe[qe.length-1].ja),n="",k=null,f.type=="image"&&(n="1x1",f=xo(S,"EXT-X-TILES"))&&(n=ii(f,"LAYOUT"),(f=zn(f,"DURATION"))&&(k=Number(f)));var Yn=null;return t=new et(u,G,function(){return Te?Te():(Yn==null&&(Yn=Zl(h(),r.h,c)),Yn||[])},te,z,t,0,0,1/0,qe,n,k,ve,De,E,0<qe.length&&!!r.h),Le&&(e.lb=!0,t.lg(),Ue&&t.ef()),t}function oM(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.ja+1,r=n+t-1),[n,r]}function aM(e,t,n,r,u,c,f){var h=t.segments,E=void 0,S=Sd(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),k=Sd(t.g,"EXT-X-MEDIA-SEQUENCE",0),G=xo(t.g,"EXT-X-SKIP"),te=G?Number(zn(G,"SKIPPED-SEGMENTS")):0,z=k+te,ve=0;xa(e)&&r.has(z)&&(ve=r.get(z)),ve===0&&e.qa==Gv&&0<r.size&&!r.has(z)&&(ve=e.l.qb());var Le=[],De=null;G=[];for(var qe=0;qe<h.length;qe++){var Te=h[qe],Qe=qe==0?ve:De.endTime;z=k+te+qe,xo(Te.g,"EXT-X-DISCONTINUITY")&&S++;for(var Ue=m(Te.g),vt=Ue.next();!vt.done;vt=Ue.next())vt=vt.value,vt.name=="EXT-X-KEY"&&(jv(ii(vt,"METHOD"))?E=rM(e,vt,t,c,u):E=void 0);r.set(z,Qe),Ue=r1(e,t,Te.g,c,u),!e.B&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.B=e.i.isLowLatencyMode()),(Qe=_5(e,Ue,De,Te,Qe,u,n,c,E))&&((De=Sd(Te.g,"EXT-X-BITRATE"))?G.push({bitrate:De,duration:Qe.endTime-Qe.startTime}):G.length&&(De=G.pop(),De.duration+=Qe.endTime-Qe.startTime,G.push(De)),De=Qe,Qe.j=S,Uv(e,f)&&e.I!=null&&z<e.I||Le.push(Qe))}if(t=void 0,G.length&&(t=G.reduce(function(xt,Vt){return xt+Vt.duration},0),t=Math.round(G.reduce(function(xt,Vt){return xt+Vt.bitrate*Vt.duration},0)/t*1e3)),G=Le.some(function(xt){return xt.h!=null})){for(n={},r=0;r<Le.length;n={Jc:n.Jc,Ic:n.Ic,td:n.td,Cb:n.Cb,Fc:n.Fc},r++)if(n.Cb=Le[r],n.Cb.h==null)for(n.Ic=0,n.Jc=r,u=function(xt){return function(){var Vt=Le[xt.Jc];if(Vt){if(Vt.h!=null)return Vt.h+xt.Ic;xt.Ic-=Vt.endTime-Vt.startTime,xt.Jc+=1}return null}}(n),n.Fc=0,n.td=r,c=function(xt){return function(){var Vt=Le[xt.td];if(Vt){if(Vt!=xt.Cb&&(xt.Fc+=Vt.endTime-Vt.startTime),Vt.h!=null)return Vt.h+xt.Fc;--xt.td}return null}}(n);n.Cb.h==null;)n.Cb.h=c(),n.Cb.h==null&&(n.Cb.h=u())}if(G)for(n=m(Le),r=n.next();!r.done;r=n.next())for(u=r.value,r=u.h,u=m(u.g),c=u.next();!c.done;c=u.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.T,G&&n!=1/0&&!Uv(e,f))for(e=m(Le),r=e.next();!r.done;r=e.next())r.value.Ff(n);return{segments:Le,bandwidth:t}}function i1(e,t){if(e==vr){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function o1(e){return e==vr?"text/vtt":cM[e].mp4}function T5(e,t,n,r,u,c){var f,h,E,S,k,G,te,z,ve,Le,De,qe,Te;return Me(function(Qe){switch(Qe.g){case 1:return f=Wa,h=Math.trunc((r.segments.length-1)/2),E=Zl(c(),r.segments[h].h,u),S=new si(E[0]),k=S.Pa.split(".").pop(),G=cM[t],(te=G[k])||(te=lM[k])||(te=i1(t,n))?Qe.return(te):(ve=1,Le=Oi(E,e.g.retryParameters),fe(Qe,2),Le.method="HEAD",x(Qe,ql(e,Le,f,{type:ve}),4));case 4:De=Qe.h,z=De.headers["content-type"],ge(Qe,3);break;case 2:if(qe=Re(Qe),!qe||qe.code!=1002&&qe.code!=1001){Qe.u(3);break}return Le.method="GET",x(Qe,ql(e,Le,f,{type:ve}),6);case 6:Te=Qe.h,z=Te.headers["content-type"];case 3:return z?Qe.return(z.split(";")[0]):Qe.return(o1(t))}})}function sM(e,t,n,r,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=u||void 0,e.videoLayout=c||void 0)}function a1(e,t,n){return ql(e,Oi(t,e.g.retryParameters),0,{type:n?2:3})}function S5(e){var t,n,r,u,c,f;Me(function(h){switch(h.g){case 1:return e.i?(fe(h,2),t=Date.now(),x(h,e.update(),4)):h.return();case 4:n=Date.now(),xa(e)&&(r=(n-t)/1e3,e.bb.sample(1,r),u=e.m,c=Math.max(0,u-q(e.bb)),e.s.X(c)),ge(h,3);break;case 2:if(f=Re(h),!e.i)return h.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(f),h.return();f.severity=1,e.i.onError(f),e.s.X(.1);case 3:if(!e.i)return h.return();e.i.onManifestUpdated(),X(h)}})}function xa(e){return e.qa!=Zv}function Bv(e,t){e.qa=t,e.l&&e.l.Ec(!xa(e)),xa(e)||e.s.stop()}function ql(e,t,n,r){if(!e.N)throw new gt(2,7,7001);return t=e.i.networkingEngine.request(n,t,r),gu(e.N,t),t.promise}function jv(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function uM(e,t,n,r,u,c){var f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue;return Me(function(vt){switch(vt.g){case 1:if(n=="video/mp2t")throw new gt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new gt(2,4,4041);if(f=ii(t,"METHOD"),h=["SAMPLE-AES","SAMPLE-AES-CTR"],!h.includes(f))return vt.return(null);if(E=Zl(r(),ii(t,"URI"),c),E[0].startsWith("data:text/plain;base64,")){S=Ps(Ho(E[0].split("data:text/plain;base64,").pop())),vt.u(2);break}return k=E.sort().join(""),e.ia.has(k)||(G=Oi(E,e.g.retryParameters),te=ql(e,G,6),e.ia.set(k,te)),x(vt,e.ia.get(k),3);case 3:z=vt.h,S=Ps(z.data);case 2:if(ve="00000000000000000000000000000000",!u){vt.u(4);break}if(e.pa.has(u)){Le=e.pa.get(u),vt.u(5);break}return De=op(u.$(),u.ac(),u.Yb(),e.g.retryParameters),qe=Wa,x(vt,ql(e,De,qe,{type:0}),6);case 6:Te=vt.h,Le=t5(Te.data),e.pa.set(u,Le);case 5:Le&&(ve=Le);case 4:return Qe=new Map,Qe.set(ve,S),Ue="cenc",f=="SAMPLE-AES"&&(Ue="cbcs"),vt.return(Ih(Qe,Ue))}})}re("shaka.hls.HlsParser",kv);var lM={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},cM={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},fM={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new gt(2,4,4040);if(p.shakaMediaKeysPolyfill)throw new gt(2,4,4041);return e=ii(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?(t="cenc",e=="SAMPLE-AES"&&(t="cbcs"),ku("com.apple.fps",t,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])):null},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=ii(e,"URI"),t=Q_(t),t=Qn(t.data),n=ku("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=zn(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=ii(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=ii(e,"URI"),e=Q_(e),e=Qn(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Vf(e,t,new Set,0),ku("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Zv="VOD",dM="EVENT",Gv="LIVE",w5={Pg:Zv,Pi:dM,Xi:Gv};Fe["application/x-mpegurl"]=function(){return new kv},Fe["application/vnd.apple.mpegurl"]=function(){return new kv};function A5(e){var t=0,n=tn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,u&1||u+e>n.byteLength){n=[];break e}var c=Qn(n,e,u);t.push({type:r,value:c}),e+=u}n=t}return n}function qv(e){if(e=hM(e))e:{e=m(Ca(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=la(t.value,"LA_URL")){e=Ci(t);break e}e=""}else e="";return e}function hM(e){return e=Ho(Ci(e)),e=A5(e).filter(function(t){return t.type===I5})[0],e?(e=Ha(e.value,!0),(e=Fl(e,"WRMHEADER"))?e:null):null}var I5=1,b5=new Map().set("com.microsoft.playready",qv).set("com.microsoft.playready.recommendation",qv).set("com.microsoft.playready.software",qv).set("com.microsoft.playready.hardware",qv);function Id(e){if(!vM){vM=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);Hv=mr("ftyp",t,r,t,n),t=mr("dref",F5),s1=mr("dinf",t)}this.g=e}function bd(e){for(var t=[],n=m(e.g),r=n.next();!r.done;r=n.next()){var u=t,c=u.push,f=r.value;r=mr;var h=f.id+1,E=f.stream.width||0,S=f.stream.height||0;f.type=="audio"&&(S=E=0);var k=f.duration*f.timescale,G=Math.floor(k/(Hl+1));switch(k=Math.floor(k%(Hl+1)),h=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(h,4)),[0,0,0,0],T(oi(G,4)),T(oi(k,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],T(oi(E,2)),[0,0],T(oi(S,2)),[0,0])),h=mr("tkhd",h),E=mr,G=f.duration*f.timescale,S=Math.floor(G/(Hl+1)),G=Math.floor(G%(Hl+1)),k=f.stream.language,k=k.charCodeAt(0)-96<<10|k.charCodeAt(1)-96<<5|k.charCodeAt(2)-96,S=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(f.timescale,4)),T(oi(S,4)),T(oi(G,4)),T(oi(k,2)),[0,0])),S=mr("mdhd",S),G=f,k=new Uint8Array([]),G.type){case"video":k=R5;break;case"audio":k=x5}G=mr("hdlr",k);e:{switch(f.type){case"video":f=mr("minf",mr("vmhd",O5),s1,pM(f));break e;case"audio":f=mr("minf",mr("smhd",L5),s1,pM(f));break e}f=new Uint8Array([])}f=E("mdia",S,G,f),r=r("trak",h,f),c.call(u,r)}for(t=li.apply(Pi,T(t)),c=e.g[0],n=mr,r=c.duration*c.timescale,u=Math.floor(r/(Hl+1)),r=Math.floor(r%(Hl+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(T(oi(c.timescale,4)),T(oi(u,4)),T(oi(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mr("mvhd",u),r=[],e=m(e.g),E=e.next();!E.done;E=e.next())f=r,h=f.push,E=new Uint8Array([0,0,0,0].concat(T(oi(E.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),E=mr("trex",E),h.call(f,E);if(e=li.apply(Pi,T(r)),e=mr("mvex",e),r=[],c.encrypted){for(c=m(c.stream.drmInfos),f=c.next();!f.done;f=c.next())if(f=f.value,f.initData)for(f=m(f.initData),h=f.next();!h.done;h=f.next())r.push(h.value.initData);c=li.apply(Pi,T(r))}else c=new Uint8Array([]);return e=n("moov",u,t,e,c),t=new Uint8Array(Hv.byteLength+e.byteLength),t.set(Hv),t.set(e,Hv.byteLength),t}function pM(e){var t=mr,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.oa.byteLength)var u=mr("avcC",e.oa);else{u=mr;for(var c=7,f=[],h=[],E=0,S=0,k=0,G=0;G<e.Sa.length;G++){var te=mM(e.Sa[G]);switch(te[0]&31){case 7:f.push(te),c+=te.length+2;break;case 8:h.push(te),c+=te.length+2}}for(0<f.length&&(E=f[0][1],k=f[0][2],S=f[0][3]),c=new Uint8Array(c),G=0,c[G++]=1,c[G++]=E,c[G++]=k,c[G++]=S,c[G++]=255,c[G++]=224|f.length,E=0;E<f.length;E++)c[G++]=(f[E].length&65280)>>8,c[G++]=f[E].length&255,c.set(f[E],G),G+=f[E].length;for(c[G++]=h.length,f=0;f<h.length;f++)c[G++]=(h[f].length&65280)>>8,c[G++]=h[f].length&255,c.set(h[f],G),G+=h[f].length;u=u("avcC",c)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(n,2)),T(oi(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",h=gM(e),f=new Uint8Array([]),e.encrypted&&(f=Cd(e),r="encv"),n=mr(r,n,u,h,f)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.oa.byteLength&&(n=mr("hvcC",e.oa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(T(oi(r,2)),T(oi(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",h=gM(e),f=new Uint8Array([]),e.encrypted&&(f=Cd(e),u="encv"),n=mr(u,r,n,h,f));break;case"audio":e.codecs.includes("mp3")?e=mr(".mp3",Mp(e)):e.codecs.includes("ac-3")?(n=mr("dac3",e.ga),r="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Cd(e),r="enca"),e=mr(r,Mp(e),n,u)):e.codecs.includes("ec-3")?(n=mr("dec3",e.ga),r="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Cd(e),r="enca"),e=mr(r,Mp(e),n,u)):e.codecs.includes("opus")?(n=mr("dOps",e.ga),r="Opus",u=new Uint8Array([]),e.encrypted&&(u=Cd(e),r="enca"),e=mr(r,Mp(e),n,u)):(0<e.ga.byteLength?n=mr("esds",e.ga):(n=mr,r=e.id+1,u=e.stream.channelsCount||2,f=e.stream.audioSamplingRate||44100,E=Fu("audio",e.codecs.split(",")),S={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h=S[f],(E==="mp4a.40.5"||E==="mp4a.40.29")&&(h=S[2*f]),f=parseInt(E.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(T(oi(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,f<<3|h>>>1,h<<7|u<<3,6,1,2])),n=n("esds",r)),r="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Cd(e),r="enca"),e=mr(r,Mp(e),n,u)),n=e}return e=mr("stsd",k5,n),t("stbl",e,mr("stts",N5),mr("stsc",M5),mr("stsz",P5),mr("stco",D5))}function gM(e){if(!e.xa&&!e.ya)return new Uint8Array([]);var t=e.ya;return e=new Uint8Array([].concat(T(oi(e.xa,4)),T(oi(t,4)))),mr("pasp",e)}function Mp(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(T(oi(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Cd(e){for(var t=mr,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,u=0;u<n.length;u+=1)r|=n.charCodeAt(u)<<8*(n.length-u-1);n=new Uint8Array([].concat(T(oi(r,4)))),n=mr("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=mr("schm",r),u=mr;var c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.stream.drmInfos);for(var f=e.next();!f.done;f=e.next())if((f=f.value)&&f.keyIds&&f.keyIds.size){f=m(f.keyIds);for(var h=f.next();!h.done;h=f.next())c=mM(h.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),c=mr("tenc",e,c),t("sinf",n,r,u("schi",c))}function Dp(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,u=r.apply,c=mr,f=new Uint8Array([0,0,0,0].concat(T(oi(n.data?n.data.jb:0,4))));f=mr("mfhd",f);var h,E=n.data?n.data.Ra:[],S=new Uint8Array(4+E.length);for(h=0;h<E.length;h++){var k=E[h].flags;S[h+4]=k.Ka<<4|k.Na<<2|k.Ma}E=mr("sdtp",S);var G=E.length+92;S=mr,h=new Uint8Array([0,0,0,58].concat(T(oi(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=mr("tfhd",h),k=n.data?n.data.baseMediaDecodeTime:0;var te=Math.floor(k%(Hl+1));k=new Uint8Array([1,0,0,0].concat(T(oi(Math.floor(k/(Hl+1)),4)),T(oi(te,4)))),k=mr("tfdt",k);var z=G;G=n.data?n.data.Ra:[],te=G.length;var ve=12+16*te,Le=new Uint8Array(ve);for(z+=8+ve,Le.set([n.type==="video"?1:0,0,15,1].concat(T(oi(te,4)),T(oi(z,4))),0),z=0;z<te;z++){var De=G[z];ve=oi(De.duration,4);var qe=oi(De.size,4),Te=De.flags;De=oi(De.Ta,4),Le.set([].concat(T(ve),T(qe),[Te.Va<<2|Te.Ka,Te.Na<<6|Te.Ma<<4|Te.Wa,Te.Ja&61440,Te.Ja&15],T(De)),12+16*z)}G=mr("trun",Le),E=S("traf",h,k,G,E),c=c("moof",f,E),u.call(r,t,[c,C5(n)])}return li.apply(Pi,T(t))}function C5(e){return e=(e.data?e.data.Ra:[]).map(function(t){return t.data}),e=li.apply(Pi,T(e)),mr("mdat",e)}function oi(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function mM(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function mr(e){var t=We.apply(1,arguments),n=yM[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],yM[e]=n);for(var r=8,u=t.length-1;0<=u;u--)r+=t[u].byteLength;for(u=new Uint8Array(r),u[0]=r>>24&255,u[1]=r>>16&255,u[2]=r>>8&255,u[3]=r&255,u.set(n,4),n=0,r=8;n<t.length;n++)u.set(t[n],r),r+=t[n].byteLength;return u}var vM=!1,Hl=Math.pow(2,32)-1,yM={},R5=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x5=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),N5=new Uint8Array([0,0,0,0,0,0,0,0]),M5=new Uint8Array([0,0,0,0,0,0,0,0]),D5=new Uint8Array([0,0,0,0,0,0,0,0]),P5=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),O5=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),L5=new Uint8Array([0,0,0,0,0,0,0,0]),k5=new Uint8Array([0,0,0,0,0,0,0,1]),Hv=new Uint8Array([]),F5=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s1=new Uint8Array([]);function u1(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new M(5),this.o=new pr(function(){U5(e)}),this.A=new Ol,this.m=new Map}g=u1.prototype,g.configure=function(e){this.g=e},g.start=function(e,t){var n=this;return Me(function(r){if(r.g==1)return n.l=[e],n.h=t,x(r,l1(n),2);if(!n.h)throw new gt(2,7,7001);return r.return(n.j)})};function U5(e){var t;Me(function(n){switch(n.g){case 1:return fe(n,2),x(n,l1(e),4);case 4:ge(n,3);break;case 2:t=Re(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();X(n)}})}g.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},g.update=function(){var e=this,t;return Me(function(n){if(n.g==1)return fe(n,2),x(n,l1(e),4);if(n.g!=2)return ge(n,0);if(t=Re(n),!e.h||!t)return n.return();e.h.onError(t),X(n)})},g.onExpirationUpdated=function(){},g.onInitialVariantChosen=function(){},g.banLocation=function(){};function l1(e){var t,n,r,u,c,f,h;return Me(function(E){if(E.g==1)return t=Oi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),u=n.request(0,t,{type:5}),gu(e.A,u),x(E,u.promise,2);if(c=E.h,!e.h)return E.return();c.uri&&!e.l.includes(c.uri)&&e.l.unshift(c.uri);var S=c.uri,k=c.data,G=e.g.mss.manifestPreprocessor;if(G!=Wm){if(dr("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),k=AN(k,"SmoothStreamingMedia"),!k)throw new gt(2,4,4046,S);G(k),k=Va(k.outerHTML)}var te=Wh(k,"SmoothStreamingMedia");if(!te)throw new gt(2,4,4046,S);if(S=e.g.mss.manifestPreprocessorTXml,S!=$m&&S(te),e.i||(e.i=new tr(null,0)),S=_r(te,"IsLive",$h,!1))throw new gt(2,4,4047);e.i.Ec(!S),G=_r(te,"TimeScale",Ro,1e7),k=_r(te,"DVRWindowLength",Ro),S&&(k===0||isNaN(k))&&(k=1/0);var z=_r(te,"CanSeek",$h,!1);k===0&&z&&(k=1/0),z=null,k&&0<k&&(z=k/G),S&&!isNaN(e.g.availabilityWindowOverride)&&(z=e.g.availabilityWindowOverride),z==null&&(z=1/0),e.i.je(z),k=_r(te,"Duration",Ro,1/0),S||e.i.Za(k/G),S={variants:[],textStreams:[],timescale:G,duration:k/G},z=Wr(te,"Protection");var ve;for(G=e.g.mss.keySystemsBySystemId,k=[],z=m(z),ve=z.next();!ve.done;ve=z.next())k=k.concat(Wr(ve.value,"ProtectionHeader"));if(k.length){for(z=[],ve=0;ve<k.length;ve++){var Le=k[ve],De=Le.attributes.SystemID.toLowerCase(),qe=G[De];if(qe){var Te=hM(Le);if(Te)e:{Te=m(Ca(Te,"DATA"));for(var Qe=Te.next();!Qe.done;Qe=Te.next())if(Qe=la(Qe.value,"KID")){Te=Ho(Ci(Qe)),Te=new Uint8Array([Te[3],Te[2],Te[1],Te[0],Te[5],Te[4],Te[7],Te[6]].concat(T(Te.slice(8)))),Te=Ps(Te);break e}Te=null}else Te=null;Qe=Ho(Ci(Le)),De=du(De.replace(/-/g,"")),De=[{initData:Vf(Qe,De,new Set,0),initDataType:"cenc",keyId:Te}],De=ku(qe,"cenc",De),Te&&De.keyIds.add(Te),(qe=b5.get(qe))&&(De.licenseServerUri=qe(Le)),z.push(De)}}G=z}else G=[];for(ve=G,z=[],G=[],k=[],te=Wr(te,"StreamIndex"),te=m(te),Le=te.next();!Le.done;Le=te.next()){Le=Le.value,qe=Wr(Le,"QualityLevel"),De=S.timescale,Te=S.duration,Qe=Wr(Le,"c");for(var Ue=[],vt=0,xt=0;xt<Qe.length;++xt){var Vt=Qe[xt],Bt=Qe[xt+1],_t=_r(Vt,"t",Ro),Zt=_r(Vt,"d",Ro);if(Vt=_r(Vt,"r",Xu),!Zt)break;if(_t=_t!=null?_t:vt,Vt=Vt||0,0>Vt)if(Bt){if(Bt=_r(Bt,"t",Ro),Bt==null)break;if(_t>=Bt)break;Vt=Math.ceil((Bt-_t)/Zt)-1}else{if(Te==1/0)break;if(_t/De>=Te)break;Vt=Math.ceil((Te*De-_t)/Zt)-1}for(Bt=0;Bt<=Vt;++Bt)vt=_t+Zt,Ue.push({start:_t/De,end:vt/De,Kf:_t}),_t=vt}for(De=Ue,qe=m(qe),Te=qe.next();!Te.done;Te=qe.next())(Te=B5(e,Le,Te.value,De,ve,S))&&(Te.type!="audio"||e.g.disableAudio?Te.type!="video"||e.g.disableVideo?Te.type!=vr||e.g.disableText||k.push(Te):G.push(Te):z.push(Te))}for(te=[],z=m(0<z.length?z:[null]),ve=z.next();!ve.done;ve=z.next())for(ve=ve.value,Le=m(0<G.length?G:[null]),Te=Le.next();!Te.done;Te=Le.next())qe=te,De=qe.push,Te=Te.value,Qe=0,ve&&ve.bandwidth&&0<ve.bandwidth&&(Qe+=ve.bandwidth),Te&&Te.bandwidth&&0<Te.bandwidth&&(Qe+=Te.bandwidth),Te={id:e.s++,language:ve?ve.language:"und",disabledUntilTime:0,primary:!!ve&&ve.primary||!!Te&&Te.primary,audio:ve,video:Te,bandwidth:Qe,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},De.call(qe,Te);S.variants=te,S.textStreams=k,e.j?(e.j.variants=S.variants,e.j.textStreams=S.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:S.variants,textStreams:S.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Xd()),Promise.resolve(),f=Date.now(),h=(f-r)/1e3,e.B.sample(1,h),X(E)})}function B5(e,t,n,r,u,c){var f=t.attributes.Type;if(f!=="audio"&&f!=="video"&&f!=="text")return Ke("Ignoring unrecognized type:",f),null;var h=t.attributes.Language,E=e.s++,S=_r(n,"Bitrate",Us),k=_r(n,"MaxWidth",Us),G=_r(n,"MaxHeight",Us),te=_r(n,"Channels",Us),z=_r(n,"SamplingRate",Us),ve=c.duration;r.length&&(ve=r[r.length-1].end-r[0].start);var Le=e.i.getDuration();e.i.Za(Math.min(ve,Le));var De={id:E,originalId:t.attributes.Name||String(E),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:S||0,width:k||void 0,height:G||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Cr(h||"und"),originalLanguage:h,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:te,audioSamplingRate:z,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:ve,timescale:c.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((u=t.attributes.Subtype)&&((u=K5[u])&&De.roles.push(u),u==="main"&&(De.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(f==="audio")u="AAC";else if(f==="video")return Ke('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!H5.includes(u.toUpperCase()))return Ke("Codec not supported:",u),null;switch(n=j5(n,f,u,De),De.mssPrivateData.codecPrivateData=n,f){case"audio":if(!n)return Ke("Quality unsupported without CodecPrivateData",f),null;De.type="audio",De.mimeType="mss/audio/mp4",De.codecs=Z5(u,n);break;case"video":if(!n)return Ke("Quality unsupported without CodecPrivateData",f),null;De.type="video",De.mimeType="mss/video/mp4",De.codecs=G5(n);break;case"text":De.type=vr,De.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(De.codecs="stpp")}return De.fullMimeTypes.add(Si(De.mimeType,De.codecs)),De.createSegmentIndex=function(){if(De.segmentIndex)return Promise.resolve();if(e.m.has(De.id))var qe=e.m.get(De.id);else qe=[],De.type=="video"&&(qe=De.mssPrivateData.codecPrivateData.split("00000001").slice(1)),qe={id:De.id,type:De.type,codecs:De.codecs,encrypted:De.encrypted,timescale:De.mssPrivateData.timescale,duration:De.mssPrivateData.duration,Sa:qe,ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:null,stream:De},qe=bd(new Id([qe])),e.m.set(De.id,qe);return qe=q5(e,new ht(function(){return[]},0,null,null,void 0,qe),De,t,r),De.segmentIndex=new wr(qe),Promise.resolve()},De.closeSegmentIndex=function(){De.segmentIndex&&(De.segmentIndex.release(),De.segmentIndex=null)},De}function j5(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function Z5(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function G5(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function q5(e,t,n,r,u){var c=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];var f={};u=m(u);for(var h=u.next();!h.done;f={Pc:f.Pc},h=u.next())f.Pc=h.value,r.push(new et(f.Pc.start,f.Pc.end,function(E){return function(){return co(e.l,[c.replace("{start time}",String(E.Pc.Kf))])}}(f),0,null,t,0,0,n.mssPrivateData.duration));return r}re("shaka.mss.MssParser",u1);var H5="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),K5={CAPT:"main",SUBT:"alternate",DESC:"main"};Fe["application/vnd.ms-sstr+xml"]=function(){return new u1};function EM(e,t,n,r,u,c){if(200<=n&&299>=n&&n!=202)return{uri:u||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};u=null;try{u=Ka(t)}catch(f){}throw new gt(n==401||n==403?2:1,1,1001,r,n,u,e,c)}function c1(){}function Kv(e,t,n,r,u){var c=new $5;Ll(t.headers).forEach(function(S,k){c.append(k,S)});var f=new Y5,h={Rf:!1,Jg:!1};if(e=V5(e,n,{body:t.body||void 0,headers:c,method:t.method,signal:f.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},h,r,u,t.streamDataCallback),e=new pi(e,function(){return h.Rf=!0,f.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var E=new pr(function(){h.Jg=!0,f.abort()});E.X(t/1e3),e.finally(function(){E.stop()})}return e}function V5(e,t,n,r,u,c,f){var h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe;return Me(function(Ue){switch(Ue.g){case 1:return h=z5,E=W5,te=G=0,z=Date.now(),fe(Ue,2),x(Ue,h(e,n),4);case 4:if(S=Ue.h,c(_M(S.headers)),n.method=="HEAD"){Ue.u(5);break}return ve=S.clone().body.getReader(),De=(Le=S.headers.get("Content-Length"))?parseInt(Le,10):0,qe=function(vt){function xt(){var Vt,Bt;return Me(function(_t){switch(_t.g){case 1:return fe(_t,2),x(_t,ve.read(),4);case 4:Vt=_t.h,ge(_t,3);break;case 2:return Re(_t),_t.return();case 3:if(Vt.done){_t.u(5);break}if(G+=Vt.value.byteLength,!f){_t.u(5);break}return x(_t,f(Vt.value),5);case 5:Bt=Date.now(),(100<Bt-z||Vt.done)&&(u(Bt-z,G-te,De-G),te=G,z=Bt),Vt.done?vt.close():(vt.enqueue(Vt.value),xt()),X(_t)}})}xt()},new E({start:qe}),x(Ue,S.arrayBuffer(),6);case 6:k=Ue.h;case 5:ge(Ue,3);break;case 2:throw Te=Re(Ue),r.Rf?new gt(1,1,7001,e,t):r.Jg?new gt(1,1,1003,e,t):new gt(1,1,1002,e,Te,t);case 3:return Qe=_M(S.headers),Ue.return(EM(Qe,k,S.status,e,S.url,t))}})}function _M(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function TM(){if(p.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(p.Response){if(!new Response("").body)return!1}else return!1;return!(!p.fetch||!p.AbortController)}re("shaka.net.HttpFetchPlugin",c1),c1.isSupported=TM,c1.parse=Kv;var z5=p.fetch,Y5=p.AbortController,W5=p.ReadableStream,$5=p.Headers;TM()&&(Ko("http",Kv,2,!0),Ko("https",Kv,2,!0),Ko("blob",Kv,2,!0));function SM(){}function Vv(e,t,n,r,u){var c=new X5,f=Date.now(),h=0,E=new Promise(function(S,k){c.open(t.method,e,!0),c.responseType="arraybuffer",c.timeout=t.retryParameters.timeout,c.withCredentials=t.allowCrossSiteCredentials,c.onabort=function(){k(new gt(1,1,7001,e,n))};var G=!1;c.onreadystatechange=function(){if(c.readyState==2&&!G){var z=wM(c);u(z),G=!0}},c.onload=function(){var z=wM(c),ve=c.response;try{var Le=EM(z,ve,c.status,e,c.responseURL,n);S(Le)}catch(De){k(De)}},c.onerror=function(z){k(new gt(1,1,1002,e,z,n))},c.ontimeout=function(){k(new gt(1,1,1003,e,n))},c.onprogress=function(z){var ve=Date.now();(100<ve-f||z.lengthComputable&&z.loaded==z.total)&&(r(ve-f,z.loaded-h,z.total-z.loaded),h=z.loaded,f=ve)};for(var te in t.headers)c.setRequestHeader(te.toLowerCase(),t.headers[te]);c.send(t.body)});return new pi(E,function(){return c.abort(),Promise.resolve()})}function wM(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={},t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}re("shaka.net.HttpXHRPlugin",SM),SM.parse=Vv;var X5=p.XMLHttpRequest;Ko("http",Vv,1,!0),Ko("https",Vv,1,!0),Ko("blob",Vv,1,!0);function AM(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function f1(e){return e.$().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Aa+":"+e.ja}function Q5(e,t){return op(e.g.$(),e.g.Aa,e.g.ja,t.streaming.retryParameters)}function IM(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function bM(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}IM.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function CM(e){var t=this;this.o=e,this.j=new Map,this.i=new Wu(function(){return d1(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new IM}CM.prototype.destroy=function(){return this.i.destroy()};function J5(e,t,n){e.m=t,e.l=n}function d1(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function eZ(e,t,n,r,u,c){jr(e.i);var f=(e.j.get(t)||Promise.resolve()).then(function(){var h,E,S,k,G,te,z;return Me(function(ve){if(ve.g==1)return x(ve,nZ(e,n),2);if(h=ve.h,e.i.g)throw new gt(2,9,7001);if(u)for(k in E=Qn(h),S=new Dm(E),S.data)G=Number(k),te=S.data[G],z=S.g[G],e.l(te,z);e.g.close(r,h.byteLength);var Le=e.g;return e.m(Le.i==0?0:Le.j/Le.i,e.g.h),ve.return(c(h))})});e.j.set(t,f)}function tZ(e){return Me(function(t){return t.g==1?x(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function nZ(e,t){var n,r,u,c;return Me(function(f){return f.g==1?(n=Wa,r=e.o.request(n,t),u=function(){return r.abort()},e.h.push(u),x(f,r.promise,2)):(c=f.h,mn(e.h,u),f.return(c.data))})}function zv(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Rr,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}zv.prototype.abort=function(){var e=this;return Me(function(t){if(t.g==1){try{e.i.abort()}catch(n){}return fe(t,2),x(t,e.g,4)}if(t.g!=2)return ge(t,0);Re(t),X(t)})};function h1(e,t){return new Promise(function(n,r){var u=e.h.openCursor();u.onerror=r,u.onsuccess=function(){var c;return Me(function(f){if(f.g==1)return u.result==null?(n(),f.return()):(c=u.result,x(f,t(c.key,c.value,c),2));c.continue(),X(f)})}})}zv.prototype.store=function(){return this.h},zv.prototype.promise=function(){return this.g};function p1(e){this.h=e,this.g=[]}p1.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Vc(e,t){return Yv(e,t,"readwrite")}function Yv(e,t,n){n=e.h.transaction([t],n);var r=new zv(n,t);return e.g.push(r),r.promise().then(function(){mn(e.g,r)},function(){mn(e.g,r)}),r}function zc(e,t,n){this.h=new p1(e),this.i=t,this.g=n}g=zc.prototype,g.destroy=function(){return this.h.destroy()},g.hasFixedKeySpace=function(){return!0},g.addSegments=function(){return RM(this.i)},g.removeSegments=function(e,t){return xM(this,this.i,e,t)},g.getSegments=function(e){var t=this,n;return Me(function(r){return r.g==1?x(r,NM(t,t.i,e),2):(n=r.h,r.return(n.map(function(u){return t.Tf(u)})))})},g.addManifests=function(){return RM(this.g)},g.updateManifest=function(){return Promise.reject(new gt(2,9,9016,"Cannot modify values in "+this.g))};function rZ(e,t,n){e=Vc(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}g.updateManifestExpiration=function(e,t){var n=Vc(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,r.put(u,e))},n.promise()},g.removeManifests=function(e,t){return xM(this,this.g,e,t)},g.getManifests=function(e){var t=this,n;return Me(function(r){return r.g==1?x(r,NM(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(u){return t.Yc(u)}))))})},g.getAllManifests=function(){var e=this,t,n;return Me(function(r){return r.g==1?(t=Yv(e.h,e.g,"readonly"),n=new Map,x(r,h1(t,function(u,c){var f;return Me(function(h){if(h.g==1)return x(h,e.Yc(c),2);f=h.h,n.set(u,f),X(h)})}),2)):r.g!=3?x(r,t.promise(),3):r.return(n)})},g.Tf=function(e){return e},g.Yc=function(e){return Promise.resolve(e)};function RM(e){return Promise.reject(new gt(2,9,9011,"Cannot add new value to "+e))}g.add=function(e,t){var n=this,r,u,c,f,h,E,S;return Me(function(k){if(k.g==1){for(r=Vc(n.h,e),u=r.store(),c=[],f={},h=m(t),E=h.next();!E.done;f={zd:f.zd},E=h.next())S=E.value,f.zd=u.add(S),f.zd.onsuccess=function(G){return function(){c.push(G.zd.result)}}(f);return x(k,r.promise(),2)}return k.return(c)})};function xM(e,t,n,r){e=Vc(e.h,t),t=e.store();var u={};n=m(n);for(var c=n.next();!c.done;u={xd:u.xd},c=n.next())u.xd=c.value,t.delete(u.xd).onsuccess=function(f){return function(){return r(f.xd)}}(u);return e.promise()}function NM(e,t,n){var r,u,c,f,h,E,S;return Me(function(k){if(k.g==1){for(r=Yv(e.h,t,"readonly"),u=r.store(),c={},f=[],h={},E=m(n),S=E.next();!S.done;h={Nc:h.Nc,Lc:h.Lc},S=E.next())h.Lc=S.value,h.Nc=u.get(h.Lc),h.Nc.onsuccess=function(G){return function(){G.Nc.result==null&&f.push(G.Lc),c[G.Lc]=G.Nc.result}}(h);return x(k,r.promise(),2)}if(f.length)throw new gt(2,9,9012,"Could not find values for "+f);return k.return(n.map(function(G){return c[G]}))})}function Pp(e){this.g=new p1(e)}Pp.prototype.destroy=function(){return this.g.destroy()},Pp.prototype.getAll=function(){var e=this,t,n;return Me(function(r){return r.g==1?(t=Yv(e.g,"session-ids","readonly"),n=[],x(r,h1(t,function(u,c){n.push(c)}),2)):r.g!=3?x(r,t.promise(),3):r.return(n)})},Pp.prototype.add=function(e){var t=Vc(this.g,"session-ids"),n=t.store();e=m(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},Pp.prototype.remove=function(e){var t=this,n;return Me(function(r){return r.g==1?(n=Vc(t.g,"session-ids"),x(r,h1(n,function(u,c,f){e.includes(c.sessionId)&&f.delete()}),2)):x(r,n.promise(),0)})};function zo(){this.g=new Map}zo.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},zo.prototype.init=function(){var e=this;Op.forEach(function(u,c){(u=u())&&e.g.set(c,u)});for(var t=[],n=m(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function MM(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){u.hasFixedKeySpace()||t||(t={path:{fb:r,Ba:c},Ba:u})})}),t)return t;throw new gt(2,9,9013,"Could not find a cell that supports add-operations")}function iZ(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(u,c){t({fb:r,Ba:c},u)})})}function Wv(e,t,n){if(e=e.g.get(t),!e)throw new gt(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new gt(2,9,9013,"Could not find cell with name "+n);return t}function oZ(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function aZ(e){var t=Array.from(e.g.keys());if(!t.length)throw new gt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function sZ(e){var t,n,r;return Me(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=Op,r.forEach(function(c){(c=c())&&t.push(c)})),x(u,Promise.all(t.map(function(c){return c.erase()})),2)):n?u.u(0):x(u,Promise.all(t.map(function(c){return c.destroy()})),0)})}function DM(e,t){Op.set(e,t)}re("shaka.offline.StorageMuxer",zo),zo.unregister=function(e){Op.delete(e)},zo.register=DM,zo.prototype.destroy=zo.prototype.destroy;var Op=new Map;function Lp(){zc.apply(this,arguments)}Y(Lp,zc),Lp.prototype.updateManifestExpiration=function(e,t){var n=this,r,u,c;return Me(function(f){return r=Vc(n.h,n.g),u=r.store(),c=new Rr,u.get(e).onsuccess=function(h){(h=h.target.result)?(h.expiration=t,u.put(h),c.resolve()):c.reject(new gt(2,9,9012,"Could not find values for "+e))},x(f,Promise.all([r.promise(),c]),0)})},Lp.prototype.Yc=function(e){var t,n,r,u,c,f;return Me(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime,c=uZ(e.periods[n],u),t.push(c);return x(h,mN(t),2)}return f=h.h,h.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:f,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function uZ(e,t){cZ(e);for(var n=m(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(u){return lZ(u,e.startTime,t)})}function lZ(e,t,n){var r=e.initSegmentUri?PM(e.initSegmentUri):null,u=t+e.presentationTimeOffset,c=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(f){var h=PM(f.uri);return{startTime:t+f.startTime,endTime:t+f.endTime,dataKey:h,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:c,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Lp.prototype.Tf=function(e){return{data:e.data}};function PM(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new gt(2,9,9004,"Could not parse uri "+e)}function cZ(e){var t=e.streams.filter(function(h){return h.contentType=="audio"});if(e=e.streams.filter(function(h){return h.contentType=="video"}),!t.every(function(h){return h.variantIds})||!e.every(function(h){return h.variantIds})){for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=m(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var u=n++,c=m(e);for(r=c.next();!r.done;r=c.next())r.value.variantIds.push(u)}if(!e.length&&t.length)for(u=n++,c=m(t),r=c.next();!r.done;r=c.next())r.value.variantIds.push(u);if(e.length&&t.length)for(t=m(t),r=t.next();!r.done;r=t.next())for(r=r.value,u=m(e),c=u.next();!c.done;c=u.next()){c=c.value;var f=n++;r.variantIds.push(f),c.variantIds.push(f)}}}function $v(){zc.apply(this,arguments)}Y($v,zc),$v.prototype.Yc=function(e){var t,n,r,u,c,f;return Me(function(h){if(h.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=r-e.periods[n].startTime;for(var E=e.periods[n],S=[],k=m(E.streams),G=k.next();!G.done;G=k.next())G=G.value,G.variantIds.length!=0&&S.push(fZ(G,E.startTime,E.startTime+u));c=S,t.push(c)}return x(h,mN(t),2)}return f=h.h,h.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:f,sequenceMode:!1})})};function fZ(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function g1(){zc.apply(this,arguments)}Y(g1,zc),g=g1.prototype,g.hasFixedKeySpace=function(){return!1},g.addSegments=function(e){return this.add(this.i,e)},g.addManifests=function(e){return this.add(this.g,e)},g.updateManifest=function(e,t){return rZ(this,e,t)},g.Yc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function OM(){this.m=this.j=this.i=this.h=this.g=this.l=null}g=OM.prototype,g.init=function(){var e=this,t=new Rr,n=!1,r=new pr(function(){n=!0,t.reject(new gt(2,9,9017))});r.X(5);var u=p.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){var c=u.result;e.l=c;var f=c.objectStoreNames;f=f.contains("manifest")&&f.contains("segment")?new Lp(c,"segment","manifest"):null,e.g=f,f=c.objectStoreNames,f=f.contains("manifest-v2")&&f.contains("segment-v2")?new $v(c,"segment-v2","manifest-v2"):null,e.h=f,f=c.objectStoreNames,f=f.contains("manifest-v3")&&f.contains("segment-v3")?new $v(c,"segment-v3","manifest-v3"):null,e.i=f,f=c.objectStoreNames,f=f.contains("manifest-v5")&&f.contains("segment-v5")?new g1(c,"segment-v5","manifest-v5"):null,e.j=f,c=c.objectStoreNames.contains("session-ids")?new Pp(c):null,e.m=c,r.stop(),t.resolve()}},u.onupgradeneeded=function(){for(var c=u.result,f=m(["segment-v5","manifest-v5","session-ids"]),h=f.next();!h.done;h=f.next())h=h.value,c.objectStoreNames.contains(h)||c.createObjectStore(h,{autoIncrement:!0})},u.onerror=function(c){n||(t.reject(new gt(2,9,9001,u.error)),r.stop(),c.preventDefault())},t},g.destroy=function(){var e=this;return Me(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return x(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return x(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return x(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return x(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return x(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),X(t)}})},g.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},g.getEmeSessionCell=function(){return this.m},g.erase=function(){var e=this;return Me(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return x(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return x(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return x(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return x(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),x(t,dZ(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,x(t,e.init(),0)}})};function dZ(){var e=new Rr,t=p.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new gt(2,9,9001,t.error)),n.preventDefault()},e}DM("idb",function(){return aa()||gs()||!p.indexedDB?null:new OM});function Su(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}Su.prototype.fb=function(){return this.i},Su.prototype.Ba=function(){return this.h},Su.prototype.key=function(){return this.l},Su.prototype.toString=function(){return this.j};function m1(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new Su(t,n,r,Number(e[4])):null}function LM(e,t){this.h=e,this.g=t}function kM(e,t){var n=new tr(null,0);n.Za(t.duration);var r=t.streams.filter(function(S){return S.type=="audio"}),u=t.streams.filter(function(S){return S.type=="video"});r=hZ(e,r,u,n),u=t.streams.filter(function(S){return S.type==vr}).map(function(S){return Xv(e,S,n)});var c=t.streams.filter(function(S){return S.type=="image"}).map(function(S){return Xv(e,S,n)}),f=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var h=m(r.values()),E=h.next();!E.done;E=h.next())E=E.value,E.audio&&E.audio.encrypted&&(E.audio.drmInfos=f),E.video&&E.video.encrypted&&(E.video.drmInfos=f);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:u,imageStreams:c,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function hZ(e,t,n,r){for(var u=new Set,c=m(t),f=c.next();!f.done;f=c.next()){var h=m(f.value.variantIds);for(f=h.next();!f.done;f=h.next())u.add(f.value)}for(c=m(n),f=c.next();!f.done;f=c.next())for(h=m(f.value.variantIds),f=h.next();!f.done;f=h.next())u.add(f.value);for(c=new Map,u=m(u),f=u.next();!f.done;f=u.next())f=f.value,c.set(f,{id:f,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(u=u.value,f=Xv(e,u,r),h=m(u.variantIds),u=h.next();!u.done;u=h.next())u=c.get(u.value),u.language=f.language,u.primary=u.primary||f.primary,u.audio=f;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=Xv(e,u,r),f=m(u.variantIds),u=f.next();!u.done;u=f.next())u=c.get(u.value),u.primary=u.primary||t.primary,u.video=t;return c}function Xv(e,t,n){var r=t.segments.map(function(u){return pZ(e,u,t)});return n.ld(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new wr(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Si(t.mimeType,t.codecs)])}}function pZ(e,t,n){var r=new Su("segment",e.h,e.g,t.dataKey);return e=new et(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?gZ(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function gZ(e,t){var n=new Su("segment",e.h,e.g,t);return new ht(function(){return[n.toString()]},0,null)}function FM(){this.g=null}g=FM.prototype,g.configure=function(){},g.start=function(e,t){var n=this,r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:if(r=m1(e),n.g=r,r==null||r.g!="manifest")throw new gt(2,1,9004,e);return u=new zo,oe(k,2),x(k,u.init(),4);case 4:return x(k,Wv(u,r.fb(),r.Ba()),5);case 5:return c=k.h,x(k,c.getManifests([r.key()]),6);case 6:return f=k.h,h=f[0],E=new LM(r.fb(),r.Ba()),S=kM(E,h),t.makeTextStreamsForClosedCaptions(S),k.return(S);case 2:return Je(k),x(k,u.destroy(),7);case 7:Se(k,0)}})},g.stop=function(){return Promise.resolve()},g.update=function(){},g.onExpirationUpdated=function(e,t){var n=this,r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:return r=n.g,u=new zo,fe(k,2,3),x(k,u.init(),5);case 5:return x(k,Wv(u,r.fb(),r.Ba()),6);case 6:return c=k.h,x(k,c.getManifests([r.key()]),7);case 7:if(f=k.h,h=f[0],E=h.sessionIds.includes(e),S=h.expiration==null||h.expiration>t,!E||!S){k.u(3);break}return x(k,c.updateManifestExpiration(r.key(),t),3);case 3:return Je(k),x(k,u.destroy(),10);case 10:Se(k,0);break;case 2:Re(k),k.u(3)}})},g.onInitialVariantChosen=function(){},g.banLocation=function(){},Fe["application/x-offline-manifest"]=function(){return new FM};function UM(){}function BM(e){var t=m1(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Yu(e)):e=t&&t.g=="segment"?mZ(t.key(),t):pu(new gt(2,1,9004,e)),e}function mZ(e,t){var n=new zo;return Yu(void 0).va(function(){return n.init()}).va(function(){return Wv(n,t.fb(),t.Ba())}).va(function(r){return r.getSegments([t.key()])}).va(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}re("shaka.offline.OfflineScheme",UM),UM.plugin=BM,Ko("offline",BM);function jM(e,t,n){var r,u,c,f,h,E;return Me(function(S){switch(S.g){case 1:r=[];for(var k=[],G=m(n),te=G.next();!te.done;te=G.next()){te=te.value;for(var z=!1,ve=m(k),Le=ve.next();!Le.done;Le=ve.next())if(Le=Le.value,yZ(Le.info,te)){Le.sessionIds.push(te.sessionId),z=!0;break}z||k.push({info:te,sessionIds:[te.sessionId]})}u=m(k),c=u.next();case 2:if(c.done){S.u(4);break}return f=c.value,h=vZ(e,t,f),x(S,h,5);case 5:E=S.h,r=r.concat(E),c=u.next(),S.u(2);break;case 4:return S.return(r)}})}function vZ(e,t,n){var r,u;return Me(function(c){switch(c.g){case 1:return r=new Lc({zb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),fe(c,2),r.configure(e),x(c,km(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ge(c,3);break;case 2:return Re(c),x(c,r.destroy(),5);case 5:return c.return([]);case 3:return u=[],x(c,Promise.all(n.sessionIds.map(function(f){return Me(function(h){if(h.g==1)return fe(h,2),x(h,LE(r,f),4);if(h.g!=2)return u.push(f),ge(h,0);Re(h),X(h)})})),6);case 6:return x(c,r.destroy(),7);case 7:return c.return(u)}})}function yZ(e,t){function n(r,u){return r.robustness==u.robustness&&r.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&In(e.audioCapabilities,t.audioCapabilities,n)&&In(e.videoCapabilities,t.videoCapabilities,n)}function EZ(e,t,n){var r=t.presentationTimeline.getDuration();return t=ZM(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function v1(e,t){var n=kM(new LM(e.fb(),e.Ba()),t),r=t.appMetadata||{};return n=ZM(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function ZM(e){var t=[],n=Bf(e.variants);n=m(n);for(var r=n.next();!r.done;r=n.next())t.push(xl(r.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Nl(n.value));return t}function _Z(){this.g={}}function TZ(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var u=n.bandwidth||393216,c=r.bandwidth||t.bandwidth-u;0>=c&&(c=t.bandwidth),e.g[n.id]=u,e.g[r.id]=c}}function SZ(e,t){e.g[t.id]=t.bandwidth||2048}function GM(e,t){return e=e.g[t],e==null&&(e=0),e}function ao(e){var t=this;if(e&&e.constructor!=dn)throw new gt(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.Zb()):(this.h=rd(),this.g=new Kr),this.i=[],this.j=[];var n=!e;this.l=new Wu(function(){var r,u,c,f,h;return Me(function(E){switch(E.g){case 1:return x(E,Promise.all(t.j.map(function(S){return d1(S)})),2);case 2:for(r=function(){},u=[],c=m(t.i),f=c.next();!f.done;f=c.next())h=f.value,u.push(h.then(r,r));return x(E,Promise.all(u),3);case 3:if(!n){E.u(4);break}return x(E,t.g.destroy(),4);case 4:t.h=null,t.g=null,X(E)}})})}function y1(){if(Io())e:{for(var e=m(Op.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}g=ao.prototype,g.destroy=function(){return this.l.destroy()},g.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Ym(e,t)),jc(this.h,e)},g.getConfiguration=function(){var e=rd();return jc(e,this.h,rd()),e},g.Zb=function(){return this.g},g.store=function(e,t,n){var r=this,u=this.getConfiguration(),c=new CM(this.g);return this.j.push(c),t=wZ(this,e,t||{},function(){var f;return Me(function(h){return h.g==1?n?h.u(2):x(h,a_(e,r.g,u.manifest.retryParameters),3):(h.g!=2&&(n=h.h),f=be(e,n||null),h.return(f()))})},u,c),t=new pi(t,function(){return d1(c)}),t.finally(function(){mn(r.j,c)}),kZ(this,t)};function wZ(e,t,n,r,u,c){var f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe;return Me(function(Ue){switch(Ue.g){case 1:return Qv(),h=f=null,E=new zo,G=k=S=null,fe(Ue,2,3),x(Ue,r(),5);case 5:return f=Ue.h,x(Ue,DZ(e,t,f,u),6);case 6:if(te=Ue.h,yo(e),z=!te.presentationTimeline.R()&&!te.presentationTimeline.dc(),!z)throw new gt(2,9,9005,t);return x(Ue,e.rc(te,function(vt){G=G||vt},u),7);case 7:if(h=Ue.h,yo(e),G)throw G;return x(Ue,IZ(te,h,u),8);case 8:return x(Ue,E.init(),9);case 9:return yo(e),x(Ue,MM(E),10);case 10:return S=Ue.h,yo(e),ve=bZ(h,te,t,n,u,c),Le=ve.Sh,De=ve.Hf,x(Ue,S.Ba.addManifests([Le]),11);case 11:if(qe=Ue.h,yo(e),k=qe[0],yo(e),G)throw G;return x(Ue,AZ(e,De,k,Le,c,u,S.Ba,te,h),12);case 12:return yo(e),VM(te,Le,h,u),x(Ue,S.Ba.updateManifest(k,Le),13);case 13:return yo(e),Te=new Su("manifest",S.path.fb,S.path.Ba,k),Ue.return(v1(Te,Le));case 3:return Je(Ue),x(Ue,E.destroy(),14);case 14:if(!f){Ue.u(15);break}return x(Ue,f.stop(),15);case 15:if(!h){Ue.u(17);break}return x(Ue,h.destroy(),17);case 17:Se(Ue,0);break;case 2:if(Qe=Re(Ue),k==null){Ue.u(19);break}return x(Ue,qM(k),19);case 19:throw G||Qe}})}function AZ(e,t,n,r,u,c,f,h,E){var S,k,G,te,z,ve,Le,De,qe,Te;return Me(function(Qe){switch(Qe.g){case 1:if(S={},k=0,G=function(Ue,vt){var xt,Vt,Bt,_t,Zt,ln,pn;return Me(function(Ln){if(Ln.g==1){for(xt={},Vt=m(Ue),Bt=Vt.next();!Bt.done;xt={Ob:xt.Ob},Bt=Vt.next())xt.Ob=Bt.value,_t=Q5(xt.Ob,c),Zt=xt.Ob.i,ln=xt.Ob.h,pn=function(Mn){return function(qn){var Yn,Kn,Nr;return Me(function(fi){if(fi.g==1)return x(fi,f.addSegments([{data:qn}]),2);Yn=fi.h,yo(e),Kn=Mn.Ob.g,Nr=f1(Kn),S[Nr]=Yn[0],k+=qn.byteLength,X(fi)})}}(xt),eZ(u,xt.Ob.groupId,_t,Zt,ln,pn);return x(Ln,tZ(u),2)}return vt?(yo(e),VM(h,r,E,c),x(Ln,f.updateManifest(n,r),0)):Ln.u(0)})},te=!1,fe(Qe,2),!E1(h)||!te||KM(h)){Qe.u(4);break}return x(Qe,G(t.filter(function(Ue){return Ue.h}),!0),5);case 5:return yo(e),t=t.filter(function(Ue){return!Ue.h}),z=S,ve=k,S={},k=0,x(Qe,HM(f,n,r,z,ve,function(){return yo(e)}),6);case 6:yo(e);case 4:if(te){Qe.u(7);break}return x(Qe,G(t,!1),8);case 8:return yo(e),Le=S,De=k,S={},k=0,x(Qe,HM(f,n,r,Le,De,function(){return yo(e)}),9);case 9:yo(e);case 7:ge(Qe,0);break;case 2:return qe=Re(Qe),Te=Object.values(S),x(Qe,f.removeSegments(Te,function(){}),10);case 10:throw qe}})}function qM(e){var t,n,r,u;return Me(function(c){switch(c.g){case 1:return t=new zo,x(c,t.init(),2);case 2:return x(c,MM(t),3);case 3:return n=c.h,r=new Su("manifest",n.path.fb,n.path.Ba,e),x(c,t.destroy(),4);case 4:return u=new ao,x(c,u.remove(r.toString()),0)}})}function HM(e,t,n,r,u,c){var f,h,E,S,k,G,te,z,ve,Le,De;return Me(function(qe){switch(qe.g){case 1:for(f=!1,fe(qe,2),h=!0,E=m(n.streams),S=E.next();!S.done;S=E.next())for(k=S.value,G=m(k.segments),te=G.next();!te.done;te=G.next())z=te.value,ve=z.pendingSegmentRefId?r[z.pendingSegmentRefId]:null,ve!=null&&(z.dataKey=ve,z.pendingSegmentRefId=void 0),ve=z.pendingInitSegmentRefId?r[z.pendingInitSegmentRefId]:null,ve!=null&&(z.initSegmentKey=ve,z.pendingInitSegmentRefId=void 0),z.pendingSegmentRefId&&(h=!1),z.pendingInitSegmentRefId&&(h=!1);return n.size+=u,h&&(n.isIncomplete=!1),x(qe,e.updateManifest(t,n),4);case 4:f=!0,c(),ge(qe,0);break;case 2:return Le=Re(qe),x(qe,qM(t),5);case 5:if(f){qe.u(6);break}return De=Object.values(r),x(qe,e.removeSegments(De,function(){}),6);case 6:throw Le}})}function IZ(e,t,n){var r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe,Ue,vt,xt,Vt,Bt,_t,Zt,ln,pn,Ln,Mn;return Me(function(qn){switch(qn.g){case 1:return r={width:1/0,height:1/0},Dh(e,n.restrictions,r),x(qn,pm(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(u=[],c=n.preferredDecodingAttributes,f=n.preferredVideoCodecs,h=n.preferredAudioCodecs,dm(e,f,h,c),E=m(e.variants),S=E.next();!S.done;S=E.next())k=S.value,u.push(xl(k));for(G=m(e.textStreams),te=G.next();!te.done;te=G.next())z=te.value,u.push(Nl(z));for(ve=m(e.imageStreams),Le=ve.next();!Le.done;Le=ve.next())De=Le.value,u.push(Ku(De));return x(qn,n.offline.trackSelectionCallback(u),3);case 3:for(qe=qn.h,Te=e.presentationTimeline.getDuration(),Qe=0,Ue=m(qe),vt=Ue.next();!vt.done;vt=Ue.next())xt=vt.value,Vt=xt.bandwidth*Te/8,Qe+=Vt;return fe(qn,4),x(qn,n.offline.downloadSizeCallback(Qe),6);case 6:if(Bt=qn.h,!Bt)throw new gt(2,9,9014);ge(qn,5);break;case 4:throw _t=Re(qn),_t instanceof gt?_t:new gt(2,9,9015);case 5:for(Zt=new Set,ln=new Set,pn=new Set,Ln=m(qe),vt=Ln.next();!vt.done;vt=Ln.next())Mn=vt.value,Mn.type=="variant"&&Zt.add(Mn.id),Mn.type=="text"&&ln.add(Mn.id),Mn.type=="image"&&pn.add(Mn.id);e.variants=e.variants.filter(function(Yn){return Zt.has(Yn.id)}),e.textStreams=e.textStreams.filter(function(Yn){return ln.has(Yn.id)}),e.imageStreams=e.imageStreams.filter(function(Yn){return pn.has(Yn.id)}),BZ(e),X(qn)}})}function bZ(e,t,n,r,u,c){var f=EZ(n,t,r),h=u.offline.progressCallback;J5(c,function(z,ve){f.size=ve,h(f,z)},function(z,ve){E&&u.offline.usePersistentLicense&&S==ve&&Ul(e,"cenc",z)});var E=E1(t)&&!KM(t),S=null;E&&(S=jZ.get(e.g.keySystem));for(var k=new _Z,G=m(t.textStreams),te=G.next();!te.done;te=G.next())k.g[te.value.id]=52;for(G=m(t.imageStreams),te=G.next();!te.done;te=G.next())SZ(k,te.value);for(te=m(t.variants),G=te.next();!G.done;G=te.next())TZ(k,G.value);return k=PZ(c,k,t,u),c=k.streams,k=k.Hf,te=e.g,G=u.offline.usePersistentLicense,te&&G&&(te.initData=[]),{Sh:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.cd(),streams:c,sessionIds:G?ep(e):[],drmInfo:te,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hf:k}}function E1(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function KM(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function VM(e,t,n,r){if(t.expiration=n.cd(),n=ep(n),t.sessionIds=r.offline.usePersistentLicense?n:[],E1(e)&&r.offline.usePersistentLicense&&!n.length)throw new gt(2,9,9007)}g.remove=function(e){return _1(this,CZ(this,e))};function CZ(e,t){var n,r,u,c,f,h;return Me(function(E){switch(E.g){case 1:if(Qv(),n=m1(t),n==null||n.g!="manifest")throw new gt(2,9,9004,t);return r=n,u=new zo,oe(E,2),x(E,u.init(),4);case 4:return x(E,Wv(u,r.fb(),r.Ba()),5);case 5:return c=E.h,x(E,c.getManifests([r.key()]),6);case 6:return f=E.h,h=f[0],x(E,Promise.all([RZ(e,h,u),xZ(c,r,h)]),2);case 2:return Je(E),x(E,u.destroy(),8);case 8:Se(E,0)}})}function zM(e,t){for(var n=[],r=m(e.streams),u=r.next();!u.done;u=r.next())u=u.value,t&&u.type=="video"?n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:Si(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function RZ(e,t,n){return Me(function(r){return x(r,UZ(e.g,e.h.drm,n,t),0)})}function xZ(e,t,n){function r(){}var u=FZ(n);return v1(t,n),Promise.all([e.removeSegments(u,r),e.removeManifests([t.key()],r)])}g.ji=function(){return _1(this,NZ(this))};function NZ(e){var t,n,r,u,c,f,h,E,S,k;return Me(function(G){switch(G.g){case 1:return Qv(),t=e.g,n=e.h.drm,r=new zo,u=!1,oe(G,2),x(G,r.init(),4);case 4:c=[],oZ(r,function(te){return c.push(te)}),f=m(c),h=f.next();case 5:if(h.done){G.u(2);break}return E=h.value,x(G,E.getAll(),8);case 8:return S=G.h,x(G,jM(n,t,S),9);case 9:return k=G.h,x(G,E.remove(k),10);case 10:k.length!=S.length&&(u=!0),h=f.next(),G.u(5);break;case 2:return Je(G),x(G,r.destroy(),11);case 11:Se(G,3);break;case 3:return G.return(!u)}})}g.list=function(){return _1(this,MZ())};function MZ(){var e,t,n;return Me(function(r){switch(r.g){case 1:return Qv(),e=[],t=new zo,oe(r,2),x(r,t.init(),4);case 4:return n=Promise.resolve(),iZ(t,function(u,c){n=n.then(function(){var f;return Me(function(h){if(h.g==1)return x(h,c.getAllManifests(),2);f=h.h,f.forEach(function(E,S){E=v1(new Su("manifest",u.fb,u.Ba,S),E),e.push(E)}),X(h)})})}),x(r,n,2);case 2:return Je(r),x(r,t.destroy(),6);case 6:Se(r,3);break;case 3:return r.return(e)}})}function DZ(e,t,n,r){var u,c,f,h,E;return Me(function(S){if(S.g==1)return u=null,c=e.g,f={networkingEngine:c,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(k){u=k},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate}},n.configure(r.manifest),yo(e),x(S,n.start(t,f),2);if(S.g!=3)return h=S.h,yo(e),E=YM(h),x(S,Promise.all(Hf(E,function(k){return k.createSegmentIndex()})),3);if(yo(e),u)throw u;return S.return(h)})}g.rc=function(e,t,n){var r=this,u;return Me(function(c){return c.g==1?(u=new Lc({zb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),u.configure(n.drm),x(c,Om(u,e.variants,n.offline.usePersistentLicense),2)):c.g!=3?x(c,Jh(u),3):c.return(u)})};function PZ(e,t,n,r){var u=new Map,c=YM(n),f=new Map;c=m(c);for(var h=c.next();!h.done;h=c.next()){h=h.value;var E=OZ(e,t,n,h,r,u);f.set(h.id,E)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&f.get(t.audio.id).variantIds.push(t.id),t.video&&f.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(f.values()),Hf:Array.from(u.values())}}function OZ(e,t,n,r,u,c){var f={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},h=u.offline.numberOfParallelDownloads,E=0;return LZ(r,n.presentationTimeline.qb(),function(S){var k=f1(S),G=void 0;if(!c.has(k)){var te=S.endTime-S.startTime;te=GM(t,r.id)*te,te=bM(e.g,te),c.set(k,new AM(S,te,E,!1))}S.ca&&(G=f1(S.ca),c.has(G)||(te=.5*GM(t,r.id),te=bM(e.g,te),c.set(G,new AM(S.ca,te,E,!0)))),f.segments.push({pendingInitSegmentRefId:G,initSegmentKey:G?0:null,startTime:S.startTime,endTime:S.endTime,appendWindowStart:S.appendWindowStart,appendWindowEnd:S.appendWindowEnd,timestampOffset:S.timestampOffset,tilesLayout:S.tilesLayout,pendingSegmentRefId:k,dataKey:0,mimeType:S.mimeType,codecs:S.codecs}),E=(E+1)%h}),f}function LZ(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function yo(e){if(e.l.g)throw new gt(2,9,7001)}function Qv(){if(!y1())throw new gt(2,9,9e3)}function _1(e,t){return Me(function(n){return n.g==1?(e.i.push(t),oe(n,2),x(n,t,4)):n.g!=2?n.return(n.h):(Je(n),mn(e.i,t),Se(n,0))})}function kZ(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){mn(e.i,n)})}function FZ(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function UZ(e,t,n,r){var u,c,f;return Me(function(h){return h.g==1?r.drmInfo?(u=aZ(n),c=r.sessionIds.map(function(E){return{sessionId:E,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:zM(r,!1),videoCapabilities:zM(r,!0)}}),x(h,jM(t,e,c),2)):h.return():h.g!=3?(f=h.h,x(h,u.remove(f),3)):x(h,u.add(c.filter(function(E){return!f.includes(E.sessionId)})),0)})}function YM(e){for(var t=new Set,n=m(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=m(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=m(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function BZ(e){e.variants.map(function(c){return c.video});var t=new Set(e.variants.map(function(c){return c.audio}));e=e.textStreams;for(var n=m(t),r=n.next();!r.done;r=n.next()){r=m(t);for(var u=r.next();!u.done;u=r.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),r=n.next();!r.done;r=n.next());}re("shaka.offline.Storage",ao),ao.deleteAll=function(){var e;return Me(function(t){return t.g==1?(e=new zo,oe(t,2),x(t,sZ(e),2)):t.g!=5?(Je(t),x(t,e.destroy(),5)):Se(t,0)})},ao.prototype.list=ao.prototype.list,ao.prototype.removeEmeSessions=ao.prototype.ji,ao.prototype.remove=ao.prototype.remove,ao.prototype.store=ao.prototype.store,ao.prototype.getNetworkingEngine=ao.prototype.Zb,ao.prototype.getConfiguration=ao.prototype.getConfiguration,ao.prototype.configure=ao.prototype.configure,ao.prototype.destroy=ao.prototype.destroy,ao.support=y1;var jZ=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");S_.offline=y1;function Eo(){}function Yo(e,t){for(e={priority:t||0,callback:e},t=0;t<kp.length;t++)if(kp[t].priority<e.priority){kp.splice(t,0,e);return}kp.push(e)}re("shaka.polyfill",Eo),Eo.register=Yo,Eo.installAll=function(){for(var e=m(kp),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ke("Error installing polyfill!",n)}}};var kp=[];function Fp(){this.g=new Jv}function WM(){p.AbortController||(p.AbortController=Fp,p.AbortSignal=Jv)}Fp.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Wn("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(Fp.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Eo.AbortController=Fp,Fp.install=WM;function Jv(){Sr.call(this),this.h=!1,this.g=void 0,this.onabort=null}Y(Jv,Sr),y.Object.defineProperties(Jv.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Yo(WM);function $M(){}function XM(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())ZZ(t.value)}function ZZ(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Eo.Aria=$M,$M.install=XM,Yo(XM);function QM(){}function JM(){gD()}Eo.EncryptionScheme=QM,QM.install=JM,Yo(JM,-2);function e2(){}function t2(){if(p.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Rd),document.addEventListener("webkitfullscreenerror",Rd),document.addEventListener("mozfullscreenchange",Rd),document.addEventListener("mozfullscreenerror",Rd),document.addEventListener("MSFullscreenChange",Rd),document.addEventListener("MSFullscreenError",Rd)}}function Rd(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Eo.Fullscreen=e2,e2.install=t2,Yo(t2);function Up(){}function n2(){var e=!0;(ms()||yc()||xr()||oa()||qa()||aa()||Yr("PC=EOS")||vs())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),r2=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=GZ)}function GZ(e){var t,n,r,u,c,f,h,E,S,k,G,te,z,ve,Le,De,qe,Te,Qe;return Me(function(Ue){switch(Ue.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return Ue.return(t);if(n=e.video,r=e.audio,e.type=="media-source"){if(!Io())return Ue.return(t);if(n){if(aa())if(p.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var vt=n.contentType;if(n.width&&n.height&&(vt+="; width="+n.width+"; height="+n.height),n.framerate&&(vt+="; framerate="+n.framerate),n.transferFunction==="pq"&&(vt+="; eotf=smpte2084"),vt in ty)var xt=ty[vt];else xt=cast.__platform__.canDisplayType(vt),ty[vt]=xt;u=xt}else u=Ot(n.contentType);else qa()?(c=n.contentType,n.width&&n.height&&(c+="; width="+n.width,c+="; height="+n.height),n.framerate&&(c+="; framerate="+n.framerate),n.bitrate&&(c+="; bitrate="+n.bitrate),u=Ot(c)):u=Ot(n.contentType);if(!u)return Ue.return(t)}if(r&&(aa()&&r.spatialRendering?(h=r.contentType+"; spatialRendering=true",f=Ot(h)):f=Ot(r.contentType),!f))return Ue.return(t)}else if(e.type=="file"){if(n&&(E=n.contentType,S=lu(E),!S)||r&&(k=r.contentType,G=lu(k),!G))return Ue.return(t)}else return Ue.return(t);if(!e.keySystemConfiguration)return t.supported=!0,Ue.return(Promise.resolve(t));if(te=e.keySystemConfiguration,z=[],ve=[],te.audio&&(Le={robustness:te.audio.robustness||"",contentType:e.audio.contentType},qa()&&e.audio.contentType.includes('codecs="ac-3"')&&(Le={robustness:Le.robustness,contentType:'audio/mp4; codecs="ec-3"'}),te.audio.encryptionScheme&&(Le={robustness:Le.robustness,contentType:Le.contentType,encryptionScheme:te.audio.encryptionScheme}),z.push(Le)),te.video&&(De={robustness:te.video.robustness||"",contentType:e.video.contentType},te.video.encryptionScheme&&(De={robustness:De.robustness,contentType:De.contentType,encryptionScheme:te.video.encryptionScheme}),ve.push(De)),qe={initDataTypes:[te.initDataType],distinctiveIdentifier:te.distinctiveIdentifier,persistentState:te.persistentState,sessionTypes:te.sessionTypes},z.length&&(qe.audioCapabilities=z),ve.length&&(qe.videoCapabilities=ve),Te=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,fe(Ue,3),Te in ey){Qe=ey[Te],Ue.u(5);break}return x(Ue,navigator.requestMediaKeySystemAccess(te.keySystem,[qe]),6);case 6:Qe=Ue.h,ey[Te]=Qe;case 5:ge(Ue,4);break;case 3:Re(Ue);case 4:Qe&&(t.supported=!0,t.keySystemAccess=Qe);case 2:return Ue.return(t)}})}Eo.MediaCapabilities=Up,Up.install=n2;var r2=null;Up.originalMcap=r2;var ey={};Up.memoizedMediaKeySystemAccessRequests_=ey;var ty={};Up.memoizedCanDisplayTypeRequests_=ty,Yo(n2,-1);function i2(){}function o2(){var e=ys();(p.MediaSource||p.ManagedMediaSource)&&(e?10>=e?p.MediaSource=null:12>=e?(a2(),qZ()):15>=e&&a2():(Lu()||Ou()||Yr("Tizen 4"))&&KZ()),(p.MediaSource||p.ManagedMediaSource)&&HZ(),p.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&VZ()}function a2(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,We.apply(0,arguments));return t.abort=function(){},t}}function qZ(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function HZ(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Mf(n)!="mp2t"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return Mf(n)!="mp2t"&&t(n)}}}function KZ(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return za(n)!="opus"&&e(n)},p.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);p.ManagedMediaSource.isTypeSupported=function(n){return za(n)!="opus"&&t(n)}}}function VZ(){var e=MediaSource.isTypeSupported;oa()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(f){return f.startsWith("codecs=")});if(0>r)return e(t);var u=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),c=u.findIndex(function(f){return f.startsWith("vp09")});return 0<=c&&(u[c]="vp9",n[r]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}Eo.MediaSource=i2,i2.install=o2,Yo(o2);function s2(){}function u2(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?zZ():p.orientation!=null&&YZ())}function zZ(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function YZ(){function e(){switch(p.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new ny;screen.orientation=t,e(),p.addEventListener("orientationchange",function(){e();var n=new Wn("change");t.dispatchEvent(n)})}Eo.Orientation=s2,s2.install=u2;function ny(){Sr.call(this),this.type="",this.angle=0}Y(ny,Sr),ny.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},ny.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Yo(u2);function T1(){}var S1,w1,A1,I1,b1,C1;function WZ(e,t){try{var n=new ry(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function $Z(e){var t=this.mediaKeys;return t&&t!=e&&l2(t,null),delete this.mediaKeys,(this.mediaKeys=e)?l2(e,this):Promise.resolve()}function XZ(e){if(e=Qn(e.initData),tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ha(e.subarray(4),!0),e=Va(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ti(e),this.dispatchEvent(t)}Eo.PatchedMediaKeysApple=T1,T1.uninstall=function(){S1&&(S1=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",w1),HTMLMediaElement.prototype.setMediaKeys=A1,p.MediaKeys=I1,p.MediaKeySystemAccess=b1,navigator.requestMediaKeySystemAccess=C1,w1=C1=A1=b1=I1=null,p.shakaMediaKeysPolyfill=!1)},T1.install=function(e){p.HTMLVideoElement&&p.WebKitMediaKeys&&(e!==void 0&&e&&(S1=!0,w1=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),A1=HTMLMediaElement.prototype.setMediaKeys,I1=p.MediaKeys,b1=p.MediaKeySystemAccess,C1=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$Z,p.MediaKeys=Bp,p.MediaKeySystemAccess=ry,navigator.requestMediaKeySystemAccess=WZ,p.shakaMediaKeysPolyfill=!0)};function ry(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,u=!1;if(n.audioCapabilities)for(var c=m(n.audioCapabilities),f=c.next();!f.done;f=c.next())f=f.value,f.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,f.contentType.split(";")[0])&&(t.audioCapabilities.push(f),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),f=n.next();!f.done;f=n.next())c=f.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.videoCapabilities.push(c),u=!0));r||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}ry.prototype.createMediaKeys=function(){var e=new Bp(this.keySystem);return Promise.resolve(e)},ry.prototype.getConfiguration=function(){return this.g};function Bp(e){this.h=new WebKitMediaKeys(e),this.g=new Tt}Bp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new R1(this.h)},Bp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function l2(e,t){if(e.g.ib(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",XZ);try{return ed(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}Bp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function R1(e){Sr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Tt,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new c2}Y(R1,Sr),g=R1.prototype,g.generateRequest=function(e,t){var n=this;this.h=new Rr;try{var r=this.l.createSession("video/mp4",Qn(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",Ti(u.message)),u=new Wn("message",u),n.dispatchEvent(u)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(iy(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:iy(n,"output-not-allowed");break;default:iy(n,"internal-error")}}),iy(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},g.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},g.update=function(e){this.g=new Rr;try{this.i.update(Qn(e))}catch(t){this.g.reject(t)}return this.g},g.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ib()}catch(e){this.closed.reject(e)}return this.closed},g.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function iy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}function c2(){this.size=0,this.g=void 0}g=c2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,ke.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=ke.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};function f2(){}function d2(){!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=QZ,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=JZ,p.MediaKeys=oy,p.MediaKeySystemAccess=x1,p.shakaMediaKeysPolyfill=!0)}function QZ(){return Promise.reject(Error("The key system specified is not supported."))}function JZ(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Eo.PatchedMediaKeysNop=f2,f2.install=d2;function oy(){throw new TypeError("Illegal constructor.")}oy.prototype.createSession=function(){},oy.prototype.setServerCertificate=function(){},oy.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function x1(){throw this.keySystem="",new TypeError("Illegal constructor.")}x1.prototype.getConfiguration=function(){},x1.prototype.createMediaKeys=function(){},Yo(d2,-10);function h2(){}function p2(){if(!(!p.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)O1="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=eG,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=tG,p.MediaKeys=jp,p.MediaKeySystemAccess=ay,p.shakaMediaKeysPolyfill=!0}}function N1(e){var t=O1;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function eG(e,t){try{var n=new ay(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function tG(e){var t=this.mediaKeys;return t&&t!=e&&g2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&g2(e,this),Promise.resolve()}Eo.PatchedMediaKeysWebkit=h2,h2.install=p2;function ay(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var c=t.next();!c.done;c=t.next()){c=c.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:c.initDataTypes,sessionTypes:["temporary"],label:c.label},h=!1;if(c.audioCapabilities)for(var E=m(c.audioCapabilities),S=E.next();!S.done;S=E.next())S=S.value,S.contentType&&(h=!0,u.canPlayType(S.contentType.split(";")[0],this.g)&&(f.audioCapabilities.push(S),r=!0));if(c.videoCapabilities)for(E=m(c.videoCapabilities),S=E.next();!S.done;S=E.next())S=S.value,S.contentType&&(h=!0,u.canPlayType(S.contentType,this.g)&&(f.videoCapabilities.push(S),r=!0));if(h||(r=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),c.persistentState=="required"&&(n?(f.persistentState="required",f.sessionTypes=["persistent-license"]):r=!1),r){this.h=f;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}ay.prototype.createMediaKeys=function(){var e=new jp(this.g);return Promise.resolve(e)},ay.prototype.getConfiguration=function(){return this.h};function jp(e){this.l=e,this.h=null,this.g=new Tt,this.i=[],this.j=new Map}function g2(e,t){e.h=t,e.g.ib();var n=O1;t&&(e.g.D(t,n+"needkey",function(r){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ti(r.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(r){var u=M1(e,r.sessionId);u&&(r=new Map().set("messageType",u.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new Wn("message",r),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=M1(e,r.sessionId))&&(sy(r,"usable"),r.g&&r.g.resolve(),r.g=null)}),e.g.D(t,n+"keyerror",function(r){var u=M1(e,r.sessionId);if(u){var c=Error("EME v0.1b key error"),f=r.errorCode;f.systemCode=r.systemCode,c.errorCode=f,!r.sessionId&&u.h?(r.systemCode==45&&(c.message="Unsupported session type."),u.h.reject(c),u.h=null):r.sessionId&&u.g?(u.g.reject(c),u.g=null):(c=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?sy(u,"output-restricted"):c==1?sy(u,"expired"):sy(u,"internal-error"))}}))}jp.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new D1(t,this.l,e),this.i.push(e),e},jp.prototype.setServerCertificate=function(){return Promise.resolve(!1)},jp.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function M1(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function D1(e,t,n){Sr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Rr,this.keyStatuses=new v2}Y(D1,Sr);function m2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Qn(Va("LOAD_SESSION|"+n));else{var u=Va("PERSISTENT|");r=li(u,t)}else r=Qn(t)}catch(f){return Promise.reject(f)}e.h=new Rr;var c=N1("generateKeyRequest");try{e.j[c](e.i,r)}catch(f){if(f.name!="InvalidStateError")return e.h=null,Promise.reject(f);new pr(function(){try{e.j[c](e.i,r)}catch(h){e.h.reject(h),e.h=null}}).X(.01)}return e.h}function P1(e,t,n){if(e.g)e.g.then(function(){return P1(e,t,n)}).catch(function(){return P1(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=Vr(n),u=JSON.parse(r);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Ho(u.keys[0].k),u=Ho(u.keys[0].kid)}else r=Qn(n),u=null;var c=N1("addKey");try{e.j[c](e.i,r,u,e.sessionId)}catch(f){e.g.reject(f),e.g=null}}}function sy(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Wn("keystatuseschange"),e.dispatchEvent(t)}g=D1.prototype,g.generateRequest=function(e,t){return m2(this,t,null)},g.load=function(e){return this.l=="persistent-license"?m2(this,null,e):Promise.reject(Error("Not a persistent session."))},g.update=function(e){var t=new Rr;return P1(this,t,e),t},g.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=N1("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},g.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function v2(){this.size=0,this.g=void 0}g=v2.prototype,g.bc=function(){return this.g},g.forEach=function(e){this.g&&e(this.g,ke.value())},g.get=function(e){if(this.has(e))return this.g},g.has=function(e){var t=ke.value();return!!(this.g&&zi(e,t))},g.entries=function(){},g.keys=function(){},g.values=function(){};var O1="";Yo(p2);function y2(){}function E2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=rG,Object.defineProperty(e,"disablePictureInPicture",{get:oG,set:aG,enumerable:!0,configurable:!0}),document.exitPictureInPicture=iG,document.addEventListener("webkitpresentationmodechanged",nG,!0))}}function nG(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function rG(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function iG(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function oG(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function aG(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Eo.PiPWebkit=y2,y2.install=E2,Yo(E2);function _2(){}function T2(){p.crypto&&("randomUUID"in p.crypto||(p.crypto.randomUUID=sG))}function sG(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Eo.RandomUUID=_2,_2.install=T2,Yo(T2);function S2(){}function w2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:uG})}function uG(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Eo.Symbol=S2,S2.install=w2,Yo(w2);function A2(){}function I2(){if(p.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Eo.VideoPlayPromise=A2,A2.install=I2,Yo(I2);function b2(){}function C2(){if(p.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||oa()&&cu()===38)&&(e.getVideoPlaybackQuality=lG)}}function lG(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Eo.VideoPlaybackQuality=b2,b2.install=C2,Yo(C2);function R2(){}function x2(){if(!p.VTTCue&&p.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=L1;else if(t==6)e=cG;else{try{var n=!!L1(1,2,"")}catch(r){n=!1}n&&(e=L1)}e&&(p.VTTCue=function(r,u,c){return e(r,u,c)})}}function L1(e,t,n){return new p.TextTrackCue(e,t,n)}function cG(e,t,n){return new p.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Eo.VTTCue=R2,R2.install=x2,Yo(x2);function Na(){}Na.prototype.parseInit=function(){},Na.prototype.setSequenceMode=function(){},Na.prototype.setManifestType=function(){},Na.prototype.parseMedia=function(e,t){var n=null,r=[];e=Vr(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=fG.exec(u))){var c=dG.exec(u[1]);c=60*parseInt(c[1],10)+parseFloat(c[2].replace(",",".")),u=new Cn(c,t.segmentEnd?t.segmentEnd:c+2,u[2]),n&&(n.endTime=c,r.push(n)),n=u}return n&&r.push(n),r},re("shaka.text.LrcTextParser",Na),Na.prototype.parseMedia=Na.prototype.parseMedia,Na.prototype.setManifestType=Na.prototype.setManifestType,Na.prototype.setSequenceMode=Na.prototype.setSequenceMode,Na.prototype.parseInit=Na.prototype.parseInit;var fG=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,dG=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ji["application/x-subtitle-lrc"]=function(){return new Na};function va(){}va.prototype.parseInit=function(){},va.prototype.setSequenceMode=function(){},va.prototype.setManifestType=function(){},va.prototype.parseMedia=function(e,t,n){var r=Vr(e);if(e=[],r=="")return e;var u=Fl(r,"tt");if(!u)throw new gt(2,2,2005,"Failed to parse TTML.");if(r=Ca(u,"body")[0],!r)return[];var c=ca(u,Zp,"frameRate"),f=ca(u,Zp,"subFrameRate"),h=ca(u,Zp,"frameRateMultiplier"),E=ca(u,Zp,"tickRate"),S=ca(u,Zp,"cellResolution"),k=u.attributes["xml:space"]||"default",G=ca(u,cy,"extent");if(k!="default"&&k!="preserve")throw new gt(2,2,2005,"Invalid xml:space value: "+k);k=k=="default",c=new gG(c,f,h,E),S=S&&(S=/^(\d+) (\d+)$/.exec(S))?{Sb:parseInt(S[1],10),rows:parseInt(S[2],10)}:null,f=(f=Ca(u,"metadata")[0])?f.children:[],h=Ca(u,"style"),u=Ca(u,"region"),E=[];for(var te=m(u),z=te.next();!z.done;z=te.next()){var ve=z.value;z=new Br;var Le=ve.attributes["xml:id"];if(Le){z.id=Le;var De=null;G&&(De=B1.exec(G)||j1.exec(G)),Le=De?Number(De[1]):null,De=De?Number(De[2]):null;var qe,Te=uy(ve,h,"extent");if(Te){var Qe=(qe=B1.exec(Te))||j1.exec(Te);Qe!=null&&(z.width=Number(Qe[1]),z.height=Number(Qe[2]),qe||(Le!=null&&(z.width=100*z.width/Le),De!=null&&(z.height=100*z.height/De)),z.widthUnits=qe||Le!=null?qr:0,z.heightUnits=qe||De!=null?qr:0)}(ve=uy(ve,h,"origin"))&&(Qe=(qe=B1.exec(ve))||j1.exec(ve),Qe!=null&&(z.viewportAnchorX=Number(Qe[1]),z.viewportAnchorY=Number(Qe[2]),qe?Te||(z.width=100-z.viewportAnchorX,z.widthUnits=qr,z.height=100-z.viewportAnchorY,z.heightUnits=qr):(De!=null&&(z.viewportAnchorY=100*z.viewportAnchorY/De),Le!=null&&(z.viewportAnchorX=100*z.viewportAnchorX/Le)),z.viewportAnchorUnits=qe||Le!=null?qr:0))}else z=null;z&&E.push(z)}if(Wr(r,"p").length)throw new gt(2,2,2001,"<p> can only be inside <div> in TTML");for(G=m(Wr(r,"div")),te=G.next();!te.done;te=G.next())if(Wr(te.value,"span").length)throw new gt(2,2,2001,"<span> can only be inside <p> in TTML");return(t=N2(r,t,c,f,h,u,E,k,S,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function N2(e,t,n,r,u,c,f,h,E,S,k,G){var te=S;if(zf(e)){if(!k)return null;var z={tagName:"span",children:[Ci(e)],attributes:{},parent:null}}else z=e;for(var ve=null,Le=m(j2),De=Le.next();!De.done&&!(ve=ly(z,"backgroundImage",r,"#",De.value)[0]);De=Le.next());Le=null;var qe=ca(z,j2,"backgroundImage");if(G&&qe&&!qe.startsWith("#")&&(De=new si(G),qe=new si(qe),(De=De.resolve(qe).toString())&&(Le=De)),(e.tagName=="p"||ve||Le)&&(k=!0),e=k,De=(z.attributes["xml:space"]||(h?"default":"preserve"))=="default",qe=z.children.every(zf),h=[],!qe)for(var Te=m(z.children),Qe=Te.next();!Qe.done;Qe=Te.next())(Qe=N2(Qe.value,t,n,r,u,c,f,De,E,z,k,G))&&h.push(Qe);if(r=S!=null,G=Ci(z),G=z.children.length&&G&&/\S/.test(G),Qe=z.attributes.begin||z.attributes.end||z.attributes.dur,!(Qe||G||z.tagName=="br"||h.length!=0||r&&!De))return null;for(Te=P2(z,n),G=Te.start,Te=Te.end;te&&te.tagName&&te.tagName!="tt";)Te=pG(te,n,G,Te),G=Te.start,Te=Te.end,te=te.parent;if(G==null&&(G=0),G+=t.periodStart,Te=Te==null?1/0:Te+t.periodStart,G=Math.max(G,t.segmentStart),Te=Math.min(Te,t.segmentEnd),!Qe&&0<h.length)for(G=1/0,Te=0,t=m(h),n=t.next();!n.done;n=t.next())n=n.value,G=Math.min(G,n.startTime),Te=Math.max(Te,n.endTime);if(z.tagName=="br")return u=new Cn(G,Te,""),u.lineBreak=!0,u;if(t="",qe&&(t=bo(Ci(z)||""),De&&(t=t.replace(/\s+/g," "))),t=new Cn(G,Te,t),t.nestedCues=h,k||(t.isContainer=!0),E&&(t.cellResolution=E),E=ly(z,"region",c,"")[0],z.attributes.region&&E&&E.attributes["xml:id"]){var Ue=E.attributes["xml:id"];t.region=f.filter(function(vt){return vt.id==Ue})[0]}return f=E,S&&r&&!z.attributes.region&&!z.attributes.style&&(f=ly(S,"region",c,"")[0]),hG(t,z,f,ve,Le,u,e,h.length==0),t}function hG(e,t,n,r,u,c,f,h){if(f=f||h,_o(t,n,c,"direction",f)=="rtl"&&(e.direction="rtl"),h=_o(t,n,c,"writingMode",f),h=="tb"||h=="tblr"?e.writingMode="vertical-lr":h=="tbrl"?e.writingMode="vertical-rl":h=="rltb"||h=="rl"?e.direction="rtl":h&&(e.direction=Vn),(h=_o(t,n,c,"textAlign",!0))?(e.positionAlign=yG[h],e.lineAlign=vG[h],e.textAlign=er[h.toUpperCase()]):e.textAlign=kn,(h=_o(t,n,c,"displayAlign",!0))&&(e.displayAlign=Ur[h.toUpperCase()]),(h=_o(t,n,c,"color",f))&&(e.color=h),(h=_o(t,n,c,"backgroundColor",f))&&(e.backgroundColor=h),(h=_o(t,n,c,"border",f))&&(e.border=h),h=_o(t,n,c,"fontFamily",f))switch(h){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=h}switch((h=_o(t,n,c,"fontWeight",f))&&h=="bold"&&(e.fontWeight=700),h=_o(t,n,c,"wrapOption",f),e.wrapLine=!(h&&h=="noWrap"),(h=_o(t,n,c,"lineHeight",f))&&h.match(xd)&&(e.lineHeight=h),(h=_o(t,n,c,"fontSize",f))&&(h.match(xd)||h.match(mG))&&(e.fontSize=h),(h=_o(t,n,c,"fontStyle",f))&&(e.fontStyle=no[h.toUpperCase()]),r?(u=r.attributes.imageType||r.attributes.imagetype,h=r.attributes.encoding,r=Ci(r).trim(),u=="PNG"&&h=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):u&&(e.backgroundImage=u),(r=_o(t,n,c,"textOutline",f))&&(r=r.split(" "),r[0].match(xd)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(xd)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=_o(t,n,c,"letterSpacing",f))&&r.match(xd)&&(e.letterSpacing=r),(r=_o(t,n,c,"linePadding",f))&&r.match(xd)&&(e.linePadding=r),(r=_o(t,n,c,"opacity",f))&&(e.opacity=parseFloat(r)),(r=uy(n,c,"textDecoration"))&&M2(e,r),(r=k1(t,c,"textDecoration"))&&M2(e,r),(r=_o(t,n,c,"textCombine",f))&&(e.textCombineUpright=r),_o(t,n,c,"ruby",f)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function M2(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&mn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&mn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&mn(e.textDecoration,"overline")}}function _o(e,t,n,r,u){return u=u===void 0?!0:u,(e=k1(e,n,r))?e:u?uy(t,n,r):null}function uy(e,t,n){if(!e)return null;var r=ca(e,cy,n);return r||D2(e,t,n)}function k1(e,t,n){var r=ca(e,cy,n);return r||D2(e,t,n)}function D2(e,t,n){e=ly(e,"style",t,"");for(var r=null,u=0;u<e.length;u++){var c=yu(e[u],"urn:ebu:tt:style",n);c||(c=ca(e[u],cy,n)),c||(c=k1(e[u],t,n)),c&&(r=c)}return r}function ly(e,t,n,r,u){var c=[];if(!e||1>n.length)return c;var f=e;for(e=null;!e&&!(e=u?yu(f,u,t):f.attributes[t])&&(f=f.parent,f););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),f=e.next();!f.done;f=e.next())if(f=f.value,r+f.attributes["xml:id"]==u){c.push(f);break}}return c}function pG(e,t,n,r){return e=P2(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function P2(e,t){var n=F1(e.attributes.begin,t),r=F1(e.attributes.end,t);return e=F1(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function F1(e,t){var n=null;if(O2.test(e)){e=O2.exec(e),n=Number(e[1]);var r=Number(e[2]),u=Number(e[3]),c=Number(e[4]);c+=(Number(e[5])||0)/t.h,u+=c/t.frameRate,n=u+60*r+3600*n}else if(L2.test(e))n=U1(L2,e);else if(k2.test(e))n=U1(k2,e);else if(F2.test(e))e=F2.exec(e),n=Number(e[1])/t.frameRate;else if(U2.test(e))e=U2.exec(e),n=Number(e[1])/t.g;else if(B2.test(e))n=U1(B2,e);else if(e)throw new gt(2,2,2001,"Could not parse cue time range in TTML");return n}function U1(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}re("shaka.text.TtmlTextParser",va),va.prototype.parseMedia=va.prototype.parseMedia,va.prototype.setManifestType=va.prototype.setManifestType,va.prototype.setSequenceMode=va.prototype.setSequenceMode,va.prototype.parseInit=va.prototype.parseInit;function gG(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var B1=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,mG=/^(\d{1,2}(?:\.\d+)?|100)%$/,xd=/^(\d+px|\d+em|\d*\.?\d+c)$/,j1=/^(\d+)px (\d+)px$/,O2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,L2=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,k2=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,F2=/^(\d*(?:\.\d*)?)f$/,U2=/^(\d*(?:\.\d*)?)t$/,B2=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),vG={left:bn,center:"center",right:"end",start:bn,end:"end"},yG={left:"line-left",center:"center",right:"line-right"},Zp=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],cy=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],j2=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ji["application/ttml+xml"]=function(){return new va};function Lo(){this.g=new va}Lo.prototype.parseInit=function(e){var t=!1;if(new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).box("minf",yr).box("stbl",yr).O("stsd",mu).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new gt(2,2,2007)},Lo.prototype.setSequenceMode=function(){},Lo.prototype.setManifestType=function(){},Lo.prototype.parseMedia=function(e,t,n){var r=this,u=!1,c=[];if(new Fr().box("mdat",$u(function(f){u=!0,c=c.concat(r.g.parseMedia(f,t,n))})).parse(e,!1),!u)throw new gt(2,2,2007);return c},re("shaka.text.Mp4TtmlParser",Lo),Lo.prototype.parseMedia=Lo.prototype.parseMedia,Lo.prototype.setManifestType=Lo.prototype.setManifestType,Lo.prototype.setSequenceMode=Lo.prototype.setSequenceMode,Lo.prototype.parseInit=Lo.prototype.parseInit,ji['application/mp4; codecs="stpp"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml"']=function(){return new Lo},ji['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Lo},ji['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Lo};function ko(){this.h=!1,this.g="UNKNOWN"}ko.prototype.parseInit=function(){},ko.prototype.setSequenceMode=function(e){this.h=e},ko.prototype.setManifestType=function(e){this.g=e},ko.prototype.parseMedia=function(e,t){e=Vr(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new gt(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new gt(2,2,2e3);if(e=fy(new Hc(e[1])),e==null)throw new gt(2,2,2e3);e=t.periodStart+Number(r[1])/9e4-e}else e=t.segmentStart;t=[],r=m(n[0].split("\n"));for(var u=r.next();!u.done;u=r.next())if(u=u.value,/^Region:/.test(u)){u=new Hc(u);var c=new Br;Kc(u),wd(u);for(var f=Kc(u);f;){var h=c,E=f;(f=/^id=(.*)$/.exec(E))?h.id=f[1]:(f=/^width=(\d{1,2}|100)%$/.exec(E))?h.width=Number(f[1]):(f=/^lines=(\d+)$/.exec(E))?(h.height=Number(f[1]),h.heightUnits=2):(f=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.regionAnchorX=Number(f[1]),h.regionAnchorY=Number(f[2])):(f=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(E))?(h.viewportAnchorX=Number(f[1]),h.viewportAnchorY=Number(f[2])):/^scroll=up$/.exec(E)&&(h.scroll="up"),wd(u),f=Kc(u)}t.push(c)}for(r=new Map,Z2(r),u=[],n=m(n.slice(1)),c=n.next();!c.done;c=n.next()){if(c=c.value.split("\n"),(c.length!=1||c[0])&&!/^NOTE($|[ \t])/.test(c[0])&&c[0]=="STYLE"){for(h=[],f=-1,E=1;E<c.length;E++)c[E].includes("::cue")&&(h.push([]),f=h.length-1),f!=-1&&(h[f].push(c[E]),c[E].includes("}")&&(f=-1));for(h=m(h),f=h.next();!f.done;f=h.next()){var S=f.value;f="global",(E=S[0].match(/\((.*)\)/))&&(f=E.pop()),E=S.slice(1,-1),S[0].includes("}")&&(S=/\{(.*?)\}/.exec(S[0]))&&(E=S[1].split(";")),(S=r.get(f))||(S=new Cn(0,0,""));for(var k=!1,G=0;G<E.length;G++){var te=/^\s*([^:]+):\s*(.*)/.exec(E[G]);if(te){var z=te[2].trim().replace(";","");switch(te[1].trim()){case"background-color":case"background":k=!0,S.backgroundColor=z;break;case"color":k=!0,S.color=z;break;case"font-family":k=!0,S.fontFamily=z;break;case"font-size":k=!0,S.fontSize=z;break;case"font-weight":(700<=parseInt(z,10)||z=="bold")&&(k=!0,S.fontWeight=700);break;case"font-style":switch(z){case"normal":k=!0,S.fontStyle=Yi;break;case"italic":k=!0,S.fontStyle="italic";break;case"oblique":k=!0,S.fontStyle="oblique"}break;case"opacity":k=!0,S.opacity=parseFloat(z);break;case"text-combine-upright":k=!0,S.textCombineUpright=z;break;case"text-shadow":k=!0,S.textShadow=z;break;case"white-space":k=!0,S.wrapLine=z!="noWrap"}}}k&&r.set(f,S)}}if(k=e,c.length==1&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||c[0]=="STYLE"||c[0]=="REGION")c=null;else if(h=null,c[0].includes("-->")||(h=c[0],c.splice(0,1)),f=new Hc(c[0]),E=fy(f),G=Gl(f,/[ \t]+--\x3e[ \t]+/g),S=fy(f),E==null||G==null||S==null)Ke("Failed to parse VTT time code. Cue skipped:",h,c),c=null;else{for(E+=k,S+=k,c=c.slice(1).join("\n").trim(),r.has("global")?(k=r.get("global").clone(),k.startTime=E,k.endTime=S,k.payload=""):k=new Cn(E,S,""),wd(f),E=Kc(f);E;)H2(k,E,t),wd(f),E=Kc(f);G2(c,k,r),h!=null&&(k.id=h),c=k}c&&u.push(c)}return u};function Z2(e){for(var t=m(Object.entries(ar)),n=t.next();!n.done;n=t.next()){var r=m(n.value);n=r.next().value,r=r.next().value;var u=new Cn(0,0,"");u.color=r,e.set("."+n,u)}for(t=m(Object.entries(br)),n=t.next();!n.done;n=t.next())r=m(n.value),n=r.next().value,r=r.next().value,u=new Cn(0,0,""),u.backgroundColor=r,e.set("."+n,u)}function G2(e,t,n){if(e.includes("<")){n.size===0&&Z2(n);var r=e;e=[];for(var u=-1,c=0;c<r.length;c++)r[c]==="<"?u=c+1:r[c]===">"&&0<u&&(u=r.substr(u,c-u),u.match(K2)&&e.push(u),u=-1);for(e=m(e),c=e.next();!c.done;c=e.next())c=c.value,r=r.replace("<"+c+">",'<div time="'+c+'">'),r+="</div>";e=r;e:{c=e,u=[];var f=-1;e="",r=!1;for(var h=0;h<c.length;h++)if(c[h]==="/"){var E=c.indexOf(">",h);if(E===-1){e=c;break e}if((E=c.substring(h+1,E))&&E=="v"){r=!0;var S=null;if(u.length&&(S=u[u.length-1]),S){if(S===E)e+="/"+E+">";else{if(!S.startsWith("v")){e+=c[h];continue}e+="/"+S+">"}h+=E.length+1}else e+=c[h]}else e+=c[h]}else c[h]==="<"?(f=h+1,c[f]!="v"&&(f=-1)):c[h]===">"&&0<f&&(u.push(c.substr(f,h-f)),f=-1),e+=c[h];for(c=m(u),u=c.next();!u.done;u=c.next())u=u.value,f=u.replace(" ",".voice-"),e=e.replace("<"+u+">","<"+f+">"),e=e.replace("</"+u+">","</"+f+">"),r||(e+="</"+f+">")}e=EG(e);try{var k=Fl("<span>"+e+"</span>","span")}catch(G){}if(k)if(k=k.children,k.length!=1||k[0].tagName)for(k=m(k),e=k.next();!e.done;e=k.next())q2(e.value,t,n);else t.payload=bo(e);else t.payload=bo(e)}else t.payload=bo(e)}function EG(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function Gp(e,t){return e&&0<e.length?e:t}function q2(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new Br,r.position=null,r.size=0,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),c=u.next();!c.done;c=u.next()){var f=c=c.value;if(f.startsWith(".voice-")){var h=f.split("-").pop();f='v[voice="'+h+'"]',n.has(f)||(f="v[voice="+h+"]")}switch(n.has(f)&&(f=n.get(f))&&(r.backgroundColor=Gp(f.backgroundColor,r.backgroundColor),r.color=Gp(f.color,r.color),r.fontFamily=Gp(f.fontFamily,r.fontFamily),r.fontSize=Gp(f.fontSize,r.fontSize),r.textShadow=Gp(f.textShadow,r.textShadow),r.fontWeight=f.fontWeight,r.fontStyle=f.fontStyle,r.opacity=f.opacity,r.rubyTag=f.rubyTag,r.textCombineUpright=f.textCombineUpright,r.wrapLine=f.wrapLine),c){case"br":r=Rn(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(c=e.attributes.color)&&(r.color=c);break;case"div":if(c=e.attributes.time,!c)break;(c=fy(new Hc(c)))&&(r.startTime=c);break;case"ruby":case"rp":case"rt":r.rubyTag=c}}if(u=e.children,zf(e)||u.length==1&&zf(u[0]))for(n=Ci(e).split("\n"),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Rn(r.startTime,r.endTime),t.nestedCues.push(e)),0<u.length&&(e=r.clone(),e.payload=bo(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=m(u),e=t.next();!e.done;e=t.next())q2(e.value,r,n)}function H2(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=kn:e.textAlign=er[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Bn)):(r=/^region:(.*)$/.exec(t))?(t=_G(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=cn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Jn[n[2].toUpperCase()]))}function _G(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function fy(e){if(e=Gl(e,K2),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}re("shaka.text.VttTextParser",ko),ko.prototype.parseMedia=ko.prototype.parseMedia,ko.prototype.setManifestType=ko.prototype.setManifestType,ko.prototype.setSequenceMode=ko.prototype.setSequenceMode,ko.prototype.parseInit=ko.prototype.parseInit;var K2=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ji["text/vtt"]=function(){return new ko},ji['text/vtt; codecs="vtt"']=function(){return new ko},ji['text/vtt; codecs="wvtt"']=function(){return new ko};function Ma(){this.g=null}Ma.prototype.parseInit=function(e){var t=this,n=!1;if(new Fr().box("moov",yr).box("trak",yr).box("mdia",yr).O("mdhd",function(r){r=bt(r.reader,r.version),t.g=r.timescale}).box("minf",yr).box("stbl",yr).O("stsd",mu).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new gt(2,2,2008);if(!n)throw new gt(2,2,2008)},Ma.prototype.setSequenceMode=function(){},Ma.prototype.setManifestType=function(){},Ma.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new gt(2,2,2008);var n=0,r=[],u,c=[],f=!1,h=!1,E=!1,S=null;if(new Fr().box("moof",yr).box("traf",yr).O("tfdt",function(Qe){f=!0,n=ir(Qe.reader,Qe.version).baseMediaDecodeTime}).O("tfhd",function(Qe){S=rr(Qe.reader,Qe.flags).Wf}).O("trun",function(Qe){h=!0,r=Xt(Qe.reader,Qe.version,Qe.flags).vg}).box("mdat",$u(function(Qe){E=!0,u=Qe})).parse(e,!1),!E&&!f&&!h)throw new gt(2,2,2008);e=n;for(var k=new Dr(u,0),G=m(r),te=G.next();!te.done;te=G.next()){te=te.value;var z=te.wf||S,ve=te.he?n+te.he:e;e=ve+(z||0);var Le=0;do{var De=k.M();Le+=De;var qe=k.M(),Te=null;Kf(qe)=="vttc"?8<De&&(Te=k.sb(De-8)):k.skip(De-8),z&&Te&&(De=TG(Te,t.periodStart+ve/this.g,t.periodStart+e/this.g),c.push(De))}while(te.sampleSize&&Le<te.sampleSize)}return c.filter(Bu)};function TG(e,t,n){var r,u,c;return new Fr().box("payl",$u(function(f){r=Vr(f)})).box("iden",$u(function(f){u=Vr(f)})).box("sttg",$u(function(f){c=Vr(f)})).parse(e),r?SG(r,u,c,t,n):null}function SG(e,t,n,r,u){if(r=new Cn(r,u,""),G2(e,r,new Map),t&&(r.id=t),n)for(e=new Hc(n),t=Kc(e);t;)H2(r,t,[]),wd(e),t=Kc(e);return r}re("shaka.text.Mp4VttParser",Ma),Ma.prototype.parseMedia=Ma.prototype.parseMedia,Ma.prototype.setManifestType=Ma.prototype.setManifestType,Ma.prototype.setSequenceMode=Ma.prototype.setSequenceMode,Ma.prototype.parseInit=Ma.prototype.parseInit,ji['application/mp4; codecs="wvtt"']=function(){return new Ma};function Da(){}Da.prototype.parseInit=function(){},Da.prototype.setSequenceMode=function(){},Da.prototype.setManifestType=function(){},Da.prototype.parseMedia=function(e){var t=Vr(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var r=new Hc(n[0]),u=V2(r),c=Gl(r,/,/g);if(r=V2(r),u==null||c==null||r==null)throw new gt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Cn(u,r,n.slice(1).join("\n").trim()))}return e};function V2(e){if(e=Gl(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}re("shaka.text.SbvTextParser",Da),Da.prototype.parseMedia=Da.prototype.parseMedia,Da.prototype.setManifestType=Da.prototype.setManifestType,Da.prototype.setSequenceMode=Da.prototype.setSequenceMode,Da.prototype.parseInit=Da.prototype.parseInit,ji["text/x-subviewer"]=function(){return new Da};function ya(){this.g=new ko}ya.prototype.parseInit=function(){},ya.prototype.setSequenceMode=function(){},ya.prototype.setManifestType=function(){},ya.prototype.parseMedia=function(e,t,n){return e=Vr(e),e=z2(e),e=Qn(Va(e)),this.g.parseMedia(e,t,n)};function z2(e){var t="WEBVTT\n\n";if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}re("shaka.text.SrtTextParser",ya),ya.srt2webvtt=z2,ya.prototype.parseMedia=ya.prototype.parseMedia,ya.prototype.setManifestType=ya.prototype.setManifestType,ya.prototype.setSequenceMode=ya.prototype.setSequenceMode,ya.prototype.parseInit=ya.prototype.parseInit,ji["text/srt"]=function(){return new ya};function Pa(){}Pa.prototype.parseInit=function(){},Pa.prototype.setSequenceMode=function(){},Pa.prototype.setManifestType=function(){},Pa.prototype.parseMedia=function(e){var t="",n="";e=Vr(e).split(/\r?\n\s*\r?\n/),e=m(e);for(var r=e.next();!r.done;r=e.next()){var u=AG.exec(r.value);u&&(r=u[1],u=u[2],r=="V4 Styles"||r=="V4+ Styles"?t=u:r=="Events"&&(n=u))}e=[],r=null,t=m(t.split(/\r?\n/));for(var c=t.next();!c.done;c=t.next())if(u=c.value,!/^\s*;/.test(u)&&(c=$2.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")r=c.split(dy);else if(u=="Style"){u=c.split(dy),c={};for(var f=0;f<r.length&&f<u.length;f++)c[r[f]]=u[f];e.push(c)}}for(r=[],t=null,u={},n=m(n.split(/\r?\n/)),c=n.next();!c.done;u={re:u.re},c=n.next())if(c=c.value,!/^\s*;/.test(c)&&(f=$2.exec(c))){if(c=f[1].trim(),f=f[2].trim(),c=="Format")t=f.split(dy);else if(c=="Dialogue"){f=f.split(dy),c={};for(var h=0;h<t.length&&h<f.length;h++)c[t[h]]=f[h];h=W2(c.Start);var E=W2(c.End);f=new Cn(h,E,f.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),u.re=c.Style,(c=e.find(function(S){return function(k){return k.Name==S.re}}(u)))&&wG(f,c),r.push(f)}}return r};function wG(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=Y2(n))&&(e.color=n),(n=t.BackColour)&&(n=Y2(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Er,e.textAlign="start";break;case 2:e.displayAlign=Er,e.textAlign=kn;break;case 3:e.displayAlign=Er,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=kn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=kn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function Y2(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function W2(e){return e=IG.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}re("shaka.text.SsaTextParser",Pa),Pa.prototype.parseMedia=Pa.prototype.parseMedia,Pa.prototype.setManifestType=Pa.prototype.setManifestType,Pa.prototype.setSequenceMode=Pa.prototype.setSequenceMode,Pa.prototype.parseInit=Pa.prototype.parseInit;var AG=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,$2=/^\s*([^:]+):\s*(.*)/,dy=/\s*,\s*/,IG=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ji["text/x-ssa"]=function(){return new Pa};function X2(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,U:e}:null}function Q2(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,c=(e[t+2]&1)<<2;return c|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:c,Ea:"mp4a.40."+u}}function J2(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function bG(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Oa(e){this.i=e,this.h=0,this.g=new Map}g=Oa.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Do(t)||"mp4a.40.2")+'"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){for(var u=Qn(e),c=xn(u),f=c.length;f<u.length&&!J2(u,f);f++);if(e=1e3*n.endTime,c=Dn(c),c.length&&n&&(n=c.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=Q2(u,f),!n)return Promise.reject(new gt(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,c=[];f<u.length;){var h=X2(u,f);if(!h)return Promise.reject(new gt(2,3,3018));var E=h.Qd+h.U;f+E<=u.length&&c.push({data:u.subarray(f+h.Qd,f+E),size:h.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),f+=E}return u=n.sampleRate,e=Math.floor(e*u/1e3),r={id:t.id,type:"audio",codecs:n.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:c},stream:t},e=new Id([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=bd(e),this.g.set(t.id,r)),t=Dp(e),this.h++,t=li(r,t),Promise.resolve(t)},re("shaka.transmuxer.AacTransmuxer",Oa),Oa.prototype.transmux=Oa.prototype.transmux,Oa.prototype.getOriginalMimeType=Oa.prototype.getOriginalMimeType,Oa.prototype.convertCodecs=Oa.prototype.convertCodecs,Oa.prototype.isSupported=Oa.prototype.isSupported,Oa.prototype.destroy=Oa.prototype.destroy,wo("audio/aac",function(){return new Oa("audio/aac")},bi);function eD(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+u>e.length)return null;var c=e[t+6]>>5,f=0;c===2?f+=2:(c&1&&c!==1&&(f+=2),c&4&&(f+=2)),f=(e[t+6]<<8|e[t+7])>>12-f&1;var h=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|h>>2,(h&3)<<6|c<<3|f<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][c]+f,ga:e,U:u}}function CG(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var u,c;0<r;){c=e[t];var f=Math.min(r,8),h=8-f;u=4278190080>>>24+h<<h,u=(c&u)>>h,n=n?n<<f|u:u,t+=1,r-=f}if(16>n)return!0}return!1}function ns(e){this.i=e,this.h=0,this.g=new Map}g=ns.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=xn(e),c=u.length;c<e.length&&!CG(e,c);c++);var f=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=eD(e,c);if(!E)return Promise.reject(new gt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(f*n/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new Id([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=bd(e),this.g.set(t.id,r)),t=Dp(e),this.h++,t=li(r,t),Promise.resolve(t)},re("shaka.transmuxer.Ac3Transmuxer",ns),ns.prototype.transmux=ns.prototype.transmux,ns.prototype.getOriginalMimeType=ns.prototype.getOriginalMimeType,ns.prototype.convertCodecs=ns.prototype.convertCodecs,ns.prototype.isSupported=ns.prototype.isSupported,ns.prototype.destroy=ns.prototype.destroy,wo("audio/ac3",function(){return new ns("audio/ac3")},bi);function tD(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Nn(e.subarray(t+2));Gn(n,2),Gn(n,3);var r=Ct(n,11)+1<<1,u=Ct(n,2);if(u==3){u=Ct(n,2),u=[24e3,22060,16e3][u];var c=3}else u=[48e3,44100,32e3][u],c=Ct(n,2);var f=Ct(n,3),h=Ct(n,1);return n=Ct(n,5),t+r>e.byteLength?null:(e=Math.floor(r*u/(16*[1,2,3,6][c])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|f<<1|h<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][f]+h,ga:e,U:r})}function rs(e){this.i=e,this.h=0,this.g=new Map}g=rs.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){e=Qn(e);for(var u=xn(e),c=u.length;c<e.length&&(e[c]<<8|e[c+1]<<0)!==2935;c++);var f=1e3*n.endTime;u=Dn(u),u.length&&n&&(n=u.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&(f=n.data),n=0,u=new Uint8Array([]);for(var h=[];c<e.length;){var E=tD(e,c);if(!E)return Promise.reject(new gt(2,3,3018));t.audioSamplingRate=E.sampleRate,t.channelsCount=E.channelCount,n=E.sampleRate,u=E.ga,h.push({data:e.subarray(c,c+E.U),size:E.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),c+=E.U}return e=Math.floor(f*n/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:r,Sa:[],ga:u,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:e,Ra:h},stream:t},e=new Id([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=bd(e),this.g.set(t.id,r)),t=Dp(e),this.h++,t=li(r,t),Promise.resolve(t)},re("shaka.transmuxer.Ec3Transmuxer",rs),rs.prototype.transmux=rs.prototype.transmux,rs.prototype.getOriginalMimeType=rs.prototype.getOriginalMimeType,rs.prototype.convertCodecs=rs.prototype.convertCodecs,rs.prototype.isSupported=rs.prototype.isSupported,rs.prototype.destroy=rs.prototype.destroy,wo("audio/ec3",function(){return new rs("audio/ec3")},bi);function RG(e){if(!e.length)return null;var t=e.find(function(Le){return Le.type==7});if(e=e.find(function(Le){return Le.type==8}),!t||!e)return null;var n=new Nn(t.data),r=nt(n);if(nt(n),nt(n),En(n),NG.includes(r)&&(r=Lt(n),r===3&&Gn(n,1),En(n),En(n),Gn(n,1),ct(n))){r=r!==3?8:12;for(var u=0;u<r;u++)ct(n)&&(6>u?Kt(n,16):Kt(n,64))}if(En(n),r=Lt(n),r===0)Lt(n);else if(r===1)for(Gn(n,1),En(n),En(n),r=Lt(n),u=0;u<r;u++)En(n);En(n),Gn(n,1);var c=Lt(n),f=Lt(n),h=Ct(n,1);h===0&&Gn(n,1),Gn(n,1);var E=0,S=0,k=0,G=0;if(ct(n)&&(E=Lt(n),S=Lt(n),k=Lt(n),G=Lt(n)),u=r=1,ct(n)&&ct(n)){var te=nt(n),z=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ve=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<te&&16>=te?(r=z[te-1],u=ve[te-1]):te===255&&(r=Ct(n,16),u=Ct(n,16))}return n=(2-h)*(f+1)*16-2*k-2*G,c=16*(c+1)-2*E-2*S,E=[],t=t.fullData,E.push(t.byteLength>>>8&255),E.push(t.byteLength&255),E=E.concat.apply(E,T(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,T(e)),e=new Uint8Array([1,E[3],E[4],E[5],255,225].concat(E,[1],t)),{height:n,width:c,oa:e,xa:r,ya:u}}function xG(e){var t=!1,n=[],r=e.find(function(E){return E.type==7}),u=!1;e=m(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var f=!1;switch(c.type){case 1:f=u=!0;var h=c.data;r&&4<h.length&&(h=ze(new Nn(h)),h===2||h===4||h===7||h===9)&&(t=!0);break;case 5:t=f=u=!0;break;case 6:f=!0;break;case 7:f=!0;break;case 8:f=!0;break;case 9:u=f=!0;break;case 12:f=!0;break;default:f=!1}u&&f&&(f=c.fullData.byteLength,h=new Uint8Array(4),h[0]=f>>24&255,h[1]=f>>16&255,h[2]=f>>8&255,h[3]=f&255,n.push(h),n.push(c.fullData))}return n.length?{data:li.apply(Pi,T(n)),jd:t}:null}var NG=[100,110,122,244,44,83,86,118,128,138,139,134];function MG(e){if(!e.length)return null;var t=e.find(function(f){return f.type==32}),n=e.find(function(f){return f.type==33}),r=e.find(function(f){return f.type==34});if(!t||!n||!r)return null;var u=DG(t.fullData);e=PG(n.fullData);var c=OG(r.fullData);return t=LG(t.fullData,n.fullData,r.fullData,{jf:u.jf,Gf:u.Gf,Qe:e.Qe,Re:e.Re,Ke:e.Ke,Pe:e.Pe,Le:e.Le,Me:e.Me,Ne:e.Ne,Oe:e.Oe,Ee:e.Ee,Fe:e.Fe,Ge:e.Ge,He:e.He,Ie:e.Ie,Je:e.Je,Be:e.Be,be:e.be,Ae:e.Ae,ze:e.ze,ye:e.ye,pf:c.pf}),{height:e.height,width:e.width,oa:t,xa:e.pi,ya:e.oi}}function DG(e){var t=new Nn(e,!0);return nt(t),nt(t),Ct(t,4),Ct(t,2),Ct(t,6),e=Ct(t,3),t=ct(t),{jf:e+1,Gf:t}}function PG(e){e=new Nn(e,!0),nt(e),nt(e);var t=0,n=0,r=0,u=0;Ct(e,4);var c=Ct(e,3);ct(e);for(var f=Ct(e,2),h=Ct(e,1),E=Ct(e,5),S=nt(e),k=nt(e),G=nt(e),te=nt(e),z=nt(e),ve=nt(e),Le=nt(e),De=nt(e),qe=nt(e),Te=nt(e),Qe=nt(e),Ue=[],vt=[],xt=0;xt<c;xt++)Ue.push(ct(e)),vt.push(ct(e));if(0<c)for(xt=c;8>xt;xt++)Ct(e,2);for(xt=0;xt<c;xt++)Ue[xt]&&Ct(e,88),vt[xt]&&nt(e);Lt(e),Ue=Lt(e),Ue==3&&Ct(e,1),vt=Lt(e),xt=Lt(e),ct(e)&&(t+=Lt(e),n+=Lt(e),r+=Lt(e),u+=Lt(e));var Vt=Lt(e),Bt=Lt(e),_t=Lt(e);if(ct(e))for(var Zt=0;Zt<=c;Zt++)Lt(e),Lt(e),Lt(e);else Lt(e),Lt(e),Lt(e);if(Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),Lt(e),ct(e)&&ct(e))for(Zt=0;4>Zt;Zt++)for(var ln=0;ln<(Zt===3?2:6);ln++)if(ct(e)){var pn=Math.min(64,1<<4+(Zt<<1));1<Zt&&On(e);for(var Ln=0;Ln<pn;Ln++)On(e)}else Lt(e);for(ct(e),ct(e),ct(e)&&(nt(e),Lt(e),Lt(e),ct(e)),Zt=Lt(e),pn=ln=0;pn<Zt;pn++)if(Ln=!1,pn!==0&&(Ln=ct(e)),Ln){pn===Zt&&Lt(e),ct(e),Lt(e);for(var Mn=Ln=0;Mn<=ln;Mn++){var qn=ct(e),Yn=!1;qn||(Yn=ct(e)),(qn||Yn)&&Ln++}ln=Ln}else{for(Mn=Lt(e),Ln=Lt(e),ln=Mn+Ln,qn=0;qn<Mn;qn++)Lt(e),ct(e);for(Mn=0;Mn<Ln;Mn++)Lt(e),ct(e)}if(ct(e))for(Zt=Lt(e),ln=0;ln<Zt;ln++){for(pn=0;pn<_t+4;pn++)Ct(e,1);Ct(e,1)}if(Zt=_t=1,ln=0,ct(e),ct(e),ct(e)){if(ct(e)&&(pn=nt(e),Ln=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Mn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<pn&&16>=pn?(_t=Ln[pn-1],Zt=Mn[pn-1]):pn===255&&(_t=Ct(e,16),Zt=Ct(e,16))),ct(e)&&ct(e),ct(e)&&(Ct(e,3),ct(e),ct(e)&&(nt(e),nt(e),nt(e))),ct(e)&&(Lt(e),Lt(e)),ct(e),ct(e),ct(e),(pn=ct(e))&&(Lt(e),Lt(e),Lt(e),Lt(e)),ct(e)&&(Ct(e,32),Ct(e,32),ct(e)&&Lt(e),ct(e)))for(Mn=!1,pn=ct(e),Ln=ct(e),(pn||Ln)&&((Mn=ct(e))&&(nt(e),Ct(e,5),ct(e),Ct(e,5)),Ct(e,4),Ct(e,4),Mn&&Ct(e,4),Ct(e,5),Ct(e,5),Ct(e,5)),qn=0;qn<=c;qn++){var Kn=!0;Yn=1,ct(e)||(Kn=ct(e));var Nr=!1;if(Kn?Lt(e):Nr=ct(e),Nr||(Yn=Lt(e)+1),pn){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));ct(e)}if(Ln){for(Kn=0;Kn<Yn;Kn++)Lt(e),Lt(e),Mn&&(Lt(e),Lt(e));ct(e)}}ct(e)&&(ct(e),ct(e),ct(e),ln=Lt(e),Lt(e),Lt(e),Lt(e),Lt(e))}return{Ke:Qe,Qe:f,Re:h,Pe:E,Le:S,Me:k,Ne:G,Oe:te,Ee:z,Fe:ve,Ge:Le,He:De,Ie:qe,Je:Te,be:ln,Be:0,Ae:Ue,ze:Vt,ye:Bt,width:vt-(t+n)*(Ue===1||Ue===2?2:1),height:xt-(r+u)*(Ue===1?2:1),pi:_t,oi:Zt}}function OG(e){var t=new Nn(e,!0);nt(t),nt(t),Lt(t),Lt(t),ct(t),ct(t),Ct(t,3),ct(t),ct(t),Lt(t),Lt(t),On(t),ct(t),ct(t),ct(t)&&Lt(t),On(t),On(t),ct(t),ct(t),ct(t),ct(t),e=ct(t),t=ct(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{pf:n}}function LG(e,t,n,r){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(r.Qe&3)<<6|(r.Re?1:0)<<5|r.Pe&31,u[2]=r.Le,u[3]=r.Me,u[4]=r.Ne,u[5]=r.Oe,u[6]=r.Ee,u[7]=r.Fe,u[8]=r.Ge,u[9]=r.He,u[10]=r.Ie,u[11]=r.Je,u[12]=r.Ke,u[13]=240|(r.be&3840)>>8,u[14]=r.be&255,u[15]=252|r.pf&3,u[16]=252|r.Ae&3,u[17]=248|r.ze&7,u[18]=248|r.ye&7,u[19]=0,u[20]=0,u[21]=(r.Be&3)<<6|(r.jf&7)<<3|(r.Gf?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function hy(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&c!==3){var f=e[t+3]>>6;u=1e3*kG[14*(n===3?3-r:r===3?3:4)+u-1],c=FG[3*(n===3?0:n===2?1:2)+c],n=UG[n][r];var h=BG[r],E=Math.floor(n*u/c+(e[t+2]>>1&1))*h,S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(S=S?parseInt(S[1],10):0)&&87>=S&&r===2&&224e3<=u&&f===0&&(e[t+3]|=128),{sampleRate:c,channelCount:f===3?1:2,U:E,ni:8*n*h}}return null}function nD(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function rD(e,t){if(t+1<e.length&&nD(e,t)){var n=hy(e,t),r=4;return n&&n.U&&(r=n.U),t+=r,t===e.length||t+1<e.length&&nD(e,t)}return!1}var kG=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],FG=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],UG=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BG=[0,1,1,4];function is(e){this.i=e,this.h=0,this.g=new Map}g=is.prototype,g.destroy=function(){this.g.clear()},g.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ot(this.convertCodecs("audio",e)):!1},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},g.getOriginalMimeType=function(){return this.i},g.transmux=function(e,t,n,r){n=Qn(e);for(var u=xn(n).length;u<n.length&&!rD(n,u);u++);var c;for(e=[];u<n.length;){var f=hy(n,u);if(!f)return Promise.reject(new gt(2,3,3018));c||(c=f),u+f.U<=n.length&&e.push({data:n.subarray(u,u+f.U),size:f.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),u+=f.U}return c?(n=9e4*c.ni/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.h,baseMediaDecodeTime:n,Ra:e},stream:t},c=new Id([r]),this.g.has(t.id)?r=this.g.get(t.id):(r=bd(c),this.g.set(t.id,r)),t=Dp(c),this.h++,t=li(r,t),Promise.resolve(t)):Promise.reject(new gt(2,3,3018))},re("shaka.transmuxer.Mp3Transmuxer",is),is.prototype.transmux=is.prototype.transmux,is.prototype.getOriginalMimeType=is.prototype.getOriginalMimeType,is.prototype.convertCodecs=is.prototype.convertCodecs,is.prototype.isSupported=is.prototype.isSupported,is.prototype.destroy=is.prototype.destroy,wo("audio/mpeg",function(){return new is("audio/mpeg")},bi);function os(e){this.h=e,this.g=null}g=os.prototype,g.destroy=function(){},g.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Do(e).split(","),n=Co("audio",t);return t=Co("video",t),!n||t||Ia(n)!="mp3"?!1:Ot(this.convertCodecs("audio",e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n,r,u){if(this.g?this.g.clearData():this.g=new Ve,e=Qn(e),e=this.g.parse(e),e.bd().audio!="mp3"||u!="audio")return Promise.reject(new gt(2,3,3018));for(u=new Uint8Array([]),e=m(e.Fb()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(r=hy(t,n))?(n+r.U<=t.length&&(u=li(u,t.subarray(n,n+r.U))),n+=r.U):n++;return Promise.resolve(u)},re("shaka.transmuxer.MpegTsTransmuxer",os),os.prototype.transmux=os.prototype.transmux,os.prototype.getOriginalMimeType=os.prototype.getOriginalMimeType,os.prototype.convertCodecs=os.prototype.convertCodecs,os.prototype.isSupported=os.prototype.isSupported,os.prototype.destroy=os.prototype.destroy,wo("video/mp2t",function(){return new os("video/mp2t")},wl);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function La(e){this.h=e,(this.g=W_.get("ISOBoxer")())&&jG(this)}function jG(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==ZG[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}g=La.prototype,g.destroy=function(){},g.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.replace("mss/","")},g.getOriginalMimeType=function(){return this.h},g.transmux=function(e,t,n){if(!n)return Promise.resolve(Qn(e));if(!t.mssPrivateData)return Promise.reject(new gt(2,3,3020));try{var r,u=this.g.parseBuffer(e),c=u.fetch("tfhd");c.track_ID=t.id+1;var f=u.fetch("tfdt"),h=u.fetch("traf");f===null&&(f=this.g.createFullBox("tfdt",h,c),f.version=1,f.flags=0,f.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var E=u.fetch("trun"),S=u.fetch("tfxd");S&&S._parent.boxes.splice(S._parent.boxes.indexOf(S),1);var k=u.fetch("tfrf");k&&k._parent.boxes.splice(k._parent.boxes.indexOf(k),1);var G=u.fetch("sepiff");if(G!==null){G.type="senc",G.usertype=void 0;var te=u.fetch("saio");if(te===null){te=this.g.createFullBox("saio",h),te.version=0,te.flags=0,te.entry_count=1,te.offset=[0];var z=this.g.createFullBox("saiz",h);if(z.version=0,z.flags=0,z.sample_count=G.sample_count,z.default_sample_info_size=0,z.sample_info_size=[],G.flags&2)for(r=0;r<G.sample_count;r+=1)z.sample_info_size[r]=10+6*G.entry[r].NumberOfEntries;else z.default_sample_info_size=8}}c.flags&=16777214,c.flags|=131072,E.flags|=1;var ve=u.fetch("moof");E.data_offset=ve.getLength()+8;var Le=u.fetch("saio");Le!==null&&(Le.offset[0]=iD(ve,"traf")+iD(h,"senc")+16);var De=Qn(u.write());return Promise.resolve(De)}catch(qe){return qe instanceof gt?Promise.reject(qe):Promise.reject(new gt(2,3,3022))}};function iD(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}re("shaka.transmuxer.MssTransmuxer",La),La.prototype.transmux=La.prototype.transmux,La.prototype.getOriginalMimeType=La.prototype.getOriginalMimeType,La.prototype.convertCodecs=La.prototype.convertCodecs,La.prototype.isSupported=La.prototype.isSupported,La.prototype.destroy=La.prototype.destroy;var ZG=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);wo("mss/audio/mp4",function(){return new La("mss/audio/mp4")},bi),wo("mss/video/mp4",function(){return new La("mss/video/mp4")},bi);function as(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}g=as.prototype,g.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},g.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Do(n).split(",");return n=Co("audio",r),r=Co("video",r),n&&(n=Ia(n),!GG.includes(n))||r&&(n=Ia(r),!qG.includes(n))?!1:t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e))},g.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Do(t).replace("mp4a.40.34","mp3").split(",").map(this.kh).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},g.kh=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},g.getOriginalMimeType=function(){return this.l},g.transmux=function(e,t,n,r,u){var c=Qn(e);if(u=="audio"&&!Zr(c)){for(var f=xn(c),h=f.length;h<c.length;h++)if(rD(c,h))return Promise.reject(new gt(2,3,3018));for(h=f.length;h<c.length;h++)if(J2(c,h))return this.h||(this.h=new Oa("audio/aac")),this.h.transmux(e,t,n,r,u);return Promise.reject(new gt(2,3,3018))}this.j?this.j.clearData():this.j=new Ve;var E=this.j.parse(c),S=[],k=E.bd();try{var G=null;if(u=="video"){switch(k.video){case"avc":var te=[],z=null,ve=[],Le=E.xc();if(!Le.length)throw new gt(2,3,3023);for(var De=0;De<Le.length;De++){var qe=Le[De],Te=qe.nalus;ve.push.apply(ve,T(Te));var Qe=xG(Te);if(Qe){z==null&&(z=qe.dts);var Ue=void 0;Ue=De+1<Le.length?(Le[De+1].dts||0)-(qe.dts||0):1<Le.length?(qe.dts||0)-(Le[De-1].dts||0):9e4*(n.endTime-n.startTime),te.push({data:Qe.data,size:Qe.data.byteLength,duration:Ue,Ta:Math.round((qe.pts||0)-(qe.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:Qe.jd?2:1,Wa:Qe.jd?0:1}})}}var vt=RG(ve);if(!vt||z==null)throw new gt(2,3,3018);t.height=vt.height,t.width=vt.width,G={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:vt.oa,xa:vt.xa,ya:vt.ya,data:{jb:this.g,baseMediaDecodeTime:z,Ra:te},stream:t};break;case"hvc":var xt=[],Vt=null,Bt=[],_t=E.xc();if(!_t.length)throw new gt(2,3,3023);for(var Zt=0;Zt<_t.length;Zt++){var ln=_t[Zt],pn=ln.nalus;Bt.push.apply(Bt,T(pn));for(var Ln=!1,Mn=[],qn=!1,Yn=m(pn),Kn=Yn.next();!Kn.done;Kn=Yn.next()){var Nr=Kn.value;switch(Nr.type){case 1:case 0:var fi=qn=!0;break;case 19:case 20:case 21:Ln=fi=qn=!0;break;case 32:fi=!0;break;case 33:fi=!0;break;case 34:fi=!0;break;case 35:qn=fi=!0;break;case 39:case 40:fi=!0;break;default:fi=!1}if(qn&&fi){var Li=Nr.fullData.byteLength,ci=new Uint8Array(4);ci[0]=Li>>24&255,ci[1]=Li>>16&255,ci[2]=Li>>8&255,ci[3]=Li&255,Mn.push(ci),Mn.push(Nr.fullData)}}var gi=Mn.length?{data:li.apply(Pi,T(Mn)),jd:Ln}:null;if(gi){Vt==null&&ln.dts!=null&&(Vt=ln.dts);var Gr=void 0;Gr=Zt+1<_t.length?(_t[Zt+1].dts||0)-(ln.dts||0):1<_t.length?(ln.dts||0)-(_t[Zt-1].dts||0):9e4*(n.endTime-n.startTime),xt.push({data:gi.data,size:gi.data.byteLength,duration:Gr,Ta:Math.round((ln.pts||0)-(ln.dts||0)),flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:gi.jd?2:1,Wa:gi.jd?0:1}})}}var fo=MG(Bt);if(!fo||Vt==null)throw new gt(2,3,3018);t.height=fo.height,t.width=fo.width,G={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,Sa:[],ga:new Uint8Array([]),oa:fo.oa,xa:fo.xa,ya:fo.ya,data:{jb:this.g,baseMediaDecodeTime:Vt,Ra:xt},stream:t}}G&&(S.push(G),G=null)}if(u=="audio"){switch(k.audio){case"aac":for(var Fo=[],ai,zs=null,Yc=m(E.Fb()),Wc=Yc.next();!Wc.done;Wc=Yc.next()){var Nd=Wc.value,ll=Nd.data;if(ll){var Ys=0;if(ai=Q2(ll,Ys),!ai)throw new gt(2,3,3018);for(t.audioSamplingRate=ai.sampleRate,t.channelsCount=ai.channelCount,zs==null&&Nd.pts!==null&&(zs=Nd.pts);Ys<ll.length;){var cl=X2(ll,Ys);if(cl){var Kl=cl.Qd+cl.U;Ys+Kl<=ll.length&&Fo.push({data:ll.subarray(Ys+cl.Qd,Ys+Kl),size:cl.U,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ys+=Kl}else Ys++}}}if(!ai||zs==null){if(!E.xc().length)throw new gt(2,3,3018);zs=9e4*n.startTime;var Md=Co("audio",t.codecs.split(","));if(!Md||!t.channelsCount||!t.audioSamplingRate)throw new gt(2,3,3018);ai={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,Ea:Md};var Dd=bG(Md,t.channelsCount);if(!Dd)throw new gt(2,3,3018);for(var gy=zs+9e4*(n.endTime-n.startTime),Pd=zs;Pd<gy;)Fo.push({data:Dd,size:Dd.byteLength,duration:1024,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Pd+=1024/ai.sampleRate*9e4}var Kp=ai.sampleRate,my=zs/9e4*Kp;G={id:t.id,type:"audio",codecs:ai.Ea,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Kp,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:my,Ra:Fo},stream:t};break;case"ac3":for(var Ss=[],vy=0,G1=new Uint8Array([]),yy=null,mD=m(E.Fb()),q1=mD.next();!q1.done;q1=mD.next()){var H1=q1.value,K1=H1.data;yy==null&&H1.pts!==null&&(yy=H1.pts);for(var Od=0;Od<K1.length;){var Vl=eD(K1,Od);Vl?(t.audioSamplingRate=Vl.sampleRate,t.channelsCount=Vl.channelCount,vy=Vl.sampleRate,G1=Vl.ga,Ss.push({data:K1.subarray(Od,Od+Vl.U),size:Vl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Od+=Vl.U):Od++}}if(vy==0||G1.byteLength==0||yy==null)throw new gt(2,3,3018);var VG=yy/9e4*vy;G={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:vy,duration:r,Sa:[],ga:G1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:VG,Ra:Ss},stream:t};break;case"ec3":for(var vD=[],Ey=0,V1=new Uint8Array([]),_y=null,yD=m(E.Fb()),z1=yD.next();!z1.done;z1=yD.next()){var Y1=z1.value,W1=Y1.data;_y==null&&Y1.pts!==null&&(_y=Y1.pts);for(var Ld=0;Ld<W1.length;){var zl=tD(W1,Ld);zl?(t.audioSamplingRate=zl.sampleRate,t.channelsCount=zl.channelCount,Ey=zl.sampleRate,V1=zl.ga,vD.push({data:W1.subarray(Ld,Ld+zl.U),size:zl.U,duration:1536,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),Ld+=zl.U):Ld++}}if(Ey==0||V1.byteLength==0||_y==null)throw new gt(2,3,3018);var zG=_y/9e4*Ey;G={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ey,duration:r,Sa:[],ga:V1,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:zG,Ra:vD},stream:t};break;case"mp3":for(var ED=[],Ty,Sy=null,_D=m(E.Fb()),$1=_D.next();!$1.done;$1=_D.next()){var X1=$1.value,Vp=X1.data;if(Vp){Sy==null&&X1.pts!==null&&(Sy=X1.pts);for(var $c=0;$c<Vp.length;){var kd=hy(Vp,$c);kd?(Ty||(Ty=kd),$c+kd.U<=Vp.length&&ED.push({data:Vp.subarray($c,$c+kd.U),size:kd.U,duration:1152,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),$c+=kd.U):$c++}}}if(!Ty||Sy==null)throw new gt(2,3,3018);var TD=Ty.sampleRate,YG=Sy/9e4*TD;G={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:TD,duration:r,Sa:[],ga:new Uint8Array([]),oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:YG,Ra:ED},stream:t};break;case"opus":var SD=[],wy=null,wu=E.F;if(!wu)throw new gt(2,3,3018);var Uo=[];switch(wu.Zg){case 1:case 2:Uo=[0];break;case 0:Uo=[255,1,1,0,1];break;case 128:Uo=[255,2,0,0,1];break;case 3:Uo=[1,2,1,0,2,1];break;case 4:Uo=[1,2,2,0,1,2,3];break;case 5:Uo=[1,3,2,0,4,1,2,3];break;case 6:Uo=[1,4,2,0,4,1,2,3,5];break;case 7:Uo=[1,4,2,0,4,1,2,3,5,6];break;case 8:Uo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Uo=[1,1,2,0,1];break;case 131:Uo=[1,1,3,0,1,2];break;case 132:Uo=[1,1,4,0,1,2,3];break;case 133:Uo=[1,1,5,0,1,2,3,4];break;case 134:Uo=[1,1,6,0,1,2,3,4,5];break;case 135:Uo=[1,1,7,0,1,2,3,4,5,6];break;case 136:Uo=[1,1,8,0,1,2,3,4,5,6,7]}for(var wD=new Uint8Array([0,wu.channelCount,0,0,wu.sampleRate>>>24&255,wu.sampleRate>>>17&255,wu.sampleRate>>>8&255,wu.sampleRate>>>0&255,0,0].concat(T(Uo))),AD=wu.sampleRate,ID=m(E.Fb()),Q1=ID.next();!Q1.done;Q1=ID.next()){var J1=Q1.value,Fd=J1.data;wy==null&&J1.pts!==null&&(wy=J1.pts);for(var zp=0;zp<Fd.length;){for(var WG=(Fd[zp+1]&16)!==0,$G=(Fd[zp+1]&8)!==0,fl=zp+2,Ay=0;Fd[fl]===255;)Ay+=255,fl+=1;Ay+=Fd[fl],fl+=1,fl+=WG?2:0,fl+=$G?2:0;var bD=Fd.slice(fl,fl+Ay);SD.push({data:bD,size:bD.byteLength,duration:960,Ta:0,flags:{Va:0,Na:0,Ma:0,Ja:0,Ka:2,Wa:0}}),zp=fl+Ay}}if(wD.byteLength==0||wy==null)throw new gt(2,3,3018);t.audioSamplingRate=wu.sampleRate,t.channelsCount=wu.channelCount;var XG=wy/9e4*AD;G={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:AD,duration:r,Sa:[],ga:wD,oa:new Uint8Array([]),xa:0,ya:0,data:{jb:this.g,baseMediaDecodeTime:XG,Ra:SD},stream:t}}G&&(S.push(G),G=null)}}catch(tT){return tT&&tT.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(tT)}if(!S.length)return Promise.reject(new gt(2,3,3018));var CD=new Id(S);if(this.i.has(t.id))var eT=this.i.get(t.id);else eT=bd(CD),this.i.set(t.id,eT);var QG=Dp(CD);this.g++;var JG=li(eT,QG);return Promise.resolve(JG)},re("shaka.transmuxer.TsTransmuxer",as),as.prototype.transmux=as.prototype.transmux,as.prototype.getOriginalMimeType=as.prototype.getOriginalMimeType,as.prototype.convertCodecs=as.prototype.convertCodecs,as.prototype.isSupported=as.prototype.isSupported,as.prototype.destroy=as.prototype.destroy;var GG=["aac","ac-3","ec-3","mp3","opus"],qG=["avc","hevc"];wo("video/mp2t",function(){return new as("video/mp2t")},uu);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function oD(){}var qp;function aD(){qp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(qp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=HG):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function HG(e,t){var n=this,r;return Me(function(u){return u.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),x(u,qp.call(n,e,t),2)):(r=u.h,pD(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=qp,u.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=sD,u.return(sD.call(n,e,t))))})}function sD(e,t){var n=this,r,u,c,f,h,E,S,k,G,te;return Me(function(z){if(z.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=hD(e),u=[],c=m(t),f=c.next();!f.done;f=c.next())h=f.value,E=uD(h.videoCapabilities,r),S=uD(h.audioCapabilities,r),h.videoCapabilities&&h.videoCapabilities.length&&!E.length||h.audioCapabilities&&h.audioCapabilities.length&&!S.length||(k=Object.assign({},h),k.videoCapabilities=E,k.audioCapabilities=S,u.push(k));if(!u.length)throw G=Error("Unsupported keySystem or supportedConfigurations."),G.name="NotSupportedError",G.code=DOMException.NOT_SUPPORTED_ERR,G;return x(z,qp.call(n,e,u),2)}return te=z.h,z.return(new py(te,r))})}function uD(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}re("EmeEncryptionSchemePolyfill",oD),oD.install=aD;function lD(){}var Hp;function cD(){Hp?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Hp=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=KG):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function KG(e){var t=this,n,r,u;return Me(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),x(c,Hp.call(t,e),2);case 2:if(n=c.h,!e.keySystemConfiguration)return c.return(n);if((r=n.keySystemAccess)&&pD(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Hp,c.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=fD,r){c.u(3);break}return u=n,x(c,dD(e),4);case 4:return u.keySystemAccess=c.h,c.return(n);case 3:return c.return(fD.call(t,e))}})}function fD(e){var t=this,n,r,u,c,f,h,E,S;return Me(function(k){switch(k.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(r=e.keySystemConfiguration,u=r.keySystem,c=r.audio&&r.audio.encryptionScheme,f=r.video&&r.video.encryptionScheme,n=hD(u),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},c&&c!=n||f&&f!=n)?k.return(h):x(k,Hp.call(t,e),2);case 2:if(E=k.h,E.keySystemAccess){E.keySystemAccess=new py(E.keySystemAccess,n),k.u(3);break}if(!e.keySystemConfiguration){k.u(3);break}return S=E,x(k,dD(e),5);case 5:S.keySystemAccess=k.h;case 3:return k.return(E)}})}function dD(e){var t,n;return Me(function(r){if(r.g==1){var u=e.keySystemConfiguration,c=[],f=[];return u.audio&&c.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType}),u.video&&f.push({robustness:u.video.robustness||"",contentType:e.video.contentType}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},c.length&&(u.audioCapabilities=c),f.length&&(u.videoCapabilities=f),t=u,x(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}re("McEncryptionSchemePolyfill",lD),lD.install=cD;function py(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}py.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},py.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function hD(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function pD(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Z1(){}function gD(){aD(),cD()}re("EncryptionSchemePolyfills",Z1),Z1.install=gD,typeof R<"u"&&R.exports&&(R.exports=Z1)}).call(l,i,i,void 0);for(var d in l.shaka)o[d]=l.shaka[d]})()})(bU);const qy=pb(bU),nf=class nf{static async setup_stream(i,l,d){if(this.licenseUrl=l,this.customDrmHeaders=d,!i.mediaKeys)try{const p=await this.get_media_keys(i);if(p){await i.setMediaKeys(p.mediaKey);const w=p.mediaKey.createSession();this.on_handle_license_messageEvent=async R=>{await this.handle_license_messageEvent(p.mediaKey,w,R)},this.on_handle_encrypted_event=async R=>{await this.handle_encrypted_event(p,w,R)},w.addEventListener("message",this.on_handle_license_messageEvent),i.addEventListener("encrypted",this.on_handle_encrypted_event)}}catch(p){console.error("### DRMManager.setupStream error:",p)}}static async create_mediaKey_sessions(i){for(let l=0;l<i;l++){const p=await(await navigator.requestMediaKeySystemAccess("com.widevine.alpha",this.DRM_CONFIG)).createMediaKeys();this.mediaKey_pool.push({id:this.mediaKey_pool.length+1,mediaKey:p,htmlMediaElement:null,isInitialized:!1})}}static async release_mediaKeys(i){const l=this.mediaKey_pool.find(d=>d.htmlMediaElement===i);this.mediaKey_pool.length>0&&l&&(await i.setMediaKeys(null),l.htmlMediaElement=null,l.isInitialized=!1)}static get is_prepared(){return this.mediaKey_pool.length>1}static get_mediaKey_id(i){const l=this.mediaKey_pool.find(d=>d.mediaKey===i);return l?l.id:null}static async get_media_keys(i){let l=this.mediaKey_pool.find(d=>d.htmlMediaElement===i);if(l)return l;if((this.mediaKey_pool.length<=0||this.mediaKey_pool.every(d=>d.htmlMediaElement))&&await this.create_mediaKey_sessions(1),l=this.mediaKey_pool.find(d=>!d.htmlMediaElement),l)return l.htmlMediaElement=i,l;throw new Error("No media keys available")}static async handle_license_messageEvent(i,l,d){try{const p=d.message.byteLength;console.log(p,"byteLength");let w;p===2?w=p.toString():w="".concat(this.get_mediaKey_id(i),"-").concat(p);let R;this.license_cache.has(w)?(console.log("using cached licence"),R=this.license_cache.get(w)):(R=await(await fetch(this.licenseUrl,{method:"POST",body:d.message,headers:{"Content-Type":"application/octet-stream",...this.customDrmHeaders}})).arrayBuffer(),R?this.license_cache.set(w,R):console.error("License response is null")),R?await l.update(R):console.error("License not found in cache and could not be fetched")}catch(p){console.error("Error during license acquisition: ".concat(p))}}static async handle_encrypted_event(i,l,d){if(d.initDataType&&d.initData)try{if(!i.isInitialized){i.isInitialized=!0;const p=this.mediaKey_pool.findIndex(w=>w.id===i.id);p!==-1&&(this.mediaKey_pool[p]=i),await l.generateRequest(d.initDataType,d.initData)}}catch(p){console.error("Failed to generate a license request: ".concat(p))}else console.error("Encrypted event is missing initData or initDataType")}};nf.licenseUrl="",nf.customDrmHeaders={},nf.license_cache=new Map,nf.mediaKey_pool=[],nf.DRM_CONFIG=[{keySystem:"com.widevine.alpha",initDataTypes:["cenc"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"'},{contentType:'video/mp4; codecs="avc1.64001f"'},{contentType:'video/mp4; codecs="avc1.64001e"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'}],sessionTypes:["temporary"],persistentState:"optional",distinctiveIdentifier:"optional"}];let tb=nf;class JV extends IU{constructor(i){var l;super(i),this.name="ShakaEngine",this.addPolicyToRequests=(d,p)=>{switch(d){case qy.net.NetworkingEngine.RequestType.MANIFEST:case qy.net.NetworkingEngine.RequestType.SEGMENT:if(!this.options.policyQuery||!this.options.policyQuery.startsWith("?"))break;p.uris[0]+=this.options.policyQuery;break;case qy.net.NetworkingEngine.RequestType.LICENSE:if(!this.options.customLicenceRequestHeaders)break;Object.entries(this.options.customLicenceRequestHeaders).forEach(([w,R])=>{p.headers[w]=R});break}},this.addPolicyToRequests=this.addPolicyToRequests.bind(this),this.player=new qy.Player,this.options.widevineLicenseUrl&&this.player.configure({drm:{servers:{"com.widevine.alpha":this.options.keepProtectionData===!1?this.options.widevineLicenseUrl:" "}},streaming:{bufferingGoal:120,rebufferingGoal:60,bufferBehind:0}}),(l=this.player.getNetworkingEngine())==null||l.registerRequestFilter(this.addPolicyToRequests)}destroy(){this.player&&this.player.destroy(),super.destroy()}async load(i){var l;if(this.player&&i){if(this.options.widevineLicenseUrl&&this.options.keepProtectionData!==!1)try{await this.player.unload(),await tb.setup_stream(this.options.element,this.options.widevineLicenseUrl,(l=this.options.customLicenceRequestHeaders)!=null?l:{})}catch(d){console.log(d)}await this.player.attach(this.options.element),await this.player.load(i,void 0)}}}class ez extends wf{constructor(i){super(),this.options=i,this.options.preferredTech==="shaka"?this.engine=new JV(i):this.engine=new QV(i),this.engine.onAny(this.propagateEvent.bind(this))}get playerEngine(){return this.engine}get videoElement(){return this.engine.video}propagateEvent(i,l){this.emit(i,l)}destroy(){this.engine.destroy()}get stats(){return this.engine.getStats()}async load(i,l){this.currentSource=i,await this.engine.load(i,l)}}class tz extends wf{constructor(i){var l;super(),this.options=i,this._eventsEmitted=!1,this.eventClock=i.eventClock,this.containerElement=i.containerElement,this.videoElement=document.createElement("video"),(l=document.querySelector("video"))==null||l.remove(),this.containerElement.appendChild(this.videoElement),this.player=new ez({autoPlay:!1,...i.playerOptions,element:this.videoElement})}get currentSource(){var i;return(i=this.player)==null?void 0:i.currentSource}get currentCamera(){return this._currentCamera}get stats(){var i;return(i=this.player)==null?void 0:i.engine.getStats()}logPlayerStuff(){console.log("Bitrate",this.player.engine.video.getVideoPlaybackQuality()),console.log("Time",this.player.engine.video.currentTime),console.log("Paused",this.player.engine.video.paused)}propagateEvent(i,l){this.emit(i,l)}async load(i,l,d){return new Promise((p,w)=>{try{if(this.eventClock.playerSyncer.disconnectMedia(),!this.player)throw new Error("Found no ImagienPlayer to use :( ");this._eventsEmitted||(this.player.onAny(this.propagateEvent.bind(this)),this._eventsEmitted=!0),this.player.load(l,d).then(()=>{this.player.once("playing",()=>{this._currentCamera=i,this.eventClock.playerSyncer.connectMediaElement(this.videoElement,((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0))});const R=((d==null?void 0:d.eventOffset)||0)-((d==null?void 0:d.reelOffset)||0),g=this.eventClock.getExpectedPositionInSeconds()-R;Math.sign(g)<0?setTimeout(()=>{this.videoElement.play(),p()},Math.abs(g)*1e3):(this.videoElement.currentTime=g,this.videoElement.play(),p())})}catch(R){console.error(R),w(R)}})}async requestFullscreen(){await this.containerElement.requestFullscreen()}async exitFullscreen(){await document.exitFullscreen()}destroy(){super.destroy(),this.player.destroy()}}var rg=function(o){return o&&o.Math===Math&&o},Za=rg(typeof globalThis=="object"&&globalThis)||rg(typeof window=="object"&&window)||rg(typeof self=="object"&&self)||rg(typeof tu=="object"&&tu)||rg(typeof tu=="object"&&tu)||function(){return this}()||Function("return this")(),RC={},ps=function(o){try{return!!o()}catch(i){return!0}},nz=ps,gc=!nz(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),rz=ps,xC=!rz(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")}),iz=xC,Hy=Function.prototype.call,Sl=iz?Hy.bind(Hy):function(){return Hy.apply(Hy,arguments)},CU={},RU={}.propertyIsEnumerable,xU=Object.getOwnPropertyDescriptor,oz=xU&&!RU.call({1:2},1);CU.f=oz?function(i){var l=xU(this,i);return!!l&&l.enumerable}:RU;var NU=function(o,i){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:i}},MU=xC,DU=Function.prototype,nb=DU.call,az=MU&&DU.bind.bind(nb,nb),wa=MU?az:function(o){return function(){return nb.apply(o,arguments)}},PU=wa,sz=PU({}.toString),uz=PU("".slice),cE=function(o){return uz(sz(o),8,-1)},lz=wa,cz=ps,fz=cE,xA=Object,dz=lz("".split),hz=cz(function(){return!xA("z").propertyIsEnumerable(0)})?function(o){return fz(o)==="String"?dz(o,""):xA(o)}:xA,fE=function(o){return o==null},pz=fE,gz=TypeError,nm=function(o){if(pz(o))throw new gz("Can't call method on "+o);return o},mz=hz,vz=nm,dE=function(o){return mz(vz(o))},NA=typeof document=="object"&&document.all,Ga=typeof NA>"u"&&NA!==void 0?function(o){return typeof o=="function"||o===NA}:function(o){return typeof o=="function"},yz=Ga,wh=function(o){return typeof o=="object"?o!==null:yz(o)},MA=Za,Ez=Ga,_z=function(o){return Ez(o)?o:void 0},NC=function(o,i){return arguments.length<2?_z(MA[o]):MA[o]&&MA[o][i]},Tz=wa,OU=Tz({}.isPrototypeOf),Sz=typeof navigator<"u"&&String(navigator.userAgent)||"",LU=Za,DA=Sz,e3=LU.process,t3=LU.Deno,n3=e3&&e3.versions||t3&&t3.version,r3=n3&&n3.v8,eu,O0;r3&&(eu=r3.split("."),O0=eu[0]>0&&eu[0]<4?1:+(eu[0]+eu[1]));!O0&&DA&&(eu=DA.match(/Edge\/(\d+)/),(!eu||eu[1]>=74)&&(eu=DA.match(/Chrome\/(\d+)/),eu&&(O0=+eu[1])));var wz=O0,i3=wz,Az=ps,Iz=Za,bz=Iz.String,kU=!!Object.getOwnPropertySymbols&&!Az(function(){var o=Symbol("symbol detection");return!bz(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&i3&&i3<41}),Cz=kU,FU=Cz&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Rz=NC,xz=Ga,Nz=OU,Mz=FU,Dz=Object,UU=Mz?function(o){return typeof o=="symbol"}:function(o){var i=Rz("Symbol");return xz(i)&&Nz(i.prototype,Dz(o))},Pz=String,Oz=function(o){try{return Pz(o)}catch(i){return"Object"}},Lz=Ga,kz=Oz,Fz=TypeError,Uz=function(o){if(Lz(o))return o;throw new Fz(kz(o)+" is not a function")},Bz=Uz,jz=fE,MC=function(o,i){var l=o[i];return jz(l)?void 0:Bz(l)},PA=Sl,OA=Ga,LA=wh,Zz=TypeError,Gz=function(o,i){var l,d;if(i==="string"&&OA(l=o.toString)&&!LA(d=PA(l,o))||OA(l=o.valueOf)&&!LA(d=PA(l,o))||i!=="string"&&OA(l=o.toString)&&!LA(d=PA(l,o)))return d;throw new Zz("Can't convert object to primitive value")},BU={exports:{}},o3=Za,qz=Object.defineProperty,DC=function(o,i){try{qz(o3,o,{value:i,configurable:!0,writable:!0})}catch(l){o3[o]=i}return i},Hz=Za,Kz=DC,a3="__core-js_shared__",s3=BU.exports=Hz[a3]||Kz(a3,{});(s3.versions||(s3.versions=[])).push({version:"3.37.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var PC=BU.exports,u3=PC,OC=function(o,i){return u3[o]||(u3[o]=i||{})},Vz=nm,zz=Object,jU=function(o){return zz(Vz(o))},Yz=wa,Wz=jU,$z=Yz({}.hasOwnProperty),mc=Object.hasOwn||function(i,l){return $z(Wz(i),l)},Xz=wa,Qz=0,Jz=Math.random(),eY=Xz(1 .toString),ZU=function(o){return"Symbol("+(o===void 0?"":o)+")_"+eY(++Qz+Jz,36)},tY=Za,nY=OC,l3=mc,rY=ZU,iY=kU,oY=FU,th=tY.Symbol,kA=nY("wks"),aY=oY?th.for||th:th&&th.withoutSetter||rY,bf=function(o){return l3(kA,o)||(kA[o]=iY&&l3(th,o)?th[o]:aY("Symbol."+o)),kA[o]},sY=Sl,c3=wh,f3=UU,uY=MC,lY=Gz,cY=bf,fY=TypeError,dY=cY("toPrimitive"),hY=function(o,i){if(!c3(o)||f3(o))return o;var l=uY(o,dY),d;if(l){if(i===void 0&&(i="default"),d=sY(l,o,i),!c3(d)||f3(d))return d;throw new fY("Can't convert object to primitive value")}return i===void 0&&(i="number"),lY(o,i)},pY=hY,gY=UU,GU=function(o){var i=pY(o,"string");return gY(i)?i:i+""},mY=Za,d3=wh,rb=mY.document,vY=d3(rb)&&d3(rb.createElement),qU=function(o){return vY?rb.createElement(o):{}},yY=gc,EY=ps,_Y=qU,HU=!yY&&!EY(function(){return Object.defineProperty(_Y("div"),"a",{get:function(){return 7}}).a!==7}),TY=gc,SY=Sl,wY=CU,AY=NU,IY=dE,bY=GU,CY=mc,RY=HU,h3=Object.getOwnPropertyDescriptor;RC.f=TY?h3:function(i,l){if(i=IY(i),l=bY(l),RY)try{return h3(i,l)}catch(d){}if(CY(i,l))return AY(!SY(wY.f,i,l),i[l])};var rm={},xY=gc,NY=ps,KU=xY&&NY(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),MY=wh,DY=String,PY=TypeError,Cf=function(o){if(MY(o))return o;throw new PY(DY(o)+" is not an object")},OY=gc,LY=HU,kY=KU,Ky=Cf,p3=GU,FY=TypeError,FA=Object.defineProperty,UY=Object.getOwnPropertyDescriptor,UA="enumerable",BA="configurable",jA="writable";rm.f=OY?kY?function(i,l,d){if(Ky(i),l=p3(l),Ky(d),typeof i=="function"&&l==="prototype"&&"value"in d&&jA in d&&!d[jA]){var p=UY(i,l);p&&p[jA]&&(i[l]=d.value,d={configurable:BA in d?d[BA]:p[BA],enumerable:UA in d?d[UA]:p[UA],writable:!1})}return FA(i,l,d)}:FA:function(i,l,d){if(Ky(i),l=p3(l),Ky(d),LY)try{return FA(i,l,d)}catch(p){}if("get"in d||"set"in d)throw new FY("Accessors not supported");return"value"in d&&(i[l]=d.value),i};var BY=gc,jY=rm,ZY=NU,LC=BY?function(o,i,l){return jY.f(o,i,ZY(1,l))}:function(o,i,l){return o[i]=l,o},VU={exports:{}},ib=gc,GY=mc,zU=Function.prototype,qY=ib&&Object.getOwnPropertyDescriptor,kC=GY(zU,"name"),HY=kC&&(function(){}).name==="something",KY=kC&&(!ib||ib&&qY(zU,"name").configurable),VY={EXISTS:kC,PROPER:HY,CONFIGURABLE:KY},zY=wa,YY=Ga,ob=PC,WY=zY(Function.toString);YY(ob.inspectSource)||(ob.inspectSource=function(o){return WY(o)});var $Y=ob.inspectSource,XY=Za,QY=Ga,g3=XY.WeakMap,JY=QY(g3)&&/native code/.test(String(g3)),eW=OC,tW=ZU,m3=eW("keys"),YU=function(o){return m3[o]||(m3[o]=tW(o))},FC={},nW=JY,WU=Za,rW=wh,iW=LC,ZA=mc,GA=PC,oW=YU,aW=FC,v3="Object already initialized",ab=WU.TypeError,sW=WU.WeakMap,L0,Hg,k0,uW=function(o){return k0(o)?Hg(o):L0(o,{})},lW=function(o){return function(i){var l;if(!rW(i)||(l=Hg(i)).type!==o)throw new ab("Incompatible receiver, "+o+" required");return l}};if(nW||GA.state){var Cu=GA.state||(GA.state=new sW);Cu.get=Cu.get,Cu.has=Cu.has,Cu.set=Cu.set,L0=function(o,i){if(Cu.has(o))throw new ab(v3);return i.facade=o,Cu.set(o,i),i},Hg=function(o){return Cu.get(o)||{}},k0=function(o){return Cu.has(o)}}else{var Bd=oW("state");aW[Bd]=!0,L0=function(o,i){if(ZA(o,Bd))throw new ab(v3);return i.facade=o,iW(o,Bd,i),i},Hg=function(o){return ZA(o,Bd)?o[Bd]:{}},k0=function(o){return ZA(o,Bd)}}var $U={set:L0,get:Hg,has:k0,enforce:uW,getterFor:lW},UC=wa,cW=ps,fW=Ga,Vy=mc,sb=gc,dW=VY.CONFIGURABLE,hW=$Y,XU=$U,pW=XU.enforce,gW=XU.get,y3=String,o0=Object.defineProperty,mW=UC("".slice),vW=UC("".replace),yW=UC([].join),EW=sb&&!cW(function(){return o0(function(){},"length",{value:8}).length!==8}),_W=String(String).split("String"),TW=VU.exports=function(o,i,l){mW(y3(i),0,7)==="Symbol("&&(i="["+vW(y3(i),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),l&&l.getter&&(i="get "+i),l&&l.setter&&(i="set "+i),(!Vy(o,"name")||dW&&o.name!==i)&&(sb?o0(o,"name",{value:i,configurable:!0}):o.name=i),EW&&l&&Vy(l,"arity")&&o.length!==l.arity&&o0(o,"length",{value:l.arity});try{l&&Vy(l,"constructor")&&l.constructor?sb&&o0(o,"prototype",{writable:!1}):o.prototype&&(o.prototype=void 0)}catch(p){}var d=pW(o);return Vy(d,"source")||(d.source=yW(_W,typeof i=="string"?i:"")),o};Function.prototype.toString=TW(function(){return fW(this)&&gW(this).source||hW(this)},"toString");var SW=VU.exports,wW=Ga,AW=rm,IW=SW,bW=DC,QU=function(o,i,l,d){d||(d={});var p=d.enumerable,w=d.name!==void 0?d.name:i;if(wW(l)&&IW(l,w,d),d.global)p?o[i]=l:bW(i,l);else{try{d.unsafe?o[i]&&(p=!0):delete o[i]}catch(R){}p?o[i]=l:AW.f(o,i,{value:l,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return o},JU={},CW=Math.ceil,RW=Math.floor,xW=Math.trunc||function(i){var l=+i;return(l>0?RW:CW)(l)},NW=xW,hE=function(o){var i=+o;return i!==i||i===0?0:NW(i)},MW=hE,DW=Math.max,PW=Math.min,OW=function(o,i){var l=MW(o);return l<0?DW(l+i,0):PW(l,i)},LW=hE,kW=Math.min,eB=function(o){var i=LW(o);return i>0?kW(i,9007199254740991):0},FW=eB,UW=function(o){return FW(o.length)},BW=dE,jW=OW,ZW=UW,E3=function(o){return function(i,l,d){var p=BW(i),w=ZW(p);if(w===0)return!o&&-1;var R=jW(d,w),g;if(o&&l!==l){for(;w>R;)if(g=p[R++],g!==g)return!0}else for(;w>R;R++)if((o||R in p)&&p[R]===l)return o||R||0;return!o&&-1}},GW={includes:E3(!0),indexOf:E3(!1)},qW=wa,qA=mc,HW=dE,KW=GW.indexOf,VW=FC,_3=qW([].push),tB=function(o,i){var l=HW(o),d=0,p=[],w;for(w in l)!qA(VW,w)&&qA(l,w)&&_3(p,w);for(;i.length>d;)qA(l,w=i[d++])&&(~KW(p,w)||_3(p,w));return p},BC=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zW=tB,YW=BC,WW=YW.concat("length","prototype");JU.f=Object.getOwnPropertyNames||function(i){return zW(i,WW)};var nB={};nB.f=Object.getOwnPropertySymbols;var $W=NC,XW=wa,QW=JU,JW=nB,e$=Cf,t$=XW([].concat),n$=$W("Reflect","ownKeys")||function(i){var l=QW.f(e$(i)),d=JW.f;return d?t$(l,d(i)):l},T3=mc,r$=n$,i$=RC,o$=rm,a$=function(o,i,l){for(var d=r$(i),p=o$.f,w=i$.f,R=0;R<d.length;R++){var g=d[R];!T3(o,g)&&!(l&&T3(l,g))&&p(o,g,w(i,g))}},s$=ps,u$=Ga,l$=/#|\.prototype\./,im=function(o,i){var l=f$[c$(o)];return l===h$?!0:l===d$?!1:u$(i)?s$(i):!!i},c$=im.normalize=function(o){return String(o).replace(l$,".").toLowerCase()},f$=im.data={},d$=im.NATIVE="N",h$=im.POLYFILL="P",p$=im,zy=Za,g$=RC.f,m$=LC,v$=QU,y$=DC,E$=a$,_$=p$,rB=function(o,i){var l=o.target,d=o.global,p=o.stat,w,R,g,A,U,C;if(d?R=zy:p?R=zy[l]||y$(l,{}):R=zy[l]&&zy[l].prototype,R)for(g in i){if(U=i[g],o.dontCallGetSet?(C=g$(R,g),A=C&&C.value):A=R[g],w=_$(d?g:l+(p?".":"#")+g,o.forced),!w&&A!==void 0){if(typeof U==typeof A)continue;E$(U,A)}(o.sham||A&&A.sham)&&m$(U,"sham",!0),v$(R,g,U,o)}},T$=wh,S$=cE,w$=bf,A$=w$("match"),I$=function(o){var i;return T$(o)&&((i=o[A$])!==void 0?!!i:S$(o)==="RegExp")},b$=bf,C$=b$("toStringTag"),iB={};iB[C$]="z";var R$=String(iB)==="[object z]",x$=R$,N$=Ga,a0=cE,M$=bf,D$=M$("toStringTag"),P$=Object,O$=a0(function(){return arguments}())==="Arguments",L$=function(o,i){try{return o[i]}catch(l){}},k$=x$?a0:function(o){var i,l,d;return o===void 0?"Undefined":o===null?"Null":typeof(l=L$(i=P$(o),D$))=="string"?l:O$?a0(i):(d=a0(i))==="Object"&&N$(i.callee)?"Arguments":d},F$=k$,U$=String,pE=function(o){if(F$(o)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return U$(o)},B$=Cf,oB=function(){var o=B$(this),i="";return o.hasIndices&&(i+="d"),o.global&&(i+="g"),o.ignoreCase&&(i+="i"),o.multiline&&(i+="m"),o.dotAll&&(i+="s"),o.unicode&&(i+="u"),o.unicodeSets&&(i+="v"),o.sticky&&(i+="y"),i},j$=Sl,Z$=mc,G$=OU,q$=oB,S3=RegExp.prototype,H$=function(o){var i=o.flags;return i===void 0&&!("flags"in S3)&&!Z$(o,"flags")&&G$(S3,o)?j$(q$,o):i},jC=wa,K$=jU,V$=Math.floor,HA=jC("".charAt),z$=jC("".replace),KA=jC("".slice),Y$=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,W$=/\$([$&'`]|\d{1,2})/g,aB=function(o,i,l,d,p,w){var R=l+o.length,g=d.length,A=W$;return p!==void 0&&(p=K$(p),A=Y$),z$(w,A,function(U,C){var y;switch(HA(C,0)){case"$":return"$";case"&":return o;case"`":return KA(i,0,l);case"'":return KA(i,R);case"<":y=p[KA(C,1,-1)];break;default:var v=+C;if(v===0)return U;if(v>g){var D=V$(v/10);return D===0?U:D<=g?d[D-1]===void 0?HA(C,1):d[D-1]+HA(C,1):U}y=d[v-1]}return y===void 0?"":y})},$$=rB,X$=Sl,ZC=wa,w3=nm,Q$=Ga,J$=fE,eX=I$,ig=pE,tX=MC,nX=H$,rX=aB,iX=bf,oX=iX("replace"),aX=TypeError,VA=ZC("".indexOf);ZC("".replace);var A3=ZC("".slice),sX=Math.max;$$({target:"String",proto:!0},{replaceAll:function(i,l){var d=w3(this),p,w,R,g,A,U,C,y,v,D=0,m=0,T="";if(!J$(i)){if(p=eX(i),p&&(w=ig(w3(nX(i))),!~VA(w,"g")))throw new aX("`.replaceAll` does not allow non-global regexes");if(R=tX(i,oX),R)return X$(R,i,d,l)}for(g=ig(d),A=ig(i),U=Q$(l),U||(l=ig(l)),C=A.length,y=sX(1,C),D=VA(g,A);D!==-1;)v=U?ig(l(A,D,g)):rX(A,g,D,[],void 0,l),T+=A3(g,m,D)+v,m=D+C,D=D+y>g.length?-1:VA(g,A,D+y);return m<g.length&&(T+=A3(g,m)),T}});var GC=ps,uX=Za,qC=uX.RegExp,HC=GC(function(){var o=qC("a","y");return o.lastIndex=2,o.exec("abcd")!==null}),lX=HC||GC(function(){return!qC("a","y").sticky}),cX=HC||GC(function(){var o=qC("^r","gy");return o.lastIndex=2,o.exec("str")!==null}),fX={BROKEN_CARET:cX,MISSED_STICKY:lX,UNSUPPORTED_Y:HC},sB={},dX=tB,hX=BC,pX=Object.keys||function(i){return dX(i,hX)},gX=gc,mX=KU,vX=rm,yX=Cf,EX=dE,_X=pX;sB.f=gX&&!mX?Object.defineProperties:function(i,l){yX(i);for(var d=EX(l),p=_X(l),w=p.length,R=0,g;w>R;)vX.f(i,g=p[R++],d[g]);return i};var TX=NC,SX=TX("document","documentElement"),wX=Cf,AX=sB,I3=BC,IX=FC,bX=SX,CX=qU,RX=YU,b3=">",C3="<",ub="prototype",lb="script",uB=RX("IE_PROTO"),zA=function(){},lB=function(o){return C3+lb+b3+o+C3+"/"+lb+b3},R3=function(o){o.write(lB("")),o.close();var i=o.parentWindow.Object;return o=null,i},xX=function(){var o=CX("iframe"),i="java"+lb+":",l;return o.style.display="none",bX.appendChild(o),o.src=String(i),l=o.contentWindow.document,l.open(),l.write(lB("document.F=Object")),l.close(),l.F},Yy,s0=function(){try{Yy=new ActiveXObject("htmlfile")}catch(i){}s0=typeof document<"u"?document.domain&&Yy?R3(Yy):xX():R3(Yy);for(var o=I3.length;o--;)delete s0[ub][I3[o]];return s0()};IX[uB]=!0;var NX=Object.create||function(i,l){var d;return i!==null?(zA[ub]=wX(i),d=new zA,zA[ub]=null,d[uB]=i):d=s0(),l===void 0?d:AX.f(d,l)},MX=ps,DX=Za,PX=DX.RegExp,OX=MX(function(){var o=PX(".","s");return!(o.dotAll&&o.test("\n")&&o.flags==="s")}),LX=ps,kX=Za,FX=kX.RegExp,UX=LX(function(){var o=FX("(?<a>b)","g");return o.exec("b").groups.a!=="b"||"b".replace(o,"$<a>c")!=="bc"}),nh=Sl,gE=wa,BX=pE,jX=oB,ZX=fX,GX=OC,qX=NX,HX=$U.get,KX=OX,VX=UX,zX=GX("native-string-replace",String.prototype.replace),F0=RegExp.prototype.exec,cb=F0,YX=gE("".charAt),WX=gE("".indexOf),$X=gE("".replace),YA=gE("".slice),fb=function(){var o=/a/,i=/b*/g;return nh(F0,o,"a"),nh(F0,i,"a"),o.lastIndex!==0||i.lastIndex!==0}(),cB=ZX.BROKEN_CARET,db=/()??/.exec("")[1]!==void 0,XX=fb||db||cB||KX||VX;XX&&(cb=function(i){var l=this,d=HX(l),p=BX(i),w=d.raw,R,g,A,U,C,y,v;if(w)return w.lastIndex=l.lastIndex,R=nh(cb,w,p),l.lastIndex=w.lastIndex,R;var D=d.groups,m=cB&&l.sticky,T=nh(jX,l),F=l.source,N=0,_=p;if(m&&(T=$X(T,"y",""),WX(T,"g")===-1&&(T+="g"),_=YA(p,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&YX(p,l.lastIndex-1)!=="\n")&&(F="(?: "+F+")",_=" "+_,N++),g=new RegExp("^(?:"+F+")",T)),db&&(g=new RegExp("^"+F+"$(?!\\s)",T)),fb&&(A=l.lastIndex),U=nh(F0,m?g:l,_),m?U?(U.input=YA(U.input,N),U[0]=YA(U[0],N),U.index=l.lastIndex,l.lastIndex+=U[0].length):l.lastIndex=0:fb&&U&&(l.lastIndex=l.global?U.index+U[0].length:A),db&&U&&U.length>1&&nh(zX,U[0],g,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(U[C]=void 0)}),U&&D)for(U.groups=y=qX(null),C=0;C<D.length;C++)v=D[C],y[v[0]]=U[v[1]];return U});var KC=cb,QX=rB,x3=KC;QX({target:"RegExp",proto:!0,forced:/./.exec!==x3},{exec:x3});var JX=xC,fB=Function.prototype,N3=fB.apply,M3=fB.call,eQ=typeof Reflect=="object"&&Reflect.apply||(JX?M3.bind(N3):function(){return M3.apply(N3,arguments)}),D3=Sl,P3=QU,tQ=KC,O3=ps,dB=bf,nQ=LC,rQ=dB("species"),WA=RegExp.prototype,iQ=function(o,i,l,d){var p=dB(o),w=!O3(function(){var U={};return U[p]=function(){return 7},""[o](U)!==7}),R=w&&!O3(function(){var U=!1,C=/a/;return o==="split"&&(C={},C.constructor={},C.constructor[rQ]=function(){return C},C.flags="",C[p]=/./[p]),C.exec=function(){return U=!0,null},C[p](""),!U});if(!w||!R||l){var g=/./[p],A=i(p,""[o],function(U,C,y,v,D){var m=C.exec;return m===tQ||m===WA.exec?w&&!D?{done:!0,value:D3(g,C,y,v)}:{done:!0,value:D3(U,y,C,v)}:{done:!1}});P3(String.prototype,o,A[0]),P3(WA,p,A[1])}d&&nQ(WA[p],"sham",!0)},VC=wa,oQ=hE,aQ=pE,sQ=nm,uQ=VC("".charAt),L3=VC("".charCodeAt),lQ=VC("".slice),k3=function(o){return function(i,l){var d=aQ(sQ(i)),p=oQ(l),w=d.length,R,g;return p<0||p>=w?o?"":void 0:(R=L3(d,p),R<55296||R>56319||p+1===w||(g=L3(d,p+1))<56320||g>57343?o?uQ(d,p):R:o?lQ(d,p,p+2):(R-55296<<10)+(g-56320)+65536)}},cQ={codeAt:k3(!1),charAt:k3(!0)},fQ=cQ.charAt,dQ=function(o,i,l){return i+(l?fQ(o,i).length:1)},F3=Sl,hQ=Cf,pQ=Ga,gQ=cE,mQ=KC,vQ=TypeError,yQ=function(o,i){var l=o.exec;if(pQ(l)){var d=F3(l,o,i);return d!==null&&hQ(d),d}if(gQ(o)==="RegExp")return F3(mQ,o,i);throw new vQ("RegExp#exec called on incompatible receiver")},EQ=eQ,U3=Sl,mE=wa,_Q=iQ,TQ=ps,SQ=Cf,wQ=Ga,AQ=fE,IQ=hE,bQ=eB,jd=pE,CQ=nm,RQ=dQ,xQ=MC,NQ=aB,MQ=yQ,DQ=bf,hb=DQ("replace"),PQ=Math.max,OQ=Math.min,LQ=mE([].concat),$A=mE([].push),B3=mE("".indexOf),j3=mE("".slice),kQ=function(o){return o===void 0?o:String(o)},FQ=function(){return"a".replace(/./,"$0")==="$0"}(),Z3=function(){return/./[hb]?/./[hb]("a","$0")==="":!1}(),UQ=!TQ(function(){var o=/./;return o.exec=function(){var i=[];return i.groups={a:"7"},i},"".replace(o,"$<a>")!=="7"});_Q("replace",function(o,i,l){var d=Z3?"$":"$0";return[function(w,R){var g=CQ(this),A=AQ(w)?void 0:xQ(w,hb);return A?U3(A,w,g,R):U3(i,jd(g),w,R)},function(p,w){var R=SQ(this),g=jd(p);if(typeof w=="string"&&B3(w,d)===-1&&B3(w,"$<")===-1){var A=l(i,R,g,w);if(A.done)return A.value}var U=wQ(w);U||(w=jd(w));var C=R.global,y;C&&(y=R.unicode,R.lastIndex=0);for(var v=[],D;D=MQ(R,g),!(D===null||($A(v,D),!C));){var m=jd(D[0]);m===""&&(R.lastIndex=RQ(g,bQ(R.lastIndex),y))}for(var T="",F=0,N=0;N<v.length;N++){D=v[N];for(var _=jd(D[0]),I=PQ(OQ(IQ(D.index),g.length),0),b=[],j,Y=1;Y<D.length;Y++)$A(b,kQ(D[Y]));var $=D.groups;if(U){var W=LQ([_],b,I,g);$!==void 0&&$A(W,$),j=jd(EQ(w,void 0,W))}else j=NQ(_,g,I,b,$,w);I>=F&&(T+=j3(g,F,I)+j,F=I+_.length)}return T+j3(g,F)}]},!UQ||!FQ||Z3);var BQ=Za,jQ=wa,ZQ=function(o,i){return jQ(BQ[o].prototype[i])},GQ=ZQ;GQ("String","replaceAll");function zC(){const o=su(),i=If(),[l]=wU();return gn.useCallback(async(d,p)=>{var g;if(!l||!o)return;const w=(g=i==null?void 0:i.distributionUrl)!=null?g:"";let R=l.cameraURLTemplate;if(R=R.replace("{{baseURL}}",w),R=R.replace("{{folderName}}/",p.camera.folderName?p.camera.folderName+"/":""),R=R.replaceAll("{{assetName}}",p.camera.assetName||""),R!==d.currentSource&&i)return await d.load(p,R,{startTimeSeconds:o.getExpectedPositionInSeconds()-mi(p.camera.span.time,i.frameRate),eventOffset:mi(p.camera.span.time,i.frameRate),reelOffset:mi(p.camera.reelOffset,i.frameRate)})},[o,l,i])}function qQ(){const o=zC();return gn.useCallback(async(i,l)=>await o(i,l).then(),[o])}function HQ(){const o=su(),i=Af(),l=bC();gn.useEffect(()=>{if(!o||!i||!l)return;const d=({command:p,reference:w,start:R})=>{o.pausePlayStream(p,w,R)};return i.on("pausePlayStream",d),()=>{i.off("pausePlayStream",d)}},[o,i,l])}function KQ(o){const i=su(),l=If(),d=Af(),p=qQ(),w=zC();gn.useEffect(()=>{if(!d||!l||!i||!o)return;let R,g=[void 0,-1];const A=()=>{const T=i.getExpectedPositionInSeconds()<=0?0:i.getExpectedPositionInSeconds();return uE(l,T)[0]},U=T=>{g[0]=w(o,T),g[1]=T.index},C=T=>{if(g[0]&&g[1]===T.index){g[0].then(()=>{}),g=[void 0,-1];return}try{p(o,T)}catch(F){console.error("failed to play stream",F)}},y=()=>{const T=A();T&&U(T)},v=()=>{const T=A();T&&C(T)},D=({index:T})=>{var N;const F=(N=eb(T,l))!=null?N:JI(T,l,i);F&&U(F)},m=({index:T})=>{var N;const F=(N=eb(T,l))!=null?N:JI(T,l,i);F&&(U(F),R=setTimeout(()=>{C(F)},1900))};return d.on("prepareCast",D),d.on("cast",m),i.on("prepareStart",y),i.on("start",v),i.isLive?(console.log("> prepare #1"),i.preparePlayback(),v()):i.isInPrepare?y():console.log("HÄÄRRR"),()=>{d.off("prepareCast",D),d.off("cast",m),i.off("prepareStart",y),i.off("start",v),clearTimeout(R)}},[d,l,i,o,p,w])}function VQ(o){const i=tm();gn.useEffect(()=>{if(!o||!i)return;const l=()=>{o.currentCamera&&i.updatePlaying(o.currentCamera)};return o.on("playing",l),()=>{o.off("playing",l)}},[o,i])}function zQ(o){const i=tm(),l=su(),d=If(),p=zC();gn.useEffect(()=>{if(!d||!l||!o||!i)return;const w=({remainingTime:R})=>{const g=EU(d,l.getExpectedPositionInSeconds(),R,o.currentCamera);if(g)try{const A=p(o,g);i.once("ended",()=>{A.then(()=>{})})}catch(A){console.error("failed to load stream",A)}else i.once("ended",()=>{i.endEvent()})};return i.on("nearEnd",w),()=>{i.off("nearEnd",w)}},[d,l,o,p,i])}function YQ(o,i,l){const d=kV(),p=su(),[w,R]=gn.useState(null);return gn.useEffect(()=>{const g=document.querySelector(o);if(g==null||!p||!l)return;const A=new tz({containerElement:g,playerOptions:{autoPlay:!1,widevineLicenseUrl:i,policyQuery:l,preferredTech:"dashjs",customLicenceRequestHeaders:{"Api-version":"v1",Session:d}},eventClock:p});return R(A),()=>{A.destroy()}},[d,o,i,l,p]),w}function WQ(o){const i=su(),l=Af(),d=If(),p=tm(),[w,R]=gn.useState(),[g,A]=gn.useState();return gn.useEffect(()=>{if(!d||!i||!o||!l||!p)return;const U=({index:y})=>{var v;A((v=eb(y,d))!=null?v:JI(y,d,i)),R(o.currentCamera)},C=()=>{const y=o.currentCamera;(y==null?void 0:y.camera.transition)==="mapAndClosing"&&(A(EU(d,i.getExpectedPositionInSeconds(),2,y)),R(y))};return l.on("cast",U),p.on("transition",C),()=>{l.off("cast",U),p.off("transition",C)}},[d,i,o,l,p]),[w,g]}function hB({x:o,y:i,mapScale:l}){const[d,p]=gn.useState(0),[w,R]=gn.useState(0),[g,A]=gn.useState(0),[U,C]=gn.useState(0),[y,v]=gn.useState(0);return gn.useEffect(()=>{const D=window.innerWidth,m=window.innerHeight,T=D/12,F=m/12;C(m/2-m*.05),v(D/m),p(o*T),R(i*F),A(T*l)},[o,i,l]),{scaledX:d,scaledY:w,size:g,baseY:U,aspectRatio:y}}const $Q="_container_zht4e_1",XQ="_fadeIn_zht4e_1",QQ="_scrollWrapper_zht4e_15",JQ="_scrollContainer_zht4e_29",XA={container:$Q,fadeIn:XQ,scrollWrapper:QQ,scrollContainer:JQ};function eJ(){const o=IC();return It.jsxs("div",{className:XA.container,children:[It.jsx("h1",{children:o==null?void 0:o.postScreen.title}),It.jsx("p",{className:"body-text",style:{opacity:.5},children:o==null?void 0:o.postScreen.body}),It.jsx("div",{className:XA.scrollWrapper,children:It.jsx("div",{className:XA.scrollContainer,children:o&&o.postScreen.offersCollection.items.map((i,l)=>It.jsx("img",{src:i.image.url},l))})})]})}const tJ="_transitionWrapper_jyngr_1",nJ="_active_jyngr_17",rJ="_transition_jyngr_1",iJ="_fadeOut_jyngr_1",oJ="_hidden_jyngr_57",aJ="_visible_jyngr_67",sJ="_videoTitle_jyngr_77",uJ="_fadeIn_jyngr_1",og={transitionWrapper:tJ,active:nJ,transition:rJ,fadeOut:iJ,hidden:oJ,visible:aJ,videoTitle:sJ,fadeIn:uJ},lJ="_placeContainer_ywyae_1",cJ="_place_ywyae_1",fJ="_background_ywyae_45",dJ="_activePlace_ywyae_57",hJ="_fadeOut_ywyae_1",pJ="_normalPlace_ywyae_79",gJ="_selectedPlace_ywyae_99",mJ="_fadeIn_ywyae_1",vJ="_pulseEffect_ywyae_1",yJ="_title_ywyae_153",Xc={placeContainer:lJ,place:cJ,background:fJ,activePlace:dJ,fadeOut:hJ,normalPlace:pJ,selectedPlace:gJ,fadeIn:mJ,pulseEffect:vJ,title:yJ};var Is=(o=>(o.ACTIVE_PLACE="ActivePlace",o.SELECTED_PLACE="SelectedPlace",o.NORMAL_PLACE="NormalPlace",o))(Is||{});const EJ=({place:o,mapPlacesLength:i})=>{const l=hB({x:o.mapPosition.x,y:o.mapPosition.y,mapScale:o.mapScale}),d=gn.useMemo(()=>{switch(o.placeType){case Is.ACTIVE_PLACE:return Xc.activePlace;case Is.SELECTED_PLACE:return Xc.selectedPlace;case Is.NORMAL_PLACE:default:return Xc.normalPlace}},[o]);return It.jsx("div",{className:Xc.placeContainer,children:It.jsxs("div",{className:"".concat(Xc.place," ").concat(d),style:{width:l.size,height:l.size,left:"calc(50% + ".concat(i>1?l.scaledX:0,"px)"),top:"calc(50% + ".concat(i>1?l.scaledY:0,"px)"),transform:"translate(-50%, -50%)"},children:[It.jsx("div",{className:Xc.background}),(o.placeType===Is.ACTIVE_PLACE||o.placeType===Is.SELECTED_PLACE)&&It.jsx("div",{className:"subheader-light ".concat(Xc.title),children:o.title})]})})},_J="_followContainer_1h8ds_1",TJ="_follow_1h8ds_1",SJ="_selectedFollow_1h8ds_35",wJ="_pulseEffect_1h8ds_1",AJ="_notSelectedFollow_1h8ds_79",IJ="_iconContainer_1h8ds_97",bJ="_labelContainer_1h8ds_131",Zd={followContainer:_J,follow:TJ,selectedFollow:SJ,pulseEffect:wJ,notSelectedFollow:AJ,iconContainer:IJ,labelContainer:bJ},CJ="_label_svzic_1",RJ={label:CJ},xJ=({content:o,classNames:i=""})=>It.jsx("div",{className:"".concat(RJ.label," ").concat(i," label"),children:o}),NJ=({style:o})=>It.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 32 32",fill:"none",style:o,children:It.jsx("path",{d:"M24 19L16 11L8 19",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),pB=({classNames:o,styles:i,color:l,stroke:d})=>It.jsxs("svg",{className:o,style:i,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[It.jsx("path",{d:"M96 176C140.183 176 176 140.183 176 96C176 51.8172 140.183 16 96 16C51.8172 16 16 51.8172 16 96C16 140.183 51.8172 176 96 176Z",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),It.jsx("path",{d:"M96 64V108",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),It.jsx("circle",{cx:"96",cy:"128",r:"8",fill:l||"white"})]}),MJ=({classNames:o,styles:i,color:l,stroke:d})=>It.jsxs("svg",{className:o,style:i,xmlns:"http://www.w3.org/2000/svg",width:"192",height:"192",viewBox:"0 0 192 192",fill:"none",children:[It.jsx("path",{d:"M11.1475 18.5801L152.567 160",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round",strokeLinejoin:"round"}),It.jsx("circle",{cx:"96",cy:"160",r:"4",fill:"white"}),It.jsx("path",{d:"M180.853 75.1472C169.71 64.0041 156.481 55.165 141.922 49.1344C127.363 43.1039 111.758 40 95.9998 40C83.9607 40 72.0117 41.8116 60.55 45.3557M11.147 75.1472C20.7929 65.5013 32.0017 57.5818 44.2834 51.716",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),It.jsx("path",{d:"M152.569 103.431C145.14 96.0028 136.321 90.11 126.615 86.0896C116.909 82.0693 106.506 80 96.0002 80C95.7328 80 95.4656 80.0013 95.1984 80.004M39.4316 103.431C46.8603 96.0028 55.6795 90.11 65.3855 86.0896C68.6182 84.7506 71.9282 83.628 75.2936 82.7262",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"}),It.jsx("path",{d:"M124.294 131.725C120.58 128.011 116.17 125.065 111.317 123.055C106.464 121.044 101.263 120.01 96.0099 120.01C90.757 120.01 85.5555 121.044 80.7025 123.055C75.8495 125.065 71.4399 128.011 67.7256 131.726",stroke:l||"white",strokeWidth:d||"6",strokeLinecap:"round"})]}),DJ=()=>It.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[It.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),It.jsx("path",{d:"M149.333 96L120 125.333L106.667 112",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),PJ=()=>It.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 256 256",fill:"none",children:[It.jsx("path",{d:"M84 216H172M128 184V216M20 52.0008V172C20 178.627 25.3726 184 32 184H224C230.627 184 236 178.627 236 172V52C236 45.3726 230.627 40 224 40L32 40.0008C25.3726 40.0008 20 45.3734 20 52.0008Z",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),It.jsx("path",{d:"M144 96L112 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),It.jsx("path",{d:"M112 96L144 128",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}),OJ=()=>It.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[It.jsx("path",{d:"M2 12V44L16 36L32 44L46 36V4L32 12L16 4L2 12Z",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),It.jsx("path",{d:"M16 4V36",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),It.jsx("path",{d:"M32 12V44",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),LJ=()=>It.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:It.jsxs("g",{children:[It.jsx("path",{d:"M192,64H32C14.328,64,0,78.328,0,96v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S209.672,64,192,64z"}),It.jsx("path",{d:"M480,64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32V96\r\n		C512,78.328,497.672,64,480,64z"}),It.jsx("path",{d:"M480,288c-17.672,0-32,14.328-32,32v64H320c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32v-96\r\n		C512,302.328,497.672,288,480,288z"}),It.jsx("path",{d:"M192,384H64v-64c0-17.672-14.328-32-32-32S0,302.328,0,320v96c0,17.672,14.328,32,32,32h160c17.672,0,32-14.328,32-32\r\n		S209.672,384,192,384z"})]})}),kJ=()=>It.jsx("svg",{fill:"none",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:It.jsxs("g",{children:[It.jsx("path",{d:"M192,64c-17.672,0-32,14.328-32,32v64H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h160c17.672,0,32-14.328,32-32V96\r\n		C224,78.328,209.672,64,192,64z"}),It.jsx("path",{d:"M320,224h160c17.672,0,32-14.328,32-32s-14.328-32-32-32H352V96c0-17.672-14.328-32-32-32s-32,14.328-32,32v96\r\n		C288,209.672,302.328,224,320,224z"}),It.jsx("path",{d:"M480,288H320c-17.672,0-32,14.328-32,32v96c0,17.672,14.328,32,32,32s32-14.328,32-32v-64h128c17.672,0,32-14.328,32-32\r\n		S497.672,288,480,288z"}),It.jsx("path",{d:"M192,288H32c-17.672,0-32,14.328-32,32s14.328,32,32,32h128v64c0,17.672,14.328,32,32,32s32-14.328,32-32v-96\r\n		C224,302.328,209.672,288,192,288z"})]})}),FJ=({follow:o})=>{var p,w,R,g;const i=hB({x:(w=(p=o.mapPosition)==null?void 0:p.x)!=null?w:0,y:(g=(R=o.mapPosition)==null?void 0:R.y)!=null?g:0,mapScale:.6}),[l,d]=gn.useState(0);return gn.useEffect(()=>{function A(U,C,y){return-Math.atan2((U.x-C.x)*y,U.y-C.y)*(180/Math.PI)}o.mapPosition&&d(A(o.mapPositions[0],o.mapPositions[o.mapPositions.length-1],i.aspectRatio))},[o.mapPosition,o.mapPositions,i]),It.jsxs("div",{className:Zd.followContainer,style:{width:i.size,height:i.size,left:"calc(50% + ".concat(i.scaledX,"px)"),top:"calc(50% - ".concat(i.scaledY,"px)")},children:[It.jsx("div",{className:"".concat(Zd.follow," ").concat(o.isSelectedFollow?Zd.selectedFollow:Zd.notSelectedFollow," ").concat(Zd.iconContainer),children:It.jsx(NJ,{style:{transform:"rotate(".concat(l,"deg)")}})}),o.isSelectedFollow&&It.jsx(xJ,{classNames:Zd.labelContainer,content:o.title})]})},UJ=({fromCamera:o,toCamera:i})=>{const l=If(),d=su(),p=4200,w=p+3950,R=1900,[g,A]=gn.useState([]),[U,C]=gn.useState([]),[y,v]=gn.useState(!1),[D,m]=gn.useState(!1),[T,F]=gn.useState(""),N=gn.useRef([]),_=gn.useMemo(()=>{function ue(x,X){const fe=x.jumpSpots.map(Be=>Be.camera.span),ge=fe.map(Be=>Be.time).map(Be=>mi(Be,X.frameRate)),Re=Math.min(...ge),Je=fe.map(Be=>mi(Be.time,X.frameRate)+mi(Be.duration,X.frameRate)),Se=Math.max(...Je);return{start:Re,end:Se}}return l==null?void 0:l.places.filter(x=>x.jumpSpots.length>0).map((x,X)=>({...x,span:ue(x,l),placeType:Is.NORMAL_PLACE,placeIndex:X}))},[l]),I=gn.useMemo(()=>(l==null?void 0:l.follows.map(ue=>({...ue,isSelectedFollow:!1})))||[],[l]),b=gn.useCallback((ue,x)=>{const X=mi(ue.camera.span.time,x.frameRate)+2;return(_==null?void 0:_.filter(fe=>fe.span.start<=X&&X<=fe.span.end))||[]},[_]),j=gn.useCallback(ue=>{const x=ue.mapPositions[0]||{x:0,y:0};if(l&&d){const X=d.getExpectedPositionInSeconds()-mi(ue.camera.span.time,l.frameRate),fe=mi(ue.camera.span.duration,l.frameRate);let oe=Math.floor(X*4/fe);return X===fe&&(oe-=1),ue.mapPositions[oe]||x}return x},[d,l]),Y=gn.useCallback((ue,x)=>{const X=mi(ue.camera.span.time,x.frameRate)+2;return I.filter(fe=>mi(fe.camera.span.time,x.frameRate)<=X&&X<=mi(fe.camera.span.time,x.frameRate)+mi(fe.camera.span.duration,x.frameRate)).map(fe=>({...fe,mapPosition:j(fe)}))},[I,j]),$=gn.useCallback(ue=>_==null?void 0:_.find(x=>x.jumpSpots.some(X=>X.camera.assetName===ue.camera.assetName)),[_]),W=(ue,x)=>x.jumpSpots.some(X=>X.camera.assetName===ue.camera.assetName);return gn.useEffect(()=>{if(!_||!o||!i||!l||o.camera.assetName===i.camera.assetName)return;const ue=N.current;let x=[],X=[],fe=[],oe=[];if(F(i.placeTitle?i.placeTitle:i.title),o.type===tf.JUMPSPOT&&i.type===tf.JUMPSPOT&&o.placeIndex===i.placeIndex)m(!1),v(!0);else{switch(m(!0),o.type){case tf.JUMPSPOT:X=Y(i,l),x=b(o,l).map(Be=>W(o,Be)?{...Be,placeType:Is.ACTIVE_PLACE}:Be);break;case tf.FOLLOW:x=b(o,l),X=Y(o,l).map(Be=>({...Be,isSelectedFollow:o.camera.assetName===Be.camera.assetName}));break}switch(A(x),C(X),i.type){case tf.JUMPSPOT:oe=Y(o,l);const Be=x.find(st=>W(i,st));if(Be)fe=x.map(st=>({...st,placeType:st.placeIndex===Be.placeIndex?Is.SELECTED_PLACE:Is.NORMAL_PLACE}));else{const st=$(i);st&&(st.placeType=Is.SELECTED_PLACE,fe=[...x.map(Ie=>({...Ie,placeType:Is.NORMAL_PLACE})),st])}break;case tf.FOLLOW:fe=b(o,l),oe=Y(o,l);const ot=X.find(st=>st.camera.assetName===i.camera.assetName);if(ot)oe=X.map(st=>({...st,isSelectedFollow:st.camera.assetName===ot.camera.assetName}));else{const st=I.find(Ie=>Ie.camera.assetName===i.camera.assetName);if(st){const Ie={...st,isSelectedFollow:!0,mapPosition:j(st)};oe=[...X.map(Ye=>({...Ye,isSelectedFollow:!1})),Ie]}}break}}const ge=setTimeout(()=>{C(oe)},R);ue.push(ge);const Re=setTimeout(()=>{A(fe)},R);ue.push(Re);const Je=setTimeout(()=>{m(!1),v(!0)},p);ue.push(Je);const Se=setTimeout(()=>{v(!1)},w);return ue.push(Se),()=>{ue.forEach(Be=>{clearTimeout(Be)}),N.current=[]}},[o,i,_,I,Y,$,l,b,j,w]),It.jsxs("div",{className:"".concat(og.transitionWrapper," ").concat(D?og.active:""),children:[D&&It.jsxs("div",{className:"".concat(og.transition," ").concat(og.visible),children:[g.map((ue,x)=>It.jsx(EJ,{place:ue,mapPlacesLength:g.length},"place-".concat(x.toString()))),U.filter(ue=>ue.camera.assetName===(o==null?void 0:o.camera.assetName)||ue.camera.assetName===(i==null?void 0:i.camera.assetName)).map((ue,x)=>It.jsx(FJ,{follow:ue},"follow-".concat(x.toString())))]}),y&&It.jsx("h1",{className:og.videoTitle,style:{textShadow:"2px 2px 4px black"},children:T})]})},BJ="_playerPage_s22qw_1",jJ="_playerContainer_s22qw_13",ZJ="_fadeIn_s22qw_1",G3={playerPage:BJ,playerContainer:jJ,fadeIn:ZJ},GJ="_attention_1xh5o_1",qJ="_ripple1_1xh5o_1",HJ="_ripple2_1xh5o_1",KJ="_thirdRipple_1xh5o_81",VJ="_ripple3_1xh5o_1",zJ="_iconWrapper_1xh5o_105",QA={attention:GJ,ripple1:qJ,ripple2:HJ,thirdRipple:KJ,ripple3:VJ,iconWrapper:zJ},YJ=()=>{const o=tm(),[i,l]=gn.useState(!1),d=5e3;if(gn.useEffect(()=>{if(!o)return;let p;const w=()=>{l(!0),p=setTimeout(()=>{l(!1)},d)};return o.on("attention",w),()=>{o.off("attention",w),clearTimeout(p)}},[o]),!!i)return It.jsxs("div",{className:QA.attention,children:[It.jsx("span",{className:QA.iconWrapper,children:It.jsx(OJ,{})}),It.jsx("span",{className:QA.thirdRipple})]})};var WJ=Object.defineProperty,U0=Object.getOwnPropertySymbols,gB=Object.prototype.hasOwnProperty,mB=Object.prototype.propertyIsEnumerable,q3=(o,i,l)=>i in o?WJ(o,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[i]=l,Kg=(o,i)=>{for(var l in i||(i={}))gB.call(i,l)&&q3(o,l,i[l]);if(U0)for(var l of U0(i))mB.call(i,l)&&q3(o,l,i[l]);return o},YC=(o,i)=>{var l={};for(var d in o)gB.call(o,d)&&i.indexOf(d)<0&&(l[d]=o[d]);if(o!=null&&U0)for(var d of U0(o))i.indexOf(d)<0&&mB.call(o,d)&&(l[d]=o[d]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var yf;(o=>{const i=class{constructor(A,U,C,y){if(this.version=A,this.errorCorrectionLevel=U,this.modules=[],this.isFunction=[],A<i.MIN_VERSION||A>i.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=A*4+17;let v=[];for(let m=0;m<this.size;m++)v.push(!1);for(let m=0;m<this.size;m++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const D=this.addEccAndInterleave(C);if(this.drawCodewords(D),y==-1){let m=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const F=this.getPenaltyScore();F<m&&(y=T,m=F),this.applyMask(T)}}w(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(A,U){const C=o.QrSegment.makeSegments(A);return i.encodeSegments(C,U)}static encodeBinary(A,U){const C=o.QrSegment.makeBytes(A);return i.encodeSegments([C],U)}static encodeSegments(A,U,C=1,y=40,v=-1,D=!0){if(!(i.MIN_VERSION<=C&&C<=y&&y<=i.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let m,T;for(m=C;;m++){const I=i.getNumDataCodewords(m,U)*8,b=g.getTotalBits(A,m);if(b<=I){T=b;break}if(m>=y)throw new RangeError("Data too long")}for(const I of[i.Ecc.MEDIUM,i.Ecc.QUARTILE,i.Ecc.HIGH])D&&T<=i.getNumDataCodewords(m,I)*8&&(U=I);let F=[];for(const I of A){d(I.mode.modeBits,4,F),d(I.numChars,I.mode.numCharCountBits(m),F);for(const b of I.getData())F.push(b)}w(F.length==T);const N=i.getNumDataCodewords(m,U)*8;w(F.length<=N),d(0,Math.min(4,N-F.length),F),d(0,(8-F.length%8)%8,F),w(F.length%8==0);for(let I=236;F.length<N;I^=253)d(I,8,F);let _=[];for(;_.length*8<F.length;)_.push(0);return F.forEach((I,b)=>_[b>>>3]|=I<<7-(b&7)),new i(m,U,_,v)}getModule(A,U){return 0<=A&&A<this.size&&0<=U&&U<this.size&&this.modules[U][A]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const A=this.getAlignmentPatternPositions(),U=A.length;for(let C=0;C<U;C++)for(let y=0;y<U;y++)C==0&&y==0||C==0&&y==U-1||C==U-1&&y==0||this.drawAlignmentPattern(A[C],A[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(A){const U=this.errorCorrectionLevel.formatBits<<3|A;let C=U;for(let v=0;v<10;v++)C=C<<1^(C>>>9)*1335;const y=(U<<10|C)^21522;w(y>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,p(y,v));this.setFunctionModule(8,7,p(y,6)),this.setFunctionModule(8,8,p(y,7)),this.setFunctionModule(7,8,p(y,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,p(y,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,p(y,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,p(y,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let A=this.version;for(let C=0;C<12;C++)A=A<<1^(A>>>11)*7973;const U=this.version<<12|A;w(U>>>18==0);for(let C=0;C<18;C++){const y=p(U,C),v=this.size-11+C%3,D=Math.floor(C/3);this.setFunctionModule(v,D,y),this.setFunctionModule(D,v,y)}}drawFinderPattern(A,U){for(let C=-4;C<=4;C++)for(let y=-4;y<=4;y++){const v=Math.max(Math.abs(y),Math.abs(C)),D=A+y,m=U+C;0<=D&&D<this.size&&0<=m&&m<this.size&&this.setFunctionModule(D,m,v!=2&&v!=4)}}drawAlignmentPattern(A,U){for(let C=-2;C<=2;C++)for(let y=-2;y<=2;y++)this.setFunctionModule(A+y,U+C,Math.max(Math.abs(y),Math.abs(C))!=1)}setFunctionModule(A,U,C){this.modules[U][A]=C,this.isFunction[U][A]=!0}addEccAndInterleave(A){const U=this.version,C=this.errorCorrectionLevel;if(A.length!=i.getNumDataCodewords(U,C))throw new RangeError("Invalid argument");const y=i.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][U],v=i.ECC_CODEWORDS_PER_BLOCK[C.ordinal][U],D=Math.floor(i.getNumRawDataModules(U)/8),m=y-D%y,T=Math.floor(D/y);let F=[];const N=i.reedSolomonComputeDivisor(v);for(let I=0,b=0;I<y;I++){let j=A.slice(b,b+T-v+(I<m?0:1));b+=j.length;const Y=i.reedSolomonComputeRemainder(j,N);I<m&&j.push(0),F.push(j.concat(Y))}let _=[];for(let I=0;I<F[0].length;I++)F.forEach((b,j)=>{(I!=T-v||j>=m)&&_.push(b[I])});return w(_.length==D),_}drawCodewords(A){if(A.length!=Math.floor(i.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let U=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let y=0;y<this.size;y++)for(let v=0;v<2;v++){const D=C-v,T=(C+1&2)==0?this.size-1-y:y;!this.isFunction[T][D]&&U<A.length*8&&(this.modules[T][D]=p(A[U>>>3],7-(U&7)),U++)}}w(U==A.length*8)}applyMask(A){if(A<0||A>7)throw new RangeError("Mask value out of range");for(let U=0;U<this.size;U++)for(let C=0;C<this.size;C++){let y;switch(A){case 0:y=(C+U)%2==0;break;case 1:y=U%2==0;break;case 2:y=C%3==0;break;case 3:y=(C+U)%3==0;break;case 4:y=(Math.floor(C/3)+Math.floor(U/2))%2==0;break;case 5:y=C*U%2+C*U%3==0;break;case 6:y=(C*U%2+C*U%3)%2==0;break;case 7:y=((C+U)%2+C*U%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[U][C]&&y&&(this.modules[U][C]=!this.modules[U][C])}}getPenaltyScore(){let A=0;for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[v][F]==D?(m++,m==5?A+=i.PENALTY_N1:m>5&&A++):(this.finderPenaltyAddHistory(m,T),D||(A+=this.finderPenaltyCountPatterns(T)*i.PENALTY_N3),D=this.modules[v][F],m=1);A+=this.finderPenaltyTerminateAndCount(D,m,T)*i.PENALTY_N3}for(let v=0;v<this.size;v++){let D=!1,m=0,T=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][v]==D?(m++,m==5?A+=i.PENALTY_N1:m>5&&A++):(this.finderPenaltyAddHistory(m,T),D||(A+=this.finderPenaltyCountPatterns(T)*i.PENALTY_N3),D=this.modules[F][v],m=1);A+=this.finderPenaltyTerminateAndCount(D,m,T)*i.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let D=0;D<this.size-1;D++){const m=this.modules[v][D];m==this.modules[v][D+1]&&m==this.modules[v+1][D]&&m==this.modules[v+1][D+1]&&(A+=i.PENALTY_N2)}let U=0;for(const v of this.modules)U=v.reduce((D,m)=>D+(m?1:0),U);const C=this.size*this.size,y=Math.ceil(Math.abs(U*20-C*10)/C)-1;return w(0<=y&&y<=9),A+=y*i.PENALTY_N4,w(0<=A&&A<=2568888),A}getAlignmentPatternPositions(){if(this.version==1)return[];{const A=Math.floor(this.version/7)+2,U=this.version==32?26:Math.ceil((this.version*4+4)/(A*2-2))*2;let C=[6];for(let y=this.size-7;C.length<A;y-=U)C.splice(1,0,y);return C}}static getNumRawDataModules(A){if(A<i.MIN_VERSION||A>i.MAX_VERSION)throw new RangeError("Version number out of range");let U=(16*A+128)*A+64;if(A>=2){const C=Math.floor(A/7)+2;U-=(25*C-10)*C-55,A>=7&&(U-=36)}return w(208<=U&&U<=29648),U}static getNumDataCodewords(A,U){return Math.floor(i.getNumRawDataModules(A)/8)-i.ECC_CODEWORDS_PER_BLOCK[U.ordinal][A]*i.NUM_ERROR_CORRECTION_BLOCKS[U.ordinal][A]}static reedSolomonComputeDivisor(A){if(A<1||A>255)throw new RangeError("Degree out of range");let U=[];for(let y=0;y<A-1;y++)U.push(0);U.push(1);let C=1;for(let y=0;y<A;y++){for(let v=0;v<U.length;v++)U[v]=i.reedSolomonMultiply(U[v],C),v+1<U.length&&(U[v]^=U[v+1]);C=i.reedSolomonMultiply(C,2)}return U}static reedSolomonComputeRemainder(A,U){let C=U.map(y=>0);for(const y of A){const v=y^C.shift();C.push(0),U.forEach((D,m)=>C[m]^=i.reedSolomonMultiply(D,v))}return C}static reedSolomonMultiply(A,U){if(A>>>8||U>>>8)throw new RangeError("Byte out of range");let C=0;for(let y=7;y>=0;y--)C=C<<1^(C>>>7)*285,C^=(U>>>y&1)*A;return w(C>>>8==0),C}finderPenaltyCountPatterns(A){const U=A[1];w(U<=this.size*3);const C=U>0&&A[2]==U&&A[3]==U*3&&A[4]==U&&A[5]==U;return(C&&A[0]>=U*4&&A[6]>=U?1:0)+(C&&A[6]>=U*4&&A[0]>=U?1:0)}finderPenaltyTerminateAndCount(A,U,C){return A&&(this.finderPenaltyAddHistory(U,C),U=0),U+=this.size,this.finderPenaltyAddHistory(U,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(A,U){U[0]==0&&(A+=this.size),U.pop(),U.unshift(A)}};let l=i;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o.QrCode=l;function d(A,U,C){if(U<0||U>31||A>>>U)throw new RangeError("Value out of range");for(let y=U-1;y>=0;y--)C.push(A>>>y&1)}function p(A,U){return(A>>>U&1)!=0}function w(A){if(!A)throw new Error("Assertion error")}const R=class{constructor(A,U,C){if(this.mode=A,this.numChars=U,this.bitData=C,U<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(A){let U=[];for(const C of A)d(C,8,U);return new R(R.Mode.BYTE,A.length,U)}static makeNumeric(A){if(!R.isNumeric(A))throw new RangeError("String contains non-numeric characters");let U=[];for(let C=0;C<A.length;){const y=Math.min(A.length-C,3);d(parseInt(A.substr(C,y),10),y*3+1,U),C+=y}return new R(R.Mode.NUMERIC,A.length,U)}static makeAlphanumeric(A){if(!R.isAlphanumeric(A))throw new RangeError("String contains unencodable characters in alphanumeric mode");let U=[],C;for(C=0;C+2<=A.length;C+=2){let y=R.ALPHANUMERIC_CHARSET.indexOf(A.charAt(C))*45;y+=R.ALPHANUMERIC_CHARSET.indexOf(A.charAt(C+1)),d(y,11,U)}return C<A.length&&d(R.ALPHANUMERIC_CHARSET.indexOf(A.charAt(C)),6,U),new R(R.Mode.ALPHANUMERIC,A.length,U)}static makeSegments(A){return A==""?[]:R.isNumeric(A)?[R.makeNumeric(A)]:R.isAlphanumeric(A)?[R.makeAlphanumeric(A)]:[R.makeBytes(R.toUtf8ByteArray(A))]}static makeEci(A){let U=[];if(A<0)throw new RangeError("ECI assignment value out of range");if(A<128)d(A,8,U);else if(A<16384)d(2,2,U),d(A,14,U);else if(A<1e6)d(6,3,U),d(A,21,U);else throw new RangeError("ECI assignment value out of range");return new R(R.Mode.ECI,0,U)}static isNumeric(A){return R.NUMERIC_REGEX.test(A)}static isAlphanumeric(A){return R.ALPHANUMERIC_REGEX.test(A)}getData(){return this.bitData.slice()}static getTotalBits(A,U){let C=0;for(const y of A){const v=y.mode.numCharCountBits(U);if(y.numChars>=1<<v)return 1/0;C+=4+v+y.bitData.length}return C}static toUtf8ByteArray(A){A=encodeURI(A);let U=[];for(let C=0;C<A.length;C++)A.charAt(C)!="%"?U.push(A.charCodeAt(C)):(U.push(parseInt(A.substr(C+1,2),16)),C+=2);return U}};let g=R;g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o.QrSegment=g})(yf||(yf={}));(o=>{(i=>{const l=class{constructor(p,w){this.ordinal=p,this.formatBits=w}};let d=l;d.LOW=new l(0,1),d.MEDIUM=new l(1,0),d.QUARTILE=new l(2,3),d.HIGH=new l(3,2),i.Ecc=d})(o.QrCode||(o.QrCode={}))})(yf||(yf={}));(o=>{(i=>{const l=class{constructor(p,w){this.modeBits=p,this.numBitsCharCount=w}numCharCountBits(p){return this.numBitsCharCount[Math.floor((p+7)/17)]}};let d=l;d.NUMERIC=new l(1,[10,12,14]),d.ALPHANUMERIC=new l(2,[9,11,13]),d.BYTE=new l(4,[8,16,16]),d.KANJI=new l(8,[8,10,12]),d.ECI=new l(7,[0,0,0]),i.Mode=d})(o.QrSegment||(o.QrSegment={}))})(yf||(yf={}));var rh=yf;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var vB={L:rh.QrCode.Ecc.LOW,M:rh.QrCode.Ecc.MEDIUM,Q:rh.QrCode.Ecc.QUARTILE,H:rh.QrCode.Ecc.HIGH},yB=128,EB="L",_B="#FFFFFF",TB="#000000",SB=!1,WC=4,$J=.1;function wB(o,i=0){const l=[];return o.forEach(function(d,p){let w=null;d.forEach(function(R,g){if(!R&&w!==null){l.push("M".concat(w+i," ").concat(p+i,"h").concat(g-w,"v1H").concat(w+i,"z")),w=null;return}if(g===d.length-1){if(!R)return;w===null?l.push("M".concat(g+i,",").concat(p+i," h1v1H").concat(g+i,"z")):l.push("M".concat(w+i,",").concat(p+i," h").concat(g+1-w,"v1H").concat(w+i,"z"));return}R&&w===null&&(w=g)})}),l.join("")}function AB(o,i){return o.slice().map((l,d)=>d<i.y||d>=i.y+i.h?l:l.map((p,w)=>w<i.x||w>=i.x+i.w?p:!1))}function IB(o,i,l,d){if(d==null)return null;const p=l?WC:0,w=o.length+p*2,R=Math.floor(i*$J),g=w/i,A=(d.width||R)*g,U=(d.height||R)*g,C=d.x==null?o.length/2-A/2:d.x*g,y=d.y==null?o.length/2-U/2:d.y*g;let v=null;if(d.excavate){let D=Math.floor(C),m=Math.floor(y),T=Math.ceil(A+C-D),F=Math.ceil(U+y-m);v={x:D,y:m,w:T,h:F}}return{x:C,y,h:U,w:A,excavation:v}}var XJ=function(){try{new Path2D().addPath(new Path2D)}catch(o){return!1}return!0}();function QJ(o){const i=o,{value:l,size:d=yB,level:p=EB,bgColor:w=_B,fgColor:R=TB,includeMargin:g=SB,style:A,imageSettings:U}=i,C=YC(i,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),y=U==null?void 0:U.src,v=gn.useRef(null),D=gn.useRef(null),[m,T]=gn.useState(!1);gn.useEffect(()=>{if(v.current!=null){const _=v.current,I=_.getContext("2d");if(!I)return;let b=rh.QrCode.encodeText(l,vB[p]).getModules();const j=g?WC:0,Y=b.length+j*2,$=IB(b,d,g,U),W=D.current,ue=$!=null&&W!==null&&W.complete&&W.naturalHeight!==0&&W.naturalWidth!==0;ue&&$.excavation!=null&&(b=AB(b,$.excavation));const x=window.devicePixelRatio||1;_.height=_.width=d*x;const X=d/Y*x;I.scale(X,X),I.fillStyle=w,I.fillRect(0,0,Y,Y),I.fillStyle=R,XJ?I.fill(new Path2D(wB(b,j))):b.forEach(function(fe,oe){fe.forEach(function(ge,Re){ge&&I.fillRect(Re+j,oe+j,1,1)})}),ue&&I.drawImage(W,$.x+j,$.y+j,$.w,$.h)}}),gn.useEffect(()=>{T(!1)},[y]);const F=Kg({height:d,width:d},A);let N=null;return y!=null&&(N=ru.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{T(!0)},ref:D})),ru.createElement(ru.Fragment,null,ru.createElement("canvas",Kg({style:F,height:d,width:d,ref:v},C)),N)}function JJ(o){const i=o,{value:l,size:d=yB,level:p=EB,bgColor:w=_B,fgColor:R=TB,includeMargin:g=SB,imageSettings:A}=i,U=YC(i,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let C=rh.QrCode.encodeText(l,vB[p]).getModules();const y=g?WC:0,v=C.length+y*2,D=IB(C,d,g,A);let m=null;A!=null&&D!=null&&(D.excavation!=null&&(C=AB(C,D.excavation)),m=ru.createElement("image",{xlinkHref:A.src,height:D.h,width:D.w,x:D.x+y,y:D.y+y,preserveAspectRatio:"none"}));const T=wB(C,y);return ru.createElement("svg",Kg({height:d,width:d,viewBox:"0 0 ".concat(v," ").concat(v)},U),ru.createElement("path",{fill:w,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),ru.createElement("path",{fill:R,d:T,shapeRendering:"crispEdges"}),m)}var $C=o=>{const i=o,{renderAs:l}=i,d=YC(i,["renderAs"]);return l==="svg"?ru.createElement(JJ,Kg({},d)):ru.createElement(QJ,Kg({},d))};const eee="_container_1l3tn_1",tee="_qrCode_1l3tn_25",nee="_text_1l3tn_35",JA={container:eee,qrCode:tee,text:nee},ree=({url:o})=>It.jsxs("div",{className:JA.container,children:[It.jsx("p",{className:"body-text ".concat(JA.text),style:{opacity:.75},children:"Scan the QR code with the app."}),It.jsx($C,{className:JA.qrCode,bgColor:"white",fgColor:"black",value:o,size:500})]}),iee="_controlsWrapper_1v4q3_1",oee="_hidden_1v4q3_21",aee="_iconWrapper_1v4q3_29",eI={controlsWrapper:iee,hidden:oee,iconWrapper:aee},see=({visible:o,eventPlayer:i})=>{const[l,d]=gn.useState(!1),p=()=>{i&&(l?i.exitFullscreen().then(()=>{d(!1)}):i.requestFullscreen().then(()=>{d(!0)}))};return It.jsx("div",{className:"".concat(eI.controlsWrapper," ").concat(o?"":eI.hidden),children:It.jsx("div",{className:eI.iconWrapper,onClick:p,children:l?It.jsx(kJ,{}):It.jsx(LJ,{})})})},uee="_warningContainer_1tqkb_1",lee={warningContainer:uee},bB=()=>It.jsxs("div",{className:lee.warningContainer,children:[It.jsx(pB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),It.jsx("p",{className:"label",children:"Finish setup on your mobile or tablet. "})]}),cee="_messageContainer_1jzyd_3",fee="_message_1jzyd_3",H3={messageContainer:cee,message:fee},dee=({message:o})=>It.jsx("div",{className:H3.messageContainer,children:It.jsx("div",{className:"".concat(H3.message," subheader-light"),children:o})});function hee(){const[o,i,l]=wU(),d=bC(),p=YQ("#playerContainer",i,l),[w,R]=gn.useState(!1),[g,A]=gn.useState(),U=CC(),C=gn.useRef(),y=gn.useMemo(()=>{const F=window.navigator.userAgent;return new RegExp("_TV_[A-Z0-9]+_([0-9]{4});").test(F)},[]);gn.useEffect(()=>{const F=U==null?void 0:U.find(N=>N.deviceId===vh);A(F)},[U]);const v=!!(U!=null&&U.filter(F=>F.deviceId!==vh));KQ(p),VQ(p),zQ(p);const[D,m]=WQ(p);HQ();const T=()=>{y||(R(!0),clearTimeout(C.current),C.current=setTimeout(()=>{R(!1)},3e3))};return It.jsxs("div",{className:G3.playerPage,onMouseMove:T,children:[It.jsxs("div",{id:"playerContainer",className:G3.playerContainer,children:[d&&It.jsx(HV,{eventPlayer:p}),It.jsx(YJ,{}),It.jsx(see,{visible:w,eventPlayer:p}),(g==null?void 0:g.stateInfo.state)==="showQrCode"&&It.jsx(ree,{url:"".concat(_C,":").concat(g.deviceId)}),It.jsx(UJ,{fromCamera:D,toCamera:m})]}),!v&&It.jsx(dee,{message:It.jsx(bB,{})})]})}const pee="_gradientBackground_b6nct_1",gee="_container_b6nct_15",mee="_fadeIn_b6nct_1",vee="_connectedTV_b6nct_45",yee="_disconnectedTV_b6nct_47",Eee="_popIn_b6nct_1",_ee="_iconContainer_b6nct_105",Tee="_connectedText_b6nct_121",Gd={gradientBackground:pee,container:gee,fadeIn:mee,connectedTV:vee,disconnectedTV:yee,popIn:Eee,iconContainer:_ee,connectedText:Tee},See=({isDisconnected:o})=>It.jsx("div",{className:Gd.gradientBackground,children:It.jsxs("div",{className:Gd.container,children:[It.jsx("div",{className:o?Gd.disconnectedTV:Gd.connectedTV,children:It.jsx("div",{className:Gd.iconContainer,children:o?It.jsx(PJ,{}):It.jsx(DJ,{})})}),It.jsx("h1",{className:Gd.connectedText,children:o?"TV disconnected":"TV connected"})]})}),wee="_hidden_zykq7_1",Aee={hidden:wee},Iee="_gradientBackground_14xmh_1",bee="_container_14xmh_15",Cee="_fadeIn_14xmh_1",Ree="_imageWrapper_14xmh_45",xee="_listText_14xmh_57",Nee="_boldText_14xmh_57",Mee="_image_14xmh_45",Dee="_glow_14xmh_91",Pee="_dividerWrapper_14xmh_119",Oee="_divider_14xmh_119",Lee="_buttonsWrapper_14xmh_149",kee="_testButton_14xmh_185",Fee="_demoButton_14xmh_195",Uee="_logoutButton_14xmh_203",Bee="_title_14xmh_215",jee="_countdownWrapper_14xmh_225",Zee="_timeSectionContainer_14xmh_253",Gee="_timeSection_14xmh_253",qee="_countdownTitle_14xmh_277",Hee="_label_14xmh_285",Kee="_logos_14xmh_293",Vee="_warning_14xmh_339",ki={gradientBackground:Iee,container:bee,fadeIn:Cee,imageWrapper:Ree,listText:xee,boldText:Nee,image:Mee,glow:Dee,dividerWrapper:Pee,divider:Oee,buttonsWrapper:Lee,testButton:kee,demoButton:Fee,logoutButton:Uee,title:Bee,countdownWrapper:jee,timeSectionContainer:Zee,timeSection:Gee,countdownTitle:qee,label:Hee,logos:Kee,warning:Vee},zee="_errorContainer_1vpqa_1",Yee={errorContainer:zee},Wee=({errorIcon:o,errorMessage:i,errorName:l})=>It.jsxs("div",{className:Yee.errorContainer,children:[o&&It.jsx("div",{children:o}),It.jsx("span",{className:"body-text",children:"".concat(l&&"".concat(l,".")," ").concat(i)})]}),$ee="_gradientBackground_1pfse_1",Xee="_container_1pfse_19",Qee="_qrCode_1pfse_33",tI={gradientBackground:$ee,container:Xee,qrCode:Qee},Jee=({url:o})=>It.jsxs("div",{className:"".concat(tI.gradientBackground," ").concat(tI.container),children:[It.jsx($C,{className:tI.qrCode,bgColor:"white",fgColor:"black",value:o,size:500}),It.jsx("p",{className:"body-text",children:"Scan the QR code with the app."})]}),ete=({timeToLive:o})=>{const i=ZV(),l=su(),d=IC(),p=bC(),w=CC(),[R,g]=gn.useState(),[A,U]=gn.useState("00:00:00:00"),[C,y]=gn.useState(!1),v=gn.useRef(null),D=5;gn.useEffect(()=>{const b=w==null?void 0:w.filter(j=>j.deviceId!==vh);y(!!(b!=null&&b.length))},[w]),gn.useEffect(()=>{const b=w==null?void 0:w.find(j=>j.deviceId===vh);g(b)},[w]);let m;(b=>{b.BEFORE="before",b.MIDDLE="middle",b.END="end"})(m||(m={}));const T=b=>{if(l){let j=new Date;switch(b){case"end":j=new Date(l.demoEndtime);break;case"middle":j.setMinutes(j.getMinutes()-22);break;default:case"before":j.setSeconds(j.getSeconds()+D);break}l.updateStartTime(j,!0)}};gn.useEffect(()=>{if(o&&o>0){const b=W=>{const ue=Date.parse(W.toString())-Date.parse(new Date().toString()),x=Math.floor(ue/1e3%60),X=Math.floor(ue/1e3/60%60),fe=Math.floor(ue/1e3/60/60%24),oe=Math.floor(ue/1e3/60/60/24);return{total:ue,days:oe,hours:fe,minutes:X,seconds:x}},j=W=>{const{total:ue,days:x,hours:X,minutes:fe,seconds:oe}=b(W);ue>=0&&U((x>9?x:"0"+x)+":"+(X>9?X:"0"+X)+":"+(fe>9?fe:"0"+fe)+":"+(oe>9?oe:"0"+oe))};(W=>{v.current&&clearInterval(v.current),j(W);const ue=setInterval(()=>{j(W)},1e3);v.current=ue})((W=>{const ue=new Date;return ue.setSeconds(ue.getSeconds()+Math.floor(W/1e3)),ue})(o))}},[o]);const[F,N,_,I]=A.split(":");if(R&&R.stateInfo.state==="showQrCode"){const b="".concat(_C,":").concat(R.deviceId);return It.jsx(Jee,{url:b})}return It.jsxs("div",{className:ki.container,children:[p&&It.jsx("div",{className:ki.buttonsWrapper,children:It.jsxs("div",{children:[It.jsx(jo,{className:"".concat(ki.demoButton," ").concat(ki.testButton),onClick:()=>{T("before")},selfFocus:!0,children:"Before"}),It.jsx(jo,{className:ki.testButton,onClick:()=>{T("middle")},children:"Middle"}),It.jsx(jo,{className:ki.testButton,onClick:()=>{T("end")},children:"End"})]})}),i.map((b,j)=>It.jsx(Wee,{errorMessage:b.toString},"".concat(b.name,"-error-").concat(j.toString()))),It.jsxs("div",{className:ki.imageWrapper,children:[It.jsx("div",{className:ki.glow}),It.jsx("img",{className:ki.image,src:"".concat(d==null?void 0:d.preScreen.backgroundLandscape.url)})]}),It.jsxs("div",{className:ki.countdownWrapper,children:[It.jsx("div",{className:"".concat(ki.title," subheader-bold"),children:d==null?void 0:d.preScreen.showTitle}),It.jsx("div",{className:ki.dividerWrapper,children:It.jsx("div",{className:ki.divider})}),It.jsx("p",{className:"body-text ".concat(ki.countdownTitle),children:"Starts in"}),It.jsxs("div",{className:ki.timeSectionContainer,children:[It.jsxs("div",{className:ki.timeSection,children:[It.jsx("div",{className:"subheader-bold",children:F}),It.jsx("div",{className:"".concat(ki.label," label"),children:"days"})]}),It.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),It.jsxs("div",{className:ki.timeSection,children:[It.jsx("div",{className:"subheader-bold",children:N}),It.jsx("div",{className:"".concat(ki.label," label"),children:"hours"})]}),It.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),It.jsxs("div",{className:ki.timeSection,children:[It.jsx("div",{className:"subheader-bold",children:_}),It.jsx("div",{className:"".concat(ki.label," label"),children:"mins"})]}),It.jsx("div",{className:"subheader-bold",style:{opacity:.5},children:":"}),It.jsxs("div",{className:ki.timeSection,children:[It.jsx("div",{className:"subheader-bold",children:I}),It.jsx("div",{className:"".concat(ki.label," label"),children:"secs"})]})]})]}),It.jsx("div",{className:ki.warning,children:!C&&D0==="new"&&It.jsx(bB,{})})]})},tte="_wrapper_7lsmt_1",nte="_container_7lsmt_21",rte="_qrCodeContainer_7lsmt_41",ite="_qrCode_7lsmt_41",ote="_listContainer_7lsmt_67",ate="_list_7lsmt_67",ste="_listItemContainer_7lsmt_101",ute="_listNumber_7lsmt_115",lte="_listText_7lsmt_137",cte="_circleRightCorner_7lsmt_149",fte="_circleLeftCorner_7lsmt_173",dte="_circleCenter_7lsmt_195",hte="_errorMessage_7lsmt_219",pte="_fadeIn_7lsmt_1",ho={wrapper:tte,container:nte,qrCodeContainer:rte,qrCode:ite,listContainer:ote,list:ate,listItemContainer:ste,listNumber:ute,listText:lte,circleRightCorner:cte,circleLeftCorner:fte,circleCenter:dte,errorMessage:hte,fadeIn:pte},gte=({url:o})=>{const i=BV(),l=jV(),d=p=>{if(p.name===_a.NEGOTIATE)switch(p.code){case 400:p.title=i("ticket-entry","error.toManyDevices.title"),p.message=i("ticket-entry","error.toManyDevices.body");break;case 401:p.title=i("ticket-entry","error.invalidCode.title"),p.message=i("ticket-entry","error.invalidCode.body");break;case 403:p.title=i("ticket-entry","error.codeNoLongerValid.title"),p.message=i("ticket-entry","error.codeNoLongerValid.body");break;case 404:p.title="Not Found",p.message="Ticket was not found";break}else if(p.name===_a.CONTENTFUL)switch(p.code){case 400:p.message="Could not fetch contentful environment"}return p.toString};return It.jsxs("div",{className:ho.wrapper,children:[It.jsx("div",{className:ho.circleRightCorner}),It.jsx("div",{className:ho.circleLeftCorner}),It.jsx("div",{className:ho.circleCenter}),It.jsxs("div",{className:ho.container,children:[It.jsxs("div",{className:"".concat(ho.listContainer," body-text"),children:[It.jsx("h1",{style:{lineHeight:"3rem"},children:"Connect your TV"}),It.jsxs("div",{className:ho.list,children:[It.jsxs("span",{className:ho.listItemContainer,children:[It.jsx("span",{className:ho.listNumber,children:"1"}),It.jsxs("span",{className:ho.listText,children:["Download the ",It.jsx("span",{className:"bold-text",children:"Imagien Parallel"})," ","app on your mobile or tablet."]})]}),It.jsxs("span",{className:ho.listItemContainer,children:[It.jsx("span",{className:ho.listNumber,children:"2"}),It.jsx("span",{className:ho.listText,children:"Enter the ticket code from your confirmation email."})]}),It.jsxs("span",{className:ho.listItemContainer,children:[It.jsx("span",{className:ho.listNumber,children:"3"}),It.jsx("span",{className:ho.listText,children:"Scan the QR code with the app."})]})]})]}),It.jsx("div",{className:ho.qrCodeContainer,children:It.jsx("div",{className:ho.qrCode,children:It.jsx($C,{bgColor:"white",fgColor:"black",value:o!=null?o:"",size:512})})})]}),It.jsx("div",{className:ho.errorMessage,children:l.map((p,w)=>It.jsx("h3",{className:ho.errorMessage,children:d(p)},"".concat(p.name,"-error-").concat(w.toString())))})]})},mte="_container_zht4e_1",vte="_fadeIn_zht4e_1",yte="_scrollWrapper_zht4e_15",Ete="_scrollContainer_zht4e_29",nI={container:mte,fadeIn:vte,scrollWrapper:yte,scrollContainer:Ete};function _te(){const o=IC();return It.jsxs("div",{className:nI.container,children:[It.jsx("h1",{children:"Oh no! This event has been canceled."}),It.jsx("div",{className:nI.scrollWrapper,children:It.jsx("div",{className:nI.scrollContainer,children:o&&o.postScreen.offersCollection.items.map((i,l)=>It.jsx("img",{src:i.image.url},l))})})]})}function Tte(){const o=su();UV();const i=tm(),l=LV(),d=Af(),p=CC(),[w,R]=gn.useState(!1),[g,A]=gn.useState(!1),[U,C]=gn.useState(!1),[y,v]=gn.useState(),[D,m]=gn.useState(!1),[T,F]=gn.useState(!1),[N,_]=gn.useState(!1),[I,b]=gn.useState(),[j,Y]=gn.useState(),$="".concat(_C,":").concat(vh);if(gn.useEffect(()=>{p&&b(p.find(W=>W.deviceId===vh)||p[0])},[p]),gn.useEffect(()=>{Y(I==null?void 0:I.stateInfo.state)},[I]),gn.useEffect(()=>{if(!o)return;const W=()=>{o.adjustedEndTime&&o.adjustedEndTime<Date.now()?A(!0):o.adjustedStartTime&&(A(!1),v(o.adjustedStartTime-Date.now()))};return o.on("startTimeUpdated",W),()=>{o.off("startTimeUpdated",W)}},[o]),gn.useEffect(()=>{if(!i)return;const W=()=>{A(!0)};return i.on("eventEnded",W),()=>{i.off("eventEnded",W)}},[i]),gn.useEffect(()=>{if(!d)return;const W=()=>{C(!0)};return d.on("eventCanceled",W),()=>{d.off("eventCanceled",W)}},[d]),gn.useEffect(()=>{if(!D)return;F(!0);const W=setTimeout(()=>{m(!1)},1500);return()=>{clearTimeout(W)}},[D]),gn.useEffect(()=>{if(y)if(y>0){R(!1);const W=setTimeout(()=>{R(!0)},y);return()=>{clearTimeout(W)}}else R(!0)},[y]),gn.useEffect(()=>{j==="hostTv"?(_(!0),m(!0)):l===XI.CONNECTED_STATE&&D0!=="new"&&m(!0)},[j,l]),U)return It.jsx(_te,{});if(g)return It.jsx(eJ,{});{if(!N&&j===void 0)return It.jsx(It.Fragment,{children:It.jsx(gte,{url:$})});if(D&&!T)return It.jsx(See,{})}return It.jsxs("div",{children:[It.jsx("div",{className:w?"":Aee.hidden,children:It.jsx(hee,{})}),!w&&It.jsx(ete,{timeToLive:y})]})}const Ste=()=>{const[o,i]=gn.useState(0);return gn.useEffect(()=>{const l=p=>{i(p.keyCode)},d=()=>{i(0)};return document.addEventListener("keydown",l),document.addEventListener("keyup",d),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",d)}},[]),o};function wte(){switch(EC()){case lc.TIZEN:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:10009,KEY_MEDIA_STOP:413};case lc.WEBOS:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:461,KEY_MEDIA_STOP:413};case lc.WEB:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83};default:return{KEY_UP:38,KEY_DOWN:40,KEY_LEFT:37,KEY_RIGHT:39,KEY_OK:13,KEY_MEDIA_PLAY:415,KEY_MEDIA_PAUSE:19,KEY_BACK:8,KEY_MEDIA_STOP:83}}}const Qc=wte(),Ate="_popupWrapper_19u5b_1",Ite="_popup_19u5b_1",bte="_controls_19u5b_59",Cte="_focused_19u5b_93",ag={popupWrapper:Ate,popup:Ite,controls:bte,focused:Cte};function Rte({close:o}){const i=Af(),l=async()=>{const d=EC();i!=null&&i.connected&&await i.destroy(),localStorage.removeItem("ticketCode"),setTimeout(()=>{switch(d){case lc.TIZEN:window.tizen.application.getCurrentApplication().exit();break;case lc.WEBOS:window.close();break;default:location.reload();break}},1e3)};return It.jsx("div",{className:ag.popupWrapper,children:It.jsxs("div",{className:ag.popup,children:[It.jsx("h3",{children:"Would you like to exit app?"}),It.jsxs("div",{className:ag.controls,children:[It.jsx(jo,{onClick:o,selfFocus:!0,focusstile:ag.focused,children:"Cancel"}),It.jsx(jo,{onClick:l,focusstile:ag.focused,children:"Confirm"})]})]})})}const xte="_popupWrapper_ohcuf_1",Nte="_popup_ohcuf_1",Mte="_focused_ohcuf_89",rI={popupWrapper:xte,popup:Nte,focused:Mte};function Dte({close:o}){return It.jsx("div",{className:rI.popupWrapper,children:It.jsxs("div",{className:rI.popup,children:[It.jsx(MJ,{styles:{width:"96px",height:"96px"}}),It.jsx("h3",{children:"No Internet connection"}),It.jsx("span",{children:"Check your connection and try again."}),It.jsx(jo,{onClick:o,selfFocus:!0,focusstile:rI.focused,children:"OK"})]})})}const Pte="_warningContainer_1q3xx_1",Ote={warningContainer:Pte},Lte=()=>It.jsxs("div",{className:Ote.warningContainer,children:[It.jsx(pB,{styles:{width:"42px",height:"42px"},stroke:"12",color:"#FFAA46"}),It.jsx("p",{className:"label",children:"Unsupported key pressed "})]});function kte(){const o=Ste(),[i,l]=gn.useState(),d=gn.useRef(),p=()=>{l(void 0)};switch(gn.useEffect(()=>(window.addEventListener("offline",()=>{l("network")}),window.addEventListener("online",()=>{p()}),()=>{window.removeEventListener("online",()=>{}),window.removeEventListener("offline",()=>{})}),[]),gn.useEffect(()=>{o===Qc.KEY_BACK?l("exit"):[Qc.KEY_UP,Qc.KEY_DOWN,Qc.KEY_LEFT,Qc.KEY_RIGHT,Qc.KEY_OK,Qc.KEY_BACK,0].includes(o)||(l("key_support"),clearTimeout(d.current),d.current=setTimeout(()=>{p()},3e3))},[o]),i){case"exit":return It.jsx(Rte,{close:p});case"network":return It.jsx(Dte,{close:p});case"key_support":return It.jsx(Lte,{});default:return}}gU.init({debug:!1,shouldUseNativeEvents:!0});function Fte(){const o=localStorage.getItem("ticketCode"),[i,l]=gn.useState(o!=null?o:"");return It.jsx("div",{className:RK.pageContainer,children:It.jsxs(DV,{baseUrl:TK,preferredProfile:"dash-drm",contentfulAccessToken:SK,contentfulSpaceId:wK,newSetupToggle:D0==="new",ticketCodeProp:i,children:[D0!=="new",It.jsx(Tte,{}),It.jsx(kte,{})]})})}iI.createRoot(document.getElementById("root")).render(It.jsx(Fte,{}));export{Ute as __vite_legacy_guard};
